import{c as Cs,a as Hs,o as Dl,u as Sm,s as NF,b as rr,d as xm,e as zW,t as Ei,f as MF,i as ji,g as KW,h as W0,j as hn,I as rk,k as RF,l as GW,_ as Qc,m as qW,n as ZW,p as Nf,q as tM,F as YW,S as Uw,r as XW,v as QW,w as JW,M as nM,x as e6,y as t6,z as jw,A as iM}from"./index.js";const n6=Ei('<div class="relative h-full w-full"><iframe title="Solid REPL" class="dark:bg-other row-start-5 block h-full w-full overflow-auto bg-white p-0" sandbox="allow-popups-to-escape-sandbox allow-scripts allow-popups allow-forms allow-pointer-lock allow-top-navigation allow-modals allow-same-origin"></iframe></div>'),i6=r=>{const{zoomState:e}=MF();let t;const[n,i]=Cs(!1);try{localStorage.getItem("panel-selectedTab")||localStorage.setItem("panel-selectedTab",'"console"')}catch{}Hs(()=>{if(!r.code||!n())return;const h=new Blob([r.code],{type:"text/javascript"}),f=URL.createObjectURL(h);Dl(()=>URL.revokeObjectURL(f)),t.contentWindow.postMessage({event:"CODE_UPDATE",value:f},"*")}),Hs(()=>{n()&&t.contentWindow.postMessage({event:"DEVTOOLS",value:r.devtools},"*")}),Hs(()=>{n()&&(t.contentDocument.documentElement.classList.toggle("dark",r.isDark),t.contentWindow.postMessage({event:"THEME",value:r.isDark},"*"))});const s=navigator.userAgent.toLowerCase(),a=/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/.test(s)?`<script src="https://cdn.jsdelivr.net/npm/chii@1.2.0/public/target.js" embedded="true" cdn="https://cdn.jsdelivr.net/npm/chii@1.2.0/public"><\/script>
      <script>
        let bodyHeight;
        window.addEventListener('message', async ({ data }) => {
          try {
            const { event, value } = data;

            if (event === 'DEVTOOLS') {
              const iframe = document.querySelector('.__chobitsu-hide__ iframe')
              if (value) {
                iframe.parentElement.style.display = 'block';
                if (bodyHeight) {
                  document.body.style.height = bodyHeight + 'px';
                }
              } else {
                iframe.parentElement.style.display = 'none';
                bodyHeight = document.body.style.height;
                document.body.style.height = 'auto';
              }
            }
          } catch (e) {
            console.error(e)
          }
        });
      <\/script>`:`<script src="https://cdn.jsdelivr.net/npm/eruda"><\/script>
      <script src="https://cdn.jsdelivr.net/npm/eruda-dom"><\/script>
      <script type="module">
        eruda.init({
          tool: ["console", "network", "resources", "elements"],
          defaults: {
            displaySize: 40,
          }
        });
        eruda.add(erudaDom);
        eruda.position({ x: window.innerWidth - 30, y: window.innerHeight - 30 });
        const style = Object.assign(document.createElement('link'), {
          rel: 'stylesheet',
          href: '${location.origin}/eruda.css'
        });
        eruda._shadowRoot.appendChild(style);
        window.addEventListener('message', async ({ data }) => {
          try {
            const { event, value } = data;

            if (event === 'DEVTOOLS') {
              if (value) eruda.show();
              else eruda.hide();
            } else if (event === 'THEME') {
              eruda._devTools.config.set('theme', value ? 'Dark' : 'Light');
              eruda._$el[0].style.colorScheme = value ? 'dark' : 'light';
            }
          } catch (e) {
            console.error(e)
          }
        });
      <\/script>`,l=`
    <!doctype html>
    <html${r.isDark?' class="dark"':""}>
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link href="https://unpkg.com/modern-normalize@1.1.0/modern-normalize.css" rel="stylesheet">

        <style>
          html, body {
            position: relative;
            width: 100%;
            height: 100%;
          }

          body {
            color: #333;
            margin: 0;
            padding: 8px;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            max-width: 100%;
          }

          .dark body {
            color: #e5e7eb;
          }

          .dark {
            color-scheme: dark;
          }

          input, button, select, textarea {
            padding: 0.4em;
            margin: 0 0 0.5em 0;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 2px;
          }

          button {
            color: #333;
            background-color: #f4f4f4;
            outline: none;
          }

          button:disabled {
            color: #999;
          }

          button:not(:disabled):active {
            background-color: #ddd;
          }

          button:focus {
            border-color: #666;
          }
		    </style>
        ${a}
        <script type="module">
          window.addEventListener('message', async ({ data }) => {
            const { event, value } = data;

            if (event !== 'CODE_UPDATE') return;

            window.dispose?.();
            window.dispose = undefined;

            document.getElementById('app').innerHTML = "";

            console.clear();

            document.getElementById('appsrc')?.remove();
            const script = document.createElement('script');
            script.src = value;
            script.id = 'appsrc';
            script.type = 'module';
            document.body.appendChild(script);

            const load = document.getElementById('load');
            if (load) load.remove();
          })
        <\/script>
      </head>
      
      <body>
        <div id="load" style="display: flex; height: 80vh; align-items: center; justify-content: center;">
          <p style="font-size: 1.5rem">Loading the playground...</p>
        </div>
        <div id="app"></div>
        <script id="appsrc" type="module"><\/script>
      </body>
    </html>`,c=new Blob([l],{type:"text/html"}),d=URL.createObjectURL(c);Dl(()=>URL.revokeObjectURL(d)),Hs(()=>{r.reloadSignal&&(i(!1),t.src=d)});const u=()=>e.scale===100||!e.scaleIframe?"":`width: ${e.scale}%; height: ${e.scale}%; transform: scale(${e.zoom/100}); transform-origin: 0 0;`;return(()=>{const h=n6.cloneNode(!0),f=h.firstChild;f.addEventListener("load",_=>i(!0,_));const g=t;return typeof g=="function"?Sm(g,f):t=f,NF(f,"src",d),rr(_=>{const b=r.classList,v=u();return _._v$=xm(f,b,_._v$),_._v$2=zW(f,v,_._v$2),_},{_v$:void 0,_v$2:void 0}),h})()},s6=Ei("<li></li>"),r6=Ei('<ul class="tabs m-0 flex list-none flex-wrap items-center"></ul>'),ah=r=>(()=>{const e=s6.cloneNode(!0);return ji(e,()=>r.children),rr(t=>{const n=`border-brand-default relative inline-flex items-center overflow-hidden border-b-2 bg-slate-500 bg-opacity-0 font-sans text-sm leading-snug transition hover:bg-opacity-5 dark:border-gray-200 ${r.class||""}`,i={"border-opacity-90 dark:border-opacity-90 hover:border-opacity-100":r.active||!1,"border-opacity-0 dark:border-opacity-0 hover:border-opacity-10 dark:hover:border-opacity-10":!r.active};return n!==t._v$&&KW(e,t._v$=n),t._v$2=xm(e,i,t._v$2),t},{_v$:void 0,_v$2:void 0}),e})(),sM=r=>(()=>{const e=r6.cloneNode(!0);return ji(e,()=>r.children),e})(),o6=Ei('<span class="m-1 h-1 w-1 rounded-full bg-slate-300 dark:bg-white dark:group-hover:bg-slate-200"></span>'),$w=r=>(()=>{const e=o6.cloneNode(!0);return rr(t=>xm(e,{"bg-slate-200":r.isDragging,"dark:bg-slate-200":r.isDragging},t)),e})(),a6=Ei('<div class="hover:bg-brand-default dark:hover:bg-brand-default group flex items-center justify-center border-slate-200 dark:border-neutral-800"><div></div></div>'),l6=r=>{const[e,t]=Cs(!1),n=()=>t(!0),i=()=>t(!1),s=W0(l=>{r.onResize(l.clientX,l.clientY)},10),o=W0(l=>{const c=l.touches[0];r.onResize(c.clientX,c.clientY)},10),a=l=>{r.ref(l),l.addEventListener("mousedown",n),l.addEventListener("touchstart",n),Dl(()=>{l.removeEventListener("mousedown",n),l.removeEventListener("touchstart",n)})};return Hs(()=>{e()?(window.addEventListener("mousemove",s),window.addEventListener("mouseup",i),window.addEventListener("touchmove",o),window.addEventListener("touchend",i)):(window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",i),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",i))}),(()=>{const l=a6.cloneNode(!0),c=l.firstChild;return Sm(a,l),ji(l,hn($w,{get isDragging(){return e()}}),null),ji(l,hn($w,{get isDragging(){return e()}}),null),ji(l,hn($w,{get isDragging(){return e()}}),null),rr(d=>{const u={"bg-brand-default dark:bg-brand-default":e(),"bg-slate-50 dark:bg-solid-darkbg/70":!e(),"flex-col cursor-col-resize border-l-2 border-r-2":!r.isHorizontal,"flex-row cursor-row-resize border-t-2 border-b-2":r.isHorizontal},h={"fixed inset-0 z-10":e(),hidden:!e(),"cursor-col-resize":!r.isHorizontal,"cursor-row-resize":r.isHorizontal};return d._v$=xm(l,u,d._v$),d._v$2=xm(c,h,d._v$2),d},{_v$:void 0,_v$2:void 0}),l})()},c6=Ei('<svg><path fill-rule="evenodd" d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z" clip-rule="evenodd"></path></svg>',4,!0),d6=Ei('<svg><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z" clip-rule="evenodd"></path></svg>',4,!0),u6={path:()=>c6.cloneNode(!0),outline:!1,mini:!1},h6={path:()=>d6.cloneNode(!0),outline:!1,mini:!1},f6=Ei('<details class="border-t-2 border-red-300 bg-red-200 p-2 text-red-800"><summary class="flex cursor-pointer"><code></code></summary><pre class="whitespace-pre-line"><code></code></pre></details>');function g6(r){const[e,t]=Cs(""),[n,i]=Cs("");return Hs(()=>{const[s,...o]=r.split(`
`);t(s),i(o.join(`
`))}),[e,n]}const p6=r=>{const[e,t]=g6(r.message),[n,i]=Cs(!1);return(()=>{const s=f6.cloneNode(!0),o=s.firstChild,a=o.firstChild,l=o.nextSibling,c=l.firstChild;return s.addEventListener("toggle",d=>i(d.currentTarget.open)),ji(o,hn(rk,{class:"h-7 opacity-70",get path(){return n()?u6:h6}}),a),rr(d=>{const u=e(),h=t();return u!==d._v$&&(a.innerText=d._v$=u),h!==d._v$2&&(c.innerText=d._v$2=h),d},{_v$:void 0,_v$2:void 0}),s})()};var m6=r=>RF()?Dl(r):r;function _6(r,e,t,n){return r.addEventListener(e,t,n),m6(r.removeEventListener.bind(r,e,t,n))}function b6(r){let e=0,t,n;return()=>(n||GW(i=>{t=r(i),n=i}),e++,RF()&&Dl(()=>{e--,queueMicrotask(()=>{e||!n||(n(),n=void 0,t=void 0)})}),t)}var OF=(r,e=!1,t=!0)=>{const n=window.matchMedia(r);if(!t)return()=>n.matches;const[i,s]=Cs(n.matches);return _6(n,"change",()=>s(n.matches)),i};OF.bind(null,"(prefers-color-scheme: dark)",!1,!0);globalThis&&globalThis.__awaiter;let v6=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function C6(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(n,i)=>{const s=i[0],o=e[s];let a=n;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),v6&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function p(r,e,...t){return C6(e,t)}var zw;const Lp="en";let V0=!1,H0=!1,o0=!1,PF=!1,DE=!1,EE=!1,Hb,a0=Lp,y6,Yl;const mn=typeof self=="object"?self:typeof global=="object"?global:{};let zi;typeof mn.vscode<"u"&&typeof mn.vscode.process<"u"?zi=mn.vscode.process:typeof process<"u"&&(zi=process);const w6=typeof((zw=zi?.versions)===null||zw===void 0?void 0:zw.electron)=="string",S6=w6&&zi?.type==="renderer";if(typeof navigator=="object"&&!S6)Yl=navigator.userAgent,V0=Yl.indexOf("Windows")>=0,H0=Yl.indexOf("Macintosh")>=0,EE=(Yl.indexOf("Macintosh")>=0||Yl.indexOf("iPad")>=0||Yl.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,o0=Yl.indexOf("Linux")>=0,DE=!0,p({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),Hb=Lp,a0=Hb;else if(typeof zi=="object"){V0=zi.platform==="win32",H0=zi.platform==="darwin",o0=zi.platform==="linux",o0&&zi.env.SNAP&&zi.env.SNAP_REVISION,zi.env.CI||zi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Hb=Lp,a0=Lp;const r=zi.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];Hb=e.locale,a0=t||Lp,y6=e._translationsConfigFile}catch{}PF=!0}else console.error("Unable to resolve platform.");const hi=V0,Je=H0,Ti=o0,vo=PF,Jc=DE,x6=DE&&typeof mn.importScripts=="function",_a=EE,ba=Yl,k6=a0,L6=typeof mn.postMessage=="function"&&!mn.importScripts,FF=(()=>{if(L6){const r=[];mn.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=r.length;n<i;n++){const s=r[n];if(s.id===t.data.vscodeScheduleAsyncWork){r.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;r.push({id:n,callback:t}),mn.postMessage({vscodeScheduleAsyncWork:n},"*")}}return r=>setTimeout(r)})(),ar=H0||EE?2:V0?1:3;let rM=!0,oM=!1;function BF(){if(!oM){oM=!0;const r=new Uint8Array(2);r[0]=1,r[1]=2,rM=new Uint16Array(r.buffer)[0]===(2<<8)+1}return rM}const WF=!!(ba&&ba.indexOf("Chrome")>=0),T6=!!(ba&&ba.indexOf("Firefox")>=0),D6=!!(!WF&&ba&&ba.indexOf("Safari")>=0),E6=!!(ba&&ba.indexOf("Edg/")>=0);ba&&ba.indexOf("Android")>=0;var Ye;(function(r){function e(w){return w&&typeof w=="object"&&typeof w[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function n(){return t}r.empty=n;function*i(w){yield w}r.single=i;function s(w){return w||t}r.from=s;function o(w){return!w||w[Symbol.iterator]().next().done===!0}r.isEmpty=o;function a(w){return w[Symbol.iterator]().next().value}r.first=a;function l(w,L){for(const T of w)if(L(T))return!0;return!1}r.some=l;function c(w,L){for(const T of w)if(L(T))return T}r.find=c;function*d(w,L){for(const T of w)L(T)&&(yield T)}r.filter=d;function*u(w,L){let T=0;for(const S of w)yield L(S,T++)}r.map=u;function*h(...w){for(const L of w)for(const T of L)yield T}r.concat=h;function*f(w){for(const L of w)for(const T of L)yield T}r.concatNested=f;function g(w,L,T){let S=T;for(const k of w)S=L(S,k);return S}r.reduce=g;function _(w,L){let T=0;for(const S of w)L(S,T++)}r.forEach=_;function*b(w,L,T=w.length){for(L<0&&(L+=w.length),T<0?T+=w.length:T>w.length&&(T=w.length);L<T;L++)yield w[L]}r.slice=b;function v(w,L=Number.POSITIVE_INFINITY){const T=[];if(L===0)return[T,w];const S=w[Symbol.iterator]();for(let k=0;k<L;k++){const D=S.next();if(D.done)return[T,r.empty()];T.push(D.value)}return[T,{[Symbol.iterator](){return S}}]}r.consume=v;function C(w){return v(w)[0]}r.collect=C;function y(w,L,T=(S,k)=>S===k){const S=w[Symbol.iterator](),k=L[Symbol.iterator]();for(;;){const D=S.next(),O=k.next();if(D.done!==O.done)return!1;if(D.done)return!0;if(!T(D.value,O.value))return!1}}r.equals=y})(Ye||(Ye={}));let fn=class{constructor(e){this.element=e,this.next=fn.Undefined,this.prev=fn.Undefined}};fn.Undefined=new fn(void 0);class qi{constructor(){this._first=fn.Undefined,this._last=fn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===fn.Undefined}clear(){let e=this._first;for(;e!==fn.Undefined;){const t=e.next;e.prev=fn.Undefined,e.next=fn.Undefined,e=t}this._first=fn.Undefined,this._last=fn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new fn(e);if(this._first===fn.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==fn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==fn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==fn.Undefined&&e.next!==fn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===fn.Undefined&&e.next===fn.Undefined?(this._first=fn.Undefined,this._last=fn.Undefined):e.next===fn.Undefined?(this._last=this._last.prev,this._last.next=fn.Undefined):e.prev===fn.Undefined&&(this._first=this._first.next,this._first.prev=fn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==fn.Undefined;)yield e.element,e=e.next}}const VF="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function A6(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of VF)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const AE=A6();function HF(r){let e=AE;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}const UF=new qi;UF.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function km(r,e,t,n,i){if(i||(i=Ye.first(UF)),t.length>i.maxLen){let c=r-i.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,r+i.maxLen/2),km(r,e,t,n,i)}const s=Date.now(),o=r-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-s>=i.timeBudget);c++){const d=o-i.windowSize*c;e.lastIndex=Math.max(0,d);const u=I6(e,t,o,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function I6(r,e,t,n){let i;for(;i=r.exec(e);){const s=i.index||0;if(s<=t&&r.lastIndex>=t)return i;if(n>0&&s>n)return null}return null}function nr(r,e=0){return r[r.length-(1+e)]}function N6(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function qs(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function M6(r,e){const t=r.length-1;e<t&&(r[e]=r[t]),r.pop()}function IE(r,e,t){return R6(r.length,n=>t(r[n],e))}function R6(r,e){let t=0,n=r-1;for(;t<=n;){const i=(t+n)/2|0,s=e(i);if(s<0)t=i+1;else if(s>0)n=i-1;else return i}return-(t+1)}function jF(r,e){let t=0,n=r.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(r[i])?n=i:t=i+1}return t}function ok(r,e,t){if(r=r|0,r>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],i=[],s=[],o=[];for(const a of e){const l=t(a,n);l<0?i.push(a):l>0?s.push(a):o.push(a)}return r<i.length?ok(r,i,t):r<i.length+o.length?o[0]:ok(r-(i.length+o.length),s,t)}function aM(r,e){const t=[];let n;for(const i of r.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}function Y_(r){return r.filter(e=>!!e)}function $F(r){return!Array.isArray(r)||r.length===0}function Si(r){return Array.isArray(r)&&r.length>0}function El(r,e=t=>t){const t=new Set;return r.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function U0(r,e){const t=O6(r,e);if(t!==-1)return r[t]}function O6(r,e){for(let t=r.length-1;t>=0;t--){const n=r[t];if(e(n))return t}return-1}function zF(r,e){return r.length>0?r[0]:e}function Ui(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function My(r,e,t){const n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function Kw(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function Ub(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function lM(r,e){for(const t of e)r.push(t)}function NE(r){return Array.isArray(r)?r:[r]}function P6(r,e,t){const n=KF(r,e),i=r.length,s=t.length;r.length=i+s;for(let o=i-1;o>=n;o--)r[o+s]=r[o];for(let o=0;o<s;o++)r[o+n]=t[o]}function cM(r,e,t,n){const i=KF(r,e),s=r.splice(i,t);return P6(r,i,n),s}function KF(r,e){return e<0?Math.max(e+r.length,0):Math.min(e,r.length)}var dM;(function(r){function e(i){return i<0}r.isLessThan=e;function t(i){return i>0}r.isGreaterThan=t;function n(i){return i===0}r.isNeitherLessOrGreaterThan=n,r.greaterThan=1,r.lessThan=-1,r.neitherLessOrGreaterThan=0})(dM||(dM={}));function Gp(r,e){return(t,n)=>e(r(t),r(n))}const F6=(r,e)=>r-e;function GF(r,e){if(r.length===0)return;let t=r[0];for(let n=1;n<r.length;n++){const i=r[n];e(i,t)>0&&(t=i)}return t}function qF(r,e){if(r.length===0)return;let t=r[0];for(let n=1;n<r.length;n++){const i=r[n];e(i,t)>=0&&(t=i)}return t}function B6(r,e){return GF(r,(t,n)=>-e(t,n))}class Lm{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function ZF(r){return Array.isArray(r)}function hs(r){return typeof r=="string"}function cs(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function W6(r){const e=Object.getPrototypeOf(Uint8Array);return typeof r=="object"&&r instanceof e}function Ic(r){return typeof r=="number"&&!isNaN(r)}function uM(r){return!!r&&typeof r[Symbol.iterator]=="function"}function YF(r){return r===!0||r===!1}function xs(r){return typeof r>"u"}function V6(r){return!Us(r)}function Us(r){return xs(r)||r===null}function Lt(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function jb(r){if(Us(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function j0(r){return typeof r=="function"}function H6(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)U6(r[n],e[n])}function U6(r,e){if(hs(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(j0(e)){try{if(r instanceof e)return}catch{}if(!Us(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function j6(r){let e=[],t=Object.getPrototypeOf(r);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function ME(r){const e=[];for(const t of j6(r))typeof r[t]=="function"&&e.push(t);return e}function $6(r,e){const t=i=>function(){const s=Array.prototype.slice.call(arguments,0);return e(i,s)},n={};for(const i of r)n[i]=t(i);return n}function as(r){return r===null?void 0:r}function Ry(r,e="Unreachable"){throw new Error(e)}function el(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;const e=Array.isArray(r)?[]:{};return Object.keys(r).forEach(t=>{r[t]&&typeof r[t]=="object"?e[t]=el(r[t]):e[t]=r[t]}),e}function z6(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(XF.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&!W6(i)&&e.push(i)}}return r}const XF=Object.prototype.hasOwnProperty;function QF(r,e){return ak(r,e,new Set)}function ak(r,e,t){if(Us(r))return r;const n=e(r);if(typeof n<"u")return n;if(ZF(r)){const i=[];for(const s of r)i.push(ak(s,e,t));return i}if(cs(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);const i={};for(const s in r)XF.call(r,s)&&(i[s]=ak(r[s],e,t));return t.delete(r),i}return r}function Ta(r,e,t=!0){return cs(r)?(cs(e)&&Object.keys(e).forEach(n=>{n in r?t&&(cs(r[n])&&cs(e[n])?Ta(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function mr(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!mr(r[t],e[t]))return!1}else{const i=[];for(n in r)i.push(n);i.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!mr(i,s))return!1;for(t=0;t<i.length;t++)if(!mr(r[i[t]],e[i[t]]))return!1}return!0}const yi={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},Xl=8;class JF{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class e4{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class An{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Oy(e,t)}compute(e,t,n){return n}}class qp{constructor(e,t){this.newValue=e,this.didChange=t}}function Oy(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new qp(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){const n=Array.isArray(r)&&Array.isArray(e)&&qs(r,e);return new qp(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=Oy(r[n],e[n]);i.didChange&&(r[n]=i.newValue,t=!0)}return new qp(r,t)}class xg{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Oy(e,t)}validate(e){return this.defaultValue}}class zu{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Oy(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Le(r,e){return typeof r>"u"?e:r==="false"?!1:Boolean(r)}class st extends zu{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Le(e,this.defaultValue)}}function lk(r,e,t,n){if(typeof r>"u")return e;let i=parseInt(r,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}class Ht extends zu{constructor(e,t,n,i,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=i,o.maximum=s),super(e,t,n,o),this.minimum=i,this.maximum=s}static clampedInt(e,t,n,i){return lk(e,t,n,i)}validate(e){return Ht.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class oa extends zu{constructor(e,t,n,i,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(oa.float(e,this.defaultValue))}}class ws extends zu{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return ws.string(e,this.defaultValue)}}function li(r,e,t){return typeof r!="string"||t.indexOf(r)===-1?e:r}class Rn extends zu{constructor(e,t,n,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return li(e,this.defaultValue,this._allowedValues)}}class Xg extends An{constructor(e,t,n,i,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=i),super(e,t,n,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function K6(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class G6 extends An{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),p("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),p("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:p("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class q6 extends An{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Le(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Le(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Z6(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ii;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(ii||(ii={}));function Y6(r){switch(r){case"line":return ii.Line;case"block":return ii.Block;case"underline":return ii.Underline;case"line-thin":return ii.LineThin;case"block-outline":return ii.BlockOutline;case"underline-thin":return ii.UnderlineThin}}class X6 extends xg{constructor(){super(130)}compute(e,t,n){const i=["monaco-editor"];return t.get(35)&&i.push(t.get(35)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(68)==="default"?i.push("mouse-default"):t.get(68)==="copy"&&i.push("mouse-copy"),t.get(102)&&i.push("showUnused"),t.get(128)&&i.push("showDeprecated"),i.join(" ")}}class Q6 extends st{constructor(){super(33,"emptySelectionClipboard",!0,{description:p("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class J6 extends An{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(37,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),p("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),p("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:p("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),p("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),p("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:p("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Je},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:p("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Le(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":li(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":li(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Le(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Le(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Le(t.loop,this.defaultValue.loop)}}}class js extends An{constructor(){super(47,"fontLigatures",js.OFF,{anyOf:[{type:"boolean",description:p("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:p("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:p("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?js.OFF:e==="true"?js.ON:e:Boolean(e)?js.ON:js.OFF}}js.OFF='"liga" off, "calt" off';js.ON='"liga" on, "calt" on';class eV extends xg{constructor(){super(46)}compute(e,t,n){return e.fontInfo}}class tV extends zu{constructor(){super(48,"fontSize",Ts.fontSize,{type:"number",minimum:6,maximum:100,default:Ts.fontSize,description:p("fontSize","Controls the font size in pixels.")})}validate(e){const t=oa.float(e,this.defaultValue);return t===0?Ts.fontSize:oa.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class ea extends An{constructor(){super(49,"fontWeight",Ts.fontWeight,{anyOf:[{type:"number",minimum:ea.MINIMUM_VALUE,maximum:ea.MAXIMUM_VALUE,errorMessage:p("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ea.SUGGESTION_VALUES}],default:Ts.fontWeight,description:p("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ht.clampedInt(e,Ts.fontWeight,ea.MINIMUM_VALUE,ea.MAXIMUM_VALUE))}}ea.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];ea.MINIMUM_VALUE=1;ea.MAXIMUM_VALUE=1e3;class nV extends An{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),p("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),p("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(53,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:p("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:p("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:p("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:p("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:p("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:p("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:p("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:p("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:li(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:li(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:li(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:li(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:li(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:li(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ws.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ws.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ws.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ws.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ws.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class iV extends An{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(55,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:p("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Le(t.enabled,this.defaultValue.enabled),delay:Ht.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Le(t.sticky,this.defaultValue.sticky),above:Le(t.above,this.defaultValue.above)}}}class cf extends xg{constructor(){super(133)}compute(e,t,n){return cf.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,i=(e.viewLineCount+n)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:i,minimapLineCount:s}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,_=e.minimap.side,b=e.verticalScrollbarWidth,v=e.viewLineCount,C=e.remainingWidth,y=e.isViewportWrapping,w=u?2:3;let L=Math.floor(s*i);const T=L/s;let S=!1,k=!1,D=w*h,O=h/s,F=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:De,extraLinesBeyondLastLine:Oe,desiredRatio:nt,minimapLineCount:Te}=cf.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:d,height:i,lineHeight:l,pixelRatio:s});if(v/Te>1)S=!0,k=!0,h=1,D=1,O=h/s;else{let oe=!1,re=h+1;if(g==="fit"){const pe=Math.ceil((v+Oe)*D);y&&a&&C<=t.stableFitRemainingWidth?(oe=!0,re=t.stableFitMaxMinimapScale):oe=pe>L}if(g==="fill"||oe){S=!0;const pe=h;D=Math.min(l*s,Math.max(1,Math.floor(1/nt))),y&&a&&C<=t.stableFitRemainingWidth&&(re=t.stableFitMaxMinimapScale),h=Math.min(re,Math.max(1,Math.floor(D/w))),h>pe&&(F=Math.min(2,h/pe)),O=h/s/F,L=Math.ceil(Math.max(De,v+Oe)*D),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=C,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const U=Math.floor(f*O),K=Math.min(U,Math.max(0,Math.floor((C-b-2)*O/(c+O)))+Xl);let ae=Math.floor(s*K);const fe=ae/s;ae=Math.floor(ae*F);const we=u?1:2,xe=_==="left"?0:n-K-b;return{renderMinimap:we,minimapLeft:xe,minimapWidth:K,minimapHeightIsEditorHeight:S,minimapIsSampling:k,minimapScale:h,minimapLineHeight:D,minimapCanvasInnerWidth:ae,minimapCanvasInnerHeight:L,minimapCanvasOuterWidth:fe,minimapCanvasOuterHeight:T}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(125),h=u==="inherit"?e.get(124):u,f=h==="inherit"?e.get(120):h,g=e.get(123),_=e.get(2),b=t.isDominatedByLongLines,v=e.get(52),C=e.get(62).renderType!==0,y=e.get(63),w=e.get(96),L=e.get(67),T=e.get(94),S=T.verticalScrollbarSize,k=T.verticalHasArrows,D=T.arrowSize,O=T.horizontalScrollbarSize,F=e.get(60),U=e.get(39),K=e.get(101)!=="never";let ae;if(typeof F=="string"&&/^\d+(\.\d+)?ch$/.test(F)){const gi=parseFloat(F.substr(0,F.length-2));ae=Ht.clampedInt(gi*a,0,0,1e3)}else ae=Ht.clampedInt(F,0,0,1e3);U&&K&&(ae+=16);let fe=0;if(C){const gi=Math.max(o,y);fe=Math.round(gi*l)}let we=0;v&&(we=s);let xe=0,De=xe+we,Oe=De+fe,nt=Oe+ae;const Te=n-we-fe-ae;let ce=!1,oe=!1,re=-1;_!==2&&(h==="inherit"&&b?(ce=!0,oe=!0):f==="on"||f==="bounded"?oe=!0:f==="wordWrapColumn"&&(re=g));const pe=cf._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:w,minimap:L,verticalScrollbarWidth:S,viewLineCount:d,remainingWidth:Te,isViewportWrapping:oe},t.memory||new e4);pe.renderMinimap!==0&&pe.minimapLeft===0&&(xe+=pe.minimapWidth,De+=pe.minimapWidth,Oe+=pe.minimapWidth,nt+=pe.minimapWidth);const it=Te-pe.minimapWidth,Mt=Math.max(1,Math.floor((it-S-2)/a)),cn=k?D:0;return oe&&(re=Math.max(1,Mt),f==="bounded"&&(re=Math.min(re,g))),{width:n,height:i,glyphMarginLeft:xe,glyphMarginWidth:we,lineNumbersLeft:De,lineNumbersWidth:fe,decorationsLeft:Oe,decorationsWidth:ae,contentLeft:nt,contentWidth:it,minimap:pe,viewportColumn:Mt,isWordWrapMinified:ce,isViewportWrapping:oe,wrappingColumn:re,verticalScrollbarWidth:S,horizontalScrollbarHeight:O,overviewRuler:{top:cn,width:S,height:i-2*cn,right:0}}}}class sV extends An{constructor(){const e={enabled:!0};super(59,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:p("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Le(e.enabled,this.defaultValue.enabled)}}}class rV extends An{constructor(){const e={stickyScroll:{enabled:!1}};super(34,"experimental",e,{"editor.experimental.stickyScroll.enabled":{type:"boolean",default:e.stickyScroll.enabled,description:p("editor.experimental.stickyScroll","Shows the nested current scopes during the scroll at the top of the editor.")}})}validate(e){var t;return!e||typeof e!="object"?this.defaultValue:{stickyScroll:{enabled:Le((t=e.stickyScroll)===null||t===void 0?void 0:t.enabled,this.defaultValue.stickyScroll.enabled)}}}}class oV extends An{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(129,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p("editor.inlayHints.on","Inlay hints are enabled"),p("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding `Ctrl+Alt`"),p("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding `Ctrl+Alt`"),p("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:li(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ht.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ws.string(t.fontFamily,this.defaultValue.fontFamily),padding:Le(t.padding,this.defaultValue.padding)}}}class aV extends oa{constructor(){super(61,"lineHeight",Ts.lineHeight,e=>oa.clamp(e,0,150),{markdownDescription:p("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class lV extends An{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(67,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),p("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),p("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:p("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Le(t.enabled,this.defaultValue.enabled),autohide:Le(t.autohide,this.defaultValue.autohide),size:li(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:li(t.side,this.defaultValue.side,["right","left"]),showSlider:li(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Le(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ht.clampedInt(t.scale,1,1,3),maxColumn:Ht.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function cV(r){return r==="ctrlCmd"?Je?"metaKey":"ctrlKey":"altKey"}class dV extends An{constructor(){super(77,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ht.clampedInt(t.top,0,0,1e3),bottom:Ht.clampedInt(t.bottom,0,0,1e3)}}}class uV extends An{constructor(){const e={enabled:!0,cycle:!1};super(78,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Le(t.enabled,this.defaultValue.enabled),cycle:Le(t.cycle,this.defaultValue.cycle)}}}class hV extends xg{constructor(){super(131)}compute(e,t,n){return e.pixelRatio}}class fV extends An{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p("on","Quick suggestions show inside the suggest widget"),p("inline","Quick suggestions show as ghost text"),p("off","Quick suggestions are disabled")]}];super(81,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:p("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:p("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:p("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:i}=e,s=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=li(t,this.defaultValue.other,s),typeof n=="boolean"?a=n?"on":"off":a=li(n,this.defaultValue.comments,s),typeof i=="boolean"?l=i?"on":"off":l=li(i,this.defaultValue.strings,s),{other:o,comments:a,strings:l}}}class gV extends An{constructor(){super(62,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p("lineNumbers.off","Line numbers are not rendered."),p("lineNumbers.on","Line numbers are rendered as absolute number."),p("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),p("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:p("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function $0(r){const e=r.get(89);return e==="editable"?r.get(83):e!=="on"}class pV extends An{constructor(){const e=[],t={type:"number",description:p("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(93,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:p("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:Ht.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:Ht.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}function hM(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}let mV=class extends An{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(94,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),p("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),p("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),p("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),p("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Ht.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Ht.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ht.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:hM(t.vertical,this.defaultValue.vertical),horizontal:hM(t.horizontal,this.defaultValue.horizontal),useShadows:Le(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Le(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Le(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Le(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Le(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Ht.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Ht.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Le(t.scrollByPage,this.defaultValue.scrollByPage)}}};const Bs="inUntrustedWorkspace",is={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class _V extends An{constructor(){const e={nonBasicASCII:Bs,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Bs,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(115,"unicodeHighlight",e,{[is.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Bs],default:e.nonBasicASCII,description:p("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[is.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[is.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[is.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Bs],default:e.includeComments,description:p("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[is.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Bs],default:e.includeStrings,description:p("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[is.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[is.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(mr(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&e&&(mr(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));const i=super.applyUpdate(e,t);return n?new qp(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:df(t.nonBasicASCII,Bs,[!0,!1,Bs]),invisibleCharacters:Le(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Le(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:df(t.includeComments,Bs,[!0,!1,Bs]),includeStrings:df(t.includeStrings,Bs,[!0,!1,Bs]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,s]of Object.entries(e))s===!0&&(n[i]=!0);return n}}class bV extends An{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(57,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Le(t.enabled,this.defaultValue.enabled),mode:li(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class vV extends An{constructor(){const e={enabled:yi.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:yi.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Le(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Le(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class CV extends An{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairs.true","Enables bracket pair guides."),p("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),p("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:p("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),p("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),p("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:p("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),p("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),p("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:p("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:df(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:df(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Le(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Le(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:df(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function df(r,e,t){const n=t.indexOf(r);return n===-1?e:t[n]}class yV extends An{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(108,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),p("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:p("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:li(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Le(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Le(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Le(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Le(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Le(t.showIcons,this.defaultValue.showIcons),showStatusBar:Le(t.showStatusBar,this.defaultValue.showStatusBar),preview:Le(t.preview,this.defaultValue.preview),previewMode:li(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Le(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Le(t.showMethods,this.defaultValue.showMethods),showFunctions:Le(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Le(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Le(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Le(t.showFields,this.defaultValue.showFields),showVariables:Le(t.showVariables,this.defaultValue.showVariables),showClasses:Le(t.showClasses,this.defaultValue.showClasses),showStructs:Le(t.showStructs,this.defaultValue.showStructs),showInterfaces:Le(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Le(t.showModules,this.defaultValue.showModules),showProperties:Le(t.showProperties,this.defaultValue.showProperties),showEvents:Le(t.showEvents,this.defaultValue.showEvents),showOperators:Le(t.showOperators,this.defaultValue.showOperators),showUnits:Le(t.showUnits,this.defaultValue.showUnits),showValues:Le(t.showValues,this.defaultValue.showValues),showConstants:Le(t.showConstants,this.defaultValue.showConstants),showEnums:Le(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Le(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Le(t.showKeywords,this.defaultValue.showKeywords),showWords:Le(t.showWords,this.defaultValue.showWords),showColors:Le(t.showColors,this.defaultValue.showColors),showFiles:Le(t.showFiles,this.defaultValue.showFiles),showReferences:Le(t.showReferences,this.defaultValue.showReferences),showFolders:Le(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Le(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Le(t.showSnippets,this.defaultValue.showSnippets),showUsers:Le(t.showUsers,this.defaultValue.showUsers),showIssues:Le(t.showIssues,this.defaultValue.showIssues)}}}class wV extends An{constructor(){super(104,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Le(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class SV extends xg{constructor(){super(132)}compute(e,t,n){return t.get(83)?!0:e.tabFocusMode}}function xV(r){switch(r){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class kV extends xg{constructor(){super(134)}compute(e,t,n){const i=t.get(133);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}class LV extends An{constructor(){const e={enabled:!0};super(32,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Le(e.enabled,this.defaultValue.enabled)}}}const TV="Consolas, 'Courier New', monospace",DV="Menlo, Monaco, 'Courier New', monospace",EV="'Droid Sans Mono', 'monospace', monospace",Ts={fontFamily:Je?DV:Ti?EV:TV,fontWeight:"normal",fontSize:Je?12:14,lineHeight:0,letterSpacing:0},Wh=[];function ne(r){return Wh[r.id]=r,r}const Io={acceptSuggestionOnCommitCharacter:ne(new st(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`; `) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ne(new Rn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:p("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ne(new G6),accessibilityPageSize:ne(new Ht(3,"accessibilityPageSize",10,1,1073741824,{description:p("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:ne(new ws(4,"ariaLabel",p("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:ne(new Rn(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),p("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:p("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:ne(new Rn(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ne(new Rn(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ne(new Rn(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),p("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:p("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ne(new Xg(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],K6,{enumDescriptions:[p("editor.autoIndent.none","The editor will not insert indentation automatically."),p("editor.autoIndent.keep","The editor will keep the current line's indentation."),p("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),p("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),p("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:p("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ne(new st(10,"automaticLayout",!1)),autoSurround:ne(new Rn(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),p("editor.autoSurround.quotes","Surround with quotes but not brackets."),p("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:p("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ne(new vV),bracketPairGuides:ne(new CV),stickyTabStops:ne(new st(106,"stickyTabStops",!1,{description:p("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ne(new st(14,"codeLens",!0,{description:p("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ne(new ws(15,"codeLensFontFamily","",{description:p("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ne(new Ht(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:ne(new st(17,"colorDecorators",!0,{description:p("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:ne(new st(18,"columnSelection",!1,{description:p("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ne(new q6),contextmenu:ne(new st(20,"contextmenu",!0)),copyWithSyntaxHighlighting:ne(new st(21,"copyWithSyntaxHighlighting",!0,{description:p("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ne(new Xg(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Z6,{description:p("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ne(new st(23,"cursorSmoothCaretAnimation",!1,{description:p("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ne(new Xg(24,"cursorStyle",ii.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Y6,{description:p("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ne(new Ht(25,"cursorSurroundingLines",0,0,1073741824,{description:p("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ne(new Rn(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),p("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:p("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:ne(new Ht(27,"cursorWidth",0,0,1073741824,{markdownDescription:p("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ne(new st(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:ne(new st(29,"disableMonospaceOptimizations",!1)),domReadOnly:ne(new st(30,"domReadOnly",!1)),dragAndDrop:ne(new st(31,"dragAndDrop",!0,{description:p("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ne(new Q6),dropIntoEditor:ne(new LV),experimental:ne(new rV),extraEditorClassName:ne(new ws(35,"extraEditorClassName","")),fastScrollSensitivity:ne(new oa(36,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:p("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ne(new J6),fixedOverflowWidgets:ne(new st(38,"fixedOverflowWidgets",!1)),folding:ne(new st(39,"folding",!0,{description:p("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ne(new Rn(40,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),p("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:p("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ne(new st(41,"foldingHighlight",!0,{description:p("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ne(new st(42,"foldingImportsByDefault",!1,{description:p("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:ne(new Ht(43,"foldingMaximumRegions",5e3,10,65e3,{description:p("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:ne(new st(44,"unfoldOnClickAfterEndOfLine",!1,{description:p("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ne(new ws(45,"fontFamily",Ts.fontFamily,{description:p("fontFamily","Controls the font family.")})),fontInfo:ne(new eV),fontLigatures2:ne(new js),fontSize:ne(new tV),fontWeight:ne(new ea),formatOnPaste:ne(new st(50,"formatOnPaste",!1,{description:p("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ne(new st(51,"formatOnType",!1,{description:p("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ne(new st(52,"glyphMargin",!0,{description:p("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ne(new nV),hideCursorInOverviewRuler:ne(new st(54,"hideCursorInOverviewRuler",!1,{description:p("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ne(new iV),inDiffEditor:ne(new st(56,"inDiffEditor",!1)),letterSpacing:ne(new oa(58,"letterSpacing",Ts.letterSpacing,r=>oa.clamp(r,-5,20),{description:p("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ne(new sV),lineDecorationsWidth:ne(new zu(60,"lineDecorationsWidth",10)),lineHeight:ne(new aV),lineNumbers:ne(new gV),lineNumbersMinChars:ne(new Ht(63,"lineNumbersMinChars",5,1,300)),linkedEditing:ne(new st(64,"linkedEditing",!1,{description:p("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:ne(new st(65,"links",!0,{description:p("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ne(new Rn(66,"matchBrackets","always",["always","near","never"],{description:p("matchBrackets","Highlight matching brackets.")})),minimap:ne(new lV),mouseStyle:ne(new Rn(68,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ne(new oa(69,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:p("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ne(new st(70,"mouseWheelZoom",!1,{markdownDescription:p("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ne(new st(71,"multiCursorMergeOverlapping",!0,{description:p("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ne(new Xg(72,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],cV,{markdownEnumDescriptions:[p("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:p({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ne(new Rn(73,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p("multiCursorPaste.spread","Each cursor pastes a single line of the text."),p("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:p("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:ne(new st(74,"occurrencesHighlight",!0,{description:p("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:ne(new st(75,"overviewRulerBorder",!0,{description:p("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ne(new Ht(76,"overviewRulerLanes",3,0,3)),padding:ne(new dV),parameterHints:ne(new uV),peekWidgetDefaultFocus:ne(new Rn(79,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),p("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:p("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:ne(new st(80,"definitionLinkOpensInPeek",!1,{description:p("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ne(new fV),quickSuggestionsDelay:ne(new Ht(82,"quickSuggestionsDelay",10,0,1073741824,{description:p("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ne(new st(83,"readOnly",!1)),renameOnType:ne(new st(84,"renameOnType",!1,{description:p("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:p("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ne(new st(85,"renderControlCharacters",!0,{description:p("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ne(new st(86,"renderFinalNewline",!0,{description:p("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ne(new Rn(87,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:p("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ne(new st(88,"renderLineHighlightOnlyWhenFocus",!1,{description:p("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ne(new Rn(89,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ne(new Rn(90,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),p("renderWhitespace.selection","Render whitespace characters only on selected text."),p("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:p("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ne(new Ht(91,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:ne(new st(92,"roundedSelection",!0,{description:p("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ne(new pV),scrollbar:ne(new mV),scrollBeyondLastColumn:ne(new Ht(95,"scrollBeyondLastColumn",4,0,1073741824,{description:p("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ne(new st(96,"scrollBeyondLastLine",!0,{description:p("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ne(new st(97,"scrollPredominantAxis",!0,{description:p("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ne(new st(98,"selectionClipboard",!0,{description:p("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Ti})),selectionHighlight:ne(new st(99,"selectionHighlight",!0,{description:p("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ne(new st(100,"selectOnLineNumbers",!0)),showFoldingControls:ne(new Rn(101,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p("showFoldingControls.always","Always show the folding controls."),p("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),p("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:p("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ne(new st(102,"showUnused",!0,{description:p("showUnused","Controls fading out of unused code.")})),showDeprecated:ne(new st(128,"showDeprecated",!0,{description:p("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ne(new oV),snippetSuggestions:ne(new Rn(103,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),p("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),p("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),p("snippetSuggestions.none","Do not show snippet suggestions.")],description:p("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ne(new wV),smoothScrolling:ne(new st(105,"smoothScrolling",!1,{description:p("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ne(new Ht(107,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ne(new yV),inlineSuggest:ne(new bV),suggestFontSize:ne(new Ht(109,"suggestFontSize",0,0,1e3,{markdownDescription:p("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:ne(new Ht(110,"suggestLineHeight",0,0,1e3,{markdownDescription:p("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:ne(new st(111,"suggestOnTriggerCharacters",!0,{description:p("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ne(new Rn(112,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p("suggestSelection.first","Always select the first suggestion."),p("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),p("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:p("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ne(new Rn(113,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),p("tabCompletion.off","Disable tab completions."),p("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:p("tabCompletion","Enables tab completions.")})),tabIndex:ne(new Ht(114,"tabIndex",0,-1,1073741824)),unicodeHighlight:ne(new _V),unusualLineTerminators:ne(new Rn(116,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),p("unusualLineTerminators.off","Unusual line terminators are ignored."),p("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:p("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ne(new st(117,"useShadowDOM",!0)),useTabStops:ne(new st(118,"useTabStops",!0,{description:p("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:ne(new ws(119,"wordSeparators",VF,{description:p("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ne(new Rn(120,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),p({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:p({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ne(new ws(121,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:ne(new ws(122,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:ne(new Ht(123,"wordWrapColumn",80,1,1073741824,{markdownDescription:p({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ne(new Rn(124,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ne(new Rn(125,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:ne(new Xg(126,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],xV,{enumDescriptions:[p("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),p("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),p("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),p("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:p("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:ne(new Rn(127,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[p("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),p("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:p("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:ne(new X6),pixelRatio:ne(new hV),tabFocusMode:ne(new SV),layoutInfo:ne(new cf),wrappingInfo:ne(new kV)};class AV{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Mf.isErrorNoTelemetry(e)?new Mf(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const t4=new AV;function We(r){Da(r)||t4.onUnexpectedError(r)}function Jn(r){Da(r)||t4.onUnexpectedExternalError(r)}function fM(r){if(r instanceof Error){const{name:e,message:t}=r,n=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:Mf.isErrorNoTelemetry(r)}}return r}const z0="Canceled";function Da(r){return r instanceof ed?!0:r instanceof Error&&r.name===z0&&r.message===z0}class ed extends Error{constructor(){super(z0),this.name=this.message}}function n4(){const r=new Error(z0);return r.name=r.message,r}function Co(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function IV(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}class NV extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class Mf extends Error{constructor(e){super(e),this.name="ErrorNoTelemetry"}static fromError(e){if(e instanceof Mf)return e;const t=new Mf;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="ErrorNoTelemetry"}}class RE extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,RE.prototype);debugger}}function Al(r){const e=this;let t=!1,n;return function(){return t||(t=!0,n=r.apply(e,arguments)),n}}class MV extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function OE(r){return typeof r.dispose=="function"&&r.dispose.length===0}function ut(r){if(Ye.is(r)){const e=[];for(const t of r)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new MV(e);return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function yo(...r){return Ke(()=>ut(r))}function Ke(r){return{dispose:Al(()=>{r()})}}class Q{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{ut(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Q.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Q.DISABLE_DISPOSED_WARNING=!1;class j{constructor(){this._store=new Q,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}j.None=Object.freeze({dispose(){}});class Fi{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class RV{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class OV{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0)},this}}class PV{constructor(e){this.object=e}dispose(){}}const FV=mn.performance&&typeof mn.performance.now=="function";class fs{constructor(e){this._highResolution=FV&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new fs(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?mn.performance.now():Date.now()}}var ve;(function(r){r.None=()=>j.None;function e(T){return(S,k=null,D)=>{let O=!1,F;return F=T(U=>{if(!O)return F?F.dispose():O=!0,S.call(k,U)},null,D),O&&F.dispose(),F}}r.once=e;function t(T,S,k){return l((D,O=null,F)=>T(U=>D.call(O,S(U)),null,F),k)}r.map=t;function n(T,S,k){return l((D,O=null,F)=>T(U=>{S(U),D.call(O,U)},null,F),k)}r.forEach=n;function i(T,S,k){return l((D,O=null,F)=>T(U=>S(U)&&D.call(O,U),null,F),k)}r.filter=i;function s(T){return T}r.signal=s;function o(...T){return(S,k=null,D)=>yo(...T.map(O=>O(F=>S.call(k,F),null,D)))}r.any=o;function a(T,S,k,D){let O=k;return t(T,F=>(O=S(O,F),O),D)}r.reduce=a;function l(T,S){let k;const D={onFirstListenerAdd(){k=T(O.fire,O)},onLastListenerRemove(){k?.dispose()}},O=new R(D);return S?.add(O),O.event}function c(T,S,k=100,D=!1,O,F){let U,K,ae,fe=0;const we={leakWarningThreshold:O,onFirstListenerAdd(){U=T(De=>{fe++,K=S(K,De),D&&!ae&&(xe.fire(K),K=void 0),clearTimeout(ae),ae=setTimeout(()=>{const Oe=K;K=void 0,ae=void 0,(!D||fe>1)&&xe.fire(Oe),fe=0},k)})},onLastListenerRemove(){U.dispose()}},xe=new R(we);return F?.add(xe),xe.event}r.debounce=c;function d(T,S=(D,O)=>D===O,k){let D=!0,O;return i(T,F=>{const U=D||!S(F,O);return D=!1,O=F,U},k)}r.latch=d;function u(T,S,k){return[r.filter(T,S,k),r.filter(T,D=>!S(D),k)]}r.split=u;function h(T,S=!1,k=[]){let D=k.slice(),O=T(K=>{D?D.push(K):U.fire(K)});const F=()=>{D?.forEach(K=>U.fire(K)),D=null},U=new R({onFirstListenerAdd(){O||(O=T(K=>U.fire(K)))},onFirstListenerDidAdd(){D&&(S?setTimeout(F):F())},onLastListenerRemove(){O&&O.dispose(),O=null}});return U.event}r.buffer=h;class f{constructor(S){this.event=S,this.disposables=new Q}map(S){return new f(t(this.event,S,this.disposables))}forEach(S){return new f(n(this.event,S,this.disposables))}filter(S){return new f(i(this.event,S,this.disposables))}reduce(S,k){return new f(a(this.event,S,k,this.disposables))}latch(){return new f(d(this.event,void 0,this.disposables))}debounce(S,k=100,D=!1,O){return new f(c(this.event,S,k,D,O,this.disposables))}on(S,k,D){return this.event(S,k,D)}once(S,k,D){return e(this.event)(S,k,D)}dispose(){this.disposables.dispose()}}function g(T){return new f(T)}r.chain=g;function _(T,S,k=D=>D){const D=(...K)=>U.fire(k(...K)),O=()=>T.on(S,D),F=()=>T.removeListener(S,D),U=new R({onFirstListenerAdd:O,onLastListenerRemove:F});return U.event}r.fromNodeEventEmitter=_;function b(T,S,k=D=>D){const D=(...K)=>U.fire(k(...K)),O=()=>T.addEventListener(S,D),F=()=>T.removeEventListener(S,D),U=new R({onFirstListenerAdd:O,onLastListenerRemove:F});return U.event}r.fromDOMEventEmitter=b;function v(T){return new Promise(S=>e(T)(S))}r.toPromise=v;function C(T,S){return S(void 0),T(k=>S(k))}r.runAndSubscribe=C;function y(T,S){let k=null;function D(F){k?.dispose(),k=new Q,S(F,k)}D(void 0);const O=T(F=>D(F));return Ke(()=>{O.dispose(),k?.dispose()})}r.runAndSubscribeWithStore=y;class w{constructor(S,k){this.obs=S,this._counter=0,this._hasChanged=!1;const D={onFirstListenerAdd:()=>{S.addObserver(this)},onLastListenerRemove:()=>{S.removeObserver(this)}};this.emitter=new R(D),k&&k.add(this.emitter)}beginUpdate(S){this._counter++}handleChange(S,k){this._hasChanged=!0}endUpdate(S){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function L(T,S){return new w(T,S).emitter.event}r.fromObservable=L})(ve||(ve={}));class Py{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${Py._idPool++}`}start(e){this._stopWatch=new fs(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}Py._idPool=0;class PE{constructor(e){this.value=e}static create(){var e;return new PE((e=new Error().stack)!==null&&e!==void 0?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class BV{constructor(e,t,n){this.callback=e,this.callbackThis=t,this.stack=n,this.subscription=new OV}invoke(e){this.callback.call(this.callbackThis,e)}}let R=class{constructor(e){var t,n;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new Py(this._options._profName):void 0,this._deliveryQueue=(n=this._options)===null||n===void 0?void 0:n.deliveryQueue}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)===null||e===void 0||e.clear(this),(n=(t=this._options)===null||t===void 0?void 0:t.onLastListenerRemove)===null||n===void 0||n.call(t),(i=this._leakageMon)===null||i===void 0||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,s,o;this._listeners||(this._listeners=new qi);const a=this._listeners.isEmpty();a&&(!((i=this._options)===null||i===void 0)&&i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this);let l,c;this._leakageMon&&this._listeners.size>=30&&(c=PE.create(),l=this._leakageMon.check(c,this._listeners.size+1));const d=new BV(e,t,c),u=this._listeners.push(d);a&&(!((s=this._options)===null||s===void 0)&&s.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),!((o=this._options)===null||o===void 0)&&o.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const h=d.subscription.set(()=>{l?.(),this._disposed||(u(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Q?n.add(h):Array.isArray(n)&&n.push(h),h}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new WV);for(const i of this._listeners)this._deliveryQueue.push(this,i,e);(t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(n=this._perfMon)===null||n===void 0||n.stop()}}};class i4{constructor(){this._queue=new qi}get size(){return this._queue.size}push(e,t,n){this._queue.push(new VV(e,t,n))}clear(e){const t=new qi;for(const n of this._queue)n.emitter!==e&&t.push(n);this._queue=t}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){We(t)}}}}class WV extends i4{clear(e){this._queue.clear()}}class VV{constructor(e,t,n){this.emitter=e,this.listener=t,this.event=n}}class K0 extends R{constructor(e){super(e),this._isPaused=0,this._eventQueue=new qi,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class HV extends K0{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class FE{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(s=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,s)):t.call(n,s)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}class gM{constructor(){this.listening=!1,this.inputEvent=ve.None,this.inputEventListener=j.None,this.emitter=new R({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const s4=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var qe;(function(r){function e(t){return t===r.None||t===r.Cancelled||t instanceof l0?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ve.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s4})})(qe||(qe={}));class l0{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s4:(this._emitter||(this._emitter=new R),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let fi=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new l0),this._token}cancel(){this._token?this._token instanceof l0&&this._token.cancel():this._token=qe.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof l0&&this._token.dispose():this._token=qe.None}};class BE{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const c0=new BE,ck=new BE,dk=new BE,r4=new Array(230),UV=Object.create(null),jV=Object.create(null),WE=[];for(let r=0;r<=193;r++)WE[r]=-1;(function(){const r="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[0,1,1,"Hyper",0,r,0,r,r,r],[0,1,2,"Super",0,r,0,r,r,r],[0,1,3,"Fn",0,r,0,r,r,r],[0,1,4,"FnLock",0,r,0,r,r,r],[0,1,5,"Suspend",0,r,0,r,r,r],[0,1,6,"Resume",0,r,0,r,r,r],[0,1,7,"Turbo",0,r,0,r,r,r],[0,1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[0,1,9,"WakeUp",0,r,0,r,r,r],[31,0,10,"KeyA",31,"A",65,"VK_A",r,r],[32,0,11,"KeyB",32,"B",66,"VK_B",r,r],[33,0,12,"KeyC",33,"C",67,"VK_C",r,r],[34,0,13,"KeyD",34,"D",68,"VK_D",r,r],[35,0,14,"KeyE",35,"E",69,"VK_E",r,r],[36,0,15,"KeyF",36,"F",70,"VK_F",r,r],[37,0,16,"KeyG",37,"G",71,"VK_G",r,r],[38,0,17,"KeyH",38,"H",72,"VK_H",r,r],[39,0,18,"KeyI",39,"I",73,"VK_I",r,r],[40,0,19,"KeyJ",40,"J",74,"VK_J",r,r],[41,0,20,"KeyK",41,"K",75,"VK_K",r,r],[42,0,21,"KeyL",42,"L",76,"VK_L",r,r],[43,0,22,"KeyM",43,"M",77,"VK_M",r,r],[44,0,23,"KeyN",44,"N",78,"VK_N",r,r],[45,0,24,"KeyO",45,"O",79,"VK_O",r,r],[46,0,25,"KeyP",46,"P",80,"VK_P",r,r],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[48,0,27,"KeyR",48,"R",82,"VK_R",r,r],[49,0,28,"KeyS",49,"S",83,"VK_S",r,r],[50,0,29,"KeyT",50,"T",84,"VK_T",r,r],[51,0,30,"KeyU",51,"U",85,"VK_U",r,r],[52,0,31,"KeyV",52,"V",86,"VK_V",r,r],[53,0,32,"KeyW",53,"W",87,"VK_W",r,r],[54,0,33,"KeyX",54,"X",88,"VK_X",r,r],[55,0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[22,0,36,"Digit1",22,"1",49,"VK_1",r,r],[23,0,37,"Digit2",23,"2",50,"VK_2",r,r],[24,0,38,"Digit3",24,"3",51,"VK_3",r,r],[25,0,39,"Digit4",25,"4",52,"VK_4",r,r],[26,0,40,"Digit5",26,"5",53,"VK_5",r,r],[27,0,41,"Digit6",27,"6",54,"VK_6",r,r],[28,0,42,"Digit7",28,"7",55,"VK_7",r,r],[29,0,43,"Digit8",29,"8",56,"VK_8",r,r],[30,0,44,"Digit9",30,"9",57,"VK_9",r,r],[21,0,45,"Digit0",21,"0",48,"VK_0",r,r],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[10,1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,r,0,r,r,r],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[59,1,64,"F1",59,"F1",112,"VK_F1",r,r],[60,1,65,"F2",60,"F2",113,"VK_F2",r,r],[61,1,66,"F3",61,"F3",114,"VK_F3",r,r],[62,1,67,"F4",62,"F4",115,"VK_F4",r,r],[63,1,68,"F5",63,"F5",116,"VK_F5",r,r],[64,1,69,"F6",64,"F6",117,"VK_F6",r,r],[65,1,70,"F7",65,"F7",118,"VK_F7",r,r],[66,1,71,"F8",66,"F8",119,"VK_F8",r,r],[67,1,72,"F9",67,"F9",120,"VK_F9",r,r],[68,1,73,"F10",68,"F10",121,"VK_F10",r,r],[69,1,74,"F11",69,"F11",122,"VK_F11",r,r],[70,1,75,"F12",70,"F12",123,"VK_F12",r,r],[0,1,76,"PrintScreen",0,r,0,r,r,r],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",r,r],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[14,1,80,"Home",14,"Home",36,"VK_HOME",r,r],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[13,1,83,"End",13,"End",35,"VK_END",r,r],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",r,r],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",r,r],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",r,r],[3,1,94,"NumpadEnter",3,r,0,r,r,r],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",r,r],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",r,r],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",r,r],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",r,r],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",r,r],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",r,r],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",r,r],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",r,r],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",r,r],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",r,r],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",r,r],[58,1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[0,1,108,"Power",0,r,0,r,r,r],[0,1,109,"NumpadEqual",0,r,0,r,r,r],[71,1,110,"F13",71,"F13",124,"VK_F13",r,r],[72,1,111,"F14",72,"F14",125,"VK_F14",r,r],[73,1,112,"F15",73,"F15",126,"VK_F15",r,r],[74,1,113,"F16",74,"F16",127,"VK_F16",r,r],[75,1,114,"F17",75,"F17",128,"VK_F17",r,r],[76,1,115,"F18",76,"F18",129,"VK_F18",r,r],[77,1,116,"F19",77,"F19",130,"VK_F19",r,r],[0,1,117,"F20",0,r,0,"VK_F20",r,r],[0,1,118,"F21",0,r,0,"VK_F21",r,r],[0,1,119,"F22",0,r,0,"VK_F22",r,r],[0,1,120,"F23",0,r,0,"VK_F23",r,r],[0,1,121,"F24",0,r,0,"VK_F24",r,r],[0,1,122,"Open",0,r,0,r,r,r],[0,1,123,"Help",0,r,0,r,r,r],[0,1,124,"Select",0,r,0,r,r,r],[0,1,125,"Again",0,r,0,r,r,r],[0,1,126,"Undo",0,r,0,r,r,r],[0,1,127,"Cut",0,r,0,r,r,r],[0,1,128,"Copy",0,r,0,r,r,r],[0,1,129,"Paste",0,r,0,r,r,r],[0,1,130,"Find",0,r,0,r,r,r],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",r,r],[0,1,136,"KanaMode",0,r,0,r,r,r],[0,0,137,"IntlYen",0,r,0,r,r,r],[0,1,138,"Convert",0,r,0,r,r,r],[0,1,139,"NonConvert",0,r,0,r,r,r],[0,1,140,"Lang1",0,r,0,r,r,r],[0,1,141,"Lang2",0,r,0,r,r,r],[0,1,142,"Lang3",0,r,0,r,r,r],[0,1,143,"Lang4",0,r,0,r,r,r],[0,1,144,"Lang5",0,r,0,r,r,r],[0,1,145,"Abort",0,r,0,r,r,r],[0,1,146,"Props",0,r,0,r,r,r],[0,1,147,"NumpadParenLeft",0,r,0,r,r,r],[0,1,148,"NumpadParenRight",0,r,0,r,r,r],[0,1,149,"NumpadBackspace",0,r,0,r,r,r],[0,1,150,"NumpadMemoryStore",0,r,0,r,r,r],[0,1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[0,1,152,"NumpadMemoryClear",0,r,0,r,r,r],[0,1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[0,1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",r,r],[0,1,156,"NumpadClearEntry",0,r,0,r,r,r],[5,1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[4,1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[6,1,0,r,6,"Alt",18,"VK_MENU",r,r],[57,1,0,r,57,"Meta",0,"VK_COMMAND",r,r],[5,1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[4,1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[6,1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[57,1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[5,1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[4,1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[6,1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[57,1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[0,1,165,"BrightnessUp",0,r,0,r,r,r],[0,1,166,"BrightnessDown",0,r,0,r,r,r],[0,1,167,"MediaPlay",0,r,0,r,r,r],[0,1,168,"MediaRecord",0,r,0,r,r,r],[0,1,169,"MediaFastForward",0,r,0,r,r,r],[0,1,170,"MediaRewind",0,r,0,r,r,r],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",r,r],[0,1,174,"Eject",0,r,0,r,r,r],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[0,1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[0,1,180,"SelectTask",0,r,0,r,r,r],[0,1,181,"LaunchScreenSaver",0,r,0,r,r,r],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[0,1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[0,1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[0,1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[0,1,189,"ZoomToggle",0,r,0,r,r,r],[0,1,190,"MailReply",0,r,0,r,r,r],[0,1,191,"MailForward",0,r,0,r,r,r],[0,1,192,"MailSend",0,r,0,r,r,r],[109,1,0,r,109,"KeyInComposition",229,r,r,r],[111,1,0,r,111,"ABNT_C2",194,"VK_ABNT_C2",r,r],[91,1,0,r,91,"OEM_8",223,"VK_OEM_8",r,r],[0,1,0,r,0,r,0,"VK_KANA",r,r],[0,1,0,r,0,r,0,"VK_HANGUL",r,r],[0,1,0,r,0,r,0,"VK_JUNJA",r,r],[0,1,0,r,0,r,0,"VK_FINAL",r,r],[0,1,0,r,0,r,0,"VK_HANJA",r,r],[0,1,0,r,0,r,0,"VK_KANJI",r,r],[0,1,0,r,0,r,0,"VK_CONVERT",r,r],[0,1,0,r,0,r,0,"VK_NONCONVERT",r,r],[0,1,0,r,0,r,0,"VK_ACCEPT",r,r],[0,1,0,r,0,r,0,"VK_MODECHANGE",r,r],[0,1,0,r,0,r,0,"VK_SELECT",r,r],[0,1,0,r,0,r,0,"VK_PRINT",r,r],[0,1,0,r,0,r,0,"VK_EXECUTE",r,r],[0,1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[0,1,0,r,0,r,0,"VK_HELP",r,r],[0,1,0,r,0,r,0,"VK_APPS",r,r],[0,1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[0,1,0,r,0,r,0,"VK_PACKET",r,r],[0,1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_ATTN",r,r],[0,1,0,r,0,r,0,"VK_CRSEL",r,r],[0,1,0,r,0,r,0,"VK_EXSEL",r,r],[0,1,0,r,0,r,0,"VK_EREOF",r,r],[0,1,0,r,0,r,0,"VK_PLAY",r,r],[0,1,0,r,0,r,0,"VK_ZOOM",r,r],[0,1,0,r,0,r,0,"VK_NONAME",r,r],[0,1,0,r,0,r,0,"VK_PA1",r,r],[0,1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]],t=[],n=[];for(const i of e){const[s,o,a,l,c,d,u,h,f,g]=i;if(n[a]||(n[a]=!0,UV[l]=a,jV[l.toLowerCase()]=a,o&&(WE[a]=c)),!t[c]){if(t[c]=!0,!d)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);c0.define(c,d),ck.define(c,f||d),dk.define(c,g||f||d)}u&&(r4[u]=c)}})();var Od;(function(r){function e(a){return c0.keyCodeToStr(a)}r.toString=e;function t(a){return c0.strToKeyCode(a)}r.fromString=t;function n(a){return ck.keyCodeToStr(a)}r.toUserSettingsUS=n;function i(a){return dk.keyCodeToStr(a)}r.toUserSettingsGeneral=i;function s(a){return ck.strToKeyCode(a)||dk.strToKeyCode(a)}r.fromUserSettings=s;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return c0.keyCodeToStr(a)}r.toElectronAccelerator=o})(Od||(Od={}));function Bn(r,e){const t=(e&65535)<<16>>>0;return(r|t)>>>0}let uf;if(typeof mn.vscode<"u"&&typeof mn.vscode.process<"u"){const r=mn.vscode.process;uf={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"?uf={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:uf={get platform(){return hi?"win32":Je?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const uk=uf.cwd,$V=uf.env,Ku=uf.platform,zV=65,KV=97,GV=90,qV=122,bc=46,Ni=47,Fs=92,jl=58,ZV=63;class o4 extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${i} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Gn(r,e){if(typeof r!="string")throw new o4(e,"string",r)}function Ct(r){return r===Ni||r===Fs}function hk(r){return r===Ni}function $l(r){return r>=zV&&r<=GV||r>=KV&&r<=qV}function G0(r,e,t,n){let i="",s=0,o=-1,a=0,l=0;for(let c=0;c<=r.length;++c){if(c<r.length)l=r.charCodeAt(c);else{if(n(l))break;l=Ni}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==bc||i.charCodeAt(i.length-2)!==bc){if(i.length>2){const d=i.lastIndexOf(t);d===-1?(i="",s=0):(i=i.slice(0,d),s=i.length-1-i.lastIndexOf(t)),o=c,a=0;continue}else if(i.length!==0){i="",s=0,o=c,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",s=2)}else i.length>0?i+=`${t}${r.slice(o+1,c)}`:i=r.slice(o+1,c),s=c-o-1;o=c,a=0}else l===bc&&a!==-1?++a:a=-1}return i}function a4(r,e){if(e===null||typeof e!="object")throw new o4("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}const ks={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let s;if(i>=0){if(s=r[i],Gn(s,"path"),s.length===0)continue}else e.length===0?s=uk():(s=$V[`=${e}`]||uk(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Fs)&&(s=`${e}\\`));const o=s.length;let a=0,l="",c=!1;const d=s.charCodeAt(0);if(o===1)Ct(d)&&(a=1,c=!0);else if(Ct(d))if(c=!0,Ct(s.charCodeAt(1))){let u=2,h=u;for(;u<o&&!Ct(s.charCodeAt(u));)u++;if(u<o&&u!==h){const f=s.slice(h,u);for(h=u;u<o&&Ct(s.charCodeAt(u));)u++;if(u<o&&u!==h){for(h=u;u<o&&!Ct(s.charCodeAt(u));)u++;(u===o||u!==h)&&(l=`\\\\${f}\\${s.slice(h,u)}`,a=u)}}}else a=1;else $l(d)&&s.charCodeAt(1)===jl&&(l=s.slice(0,2),a=2,o>2&&Ct(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=G0(t,!n,"\\",Ct),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Gn(r,"path");const e=r.length;if(e===0)return".";let t=0,n,i=!1;const s=r.charCodeAt(0);if(e===1)return hk(s)?"\\":r;if(Ct(s))if(i=!0,Ct(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Ct(r.charCodeAt(a));)a++;if(a<e&&a!==l){const c=r.slice(l,a);for(l=a;a<e&&Ct(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Ct(r.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${r.slice(l,a)}`,t=a)}}}else t=1;else $l(s)&&r.charCodeAt(1)===jl&&(n=r.slice(0,2),t=2,e>2&&Ct(r.charCodeAt(2))&&(i=!0,t=3));let o=t<e?G0(r.slice(t),!i,"\\",Ct):"";return o.length===0&&!i&&(o="."),o.length>0&&Ct(r.charCodeAt(e-1))&&(o+="\\"),n===void 0?i?`\\${o}`:o:i?`${n}\\${o}`:`${n}${o}`},isAbsolute(r){Gn(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return Ct(t)||e>2&&$l(t)&&r.charCodeAt(1)===jl&&Ct(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let s=0;s<r.length;++s){const o=r[s];Gn(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&Ct(t.charCodeAt(0))){++i;const s=t.length;s>1&&Ct(t.charCodeAt(1))&&(++i,s>2&&(Ct(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ct(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ks.normalize(e)},relative(r,e){if(Gn(r,"from"),Gn(e,"to"),r===e)return"";const t=ks.resolve(r),n=ks.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===Fs;)i++;let s=r.length;for(;s-1>i&&r.charCodeAt(s-1)===Fs;)s--;const o=s-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===Fs;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Fs;)l--;const c=l-a,d=o<c?o:c;let u=-1,h=0;for(;h<d;h++){const g=r.charCodeAt(i+h);if(g!==e.charCodeAt(a+h))break;g===Fs&&(u=h)}if(h!==d){if(u===-1)return n}else{if(c>d){if(e.charCodeAt(a+h)===Fs)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}o>d&&(r.charCodeAt(i+h)===Fs?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=i+u+1;h<=s;++h)(h===s||r.charCodeAt(h)===Fs)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Fs&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";const e=ks.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===Fs){if(e.charCodeAt(1)===Fs){const t=e.charCodeAt(2);if(t!==ZV&&t!==bc)return`\\\\?\\UNC\\${e.slice(2)}`}}else if($l(e.charCodeAt(0))&&e.charCodeAt(1)===jl&&e.charCodeAt(2)===Fs)return`\\\\?\\${e}`;return r},dirname(r){Gn(r,"path");const e=r.length;if(e===0)return".";let t=-1,n=0;const i=r.charCodeAt(0);if(e===1)return Ct(i)?r:".";if(Ct(i)){if(t=n=1,Ct(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Ct(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Ct(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Ct(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else $l(i)&&r.charCodeAt(1)===jl&&(t=e>2&&Ct(r.charCodeAt(2))?3:2,n=t);let s=-1,o=!0;for(let a=e-1;a>=n;--a)if(Ct(r.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return r.slice(0,s)},basename(r,e){e!==void 0&&Gn(e,"ext"),Gn(r,"path");let t=0,n=-1,i=!0,s;if(r.length>=2&&$l(r.charCodeAt(0))&&r.charCodeAt(1)===jl&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=t;--s){const l=r.charCodeAt(s);if(Ct(l)){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=t;--s)if(Ct(r.charCodeAt(s))){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){Gn(r,"path");let e=0,t=-1,n=0,i=-1,s=!0,o=0;r.length>=2&&r.charCodeAt(1)===jl&&$l(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){const l=r.charCodeAt(a);if(Ct(l)){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===bc?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:a4.bind(null,"\\"),parse(r){Gn(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let n=0,i=r.charCodeAt(0);if(t===1)return Ct(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(Ct(i)){if(n=1,Ct(r.charCodeAt(1))){let u=2,h=u;for(;u<t&&!Ct(r.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&Ct(r.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!Ct(r.charCodeAt(u));)u++;u===t?n=u:u!==h&&(n=u+1)}}}}else if($l(i)&&r.charCodeAt(1)===jl){if(t<=2)return e.root=e.dir=r,e;if(n=2,Ct(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let s=-1,o=n,a=-1,l=!0,c=r.length-1,d=0;for(;c>=n;--c){if(i=r.charCodeAt(c),Ct(i)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===bc?s===-1?s=c:d!==1&&(d=1):s!==-1&&(d=-1)}return a!==-1&&(s===-1||d===0||d===1&&s===a-1&&s===o+1?e.base=e.name=r.slice(o,a):(e.name=r.slice(o,s),e.base=r.slice(o,a),e.ext=r.slice(s,a))),o>0&&o!==n?e.dir=r.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},En={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){const i=n>=0?r[n]:uk();Gn(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Ni)}return e=G0(e,!t,"/",hk),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Gn(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Ni,t=r.charCodeAt(r.length-1)===Ni;return r=G0(r,!e,"/",hk),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Gn(r,"path"),r.length>0&&r.charCodeAt(0)===Ni},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];Gn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":En.normalize(e)},relative(r,e){if(Gn(r,"from"),Gn(e,"to"),r===e||(r=En.resolve(r),e=En.resolve(e),r===e))return"";const t=1,n=r.length,i=n-t,s=1,o=e.length-s,a=i<o?i:o;let l=-1,c=0;for(;c<a;c++){const u=r.charCodeAt(t+c);if(u!==e.charCodeAt(s+c))break;u===Ni&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(s+c)===Ni)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else i>a&&(r.charCodeAt(t+c)===Ni?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||r.charCodeAt(c)===Ni)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(r){return r},dirname(r){if(Gn(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Ni;let t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===Ni){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Gn(e,"ext"),Gn(r,"path");let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===Ni){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===Ni){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){Gn(r,"path");let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===Ni){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===bc?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:a4.bind(null,"/"),parse(r){Gn(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===Ni;let n;t?(e.root="/",n=1):n=0;let i=-1,s=0,o=-1,a=!0,l=r.length-1,c=0;for(;l>=n;--l){const d=r.charCodeAt(l);if(d===Ni){if(!a){s=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===bc?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(o!==-1){const d=s===0&&t?1:s;i===-1||c===0||c===1&&i===o-1&&i===s+1?e.base=e.name=r.slice(d,o):(e.name=r.slice(d,i),e.base=r.slice(d,o),e.ext=r.slice(i,o))}return s>0?e.dir=r.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};En.win32=ks.win32=ks;En.posix=ks.posix=En;const l4=Ku==="win32"?ks.normalize:En.normalize,YV=Ku==="win32"?ks.resolve:En.resolve,XV=Ku==="win32"?ks.relative:En.relative,c4=Ku==="win32"?ks.dirname:En.dirname,Kd=Ku==="win32"?ks.basename:En.basename,QV=Ku==="win32"?ks.extname:En.extname,ha=Ku==="win32"?ks.sep:En.sep,JV=/^\w[\w\d+.-]*$/,eH=/^\//,tH=/^\/\//;function pM(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!JV.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!eH.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(tH.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function nH(r,e){return!r&&!e?"file":r}function iH(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==ao&&(e=ao+e):e=ao;break}return e}const dn="",ao="/",sH=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Se{constructor(e,t,n,i,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||dn,this.authority=e.authority||dn,this.path=e.path||dn,this.query=e.query||dn,this.fragment=e.fragment||dn):(this.scheme=nH(e,o),this.authority=t||dn,this.path=iH(this.scheme,n||dn),this.query=i||dn,this.fragment=s||dn,pM(this,o))}static isUri(e){return e instanceof Se?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return q0(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=dn),n===void 0?n=this.authority:n===null&&(n=dn),i===void 0?i=this.path:i===null&&(i=dn),s===void 0?s=this.query:s===null&&(s=dn),o===void 0?o=this.fragment:o===null&&(o=dn),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&o===this.fragment?this:new lh(t,n,i,s,o)}static parse(e,t=!1){const n=sH.exec(e);return n?new lh(n[2]||dn,$b(n[4]||dn),$b(n[5]||dn),$b(n[7]||dn),$b(n[9]||dn),t):new lh(dn,dn,dn,dn,dn)}static file(e){let t=dn;if(hi&&(e=e.replace(/\\/g,ao)),e[0]===ao&&e[1]===ao){const n=e.indexOf(ao,2);n===-1?(t=e.substring(2),e=ao):(t=e.substring(2,n),e=e.substring(n)||ao)}return new lh("file",t,e,dn,dn)}static from(e){const t=new lh(e.scheme,e.authority,e.path,e.query,e.fragment);return pM(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return hi&&e.scheme==="file"?n=Se.file(ks.join(q0(e,!0),...t)).path:n=En.join(e.path,...t),e.with({path:n})}toString(e=!1){return fk(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Se)return e;{const t=new lh(e);return t._formatted=e.external,t._fsPath=e._sep===d4?e.fsPath:null,t}}else return e}}const d4=hi?1:void 0;let lh=class extends Se{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=q0(this,!1)),this._fsPath}toString(e=!1){return e?fk(this,!0):(this._formatted||(this._formatted=fk(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=d4),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const u4={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function mM(r,e){let t,n=-1;for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47)n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t!==void 0&&(t+=r.charAt(i));else{t===void 0&&(t=r.substr(0,i));const o=u4[s];o!==void 0?(n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t+=o):n===-1&&(n=i)}}return n!==-1&&(t+=encodeURIComponent(r.substring(n))),t!==void 0?t:r}function rH(r){let e;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=u4[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function q0(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,hi&&(t=t.replace(/\//g,"\\")),t}function fk(r,e){const t=e?rH:mM;let n="",{scheme:i,authority:s,path:o,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(s||i==="file")&&(n+=ao,n+=ao),s){let c=s.indexOf("@");if(c!==-1){const d=s.substr(0,c);s=s.substr(c+1),c=d.indexOf(":"),c===-1?n+=t(d,!1):(n+=t(d.substr(0,c),!1),n+=":",n+=t(d.substr(c+1),!1)),n+="@"}s=s.toLowerCase(),c=s.indexOf(":"),c===-1?n+=t(s,!1):(n+=t(s.substr(0,c),!1),n+=s.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:mM(l,!1)),n}function h4(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+h4(r.substr(3)):r}}const _M=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function $b(r){return r.match(_M)?r.replace(_M,e=>h4(e)):r}let B=class{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new B(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return B.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return B.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return B.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){const s=e.column|0,o=t.column|0;return s-o}return n-i}clone(){return new B(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new B(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}},x=class{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return x.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return x.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return x.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return x.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return x.plusRange(this,e)}static plusRange(e,t){let n,i,s,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new x(n,i,s,o)}intersectRanges(e){return x.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),s>c?(s=c,o=d):s===c&&(o=Math.min(o,d)),n>s||n===s&&i>o?null:new x(n,i,s,o)}equalsRange(e){return x.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return x.getEndPosition(this)}static getEndPosition(e){return new B(e.endLineNumber,e.endColumn)}getStartPosition(){return x.getStartPosition(this)}static getStartPosition(e){return new B(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new x(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new x(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return x.collapseToStart(this)}static collapseToStart(e){return new x(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new x(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new x(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},ue=class extends x{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return ue.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new ue(this.startLineNumber,this.startColumn,e,t):new ue(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new B(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new B(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new ue(e,t,this.endLineNumber,this.endColumn):new ue(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new ue(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new ue(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new ue(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new ue(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,s){return s===0?new ue(e,t,n,i):new ue(n,i,e,t)}};function oH(r){return r?r.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class m{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,m._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return m._allCodicons}}m._allCodicons=[];m.add=new m("add",{fontCharacter:"\\ea60"});m.plus=new m("plus",m.add.definition);m.gistNew=new m("gist-new",m.add.definition);m.repoCreate=new m("repo-create",m.add.definition);m.lightbulb=new m("lightbulb",{fontCharacter:"\\ea61"});m.lightBulb=new m("light-bulb",{fontCharacter:"\\ea61"});m.repo=new m("repo",{fontCharacter:"\\ea62"});m.repoDelete=new m("repo-delete",{fontCharacter:"\\ea62"});m.gistFork=new m("gist-fork",{fontCharacter:"\\ea63"});m.repoForked=new m("repo-forked",{fontCharacter:"\\ea63"});m.gitPullRequest=new m("git-pull-request",{fontCharacter:"\\ea64"});m.gitPullRequestAbandoned=new m("git-pull-request-abandoned",{fontCharacter:"\\ea64"});m.recordKeys=new m("record-keys",{fontCharacter:"\\ea65"});m.keyboard=new m("keyboard",{fontCharacter:"\\ea65"});m.tag=new m("tag",{fontCharacter:"\\ea66"});m.tagAdd=new m("tag-add",{fontCharacter:"\\ea66"});m.tagRemove=new m("tag-remove",{fontCharacter:"\\ea66"});m.person=new m("person",{fontCharacter:"\\ea67"});m.personFollow=new m("person-follow",{fontCharacter:"\\ea67"});m.personOutline=new m("person-outline",{fontCharacter:"\\ea67"});m.personFilled=new m("person-filled",{fontCharacter:"\\ea67"});m.gitBranch=new m("git-branch",{fontCharacter:"\\ea68"});m.gitBranchCreate=new m("git-branch-create",{fontCharacter:"\\ea68"});m.gitBranchDelete=new m("git-branch-delete",{fontCharacter:"\\ea68"});m.sourceControl=new m("source-control",{fontCharacter:"\\ea68"});m.mirror=new m("mirror",{fontCharacter:"\\ea69"});m.mirrorPublic=new m("mirror-public",{fontCharacter:"\\ea69"});m.star=new m("star",{fontCharacter:"\\ea6a"});m.starAdd=new m("star-add",{fontCharacter:"\\ea6a"});m.starDelete=new m("star-delete",{fontCharacter:"\\ea6a"});m.starEmpty=new m("star-empty",{fontCharacter:"\\ea6a"});m.comment=new m("comment",{fontCharacter:"\\ea6b"});m.commentAdd=new m("comment-add",{fontCharacter:"\\ea6b"});m.alert=new m("alert",{fontCharacter:"\\ea6c"});m.warning=new m("warning",{fontCharacter:"\\ea6c"});m.search=new m("search",{fontCharacter:"\\ea6d"});m.searchSave=new m("search-save",{fontCharacter:"\\ea6d"});m.logOut=new m("log-out",{fontCharacter:"\\ea6e"});m.signOut=new m("sign-out",{fontCharacter:"\\ea6e"});m.logIn=new m("log-in",{fontCharacter:"\\ea6f"});m.signIn=new m("sign-in",{fontCharacter:"\\ea6f"});m.eye=new m("eye",{fontCharacter:"\\ea70"});m.eyeUnwatch=new m("eye-unwatch",{fontCharacter:"\\ea70"});m.eyeWatch=new m("eye-watch",{fontCharacter:"\\ea70"});m.circleFilled=new m("circle-filled",{fontCharacter:"\\ea71"});m.primitiveDot=new m("primitive-dot",{fontCharacter:"\\ea71"});m.closeDirty=new m("close-dirty",{fontCharacter:"\\ea71"});m.debugBreakpoint=new m("debug-breakpoint",{fontCharacter:"\\ea71"});m.debugBreakpointDisabled=new m("debug-breakpoint-disabled",{fontCharacter:"\\ea71"});m.debugHint=new m("debug-hint",{fontCharacter:"\\ea71"});m.primitiveSquare=new m("primitive-square",{fontCharacter:"\\ea72"});m.edit=new m("edit",{fontCharacter:"\\ea73"});m.pencil=new m("pencil",{fontCharacter:"\\ea73"});m.info=new m("info",{fontCharacter:"\\ea74"});m.issueOpened=new m("issue-opened",{fontCharacter:"\\ea74"});m.gistPrivate=new m("gist-private",{fontCharacter:"\\ea75"});m.gitForkPrivate=new m("git-fork-private",{fontCharacter:"\\ea75"});m.lock=new m("lock",{fontCharacter:"\\ea75"});m.mirrorPrivate=new m("mirror-private",{fontCharacter:"\\ea75"});m.close=new m("close",{fontCharacter:"\\ea76"});m.removeClose=new m("remove-close",{fontCharacter:"\\ea76"});m.x=new m("x",{fontCharacter:"\\ea76"});m.repoSync=new m("repo-sync",{fontCharacter:"\\ea77"});m.sync=new m("sync",{fontCharacter:"\\ea77"});m.clone=new m("clone",{fontCharacter:"\\ea78"});m.desktopDownload=new m("desktop-download",{fontCharacter:"\\ea78"});m.beaker=new m("beaker",{fontCharacter:"\\ea79"});m.microscope=new m("microscope",{fontCharacter:"\\ea79"});m.vm=new m("vm",{fontCharacter:"\\ea7a"});m.deviceDesktop=new m("device-desktop",{fontCharacter:"\\ea7a"});m.file=new m("file",{fontCharacter:"\\ea7b"});m.fileText=new m("file-text",{fontCharacter:"\\ea7b"});m.more=new m("more",{fontCharacter:"\\ea7c"});m.ellipsis=new m("ellipsis",{fontCharacter:"\\ea7c"});m.kebabHorizontal=new m("kebab-horizontal",{fontCharacter:"\\ea7c"});m.mailReply=new m("mail-reply",{fontCharacter:"\\ea7d"});m.reply=new m("reply",{fontCharacter:"\\ea7d"});m.organization=new m("organization",{fontCharacter:"\\ea7e"});m.organizationFilled=new m("organization-filled",{fontCharacter:"\\ea7e"});m.organizationOutline=new m("organization-outline",{fontCharacter:"\\ea7e"});m.newFile=new m("new-file",{fontCharacter:"\\ea7f"});m.fileAdd=new m("file-add",{fontCharacter:"\\ea7f"});m.newFolder=new m("new-folder",{fontCharacter:"\\ea80"});m.fileDirectoryCreate=new m("file-directory-create",{fontCharacter:"\\ea80"});m.trash=new m("trash",{fontCharacter:"\\ea81"});m.trashcan=new m("trashcan",{fontCharacter:"\\ea81"});m.history=new m("history",{fontCharacter:"\\ea82"});m.clock=new m("clock",{fontCharacter:"\\ea82"});m.folder=new m("folder",{fontCharacter:"\\ea83"});m.fileDirectory=new m("file-directory",{fontCharacter:"\\ea83"});m.symbolFolder=new m("symbol-folder",{fontCharacter:"\\ea83"});m.logoGithub=new m("logo-github",{fontCharacter:"\\ea84"});m.markGithub=new m("mark-github",{fontCharacter:"\\ea84"});m.github=new m("github",{fontCharacter:"\\ea84"});m.terminal=new m("terminal",{fontCharacter:"\\ea85"});m.console=new m("console",{fontCharacter:"\\ea85"});m.repl=new m("repl",{fontCharacter:"\\ea85"});m.zap=new m("zap",{fontCharacter:"\\ea86"});m.symbolEvent=new m("symbol-event",{fontCharacter:"\\ea86"});m.error=new m("error",{fontCharacter:"\\ea87"});m.stop=new m("stop",{fontCharacter:"\\ea87"});m.variable=new m("variable",{fontCharacter:"\\ea88"});m.symbolVariable=new m("symbol-variable",{fontCharacter:"\\ea88"});m.array=new m("array",{fontCharacter:"\\ea8a"});m.symbolArray=new m("symbol-array",{fontCharacter:"\\ea8a"});m.symbolModule=new m("symbol-module",{fontCharacter:"\\ea8b"});m.symbolPackage=new m("symbol-package",{fontCharacter:"\\ea8b"});m.symbolNamespace=new m("symbol-namespace",{fontCharacter:"\\ea8b"});m.symbolObject=new m("symbol-object",{fontCharacter:"\\ea8b"});m.symbolMethod=new m("symbol-method",{fontCharacter:"\\ea8c"});m.symbolFunction=new m("symbol-function",{fontCharacter:"\\ea8c"});m.symbolConstructor=new m("symbol-constructor",{fontCharacter:"\\ea8c"});m.symbolBoolean=new m("symbol-boolean",{fontCharacter:"\\ea8f"});m.symbolNull=new m("symbol-null",{fontCharacter:"\\ea8f"});m.symbolNumeric=new m("symbol-numeric",{fontCharacter:"\\ea90"});m.symbolNumber=new m("symbol-number",{fontCharacter:"\\ea90"});m.symbolStructure=new m("symbol-structure",{fontCharacter:"\\ea91"});m.symbolStruct=new m("symbol-struct",{fontCharacter:"\\ea91"});m.symbolParameter=new m("symbol-parameter",{fontCharacter:"\\ea92"});m.symbolTypeParameter=new m("symbol-type-parameter",{fontCharacter:"\\ea92"});m.symbolKey=new m("symbol-key",{fontCharacter:"\\ea93"});m.symbolText=new m("symbol-text",{fontCharacter:"\\ea93"});m.symbolReference=new m("symbol-reference",{fontCharacter:"\\ea94"});m.goToFile=new m("go-to-file",{fontCharacter:"\\ea94"});m.symbolEnum=new m("symbol-enum",{fontCharacter:"\\ea95"});m.symbolValue=new m("symbol-value",{fontCharacter:"\\ea95"});m.symbolRuler=new m("symbol-ruler",{fontCharacter:"\\ea96"});m.symbolUnit=new m("symbol-unit",{fontCharacter:"\\ea96"});m.activateBreakpoints=new m("activate-breakpoints",{fontCharacter:"\\ea97"});m.archive=new m("archive",{fontCharacter:"\\ea98"});m.arrowBoth=new m("arrow-both",{fontCharacter:"\\ea99"});m.arrowDown=new m("arrow-down",{fontCharacter:"\\ea9a"});m.arrowLeft=new m("arrow-left",{fontCharacter:"\\ea9b"});m.arrowRight=new m("arrow-right",{fontCharacter:"\\ea9c"});m.arrowSmallDown=new m("arrow-small-down",{fontCharacter:"\\ea9d"});m.arrowSmallLeft=new m("arrow-small-left",{fontCharacter:"\\ea9e"});m.arrowSmallRight=new m("arrow-small-right",{fontCharacter:"\\ea9f"});m.arrowSmallUp=new m("arrow-small-up",{fontCharacter:"\\eaa0"});m.arrowUp=new m("arrow-up",{fontCharacter:"\\eaa1"});m.bell=new m("bell",{fontCharacter:"\\eaa2"});m.bold=new m("bold",{fontCharacter:"\\eaa3"});m.book=new m("book",{fontCharacter:"\\eaa4"});m.bookmark=new m("bookmark",{fontCharacter:"\\eaa5"});m.debugBreakpointConditionalUnverified=new m("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"});m.debugBreakpointConditional=new m("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"});m.debugBreakpointConditionalDisabled=new m("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"});m.debugBreakpointDataUnverified=new m("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"});m.debugBreakpointData=new m("debug-breakpoint-data",{fontCharacter:"\\eaa9"});m.debugBreakpointDataDisabled=new m("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"});m.debugBreakpointLogUnverified=new m("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"});m.debugBreakpointLog=new m("debug-breakpoint-log",{fontCharacter:"\\eaab"});m.debugBreakpointLogDisabled=new m("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"});m.briefcase=new m("briefcase",{fontCharacter:"\\eaac"});m.broadcast=new m("broadcast",{fontCharacter:"\\eaad"});m.browser=new m("browser",{fontCharacter:"\\eaae"});m.bug=new m("bug",{fontCharacter:"\\eaaf"});m.calendar=new m("calendar",{fontCharacter:"\\eab0"});m.caseSensitive=new m("case-sensitive",{fontCharacter:"\\eab1"});m.check=new m("check",{fontCharacter:"\\eab2"});m.checklist=new m("checklist",{fontCharacter:"\\eab3"});m.chevronDown=new m("chevron-down",{fontCharacter:"\\eab4"});m.dropDownButton=new m("drop-down-button",m.chevronDown.definition);m.chevronLeft=new m("chevron-left",{fontCharacter:"\\eab5"});m.chevronRight=new m("chevron-right",{fontCharacter:"\\eab6"});m.chevronUp=new m("chevron-up",{fontCharacter:"\\eab7"});m.chromeClose=new m("chrome-close",{fontCharacter:"\\eab8"});m.chromeMaximize=new m("chrome-maximize",{fontCharacter:"\\eab9"});m.chromeMinimize=new m("chrome-minimize",{fontCharacter:"\\eaba"});m.chromeRestore=new m("chrome-restore",{fontCharacter:"\\eabb"});m.circleOutline=new m("circle-outline",{fontCharacter:"\\eabc"});m.debugBreakpointUnverified=new m("debug-breakpoint-unverified",{fontCharacter:"\\eabc"});m.circleSlash=new m("circle-slash",{fontCharacter:"\\eabd"});m.circuitBoard=new m("circuit-board",{fontCharacter:"\\eabe"});m.clearAll=new m("clear-all",{fontCharacter:"\\eabf"});m.clippy=new m("clippy",{fontCharacter:"\\eac0"});m.closeAll=new m("close-all",{fontCharacter:"\\eac1"});m.cloudDownload=new m("cloud-download",{fontCharacter:"\\eac2"});m.cloudUpload=new m("cloud-upload",{fontCharacter:"\\eac3"});m.code=new m("code",{fontCharacter:"\\eac4"});m.collapseAll=new m("collapse-all",{fontCharacter:"\\eac5"});m.colorMode=new m("color-mode",{fontCharacter:"\\eac6"});m.commentDiscussion=new m("comment-discussion",{fontCharacter:"\\eac7"});m.compareChanges=new m("compare-changes",{fontCharacter:"\\eafd"});m.creditCard=new m("credit-card",{fontCharacter:"\\eac9"});m.dash=new m("dash",{fontCharacter:"\\eacc"});m.dashboard=new m("dashboard",{fontCharacter:"\\eacd"});m.database=new m("database",{fontCharacter:"\\eace"});m.debugContinue=new m("debug-continue",{fontCharacter:"\\eacf"});m.debugDisconnect=new m("debug-disconnect",{fontCharacter:"\\ead0"});m.debugPause=new m("debug-pause",{fontCharacter:"\\ead1"});m.debugRestart=new m("debug-restart",{fontCharacter:"\\ead2"});m.debugStart=new m("debug-start",{fontCharacter:"\\ead3"});m.debugStepInto=new m("debug-step-into",{fontCharacter:"\\ead4"});m.debugStepOut=new m("debug-step-out",{fontCharacter:"\\ead5"});m.debugStepOver=new m("debug-step-over",{fontCharacter:"\\ead6"});m.debugStop=new m("debug-stop",{fontCharacter:"\\ead7"});m.debug=new m("debug",{fontCharacter:"\\ead8"});m.deviceCameraVideo=new m("device-camera-video",{fontCharacter:"\\ead9"});m.deviceCamera=new m("device-camera",{fontCharacter:"\\eada"});m.deviceMobile=new m("device-mobile",{fontCharacter:"\\eadb"});m.diffAdded=new m("diff-added",{fontCharacter:"\\eadc"});m.diffIgnored=new m("diff-ignored",{fontCharacter:"\\eadd"});m.diffModified=new m("diff-modified",{fontCharacter:"\\eade"});m.diffRemoved=new m("diff-removed",{fontCharacter:"\\eadf"});m.diffRenamed=new m("diff-renamed",{fontCharacter:"\\eae0"});m.diff=new m("diff",{fontCharacter:"\\eae1"});m.discard=new m("discard",{fontCharacter:"\\eae2"});m.editorLayout=new m("editor-layout",{fontCharacter:"\\eae3"});m.emptyWindow=new m("empty-window",{fontCharacter:"\\eae4"});m.exclude=new m("exclude",{fontCharacter:"\\eae5"});m.extensions=new m("extensions",{fontCharacter:"\\eae6"});m.eyeClosed=new m("eye-closed",{fontCharacter:"\\eae7"});m.fileBinary=new m("file-binary",{fontCharacter:"\\eae8"});m.fileCode=new m("file-code",{fontCharacter:"\\eae9"});m.fileMedia=new m("file-media",{fontCharacter:"\\eaea"});m.filePdf=new m("file-pdf",{fontCharacter:"\\eaeb"});m.fileSubmodule=new m("file-submodule",{fontCharacter:"\\eaec"});m.fileSymlinkDirectory=new m("file-symlink-directory",{fontCharacter:"\\eaed"});m.fileSymlinkFile=new m("file-symlink-file",{fontCharacter:"\\eaee"});m.fileZip=new m("file-zip",{fontCharacter:"\\eaef"});m.files=new m("files",{fontCharacter:"\\eaf0"});m.filter=new m("filter",{fontCharacter:"\\eaf1"});m.flame=new m("flame",{fontCharacter:"\\eaf2"});m.foldDown=new m("fold-down",{fontCharacter:"\\eaf3"});m.foldUp=new m("fold-up",{fontCharacter:"\\eaf4"});m.fold=new m("fold",{fontCharacter:"\\eaf5"});m.folderActive=new m("folder-active",{fontCharacter:"\\eaf6"});m.folderOpened=new m("folder-opened",{fontCharacter:"\\eaf7"});m.gear=new m("gear",{fontCharacter:"\\eaf8"});m.gift=new m("gift",{fontCharacter:"\\eaf9"});m.gistSecret=new m("gist-secret",{fontCharacter:"\\eafa"});m.gist=new m("gist",{fontCharacter:"\\eafb"});m.gitCommit=new m("git-commit",{fontCharacter:"\\eafc"});m.gitCompare=new m("git-compare",{fontCharacter:"\\eafd"});m.gitMerge=new m("git-merge",{fontCharacter:"\\eafe"});m.githubAction=new m("github-action",{fontCharacter:"\\eaff"});m.githubAlt=new m("github-alt",{fontCharacter:"\\eb00"});m.globe=new m("globe",{fontCharacter:"\\eb01"});m.grabber=new m("grabber",{fontCharacter:"\\eb02"});m.graph=new m("graph",{fontCharacter:"\\eb03"});m.gripper=new m("gripper",{fontCharacter:"\\eb04"});m.heart=new m("heart",{fontCharacter:"\\eb05"});m.home=new m("home",{fontCharacter:"\\eb06"});m.horizontalRule=new m("horizontal-rule",{fontCharacter:"\\eb07"});m.hubot=new m("hubot",{fontCharacter:"\\eb08"});m.inbox=new m("inbox",{fontCharacter:"\\eb09"});m.issueClosed=new m("issue-closed",{fontCharacter:"\\eba4"});m.issueReopened=new m("issue-reopened",{fontCharacter:"\\eb0b"});m.issues=new m("issues",{fontCharacter:"\\eb0c"});m.italic=new m("italic",{fontCharacter:"\\eb0d"});m.jersey=new m("jersey",{fontCharacter:"\\eb0e"});m.json=new m("json",{fontCharacter:"\\eb0f"});m.kebabVertical=new m("kebab-vertical",{fontCharacter:"\\eb10"});m.key=new m("key",{fontCharacter:"\\eb11"});m.law=new m("law",{fontCharacter:"\\eb12"});m.lightbulbAutofix=new m("lightbulb-autofix",{fontCharacter:"\\eb13"});m.linkExternal=new m("link-external",{fontCharacter:"\\eb14"});m.link=new m("link",{fontCharacter:"\\eb15"});m.listOrdered=new m("list-ordered",{fontCharacter:"\\eb16"});m.listUnordered=new m("list-unordered",{fontCharacter:"\\eb17"});m.liveShare=new m("live-share",{fontCharacter:"\\eb18"});m.loading=new m("loading",{fontCharacter:"\\eb19"});m.location=new m("location",{fontCharacter:"\\eb1a"});m.mailRead=new m("mail-read",{fontCharacter:"\\eb1b"});m.mail=new m("mail",{fontCharacter:"\\eb1c"});m.markdown=new m("markdown",{fontCharacter:"\\eb1d"});m.megaphone=new m("megaphone",{fontCharacter:"\\eb1e"});m.mention=new m("mention",{fontCharacter:"\\eb1f"});m.milestone=new m("milestone",{fontCharacter:"\\eb20"});m.mortarBoard=new m("mortar-board",{fontCharacter:"\\eb21"});m.move=new m("move",{fontCharacter:"\\eb22"});m.multipleWindows=new m("multiple-windows",{fontCharacter:"\\eb23"});m.mute=new m("mute",{fontCharacter:"\\eb24"});m.noNewline=new m("no-newline",{fontCharacter:"\\eb25"});m.note=new m("note",{fontCharacter:"\\eb26"});m.octoface=new m("octoface",{fontCharacter:"\\eb27"});m.openPreview=new m("open-preview",{fontCharacter:"\\eb28"});m.package_=new m("package",{fontCharacter:"\\eb29"});m.paintcan=new m("paintcan",{fontCharacter:"\\eb2a"});m.pin=new m("pin",{fontCharacter:"\\eb2b"});m.play=new m("play",{fontCharacter:"\\eb2c"});m.run=new m("run",{fontCharacter:"\\eb2c"});m.plug=new m("plug",{fontCharacter:"\\eb2d"});m.preserveCase=new m("preserve-case",{fontCharacter:"\\eb2e"});m.preview=new m("preview",{fontCharacter:"\\eb2f"});m.project=new m("project",{fontCharacter:"\\eb30"});m.pulse=new m("pulse",{fontCharacter:"\\eb31"});m.question=new m("question",{fontCharacter:"\\eb32"});m.quote=new m("quote",{fontCharacter:"\\eb33"});m.radioTower=new m("radio-tower",{fontCharacter:"\\eb34"});m.reactions=new m("reactions",{fontCharacter:"\\eb35"});m.references=new m("references",{fontCharacter:"\\eb36"});m.refresh=new m("refresh",{fontCharacter:"\\eb37"});m.regex=new m("regex",{fontCharacter:"\\eb38"});m.remoteExplorer=new m("remote-explorer",{fontCharacter:"\\eb39"});m.remote=new m("remote",{fontCharacter:"\\eb3a"});m.remove=new m("remove",{fontCharacter:"\\eb3b"});m.replaceAll=new m("replace-all",{fontCharacter:"\\eb3c"});m.replace=new m("replace",{fontCharacter:"\\eb3d"});m.repoClone=new m("repo-clone",{fontCharacter:"\\eb3e"});m.repoForcePush=new m("repo-force-push",{fontCharacter:"\\eb3f"});m.repoPull=new m("repo-pull",{fontCharacter:"\\eb40"});m.repoPush=new m("repo-push",{fontCharacter:"\\eb41"});m.report=new m("report",{fontCharacter:"\\eb42"});m.requestChanges=new m("request-changes",{fontCharacter:"\\eb43"});m.rocket=new m("rocket",{fontCharacter:"\\eb44"});m.rootFolderOpened=new m("root-folder-opened",{fontCharacter:"\\eb45"});m.rootFolder=new m("root-folder",{fontCharacter:"\\eb46"});m.rss=new m("rss",{fontCharacter:"\\eb47"});m.ruby=new m("ruby",{fontCharacter:"\\eb48"});m.saveAll=new m("save-all",{fontCharacter:"\\eb49"});m.saveAs=new m("save-as",{fontCharacter:"\\eb4a"});m.save=new m("save",{fontCharacter:"\\eb4b"});m.screenFull=new m("screen-full",{fontCharacter:"\\eb4c"});m.screenNormal=new m("screen-normal",{fontCharacter:"\\eb4d"});m.searchStop=new m("search-stop",{fontCharacter:"\\eb4e"});m.server=new m("server",{fontCharacter:"\\eb50"});m.settingsGear=new m("settings-gear",{fontCharacter:"\\eb51"});m.settings=new m("settings",{fontCharacter:"\\eb52"});m.shield=new m("shield",{fontCharacter:"\\eb53"});m.smiley=new m("smiley",{fontCharacter:"\\eb54"});m.sortPrecedence=new m("sort-precedence",{fontCharacter:"\\eb55"});m.splitHorizontal=new m("split-horizontal",{fontCharacter:"\\eb56"});m.splitVertical=new m("split-vertical",{fontCharacter:"\\eb57"});m.squirrel=new m("squirrel",{fontCharacter:"\\eb58"});m.starFull=new m("star-full",{fontCharacter:"\\eb59"});m.starHalf=new m("star-half",{fontCharacter:"\\eb5a"});m.symbolClass=new m("symbol-class",{fontCharacter:"\\eb5b"});m.symbolColor=new m("symbol-color",{fontCharacter:"\\eb5c"});m.symbolCustomColor=new m("symbol-customcolor",{fontCharacter:"\\eb5c"});m.symbolConstant=new m("symbol-constant",{fontCharacter:"\\eb5d"});m.symbolEnumMember=new m("symbol-enum-member",{fontCharacter:"\\eb5e"});m.symbolField=new m("symbol-field",{fontCharacter:"\\eb5f"});m.symbolFile=new m("symbol-file",{fontCharacter:"\\eb60"});m.symbolInterface=new m("symbol-interface",{fontCharacter:"\\eb61"});m.symbolKeyword=new m("symbol-keyword",{fontCharacter:"\\eb62"});m.symbolMisc=new m("symbol-misc",{fontCharacter:"\\eb63"});m.symbolOperator=new m("symbol-operator",{fontCharacter:"\\eb64"});m.symbolProperty=new m("symbol-property",{fontCharacter:"\\eb65"});m.wrench=new m("wrench",{fontCharacter:"\\eb65"});m.wrenchSubaction=new m("wrench-subaction",{fontCharacter:"\\eb65"});m.symbolSnippet=new m("symbol-snippet",{fontCharacter:"\\eb66"});m.tasklist=new m("tasklist",{fontCharacter:"\\eb67"});m.telescope=new m("telescope",{fontCharacter:"\\eb68"});m.textSize=new m("text-size",{fontCharacter:"\\eb69"});m.threeBars=new m("three-bars",{fontCharacter:"\\eb6a"});m.thumbsdown=new m("thumbsdown",{fontCharacter:"\\eb6b"});m.thumbsup=new m("thumbsup",{fontCharacter:"\\eb6c"});m.tools=new m("tools",{fontCharacter:"\\eb6d"});m.triangleDown=new m("triangle-down",{fontCharacter:"\\eb6e"});m.triangleLeft=new m("triangle-left",{fontCharacter:"\\eb6f"});m.triangleRight=new m("triangle-right",{fontCharacter:"\\eb70"});m.triangleUp=new m("triangle-up",{fontCharacter:"\\eb71"});m.twitter=new m("twitter",{fontCharacter:"\\eb72"});m.unfold=new m("unfold",{fontCharacter:"\\eb73"});m.unlock=new m("unlock",{fontCharacter:"\\eb74"});m.unmute=new m("unmute",{fontCharacter:"\\eb75"});m.unverified=new m("unverified",{fontCharacter:"\\eb76"});m.verified=new m("verified",{fontCharacter:"\\eb77"});m.versions=new m("versions",{fontCharacter:"\\eb78"});m.vmActive=new m("vm-active",{fontCharacter:"\\eb79"});m.vmOutline=new m("vm-outline",{fontCharacter:"\\eb7a"});m.vmRunning=new m("vm-running",{fontCharacter:"\\eb7b"});m.watch=new m("watch",{fontCharacter:"\\eb7c"});m.whitespace=new m("whitespace",{fontCharacter:"\\eb7d"});m.wholeWord=new m("whole-word",{fontCharacter:"\\eb7e"});m.window=new m("window",{fontCharacter:"\\eb7f"});m.wordWrap=new m("word-wrap",{fontCharacter:"\\eb80"});m.zoomIn=new m("zoom-in",{fontCharacter:"\\eb81"});m.zoomOut=new m("zoom-out",{fontCharacter:"\\eb82"});m.listFilter=new m("list-filter",{fontCharacter:"\\eb83"});m.listFlat=new m("list-flat",{fontCharacter:"\\eb84"});m.listSelection=new m("list-selection",{fontCharacter:"\\eb85"});m.selection=new m("selection",{fontCharacter:"\\eb85"});m.listTree=new m("list-tree",{fontCharacter:"\\eb86"});m.debugBreakpointFunctionUnverified=new m("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"});m.debugBreakpointFunction=new m("debug-breakpoint-function",{fontCharacter:"\\eb88"});m.debugBreakpointFunctionDisabled=new m("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"});m.debugStackframeActive=new m("debug-stackframe-active",{fontCharacter:"\\eb89"});m.circleSmallFilled=new m("circle-small-filled",{fontCharacter:"\\eb8a"});m.debugStackframeDot=new m("debug-stackframe-dot",m.circleSmallFilled.definition);m.debugStackframe=new m("debug-stackframe",{fontCharacter:"\\eb8b"});m.debugStackframeFocused=new m("debug-stackframe-focused",{fontCharacter:"\\eb8b"});m.debugBreakpointUnsupported=new m("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"});m.symbolString=new m("symbol-string",{fontCharacter:"\\eb8d"});m.debugReverseContinue=new m("debug-reverse-continue",{fontCharacter:"\\eb8e"});m.debugStepBack=new m("debug-step-back",{fontCharacter:"\\eb8f"});m.debugRestartFrame=new m("debug-restart-frame",{fontCharacter:"\\eb90"});m.callIncoming=new m("call-incoming",{fontCharacter:"\\eb92"});m.callOutgoing=new m("call-outgoing",{fontCharacter:"\\eb93"});m.menu=new m("menu",{fontCharacter:"\\eb94"});m.expandAll=new m("expand-all",{fontCharacter:"\\eb95"});m.feedback=new m("feedback",{fontCharacter:"\\eb96"});m.groupByRefType=new m("group-by-ref-type",{fontCharacter:"\\eb97"});m.ungroupByRefType=new m("ungroup-by-ref-type",{fontCharacter:"\\eb98"});m.account=new m("account",{fontCharacter:"\\eb99"});m.bellDot=new m("bell-dot",{fontCharacter:"\\eb9a"});m.debugConsole=new m("debug-console",{fontCharacter:"\\eb9b"});m.library=new m("library",{fontCharacter:"\\eb9c"});m.output=new m("output",{fontCharacter:"\\eb9d"});m.runAll=new m("run-all",{fontCharacter:"\\eb9e"});m.syncIgnored=new m("sync-ignored",{fontCharacter:"\\eb9f"});m.pinned=new m("pinned",{fontCharacter:"\\eba0"});m.githubInverted=new m("github-inverted",{fontCharacter:"\\eba1"});m.debugAlt=new m("debug-alt",{fontCharacter:"\\eb91"});m.serverProcess=new m("server-process",{fontCharacter:"\\eba2"});m.serverEnvironment=new m("server-environment",{fontCharacter:"\\eba3"});m.pass=new m("pass",{fontCharacter:"\\eba4"});m.stopCircle=new m("stop-circle",{fontCharacter:"\\eba5"});m.playCircle=new m("play-circle",{fontCharacter:"\\eba6"});m.record=new m("record",{fontCharacter:"\\eba7"});m.debugAltSmall=new m("debug-alt-small",{fontCharacter:"\\eba8"});m.vmConnect=new m("vm-connect",{fontCharacter:"\\eba9"});m.cloud=new m("cloud",{fontCharacter:"\\ebaa"});m.merge=new m("merge",{fontCharacter:"\\ebab"});m.exportIcon=new m("export",{fontCharacter:"\\ebac"});m.graphLeft=new m("graph-left",{fontCharacter:"\\ebad"});m.magnet=new m("magnet",{fontCharacter:"\\ebae"});m.notebook=new m("notebook",{fontCharacter:"\\ebaf"});m.redo=new m("redo",{fontCharacter:"\\ebb0"});m.checkAll=new m("check-all",{fontCharacter:"\\ebb1"});m.pinnedDirty=new m("pinned-dirty",{fontCharacter:"\\ebb2"});m.passFilled=new m("pass-filled",{fontCharacter:"\\ebb3"});m.circleLargeFilled=new m("circle-large-filled",{fontCharacter:"\\ebb4"});m.circleLargeOutline=new m("circle-large-outline",{fontCharacter:"\\ebb5"});m.combine=new m("combine",{fontCharacter:"\\ebb6"});m.gather=new m("gather",{fontCharacter:"\\ebb6"});m.table=new m("table",{fontCharacter:"\\ebb7"});m.variableGroup=new m("variable-group",{fontCharacter:"\\ebb8"});m.typeHierarchy=new m("type-hierarchy",{fontCharacter:"\\ebb9"});m.typeHierarchySub=new m("type-hierarchy-sub",{fontCharacter:"\\ebba"});m.typeHierarchySuper=new m("type-hierarchy-super",{fontCharacter:"\\ebbb"});m.gitPullRequestCreate=new m("git-pull-request-create",{fontCharacter:"\\ebbc"});m.runAbove=new m("run-above",{fontCharacter:"\\ebbd"});m.runBelow=new m("run-below",{fontCharacter:"\\ebbe"});m.notebookTemplate=new m("notebook-template",{fontCharacter:"\\ebbf"});m.debugRerun=new m("debug-rerun",{fontCharacter:"\\ebc0"});m.workspaceTrusted=new m("workspace-trusted",{fontCharacter:"\\ebc1"});m.workspaceUntrusted=new m("workspace-untrusted",{fontCharacter:"\\ebc2"});m.workspaceUnspecified=new m("workspace-unspecified",{fontCharacter:"\\ebc3"});m.terminalCmd=new m("terminal-cmd",{fontCharacter:"\\ebc4"});m.terminalDebian=new m("terminal-debian",{fontCharacter:"\\ebc5"});m.terminalLinux=new m("terminal-linux",{fontCharacter:"\\ebc6"});m.terminalPowershell=new m("terminal-powershell",{fontCharacter:"\\ebc7"});m.terminalTmux=new m("terminal-tmux",{fontCharacter:"\\ebc8"});m.terminalUbuntu=new m("terminal-ubuntu",{fontCharacter:"\\ebc9"});m.terminalBash=new m("terminal-bash",{fontCharacter:"\\ebca"});m.arrowSwap=new m("arrow-swap",{fontCharacter:"\\ebcb"});m.copy=new m("copy",{fontCharacter:"\\ebcc"});m.personAdd=new m("person-add",{fontCharacter:"\\ebcd"});m.filterFilled=new m("filter-filled",{fontCharacter:"\\ebce"});m.wand=new m("wand",{fontCharacter:"\\ebcf"});m.debugLineByLine=new m("debug-line-by-line",{fontCharacter:"\\ebd0"});m.inspect=new m("inspect",{fontCharacter:"\\ebd1"});m.layers=new m("layers",{fontCharacter:"\\ebd2"});m.layersDot=new m("layers-dot",{fontCharacter:"\\ebd3"});m.layersActive=new m("layers-active",{fontCharacter:"\\ebd4"});m.compass=new m("compass",{fontCharacter:"\\ebd5"});m.compassDot=new m("compass-dot",{fontCharacter:"\\ebd6"});m.compassActive=new m("compass-active",{fontCharacter:"\\ebd7"});m.azure=new m("azure",{fontCharacter:"\\ebd8"});m.issueDraft=new m("issue-draft",{fontCharacter:"\\ebd9"});m.gitPullRequestClosed=new m("git-pull-request-closed",{fontCharacter:"\\ebda"});m.gitPullRequestDraft=new m("git-pull-request-draft",{fontCharacter:"\\ebdb"});m.debugAll=new m("debug-all",{fontCharacter:"\\ebdc"});m.debugCoverage=new m("debug-coverage",{fontCharacter:"\\ebdd"});m.runErrors=new m("run-errors",{fontCharacter:"\\ebde"});m.folderLibrary=new m("folder-library",{fontCharacter:"\\ebdf"});m.debugContinueSmall=new m("debug-continue-small",{fontCharacter:"\\ebe0"});m.beakerStop=new m("beaker-stop",{fontCharacter:"\\ebe1"});m.graphLine=new m("graph-line",{fontCharacter:"\\ebe2"});m.graphScatter=new m("graph-scatter",{fontCharacter:"\\ebe3"});m.pieChart=new m("pie-chart",{fontCharacter:"\\ebe4"});m.bracket=new m("bracket",m.json.definition);m.bracketDot=new m("bracket-dot",{fontCharacter:"\\ebe5"});m.bracketError=new m("bracket-error",{fontCharacter:"\\ebe6"});m.lockSmall=new m("lock-small",{fontCharacter:"\\ebe7"});m.azureDevops=new m("azure-devops",{fontCharacter:"\\ebe8"});m.verifiedFilled=new m("verified-filled",{fontCharacter:"\\ebe9"});m.newLine=new m("newline",{fontCharacter:"\\ebea"});m.layout=new m("layout",{fontCharacter:"\\ebeb"});m.layoutActivitybarLeft=new m("layout-activitybar-left",{fontCharacter:"\\ebec"});m.layoutActivitybarRight=new m("layout-activitybar-right",{fontCharacter:"\\ebed"});m.layoutPanelLeft=new m("layout-panel-left",{fontCharacter:"\\ebee"});m.layoutPanelCenter=new m("layout-panel-center",{fontCharacter:"\\ebef"});m.layoutPanelJustify=new m("layout-panel-justify",{fontCharacter:"\\ebf0"});m.layoutPanelRight=new m("layout-panel-right",{fontCharacter:"\\ebf1"});m.layoutPanel=new m("layout-panel",{fontCharacter:"\\ebf2"});m.layoutSidebarLeft=new m("layout-sidebar-left",{fontCharacter:"\\ebf3"});m.layoutSidebarRight=new m("layout-sidebar-right",{fontCharacter:"\\ebf4"});m.layoutStatusbar=new m("layout-statusbar",{fontCharacter:"\\ebf5"});m.layoutMenubar=new m("layout-menubar",{fontCharacter:"\\ebf6"});m.layoutCentered=new m("layout-centered",{fontCharacter:"\\ebf7"});m.layoutSidebarRightOff=new m("layout-sidebar-right-off",{fontCharacter:"\\ec00"});m.layoutPanelOff=new m("layout-panel-off",{fontCharacter:"\\ec01"});m.layoutSidebarLeftOff=new m("layout-sidebar-left-off",{fontCharacter:"\\ec02"});m.target=new m("target",{fontCharacter:"\\ebf8"});m.indent=new m("indent",{fontCharacter:"\\ebf9"});m.recordSmall=new m("record-small",{fontCharacter:"\\ebfa"});m.errorSmall=new m("error-small",{fontCharacter:"\\ebfb"});m.arrowCircleDown=new m("arrow-circle-down",{fontCharacter:"\\ebfc"});m.arrowCircleLeft=new m("arrow-circle-left",{fontCharacter:"\\ebfd"});m.arrowCircleRight=new m("arrow-circle-right",{fontCharacter:"\\ebfe"});m.arrowCircleUp=new m("arrow-circle-up",{fontCharacter:"\\ebff"});m.heartFilled=new m("heart-filled",{fontCharacter:"\\ec04"});m.map=new m("map",{fontCharacter:"\\ec05"});m.mapFilled=new m("map-filled",{fontCharacter:"\\ec06"});m.circleSmall=new m("circle-small",{fontCharacter:"\\ec07"});m.bellSlash=new m("bell-slash",{fontCharacter:"\\ec08"});m.bellSlashDot=new m("bell-slash-dot",{fontCharacter:"\\ec09"});m.commentUnresolved=new m("comment-unresolved",{fontCharacter:"\\ec0a"});m.gitPullRequestGoToChanges=new m("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"});m.gitPullRequestNewChanges=new m("git-pull-request-new-changes",{fontCharacter:"\\ec0c"});m.dialogError=new m("dialog-error",m.error.definition);m.dialogWarning=new m("dialog-warning",m.warning.definition);m.dialogInfo=new m("dialog-info",m.info.definition);m.dialogClose=new m("dialog-close",m.close.definition);m.treeItemExpanded=new m("tree-item-expanded",m.chevronDown.definition);m.treeFilterOnTypeOn=new m("tree-filter-on-type-on",m.listFilter.definition);m.treeFilterOnTypeOff=new m("tree-filter-on-type-off",m.listSelection.definition);m.treeFilterClear=new m("tree-filter-clear",m.close.definition);m.treeItemLoading=new m("tree-item-loading",m.loading.definition);m.menuSelection=new m("menu-selection",m.check.definition);m.menuSubmenu=new m("menu-submenu",m.chevronRight.definition);m.menuBarMore=new m("menubar-more",m.more.definition);m.scrollbarButtonLeft=new m("scrollbar-button-left",m.triangleLeft.definition);m.scrollbarButtonRight=new m("scrollbar-button-right",m.triangleRight.definition);m.scrollbarButtonUp=new m("scrollbar-button-up",m.triangleUp.definition);m.scrollbarButtonDown=new m("scrollbar-button-down",m.triangleDown.definition);m.toolBarMore=new m("toolbar-more",m.more.definition);m.quickInputBack=new m("quick-input-back",m.arrowLeft.definition);var Gi;(function(r){r.iconNameSegment="[A-Za-z0-9]+",r.iconNameExpression="[A-Za-z0-9-]+",r.iconModifierExpression="~[A-Za-z]+",r.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${r.iconNameExpression})(${r.iconModifierExpression})?$`);function t(s){if(s instanceof m)return["codicon","codicon-"+s.id];const o=e.exec(s.id);if(!o)return t(m.error);const[,a,l]=o,c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}r.asClassNameArray=t;function n(s){return t(s).join(" ")}r.asClassName=n;function i(s){return"."+t(s).join(".")}r.asCSSSelector=i})(Gi||(Gi={}));var gk=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let aH=class{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Ke(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerFactory(e,t){var n;(n=this._factories.get(e))===null||n===void 0||n.dispose();const i=new lH(this,e,t);return this._factories.set(e,i),Ke(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}getOrCreate(e){return gk(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(yield n.resolve(),this.get(e))})}get(e){return this._map.get(e)||null}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class lH extends j{constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return gk(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return gk(this,void 0,void 0,function*(){const e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}let Tm=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class VE{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class Fy{constructor(e,t){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}var Dm;(function(r){const e=new Map;e.set(0,m.symbolMethod),e.set(1,m.symbolFunction),e.set(2,m.symbolConstructor),e.set(3,m.symbolField),e.set(4,m.symbolVariable),e.set(5,m.symbolClass),e.set(6,m.symbolStruct),e.set(7,m.symbolInterface),e.set(8,m.symbolModule),e.set(9,m.symbolProperty),e.set(10,m.symbolEvent),e.set(11,m.symbolOperator),e.set(12,m.symbolUnit),e.set(13,m.symbolValue),e.set(15,m.symbolEnum),e.set(14,m.symbolConstant),e.set(15,m.symbolEnum),e.set(16,m.symbolEnumMember),e.set(17,m.symbolKeyword),e.set(27,m.symbolSnippet),e.set(18,m.symbolText),e.set(19,m.symbolColor),e.set(20,m.symbolFile),e.set(21,m.symbolReference),e.set(22,m.symbolCustomColor),e.set(23,m.symbolFolder),e.set(24,m.symbolTypeParameter),e.set(25,m.account),e.set(26,m.issues);function t(s){let o=e.get(s);return o||(console.info("No codicon found for CompletionItemKind "+s),o=m.symbolProperty),o}r.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function i(s,o){let a=n.get(s);return typeof a>"u"&&!o&&(a=9),a}r.fromString=i})(Dm||(Dm={}));var lr;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(lr||(lr={}));var fa;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(fa||(fa={}));var Em;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(Em||(Em={}));function cH(r){return r&&Se.isUri(r.uri)&&x.isIRange(r.range)&&(x.isIRange(r.originSelectionRange)||x.isIRange(r.targetSelectionRange))}var pk;(function(r){const e=new Map;e.set(0,m.symbolFile),e.set(1,m.symbolModule),e.set(2,m.symbolNamespace),e.set(3,m.symbolPackage),e.set(4,m.symbolClass),e.set(5,m.symbolMethod),e.set(6,m.symbolProperty),e.set(7,m.symbolField),e.set(8,m.symbolConstructor),e.set(9,m.symbolEnum),e.set(10,m.symbolInterface),e.set(11,m.symbolFunction),e.set(12,m.symbolVariable),e.set(13,m.symbolConstant),e.set(14,m.symbolString),e.set(15,m.symbolNumber),e.set(16,m.symbolBoolean),e.set(17,m.symbolArray),e.set(18,m.symbolObject),e.set(19,m.symbolKey),e.set(20,m.symbolNull),e.set(21,m.symbolEnumMember),e.set(22,m.symbolStruct),e.set(23,m.symbolEvent),e.set(24,m.symbolOperator),e.set(25,m.symbolTypeParameter);function t(n){let i=e.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=m.symbolProperty),i}r.toIcon=t})(pk||(pk={}));class ko{constructor(e){this.value=e}}ko.Comment=new ko("comment");ko.Imports=new ko("imports");ko.Region=new ko("region");var mk;(function(r){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}r.is=e})(mk||(mk={}));var Z0;(function(r){r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(Z0||(Z0={}));const Yt=new aH;var _k;(function(r){r[r.Unknown=0]="Unknown",r[r.Disabled=1]="Disabled",r[r.Enabled=2]="Enabled"})(_k||(_k={}));var bk;(function(r){r[r.Invoke=1]="Invoke",r[r.Auto=2]="Auto"})(bk||(bk={}));var Y0;(function(r){r[r.KeepWhitespace=1]="KeepWhitespace",r[r.InsertAsSnippet=4]="InsertAsSnippet"})(Y0||(Y0={}));var vk;(function(r){r[r.Method=0]="Method",r[r.Function=1]="Function",r[r.Constructor=2]="Constructor",r[r.Field=3]="Field",r[r.Variable=4]="Variable",r[r.Class=5]="Class",r[r.Struct=6]="Struct",r[r.Interface=7]="Interface",r[r.Module=8]="Module",r[r.Property=9]="Property",r[r.Event=10]="Event",r[r.Operator=11]="Operator",r[r.Unit=12]="Unit",r[r.Value=13]="Value",r[r.Constant=14]="Constant",r[r.Enum=15]="Enum",r[r.EnumMember=16]="EnumMember",r[r.Keyword=17]="Keyword",r[r.Text=18]="Text",r[r.Color=19]="Color",r[r.File=20]="File",r[r.Reference=21]="Reference",r[r.Customcolor=22]="Customcolor",r[r.Folder=23]="Folder",r[r.TypeParameter=24]="TypeParameter",r[r.User=25]="User",r[r.Issue=26]="Issue",r[r.Snippet=27]="Snippet"})(vk||(vk={}));var Ck;(function(r){r[r.Deprecated=1]="Deprecated"})(Ck||(Ck={}));var yk;(function(r){r[r.Invoke=0]="Invoke",r[r.TriggerCharacter=1]="TriggerCharacter",r[r.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(yk||(yk={}));var wk;(function(r){r[r.EXACT=0]="EXACT",r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW"})(wk||(wk={}));var Sk;(function(r){r[r.NotSet=0]="NotSet",r[r.ContentFlush=1]="ContentFlush",r[r.RecoverFromMarkers=2]="RecoverFromMarkers",r[r.Explicit=3]="Explicit",r[r.Paste=4]="Paste",r[r.Undo=5]="Undo",r[r.Redo=6]="Redo"})(Sk||(Sk={}));var xk;(function(r){r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(xk||(xk={}));var kk;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(kk||(kk={}));var Lk;(function(r){r[r.None=0]="None",r[r.Keep=1]="Keep",r[r.Brackets=2]="Brackets",r[r.Advanced=3]="Advanced",r[r.Full=4]="Full"})(Lk||(Lk={}));var Tk;(function(r){r[r.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",r[r.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",r[r.accessibilitySupport=2]="accessibilitySupport",r[r.accessibilityPageSize=3]="accessibilityPageSize",r[r.ariaLabel=4]="ariaLabel",r[r.autoClosingBrackets=5]="autoClosingBrackets",r[r.autoClosingDelete=6]="autoClosingDelete",r[r.autoClosingOvertype=7]="autoClosingOvertype",r[r.autoClosingQuotes=8]="autoClosingQuotes",r[r.autoIndent=9]="autoIndent",r[r.automaticLayout=10]="automaticLayout",r[r.autoSurround=11]="autoSurround",r[r.bracketPairColorization=12]="bracketPairColorization",r[r.guides=13]="guides",r[r.codeLens=14]="codeLens",r[r.codeLensFontFamily=15]="codeLensFontFamily",r[r.codeLensFontSize=16]="codeLensFontSize",r[r.colorDecorators=17]="colorDecorators",r[r.columnSelection=18]="columnSelection",r[r.comments=19]="comments",r[r.contextmenu=20]="contextmenu",r[r.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",r[r.cursorBlinking=22]="cursorBlinking",r[r.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",r[r.cursorStyle=24]="cursorStyle",r[r.cursorSurroundingLines=25]="cursorSurroundingLines",r[r.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",r[r.cursorWidth=27]="cursorWidth",r[r.disableLayerHinting=28]="disableLayerHinting",r[r.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",r[r.domReadOnly=30]="domReadOnly",r[r.dragAndDrop=31]="dragAndDrop",r[r.dropIntoEditor=32]="dropIntoEditor",r[r.emptySelectionClipboard=33]="emptySelectionClipboard",r[r.experimental=34]="experimental",r[r.extraEditorClassName=35]="extraEditorClassName",r[r.fastScrollSensitivity=36]="fastScrollSensitivity",r[r.find=37]="find",r[r.fixedOverflowWidgets=38]="fixedOverflowWidgets",r[r.folding=39]="folding",r[r.foldingStrategy=40]="foldingStrategy",r[r.foldingHighlight=41]="foldingHighlight",r[r.foldingImportsByDefault=42]="foldingImportsByDefault",r[r.foldingMaximumRegions=43]="foldingMaximumRegions",r[r.unfoldOnClickAfterEndOfLine=44]="unfoldOnClickAfterEndOfLine",r[r.fontFamily=45]="fontFamily",r[r.fontInfo=46]="fontInfo",r[r.fontLigatures=47]="fontLigatures",r[r.fontSize=48]="fontSize",r[r.fontWeight=49]="fontWeight",r[r.formatOnPaste=50]="formatOnPaste",r[r.formatOnType=51]="formatOnType",r[r.glyphMargin=52]="glyphMargin",r[r.gotoLocation=53]="gotoLocation",r[r.hideCursorInOverviewRuler=54]="hideCursorInOverviewRuler",r[r.hover=55]="hover",r[r.inDiffEditor=56]="inDiffEditor",r[r.inlineSuggest=57]="inlineSuggest",r[r.letterSpacing=58]="letterSpacing",r[r.lightbulb=59]="lightbulb",r[r.lineDecorationsWidth=60]="lineDecorationsWidth",r[r.lineHeight=61]="lineHeight",r[r.lineNumbers=62]="lineNumbers",r[r.lineNumbersMinChars=63]="lineNumbersMinChars",r[r.linkedEditing=64]="linkedEditing",r[r.links=65]="links",r[r.matchBrackets=66]="matchBrackets",r[r.minimap=67]="minimap",r[r.mouseStyle=68]="mouseStyle",r[r.mouseWheelScrollSensitivity=69]="mouseWheelScrollSensitivity",r[r.mouseWheelZoom=70]="mouseWheelZoom",r[r.multiCursorMergeOverlapping=71]="multiCursorMergeOverlapping",r[r.multiCursorModifier=72]="multiCursorModifier",r[r.multiCursorPaste=73]="multiCursorPaste",r[r.occurrencesHighlight=74]="occurrencesHighlight",r[r.overviewRulerBorder=75]="overviewRulerBorder",r[r.overviewRulerLanes=76]="overviewRulerLanes",r[r.padding=77]="padding",r[r.parameterHints=78]="parameterHints",r[r.peekWidgetDefaultFocus=79]="peekWidgetDefaultFocus",r[r.definitionLinkOpensInPeek=80]="definitionLinkOpensInPeek",r[r.quickSuggestions=81]="quickSuggestions",r[r.quickSuggestionsDelay=82]="quickSuggestionsDelay",r[r.readOnly=83]="readOnly",r[r.renameOnType=84]="renameOnType",r[r.renderControlCharacters=85]="renderControlCharacters",r[r.renderFinalNewline=86]="renderFinalNewline",r[r.renderLineHighlight=87]="renderLineHighlight",r[r.renderLineHighlightOnlyWhenFocus=88]="renderLineHighlightOnlyWhenFocus",r[r.renderValidationDecorations=89]="renderValidationDecorations",r[r.renderWhitespace=90]="renderWhitespace",r[r.revealHorizontalRightPadding=91]="revealHorizontalRightPadding",r[r.roundedSelection=92]="roundedSelection",r[r.rulers=93]="rulers",r[r.scrollbar=94]="scrollbar",r[r.scrollBeyondLastColumn=95]="scrollBeyondLastColumn",r[r.scrollBeyondLastLine=96]="scrollBeyondLastLine",r[r.scrollPredominantAxis=97]="scrollPredominantAxis",r[r.selectionClipboard=98]="selectionClipboard",r[r.selectionHighlight=99]="selectionHighlight",r[r.selectOnLineNumbers=100]="selectOnLineNumbers",r[r.showFoldingControls=101]="showFoldingControls",r[r.showUnused=102]="showUnused",r[r.snippetSuggestions=103]="snippetSuggestions",r[r.smartSelect=104]="smartSelect",r[r.smoothScrolling=105]="smoothScrolling",r[r.stickyTabStops=106]="stickyTabStops",r[r.stopRenderingLineAfter=107]="stopRenderingLineAfter",r[r.suggest=108]="suggest",r[r.suggestFontSize=109]="suggestFontSize",r[r.suggestLineHeight=110]="suggestLineHeight",r[r.suggestOnTriggerCharacters=111]="suggestOnTriggerCharacters",r[r.suggestSelection=112]="suggestSelection",r[r.tabCompletion=113]="tabCompletion",r[r.tabIndex=114]="tabIndex",r[r.unicodeHighlighting=115]="unicodeHighlighting",r[r.unusualLineTerminators=116]="unusualLineTerminators",r[r.useShadowDOM=117]="useShadowDOM",r[r.useTabStops=118]="useTabStops",r[r.wordSeparators=119]="wordSeparators",r[r.wordWrap=120]="wordWrap",r[r.wordWrapBreakAfterCharacters=121]="wordWrapBreakAfterCharacters",r[r.wordWrapBreakBeforeCharacters=122]="wordWrapBreakBeforeCharacters",r[r.wordWrapColumn=123]="wordWrapColumn",r[r.wordWrapOverride1=124]="wordWrapOverride1",r[r.wordWrapOverride2=125]="wordWrapOverride2",r[r.wrappingIndent=126]="wrappingIndent",r[r.wrappingStrategy=127]="wrappingStrategy",r[r.showDeprecated=128]="showDeprecated",r[r.inlayHints=129]="inlayHints",r[r.editorClassName=130]="editorClassName",r[r.pixelRatio=131]="pixelRatio",r[r.tabFocusMode=132]="tabFocusMode",r[r.layoutInfo=133]="layoutInfo",r[r.wrappingInfo=134]="wrappingInfo"})(Tk||(Tk={}));var Dk;(function(r){r[r.TextDefined=0]="TextDefined",r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(Dk||(Dk={}));var Ek;(function(r){r[r.LF=0]="LF",r[r.CRLF=1]="CRLF"})(Ek||(Ek={}));var Ak;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(Ak||(Ak={}));var Ik;(function(r){r[r.Both=0]="Both",r[r.Right=1]="Right",r[r.Left=2]="Left",r[r.None=3]="None"})(Ik||(Ik={}));var Nk;(function(r){r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(Nk||(Nk={}));var Mk;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(Mk||(Mk={}));var Rk;(function(r){r[r.DependsOnKbLayout=-1]="DependsOnKbLayout",r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.Digit0=21]="Digit0",r[r.Digit1=22]="Digit1",r[r.Digit2=23]="Digit2",r[r.Digit3=24]="Digit3",r[r.Digit4=25]="Digit4",r[r.Digit5=26]="Digit5",r[r.Digit6=27]="Digit6",r[r.Digit7=28]="Digit7",r[r.Digit8=29]="Digit8",r[r.Digit9=30]="Digit9",r[r.KeyA=31]="KeyA",r[r.KeyB=32]="KeyB",r[r.KeyC=33]="KeyC",r[r.KeyD=34]="KeyD",r[r.KeyE=35]="KeyE",r[r.KeyF=36]="KeyF",r[r.KeyG=37]="KeyG",r[r.KeyH=38]="KeyH",r[r.KeyI=39]="KeyI",r[r.KeyJ=40]="KeyJ",r[r.KeyK=41]="KeyK",r[r.KeyL=42]="KeyL",r[r.KeyM=43]="KeyM",r[r.KeyN=44]="KeyN",r[r.KeyO=45]="KeyO",r[r.KeyP=46]="KeyP",r[r.KeyQ=47]="KeyQ",r[r.KeyR=48]="KeyR",r[r.KeyS=49]="KeyS",r[r.KeyT=50]="KeyT",r[r.KeyU=51]="KeyU",r[r.KeyV=52]="KeyV",r[r.KeyW=53]="KeyW",r[r.KeyX=54]="KeyX",r[r.KeyY=55]="KeyY",r[r.KeyZ=56]="KeyZ",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.Semicolon=80]="Semicolon",r[r.Equal=81]="Equal",r[r.Comma=82]="Comma",r[r.Minus=83]="Minus",r[r.Period=84]="Period",r[r.Slash=85]="Slash",r[r.Backquote=86]="Backquote",r[r.BracketLeft=87]="BracketLeft",r[r.Backslash=88]="Backslash",r[r.BracketRight=89]="BracketRight",r[r.Quote=90]="Quote",r[r.OEM_8=91]="OEM_8",r[r.IntlBackslash=92]="IntlBackslash",r[r.Numpad0=93]="Numpad0",r[r.Numpad1=94]="Numpad1",r[r.Numpad2=95]="Numpad2",r[r.Numpad3=96]="Numpad3",r[r.Numpad4=97]="Numpad4",r[r.Numpad5=98]="Numpad5",r[r.Numpad6=99]="Numpad6",r[r.Numpad7=100]="Numpad7",r[r.Numpad8=101]="Numpad8",r[r.Numpad9=102]="Numpad9",r[r.NumpadMultiply=103]="NumpadMultiply",r[r.NumpadAdd=104]="NumpadAdd",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NumpadSubtract=106]="NumpadSubtract",r[r.NumpadDecimal=107]="NumpadDecimal",r[r.NumpadDivide=108]="NumpadDivide",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.AudioVolumeMute=112]="AudioVolumeMute",r[r.AudioVolumeUp=113]="AudioVolumeUp",r[r.AudioVolumeDown=114]="AudioVolumeDown",r[r.BrowserSearch=115]="BrowserSearch",r[r.BrowserHome=116]="BrowserHome",r[r.BrowserBack=117]="BrowserBack",r[r.BrowserForward=118]="BrowserForward",r[r.MediaTrackNext=119]="MediaTrackNext",r[r.MediaTrackPrevious=120]="MediaTrackPrevious",r[r.MediaStop=121]="MediaStop",r[r.MediaPlayPause=122]="MediaPlayPause",r[r.LaunchMediaPlayer=123]="LaunchMediaPlayer",r[r.LaunchMail=124]="LaunchMail",r[r.LaunchApp2=125]="LaunchApp2",r[r.Clear=126]="Clear",r[r.MAX_VALUE=127]="MAX_VALUE"})(Rk||(Rk={}));var Ok;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(Ok||(Ok={}));var Pk;(function(r){r[r.Unnecessary=1]="Unnecessary",r[r.Deprecated=2]="Deprecated"})(Pk||(Pk={}));var Fk;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(Fk||(Fk={}));var Bk;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.TEXTAREA=1]="TEXTAREA",r[r.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",r[r.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",r[r.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",r[r.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",r[r.CONTENT_TEXT=6]="CONTENT_TEXT",r[r.CONTENT_EMPTY=7]="CONTENT_EMPTY",r[r.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",r[r.CONTENT_WIDGET=9]="CONTENT_WIDGET",r[r.OVERVIEW_RULER=10]="OVERVIEW_RULER",r[r.SCROLLBAR=11]="SCROLLBAR",r[r.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",r[r.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(Bk||(Bk={}));var Wk;(function(r){r[r.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",r[r.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",r[r.TOP_CENTER=2]="TOP_CENTER"})(Wk||(Wk={}));var Vk;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(Vk||(Vk={}));var Hk;(function(r){r[r.Left=0]="Left",r[r.Right=1]="Right",r[r.None=2]="None",r[r.LeftOfInjectedText=3]="LeftOfInjectedText",r[r.RightOfInjectedText=4]="RightOfInjectedText"})(Hk||(Hk={}));var Uk;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Relative=2]="Relative",r[r.Interval=3]="Interval",r[r.Custom=4]="Custom"})(Uk||(Uk={}));var jk;(function(r){r[r.None=0]="None",r[r.Text=1]="Text",r[r.Blocks=2]="Blocks"})(jk||(jk={}));var $k;(function(r){r[r.Smooth=0]="Smooth",r[r.Immediate=1]="Immediate"})($k||($k={}));var zk;(function(r){r[r.Auto=1]="Auto",r[r.Hidden=2]="Hidden",r[r.Visible=3]="Visible"})(zk||(zk={}));var Kk;(function(r){r[r.LTR=0]="LTR",r[r.RTL=1]="RTL"})(Kk||(Kk={}));var Gk;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(Gk||(Gk={}));var qk;(function(r){r[r.File=0]="File",r[r.Module=1]="Module",r[r.Namespace=2]="Namespace",r[r.Package=3]="Package",r[r.Class=4]="Class",r[r.Method=5]="Method",r[r.Property=6]="Property",r[r.Field=7]="Field",r[r.Constructor=8]="Constructor",r[r.Enum=9]="Enum",r[r.Interface=10]="Interface",r[r.Function=11]="Function",r[r.Variable=12]="Variable",r[r.Constant=13]="Constant",r[r.String=14]="String",r[r.Number=15]="Number",r[r.Boolean=16]="Boolean",r[r.Array=17]="Array",r[r.Object=18]="Object",r[r.Key=19]="Key",r[r.Null=20]="Null",r[r.EnumMember=21]="EnumMember",r[r.Struct=22]="Struct",r[r.Event=23]="Event",r[r.Operator=24]="Operator",r[r.TypeParameter=25]="TypeParameter"})(qk||(qk={}));var Zk;(function(r){r[r.Deprecated=1]="Deprecated"})(Zk||(Zk={}));var Yk;(function(r){r[r.Hidden=0]="Hidden",r[r.Blink=1]="Blink",r[r.Smooth=2]="Smooth",r[r.Phase=3]="Phase",r[r.Expand=4]="Expand",r[r.Solid=5]="Solid"})(Yk||(Yk={}));var Xk;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(Xk||(Xk={}));var Qk;(function(r){r[r.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",r[r.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",r[r.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",r[r.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(Qk||(Qk={}));var Jk;(function(r){r[r.None=0]="None",r[r.Same=1]="Same",r[r.Indent=2]="Indent",r[r.DeepIndent=3]="DeepIndent"})(Jk||(Jk={}));let X_=class{static chord(e,t){return Bn(e,t)}};X_.CtrlCmd=2048;X_.Shift=1024;X_.Alt=512;X_.WinCtrl=256;function f4(){return{editor:void 0,languages:void 0,CancellationTokenSource:fi,Emitter:R,KeyCode:Rk,KeyMod:X_,Position:B,Range:x,Selection:ue,SelectionDirection:Kk,MarkerSeverity:Ok,MarkerTag:Pk,Uri:Se,Token:Tm}}class dH{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}class bM{constructor(e){this.fn=e,this._map=new Map}get cachedValues(){return this._map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}class Rf{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var g4;function p4(r){return!r||typeof r!="string"?!0:r.trim().length===0}const uH=/{(\d+)}/g;function hr(r,...e){return e.length===0?r:r.replace(uH,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function HE(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Zs(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function hH(r,e=" "){const t=By(r,e);return m4(t,e)}function By(r,e){if(!r||!e)return r;const t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function m4(r,e){if(!r||!e)return r;const t=e.length,n=r.length;if(t===0||n===0)return r;let i=n,s=-1;for(;s=r.lastIndexOf(e,i-1),!(s===-1||s+t!==i);){if(s===0)return"";i=s}return r.substring(0,i)}function fH(r){return r.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function gH(r){return r.replace(/\*/g,"")}function _4(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=Zs(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function pH(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function Gw(r){return(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")}function va(r){return r.split(/\r\n|\r|\n/)}function Zi(r){for(let e=0,t=r.length;e<t;e++){const n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Dt(r,e=0,t=r.length){for(let n=e;n<t;n++){const i=r.charCodeAt(n);if(i!==32&&i!==9)return r.substring(e,n)}return r.substring(e,t)}function ga(r,e=r.length-1){for(let t=e;t>=0;t--){const n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Am(r,e){return r<e?-1:r>e?1:0}function UE(r,e,t=0,n=r.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){const l=r.charCodeAt(t),c=e.charCodeAt(i);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=s-i;return o<a?-1:o>a?1:0}function eL(r,e){return Q_(r,e,0,r.length,0,e.length)}function Q_(r,e,t=0,n=r.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=r.charCodeAt(t),c=e.charCodeAt(i);if(l===c)continue;if(l>=128||c>=128)return UE(r.toLowerCase(),e.toLowerCase(),t,n,i,s);cc(l)&&(l-=32),cc(c)&&(c-=32);const d=l-c;if(d!==0)return d}const o=n-t,a=s-i;return o<a?-1:o>a?1:0}function zb(r){return r>=48&&r<=57}function cc(r){return r>=97&&r<=122}function Yo(r){return r>=65&&r<=90}function Vh(r,e){return r.length===e.length&&Q_(r,e)===0}function jE(r,e){const t=e.length;return e.length>r.length?!1:Q_(r,e,0,t)===0}function lu(r,e){const t=Math.min(r.length,e.length);let n;for(n=0;n<t;n++)if(r.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function Im(r,e){const t=Math.min(r.length,e.length);let n;const i=r.length-1,s=e.length-1;for(n=0;n<t;n++)if(r.charCodeAt(i-n)!==e.charCodeAt(s-n))return n;return t}function Vn(r){return 55296<=r&&r<=56319}function cu(r){return 56320<=r&&r<=57343}function $E(r,e){return(r-55296<<10)+(e-56320)+65536}function X0(r,e,t){const n=r.charCodeAt(t);if(Vn(n)&&t+1<e){const i=r.charCodeAt(t+1);if(cu(i))return $E(n,i)}return n}function mH(r,e){const t=r.charCodeAt(e-1);if(cu(t)&&e>1){const n=r.charCodeAt(e-2);if(Vn(n))return $E(n,t)}return t}class zE{constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){const e=mH(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=X0(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class Q0{constructor(e,t=0){this._iterator=new zE(e,t)}get offset(){return this._iterator.offset}nextGraphemeLength(){const e=dc.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(vM(i,o)){t.setOffset(s);break}i=o}return t.offset-n}prevGraphemeLength(){const e=dc.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(vM(o,i)){t.setOffset(s);break}i=o}return n-t.offset}eol(){return this._iterator.eol()}}function KE(r,e){return new Q0(r,e).nextGraphemeLength()}function b4(r,e){return new Q0(r,e).prevGraphemeLength()}function _H(r,e){e>0&&cu(r.charCodeAt(e))&&e--;const t=e+KE(r,e);return[t-b4(r,t),t]}const bH=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function Of(r){return bH.test(r)}const vH=/^[\t\n\r\x20-\x7E]*$/;function Wy(r){return vH.test(r)}const v4=/[\u2028\u2029]/;function C4(r){return v4.test(r)}function Nc(r){return r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function GE(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129008||r>=129280&&r<=129535||r>=129648&&r<=129782}const CH=String.fromCharCode(65279);function qE(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function yH(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function y4(r){return r=r%(2*26),r<26?String.fromCharCode(97+r):String.fromCharCode(65+r-26)}function vM(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}class dc{constructor(){this._data=wH()}static getInstance(){return dc._INSTANCE||(dc._INSTANCE=new dc),dc._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}dc._INSTANCE=null;function wH(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function SH(r,e){if(r===0)return 0;const t=xH(r,e);if(t!==void 0)return t;const n=new zE(e,r);return n.prevCodePoint(),n.offset}function xH(r,e){const t=new zE(e,r);let n=t.prevCodePoint();for(;kH(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!GE(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}function kH(r){return 127995<=r&&r<=127999}const LH=" ";class qr{constructor(e){this.confusableDictionary=e}static getInstance(e){return qr.cache.get(Array.from(e))}static getLocales(){return qr._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}g4=qr;qr.ambiguousCharacterData=new Rf(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));qr.cache=new dH(r=>{function e(c){const d=new Map;for(let u=0;u<c.length;u+=2)d.set(c[u],c[u+1]);return d}function t(c,d){const u=new Map(c);for(const[h,f]of d)u.set(h,f);return u}function n(c,d){if(!c)return d;const u=new Map;for(const[h,f]of c)d.has(h)&&u.set(h,f);return u}const i=g4.ambiguousCharacterData.getValue();let s=r.filter(c=>!c.startsWith("_")&&c in i);s.length===0&&(s=["_default"]);let o;for(const c of s){const d=e(i[c]);o=n(o,d)}const a=e(i._common),l=t(a,o);return new qr(l)});qr._locales=new Rf(()=>Object.keys(qr.ambiguousCharacterData.getValue()).filter(r=>!r.startsWith("_")));class pa{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(pa.getRawData())),this._data}static isInvisibleCharacter(e){return pa.getData().has(e)}static get codePoints(){return pa.getData()}}pa._data=void 0;class tL{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}tL.INSTANCE=new tL;class TH extends j{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class DH extends j{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new TH);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}class EH{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new DH),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function ZE(r,e){typeof r=="string"&&(r=window.matchMedia(r)),r.addEventListener("change",e)}const Pf=new EH;function w4(){return tL.INSTANCE.getZoomFactor()}const kg=navigator.userAgent,Ys=kg.indexOf("Firefox")>=0,vc=kg.indexOf("AppleWebKit")>=0,YE=kg.indexOf("Chrome")>=0,Il=!YE&&kg.indexOf("Safari")>=0,XE=!YE&&!Il&&vc,AH=kg.indexOf("Electron/")>=0,S4=kg.indexOf("Android")>=0;let nL=!1;if(window.matchMedia){const r=window.matchMedia("(display-mode: standalone)");nL=r.matches,ZE(r,({matches:e})=>{nL=e})}function QE(){return nL}const IH=Object.freeze(Object.defineProperty({__proto__:null,PixelRatio:Pf,addMatchMediaChangeListener:ZE,getZoomFactor:w4,isAndroid:S4,isChrome:YE,isElectron:AH,isFirefox:Ys,isSafari:Il,isStandalone:QE,isWebKit:vc,isWebkitWebView:XE},Symbol.toStringTag,{value:"Module"}));class x4{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Wo(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Wo(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Wo(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Wo(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Wo(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Wo(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Wo(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Wo(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Wo(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Wo(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Wo(r){return typeof r=="number"?`${r}px`:r}function at(r){return new x4(r)}function xi(r,e){r instanceof x4?(r.setFontFamily(e.getMassagedFontFamily()),r.setFontWeight(e.fontWeight),r.setFontSize(e.fontSize),r.setFontFeatureSettings(e.fontFeatureSettings),r.setLineHeight(e.lineHeight),r.setLetterSpacing(e.letterSpacing)):(r.style.fontFamily=e.getMassagedFontFamily(),r.style.fontWeight=e.fontWeight,r.style.fontSize=e.fontSize+"px",r.style.fontFeatureSettings=e.fontFeatureSettings,r.style.lineHeight=e.lineHeight+"px",r.style.letterSpacing=e.letterSpacing+"px")}class NH{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class JE{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");xi(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");xi(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");xi(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const s=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=n),o.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");JE._render(l,o),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}function MH(r,e){new JE(r,e).read()}const Nl=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new R,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},RH=Je?1.5:1.35,qw=8;class Gd{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n){const i=e.get(45),s=e.get(49),o=e.get(48),a=e.get(47),l=e.get(61),c=e.get(58);return Gd._create(i,s,o,a,l,c,t,n)}static _create(e,t,n,i,s,o,a,l){s===0?s=RH*n:s<qw&&(s=s*n),s=Math.round(s),s<qw&&(s=qw);const c=1+(l?0:Nl.getZoomLevel()*.1);return n*=c,s*=c,new Gd({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,lineHeight:s,letterSpacing:o})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Ts.fontFamily,t=Gd._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const OH=1;class iL extends Gd{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=OH,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class PH extends j{constructor(){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._cache=new CM,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new CM,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new iL({pixelRatio:Pf.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,i){const s=new NH(e,t);return n.push(s),i?.push(s),s}_actualReadFontInfo(e){const t=[],n=[],i=this._createRequest("n",0,t,n),s=this._createRequest("ｍ",0,t,null),o=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),c=this._createRequest("2",0,t,n),d=this._createRequest("3",0,t,n),u=this._createRequest("4",0,t,n),h=this._createRequest("5",0,t,n),f=this._createRequest("6",0,t,n),g=this._createRequest("7",0,t,n),_=this._createRequest("8",0,t,n),b=this._createRequest("9",0,t,n),v=this._createRequest("→",0,t,n),C=this._createRequest("￫",0,t,null),y=this._createRequest("·",0,t,n),w=this._createRequest(String.fromCharCode(11825),0,t,null),L="|/-_ilm%";for(let O=0,F=L.length;O<F;O++)this._createRequest(L.charAt(O),0,t,n),this._createRequest(L.charAt(O),1,t,n),this._createRequest(L.charAt(O),2,t,n);MH(e,t);const T=Math.max(a.width,l.width,c.width,d.width,u.width,h.width,f.width,g.width,_.width,b.width);let S=e.fontFeatureSettings===js.OFF;const k=n[0].width;for(let O=1,F=n.length;S&&O<F;O++){const U=k-n[O].width;if(U<-.001||U>.001){S=!1;break}}let D=!0;return S&&C.width!==k&&(D=!1),C.width>v.width&&(D=!1),new iL({pixelRatio:Pf.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:o.width,middotWidth:y.width,wsmiddotWidth:w.width,maxDigitWidth:T},!0)}}class CM{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const sL=new PH;var ho;(function(r){r.serviceIds=new Map,r.DI_TARGET="$di$target",r.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[r.DI_DEPENDENCIES]||[]}r.getServiceDependencies=e})(ho||(ho={}));const Ve=tt("instantiationService");function FH(r,e,t){e[ho.DI_TARGET]===e?e[ho.DI_DEPENDENCIES].push({id:r,index:t}):(e[ho.DI_DEPENDENCIES]=[{id:r,index:t}],e[ho.DI_TARGET]=e)}function tt(r){if(ho.serviceIds.has(r))return ho.serviceIds.get(r);const e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");FH(e,t,i)};return e.toString=()=>r,ho.serviceIds.set(r,e),e}const bt=tt("codeEditorService");function Zp(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}const BH={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class WH extends j{constructor(e,t={}){super(),this._onDidUpdate=this._register(new R),this._editor=e,this._options=Ta(t,BH,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new x(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new x(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new x(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>x.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,s=this.ranges.length;i<s&&!t;i++){const o=this.ranges[i].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Zp(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const J_={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var yr;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(yr||(yr={}));var _r;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(_r||(_r={}));var fo;(function(r){r[r.Both=0]="Both",r[r.Right=1]="Right",r[r.Left=2]="Left",r[r.None=3]="None"})(fo||(fo={}));class d0{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&mr(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Nm{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function VH(r){return r&&typeof r.read=="function"}class Zw{constructor(e,t,n,i,s,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class HH{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class UH{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function jH(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}var yn;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(yn||(yn={}));class Yw{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class $H{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Qg(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Qg(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Qg(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Qg(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Qg(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Qg(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}function Vy(r,e){const t=r.getCount(),n=r.findTokenIndexAtOffset(e),i=r.getLanguageId(n);let s=n;for(;s+1<t&&r.getLanguageId(s+1)===i;)s++;let o=n;for(;o>0&&r.getLanguageId(o-1)===i;)o--;return new zH(r,i,o,s+1,r.getStartOffset(o),r.getEndOffset(s))}class zH{constructor(e,t,n,i,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function $o(r){return(r&3)!==0}class Hy{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Yw(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Yw({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Yw({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Hy.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}}Hy.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;const yM=typeof Buffer<"u";let Xw;class Uy{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return yM&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new Uy(e)}toString(){return yM?this.buffer.toString():(Xw||(Xw=new TextDecoder),Xw.decode(this.buffer))}}function KH(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function GH(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function to(r,e){return r[e]*Math.pow(2,24)+r[e+1]*Math.pow(2,16)+r[e+2]*Math.pow(2,8)+r[e+3]}function no(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function wM(r,e){return r[e]}function SM(r,e,t){r[t]=e}let Qw;function k4(){return Qw||(Qw=new TextDecoder("UTF-16LE")),Qw}let Jw;function qH(){return Jw||(Jw=new TextDecoder("UTF-16BE")),Jw}let eS;function L4(){return eS||(eS=BF()?k4():qH()),eS}const T4=typeof TextDecoder<"u";let Mc,rL;T4?(Mc=r=>new YH(r),rL=ZH):(Mc=r=>new XH,rL=D4);function ZH(r,e,t){const n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?D4(r,e,t):k4().decode(n)}function D4(r,e,t){const n=[];let i=0;for(let s=0;s<t;s++){const o=KH(r,e);e+=2,n[i++]=String.fromCharCode(o)}return n.join("")}class YH{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return L4().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Vn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class XH{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class J0{constructor(e,t,n,i,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=o,this._openSet=J0._toSet(this.open),this._closeSet=J0._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function QH(r){const e=r.length;r=r.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[d,u]=a;return l===d||l===u||c===d||c===u},i=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let o=0;o<e;o++){const a=r[o];for(let l=o+1;l<e;l++){const c=r[l];n(a,c)&&i(t[o],t[l])}}const s=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[d,u]=r[c];a.push(d),l.push(u)}a.length>0&&s.push({open:a,close:l})}return s}class JH{constructor(e,t){this._richEditBracketsBrand=void 0;const n=QH(t);this.brackets=n.map((i,s)=>new J0(e,s,i.open,i.close,eU(i.open,i.close,n,s),tU(i.open,i.close,n,s))),this.forwardRegex=nU(this.brackets),this.reversedRegex=iU(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const s of i.open)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of i.close)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function E4(r,e,t,n){for(let i=0,s=e.length;i<s;i++){if(i===t)continue;const o=e[i];for(const a of o.open)a.indexOf(r)>=0&&n.push(a);for(const a of o.close)a.indexOf(r)>=0&&n.push(a)}}function A4(r,e){return r.length-e.length}function jy(r){if(r.length<=1)return r;const e=[],t=new Set;for(const n of r)t.has(n)||(e.push(n),t.add(n));return e}function eU(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let s=0,o=i.length;s<o;s++)E4(i[s],t,n,i);return i=jy(i),i.sort(A4),i.reverse(),$y(i)}function tU(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let s=0,o=i.length;s<o;s++)E4(i[s],t,n,i);return i=jy(i),i.sort(A4),i.reverse(),$y(i.map(eA))}function nU(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=jy(e),$y(e)}function iU(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=jy(e),$y(e.map(eA))}function sU(r){const e=/^[\w ]+$/.test(r);return r=Zs(r),e?`\\b${r}\\b`:r}function $y(r){const e=`(${r.map(sU).join(")|(")})`;return _4(e,!0)}const eA=function(){function r(n){if(T4){const i=new Uint16Array(n.length);let s=0;for(let o=n.length-1;o>=0;o--)i[s++]=n.charCodeAt(o);return L4().decode(i)}else{const i=[];let s=0;for(let o=n.length-1;o>=0;o--)i[s++]=n.charAt(o);return i.join("")}}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}();class Or{static _findPrevBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const o=n.length-(s.index||0),a=s[0].length,l=i+o;return new x(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,s){const a=eA(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const o=s.index||0,a=s[0].length;if(a===0)return null;const l=i+o;return new x(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,s){const o=n.substring(i,s);return this.findNextBracketInText(e,t,o,i)}}class rU{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return El(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if($o(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=Or.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function Kb(r){return r.global&&(r.lastIndex=0),!0}class oU{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Kb(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Kb(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Kb(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Kb(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Hh{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Hh._createOpenBracketRegExp(t[0]),i=Hh._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,o=this._brackets.length;s<o;s++){const a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:yn.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:yn.Indent}}return null}static _createOpenBracketRegExp(e){let t=Zs(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Hh._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Zs(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Hh._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return We(t),null}}}const ft=tt("configurationService");function I4(r,e){const t=Object.create(null);for(const n in r)tA(t,n,r[n],e);return t}function tA(r,e,t,n){const i=e.split("."),s=i.pop();let o=r;for(let a=0;a<i.length;a++){const l=i[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(o)}`)}function aU(r,e){const t=e.split(".");N4(r,t)}function N4(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const n=r[t];typeof n=="object"&&!Array.isArray(n)&&(N4(n,e),Object.keys(n).length===0&&delete r[t])}}function xM(r,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const i=e.split("."),s=n(r,i);return typeof s>"u"?t:s}function lU(r){return r.replace(/[\[\]]/g,"")}const Qt=tt("languageService");class Xo{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const M4=[];function lt(r,e,t){e instanceof Xo||(e=new Xo(e,[],t)),M4.push([r,e])}function kM(){return M4}class cU{constructor(){this.data=new Map}add(e,t){Zp(hs(e)),Zp(cs(t)),Zp(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Jt=new cU,ls=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),zy={JSONContribution:"base.contributions.json"};function dU(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}class uU{constructor(){this._onDidChangeSchema=new R,this.schemasById={}}registerSchema(e,t){this.schemasById[dU(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const hU=new uU;Jt.add(zy.JSONContribution,hU);const Bl={Configuration:"base.contributions.configuration"},Jg="vscode://schemas/settings/resourceLanguage",LM=Jt.as(zy.JSONContribution);class fU{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new R,this._onDidUpdateConfiguration=new R,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:p("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},LM.registerSchema(Jg,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);LM.registerSchema(Jg,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],i=[];for(const{overrides:s,source:o}of e)for(const a in s)if(n.push(a),Mm.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(t=l?.valuesSources)!==null&&t!==void 0?t:new Map;if(o)for(const f of Object.keys(s[a]))c.set(f,o);const d=Object.assign(Object.assign({},l?.value||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:o,value:d,valuesSources:c});const u=lU(a),h={type:"object",default:d,description:p("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",u),$ref:Jg,defaultDefaultValue:d,source:hs(o)?void 0:o,defaultValueSource:o};i.push(...O4(a)),this.configurationProperties[a]=h,this.defaultLanguageConfigurationOverridesNode.properties[a]=h}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:o});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.registerOverrideIdentifiers(i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(i=>{n.push(...this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),n}validateAndRegisterProperties(e,t=!0,n,i,s=3){var o;s=Us(e.scope)?s:e.scope;const a=[],l=e.properties;if(l)for(const d in l){const u=l[d];if(t&&mU(d,u)){delete l[d];continue}if(u.source=n,u.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,u),Mm.test(d)?u.scope=void 0:(u.scope=Us(u.scope)?s:u.scope,u.restricted=Us(u.restricted)?!!i?.includes(d):u.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((o=l[d].policy)===null||o===void 0)&&o.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),a.push(d)}const c=e.allOf;if(c)for(const d of c)a.push(...this.validateAndRegisterProperties(d,t,n,i,s));return a}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=n=>{const i=n.properties;if(i)for(const o in i)this.updateSchema(o,i[o]);const s=n.allOf;s?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:p("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Jg};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),p("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n?.value,s=n?.source;xs(i)&&(i=t.defaultDefaultValue,s=void 0),xs(i)&&(i=pU(t.type)),t.default=i,t.defaultValueSource=s}}const R4="\\[([^\\]]+)\\]",TM=new RegExp(R4,"g"),gU=`^(${R4})+$`,Mm=new RegExp(gU);function O4(r){const e=[];if(Mm.test(r)){let t=TM.exec(r);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=TM.exec(r)}}return El(e)}function pU(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const u0=new fU;Jt.add(Bl.Configuration,u0);function mU(r,e){var t,n,i,s;return r.trim()?Mm.test(r)?p("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):u0.getConfigurationProperties()[r]!==void 0?p("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):!((t=e.policy)===null||t===void 0)&&t.name&&u0.getPolicyConfigurations().get((n=e.policy)===null||n===void 0?void 0:n.name)!==void 0?p("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",r,(i=e.policy)===null||i===void 0?void 0:i.name,u0.getPolicyConfigurations().get((s=e.policy)===null||s===void 0?void 0:s.name)):null:p("config.property.empty","Cannot register an empty property")}const _U={ModesRegistry:"editor.modesRegistry"};class bU{constructor(){this._onDidChangeLanguages=new R,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const Ff=new bU;Jt.add(_U.ModesRegistry,Ff);const br="plaintext",vU=".txt";Ff.registerLanguage({id:br,extensions:[vU],aliases:[p("plainText.alias","Plain Text"),"text"],mimetypes:[ls.text]});Jt.as(Bl.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class CU{constructor(e,t){this.languageId=e;let n;t.colorizedBracketPairs?n=DM(t.colorizedBracketPairs.map(o=>[o[0],o[1]])):t.brackets?n=DM(t.brackets.map(o=>[o[0],o[1]]).filter(o=>!(o[0]==="<"&&o[1]===">"))):n=[];const i=new bM(o=>{const a=new Set;return{info:new yU(this,o,a),closing:a}}),s=new bM(o=>{const a=new Set;return{info:new wU(this,o,a),opening:a}});for(const[o,a]of n){const l=i.get(o),c=s.get(a);l.closing.add(c.info),c.opening.add(l.info)}this._openingBrackets=new Map([...i.cachedValues].map(([o,a])=>[o,a.info])),this._closingBrackets=new Map([...s.cachedValues].map(([o,a])=>[o,a.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function DM(r){return r.filter(([e,t])=>e!==""&&t!=="")}class P4{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class yU extends P4{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class wU extends P4{constructor(e,t,n){super(e,t),this.closedBrackets=n,this.isOpeningBracket=!1}closes(e){if(e.languageId===this.languageId&&e.config!==this.config)throw new RE("Brackets from different language configuration cannot be used.");return this.closedBrackets.has(e)}getClosedBrackets(){return[...this.closedBrackets]}}var SU=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},EM=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class tS{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const _n=tt("languageConfigurationService");let oL=class extends j{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new TU),this.onDidChangeEmitter=this._register(new R),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(aL));this._register(this.configurationService.onDidChangeConfiguration(i=>{const s=i.change.keys.some(a=>n.has(a)),o=i.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new tS(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new tS(a)))})),this._register(this._registry.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new tS(i.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=xU(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};oL=SU([EM(0,ft),EM(1,Qt)],oL);function xU(r,e,t,n){let i=e.getLanguageConfiguration(r);if(!i){if(!n.isRegisteredLanguageId(r))throw new Error(`Language id "${r}" is not configured nor known`);i=new Rm(r,{})}const s=kU(i.languageId,t),o=B4([i.underlyingConfig,s]);return new Rm(i.languageId,o)}const aL={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function kU(r,e){const t=e.getValue(aL.brackets,{overrideIdentifier:r}),n=e.getValue(aL.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:AM(t),colorizedBracketPairs:AM(n)}}function AM(r){if(Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function F4(r,e,t){const n=r.getLineContent(e);let i=Dt(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}function hf(r,e,t){r.tokenization.forceTokenization(e);const n=r.tokenization.getLineTokens(e),i=typeof t>"u"?r.getLineMaxColumn(e)-1:t-1;return Vy(n,i)}class LU{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new IM(e,t,++this._order);return this._entries.push(n),this._resolved=null,Ke(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Rm(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(IM.cmp),B4(this._entries.map(e=>e.configuration)))}}function B4(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class IM{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class NM{constructor(e){this.languageId=e}}class TU extends j{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._register(this.register(br,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new LU(e),this._entries.set(e,i));const s=i.register(t,n);return this._onDidChange.fire(new NM(e)),Ke(()=>{s.dispose(),this._onDidChange.fire(new NM(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}class Rm{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Hh(this.underlyingConfig):null,this.comments=Rm._handleComments(this.underlyingConfig),this.characterPair=new Hy(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||AE,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new oU(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new CU(e,this.underlyingConfig)}getWordDefinition(){return HF(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new JH(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new rU(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new $H(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[i,s]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=s}return n}}lt(_n,oL);const Bf=new class{clone(){return this}equals(r){return this===r}};function nA(r,e){return new VE([new Tm(0,"",r)],e)}function Ky(r,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(r<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new Fy(t,e===null?Bf:e)}const en=tt("modelService");var ir=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},Tp=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}};function lL(r){return!!r&&typeof r.then=="function"}function Xn(r){const e=new fi,t=r(e.token),n=new Promise((i,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),s(new ed)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),i(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(i,s){return n.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function iA(r,e,t){return new Promise((n,i)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(t)});r.then(n,i).finally(()=>s.dispose())})}class DU{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}const EU=(r,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},r);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},AU=r=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,r())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},W4=Symbol("MicrotaskDelay");class Ca{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}}));const n=()=>{var i;this.deferred=null,(i=this.doResolve)===null||i===void 0||i.call(this,null)};return this.deferred=t===W4?AU(n):EU(t,n),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new ed),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class IU{constructor(e){this.delayer=new Ca(e),this.throttler=new DU}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function Rc(r,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{s.dispose(),t()},r),s=e.onCancellationRequested(()=>{clearTimeout(i),s.dispose(),n(new ed)})}):Xn(t=>Rc(r,t))}function du(r,e=0){const t=setTimeout(r,e);return Ke(()=>clearTimeout(t))}function V4(r,e=n=>!!n,t=null){let n=0;const i=r.length,s=()=>{if(n>=i)return Promise.resolve(t);const o=r[n++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class Js{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class eb{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class Tt{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let Om;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Om=r=>{FF(()=>{if(e)return;const t=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:Om=(r,e)=>{const t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class Cc{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Om(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class sA{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new ed),this.rejected=!0,e()})}}var cL;(function(r){function e(n){return ir(this,void 0,void 0,function*(){let i;const s=yield Promise.all(n.map(o=>o.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return s})}r.settled=e;function t(n){return new Promise((i,s)=>ir(this,void 0,void 0,function*(){try{yield n(i,s)}catch(o){s(o)}}))}r.withAsyncBody=t})(cL||(cL={}));class Cn{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new R,queueMicrotask(()=>ir(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Cn(t=>{t.emitMany(e)})}static fromPromise(e){return new Cn(t=>ir(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Cn(t=>ir(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>ir(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Cn(t=>ir(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,s;return ir(this,void 0,void 0,function*(){var o,a;try{for(i=Tp(n);s=yield i.next(),!s.done;){const l=s.value;t.emitOne(l)}}catch(l){o={error:l}}finally{try{s&&!s.done&&(a=i.return)&&(yield a.call(i))}finally{if(o)throw o.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>ir(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield ve.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Cn(n=>ir(this,void 0,void 0,function*(){var i,s;try{for(var o=Tp(e),a;a=yield o.next(),!a.done;){const l=a.value;n.emitOne(t(l))}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&(yield s.call(o))}finally{if(i)throw i.error}}}))}map(e){return Cn.map(this,e)}static filter(e,t){return new Cn(n=>ir(this,void 0,void 0,function*(){var i,s;try{for(var o=Tp(e),a;a=yield o.next(),!a.done;){const l=a.value;t(l)&&n.emitOne(l)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&(yield s.call(o))}finally{if(i)throw i.error}}}))}filter(e){return Cn.filter(this,e)}static coalesce(e){return Cn.filter(e,t=>!!t)}coalesce(){return Cn.coalesce(this)}static toPromise(e){var t,n,i,s;return ir(this,void 0,void 0,function*(){const o=[];try{for(t=Tp(e);n=yield t.next(),!n.done;){const a=n.value;o.push(a)}}catch(a){i={error:a}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}return o})}toPromise(){return Cn.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}Cn.EMPTY=Cn.fromArray([]);class NU extends Cn{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function MU(r){const e=new fi,t=r(e.token);return new NU(e,n=>ir(this,void 0,void 0,function*(){var i,s;const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),n.reject(new ed)});try{try{for(var a=Tp(t),l;l=yield a.next(),!l.done;){const c=l.value;if(e.token.isCancellationRequested)return;n.emitOne(c)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(s=a.return)&&(yield s.call(a))}finally{if(i)throw i.error}}o.dispose(),e.dispose()}catch(c){o.dispose(),e.dispose(),n.reject(c)}}))}const RU="$initialize";let MM=!1;function dL(r){Jc&&(MM||(MM=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(r.message))}class OU{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}class RM{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}class PU{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}class FU{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class BU{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class WU{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send(new OU(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new R({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new PU(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new BU(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new RM(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=fM(i.detail)),this._send(new RM(this._workerId,t,void 0,fM(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new FU(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class VU extends j{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{i?.(c)})),this._protocol=new WU({sendMessage:(c,d)=>{this._worker.postMessage(c,d)},handleMessage:(c,d)=>{if(typeof n[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(n[c].apply(n,d))}catch(u){return Promise.reject(u)}},handleEvent:(c,d)=>{if(U4(c)){const u=n[c].call(n,d);if(typeof u!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return u}if(H4(c)){const u=n[c];if(typeof u!="function")throw new Error(`Missing event ${c} on main thread host.`);return u}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;typeof mn.require<"u"&&typeof mn.require.getConfig=="function"?s=mn.require.getConfig():typeof mn.requirejs<"u"&&(s=mn.requirejs.s.contexts._.config);const o=ME(n);this._onModuleLoaded=this._protocol.sendMessage(RU,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,o]);const a=(c,d)=>this._request(c,d),l=(c,d)=>this._protocol.listen(c,d);this._lazyProxy=new Promise((c,d)=>{i=d,this._onModuleLoaded.then(u=>{c(HU(u,a,l))},u=>{d(u),this._onError("Worker failed to load "+t,u)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}function H4(r){return r[0]==="o"&&r[1]==="n"&&Yo(r.charCodeAt(2))}function U4(r){return/^onDynamic/.test(r)&&Yo(r.charCodeAt(9))}function HU(r,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},i=o=>function(a){return t(o,a)},s={};for(const o of r){if(U4(o)){s[o]=i(o);continue}if(H4(o)){s[o]=t(o,void 0);continue}s[o]=n(o)}return s}var nS;const OM=(nS=window.trustedTypes)===null||nS===void 0?void 0:nS.createPolicy("defaultWorkerFactory",{createScriptURL:r=>r});function UU(r){if(mn.MonacoEnvironment){if(typeof mn.MonacoEnvironment.getWorker=="function")return mn.MonacoEnvironment.getWorker("workerMain.js",r);if(typeof mn.MonacoEnvironment.getWorkerUrl=="function"){const e=mn.MonacoEnvironment.getWorkerUrl("workerMain.js",r);return new Worker(OM?OM.createScriptURL(e):e,{name:r})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function jU(r){return typeof r.then=="function"}class $U{constructor(e,t,n,i,s){this.id=t;const o=UU(n);jU(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)===null||n===void 0||n.then(i=>i.postMessage(e,t))}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}}class Gy{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){const i=++Gy.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new $U(e,i,this._label||"anonymous"+i,t,s=>{dL(s),this._webWorkerFailedBeforeError=s,n(s)})}}Gy.LAST_WORKER_ID=0;class Ql{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}function rA(r){return qy(r,0)}function qy(r,e){switch(typeof r){case"object":return r===null?hl(349,e):Array.isArray(r)?KU(r,e):GU(r,e);case"string":return oA(r,e);case"boolean":return zU(r,e);case"number":return hl(r,e);case"undefined":return hl(937,e);default:return hl(617,e)}}function hl(r,e){return(e<<5)-e+r|0}function zU(r,e){return hl(r?433:863,e)}function oA(r,e){e=hl(149417,e);for(let t=0,n=r.length;t<n;t++)e=hl(r.charCodeAt(t),e);return e}function KU(r,e){return e=hl(104579,e),r.reduce((t,n)=>qy(n,t),e)}function GU(r,e){return e=hl(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=oA(n,t),qy(r[n],t)),e)}function iS(r,e,t=32){const n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function PM(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function qU(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function ep(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):qU((r>>>0).toString(16),e/4)}class Zy{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(Vn(o))if(a+1<t){const c=e.charCodeAt(a+1);cu(c)?(a++,l=$E(o,c)):l=65533}else{s=o;break}else cu(o)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),ep(this._h0)+ep(this._h1)+ep(this._h2)+ep(this._h3)+ep(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,PM(this._buff,this._buffLen),this._buffLen>56&&(this._step(),PM(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=Zy._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,iS(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,i=this._h1,s=this._h2,o=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=i&s|~i&o,c=1518500249):u<40?(l=i^s^o,c=1859775393):u<60?(l=i&s|i&o|s&o,c=2400959708):(l=i^s^o,c=3395469782),d=iS(n,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=s,s=iS(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}Zy._bigBlock32=new DataView(new ArrayBuffer(320));class FM{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}function ZU(r,e,t){return new ta(new FM(r),new FM(e)).ComputeDiff(t).changes}class ch{static Assert(e,t){if(!e)throw new Error(t)}}class dh{static Copy(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}static Copy2(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}}class BM{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ql(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class ta{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,o]=ta._getElements(e),[a,l,c]=ta._getElements(t);this._hasStrings=o&&c,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(ta._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=oA(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=ta._getStrictElement(this._originalSequence,e),i=ta._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let u;return n<=i?(ch.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Ql(e,0,n,i-n+1)]):e<=t?(ch.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Ql(e,t-e+1,n,0)]):(ch.Assert(e===t+1,"originalStart should only be one more than originalEnd"),ch.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,o,a,s),c=o[0],d=a[0];if(l!==null)return l;if(!s[0]){const u=this.ComputeDiffRecursive(e,c,n,d,s);let h=[];return s[0]?h=[new Ql(c+1,t-(c+1)+1,d+1,i-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,i,s),this.ConcatenateChanges(u,h)}return[new Ql(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,o,a,l,c,d,u,h,f,g,_,b,v,C){let y=null,w=null,L=new BM,T=t,S=n,k=f[0]-b[0]-i,D=-1073741824,O=this.m_forwardHistory.length-1;do{const F=k+e;F===T||F<S&&c[F-1]<c[F+1]?(u=c[F+1],g=u-k-i,u<D&&L.MarkNextChange(),D=u,L.AddModifiedElement(u+1,g),k=F+1-e):(u=c[F-1]+1,g=u-k-i,u<D&&L.MarkNextChange(),D=u-1,L.AddOriginalElement(u,g+1),k=F-1-e),O>=0&&(c=this.m_forwardHistory[O],e=c[0],T=1,S=c.length-1)}while(--O>=-1);if(y=L.getReverseChanges(),C[0]){let F=f[0]+1,U=b[0]+1;if(y!==null&&y.length>0){const K=y[y.length-1];F=Math.max(F,K.getOriginalEnd()),U=Math.max(U,K.getModifiedEnd())}w=[new Ql(F,h-F+1,U,_-U+1)]}else{L=new BM,T=o,S=a,k=f[0]-b[0]-l,D=1073741824,O=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const F=k+s;F===T||F<S&&d[F-1]>=d[F+1]?(u=d[F+1]-1,g=u-k-l,u>D&&L.MarkNextChange(),D=u+1,L.AddOriginalElement(u+1,g+1),k=F+1-s):(u=d[F-1],g=u-k-l,u>D&&L.MarkNextChange(),D=u,L.AddModifiedElement(u+1,g+1),k=F-1-s),O>=0&&(d=this.m_reverseHistory[O],s=d[0],T=1,S=d.length-1)}while(--O>=-1);w=L.getChanges()}return this.ConcatenateChanges(y,w)}ComputeRecursionPoint(e,t,n,i,s,o,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,n--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(i-n),_=g+1,b=new Int32Array(_),v=new Int32Array(_),C=i-n,y=t-e,w=e-n,L=t-i,S=(y-C)%2===0;b[C]=e,v[y]=t,a[0]=!1;for(let k=1;k<=g/2+1;k++){let D=0,O=0;d=this.ClipDiagonalBound(C-k,k,C,_),u=this.ClipDiagonalBound(C+k,k,C,_);for(let U=d;U<=u;U+=2){U===d||U<u&&b[U-1]<b[U+1]?l=b[U+1]:l=b[U-1]+1,c=l-(U-C)-w;const K=l;for(;l<t&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(b[U]=l,l+c>D+O&&(D=l,O=c),!S&&Math.abs(U-y)<=k-1&&l>=v[U])return s[0]=l,o[0]=c,K<=v[U]&&1447>0&&k<=1447+1?this.WALKTRACE(C,d,u,w,y,h,f,L,b,v,l,t,s,c,i,o,S,a):null}const F=(D-e+(O-n)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(D,F))return a[0]=!0,s[0]=D,o[0]=O,F>0&&1447>0&&k<=1447+1?this.WALKTRACE(C,d,u,w,y,h,f,L,b,v,l,t,s,c,i,o,S,a):(e++,n++,[new Ql(e,t-e+1,n,i-n+1)]);h=this.ClipDiagonalBound(y-k,k,y,_),f=this.ClipDiagonalBound(y+k,k,y,_);for(let U=h;U<=f;U+=2){U===h||U<f&&v[U-1]>=v[U+1]?l=v[U+1]-1:l=v[U-1],c=l-(U-y)-L;const K=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[U]=l,S&&Math.abs(U-C)<=k&&l<=b[U])return s[0]=l,o[0]=c,K>=b[U]&&1447>0&&k<=1447+1?this.WALKTRACE(C,d,u,w,y,h,f,L,b,v,l,t,s,c,i,o,S,a):null}if(k<=1447){let U=new Int32Array(u-d+2);U[0]=C-d+1,dh.Copy2(b,d,U,1,u-d+1),this.m_forwardHistory.push(U),U=new Int32Array(f-h+2),U[0]=y-h+1,dh.Copy2(v,h,U,1,f-h+1),this.m_reverseHistory.push(U)}}return this.WALKTRACE(C,d,u,w,y,h,f,L,b,v,l,t,s,c,i,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const u=e[t-1];i=u.originalStart+u.originalLength,s=u.modifiedStart+u.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const h=n.originalStart-u,f=n.modifiedStart-u;if(h<i||f<s||o&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const _=(h===i&&f===s?5:0)+this._boundaryScore(h,n.originalLength,f,n.modifiedLength);_>c&&(c=_,l=u)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],s=e[t],o=s.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=s.originalStart+s.originalLength,c=l-a,d=i.modifiedStart,u=s.modifiedStart+s.modifiedLength,h=u-d;if(o<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,o);if(f){const[g,_]=f;(g!==i.originalStart+i.originalLength||_!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=g-i.originalStart,i.modifiedLength=_-i.modifiedStart,s.originalStart=g+o,s.modifiedStart=_+o,s.originalLength=l-s.originalStart,s.modifiedLength=u-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const o=e+t-s+1,a=n+i-s+1;let l=0,c=0,d=0;for(let u=e;u<o;u++)for(let h=n;h<a;h++){const f=this._contiguousSequenceScore(u,h,s);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,i)?1:0;return s+o}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return dh.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],dh.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return dh.Copy(e,0,i,0,e.length),dh.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(ch.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),ch.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Ql(i,s,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=n,o=i-n-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?i-1:i-2}}}const YU=3;function j4(r,e,t,n){return new ta(r,e,t).ComputeDiff(n)}class WM{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=uL(e[i],1),n[i]=hL(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)i[a]=c.charCodeAt(h-1),s[a]=l+1,o[a]=h,a++;!e&&l<n&&(i[a]=10,s[a]=l+1,o[a]=c.length+1,a++)}return new XU(i,s,o)}}class XU{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class Pm{constructor(e,t,n,i,s,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Pm(i,s,o,a,l,c,d,u)}}function QU(r){if(r.length<=1)return r;const e=[r[0]];let t=e[0];for(let n=1,i=r.length;n<i;n++){const s=r[n],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<YU?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class Yp{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,o,a){let l,c,d,u,h;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=i.getStartLineNumber(t.modifiedStart)-1,u=0):(d=i.getStartLineNumber(t.modifiedStart),u=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let _=j4(f,g,s,!0).changes;a&&(_=QU(_)),h=[];for(let b=0,v=_.length;b<v;b++)h.push(Pm.createFromDiffChange(_[b],f,g))}}return new Yp(l,c,d,u,h)}}class JU{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new WM(e),this.modified=new WM(t),this.continueLineDiff=VM(n.maxComputationTime),this.continueCharDiff=VM(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=j4(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(Yp.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let s=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;s<d&&o<u;){const h=this.originalLines[s],f=this.modifiedLines[o];if(h!==f){{let g=uL(h,1),_=uL(f,1);for(;g>1&&_>1;){const b=h.charCodeAt(g-2),v=f.charCodeAt(_-2);if(b!==v)break;g--,_--}(g>1||_>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,g,o+1,1,_)}{let g=hL(h,1),_=hL(f,1);const b=h.length+1,v=f.length+1;for(;g<b&&_<v;){const C=h.charCodeAt(g-1),y=h.charCodeAt(_-1);if(C!==y)break;g++,_++}(g<b||_<v)&&this._pushTrimWhitespaceCharChange(i,s+1,g,b,o+1,_,v)}}s++,o++}c&&(i.push(Yp.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Pm(t,n,t,i,s,o,s,a)]),e.push(new Yp(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Pm(t,n,t,i,s,o,s,a)),!0):!1}}function uL(r,e){const t=Zi(r);return t===-1?e:t+1}function hL(r,e){const t=ga(r);return t===-1?e:t+2}function VM(r){if(r===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<r}function eC(r){return r<0?0:r>255?255:r|0}function uh(r){return r<0?0:r>4294967295?4294967295:r|0}class ej{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=uh(e);const n=this.values,i=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=uh(e),t=uh(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=uh(e),t=uh(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=uh(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,o=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],o=s-this.values[i],e<o)n=i-1;else if(e>=s)t=i+1;else break;return new $4(i,e-o)}}class tj{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new $4(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=My(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let s=0;s<n;s++)this._indexBySum[i+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class $4{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class nj{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new B(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new ej(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=va(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}class Lg{constructor(e){const t=eC(e);this._defaultValue=t,this._asciiMap=Lg._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){const n=eC(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class Uh{constructor(){this._actual=new Lg(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class ij{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class sj{constructor(e){let t=0,n=0;for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const i=new ij(n,t,0);for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];i.set(a,l,c)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let sS=null;function rj(){return sS===null&&(sS=new sj([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),sS}let tp=null;function oj(){if(tp===null){tp=new Lg(0);const r=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<r.length;t++)tp.set(r.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)tp.set(e.charCodeAt(t),2)}return tp}class tC{static _createLink(e,t,n,i,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:o+2},url:t.substring(i,o+1)}}static computeLinks(e,t=rj()){const n=oj(),i=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),l=a.length;let c=0,d=0,u=0,h=1,f=!1,g=!1,_=!1,b=!1;for(;c<l;){let v=!1;const C=a.charCodeAt(c);if(h===13){let y;switch(C){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:_=!0,g=!0,y=0;break;case 93:_=!1,y=g?0:1;break;case 123:b=!0,y=0;break;case 125:y=b?0:1;break;case 39:y=u===39?1:0;break;case 34:y=u===34?1:0;break;case 96:y=u===96?1:0;break;case 42:y=u===42?1:0;break;case 124:y=u===124?1:0;break;case 32:y=_?0:1;break;default:y=n.get(C)}y===1&&(i.push(tC._createLink(n,a,s,d,c)),v=!0)}else if(h===12){let y;C===91?(g=!0,y=0):y=n.get(C),y===1?v=!0:h=13}else h=t.nextState(h,C),h===0&&(v=!0);v&&(h=1,f=!1,g=!1,b=!1,d=c+1,u=C),c++}h===13&&i.push(tC._createLink(n,a,s,d,l))}return i}}function aj(r){return!r||typeof r.getLineCount!="function"||typeof r.getLineContent!="function"?[]:tC.computeLinks(r)}class fL{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){const o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(n&&i){const o=this.doNavigateValueSet(i,s);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e);const s=parseFloat(e);return!isNaN(i)&&!isNaN(s)&&i===s?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,o=e.length;i===null&&s<o;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}fL.INSTANCE=new fL;class lj extends Lg{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function cj(r){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=r(t)),e[t])}const wr=cj(r=>new lj(r)),dj=999;class Cd{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=uj(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=_4(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new HH(t,this.wordSeparators?wr(this.wordSeparators):null,n?this.searchString:null)}}function uj(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++){const n=r.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const i=r.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}function xd(r,e,t){if(!t)return new Nm(r,null);const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i];return new Nm(r,n)}class HM{constructor(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}class Gb{static findMatches(e,t,n,i,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new jh(o.wordSeparators,o.regex),i,s):this._doFindMatchesLineByLine(e,n,o,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,o){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(i){const f=i.findLineFeedCountBeforeOffset(s+o.length)-l;c=a+o.length+f}else c=a+o.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new x(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,i,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new HM(a):null,c=[];let d=0,u;for(n.reset(0);u=n.next(a);)if(c[d++]=xd(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,i),d>=s)return c;return c}static _doFindMatchesLineByLine(e,t,n,i,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,i,s),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,i,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,i,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,i,s)}return o}static _findMatchesInLine(e,t,n,i,s,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let _=-f;for(;(_=t.indexOf(h,_+f))!==-1;)if((!c||aA(c,t,g,_,f))&&(o[s++]=new Nm(new x(n,_+1+i,n,_+1+f+i),null),s>=l))return s;return s}const d=new jh(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(o[s++]=xd(new x(n,u.index+1+i,n,u.index+1+u[0].length+i),u,a),s>=l))return s;while(u);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const o=new jh(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,o,i):this._doFindNextMatchLineByLine(e,n,o,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new B(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new x(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new HM(l):null;n.reset(t.column-1);const d=n.next(l);return d?xd(this._getMultilineMatchRange(e,o,l,c,d.index,d[0]),d,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new B(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,i);if(l)return l;for(let c=1;c<=s;c++){const d=(o+c-1)%s,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(n,u,d+1,1,i);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const o=e.next(t);return o?xd(new x(n,o.index+1,n,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const o=new jh(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,i):this._doFindPreviousMatchLineByLine(e,n,o,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new x(1,1,t.lineNumber,t.column),n,i,10*dj);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new B(o,e.getLineMaxColumn(o)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,i);if(l)return l;for(let c=1;c<=s;c++){const d=(s+o-c-1)%s,u=e.getLineContent(d+1),h=this._findLastMatchInLine(n,u,d+1,i);if(h)return h}return null}static _findLastMatchInLine(e,t,n,i){let s=null,o;for(e.reset(0);o=e.next(t);)s=xd(new x(n,o.index+1,n,o.index+1+o[0].length),o,i);return s}}function hj(r,e,t,n,i){if(n===0)return!0;const s=e.charCodeAt(n-1);if(r.get(s)!==0||s===13||s===10)return!0;if(i>0){const o=e.charCodeAt(n);if(r.get(o)!==0)return!0}return!1}function fj(r,e,t,n,i){if(n+i===t)return!0;const s=e.charCodeAt(n+i);if(r.get(s)!==0||s===13||s===10)return!0;if(i>0){const o=e.charCodeAt(n+i-1);if(r.get(o)!==0)return!0}return!1}function aA(r,e,t,n,i){return hj(r,e,t,n,i)&&fj(r,e,t,n,i)}class jh{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){X0(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||aA(this._wordSeparators,e,t,i,s))return n}while(n);return null}}class lA{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),o=new UM(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${gj(Array.from(a))}`,"g");const c=new jh(null,l),d=[];let u=!1,h,f=0,g=0,_=0;e:for(let b=i,v=s;b<=v;b++){const C=e.getLineContent(b),y=C.length;c.reset(0);do if(h=c.next(C),h){let w=h.index,L=h.index+h[0].length;if(w>0){const D=C.charCodeAt(w-1);Vn(D)&&w--}if(L+1<y){const D=C.charCodeAt(L-1);Vn(D)&&L++}const T=C.substring(w,L),S=km(w+1,AE,C,0),k=o.shouldHighlightNonBasicASCII(T,S?S.word:null);if(k!==0){k===3?f++:k===2?g++:k===1?_++:Ry();const D=1e3;if(d.length>=D){u=!0;break e}d.push(new x(b,w+1,b,L+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:_}}static computeUnicodeHighlightReason(e,t){const n=new UM(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),o=n.ambiguousCharacters.getPrimaryConfusable(s),a=qr.getLocales().filter(l=>!qr.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function gj(r,e){return`[${Zs(r.map(n=>String.fromCodePoint(n)).join(""))}]`}class UM{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=qr.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of pa.codePoints)jM(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,s=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=Wy(o);i=i||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!pa.isInvisibleCharacter(a)&&(s=!0)}return!i&&s?0:this.options.invisibleCharacters&&!jM(e)&&pa.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function jM(r){return r===" "||r===`
`||r==="	"}var fd=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class pj extends nj{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=km(e.column,HF(t),this._lines[e.lineNumber-1],0);return n?new x(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=s.substring(a[o].start,a[o].end);o+=1,yield l}else if(i<t.length)s=t[i],a=n(s,e),o=0,i+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const o of i)s.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<i;o++)s.push(this._lines[o]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!B.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const s=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>s&&(n=s,i=!0)}return i?{lineNumber:t,column:n}:e}}class yc{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new pj(Se.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return fd(this,void 0,void 0,function*(){const i=this._getModel(e);return i?lA.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return fd(this,void 0,void 0,function*(){const s=this._getModel(e),o=this._getModel(t);return!s||!o?null:yc.computeDiff(s,o,n,i)})}static computeDiff(e,t,n,i){const s=e.getLinesContent(),o=t.getLinesContent(),l=new JU(s,o,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:i}).computeDiff(),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);return{quitEarly:l.quitEarly,identical:c,changes:l.changes}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let s=1;s<=n;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return fd(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const i=[];let s;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return x.compareRangesUsingStarts(o.range,a.range);const l=o.range?0:1,c=a.range?0:1;return l-c});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(s=l),x.isEmpty(o)&&!a)continue;const c=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),c===a)continue;if(Math.max(a.length,c.length)>yc._diffLimit){i.push({range:o,text:a});continue}const d=ZU(c,a,!1),u=n.offsetAt(x.lift(o).getStartPosition());for(const h of d){const f=n.positionAt(u+h.originalStart),g=n.positionAt(u+h.originalStart+h.originalLength),_={text:a.substr(h.modifiedStart,h.modifiedLength),range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:g.lineNumber,endColumn:g.column}};n.getValueInRange(_.range)!==_.text&&i.push(_)}}return typeof s=="number"&&i.push({eol:s,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return fd(this,void 0,void 0,function*(){const t=this._getModel(e);return t?aj(t):null})}textualSuggest(e,t,n,i){return fd(this,void 0,void 0,function*(){const s=new fs(!0),o=new RegExp(n,i),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(o))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>yc._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,i){return fd(this,void 0,void 0,function*(){const s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,o);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,i,s){return fd(this,void 0,void 0,function*(){const o=this._getModel(e);if(!o)return null;const a=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=o.getValueInRange(c);return fL.INSTANCE.navigateValueSet(t,l,c,d,n)})}loadForeignModule(e,t,n){const o={host:$6(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(ME(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}yc._diffLimit=1e5;yc._suggestionsLimit=1e4;typeof importScripts=="function"&&(mn.monaco=f4());const cA=tt("textResourceConfigurationService"),z4=tt("textResourcePropertiesService"),Zr=tt("logService");var go;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off"})(go||(go={}));const K4=go.Info;class mj extends j{constructor(){super(...arguments),this.level=K4,this._onDidChangeLogLevel=this._register(new R)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class _j extends mj{constructor(e=K4){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=go.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=go.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=go.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=go.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class bj extends j{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}const be=tt("ILanguageFeaturesService");var vj=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},np=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},gL=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const $M=60*1e3,zM=5*60*1e3;function kd(r,e){const t=r.getModel(e);return!(!t||t.isTooLargeForSyncing())}let pL=class extends j{constructor(e,t,n,i,s){super(),this._modelService=e,this._workerManager=this._register(new yj(this._modelService,i)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(o,a)=>kd(this._modelService,o.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(o.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new Cj(this._workerManager,t,this._modelService,i)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return kd(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return this._workerManager.withWorker().then(s=>s.computeDiff(e,t,n,i))}computeMoreMinimalEdits(e,t){if(Si(t)){if(!kd(this._modelService,e))return Promise.resolve(t);const n=fs.create(!0),i=this._workerManager.withWorker().then(s=>s.computeMoreMinimalEdits(e,t));return i.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([i,Rc(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return kd(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return kd(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};pL=vj([np(0,en),np(1,cA),np(2,Zr),np(3,_n),np(4,be)],pL);class Cj{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return gL(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")kd(this._modelService,e.uri)&&i.push(e.uri);else for(const u of this._modelService.getModels())kd(this._modelService,u.uri)&&(u===e?i.unshift(u.uri):(n.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&i.push(u.uri));if(i.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new x(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):x.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(i,o?.word,s);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class yj extends j{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new eb).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(zM/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>zM&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new G4(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class wj extends j{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const i=new eb;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round($M/2)),this._register(i)}}dispose(){for(const e in this._syncedModels)ut(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>$M&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new Q;s.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(i.toString(),o)})),s.add(n.onWillDispose(()=>{this._stopModelSync(i)})),s.add(Ke(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ut(t)}}class KM{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class rS{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class G4 extends j{constructor(e,t,n,i){super(),this.languageConfigurationService=i,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new Gy(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new VU(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new rS(this)))}catch(e){dL(e),this._worker=new KM(new yc(new rS(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(dL(e),this._worker=new KM(new yc(new rS(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new wj(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return gL(this,void 0,void 0,function*(){return this._disposed?Promise.reject(n4()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return gL(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),s=n.source,o=Gw(n);return i.textualSuggest(e.map(a=>a.toString()),t,s,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),o=s.source,a=Gw(s);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{const s=this._modelService.getModel(e);if(!s)return null;const o=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),a=o.source,l=Gw(o);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function Sj(r,e,t){return new xj(r,e,t)}class xj extends G4{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?ME(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=(a,l)=>e.fmr(a,l),s=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of n)o[a]=s(a,i);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class ci{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;i&1&&(s+="font-style: italic;"),i&2&&(s+="font-weight: bold;");let o="";return i&4&&(o+=" underline"),i&8&&(o+=" line-through"),o&&(s+=`text-decoration:${o};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:Boolean(n&1),bold:Boolean(n&2),underline:Boolean(n&4),strikethrough:Boolean(n&8)}}}let Zn=class{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=Zn.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new Zn(i,e,t)}equals(e){return e instanceof Zn?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let o=i;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=ci.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return ci.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return ci.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return ci.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return ci.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return ci.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Zn.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new dA(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let s=0;s<i;s++)e[s<<1]=e[s+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),o=e[s<<1];if(o===t)return s+1;o<t?n=s+1:o>t&&(i=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const s=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];s.push(i.length,c),t++,o=a}else if(l){if(l.offset>o){i+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];s.push(i.length,c),o=l.offset}i+=l.text,s.push(i.length,l.tokenMetadata),n++}else break}return new Zn(new Uint32Array(s),i,this._languageIdCodec)}};Zn.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0;class dA{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof dA?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class Ls{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!Ls._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,s=n+1,o=n-t,a=[];let l=0;for(const c of e)c.endColumn<=i||c.startColumn>=s||(a[l++]=new Ls(Math.max(1,c.startColumn-i+1),Math.min(o+1,c.endColumn-i+1),c.className,c.type));return a}static filter(e,t,n,i){if(e.length===0)return[];const s=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:n,h=d.endLineNumber===t?d.endColumn:i;s[o++]=new Ls(u,h,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Ls._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class GM{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class nC{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new GM(t,this.stopOffsets[i],this.classNames.join(" "),nC._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new GM(t,e-1,this.classNames.join(" "),nC._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class kj{static normalize(e,t){if(t.length===0)return[];const n=[],i=new nC;let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const _=e.charCodeAt(c-2);Vn(_)&&c--}if(d>1){const _=e.charCodeAt(d-2);Vn(_)&&d--}const f=c-1,g=d-2;s=i.consumeLowerThan(f,s,n),i.count===0&&(s=f),i.insert(g,u,h)}return i.consumeLowerThan(1073741824,s,n),n}}class qn{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class Lj{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class td{constructor(e,t,n,i,s,o,a,l,c,d,u,h,f,g,_,b,v,C,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Ls.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=_,this.renderWhitespace=b==="all"?4:b==="boundary"?1:b==="selection"?2:b==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=C,this.selectionsOnLine=y&&y.sort((T,S)=>T.startOffset<S.startOffset?-1:1);const w=Math.abs(g-h),L=Math.abs(f-h);w<L?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Ls.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class uA{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Qo{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=Qo.getPartIndex(t),i=Qo.getCharIndex(t);return new uA(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const i=(e<<16|n<<0)>>>0;let s=0,o=this.length-1;for(;s+1<o;){const _=s+o>>>1,b=this._data[_];if(b===i)return _;b>i?o=_:s=_}if(s===o)return s;const a=this._data[s],l=this._data[o];if(a===i)return s;if(l===i)return o;const c=Qo.getPartIndex(a),d=Qo.getCharIndex(a),u=Qo.getPartIndex(l);let h;c!==u?h=t:h=Qo.getCharIndex(l);const f=n-d,g=h-n;return f<=g?s:o}}class mL{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function tb(r,e){if(r.lineContent.length===0){if(r.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,i=0;for(const o of r.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(i|=1,t++),o.type===2&&(i|=2,n++));e.appendASCIIString("</span>");const s=new Qo(1,t+n);return s.setColumnInfo(1,t,0,0),new mL(s,!1,i)}return e.appendASCIIString("<span><span></span></span>"),new mL(new Qo(0,0),!1,0)}return Oj(Ej(r),e)}class Tj{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function Yy(r){const e=Mc(1e4),t=tb(r,e);return new Tj(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Dj{constructor(e,t,n,i,s,o,a,l,c,d,u,h,f,g,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=d,this.containsRTL=u,this.spaceWidth=h,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=_}}function Ej(r){const e=r.lineContent;let t,n;r.stopRenderingLineAfter!==-1&&r.stopRenderingLineAfter<e.length?(t=!0,n=r.stopRenderingLineAfter):(t=!1,n=e.length);let i=Aj(e,r.containsRTL,r.lineTokens,r.fauxIndentLength,n);r.renderControlCharacters&&!r.isBasicASCII&&(i=Nj(e,i)),(r.renderWhitespace===4||r.renderWhitespace===1||r.renderWhitespace===2&&r.selectionsOnLine||r.renderWhitespace===3)&&(i=Mj(r,e,n,i));let s=0;if(r.lineDecorations.length>0){for(let o=0,a=r.lineDecorations.length;o<a;o++){const l=r.lineDecorations[o];l.type===3||l.type===1?s|=1:l.type===2&&(s|=2)}i=Rj(e,n,i,r.lineDecorations)}return r.containsRTL||(i=Ij(e,i,!r.isBasicASCII||r.fontLigatures)),new Dj(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,e,n,t,i,s,r.fauxIndentLength,r.tabSize,r.startVisibleColumn,r.containsRTL,r.spaceWidth,r.renderSpaceCharCode,r.renderWhitespace,r.renderControlCharacters)}function Aj(r,e,t,n,i){const s=[];let o=0;n>0&&(s[o++]=new qn(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=n)continue;const u=t.getClassName(l);if(d>=i){const f=e?Of(r.substring(a,i)):!1;s[o++]=new qn(i,u,0,f);break}const h=e?Of(r.substring(a,d)):!1;s[o++]=new qn(d,u,0,h),a=d}return s}function Ij(r,e,t){let n=0;const i=[];let s=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(n+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,g=n;for(let _=n;_<c;_++)r.charCodeAt(_)===32&&(f=_),f!==-1&&_-g>=50&&(i[s++]=new qn(f+1,d,u,h),g=f+1,f=-1);g!==c&&(i[s++]=new qn(c,d,u,h))}else i[s++]=l;n=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,d=c-n;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let _=1;_<g;_++){const b=n+_*50;i[s++]=new qn(b,u,h,f)}i[s++]=new qn(c,u,h,f)}else i[s++]=l;n=c}return i}function q4(r){return r<32?r!==9:r===127||r>=8234&&r<=8238||r>=8294&&r<=8297||r>=8206&&r<=8207||r===1564}function Nj(r,e){const t=[];let n=new qn(0,"",0,!1),i=0;for(const s of e){const o=s.endIndex;for(;i<o;i++){const a=r.charCodeAt(i);q4(a)&&(i>n.endIndex&&(n=new qn(i,s.type,s.metadata,s.containsRTL),t.push(n)),n=new qn(i+1,"mtkcontrol",s.metadata,!1),t.push(n))}i>n.endIndex&&(n=new qn(o,s.type,s.metadata,s.containsRTL),t.push(n))}return t}function Mj(r,e,t,n){const i=r.continuesWithWrappedLine,s=r.fauxIndentLength,o=r.tabSize,a=r.startVisibleColumn,l=r.useMonospaceOptimizations,c=r.selectionsOnLine,d=r.renderWhitespace===1,u=r.renderWhitespace===3,h=r.renderSpaceWidth!==r.spaceWidth,f=[];let g=0,_=0,b=n[_].type,v=n[_].containsRTL,C=n[_].endIndex;const y=n.length;let w=!1,L=Zi(e),T;L===-1?(w=!0,L=t,T=t):T=ga(e);let S=!1,k=0,D=c&&c[k],O=a%o;for(let U=s;U<t;U++){const K=e.charCodeAt(U);D&&U>=D.endOffset&&(k++,D=c&&c[k]);let ae;if(U<L||U>T)ae=!0;else if(K===9)ae=!0;else if(K===32)if(d)if(S)ae=!0;else{const fe=U+1<t?e.charCodeAt(U+1):0;ae=fe===32||fe===9}else ae=!0;else ae=!1;if(ae&&c&&(ae=!!D&&D.startOffset<=U&&D.endOffset>U),ae&&u&&(ae=w||U>T),ae&&v&&U>=L&&U<=T&&(ae=!1),S){if(!ae||!l&&O>=o){if(h){const fe=g>0?f[g-1].endIndex:s;for(let we=fe+1;we<=U;we++)f[g++]=new qn(we,"mtkw",1,!1)}else f[g++]=new qn(U,"mtkw",1,!1);O=O%o}}else(U===C||ae&&U>s)&&(f[g++]=new qn(U,b,0,v),O=O%o);for(K===9?O=o:Nc(K)?O+=2:O++,S=ae;U===C&&(_++,_<y);)b=n[_].type,v=n[_].containsRTL,C=n[_].endIndex}let F=!1;if(S)if(i&&d){const U=t>0?e.charCodeAt(t-1):0,K=t>1?e.charCodeAt(t-2):0;U===32&&K!==32&&K!==9||(F=!0)}else F=!0;if(F)if(h){const U=g>0?f[g-1].endIndex:s;for(let K=U+1;K<=t;K++)f[g++]=new qn(K,"mtkw",1,!1)}else f[g++]=new qn(t,"mtkw",1,!1);else f[g++]=new qn(t,b,0,v);return f}function Rj(r,e,t,n){n.sort(Ls.compare);const i=kj.normalize(r,n),s=i.length;let o=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],g=f.endIndex,_=f.type,b=f.metadata,v=f.containsRTL;for(;o<s&&i[o].startOffset<g;){const C=i[o];if(C.startOffset>c&&(c=C.startOffset,a[l++]=new qn(c,_,b,v)),C.endOffset+1<=g)c=C.endOffset+1,a[l++]=new qn(c,_+" "+C.className,b|C.metadata,v),o++;else{c=g,a[l++]=new qn(c,_+" "+C.className,b|C.metadata,v);break}}g>c&&(c=g,a[l++]=new qn(c,_,b,v))}const d=t[t.length-1].endIndex;if(o<s&&i[o].startOffset===d)for(;o<s&&i[o].startOffset===d;){const u=i[o];a[l++]=new qn(c,u.className,u.metadata,!1),o++}return a}function Oj(r,e){const t=r.fontIsMonospace,n=r.canUseHalfwidthRightwardsArrow,i=r.containsForeignElements,s=r.lineContent,o=r.len,a=r.isOverflowing,l=r.parts,c=r.fauxIndentLength,d=r.tabSize,u=r.startVisibleColumn,h=r.containsRTL,f=r.spaceWidth,g=r.renderSpaceCharCode,_=r.renderWhitespace,b=r.renderControlCharacters,v=new Qo(o+1,l.length);let C=!1,y=0,w=u,L=0,T=0,S=0;h?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let k=0,D=l.length;k<D;k++){const O=l[k],F=O.endIndex,U=O.type,K=O.containsRTL,ae=_!==0&&O.isWhitespace(),fe=ae&&!t&&(U==="mtkw"||!i),we=y===F&&O.isPseudoAfter();if(L=0,e.appendASCIIString("<span "),K&&e.appendASCIIString('style="unicode-bidi:isolate" '),e.appendASCIIString('class="'),e.appendASCIIString(fe?"mtkz":U),e.appendASCII(34),ae){let xe=0;{let De=y,Oe=w;for(;De<F;De++){const Te=(s.charCodeAt(De)===9?d-Oe%d:1)|0;xe+=Te,De>=c&&(Oe+=Te)}}for(fe&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(f*xe)),e.appendASCIIString('px"')),e.appendASCII(62);y<F;y++){v.setColumnInfo(y+1,k-S,L,T),S=0;const De=s.charCodeAt(y);let Oe,nt;if(De===9){Oe=d-w%d|0,nt=Oe,!n||nt>1?e.write1(8594):e.write1(65515);for(let Te=2;Te<=nt;Te++)e.write1(160)}else Oe=2,nt=1,e.write1(g),e.write1(8204);L+=Oe,T+=nt,y>=c&&(w+=nt)}}else for(e.appendASCII(62);y<F;y++){v.setColumnInfo(y+1,k-S,L,T),S=0;const xe=s.charCodeAt(y);let De=1,Oe=1;switch(xe){case 9:De=d-w%d,Oe=De;for(let nt=1;nt<=De;nt++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:b?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Nc(xe)&&Oe++,b&&xe<32?e.write1(9216+xe):b&&xe===127?e.write1(9249):b&&q4(xe)?(e.appendASCIIString("[U+"),e.appendASCIIString(Pj(xe)),e.appendASCIIString("]"),De=8,Oe=De):e.write1(xe)}L+=De,T+=Oe,y>=c&&(w+=Oe)}we?S++:S=0,y>=o&&!C&&O.isPseudoAfter()&&(C=!0,v.setColumnInfo(y+1,k,L,T)),e.appendASCIIString("</span>")}return C||v.setColumnInfo(o+1,l.length-1,L,T),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new mL(v,h,i)}function Pj(r){return r.toString(16).toUpperCase().padStart(4,"0")}class qM{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}class Fj{constructor(e,t){this.tabSize=e,this.data=t}}class hA{constructor(e,t,n,i,s,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=a}}class Xs{constructor(e,t,n,i,s,o,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=Xs.isBasicASCII(n,o),this.containsRTL=Xs.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?Wy(e):!0}static containsRTL(e,t,n){return!t&&n?Of(e):!1}}class Xp{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class Bj{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new Xp(new x(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Z4{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class Y4{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function Wj(r){return Array.isArray(r)}function Vj(r){return!Wj(r)}function X4(r){return typeof r=="string"}function ZM(r){return!X4(r)}function Nh(r){return!r}function wc(r,e){return r.ignoreCase&&e?e.toLowerCase():e}function YM(r){return r.replace(/[&<>'"_]/g,"-")}function Hj(r,e){console.log(`${r.languageId}: ${e}`)}function Pt(r,e){return new Error(`${r.languageId}: ${e}`)}function sc(r,e,t,n,i){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,l,c,d,u,h,f,g,_){return Nh(c)?Nh(d)?!Nh(u)&&u<n.length?wc(r,n[u]):!Nh(f)&&r&&typeof r[f]=="string"?r[f]:(o===null&&(o=i.split("."),o.unshift(i)),!Nh(h)&&h<o.length?wc(r,o[h]):""):wc(r,t):"$"})}function qb(r,e){let t=e;for(;t&&t.length>0;){const n=r.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function Uj(r,e){let t=e;for(;t&&t.length>0;){if(r.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}var jj=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$j=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Q4=5;class Fm{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new ff(e,t);let n=ff.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new ff(e,t),this._entries[n]=i,i)}}Fm._INSTANCE=new Fm(Q4);class ff{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return ff._equals(this,e)}push(e){return Fm.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Fm.create(this.parent,e)}}class $h{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new $h(this.languageId,this.state)}}class rc{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new Qp(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Qp(e,t);const n=ff.getStackElementId(e);let i=this._entries[n];return i||(i=new Qp(e,null),this._entries[n]=i,i)}}rc._INSTANCE=new rc(Q4);class Qp{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:rc.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof Qp)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class zj{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Tm(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,o=n.state,a=Yt.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),o;const l=a.tokenize(e,t,o);if(i!==0)for(const c of l.tokens)this._tokens.push(new Tm(c.offset+i,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new VE(this._tokens,e)}}class iC{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=e!==null?e.length:0,s=t.length,o=n!==null?n.length:0;if(i===0&&s===0&&o===0)return new Uint32Array(0);if(i===0&&s===0)return n;if(s===0&&o===0)return e;const a=new Uint32Array(i+s+o);e!==null&&a.set(e);for(let l=0;l<s;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+s),a}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,o=n.state,a=Yt.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),o;const l=a.tokenizeEncoded(e,t,o);if(i!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=i;return this._prependTokens=iC._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new Fy(iC._merge(this._prependTokens,this._tokens,null),e)}}let Bm=class J4{constructor(e,t,n,i,s){this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._tokenizationRegistryListener=Yt.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(o=!0,Yt.fire([this._languageId]),o=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=Yt.get(t);if(n){if(n instanceof J4){const i=n.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}Yt.isResolved(t)||e.push(Yt.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Fm.create(null,this._lexer.start);return rc.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return nA(this._languageId,n);const i=new zj,s=this._tokenize(e,t,n,i);return i.finalize(s)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return Ky(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const i=new iC(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,i);return i.finalize(s)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=qb(this._lexer,t.stack.state),!n))throw Pt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const o of n){if(!ZM(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.regex;const l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(i===-1||c<i)&&(i=c)}if(!s)throw Pt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){const o=this._findLeavingNestedLanguageOffset(e,n);if(o===-1){const c=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return rc.create(n.stack,new $h(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&s.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,i);const l=e.substring(o);return this._myTokenize(l,t,n,i+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,d=n.stack,u=0,h=null,f=!0;for(;f||u<l;){const g=u,_=d.depth,b=h?h.groups.length:0,v=d.state;let C=null,y=null,w=null,L=null,T=null;if(h){C=h.matches;const D=h.groups.shift();y=D.matched,w=D.action,L=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let D=this._lexer.tokenizer[v];if(!D&&(D=qb(this._lexer,v),!D))throw Pt(this._lexer,"tokenizer state is not defined: "+v);const O=a.substr(u);for(const F of D)if((u===0||!F.matchOnlyAtLineStart)&&(C=O.match(F.regex),C)){y=C[0],w=F.action;break}}if(C||(C=[""],y=""),w||(u<l&&(C=[a.charAt(u)],y=C[0]),w=this._lexer.defaultToken),y===null)break;for(u+=y.length;Vj(w)&&ZM(w)&&w.test;)w=w.test(y,C,v,u===l);let S=null;if(typeof w=="string"||Array.isArray(w))S=w;else if(w.group)S=w.group;else if(w.token!==null&&w.token!==void 0){if(w.tokenSubst?S=sc(this._lexer,w.token,y,C,v):S=w.token,w.nextEmbedded)if(w.nextEmbedded==="@pop"){if(!c)throw Pt(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Pt(this._lexer,"cannot enter embedded language from within an embedded language");T=sc(this._lexer,w.nextEmbedded,y,C,v)}if(w.goBack&&(u=Math.max(0,u-w.goBack)),w.switchTo&&typeof w.switchTo=="string"){let D=sc(this._lexer,w.switchTo,y,C,v);if(D[0]==="@"&&(D=D.substr(1)),qb(this._lexer,D))d=d.switchTo(D);else throw Pt(this._lexer,"trying to switch to a state '"+D+"' that is undefined in rule: "+this._safeRuleName(L))}else{if(w.transform&&typeof w.transform=="function")throw Pt(this._lexer,"action.transform not supported");if(w.next)if(w.next==="@push"){if(d.depth>=this._lexer.maxStack)throw Pt(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(v)}else if(w.next==="@pop"){if(d.depth<=1)throw Pt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(L));d=d.pop()}else if(w.next==="@popall")d=d.popall();else{let D=sc(this._lexer,w.next,y,C,v);if(D[0]==="@"&&(D=D.substr(1)),qb(this._lexer,D))d=d.push(D);else throw Pt(this._lexer,"trying to set a next state '"+D+"' that is undefined in rule: "+this._safeRuleName(L))}}w.log&&typeof w.log=="string"&&Hj(this._lexer,this._lexer.languageId+": "+sc(this._lexer,w.log,y,C,v))}if(S===null)throw Pt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(L));const k=D=>{const O=this._languageService.getLanguageIdByLanguageName(D)||this._languageService.getLanguageIdByMimeType(D)||D,F=this._getNestedEmbeddedLanguageData(O);if(u<l){const U=e.substr(u);return this._nestedTokenize(U,t,rc.create(d,F),i+u,s)}else return rc.create(d,F)};if(Array.isArray(S)){if(h&&h.groups.length>0)throw Pt(this._lexer,"groups cannot be nested: "+this._safeRuleName(L));if(C.length!==S.length+1)throw Pt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(L));let D=0;for(let O=1;O<C.length;O++)D+=C[O].length;if(D!==y.length)throw Pt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(L));h={rule:L,matches:C,groups:[]};for(let O=0;O<S.length;O++)h.groups[O]={action:S[O],matched:C[O+1]};u-=y.length;continue}else{if(S==="@rematch"&&(u-=y.length,y="",C=null,S="",T!==null))return k(T);if(y.length===0){if(l===0||_!==d.depth||v!==d.state||(h?h.groups.length:0)!==b)continue;throw Pt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(L))}let D=null;if(X4(S)&&S.indexOf("@brackets")===0){const O=S.substr(9),F=Kj(this._lexer,y);if(!F)throw Pt(this._lexer,"@brackets token returned but no bracket defined as: "+y);D=YM(F.token+O)}else{const O=S===""?"":S+this._lexer.tokenPostfix;D=YM(O)}g<o&&s.emit(g+i,D)}if(T!==null)return k(T)}return rc.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new $h(e,Bf);e!==this._languageId&&(Yt.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Yt.get(e);return t?new $h(e,t.getInitialState()):new $h(e,Bf)}};Bm=jj([$j(4,ft)],Bm);function Kj(r,e){if(!e)return null;e=wc(r,e);const t=r.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}var Gj=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},oS;const aS=(oS=window.trustedTypes)===null||oS===void 0?void 0:oS.createPolicy("standaloneColorizer",{createHTML:r=>r});class fA{static colorizeElement(e,t,n,i){i=i||{};const s=i.theme||"vs",o=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(s);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;const c=d=>{var u;const h=(u=aS?.createHTML(d))!==null&&u!==void 0?u:d;n.innerHTML=h};return this.colorize(t,l||"",a,i).then(c,d=>console.error(d))}static colorize(e,t,n,i){return Gj(this,void 0,void 0,function*(){const s=e.languageIdCodec;let o=4;i&&typeof i.tabSize=="number"&&(o=i.tabSize),qE(t)&&(t=t.substr(1));const a=va(t);if(!e.isRegisteredLanguageId(n))return XM(a,o,s);const l=yield Yt.getOrCreate(n);return l?qj(a,o,l,s):XM(a,o,s)})}static colorizeLine(e,t,n,i,s=4){const o=Xs.isBasicASCII(e,t),a=Xs.containsRTL(e,o,n);return Yy(new td(!1,!0,e,!1,o,a,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function qj(r,e,t,n){return new Promise((i,s)=>{const o=()=>{const a=Zj(r,e,t,n);if(t instanceof Bm){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,s);return}}i(a)};o()})}function XM(r,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let o=0,a=r.length;o<a;o++){const l=r[o];s[0]=l.length;const c=new Zn(s,l,t),d=Xs.isBasicASCII(l,!0),u=Xs.containsRTL(l,d,!0),h=Yy(new td(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(h.html),n.push("<br/>")}return n.join("")}function Zj(r,e,t,n){let i=[],s=t.getInitialState();for(let o=0,a=r.length;o<a;o++){const l=r[o],c=t.tokenizeEncoded(l,!0,s);Zn.convertToEndOffset(c.tokens,l.length);const d=new Zn(c.tokens,l,n),u=Xs.isBasicASCII(l,!0),h=Xs.containsRTL(l,u,!0),f=Yy(new td(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(f.html),i.push("<br/>"),s=c.endState}return i.join("")}const gA={clipboard:{writeText:vo||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:vo||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>vo||QE()?0:navigator.keyboard||Il?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function _L(r,e){if(r===0)return null;const t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new sC([lS(t,e),lS(n,e)]):new sC([lS(t,e)])}function lS(r,e){const t=!!(r&2048),n=!!(r&256),i=e===2?n:t,s=!!(r&1024),o=!!(r&512),a=e===2?t:n,l=r&255;return new uu(i,s,o,a,l)}class uu{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new sC([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class sC{constructor(e){if(e.length===0)throw Co("parts");this.parts=e}}class Yj{constructor(e,t,n,i,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=o}}class Xj{}function Qj(r){if(r.charCode){const t=String.fromCharCode(r.charCode).toUpperCase();return Od.fromString(t)}const e=r.keyCode;if(e===3)return 7;if(Ys){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(Je&&e===224)return 57}else if(vc){if(e===91)return 57;if(Je&&e===93)return 57;if(!Je&&e===92)return 57}return r4[e]||0}const Jj=Je?256:2048,e$=512,t$=1024,n$=Je?2048:256;class jt{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=Qj(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Jj),this.altKey&&(t|=e$),this.shiftKey&&(t|=t$),this.metaKey&&(t|=n$),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new uu(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let QM=!1,ip=null;function i$(r){if(!r.parent||r.parent===r)return null;try{const e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return QM=!0,null}catch{return QM=!0,null}return r.parent}class s${static getSameOriginWindowChain(){if(!ip){ip=[];let e=window,t;do t=i$(e),t?ip.push({window:e,iframeElement:e.frameElement||null}):ip.push({window:e,iframeElement:null}),e=t;while(e)}return ip.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const s=this.getSameOriginWindowChain();for(const o of s){if(n+=o.window.scrollY,i+=o.window.scrollX,o.window===t||!o.iframeElement)break;const a=o.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}class aa{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const t=s$.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Wf{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){const i=e,s=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Ys&&!Je?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")Il&&hi?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Ys&&!Je?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function r$(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var o$=Object.hasOwnProperty,JM=Object.setPrototypeOf,a$=Object.isFrozen,l$=Object.getPrototypeOf,c$=Object.getOwnPropertyDescriptor,As=Object.freeze,Ml=Object.seal,d$=Object.create,e5=typeof Reflect<"u"&&Reflect,rC=e5.apply,bL=e5.construct;rC||(rC=function(e,t,n){return e.apply(t,n)});As||(As=function(e){return e});Ml||(Ml=function(e){return e});bL||(bL=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(r$(t))))});var u$=Lo(Array.prototype.forEach),eR=Lo(Array.prototype.pop),sp=Lo(Array.prototype.push),yd=Lo(String.prototype.toLowerCase),tR=Lo(String.prototype.match),zl=Lo(String.prototype.replace),h$=Lo(String.prototype.indexOf),f$=Lo(String.prototype.trim),Fa=Lo(RegExp.prototype.test),nR=g$(TypeError);function Lo(r){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return rC(r,e,n)}}function g$(r){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return bL(r,t)}}function xt(r,e){JM&&JM(r,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var i=yd(n);i!==n&&(a$(e)||(e[t]=i),n=i)}r[n]=!0}return r}function gd(r){var e=d$(null),t=void 0;for(t in r)rC(o$,r,[t])&&(e[t]=r[t]);return e}function Zb(r,e){for(;r!==null;){var t=c$(r,e);if(t){if(t.get)return Lo(t.get);if(typeof t.value=="function")return Lo(t.value)}r=l$(r)}function n(i){return console.warn("fallback value for",i),null}return n}var iR=As(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cS=As(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dS=As(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),p$=As(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),uS=As(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),m$=As(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sR=As(["#text"]),rR=As(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hS=As(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oR=As(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yb=As(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_$=Ml(/\{\{[\s\S]*|[\s\S]*\}\}/gm),b$=Ml(/<%[\s\S]*|[\s\S]*%>/gm),v$=Ml(/^data-[\-\w.\u00B7-\uFFFF]/),C$=Ml(/^aria-[\-\w]+$/),y$=Ml(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),w$=Ml(/^(?:\w+script|data):/i),S$=Ml(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function Vo(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var x$=function(){return typeof window>"u"?null:window},k$=function(e,t){if((typeof e>"u"?"undefined":Dp(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function t5(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x$(),e=function(G){return t5(G)};if(e.version="2.3.1",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;var t=r.document,n=r.document,i=r.DocumentFragment,s=r.HTMLTemplateElement,o=r.Node,a=r.Element,l=r.NodeFilter,c=r.NamedNodeMap,d=c===void 0?r.NamedNodeMap||r.MozNamedAttrMap:c,u=r.Text,h=r.Comment,f=r.DOMParser,g=r.trustedTypes,_=a.prototype,b=Zb(_,"cloneNode"),v=Zb(_,"nextSibling"),C=Zb(_,"childNodes"),y=Zb(_,"parentNode");if(typeof s=="function"){var w=n.createElement("template");w.content&&w.content.ownerDocument&&(n=w.content.ownerDocument)}var L=k$(g,t),T=L&&ms?L.createHTML(""):"",S=n,k=S.implementation,D=S.createNodeIterator,O=S.createDocumentFragment,F=S.getElementsByTagName,U=t.importNode,K={};try{K=gd(n).documentMode?n.documentMode:{}}catch{}var ae={};e.isSupported=typeof y=="function"&&k&&typeof k.createHTMLDocument<"u"&&K!==9;var fe=_$,we=b$,xe=v$,De=C$,Oe=w$,nt=S$,Te=y$,ce=null,oe=xt({},[].concat(Vo(iR),Vo(cS),Vo(dS),Vo(uS),Vo(sR))),re=null,pe=xt({},[].concat(Vo(rR),Vo(hS),Vo(oR),Vo(Yb))),it=null,Mt=null,cn=!0,gi=!0,Ii=!1,Ne=!1,Vi=!1,Ra=!1,Bo=!1,jn=!1,Oa=!1,ud=!0,ms=!1,hd=!0,Y=!0,$=!1,z={},E=null,N=xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),V=null,P=xt({},["audio","video","img","source","image","track"]),X=null,se=xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ee="http://www.w3.org/1998/Math/MathML",ke="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml",Ue=$e,St=!1,gt=null,Ie=n.createElement("form"),bn=function(G){gt&&gt===G||((!G||(typeof G>"u"?"undefined":Dp(G))!=="object")&&(G={}),G=gd(G),ce="ALLOWED_TAGS"in G?xt({},G.ALLOWED_TAGS):oe,re="ALLOWED_ATTR"in G?xt({},G.ALLOWED_ATTR):pe,X="ADD_URI_SAFE_ATTR"in G?xt(gd(se),G.ADD_URI_SAFE_ATTR):se,V="ADD_DATA_URI_TAGS"in G?xt(gd(P),G.ADD_DATA_URI_TAGS):P,E="FORBID_CONTENTS"in G?xt({},G.FORBID_CONTENTS):N,it="FORBID_TAGS"in G?xt({},G.FORBID_TAGS):{},Mt="FORBID_ATTR"in G?xt({},G.FORBID_ATTR):{},z="USE_PROFILES"in G?G.USE_PROFILES:!1,cn=G.ALLOW_ARIA_ATTR!==!1,gi=G.ALLOW_DATA_ATTR!==!1,Ii=G.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=G.SAFE_FOR_TEMPLATES||!1,Vi=G.WHOLE_DOCUMENT||!1,jn=G.RETURN_DOM||!1,Oa=G.RETURN_DOM_FRAGMENT||!1,ud=G.RETURN_DOM_IMPORT!==!1,ms=G.RETURN_TRUSTED_TYPE||!1,Bo=G.FORCE_BODY||!1,hd=G.SANITIZE_DOM!==!1,Y=G.KEEP_CONTENT!==!1,$=G.IN_PLACE||!1,Te=G.ALLOWED_URI_REGEXP||Te,Ue=G.NAMESPACE||$e,Ne&&(gi=!1),Oa&&(jn=!0),z&&(ce=xt({},[].concat(Vo(sR))),re=[],z.html===!0&&(xt(ce,iR),xt(re,rR)),z.svg===!0&&(xt(ce,cS),xt(re,hS),xt(re,Yb)),z.svgFilters===!0&&(xt(ce,dS),xt(re,hS),xt(re,Yb)),z.mathMl===!0&&(xt(ce,uS),xt(re,oR),xt(re,Yb))),G.ADD_TAGS&&(ce===oe&&(ce=gd(ce)),xt(ce,G.ADD_TAGS)),G.ADD_ATTR&&(re===pe&&(re=gd(re)),xt(re,G.ADD_ATTR)),G.ADD_URI_SAFE_ATTR&&xt(X,G.ADD_URI_SAFE_ATTR),G.FORBID_CONTENTS&&(E===N&&(E=gd(E)),xt(E,G.FORBID_CONTENTS)),Y&&(ce["#text"]=!0),Vi&&xt(ce,["html","head","body"]),ce.table&&(xt(ce,["tbody"]),delete it.tbody),As&&As(G),gt=G)},qt=xt({},["mi","mo","mn","ms","mtext"]),_s=xt({},["foreignobject","desc","title","annotation-xml"]),Rt=xt({},cS);xt(Rt,dS),xt(Rt,p$);var kn=xt({},uS);xt(kn,m$);var de=function(G){var ye=y(G);(!ye||!ye.tagName)&&(ye={namespaceURI:$e,tagName:"template"});var Fe=yd(G.tagName),sn=yd(ye.tagName);if(G.namespaceURI===ke)return ye.namespaceURI===$e?Fe==="svg":ye.namespaceURI===Ee?Fe==="svg"&&(sn==="annotation-xml"||qt[sn]):Boolean(Rt[Fe]);if(G.namespaceURI===Ee)return ye.namespaceURI===$e?Fe==="math":ye.namespaceURI===ke?Fe==="math"&&_s[sn]:Boolean(kn[Fe]);if(G.namespaceURI===$e){if(ye.namespaceURI===ke&&!_s[sn]||ye.namespaceURI===Ee&&!qt[sn])return!1;var Xi=xt({},["title","style","font","a","script"]);return!kn[Fe]&&(Xi[Fe]||!Rt[Fe])}return!1},_e=function(G){sp(e.removed,{element:G});try{G.parentNode.removeChild(G)}catch{try{G.outerHTML=T}catch{G.remove()}}},Pe=function(G,ye){try{sp(e.removed,{attribute:ye.getAttributeNode(G),from:ye})}catch{sp(e.removed,{attribute:null,from:ye})}if(ye.removeAttribute(G),G==="is"&&!re[G])if(jn||Oa)try{_e(ye)}catch{}else try{ye.setAttribute(G,"")}catch{}},nn=function(G){var ye=void 0,Fe=void 0;if(Bo)G="<remove></remove>"+G;else{var sn=tR(G,/^[\r\n\t ]+/);Fe=sn&&sn[0]}var Xi=L?L.createHTML(G):G;if(Ue===$e)try{ye=new f().parseFromString(Xi,"text/html")}catch{}if(!ye||!ye.documentElement){ye=k.createDocument(Ue,"template",null);try{ye.documentElement.innerHTML=St?"":Xi}catch{}}var Qi=ye.body||ye.documentElement;return G&&Fe&&Qi.insertBefore(n.createTextNode(Fe),Qi.childNodes[0]||null),Ue===$e?F.call(ye,Vi?"html":"body")[0]:Vi?ye.documentElement:Qi},Ln=function(G){return D.call(G.ownerDocument||G,G,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},yt=function(G){return G instanceof u||G instanceof h?!1:typeof G.nodeName!="string"||typeof G.textContent!="string"||typeof G.removeChild!="function"||!(G.attributes instanceof d)||typeof G.removeAttribute!="function"||typeof G.setAttribute!="function"||typeof G.namespaceURI!="string"||typeof G.insertBefore!="function"},vt=function(G){return(typeof o>"u"?"undefined":Dp(o))==="object"?G instanceof o:G&&(typeof G>"u"?"undefined":Dp(G))==="object"&&typeof G.nodeType=="number"&&typeof G.nodeName=="string"},ot=function(G,ye,Fe){ae[G]&&u$(ae[G],function(sn){sn.call(e,ye,Fe,gt)})},ei=function(G){var ye=void 0;if(ot("beforeSanitizeElements",G,null),yt(G)||tR(G.nodeName,/[\u0080-\uFFFF]/))return _e(G),!0;var Fe=yd(G.nodeName);if(ot("uponSanitizeElement",G,{tagName:Fe,allowedTags:ce}),!vt(G.firstElementChild)&&(!vt(G.content)||!vt(G.content.firstElementChild))&&Fa(/<[/\w]/g,G.innerHTML)&&Fa(/<[/\w]/g,G.textContent)||Fe==="select"&&Fa(/<template/i,G.innerHTML))return _e(G),!0;if(!ce[Fe]||it[Fe]){if(Y&&!E[Fe]){var sn=y(G)||G.parentNode,Xi=C(G)||G.childNodes;if(Xi&&sn)for(var Qi=Xi.length,Ji=Qi-1;Ji>=0;--Ji)sn.insertBefore(b(Xi[Ji],!0),v(G))}return _e(G),!0}return G instanceof a&&!de(G)||(Fe==="noscript"||Fe==="noembed")&&Fa(/<\/no(script|embed)/i,G.innerHTML)?(_e(G),!0):(Ne&&G.nodeType===3&&(ye=G.textContent,ye=zl(ye,fe," "),ye=zl(ye,we," "),G.textContent!==ye&&(sp(e.removed,{element:G.cloneNode()}),G.textContent=ye)),ot("afterSanitizeElements",G,null),!1)},Hi=function(G,ye,Fe){if(hd&&(ye==="id"||ye==="name")&&(Fe in n||Fe in Ie))return!1;if(!(gi&&!Mt[ye]&&Fa(xe,ye))){if(!(cn&&Fa(De,ye))){if(!re[ye]||Mt[ye])return!1;if(!X[ye]){if(!Fa(Te,zl(Fe,nt,""))){if(!((ye==="src"||ye==="xlink:href"||ye==="href")&&G!=="script"&&h$(Fe,"data:")===0&&V[G])){if(!(Ii&&!Fa(Oe,zl(Fe,nt,"")))){if(Fe)return!1}}}}}}return!0},Nr=function(G){var ye=void 0,Fe=void 0,sn=void 0,Xi=void 0;ot("beforeSanitizeAttributes",G,null);var Qi=G.attributes;if(Qi){var Ji={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re};for(Xi=Qi.length;Xi--;){ye=Qi[Xi];var Pa=ye,Yg=Pa.name,eM=Pa.namespaceURI;if(Fe=f$(ye.value),sn=yd(Yg),Ji.attrName=sn,Ji.attrValue=Fe,Ji.keepAttr=!0,Ji.forceKeepAttr=void 0,ot("uponSanitizeAttribute",G,Ji),Fe=Ji.attrValue,!Ji.forceKeepAttr&&(Pe(Yg,G),!!Ji.keepAttr)){if(Fa(/\/>/i,Fe)){Pe(Yg,G);continue}Ne&&(Fe=zl(Fe,fe," "),Fe=zl(Fe,we," "));var $W=G.nodeName.toLowerCase();if(Hi($W,sn,Fe))try{eM?G.setAttributeNS(eM,Yg,Fe):G.setAttribute(Yg,Fe),eR(e.removed)}catch{}}}ot("afterSanitizeAttributes",G,null)}},Vb=function ze(G){var ye=void 0,Fe=Ln(G);for(ot("beforeSanitizeShadowDOM",G,null);ye=Fe.nextNode();)ot("uponSanitizeShadowNode",ye,null),!ei(ye)&&(ye.content instanceof i&&ze(ye.content),Nr(ye));ot("afterSanitizeShadowDOM",G,null)};return e.sanitize=function(ze,G){var ye=void 0,Fe=void 0,sn=void 0,Xi=void 0,Qi=void 0;if(St=!ze,St&&(ze="<!-->"),typeof ze!="string"&&!vt(ze)){if(typeof ze.toString!="function")throw nR("toString is not a function");if(ze=ze.toString(),typeof ze!="string")throw nR("dirty is not a string, aborting")}if(!e.isSupported){if(Dp(r.toStaticHTML)==="object"||typeof r.toStaticHTML=="function"){if(typeof ze=="string")return r.toStaticHTML(ze);if(vt(ze))return r.toStaticHTML(ze.outerHTML)}return ze}if(Ra||bn(G),e.removed=[],typeof ze=="string"&&($=!1),!$)if(ze instanceof o)ye=nn("<!---->"),Fe=ye.ownerDocument.importNode(ze,!0),Fe.nodeType===1&&Fe.nodeName==="BODY"||Fe.nodeName==="HTML"?ye=Fe:ye.appendChild(Fe);else{if(!jn&&!Ne&&!Vi&&ze.indexOf("<")===-1)return L&&ms?L.createHTML(ze):ze;if(ye=nn(ze),!ye)return jn?null:T}ye&&Bo&&_e(ye.firstChild);for(var Ji=Ln($?ze:ye);sn=Ji.nextNode();)sn.nodeType===3&&sn===Xi||ei(sn)||(sn.content instanceof i&&Vb(sn.content),Nr(sn),Xi=sn);if(Xi=null,$)return ze;if(jn){if(Oa)for(Qi=O.call(ye.ownerDocument);ye.firstChild;)Qi.appendChild(ye.firstChild);else Qi=ye;return ud&&(Qi=U.call(t,Qi,!0)),Qi}var Pa=Vi?ye.outerHTML:ye.innerHTML;return Ne&&(Pa=zl(Pa,fe," "),Pa=zl(Pa,we," ")),L&&ms?L.createHTML(Pa):Pa},e.setConfig=function(ze){bn(ze),Ra=!0},e.clearConfig=function(){gt=null,Ra=!1},e.isValidAttribute=function(ze,G,ye){gt||bn({});var Fe=yd(ze),sn=yd(G);return Hi(Fe,sn,ye)},e.addHook=function(ze,G){typeof G=="function"&&(ae[ze]=ae[ze]||[],sp(ae[ze],G))},e.removeHook=function(ze){ae[ze]&&eR(ae[ze])},e.removeHooks=function(ze){ae[ze]&&(ae[ze]=[])},e.removeAllHooks=function(){ae={}},e}var Ea=t5();Ea.version;Ea.isSupported;const L$=Ea.sanitize;Ea.setConfig;Ea.clearConfig;Ea.isValidAttribute;const n5=Ea.addHook,i5=Ea.removeHook;Ea.removeHooks;Ea.removeAllHooks;var He;(function(r){r.inMemory="inmemory",r.vscode="vscode",r.internal="private",r.walkThrough="walkThrough",r.walkThroughSnippet="walkThroughSnippet",r.http="http",r.https="https",r.file="file",r.mailto="mailto",r.untitled="untitled",r.data="data",r.command="command",r.vscodeRemote="vscode-remote",r.vscodeRemoteResource="vscode-remote-resource",r.vscodeUserData="vscode-userdata",r.vscodeCustomEditor="vscode-custom-editor",r.vscodeNotebook="vscode-notebook",r.vscodeNotebookCell="vscode-notebook-cell",r.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",r.vscodeNotebookCellOutput="vscode-notebook-cell-output",r.vscodeInteractive="vscode-interactive",r.vscodeInteractiveInput="vscode-interactive-input",r.vscodeSettings="vscode-settings",r.vscodeWorkspaceTrust="vscode-workspace-trust",r.vscodeTerminal="vscode-terminal",r.webviewPanel="webview-panel",r.vscodeWebview="vscode-webview",r.extension="extension",r.vscodeFileResource="vscode-file",r.tmp="tmp",r.vsls="vsls",r.vscodeSourceControl="vscode-scm"})(He||(He={}));const T$="tkn";class D${constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${He.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const i=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&${T$}=${encodeURIComponent(s)}`),Se.from({scheme:Jc?this._preferredWebSchema:He.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:o})}}const s5=new D$;class Wm{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===He.vscodeRemote?s5.rewrite(n):n.scheme===He.file&&(vo||x6&&mn.origin===`${He.vscodeFileResource}://${Wm.FALLBACK_AUTHORITY}`)?n.with({scheme:He.vscodeFileResource,authority:n.authority||Wm.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return Se.isUri(e)?e:Se.parse(t.toUrl(e))}}Wm.FALLBACK_AUTHORITY="vscode-app";const r5=new Wm;function Fn(r){for(;r.firstChild;)r.firstChild.remove()}function pA(r){var e;return(e=r?.isConnected)!==null&&e!==void 0?e:!1}class o5{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Z(r,e,t,n){return new o5(r,e,t,n)}function a5(r){return function(e){return r(new aa(e))}}function E$(r){return function(e){return r(new jt(e))}}const Hn=function(e,t,n,i){let s=n;return t==="click"||t==="mousedown"?s=a5(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=E$(n)),Z(e,t,s,i)},A$=function(e,t,n){const i=a5(t);return I$(e,i,n)};function I$(r,e,t){return Z(r,_a&&gA.pointerEvents?he.POINTER_DOWN:he.MOUSE_DOWN,e,t)}function Jr(r,e,t){let n=null;const i=l=>a.fire(l),s=()=>{n||(n=new o5(r,e,i,t))},o=()=>{n&&(n.dispose(),n=null)},a=new R({onFirstListenerAdd:s,onLastListenerRemove:o});return a}let fS=null;function N$(r){if(!fS){const e=t=>setTimeout(()=>t(new Date().getTime()),0);fS=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return fS.call(self,r)}let l5,To;class gS{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){We(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let r=[],e=null,t=!1,n=!1;const i=()=>{for(t=!1,e=r,r=[],n=!0;e.length>0;)e.sort(gS.sort),e.shift().execute();n=!1};To=(s,o=0)=>{const a=new gS(s,o);return r.push(a),t||(t=!0,N$(i)),a},l5=(s,o)=>{if(n){const a=new gS(s,o);return e.push(a),a}else return To(s,o)}})();function Xy(r){return document.defaultView.getComputedStyle(r,null)}function Qy(r){if(r!==document.body)return new At(r.clientWidth,r.clientHeight);if(_a&&window.visualViewport)return new At(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new At(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new At(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new At(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class on{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const i=Xy(e);let s="0";return i&&(i.getPropertyValue?s=i.getPropertyValue(t):s=i.getAttribute(n)),on.convertToPixels(e,s)}static getBorderLeftWidth(e){return on.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return on.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return on.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return on.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return on.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return on.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return on.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return on.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return on.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return on.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return on.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return on.getDimension(e,"margin-bottom","marginBottom")}}class At{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new At(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof At?e:new At(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}At.None=new At(0,0);function c5(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==document.body&&r!==document.documentElement;){t-=r.scrollTop;const i=u5(r)?null:Xy(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=on.getBorderLeftWidth(r),t+=on.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function M$(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function wi(r){const e=r.getBoundingClientRect();return{left:e.left+xl.scrollX,top:e.top+xl.scrollY,width:e.width,height:e.height}}function R$(r){let e=r,t=1;do{const n=Xy(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}const xl=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Pr(r){const e=on.getMarginLeft(r)+on.getMarginRight(r);return r.offsetWidth+e}function pS(r){const e=on.getBorderLeftWidth(r)+on.getBorderRightWidth(r),t=on.getPaddingLeft(r)+on.getPaddingRight(r);return r.offsetWidth-e-t}function O$(r){const e=on.getBorderTopWidth(r)+on.getBorderBottomWidth(r),t=on.getPaddingTop(r)+on.getPaddingBottom(r);return r.offsetHeight-e-t}function vL(r){const e=on.getMarginTop(r)+on.getMarginBottom(r);return r.offsetHeight+e}function kl(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function d5(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function mS(r,e,t){return!!d5(r,e,t)}function u5(r){return r&&!!r.host&&!!r.mode}function Vm(r){return!!hu(r)}function hu(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return u5(r)?r:null}function gf(){let r=document.activeElement;for(;r?.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Sr(r=document.getElementsByTagName("head")[0]){const e=document.createElement("style");return e.type="text/css",e.media="screen",r.appendChild(e),e}let _S=null;function h5(){return _S||(_S=Sr()),_S}function P$(r){var e,t;return!((e=r?.sheet)===null||e===void 0)&&e.rules?r.sheet.rules:!((t=r?.sheet)===null||t===void 0)&&t.cssRules?r.sheet.cssRules:[]}function CL(r,e,t=h5()){!t||!e||t.sheet.insertRule(r+"{"+e+"}",0)}function aR(r,e=h5()){if(!e)return;const t=P$(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(r)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}function f5(r){return typeof HTMLElement=="object"?r instanceof HTMLElement:r&&typeof r=="object"&&r.nodeType===1&&typeof r.nodeName=="string"}const he={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:vc?"webkitAnimationStart":"animationstart",ANIMATION_END:vc?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:vc?"webkitAnimationIteration":"animationiteration"},wt={stop:function(r,e){r.preventDefault?r.preventDefault():r.returnValue=!1,e&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)}};function F$(r){const e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function B$(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}class oC extends j{constructor(e){super(),this._onDidFocus=this._register(new R),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event;let t=oC.hasFocusWithin(e),n=!1;const i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{oC.hasFocusWithin(e)!==t&&(t?s():i())},this._register(Z(e,he.FOCUS,i,!0)),this._register(Z(e,he.BLUR,s,!0)),this._register(Z(e,he.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Z(e,he.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=hu(e),n=t?t.activeElement:document.activeElement;return kl(n,e)}}function fu(r){return new oC(r)}function q(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function W$(r,e){return r.insertBefore(e,r.firstChild),e}function Oc(r,...e){r.innerText="",q(r,...e)}const V$=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Hm;(function(r){r.HTML="http://www.w3.org/1999/xhtml",r.SVG="http://www.w3.org/2000/svg"})(Hm||(Hm={}));function g5(r,e,t,...n){const i=V$.exec(e);if(!i)throw new Error("Bad use of emmet");t=Object.assign({},t||{});const s=i[1]||"div";let o;return r!==Hm.HTML?o=document.createElementNS(r,s):o=document.createElement(s),i[3]&&(o.id=i[3]),i[4]&&(o.className=i[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function ee(r,e,...t){return g5(Hm.HTML,r,e,...t)}ee.SVG=function(r,e,...t){return g5(Hm.SVG,r,e,...t)};function $s(...r){for(const e of r)e.style.display="",e.removeAttribute("aria-hidden")}function ss(...r){for(const e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function H$(r){return Array.prototype.slice.call(document.getElementsByTagName(r),0)}function lR(r){const e=window.devicePixelRatio*r;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function p5(r){window.open(r,"_blank","noopener")}function U$(r){const e=()=>{r(),t=To(e)};let t=To(e);return Ke(()=>t.dispose())}s5.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function gu(r){return r?`url('${r5.asBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function cR(r){return`'${r.replace(/'/g,"%27")}'`}function j$(r,e=!1){const t=document.createElement("a");return n5("afterSanitizeAttributes",n=>{for(const i of["href","src"])if(n.hasAttribute(i)){const s=n.getAttribute(i);if(i==="href"&&s.startsWith("#"))continue;if(t.href=s,!r.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),Ke(()=>{i5("afterSanitizeAttributes")})}class uc extends R{constructor(){super(),this._subscriptions=new Q,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Z(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new jt(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(Z(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(Z(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Z(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Z(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(Z(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return uc.instance||(uc.instance=new uc),uc.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class $$ extends j{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(Z(this.element,he.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(Z(this.element,he.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)===null||n===void 0||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(Z(this.element,he.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(Z(this.element,he.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(Z(this.element,he.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}const dR=2e4;let Ld,h0,yL,f0,wL;function z$(r){Ld=document.createElement("div"),Ld.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Ld.appendChild(n),n};h0=e(),yL=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Ld.appendChild(n),n};f0=t(),wL=t(),r.appendChild(Ld)}function di(r){Ld&&(h0.textContent!==r?(Fn(yL),lC(h0,r)):(Fn(h0),lC(yL,r)))}function aC(r){Ld&&(Je?di(r):f0.textContent!==r?(Fn(wL),lC(f0,r)):(Fn(f0),lC(wL,r)))}function lC(r,e){Fn(r),e.length>dR&&(e=e.substr(0,dR)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}const mA=tt("markerDecorationsService"),ps=tt("textModelService");var Um=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Ds extends j{constructor(e,t="",n="",i=!0,s){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return Um(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class Vf extends j{constructor(){super(...arguments),this._onBeforeRun=this._register(new R),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new R),this.onDidRun=this._onDidRun.event}run(e,t){return Um(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return Um(this,void 0,void 0,function*(){yield e.run(t)})}}class ki extends Ds{constructor(e){super(ki.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}ki.ID="vs.actions.separator";class jm{constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}get actions(){return this._actions}dispose(){}run(){return Um(this,void 0,void 0,function*(){})}}class Jy extends Ds{constructor(){super(Jy.ID,p("submenu.empty","(empty)"),void 0,!1)}}Jy.ID="vs.actions.empty";function uR(r){var e,t;return{id:r.id,label:r.label,class:void 0,enabled:(e=r.enabled)!==null&&e!==void 0?e:!0,checked:(t=r.checked)!==null&&t!==void 0?t:!1,run:()=>Um(this,void 0,void 0,function*(){return r.run()}),tooltip:r.label,dispose:()=>{}}}const Sn=tt("commandService"),rt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new R,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.description){const o=[];for(const l of r.description.args)o.push(l.constraint);const a=r.handler;r.handler=function(l,...c){return H6(c,o),a(l,...c)}}const{id:t}=r;let n=this._commands.get(t);n||(n=new qi,this._commands.set(t,n));const i=n.unshift(r),s=Ke(()=>{i();const o=this._commands.get(t);o?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(r,e){return rt.registerCommand(r,(t,...n)=>t.get(Sn).executeCommand(e,...n))}getCommand(r){const e=this._commands.get(r);if(!(!e||e.isEmpty()))return Ye.first(e)}getCommands(){const r=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&r.set(e,t)}return r}};rt.registerCommand("noop",()=>{});const Di=new Map;Di.set("false",!1);Di.set("true",!0);Di.set("isMac",Je);Di.set("isLinux",Ti);Di.set("isWindows",hi);Di.set("isWeb",Jc);Di.set("isMacNative",Je&&!Jc);Di.set("isEdge",E6);Di.set("isFirefox",T6);Di.set("isChrome",WF);Di.set("isSafari",D6);const K$=Object.prototype.hasOwnProperty;class le{static has(e){return Pc.create(e)}static equals(e,t){return Hf.create(e,t)}static regex(e,t){return cC.create(e,t)}static not(e){return pu.create(e)}static and(...e){return hc.create(e,null)}static or(...e){return fl.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){const n=e.split("||");return fl.create(n.map(i=>this._deserializeAndExpression(i,t)),null,!0)}static _deserializeAndExpression(e,t){const n=e.split("&&");return hc.create(n.map(i=>this._deserializeOne(i,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){const n=e.split("!=");return n1.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){const n=e.split("==");return Hf.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){const n=e.split("=~");return cC.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" not in ")>=0){const n=e.split(" not in ");return t1.create(n[0].trim(),n[1].trim())}if(e.indexOf(" in ")>=0){const n=e.split(" in ");return e1.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return r1.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return s1.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return a1.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return o1.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?pu.create(e.substr(1).trim()):Pc.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;const n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(p4(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const n=e.indexOf("/"),i=e.lastIndexOf("/");if(n===i||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}const s=e.slice(n+1,i),o=e[i+1]==="i"?"i":"";try{return new RegExp(s,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function G$(r,e){const t=r?r.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function pf(r,e){return r.cmp(e)}class Qs{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return xr.INSTANCE}}Qs.INSTANCE=new Qs;class xr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Qs.INSTANCE}}xr.INSTANCE=new xr;class Pc{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=Di.get(e);return typeof n=="boolean"?n?xr.INSTANCE:Qs.INSTANCE:new Pc(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:_5(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Di.get(this.key);return typeof e=="boolean"?e?xr.INSTANCE:Qs.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=pu.create(this.key,this)),this.negated}}class Hf{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?Pc.create(e,n):pu.create(e,n);const i=Di.get(e);return typeof i=="boolean"?t===(i?"true":"false")?xr.INSTANCE:Qs.INSTANCE:new Hf(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Di.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?xr.INSTANCE:Qs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=n1.create(this.key,this.value,this)),this.negated}}class e1{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new e1(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?K$.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=t1.create(this.key,this.valueKey)),this.negated}}class t1{constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=e1.create(e,t)}static create(e,t){return new t1(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class n1{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?pu.create(e,n):Pc.create(e,n);const i=Di.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Qs.INSTANCE:xr.INSTANCE:new n1(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Di.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Qs.INSTANCE:xr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Hf.create(this.key,this.value,this)),this.negated}}class pu{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=Di.get(e);return typeof n=="boolean"?n?Qs.INSTANCE:xr.INSTANCE:new pu(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:_5(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Di.get(this.key);return typeof e=="boolean"?e?Qs.INSTANCE:xr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Pc.create(this.key,this)),this.negated}}function i1(r,e){if(typeof r=="string"){const t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):Qs.INSTANCE}class s1{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return i1(t,i=>new s1(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=a1.create(this.key,this.value,this)),this.negated}}class r1{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return i1(t,i=>new r1(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=o1.create(this.key,this.value,this)),this.negated}}class o1{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return i1(t,i=>new o1(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=r1.create(this.key,this.value,this)),this.negated}}class a1{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return i1(t,i=>new a1(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Gu(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=s1.create(this.key,this.value,this)),this.negated}}class cC{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new cC(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_A.create(this)),this.negated}}class _A{constructor(e){this._actual=e,this.type=8}static create(e){return new _A(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function m5(r){let e=null;for(let t=0,n=r.length;t<n;t++){const i=r[t].substituteConstants();if(r[t]!==i&&e===null){e=[];for(let s=0;s<t;s++)e[s]=r[s]}e!==null&&(e[t]=i)}return e===null?r:e}class hc{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return hc._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=pf(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=m5(this.expr);return e===this.expr?this:hc.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let i=!1;for(const s of e)if(s){if(s.type===1){i=!0;continue}if(s.type===0)return Qs.INSTANCE;if(s.type===6){n.push(...s.expr);continue}n.push(s)}if(n.length===0&&i)return xr.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(pf);for(let s=1;s<n.length;s++)n[s-1].equals(n[s])&&(n.splice(s,1),s--);if(n.length===1)return n[0];for(;n.length>1;){const s=n[n.length-1];if(s.type!==9)break;n.pop();const o=n.pop(),a=n.length===0,l=fl.create(s.expr.map(c=>hc.create([c,o],null)),null,a);l&&(n.push(l),n.sort(pf))}return n.length===1?n[0]:new hc(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=fl.create(e,this,!0)}return this.negated}}class fl{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return fl._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=pf(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=m5(this.expr);return e===this.expr?this:fl.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return xr.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&s)return Qs.INSTANCE;i.sort(pf)}if(i.length!==0){if(i.length===1)return i[0];for(let o=1;o<i.length;o++)i[o-1].equals(i[o])&&(i.splice(o,1),o--);if(i.length===1)return i[0];if(n){for(let o=0;o<i.length;o++)for(let a=o+1;a<i.length;a++)b5(i[o],i[a])&&(i.splice(a,1),a--);if(i.length===1)return i[0]}return new fl(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const o of dC(t))for(const a of dC(n))i.push(hc.create([o,a],null));const s=e.length===0;e.unshift(fl.create(i,null,s))}this.negated=e[0]}return this.negated}}class ge extends Pc{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?ge._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&ge._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return ge._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Hf.create(this.key,e)}}ge._info=[];const Re=tt("contextKeyService"),q$="setContext";function _5(r,e){return r<e?-1:r>e?1:0}function Gu(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}function b5(r,e){if(e.type===6&&r.type!==9&&r.type!==6){for(const i of e.expr)if(r.equals(i))return!0}const t=r.negate(),n=dC(t).concat(dC(e));n.sort(pf);for(let i=0;i<n.length;i++){const o=n[i].negate();for(let a=i+1;a<n.length;a++){const l=n[a];if(o.equals(l))return!0}}return!1}function dC(r){return r.type===9?r.expr:[r]}var fr;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST_DARK="hcDark",r.HIGH_CONTRAST_LIGHT="hcLight"})(fr||(fr={}));function Li(r){return r===fr.HIGH_CONTRAST_DARK||r===fr.HIGH_CONTRAST_LIGHT}function $m(r){return r===fr.DARK||r===fr.HIGH_CONTRAST_DARK}const It=tt("themeService");var SL;(function(r){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}r.isThemeColor=e})(SL||(SL={}));function an(r){return{id:r}}var mt;(function(r){function e(c){return c&&typeof c=="object"&&typeof c.id=="string"&&(typeof c.color>"u"||SL.isThemeColor(c.color))}r.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Gi.iconNameExpression}(?:${Gi.iconModifierExpression})?)\\)$`);function n(c){const d=t.exec(c);if(!d)return;const[,u]=d;return{id:u}}r.fromString=n;function i(c){return{id:c}}r.fromId=i;function s(c,d){let u=c.id;const h=u.lastIndexOf("~");return h!==-1&&(u=u.substring(0,h)),d&&(u=`${u}~${d}`),{id:u}}r.modify=s;function o(c){const d=c.id.lastIndexOf("~");if(d!==-1)return c.id.substring(d+1)}r.getModifier=o;function a(c,d){var u,h;return c.id===d.id&&((u=c.color)===null||u===void 0?void 0:u.id)===((h=d.color)===null||h===void 0?void 0:h.id)}r.isEqual=a;function l(c,d){return{id:c.id,color:d?an(d):void 0}}r.asThemeIcon=l,r.asClassNameArray=Gi.asClassNameArray,r.asClassName=Gi.asClassName,r.asCSSSelector=Gi.asCSSSelector})(mt||(mt={}));function uC(r){switch(r){case fr.DARK:return"vs-dark";case fr.HIGH_CONTRAST_DARK:return"hc-black";case fr.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const v5={ThemingContribution:"base.contributions.theming"};class Z${constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new R}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Ke(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const C5=new Z$;Jt.add(v5.ThemingContribution,C5);function Vt(r){return C5.onColorThemeChange(r)}class Y$ extends j{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var X$=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hR=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function zh(r){return r.command!==void 0}class M{constructor(e){if(M._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);M._instances.set(e,this),this.id=e}}M._instances=new Map;M.CommandPalette=new M("CommandPalette");M.DebugBreakpointsContext=new M("DebugBreakpointsContext");M.DebugCallStackContext=new M("DebugCallStackContext");M.DebugConsoleContext=new M("DebugConsoleContext");M.DebugVariablesContext=new M("DebugVariablesContext");M.DebugWatchContext=new M("DebugWatchContext");M.DebugToolBar=new M("DebugToolBar");M.DebugToolBarStop=new M("DebugToolBarStop");M.EditorContext=new M("EditorContext");M.SimpleEditorContext=new M("SimpleEditorContext");M.EditorContextCopy=new M("EditorContextCopy");M.EditorContextPeek=new M("EditorContextPeek");M.EditorContextShare=new M("EditorContextShare");M.EditorTitle=new M("EditorTitle");M.EditorTitleRun=new M("EditorTitleRun");M.EditorTitleContext=new M("EditorTitleContext");M.EmptyEditorGroup=new M("EmptyEditorGroup");M.EmptyEditorGroupContext=new M("EmptyEditorGroupContext");M.ExplorerContext=new M("ExplorerContext");M.ExtensionContext=new M("ExtensionContext");M.GlobalActivity=new M("GlobalActivity");M.CommandCenter=new M("CommandCenter");M.LayoutControlMenuSubmenu=new M("LayoutControlMenuSubmenu");M.LayoutControlMenu=new M("LayoutControlMenu");M.MenubarMainMenu=new M("MenubarMainMenu");M.MenubarAppearanceMenu=new M("MenubarAppearanceMenu");M.MenubarDebugMenu=new M("MenubarDebugMenu");M.MenubarEditMenu=new M("MenubarEditMenu");M.MenubarCopy=new M("MenubarCopy");M.MenubarFileMenu=new M("MenubarFileMenu");M.MenubarGoMenu=new M("MenubarGoMenu");M.MenubarHelpMenu=new M("MenubarHelpMenu");M.MenubarLayoutMenu=new M("MenubarLayoutMenu");M.MenubarNewBreakpointMenu=new M("MenubarNewBreakpointMenu");M.MenubarPanelAlignmentMenu=new M("MenubarPanelAlignmentMenu");M.MenubarPanelPositionMenu=new M("MenubarPanelPositionMenu");M.MenubarPreferencesMenu=new M("MenubarPreferencesMenu");M.MenubarRecentMenu=new M("MenubarRecentMenu");M.MenubarSelectionMenu=new M("MenubarSelectionMenu");M.MenubarShare=new M("MenubarShare");M.MenubarSwitchEditorMenu=new M("MenubarSwitchEditorMenu");M.MenubarSwitchGroupMenu=new M("MenubarSwitchGroupMenu");M.MenubarTerminalMenu=new M("MenubarTerminalMenu");M.MenubarViewMenu=new M("MenubarViewMenu");M.MenubarHomeMenu=new M("MenubarHomeMenu");M.OpenEditorsContext=new M("OpenEditorsContext");M.ProblemsPanelContext=new M("ProblemsPanelContext");M.SCMChangeContext=new M("SCMChangeContext");M.SCMResourceContext=new M("SCMResourceContext");M.SCMResourceFolderContext=new M("SCMResourceFolderContext");M.SCMResourceGroupContext=new M("SCMResourceGroupContext");M.SCMSourceControl=new M("SCMSourceControl");M.SCMTitle=new M("SCMTitle");M.SearchContext=new M("SearchContext");M.StatusBarWindowIndicatorMenu=new M("StatusBarWindowIndicatorMenu");M.StatusBarRemoteIndicatorMenu=new M("StatusBarRemoteIndicatorMenu");M.TestItem=new M("TestItem");M.TestItemGutter=new M("TestItemGutter");M.TestPeekElement=new M("TestPeekElement");M.TestPeekTitle=new M("TestPeekTitle");M.TouchBarContext=new M("TouchBarContext");M.TitleBarContext=new M("TitleBarContext");M.TitleBarTitleContext=new M("TitleBarTitleContext");M.TunnelContext=new M("TunnelContext");M.TunnelPrivacy=new M("TunnelPrivacy");M.TunnelProtocol=new M("TunnelProtocol");M.TunnelPortInline=new M("TunnelInline");M.TunnelTitle=new M("TunnelTitle");M.TunnelLocalAddressInline=new M("TunnelLocalAddressInline");M.TunnelOriginInline=new M("TunnelOriginInline");M.ViewItemContext=new M("ViewItemContext");M.ViewContainerTitle=new M("ViewContainerTitle");M.ViewContainerTitleContext=new M("ViewContainerTitleContext");M.ViewTitle=new M("ViewTitle");M.ViewTitleContext=new M("ViewTitleContext");M.CommentThreadTitle=new M("CommentThreadTitle");M.CommentThreadActions=new M("CommentThreadActions");M.CommentTitle=new M("CommentTitle");M.CommentActions=new M("CommentActions");M.InteractiveToolbar=new M("InteractiveToolbar");M.InteractiveCellTitle=new M("InteractiveCellTitle");M.InteractiveCellDelete=new M("InteractiveCellDelete");M.InteractiveCellExecute=new M("InteractiveCellExecute");M.InteractiveInputExecute=new M("InteractiveInputExecute");M.NotebookToolbar=new M("NotebookToolbar");M.NotebookCellTitle=new M("NotebookCellTitle");M.NotebookCellDelete=new M("NotebookCellDelete");M.NotebookCellInsert=new M("NotebookCellInsert");M.NotebookCellBetween=new M("NotebookCellBetween");M.NotebookCellListTop=new M("NotebookCellTop");M.NotebookCellExecute=new M("NotebookCellExecute");M.NotebookCellExecutePrimary=new M("NotebookCellExecutePrimary");M.NotebookDiffCellInputTitle=new M("NotebookDiffCellInputTitle");M.NotebookDiffCellMetadataTitle=new M("NotebookDiffCellMetadataTitle");M.NotebookDiffCellOutputsTitle=new M("NotebookDiffCellOutputsTitle");M.NotebookOutputToolbar=new M("NotebookOutputToolbar");M.NotebookEditorLayoutConfigure=new M("NotebookEditorLayoutConfigure");M.NotebookKernelSource=new M("NotebookKernelSource");M.BulkEditTitle=new M("BulkEditTitle");M.BulkEditContext=new M("BulkEditContext");M.TimelineItemContext=new M("TimelineItemContext");M.TimelineTitle=new M("TimelineTitle");M.TimelineTitleContext=new M("TimelineTitleContext");M.TimelineFilterSubMenu=new M("TimelineFilterSubMenu");M.AccountsContext=new M("AccountsContext");M.PanelTitle=new M("PanelTitle");M.AuxiliaryBarTitle=new M("AuxiliaryBarTitle");M.TerminalInstanceContext=new M("TerminalInstanceContext");M.TerminalEditorInstanceContext=new M("TerminalEditorInstanceContext");M.TerminalNewDropdownContext=new M("TerminalNewDropdownContext");M.TerminalTabContext=new M("TerminalTabContext");M.TerminalTabEmptyAreaContext=new M("TerminalTabEmptyAreaContext");M.TerminalInlineTabContext=new M("TerminalInlineTabContext");M.WebviewContext=new M("WebviewContext");M.InlineCompletionsActions=new M("InlineCompletionsActions");M.NewFile=new M("NewFile");M.MergeToolbar=new M("MergeToolbar");M.MergeInput1Toolbar=new M("MergeToolbar1Toolbar");M.MergeInput2Toolbar=new M("MergeToolbar2Toolbar");const qu=tt("menuService"),vr=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new R,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:r=>r===M.CommandPalette}}addCommand(r){return this.addCommands(Ye.single(r))}addCommands(r){for(const e of r)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Ke(()=>{let e=!1;for(const t of r)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(r){return this._commands.get(r)}getCommands(){const r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){return this.appendMenuItems(Ye.single({id:r,item:e}))}appendMenuItems(r){const e=new Set,t=new qi;for(const{id:n,item:i}of r){let s=this._menuItems.get(n);s||(s=new qi,this._menuItems.set(n,s)),t.push(s.push(i)),e.add(n)}return this._onDidChangeMenu.fire(e),Ke(()=>{if(t.size>0){for(const n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===M.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){const e=new Set;for(const t of r)zh(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}};class bA extends jm{constructor(e,t,n,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=i}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,i]of n)i.length>0&&(e.push(...i),e.push(new ki));return e.length&&e.pop(),e}}let Fc=class y5{constructor(e,t,n,i,s,o){var a,l;if(this.hideActions=i,this._commandService=o,this.id=e.id,this.label=n?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}this.item=e,this.alt=t?new y5(t,void 0,n,i,s,o):void 0,this._options=n,mt.isThemeIcon(e.icon)&&(this.class=Gi.asClassName(e.icon))}dispose(){}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}};Fc=X$([hR(4,Re),hR(5,Sn)],Fc);class hC{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ar===1){if(e&&e.win)return e.win}else if(ar===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=hC.bindToCurrentPlatform(e);if(t&&t.primary){const n=_L(t.primary,ar);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const s=t.secondary[n],o=_L(s,ar);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),rt.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&hC._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,s,o){ar===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:o,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(J$)),this._cachedMergedKeybindings.slice(0)}}const Ms=new hC,Q$={EditorModes:"platform.keybindingsRegistry"};Jt.add(Q$.EditorModes,Ms);function J$(r,e){if(r.weight1!==e.weight1)return r.weight1-e.weight1;if(r.command&&e.command){if(r.command<e.command)return-1;if(r.command>e.command)return 1}return r.weight2-e.weight2}const No=tt("telemetryService");class l1{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=le.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Ms.registerKeybindingRule(i)}}rt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){vr.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class Tg extends l1{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,s)=>s.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get(Zr);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const i of this._implementations){const s=i.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class w5 extends l1{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Un extends l1{static bindToContribution(e){return class extends Un{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,s){const o=e(i);o&&this._callback(o,s)}}}static runEditorCommand(e,t,n,i){const s=e.get(bt),o=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(Re).contextMatchesRules(as(n)))return i(a,o,t)})}runCommand(e,t){return Un.runEditorCommand(e,t,this.precondition,(n,i,s)=>this.runEditorCommand(n,i,s))}}class me extends Un{constructor(e){super(me.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=M.EditorContext),i.title||(i.title=e.label),i.when=le.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(No).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class S5 extends me{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const s=i[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}function Aa(r,e){rt.registerCommand(r,function(t,...n){const i=t.get(Ve),[s,o]=n;Lt(Se.isUri(s)),Lt(B.isIPosition(o));const a=t.get(en).getModel(s);if(a){const l=B.lift(o);return i.invokeFunction(e,a,l,...n.slice(2))}return t.get(ps).createModelReference(s).then(l=>new Promise((c,d)=>{try{const u=i.invokeFunction(e,l.object.textEditorModel,B.lift(o),n.slice(2));c(u)}catch(u){d(u)}}).finally(()=>{l.dispose()}))})}function te(r){return cr.INSTANCE.registerEditorCommand(r),r}function ie(r){const e=new r;return cr.INSTANCE.registerEditorAction(e),e}function x5(r){return cr.INSTANCE.registerEditorAction(r),r}function k5(r){cr.INSTANCE.registerEditorAction(r)}function ct(r,e){cr.INSTANCE.registerEditorContribution(r,e)}var qd;(function(r){function e(o){return cr.INSTANCE.getEditorCommand(o)}r.getEditorCommand=e;function t(){return cr.INSTANCE.getEditorActions()}r.getEditorActions=t;function n(){return cr.INSTANCE.getEditorContributions()}r.getEditorContributions=n;function i(o){return cr.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}r.getSomeEditorContributions=i;function s(){return cr.INSTANCE.getDiffEditorContributions()}r.getDiffEditorContributions=s})(qd||(qd={}));const ez={EditorCommonContributions:"editor.contributions"};class cr{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}cr.INSTANCE=new cr;Jt.add(ez.EditorCommonContributions,cr.INSTANCE);function nb(r){return r.register(),r}const L5=nb(new Tg({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:M.MenubarEditMenu,group:"1_do",title:p({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:M.CommandPalette,group:"",title:p("undo","Undo"),order:1}]}));nb(new w5(L5,{id:"default:undo",precondition:void 0}));const T5=nb(new Tg({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:M.MenubarEditMenu,group:"1_do",title:p({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:M.CommandPalette,group:"",title:p("redo","Redo"),order:1}]}));nb(new w5(T5,{id:"default:redo",precondition:void 0}));const tz=nb(new Tg({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:M.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:M.CommandPalette,group:"",title:p("selectAll","Select All"),order:1}]}));var nz=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iz=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let zm=class{constructor(e,t){}dispose(){}};zm.ID="editor.contrib.markerDecorations";zm=nz([iz(1,mA)],zm);ct(zm.ID,zm);class D5 extends j{constructor(e,t){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}}class Sc{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Sc._read(e,this.key),n=s=>Sc._read(e,s),i=(s,o)=>Sc._write(e,s,o);this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);e[s]=e[s]||{},this._write(e[s],t.substring(i+1),n);return}e[t]=n}}Sc.items=[];function Dg(r,e){Sc.items.push(new Sc(r,e))}function Mo(r,e){Dg(r,(t,n,i)=>{if(typeof t<"u"){for(const[s,o]of e)if(t===s){i(r,o);return}}})}function sz(r){Sc.items.forEach(e=>e.apply(r))}Mo("wordWrap",[[!0,"on"],[!1,"off"]]);Mo("lineNumbers",[[!0,"on"],[!1,"off"]]);Mo("cursorBlinking",[["visible","solid"]]);Mo("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Mo("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Mo("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Mo("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Mo("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Mo("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Mo("autoIndent",[[!1,"advanced"],[!0,"full"]]);Mo("matchBrackets",[[!0,"always"],[!1,"never"]]);Dg("autoClosingBrackets",(r,e,t)=>{r===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Dg("renderIndentGuides",(r,e,t)=>{typeof r<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!r))});Dg("highlightActiveIndentGuide",(r,e,t)=>{typeof r<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!r))});const rz={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Dg("suggest.filteredTypes",(r,e,t)=>{if(r&&typeof r=="object"){for(const n of Object.entries(rz))r[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});Dg("quickSuggestions",(r,e,t)=>{if(typeof r=="boolean"){const n=r?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});class oz{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new R,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}}const fC=new oz,Wl=tt("accessibilityService"),ib=new ge("accessibilityModeEnabled",!1);var az=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lz=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let xL=class extends j{constructor(e,t,n,i){super(),this._accessibilityService=i,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new R),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new e4,this.isSimpleWidget=e,this._containerObserver=this._register(new D5(n,t.dimension)),this._rawOptions=fR(t),this._validatedOptions=oc.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(Nl.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(fC.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(sL.onDidChange(()=>this._recomputeOptions())),this._register(Pf.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=oc.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Gd.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:fC.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return oc.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:dz(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:vc||Ys,pixelRatio:Pf.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return sL.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=fR(e);oc.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=oc.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=cz(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}};xL=az([lz(3,Wl)],xL);function cz(r){let e=0;for(;r;)r=Math.floor(r/10),e++;return e||1}function dz(){let r="";return!Il&&!XE&&(r+="no-user-select "),Il&&(r+="no-minimap-shadow ",r+="enable-user-select "),Je&&(r+="mac "),r}class uz{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class hz{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class oc{static validateOptions(e){const t=new uz;for(const n of Wh){const i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new hz;for(const i of Wh)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?qs(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!oc._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of Wh){const o=!oc._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=o,o&&(i=!0)}return i?new JF(n):null}static applyUpdate(e,t){let n=!1;for(const i of Wh)if(t.hasOwnProperty(i.name)){const s=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=s.newValue,n=n||s.didChange}return n}}function fR(r){const e=el(r);return sz(e),e}function In(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,o)}),this[s]}}var fz=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bt;(function(r){r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"})(Bt||(Bt={}));class kt extends j{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(Z(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(Z(document,"touchend",e=>this.onTouchEnd(e))),this._register(Z(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return kt.isTouchDevice()?(kt.INSTANCE||(kt.INSTANCE=new kt),kt.INSTANCE.targets.push(e),{dispose:()=>{kt.INSTANCE.targets=kt.INSTANCE.targets.filter(t=>t!==e)}}):j.None}static ignoreTarget(e){return kt.isTouchDevice()?(kt.INSTANCE||(kt.INSTANCE=new kt),kt.INSTANCE.ignoreTargets.push(e),{dispose:()=>{kt.INSTANCE.ignoreTargets=kt.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):j.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){const s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const o=this.newGestureEvent(Bt.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,s=e.changedTouches.length;i<s;i++){const o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}const a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<kt.HOLD_DELAY&&Math.abs(a.initialPageX-nr(a.rollingPageX))<30&&Math.abs(a.initialPageY-nr(a.rollingPageY))<30){const c=this.newGestureEvent(Bt.Tap,a.initialTarget);c.pageX=nr(a.rollingPageX),c.pageY=nr(a.rollingPageY),this.dispatchEvent(c)}else if(l>=kt.HOLD_DELAY&&Math.abs(a.initialPageX-nr(a.rollingPageX))<30&&Math.abs(a.initialPageY-nr(a.rollingPageY))<30){const c=this.newGestureEvent(Bt.Contextmenu,a.initialTarget);c.pageX=nr(a.rollingPageX),c.pageY=nr(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){const c=nr(a.rollingPageX),d=nr(a.rollingPageY),u=nr(a.rollingTimestamps)-a.rollingTimestamps[0],h=c-a.rollingPageX[0],f=d-a.rollingPageY[0],g=this.targets.filter(_=>a.initialTarget instanceof Node&&_.contains(a.initialTarget));this.inertia(g,t,Math.abs(h)/u,h>0?1:-1,c,Math.abs(f)/u,f>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(Bt.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Bt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>kt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Bt.Change||e.type===Bt.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,i,s,o,a,l){this.handle=To(()=>{const c=Date.now(),d=c-t;let u=0,h=0,f=!0;n+=kt.SCROLL_FRICTION*d,o+=kt.SCROLL_FRICTION*d,n>0&&(f=!1,u=i*n*d),o>0&&(f=!1,h=a*o*d);const g=this.newGestureEvent(Bt.Change);g.translationX=u,g.translationY=h,e.forEach(_=>_.dispatchEvent(g)),f||this.inertia(e,c,n,i,s+u,o,a,l+h)})}onTouchMove(e){const t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const o=this.activeTouches[s.identifier],a=this.newGestureEvent(Bt.Change,o.initialTarget);a.translationX=s.pageX-nr(o.rollingPageX),a.translationY=s.pageY-nr(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}kt.SCROLL_FRICTION=-.005;kt.HOLD_DELAY=700;kt.CLEAR_TAP_COUNT_TIME=400;fz([In],kt,"isTouchDevice",null);class Eg{constructor(){this._hooks=new Q,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=s;let o=e;try{e.setPointerCapture(t),this._hooks.add(Ke(()=>{e.releasePointerCapture(t)}))}catch{o=window}this._hooks.add(Z(o,he.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Z(o,he.POINTER_UP,a=>this.stopMonitoring(!0)))}}function xc(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}class Qe{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=xc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class lo{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=xc(Math.max(Math.min(1,t),0),3),this.l=xc(Math.max(Math.min(1,n),0),3),this.a=xc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,o=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,c=0;const d=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),o){case t:l=(n-i)/u+(n<i?6:0);break;case n:l=(i-t)/u+2;break;case i:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new lo(l,c,d,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let o,a,l;if(n===0)o=a=l=i;else{const c=i<.5?i*(1+n):i+n-i*n,d=2*i-c;o=lo._hue2rgb(d,c,t+1/3),a=lo._hue2rgb(d,c,t),l=lo._hue2rgb(d,c,t-1/3)}return new Qe(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class la{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=xc(Math.max(Math.min(1,t),0),3),this.v=xc(Math.max(Math.min(1,n),0),3),this.a=xc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),o=Math.min(t,n,i),a=s-o,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((n-i)/a%6+6)%6:s===n?c=(i-t)/a+2:c=(t-n)/a+4,new la(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,o=i*n,a=o*(1-Math.abs(t/60%2-1)),l=i-o;let[c,d,u]=[0,0,0];return t<60?(c=o,d=a):t<120?(c=a,d=o):t<180?(d=o,u=a):t<240?(d=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new Qe(c,d,u,s)}}class W{constructor(e){if(e)if(e instanceof Qe)this.rgba=e;else if(e instanceof lo)this._hsla=e,this.rgba=lo.toRGBA(e);else if(e instanceof la)this._hsva=e,this.rgba=la.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return W.Format.CSS.parseHex(e)||W.red}get hsla(){return this._hsla?this._hsla:lo.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:la.fromRGBA(this.rgba)}equals(e){return!!e&&Qe.equals(this.rgba,e.rgba)&&lo.equals(this.hsla,e.hsla)&&la.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=W._relativeLuminanceForComponent(this.rgba.r),t=W._relativeLuminanceForComponent(this.rgba.g),n=W._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return xc(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new W(new lo(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new W(new lo(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new W(new Qe(t,n,i,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new W(new Qe(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=W.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(i-s)/i,e.darken(n)}}W.white=new W(new Qe(255,255,255,1));W.black=new W(new Qe(0,0,0,1));W.red=new W(new Qe(255,0,0,1));W.blue=new W(new Qe(0,0,255,1));W.green=new W(new Qe(0,255,0,1));W.cyan=new W(new Qe(0,255,255,1));W.lightgrey=new W(new Qe(211,211,211,1));W.transparent=new W(new Qe(0,0,0,0));(function(r){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:r.Format.CSS.formatRGBA(f)}t.formatRGB=n;function i(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=i;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(f)}t.formatHSL=s;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?r.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?r.Format.CSS.formatHex(f):r.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const _=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),b=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),v=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new r(new Qe(_,b,v,1))}if(g===9){const _=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),b=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),v=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),C=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new r(new Qe(_,b,v,C/255))}if(g===4){const _=h(f.charCodeAt(1)),b=h(f.charCodeAt(2)),v=h(f.charCodeAt(3));return new r(new Qe(16*_+_,16*b+b,16*v+v))}if(g===5){const _=h(f.charCodeAt(1)),b=h(f.charCodeAt(2)),v=h(f.charCodeAt(3)),C=h(f.charCodeAt(4));return new r(new Qe(16*_+_,16*b+b,16*v+v,(16*C+C)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(r.Format||(r.Format={}))})(W||(W={}));function E5(r){return`--vscode-${r.replace(/\./g,"-")}`}const A5={ColorContribution:"base.contributions.colors"};class gz{constructor(){this._onDidChangeSchema=new R,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,s){const o={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=o;const a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return qa(i,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,n)=>{const i=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return i!==s?i-s:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const c1=new gz;Jt.add(A5.ColorContribution,c1);function pz(r){return r===null||typeof r.hcLight>"u"&&(r.hcDark===null||typeof r.hcDark=="string"?r.hcLight=r.hcDark:r.hcLight=r.light),r}function I(r,e,t,n,i){return c1.registerColor(r,pz(e),t,n,i)}const J=I("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},p("foreground","Overall foreground color. This color is only used if not overridden by a component."));I("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},p("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const mz=I("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},p("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));I("descriptionForeground",{light:"#717171",dark:Ce(J,.7),hcDark:Ce(J,.7),hcLight:Ce(J,.7)},p("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const Xb=I("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},p("iconForeground","The default color for icons in the workbench.")),gr=I("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#0F4A85"},p("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ge=I("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},p("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),$t=I("contrastActiveBorder",{light:null,dark:null,hcDark:gr,hcLight:gr},p("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));I("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},p("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));I("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:W.black,hcLight:"#292929"},p("textSeparatorForeground","Color for text separators."));const d1=I("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},p("textLinkForeground","Foreground color for links in text.")),u1=I("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},p("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));I("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},p("textPreformatForeground","Foreground color for preformatted text segments."));I("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},p("textBlockQuoteBackground","Background color for block quotes in text."));I("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:W.white,hcLight:"#292929"},p("textBlockQuoteBorder","Border color for block quotes in text."));const I5=I("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:W.black,hcLight:"#F2F2F2"},p("textCodeBlockBackground","Background color for code blocks in text.")),po=I("widget.shadow",{dark:Ce(W.black,.36),light:Ce(W.black,.16),hcDark:null,hcLight:null},p("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),h1=I("input.background",{dark:"#3C3C3C",light:W.white,hcDark:W.black,hcLight:W.white},p("inputBoxBackground","Input box background.")),f1=I("input.foreground",{dark:J,light:J,hcDark:J,hcLight:J},p("inputBoxForeground","Input box foreground.")),g1=I("input.border",{dark:null,light:null,hcDark:Ge,hcLight:Ge},p("inputBoxBorder","Input box border.")),gC=I("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hcDark:Ge,hcLight:Ge},p("inputBoxActiveOptionBorder","Border color of activated options in input fields."));I("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},p("inputOption.hoverBackground","Background color of activated options in input fields."));const pC=I("inputOption.activeBackground",{dark:Ce(gr,.4),light:Ce(gr,.2),hcDark:W.transparent,hcLight:W.transparent},p("inputOption.activeBackground","Background hover color of options in input fields.")),mC=I("inputOption.activeForeground",{dark:W.white,light:W.black,hcDark:null,hcLight:J},p("inputOption.activeForeground","Foreground color of activated options in input fields."));I("input.placeholderForeground",{light:Ce(J,.5),dark:Ce(J,.5),hcDark:Ce(J,.7),hcLight:Ce(J,.7)},p("inputPlaceholderForeground","Input box foreground color for placeholder text."));const vA=I("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:W.black,hcLight:W.white},p("inputValidationInfoBackground","Input validation background color for information severity.")),CA=I("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:J},p("inputValidationInfoForeground","Input validation foreground color for information severity.")),yA=I("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Ge,hcLight:Ge},p("inputValidationInfoBorder","Input validation border color for information severity.")),wA=I("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:W.black,hcLight:W.white},p("inputValidationWarningBackground","Input validation background color for warning severity.")),SA=I("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:J},p("inputValidationWarningForeground","Input validation foreground color for warning severity.")),xA=I("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Ge,hcLight:Ge},p("inputValidationWarningBorder","Input validation border color for warning severity.")),kA=I("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:W.black,hcLight:W.white},p("inputValidationErrorBackground","Input validation background color for error severity.")),LA=I("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:J},p("inputValidationErrorForeground","Input validation foreground color for error severity.")),TA=I("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Ge,hcLight:Ge},p("inputValidationErrorBorder","Input validation border color for error severity.")),gl=I("dropdown.background",{dark:"#3C3C3C",light:W.white,hcDark:W.black,hcLight:W.white},p("dropdownBackground","Dropdown background."));I("dropdown.listBackground",{dark:null,light:null,hcDark:W.black,hcLight:W.white},p("dropdownListBackground","Dropdown list background."));const Pd=I("dropdown.foreground",{dark:"#F0F0F0",light:null,hcDark:W.white,hcLight:J},p("dropdownForeground","Dropdown foreground.")),Qb=I("dropdown.border",{dark:gl,light:"#CECECE",hcDark:Ge,hcLight:Ge},p("dropdownBorder","Dropdown border."));I("checkbox.background",{dark:gl,light:gl,hcDark:gl,hcLight:gl},p("checkbox.background","Background color of checkbox widget."));I("checkbox.foreground",{dark:Pd,light:Pd,hcDark:Pd,hcLight:Pd},p("checkbox.foreground","Foreground color of checkbox widget."));I("checkbox.border",{dark:Qb,light:Qb,hcDark:Qb,hcLight:Qb},p("checkbox.border","Border color of checkbox widget."));const Ep=I("button.foreground",{dark:W.white,light:W.white,hcDark:W.white,hcLight:W.white},p("buttonForeground","Button foreground color."));I("button.separator",{dark:Ce(Ep,.4),light:Ce(Ep,.4),hcDark:Ce(Ep,.4),hcLight:Ce(Ep,.4)},p("buttonSeparator","Button separator color."));const kL=I("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},p("buttonBackground","Button background color.")),_z=I("button.hoverBackground",{dark:wo(kL,.2),light:Zu(kL,.2),hcDark:null,hcLight:null},p("buttonHoverBackground","Button background color when hovering."));I("button.border",{dark:Ge,light:Ge,hcDark:Ge,hcLight:Ge},p("buttonBorder","Button border color."));I("button.secondaryForeground",{dark:W.white,light:W.white,hcDark:W.white,hcLight:J},p("buttonSecondaryForeground","Secondary button foreground color."));const gR=I("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:W.white},p("buttonSecondaryBackground","Secondary button background color."));I("button.secondaryHoverBackground",{dark:wo(gR,.2),light:Zu(gR,.2),hcDark:null,hcLight:null},p("buttonSecondaryHoverBackground","Secondary button background color when hovering."));const Kh=I("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:W.black,hcLight:"#0F4A85"},p("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Gh=I("badge.foreground",{dark:W.white,light:"#333",hcDark:W.white,hcLight:W.white},p("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),Ag=I("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},p("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Fd=I("scrollbarSlider.background",{dark:W.fromHex("#797979").transparent(.4),light:W.fromHex("#646464").transparent(.4),hcDark:Ce(Ge,.6),hcLight:Ce(Ge,.4)},p("scrollbarSliderBackground","Scrollbar slider background color.")),Bd=I("scrollbarSlider.hoverBackground",{dark:W.fromHex("#646464").transparent(.7),light:W.fromHex("#646464").transparent(.7),hcDark:Ce(Ge,.8),hcLight:Ce(Ge,.8)},p("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Wd=I("scrollbarSlider.activeBackground",{dark:W.fromHex("#BFBFBF").transparent(.4),light:W.fromHex("#000000").transparent(.6),hcDark:Ge,hcLight:Ge},p("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),bz=I("progressBar.background",{dark:W.fromHex("#0E70C0"),light:W.fromHex("#0E70C0"),hcDark:Ge,hcLight:Ge},p("progressBarBackground","Background color of the progress bar that can show for long running operations.")),vz=I("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ca=I("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},p("editorError.foreground","Foreground color of error squigglies in the editor.")),N5=I("editorError.border",{dark:null,light:null,hcDark:W.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},p("errorBorder","Border color of error boxes in the editor.")),Cz=I("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),zs=I("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD37",hcLight:"#895503"},p("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Uf=I("editorWarning.border",{dark:null,light:null,hcDark:W.fromHex("#FFCC00").transparent(.8),hcLight:"#"},p("warningBorder","Border color of warning boxes in the editor.")),yz=I("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ds=I("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},p("editorInfo.foreground","Foreground color of info squigglies in the editor.")),_C=I("editorInfo.border",{dark:null,light:null,hcDark:W.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},p("infoBorder","Border color of info boxes in the editor.")),wz=I("editorHint.foreground",{dark:W.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},p("editorHint.foreground","Foreground color of hint squigglies in the editor.")),Sz=I("editorHint.border",{dark:null,light:null,hcDark:W.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},p("hintBorder","Border color of hint boxes in the editor."));I("sash.hoverBorder",{dark:gr,light:gr,hcDark:gr,hcLight:gr},p("sashActiveBorder","Border color of active sashes."));const Pn=I("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:W.black,hcLight:W.white},p("editorBackground","Editor background color.")),Ks=I("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:W.white,hcLight:J},p("editorForeground","Editor default foreground color."));I("editorStickyScroll.background",{light:Pn,dark:Pn,hcDark:Pn,hcLight:Pn},p("editorStickyScrollBackground","Sticky scroll background color for the editor"));I("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:W.fromHex("#0F4A85").transparent(.1)},p("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const wn=I("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:W.white},p("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),mo=I("editorWidget.foreground",{dark:J,light:J,hcDark:J,hcLight:J},p("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),pl=I("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Ge,hcLight:Ge},p("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),xz=I("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},p("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),pR=I("quickInput.background",{dark:wn,light:wn,hcDark:wn,hcLight:wn},p("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),kz=I("quickInput.foreground",{dark:mo,light:mo,hcDark:mo,hcLight:mo},p("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Lz=I("quickInputTitle.background",{dark:new W(new Qe(255,255,255,.105)),light:new W(new Qe(0,0,0,.06)),hcDark:"#000000",hcLight:W.white},p("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Tz=I("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:W.white,hcLight:"#0F4A85"},p("pickerGroupForeground","Quick picker color for grouping labels.")),Dz=I("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:W.white,hcLight:"#0F4A85"},p("pickerGroupBorder","Quick picker color for grouping borders.")),Ez=I("keybindingLabel.background",{dark:new W(new Qe(128,128,128,.17)),light:new W(new Qe(221,221,221,.4)),hcDark:W.transparent,hcLight:W.transparent},p("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Az=I("keybindingLabel.foreground",{dark:W.fromHex("#CCCCCC"),light:W.fromHex("#555555"),hcDark:W.white,hcLight:J},p("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Iz=I("keybindingLabel.border",{dark:new W(new Qe(51,51,51,.6)),light:new W(new Qe(204,204,204,.4)),hcDark:new W(new Qe(111,195,223)),hcLight:Ge},p("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Nz=I("keybindingLabel.bottomBorder",{dark:new W(new Qe(68,68,68,.6)),light:new W(new Qe(187,187,187,.4)),hcDark:new W(new Qe(111,195,223)),hcLight:J},p("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),ml=I("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},p("editorSelectionBackground","Color of the editor selection.")),Mz=I("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:W.white},p("editorSelectionForeground","Color of the selected text for high contrast.")),DA=I("editor.inactiveSelectionBackground",{light:Ce(ml,.5),dark:Ce(ml,.5),hcDark:Ce(ml,.7),hcLight:Ce(ml,.5)},p("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),EA=I("editor.selectionHighlightBackground",{light:yR(ml,Pn,.3,.6),dark:yR(ml,Pn,.3,.6),hcDark:null,hcLight:null},p("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Rz=I("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:$t,hcLight:$t},p("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Oz=I("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},p("editorFindMatch","Color of the current search match.")),_l=I("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},p("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Pz=I("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},p("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Fz=I("editor.findMatchBorder",{light:null,dark:null,hcDark:$t,hcLight:$t},p("editorFindMatchBorder","Border color of the current search match.")),Vd=I("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:$t,hcLight:$t},p("findMatchHighlightBorder","Border color of the other search matches.")),Bz=I("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Ce($t,.4),hcLight:Ce($t,.4)},p("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);I("searchEditor.findMatchBackground",{light:Ce(_l,.66),dark:Ce(_l,.66),hcDark:_l,hcLight:_l},p("searchEditor.queryMatch","Color of the Search Editor query matches."));I("searchEditor.findMatchBorder",{light:Ce(Vd,.66),dark:Ce(Vd,.66),hcDark:Vd,hcLight:Vd},p("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));const Wz=I("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},p("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),mu=I("editorHoverWidget.background",{light:wn,dark:wn,hcDark:wn,hcLight:wn},p("hoverBackground","Background color of the editor hover.")),AA=I("editorHoverWidget.foreground",{light:mo,dark:mo,hcDark:mo,hcLight:mo},p("hoverForeground","Foreground color of the editor hover.")),IA=I("editorHoverWidget.border",{light:pl,dark:pl,hcDark:pl,hcLight:pl},p("hoverBorder","Border color of the editor hover.")),Vz=I("editorHoverWidget.statusBarBackground",{dark:wo(mu,.2),light:Zu(mu,.05),hcDark:wn,hcLight:wn},p("statusBarBackground","Background color of the editor hover status bar.")),NA=I("editorLink.activeForeground",{dark:"#4E94CE",light:W.blue,hcDark:W.cyan,hcLight:"#292929"},p("activeLinkForeground","Color of active links.")),bl=I("editorInlayHint.foreground",{dark:Ce(Gh,.8),light:Ce(Gh,.8),hcDark:Gh,hcLight:Gh},p("editorInlayHintForeground","Foreground color of inline hints")),vl=I("editorInlayHint.background",{dark:Ce(Kh,.6),light:Ce(Kh,.3),hcDark:Kh,hcLight:Kh},p("editorInlayHintBackground","Background color of inline hints")),Hz=I("editorInlayHint.typeForeground",{dark:bl,light:bl,hcDark:bl,hcLight:bl},p("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Uz=I("editorInlayHint.typeBackground",{dark:vl,light:vl,hcDark:vl,hcLight:vl},p("editorInlayHintBackgroundTypes","Background color of inline hints for types")),jz=I("editorInlayHint.parameterForeground",{dark:bl,light:bl,hcDark:bl,hcLight:bl},p("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),$z=I("editorInlayHint.parameterBackground",{dark:vl,light:vl,hcDark:vl,hcLight:vl},p("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),zz=I("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},p("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Kz=I("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),LL=new W(new Qe(155,185,85,.2)),TL=new W(new Qe(255,0,0,.2)),M5=I("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:null,hcLight:null},p("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),R5=I("diffEditor.removedTextBackground",{dark:"#ff000066",light:"#ff00004d",hcDark:null,hcLight:null},p("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Gz=I("diffEditor.insertedLineBackground",{dark:LL,light:LL,hcDark:null,hcLight:null},p("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),qz=I("diffEditor.removedLineBackground",{dark:TL,light:TL,hcDark:null,hcLight:null},p("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Zz=I("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Yz=I("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Xz=I("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),Qz=I("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),Jz=I("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},p("diffEditorInsertedOutline","Outline color for the text that got inserted.")),eK=I("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},p("diffEditorRemovedOutline","Outline color for text that got removed.")),tK=I("diffEditor.border",{dark:null,light:null,hcDark:Ge,hcLight:Ge},p("diffEditorBorder","Border color between the two text editors.")),nK=I("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},p("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),iK=I("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sK=I("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),rK=I("list.focusOutline",{dark:gr,light:gr,hcDark:$t,hcLight:$t},p("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),oK=I("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Cl=I("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:W.fromHex("#0F4A85").transparent(.1)},p("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),da=I("list.activeSelectionForeground",{dark:W.white,light:W.white,hcDark:null,hcLight:null},p("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ap=I("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),aK=I("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:W.fromHex("#0F4A85").transparent(.1)},p("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),lK=I("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),cK=I("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),dK=I("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),uK=I("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),hK=I("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:W.fromHex("#0F4A85").transparent(.1)},p("listHoverBackground","List/Tree background when hovering over items using the mouse.")),fK=I("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),gK=I("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},p("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),Hr=I("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:gr,hcLight:gr},p("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Jb=I("list.focusHighlightForeground",{dark:Hr,light:VK(Cl,Hr,"#BBE7FF"),hcDark:Hr,hcLight:Hr},p("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));I("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},p("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));I("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},p("listErrorForeground","Foreground color of list items containing errors."));I("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},p("listWarningForeground","Foreground color of list items containing warnings."));const pK=I("listFilterWidget.background",{light:Zu(wn,0),dark:wo(wn,0),hcDark:wn,hcLight:wn},p("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),mK=I("listFilterWidget.outline",{dark:W.transparent,light:W.transparent,hcDark:"#f38518",hcLight:"#007ACC"},p("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),_K=I("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Ge,hcLight:Ge},p("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),bK=I("listFilterWidget.shadow",{dark:po,light:po,hcDark:po,hcLight:po},p("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees."));I("list.filterMatchBackground",{dark:_l,light:_l,hcDark:null,hcLight:null},p("listFilterMatchHighlight","Background color of the filtered match."));I("list.filterMatchBorder",{dark:Vd,light:Vd,hcDark:Ge,hcLight:$t},p("listFilterMatchHighlightBorder","Border color of the filtered match."));const vK=I("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},p("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),CK=I("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},p("tableColumnsBorder","Table border color between columns.")),yK=I("tree.tableOddRowsBackground",{dark:Ce(J,.04),light:Ce(J,.04),hcDark:null,hcLight:null},p("tableOddRowsBackgroundColor","Background color for odd table rows."));I("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},p("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const mR=I("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,p("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Ip=I("quickInputList.focusForeground",{dark:da,light:da,hcDark:da,hcLight:da},p("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Np=I("quickInputList.focusIconForeground",{dark:Ap,light:Ap,hcDark:Ap,hcLight:Ap},p("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Mp=I("quickInputList.focusBackground",{dark:Km(mR,Cl),light:Km(mR,Cl),hcDark:null,hcLight:null},p("quickInput.listFocusBackground","Quick picker background color for the focused item.")),wK=I("menu.border",{dark:null,light:null,hcDark:Ge,hcLight:Ge},p("menuBorder","Border color of menus.")),SK=I("menu.foreground",{dark:Pd,light:J,hcDark:Pd,hcLight:Pd},p("menuForeground","Foreground color of menu items.")),xK=I("menu.background",{dark:gl,light:gl,hcDark:gl,hcLight:gl},p("menuBackground","Background color of menu items.")),kK=I("menu.selectionForeground",{dark:da,light:da,hcDark:da,hcLight:da},p("menuSelectionForeground","Foreground color of the selected menu item in menus.")),LK=I("menu.selectionBackground",{dark:Cl,light:Cl,hcDark:Cl,hcLight:Cl},p("menuSelectionBackground","Background color of the selected menu item in menus.")),TK=I("menu.selectionBorder",{dark:null,light:null,hcDark:$t,hcLight:$t},p("menuSelectionBorder","Border color of the selected menu item in menus.")),DK=I("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Ge,hcLight:Ge},p("menuSeparatorBackground","Color of a separator menu item in menus.")),DL=I("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},p("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));I("toolbar.hoverOutline",{dark:null,light:null,hcDark:$t,hcLight:$t},p("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));I("toolbar.activeBackground",{dark:wo(DL,.1),light:Zu(DL,.1),hcDark:null,hcLight:null},p("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));I("editor.snippetTabstopHighlightBackground",{dark:new W(new Qe(124,124,124,.3)),light:new W(new Qe(10,50,100,.2)),hcDark:new W(new Qe(124,124,124,.3)),hcLight:new W(new Qe(10,50,100,.2))},p("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));I("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},p("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));I("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));I("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new W(new Qe(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},p("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));I("breadcrumb.foreground",{light:Ce(J,.8),dark:Ce(J,.8),hcDark:Ce(J,.8),hcLight:Ce(J,.8)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items."));I("breadcrumb.background",{light:Pn,dark:Pn,hcDark:Pn,hcLight:Pn},p("breadcrumbsBackground","Background color of breadcrumb items."));I("breadcrumb.focusForeground",{light:Zu(J,.2),dark:wo(J,.1),hcDark:wo(J,.1),hcLight:wo(J,.1)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items."));I("breadcrumb.activeSelectionForeground",{light:Zu(J,.2),dark:wo(J,.1),hcDark:wo(J,.1),hcLight:wo(J,.1)},p("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));I("breadcrumbPicker.background",{light:wn,dark:wn,hcDark:wn,hcLight:wn},p("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const O5=.5,_R=W.fromHex("#40C8AE").transparent(O5),bR=W.fromHex("#40A6FF").transparent(O5),vR=W.fromHex("#606060").transparent(.4),Ur=.4,jf=1,qh=I("merge.currentHeaderBackground",{dark:_R,light:_R,hcDark:null,hcLight:null},p("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.currentContentBackground",{dark:Ce(qh,Ur),light:Ce(qh,Ur),hcDark:Ce(qh,Ur),hcLight:Ce(qh,Ur)},p("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Zh=I("merge.incomingHeaderBackground",{dark:bR,light:bR,hcDark:null,hcLight:null},p("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.incomingContentBackground",{dark:Ce(Zh,Ur),light:Ce(Zh,Ur),hcDark:Ce(Zh,Ur),hcLight:Ce(Zh,Ur)},p("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Yh=I("merge.commonHeaderBackground",{dark:vR,light:vR,hcDark:null,hcLight:null},p("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.commonContentBackground",{dark:Ce(Yh,Ur),light:Ce(Yh,Ur),hcDark:Ce(Yh,Ur),hcLight:Ce(Yh,Ur)},p("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const $f=I("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},p("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));I("editorOverviewRuler.currentContentForeground",{dark:Ce(qh,jf),light:Ce(qh,jf),hcDark:$f,hcLight:$f},p("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));I("editorOverviewRuler.incomingContentForeground",{dark:Ce(Zh,jf),light:Ce(Zh,jf),hcDark:$f,hcLight:$f},p("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));I("editorOverviewRuler.commonContentForeground",{dark:Ce(Yh,jf),light:Ce(Yh,jf),hcDark:$f,hcLight:$f},p("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const MA=I("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},p("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),P5=I("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},p("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Xh=I("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},p("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),p1=I("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),CR=I("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),EK=I("minimap.errorHighlight",{dark:new W(new Qe(255,18,18,.7)),light:new W(new Qe(255,18,18,.7)),hcDark:new W(new Qe(255,50,50,1)),hcLight:"#B5200D"},p("minimapError","Minimap marker color for errors.")),AK=I("minimap.warningHighlight",{dark:zs,light:zs,hcDark:Uf,hcLight:Uf},p("overviewRuleWarning","Minimap marker color for warnings.")),IK=I("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},p("minimapBackground","Minimap background color.")),NK=I("minimap.foregroundOpacity",{dark:W.fromHex("#000f"),light:W.fromHex("#000f"),hcDark:W.fromHex("#000f"),hcLight:W.fromHex("#000f")},p("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),MK=I("minimapSlider.background",{light:Ce(Fd,.5),dark:Ce(Fd,.5),hcDark:Ce(Fd,.5),hcLight:Ce(Fd,.5)},p("minimapSliderBackground","Minimap slider background color.")),RK=I("minimapSlider.hoverBackground",{light:Ce(Bd,.5),dark:Ce(Bd,.5),hcDark:Ce(Bd,.5),hcLight:Ce(Bd,.5)},p("minimapSliderHoverBackground","Minimap slider background color when hovering.")),OK=I("minimapSlider.activeBackground",{light:Ce(Wd,.5),dark:Ce(Wd,.5),hcDark:Ce(Wd,.5),hcLight:Ce(Wd,.5)},p("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),PK=I("problemsErrorIcon.foreground",{dark:ca,light:ca,hcDark:ca,hcLight:ca},p("problemsErrorIconForeground","The color used for the problems error icon.")),FK=I("problemsWarningIcon.foreground",{dark:zs,light:zs,hcDark:zs,hcLight:zs},p("problemsWarningIconForeground","The color used for the problems warning icon.")),BK=I("problemsInfoIcon.foreground",{dark:ds,light:ds,hcDark:ds,hcLight:ds},p("problemsInfoIconForeground","The color used for the problems info icon."));I("charts.foreground",{dark:J,light:J,hcDark:J,hcLight:J},p("chartsForeground","The foreground color used in charts."));I("charts.lines",{dark:Ce(J,.5),light:Ce(J,.5),hcDark:Ce(J,.5),hcLight:Ce(J,.5)},p("chartsLines","The color used for horizontal lines in charts."));I("charts.red",{dark:ca,light:ca,hcDark:ca,hcLight:ca},p("chartsRed","The red color used in chart visualizations."));I("charts.blue",{dark:ds,light:ds,hcDark:ds,hcLight:ds},p("chartsBlue","The blue color used in chart visualizations."));I("charts.yellow",{dark:zs,light:zs,hcDark:zs,hcLight:zs},p("chartsYellow","The yellow color used in chart visualizations."));I("charts.orange",{dark:Xh,light:Xh,hcDark:Xh,hcLight:Xh},p("chartsOrange","The orange color used in chart visualizations."));I("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},p("chartsGreen","The green color used in chart visualizations."));I("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("chartsPurple","The purple color used in chart visualizations."));function WK(r,e){var t,n,i;switch(r.op){case 0:return(t=qa(r.value,e))===null||t===void 0?void 0:t.darken(r.factor);case 1:return(n=qa(r.value,e))===null||n===void 0?void 0:n.lighten(r.factor);case 2:return(i=qa(r.value,e))===null||i===void 0?void 0:i.transparent(r.factor);case 3:for(const s of r.values){const o=qa(s,e);if(o)return o}return;case 5:return qa(e.defines(r.if)?r.then:r.else,e);case 4:{const s=qa(r.value,e);if(!s)return;const o=qa(r.background,e);return o?s.isDarkerThan(o)?W.getLighterColor(s,o,r.factor).transparent(r.transparency):W.getDarkerColor(s,o,r.factor).transparent(r.transparency):s.transparent(r.factor*r.transparency)}default:throw Ry()}}function Zu(r,e){return{op:0,value:r,factor:e}}function wo(r,e){return{op:1,value:r,factor:e}}function Ce(r,e){return{op:2,value:r,factor:e}}function Km(...r){return{op:3,values:r}}function VK(r,e,t){return{op:5,if:r,then:e,else:t}}function yR(r,e,t,n){return{op:4,value:r,background:e,factor:t,transparency:n}}function qa(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?W.fromHex(r):e.getColor(r);if(r instanceof W)return r;if(typeof r=="object")return WK(r,e)}}const F5="vscode://schemas/workbench-colors",B5=Jt.as(zy.JSONContribution);B5.registerSchema(F5,c1.getColorSchema());const wR=new Tt(()=>B5.notifySchemaChanged(F5),200);c1.onDidChangeSchema(()=>{wR.isScheduled()||wR.schedule()});class RA{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new W5(this.x-xl.scrollX,this.y-xl.scrollY)}}class W5{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new RA(this.clientX+xl.scrollX,this.clientY+xl.scrollY)}}class HK{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}class UK{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function V5(r){const e=wi(r);return new HK(e.left,e.top,e.width,e.height)}function H5(r,e,t){const n=e.width/r.offsetWidth,i=e.height/r.offsetHeight,s=(t.x-e.x)/n,o=(t.y-e.y)/i;return new UK(s,o)}class Bc extends aa{constructor(e,t,n){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new RA(this.posx,this.posy),this.editorPos=V5(n),this.relativePos=H5(n,this.editorPos,this.pos)}}class jK{constructor(e){this._editorViewDomNode=e}_create(e){return new Bc(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return Z(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return Z(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return Z(e,he.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return Z(e,he.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return Z(e,he.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return Z(e,"mousemove",n=>t(this._create(n)))}}class $K{constructor(e){this._editorViewDomNode=e}_create(e){return new Bc(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return Z(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return Z(e,he.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return Z(e,he.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return Z(e,"pointermove",n=>t(this._create(n)))}}class zK extends j{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new Eg),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=Hn(document,"keydown",o=>{o.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,o=>{i(new Bc(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),s(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class sb{constructor(e){this._editor=e,this._instanceId=++sb._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Tt(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new KK(t,`dyn-rule-${this._instanceId}-${i}`,Vm(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}sb._idPool=0;class KK{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=Sr(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const s=t[i];let o;typeof s=="object"?o=`var(${E5(s.id)})`:o=s;const a=GK(i);n+=`
	${a}: ${o};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function GK(r){return r.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class rb extends j{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class er extends rb{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class ya{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let o=0;o<i;o++)s[o]=n[i-o-1];return s}}class qK{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class ZK extends qK{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class YK{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class m1{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const s=e[n];t[n]=new m1(s.left,s.width)}return t}toString(){return`[${this.left},${this.width}]`}}class mf{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class XK{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class QK{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class bS{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,i),o.getClientRects()}catch{return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(mf.compare);const t=[];let n=0,i=e[0];for(let s=1,o=e.length;s<o;s++){const a=e[s];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s];i[s]=new mf(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,s,o,a,l){const d=e.children.length-1;if(0>d)return null;if(t=Math.min(d,Math.max(0,t)),i=Math.min(d,Math.max(0,i)),t===i&&n===s&&n===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(g,o,a)}t!==i&&i>0&&s===0&&(i--,s=1073741824);let u=e.children[t].firstChild,h=e.children[i].firstChild;if((!u||!h)&&(!u&&n===0&&t>0&&(u=e.children[t-1].firstChild,n=1073741824),!h&&s===0&&i>0&&(h=e.children[i-1].firstChild,s=1073741824)),!u||!h)return null;n=Math.min(u.textContent.length,Math.max(0,n)),s=Math.min(h.textContent.length,Math.max(0,s));const f=this._readClientRects(u,n,h,s,l);return this._createHorizontalRangesFromClientRects(f,o,a)}}const JK=function(){return vo?!0:!(Ti||Ys||Il)}();let _f=!0;class SR{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=t}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}class xR{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(46);this.renderWhitespace=n.get(90),this.renderControlCharacters=n.get(85),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(61),this.stopRenderingLineAfter=n.get(107),this.fontLigatures=n.get(47)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class na{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=at(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Li(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),o=this._options,a=Ls.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(Li(o.themeType)||this._options.renderWhitespace==="selection"){const h=n.selections;for(const f of h){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:s.minColumn,_=f.endLineNumber===e?f.endColumn:s.maxColumn;g<_&&(Li(o.themeType)||this._options.renderWhitespace!=="selection"?a.push(new Ls(g,_,"inline-selected-text",0)):(l||(l=[]),l.push(new Lj(g-1,_-1))))}}const c=new td(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==js.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(na.CLASS_NAME),i.appendASCIIString('">');const d=tb(c,i);i.appendASCIIString("</div>");let u=null;return _f&&JK&&s.isBasicASCII&&o.useMonospaceOptimizations&&d.containsForeignElements===0&&s.content.length<300&&c.lineTokens.getCount()<100&&(u=new ev(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),u||(u=j5(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof ev:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof ev?this._renderedViewLine.monospaceAssumptionsAreValid():_f}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof ev&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;let o=!1;s!==-1&&t>s+1&&n>s+1&&(o=!0),s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return a&&a.length>0?new QK(o,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}na.CLASS_NAME="view-line";class ev{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return _f;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),_f=!1),_f}toSlowRenderedLine(){return j5(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const s=this._getCharPosition(t),o=this._getCharPosition(n);return[new mf(s,o-s)]}_getCharPosition(e){const t=this._characterMapping.getHorizontalOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new uA(s,n),i)}}class U5{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,i);if(s===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,i);return o===-1?null:[new mf(s,o-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,s){if(n===i){const o=this._readPixelOffset(e,t,n,s);return o===-1?null:[new mf(o,0)]}else return this._readRawVisibleRangesForRange(e,n,i,s)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const s=this._getReadingTarget(e);return s.firstChild?s.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const o=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=bS.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const s=this._characterMapping.getDomPosition(n),o=bS.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new mf(0,this.getWidth())];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return bS.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new uA(s,n),i)}}class eG extends U5{_readVisibleRangesForRange(e,t,n,i,s){const o=super._readVisibleRangesForRange(e,t,n,i,s);if(!o||o.length===0||n===i||n===1&&i===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,s);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const j5=function(){return vc?tG:nG}();function tG(r,e,t,n,i){return new eG(r,e,t,n,i)}function nG(r,e,t,n,i){return new U5(r,e,t,n,i)}class On{static _nextVisibleColumn(e,t,n){return e===9?On.nextRenderTabStop(t,n):Nc(e)||GE(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),s=e.substring(0,i),o=new Q0(s);let a=0;for(;!o.eol();){const l=X0(s,i,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,s=new Q0(e);let o=0,a=1;for(;!s.eol();){const l=X0(e,i,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,n),d=s.offset+1;if(c>=t){const u=t-o;return c-t<u?d:a}o=c,a=d}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}class Gm{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,o=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[o,a,s];switch(s%n===0&&(o=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=On.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[o,a,l]=Gm.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(i){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(o===-1)return-1;let h=a;for(let f=o;f<s;++f){if(h===a+n)return o;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=On.nextRenderTabStop(h,n);break;default:return-1}}return h===a+n?o:-1}const d=On.nextRenderTabStop(l,n);let u=l;for(let h=t;h<s;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=On.nextRenderTabStop(u,n);break;default:return-1}}return u===d?s:-1}}class Jl{constructor(e=null){this.hitTarget=e,this.type=0}}class EL{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var Td;(function(r){function e(t,n,i){const s=t.getPositionFromDOMInfo(n,i);return s?new EL(s,n,null):new Jl(n)}r.createFromDOMInfo=e})(Td||(Td={}));class iG{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class ns{static _deduceRage(e,t=null){return!t&&e?new x(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,s,o){return{type:e,element:t,mouseColumn:n,position:i,range:s,detail:o}}static createViewZone(e,t,n,i,s){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:s}}static createContentText(e,t,n,i,s){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:s}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t)}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Mr{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class zf{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(133),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(61),this.stickyTabStops=i.get(106),this.typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return zf.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.viewModel.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==s&&(l=new B(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new B(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<i?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(i);return{range:new x(i,s,i,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new x(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return zf._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class sG{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,mi._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class OA extends sG{constructor(e,t,n,i,s){super(e,t,n,i),this._ctx=e,s?(this.target=s,this.targetPath=ya.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?On.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return ns.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return ns.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return ns.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return ns.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return ns.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return ns.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return ns.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return ns.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return ns.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new OA(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const kR={isAfterLines:!0};function vS(r){return{isAfterLines:!1,horizontalDistanceToText:r}}class mi{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=ya.collect(t,this._viewHelper.viewDomNode);return!!(Mr.isChildOfContentWidgets(n)||Mr.isChildOfOverflowingContentWidgets(n)||Mr.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i,s){const o=new zf(this._context,this._viewHelper,e),a=new OA(o,t,n,i,s);try{return mi._createMouseTarget(o,a,!1)}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();const o=mi._doHitTest(e,t);return o.type===1?mi.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const i=t;let s=null;return s=s||mi._hitTestContentWidget(e,i),s=s||mi._hitTestOverlayWidget(e,i),s=s||mi._hitTestMinimap(e,i),s=s||mi._hitTestScrollbarSlider(e,i),s=s||mi._hitTestViewZone(e,i),s=s||mi._hitTestMargin(e,i),s=s||mi._hitTestViewCursor(e,i),s=s||mi._hitTestTextArea(e,i),s=s||mi._hitTestViewLines(e,i,n),s=s||mi._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Mr.isChildOfContentWidgets(t.targetPath)||Mr.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Mr.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of n){if(i<o.contentLeft||i>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return Mr.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.relativePos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,i,n.range,o):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!Mr.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new B(1,1),kR);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new B(s,o),kR)}if(n){if(Mr.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const a=e.getLineWidth(s),l=vS(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new B(s,1),l)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const a=vS(t.mouseContentHorizontalOffset-o),l=new B(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const i=mi._doHitTest(e,t);return i.type===1?mi.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(Mr.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new B(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(Mr.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new B(i,s))}}return null}static _hitTestScrollbar(e,t){if(Mr.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new B(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(133),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return mi._getMouseColumn(i,t.get(46).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,s){const o=i.lineNumber,a=i.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const b=vS(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,b)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(i);const d=c.left;if(t.mouseContentHorizontalOffset===d)return t.fulfillContentText(i,null,{mightBeForeignElement:!!s,injectedText:s});const u=[];if(u.push({offset:c.left,column:a}),a>1){const b=e.visibleRangeForPosition(o,a-1);b&&u.push({offset:b.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(o);if(a<h){const b=e.visibleRangeForPosition(o,a+1);b&&u.push({offset:b.left,column:a+1})}u.sort((b,v)=>b.offset-v.offset);const f=t.pos.toClientCoordinates(),g=n.getBoundingClientRect(),_=g.left<=f.clientX&&f.clientX<=g.right;for(let b=1;b<u.length;b++){const v=u[b-1],C=u[b];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=C.offset){const y=new x(o,v.column,o,C.column),w=Math.abs(v.offset-t.mouseContentHorizontalOffset),L=Math.abs(C.offset-t.mouseContentHorizontalOffset),T=w<L?new B(o,v.column):new B(o,C.column);return t.fulfillContentText(T,y,{mightBeForeignElement:!_||!!s,injectedText:s})}}return t.fulfillContentText(i,null,{mightBeForeignElement:!_||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(s-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+t.editorPos.height&&(o=t.editorPos.y+t.editorPos.height-1);const a=new RA(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=hu(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=rG(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new Jl;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===na.CLASS_NAME?Td.createFromDOMInfo(e,o,i.startOffset):new Jl(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===na.CLASS_NAME?Td.createFromDOMInfo(e,s,s.textContent.length):new Jl(s)}return new Jl}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,s=i?i.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===na.CLASS_NAME?Td.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Jl(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,o=i?i.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===na.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return Td.createFromDOMInfo(e,l,0)}else if(a===na.CLASS_NAME)return Td.createFromDOMInfo(e,n.offsetNode,0)}return new Jl(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),s=Gm.atomicPosition(n,e.column-1,i,2);return s!==-1?new B(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new Jl;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.viewModel.getInjectedTextAt(n.position),s=e.viewModel.normalizePosition(n.position,2);(i||!s.equals(n.position))&&(n=new EL(s,n.spanNode,i))}return n.type===1&&e.stickyTabStops&&(n=new EL(this._snapToSoftTabBoundary(n.position,e.viewModel),n.spanNode,n.injectedText)),n}}function rG(r,e,t){const n=document.createRange();let i=r.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const s=i.getBoundingClientRect(),o=window.getComputedStyle(i,null).getPropertyValue("font"),a=i.innerText;let l=s.left,c=0,d;if(e>s.left+s.width)c=a.length;else{const u=Hd.getInstance();for(let h=0;h<a.length+1;h++){if(d=u.getCharWidth(a.charAt(h),o)/2,l+=d,e<l){c=h;break}l+=d}}n.setStart(i.firstChild,c),n.setEnd(i.firstChild,c)}return n}class Hd{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Hd._INSTANCE||(Hd._INSTANCE=new Hd),Hd._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const o=i.measureText(e).width;return this._cache[n]=o,o}}Hd._INSTANCE=null;class PA extends rb{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new mi(this._context,n),this._mouseDownOperation=this._register(new oG(this._context,this.viewController,this.viewHelper,(a,l)=>this._createMouseTarget(a,l),a=>this._getMouseColumn(a))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(133).height;const i=new jK(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,a=>this._onContextMenu(a,!0))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,a=>{this._onMouseMove(a),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=Z(document,"mousemove",l=>{this.viewHelper.viewDomNode.contains(l.target)||this._onMouseLeave(new Bc(l,!1,this.viewHelper.viewDomNode))}))})),this._register(i.onMouseUp(this.viewHelper.viewDomNode,a=>this._onMouseUp(a))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,a=>this._onMouseLeave(a)));let s=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,(a,l)=>{s=l})),this._register(Z(this.viewHelper.viewDomNode,he.POINTER_UP,a=>{this._mouseDownOperation.onPointerUp()})),this._register(i.onMouseDown(this.viewHelper.viewDomNode,a=>this._onMouseDown(a,s)));const o=a=>{if(this.viewController.emitMouseWheel(a),!this._context.configuration.options.get(70))return;const l=new Wf(a);if(Je?(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey:a.ctrlKey&&!a.metaKey&&!a.shiftKey&&!a.altKey){const d=Nl.getZoomLevel(),u=l.deltaY>0?1:-1;Nl.setZoomLevel(d+u),l.preventDefault(),l.stopPropagation()}};this._register(Z(this.viewHelper.viewDomNode,he.MOUSE_WHEEL,o,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(133)){const t=this._context.configuration.options.get(133).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new W5(e,t).toPageCoordinates(),s=V5(this.viewHelper.viewDomNode);if(i.y<s.y||i.y>s.y+s.height||i.x<s.x||i.x>s.x+s.width)return null;const o=H5(this.viewHelper.viewDomNode,s,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,i,o,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=hu(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),i=n.type===6||n.type===7,s=n.type===2||n.type===3||n.type===4,o=n.type===3,a=this._context.configuration.options.get(100),l=n.type===8||n.type===5,c=n.type===9;let d=e.leftButton||e.middleButton;Je&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(i||o&&a))u(),this._mouseDownOperation.start(n.type,e,t);else if(s)e.preventDefault();else if(l){const h=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}class oG extends j{constructor(e,t,n,i,s){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=i,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new zK(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Js),this._mouseState=new _1,this._currentSelection=new ue(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(83)&&s.get(31)&&!s.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(i.getCurrentScrollTop()-(t.y-e.posy),0),l=zf.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return ns.createOutsideEditor(s,d)}const c=i.getLineNumberAtVerticalOffset(a);return ns.createOutsideEditor(s,new B(c,1))}if(e.posy>t.y+t.height){const a=i.getCurrentScrollTop()+e.relativePos.y,l=zf.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return ns.createOutsideEditor(s,d)}const c=i.getLineNumberAtVerticalOffset(a);return ns.createOutsideEditor(s,new B(c,n.getLineMaxColumn(c)))}const o=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);return e.posx<t.x?ns.createOutsideEditor(s,new B(o,1)):e.posx>t.x+t.width?ns.createOutsideEditor(s,new B(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const o=this._helpPositionJumpOverViewZone(i.detail);if(o)return ns.createViewZone(i.type,i.element,i.mouseColumn,o,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new B(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class _1{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>_1.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}_1.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class ri{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=i,this.selectionEndPosition=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new ri(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new ri(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,i,-1)}if(e>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(lu(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(Im(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-s);const o=t.value.substring(i,t.value.length-s),a=e.selectionStart-i,l=e.selectionEnd-i,c=t.selectionStart-i,d=t.selectionEnd-i;if(c===d){const h=e.selectionStart-i;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:o,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(lu(e.value,t.value),e.selectionEnd),i=Math.min(Im(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),o=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-o.length}}}ri.EMPTY=new ri("",0,0,null,null);class Qh{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,s=n+t;return new x(i,1,s+1,1)}static fromEditorSelection(e,t,n,i,s){const o=Qh._getPageOfLine(n.startLineNumber,i),a=Qh._getRangeForPage(o,i),l=Qh._getPageOfLine(n.endLineNumber,i),c=Qh._getRangeForPage(l,i),d=a.intersectRanges(new x(1,1,n.startLineNumber,n.startColumn));let u=t.getValueInRange(d,1);const h=t.getLineCount(),f=t.getLineMaxColumn(h),g=c.intersectRanges(new x(n.endLineNumber,n.endColumn,h,f));let _=t.getValueInRange(g,1),b;if(o===l||o+1===l)b=t.getValueInRange(n,1);else{const v=a.intersectRanges(n),C=c.intersectRanges(n);b=t.getValueInRange(v,1)+String.fromCharCode(8230)+t.getValueInRange(C,1)}return s&&(u.length>500&&(u=u.substring(u.length-500,u.length)),_.length>500&&(_=_.substring(0,500)),b.length>2*500&&(b=b.substring(0,500)+String.fromCharCode(8230)+b.substring(b.length-500,b.length))),new ri(u+b+_,u.length,u.length+b.length,new B(n.startLineNumber,n.startColumn),new B(n.endLineNumber,n.endColumn))}}var bC;(function(r){r.Tap="-monaco-textarea-synthetic-tap"})(bC||(bC={}));const AL={forceCopyWithSyntaxHighlighting:!1};class qm{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}qm.INSTANCE=new qm;class aG{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class lG extends j{constructor(e,t,n,i){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new R),this.onFocus=this._onFocus.event,this._onBlur=this._register(new R),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new R),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new R),this.onCut=this._onCut.event,this._onPaste=this._register(new R),this.onPaste=this._onPaste.event,this._onType=this._register(new R),this.onType=this._onType.event,this._onCompositionStart=this._register(new R),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new R),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new R),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new R),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new Tt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Tt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=ri.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown(o=>{const a=new jt(o);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(o=>{const a=new jt(o);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(o=>{const a=new aG;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&s&&s.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===o.data&&(s.code==="ArrowRight"||s.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:o.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:o.data});return}this._onCompositionStart.fire({data:o.data})})),this._register(this._textArea.onCompositionUpdate(o=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const c=ri.readFromTextArea(this._textArea),d=ri.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(o);return}const l=a.handleCompositionUpdate(o.data);this._textAreaState=ri.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(o)})),this._register(this._textArea.onCompositionEnd(o=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const c=ri.readFromTextArea(this._textArea),d=ri.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(o.data);this._textAreaState=ri.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=ri.readFromTextArea(this._textArea),l=ri.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&Vn(l.text.charCodeAt(0))||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(o=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(o),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(o=>{this._ensureClipboardGetsEditorSelection(o)})),this._register(this._textArea.onPaste(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),o.preventDefault(),!o.clipboardData)return;let[a,l]=LR.getTextData(o.clipboardData);a&&(l=l||qm.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const o=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!o&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return Z(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new ue(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};qm.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&LR.setTextData(e.clipboardData,t.text,t.html,n)}}class LR{static getTextData(e){const t=e.getData(ls.text);let n=null;const i=e.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch{}return t.length===0&&n===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(o=>o.name).join(`
`),null]:[t,n]}static setTextData(e,t,n,i){e.setData(ls.text,t),typeof n=="string"&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}}class cG extends j{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(Jr(this._actual,"keydown")).event,this.onKeyUp=this._register(Jr(this._actual,"keyup")).event,this.onCompositionStart=this._register(Jr(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Jr(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Jr(this._actual,"compositionend")).event,this.onInput=this._register(Jr(this._actual,"input")).event,this.onCut=this._register(Jr(this._actual,"cut")).event,this.onCopy=this._register(Jr(this._actual,"copy")).event,this.onPaste=this._register(Jr(this._actual,"paste")).event,this.onFocus=this._register(Jr(this._actual,"focus")).event,this.onBlur=this._register(Jr(this._actual,"blur")).event,this._onSyntheticTap=this._register(new R),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(Z(this._actual,bC.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=hu(this._actual);return e?e.activeElement===this._actual:pA(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let s=null;const o=hu(i);o?s=o.activeElement:s=document.activeElement;const a=s===i,l=i.selectionStart,c=i.selectionEnd;if(a&&l===t&&c===n){Ys&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Ys&&window.parent!==window&&i.focus();return}try{const d=F$(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),B$(i,d)}catch{}}}class dG extends PA{constructor(e,t,n){super(e,t,n),this._register(kt.addTarget(this.viewHelper.linesContentDomNode)),this._register(Z(this.viewHelper.linesContentDomNode,Bt.Tap,s=>this.onTap(s))),this._register(Z(this.viewHelper.linesContentDomNode,Bt.Change,s=>this.onChange(s))),this._register(Z(this.viewHelper.linesContentDomNode,Bt.Contextmenu,s=>this._onContextMenu(new Bc(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(Z(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new $K(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,(s,o)=>this._onMouseDown(s,o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Bc(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class uG extends PA{constructor(e,t,n){super(e,t,n),this._register(kt.addTarget(this.viewHelper.linesContentDomNode)),this._register(Z(this.viewHelper.linesContentDomNode,Bt.Tap,i=>this.onTap(i))),this._register(Z(this.viewHelper.linesContentDomNode,Bt.Change,i=>this.onChange(i))),this._register(Z(this.viewHelper.linesContentDomNode,Bt.Contextmenu,i=>this._onContextMenu(new Bc(i,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Bc(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(bC.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class hG extends j{constructor(e,t,n){super(),_a&&gA.pointerEvents?this.handler=this._register(new dG(e,t,n)):window.TouchEvent?this.handler=this._register(new uG(e,t,n)):this.handler=this._register(new PA(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Ig extends rb{}const $5=I("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("lineHighlight","Background color for the highlight of line at the cursor position.")),TR=I("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Ge},p("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),fG=I("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},p("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),gG=I("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:$t,hcLight:$t},p("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),pG=I("editor.symbolHighlightBackground",{dark:_l,light:_l,hcDark:null,hcLight:null},p("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),mG=I("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:$t,hcLight:$t},p("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),z5=I("editorCursor.foreground",{dark:"#AEAFAD",light:W.black,hcDark:W.white,hcLight:"#0F4A85"},p("caret","Color of the editor cursor.")),_G=I("editorCursor.background",null,p("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),yl=I("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},p("editorWhitespaces","Color of whitespace characters in the editor.")),ob=I("editorIndentGuide.background",{dark:yl,light:yl,hcDark:yl,hcLight:yl},p("editorIndentGuides","Color of the editor indentation guides.")),ab=I("editorIndentGuide.activeBackground",{dark:yl,light:yl,hcDark:yl,hcLight:yl},p("editorActiveIndentGuide","Color of the active editor indentation guides.")),K5=I("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:W.white,hcLight:"#292929"},p("editorLineNumbers","Color of editor line numbers.")),tv=I("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:$t,hcLight:$t},p("editorActiveLineNumber","Color of editor active line number"),!1,p("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),bG=I("editorLineNumber.activeForeground",{dark:tv,light:tv,hcDark:tv,hcLight:tv},p("editorActiveLineNumber","Color of editor active line number")),vG=I("editorRuler.foreground",{dark:"#5A5A5A",light:W.lightgrey,hcDark:W.white,hcLight:"#292929"},p("editorRuler","Color of the editor rulers."));I("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},p("editorCodeLensForeground","Foreground color of editor CodeLens"));const CG=I("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},p("editorBracketMatchBackground","Background color behind matching brackets")),G5=I("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Ge,hcLight:Ge},p("editorBracketMatchBorder","Color for matching brackets boxes")),yG=I("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},p("editorOverviewRulerBorder","Color of the overview ruler border.")),wG=I("editorOverviewRuler.background",null,p("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),SG=I("editorGutter.background",{dark:Pn,light:Pn,hcDark:Pn,hcLight:Pn},p("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),xG=I("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:W.fromHex("#fff").transparent(.8),hcLight:Ge},p("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),kG=I("editorUnnecessaryCode.opacity",{dark:W.fromHex("#000a"),light:W.fromHex("#0007"),hcDark:null,hcLight:null},p("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),LG=I("editorGhostText.border",{dark:null,light:null,hcDark:W.fromHex("#fff").transparent(.8),hcLight:W.fromHex("#292929").transparent(.8)},p("editorGhostTextBorder","Border color of ghost text in the editor.")),TG=I("editorGhostText.foreground",{dark:W.fromHex("#ffffff56"),light:W.fromHex("#0007"),hcDark:null,hcLight:null},p("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),DG=I("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorGhostTextBackground","Background color of the ghost text in the editor.")),nv=new W(new Qe(0,122,204,.6)),EG=I("editorOverviewRuler.rangeHighlightForeground",{dark:nv,light:nv,hcDark:nv,hcLight:nv},p("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),AG=I("editorOverviewRuler.errorForeground",{dark:new W(new Qe(255,18,18,.7)),light:new W(new Qe(255,18,18,.7)),hcDark:new W(new Qe(255,50,50,1)),hcLight:"#B5200D"},p("overviewRuleError","Overview ruler marker color for errors.")),IG=I("editorOverviewRuler.warningForeground",{dark:zs,light:zs,hcDark:Uf,hcLight:Uf},p("overviewRuleWarning","Overview ruler marker color for warnings.")),NG=I("editorOverviewRuler.infoForeground",{dark:ds,light:ds,hcDark:_C,hcLight:_C},p("overviewRuleInfo","Overview ruler marker color for infos.")),q5=I("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},p("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Z5=I("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},p("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Y5=I("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},p("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),X5=I("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Q5=I("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),J5=I("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),MG=I("editorBracketHighlight.unexpectedBracket.foreground",{dark:new W(new Qe(255,18,18,.8)),light:new W(new Qe(255,18,18,.8)),hcDark:new W(new Qe(255,50,50,1)),hcLight:""},p("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),RG=I("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),OG=I("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),PG=I("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),FG=I("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),BG=I("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),WG=I("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),VG=I("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),HG=I("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),UG=I("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),jG=I("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),$G=I("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),zG=I("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));I("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:""},p("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));I("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:""},p("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Vt((r,e)=>{const t=r.getColor(Pn);t&&e.addRule(`.monaco-editor, .monaco-editor-background { background-color: ${t}; }`);const n=r.getColor($5),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`);const s=r.getColor(Ks);s&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${s}; }`);const o=r.getColor(SG);o&&e.addRule(`.monaco-editor .margin { background-color: ${o}; }`);const a=r.getColor(fG);a&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${a}; }`);const l=r.getColor(gG);l&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${Li(r.type)?"dotted":"solid"} ${l}; }`);const c=r.getColor(pG);c&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${c}; }`);const d=r.getColor(mG);d&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${Li(r.type)?"dotted":"solid"} ${d}; }`);const u=r.getColor(yl);u&&(e.addRule(`.monaco-editor .mtkw { color: ${u} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${u} !important; }`))});class Kf extends Ig{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new B(1,1),this._lastCursorViewPosition=new B(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(61);const t=e.get(62);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(86);const n=e.get(133);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorViewPosition=t,this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new B(e,1));if(t.column!==1)return"";const n=t.lineNumber;return this._renderCustomLineNumbers?this._renderCustomLineNumbers(n):this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Ti?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s='<div class="'+Kf.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">';let o=null;if(this._renderLineNumbers===2){o=new Array(i-n+1),this._lastCursorViewPosition.lineNumber>=n&&this._lastCursorViewPosition.lineNumber<=i&&(o[this._lastCursorViewPosition.lineNumber-n]=this._lastCursorModelPosition.lineNumber);{let c=0;for(let d=this._lastCursorViewPosition.lineNumber+1;d<=i;d++){const h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new B(d,1)).column!==1;h||c++,d>=n&&(o[d-n]=h?0:c)}}{let c=0;for(let d=this._lastCursorViewPosition.lineNumber-1;d>=n;d--){const h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new B(d,1)).column!==1;h||c++,d<=i&&(o[d-n]=h?0:c)}}}const a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=i;c++){const d=c-n;if(!this._renderFinalNewline&&c===a&&this._context.viewModel.getLineLength(c)===0){l[d]="";continue}let u;if(o){const h=o[d];this._lastCursorViewPosition.lineNumber===c?u=`<span class="relative-current-line-number">${h}</span>`:h?u=String(h):u=""}else u=this._getLineRenderLineNumber(c);u?c===this._activeLineNumber?l[d]='<div class="active-line-number '+Kf.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+u+"</div>":l[d]=s+u+"</div>":l[d]=""}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Kf.CLASS_NAME="line-numbers";Vt((r,e)=>{const t=r.getColor(K5);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=r.getColor(bG);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class _u extends er{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(133);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=at(document.createElement("div")),this._domNode.setClassName(_u.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=at(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(_u.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}_u.CLASS_NAME="glyph-margin";_u.OUTER_CLASS_NAME="margin";const Zd="monaco-mouse-cursor-text";class KG{constructor(e,t,n,i,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new B(this.modelLineNumber,this.distanceToModelLineStart+1),n=new B(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const rp=Ys;class GG extends er{constructor(e,t,n){super(e),this._primaryCursorPosition=new B(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,s=i.get(133);this._setAccessibilityOptions(i),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=i.get(46),this._lineHeight=i.get(61),this._emptySelectionClipboard=i.get(33),this._copyWithSyntaxHighlighting=i.get(21),this._visibleTextArea=null,this._selections=[new ue(1,1,1,1)],this._modelSelections=[new ue(1,1,1,1)],this._lastRenderPosition=null,this.textArea=at(document.createElement("textarea")),ya.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Zd}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(114))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",p("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),i.get(30)&&i.get(83)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=at(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:c=>this._context.viewModel.getLineMaxColumn(c),getValueInRange:(c,d)=>this._context.viewModel.getValueInRange(c,d)},a={getDataToCopy:()=>{const c=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,hi),d=this._context.viewModel.model.getEOL(),u=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),h=Array.isArray(c)?c:null,f=Array.isArray(c)?c.join(d):c;let g,_=null;if(AL.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&f.length<65536){const b=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);b&&(g=b.html,_=b.mode)}return{isFromEmptySelection:u,multicursorText:h,text:f,html:g,mode:_}},getScreenReaderContent:c=>{if(this._accessibilitySupport===1){const d=this._selections[0];if(Je&&d.isEmpty()){const u=d.getStartPosition();let h=this._getWordBeforePosition(u);if(h.length===0&&(h=this._getCharacterBeforePosition(u)),h.length>0)return new ri(h,h.length,h.length,u,u)}if(Il&&!d.isEmpty()){const u="vscode-placeholder";return new ri(u,0,u.length,null,null)}return ri.EMPTY}if(S4){const d=this._selections[0];if(d.isEmpty()){const u=d.getStartPosition(),[h,f]=this._getAndroidWordAtPosition(u);if(h.length>0)return new ri(h,f,f,u,u)}return ri.EMPTY}return Qh.fromEditorSelection(c,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(c,d,u)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(c,d,u)},l=this._register(new cG(this.textArea.domNode));this._textAreaInput=this._register(new lG(a,l,ar,IH)),this._register(this._textAreaInput.onKeyDown(c=>{this._viewController.emitKeyDown(c)})),this._register(this._textAreaInput.onKeyUp(c=>{this._viewController.emitKeyUp(c)})),this._register(this._textAreaInput.onPaste(c=>{let d=!1,u=null,h=null;c.metadata&&(d=this._emptySelectionClipboard&&!!c.metadata.isFromEmptySelection,u=typeof c.metadata.multicursorText<"u"?c.metadata.multicursorText:null,h=c.metadata.mode),this._viewController.paste(c.text,d,u,h)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(c=>{c.replacePrevCharCnt||c.replaceNextCharCnt||c.positionDelta?this._viewController.compositionType(c.text,c.replacePrevCharCnt,c.replaceNextCharCnt,c.positionDelta):this._viewController.type(c.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(c=>{this._viewController.setSelection(c)})),this._register(this._textAreaInput.onCompositionStart(c=>{const d=this.textArea.domNode,u=this._modelSelections[0],{distanceToModelLineStart:h,widthOfHiddenTextBefore:f}=(()=>{const _=d.value.substring(0,Math.min(d.selectionStart,d.selectionEnd)),b=_.lastIndexOf(`
`),v=_.substring(b+1),C=v.lastIndexOf("	"),y=v.length-C-1,w=u.getStartPosition(),L=Math.min(w.column-1,y),T=w.column-1-L,S=v.substring(0,v.length-L),k=qG(S,this._fontInfo);return{distanceToModelLineStart:T,widthOfHiddenTextBefore:k}})(),{distanceToModelLineEnd:g}=(()=>{const _=d.value.substring(Math.max(d.selectionStart,d.selectionEnd)),b=_.indexOf(`
`),v=b===-1?_:_.substring(0,b),C=v.indexOf("	"),y=C===-1?v.length:v.length-C-1,w=u.getEndPosition(),L=Math.min(this._context.viewModel.model.getLineMaxColumn(w.lineNumber)-w.column,y);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(w.lineNumber)-w.column-L}})();this._context.viewModel.revealRange("keyboard",!0,x.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new KG(this._context,u.startLineNumber,h,f,g),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Zd} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(c=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Zd}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),i=wr(t);let s=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const d=n.charCodeAt(o-2);i.get(d)!==0?s=!1:o--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);i.get(d)!==0?a=!1:l++}c++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=wr(this._context.configuration.options.get(119));let i=e.column,s=0;for(;i>1;){const o=t.charCodeAt(i-2);if(n.get(o)!==0||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Vn(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?p("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Ti?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Io.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(46),this._lineHeight=t.get(61),this._emptySelectionClipboard=t.get(33),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(114))),(e.hasChanged(30)||e.hasChanged(83))&&(t.get(30)&&t.get(83)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){var t;this._primaryCursorPosition=new B(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,i=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(s&&o&&n&&i&&i.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+n.left-this._scrollLeft,u=i.left-n.left+1;if(d<this._contentLeft){const v=this._contentLeft-d;d+=v,c+=v,u-=v}u>this._contentWidth&&(u=this._contentWidth);const h=this._context.viewModel.getViewLineData(s.lineNumber),f=h.tokens.findTokenIndexAtOffset(s.column-1),g=h.tokens.findTokenIndexAtOffset(o.column-1),_=f===g,b=this._visibleTextArea.definePresentation(_?h.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:u,height:this._lineHeight,useCover:!1,color:(Yt.getColorMap()||[])[b.foreground],italic:b.italic,bold:b.bold,underline:b.underline,strikethrough:b.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Je){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:rp?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:rp?0:1,height:rp?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:rp?0:1,height:rp?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;xi(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?W.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(52)?n.setClassName("monaco-editor-background textAreaCover "+_u.OUTER_CLASS_NAME):i.get(62).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+Kf.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}}function qG(r,e){if(r.length===0)return 0;const t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("span");xi(n,e),n.style.whiteSpace="pre",n.append(r),t.appendChild(n),document.body.appendChild(t);const i=n.offsetWidth;return document.body.removeChild(t),i}function ZG(r,e,t){let n=0;for(let s=0;s<r.length;s++)r.charAt(s)==="	"?n=On.nextIndentTabStop(n,e):n++;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let o=0;o<s;o++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}function vC(r,e,t){let n=Zi(r);return n===-1&&(n=r.length),ZG(r.substring(0,n),e,t)+r.substring(n)}const YG=()=>!0,XG=()=>!1,QG=r=>r===" "||r==="	";class hh{constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,o=s.get(133);this.readOnly=s.get(83),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(106),this.lineHeight=s.get(61),this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=s.get(118),this.wordSeparators=s.get(119),this.emptySelectionClipboard=s.get(33),this.copyWithSyntaxHighlighting=s.get(21),this.multiCursorMergeOverlapping=s.get(71),this.multiCursorPaste=s.get(73),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(8),this.autoClosingDelete=s.get(6),this.autoClosingOvertype=s.get(7),this.autoSurround=s.get(11),this.autoIndent=s.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(const l of a)this.surroundingPairs[l.open]=l.close}static shouldRecreate(e){return e.hasChanged(133)||e.hasChanged(119)||e.hasChanged(33)||e.hasChanged(71)||e.hasChanged(73)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(118)||e.hasChanged(61)||e.hasChanged(83)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=Vy(t,n-1),s=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return vC(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return QG;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return YG;case"never":return XG}}_getLanguageDefinedShouldAutoClose(e){const t=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return n=>t.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return On.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=On.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),s=e.getLineMinColumn(t);if(i<s)return s;const o=e.getLineMaxColumn(t);return i>o?o:i}}let Ze=class{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new JG(e)}static fromViewState(e){return new eq(e)}static fromModelSelection(e){const t=ue.liftSelection(e),n=new ni(x.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return Ze.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class JG{constructor(e){this.modelState=e,this.viewState=null}}class eq{constructor(e){this.modelState=null,this.viewState=e}}class ni{constructor(e,t,n,i){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=i,this.selection=ni._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new ni(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new B(t,n),i):new ni(new x(t,n,t,n),i,new B(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?ue.fromPositions(e.getStartPosition(),t):ue.fromPositions(e.getEndPosition(),t)}}class es{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function ec(r){return r==="'"||r==='"'||r==="`"}class Dd{static columnSelect(e,t,n,i,s,o){const a=Math.abs(s-n)+1,l=n>s,c=i>o,d=i<o,u=[];for(let h=0;h<a;h++){const f=n+(l?-h:h),g=e.columnFromVisibleColumn(t,f,i),_=e.columnFromVisibleColumn(t,f,o),b=e.visibleColumnFromColumn(t,new B(f,g)),v=e.visibleColumnFromColumn(t,new B(f,_));d&&(b>o||v<i)||c&&(v>i||b<o)||u.push(new ni(new x(f,g,f,g),0,new B(f,_),0))}if(u.length===0)for(let h=0;h<a;h++){const f=n+(l?-h:h),g=t.getLineMaxColumn(f);u.push(new ni(new x(f,g,f,g),0,new B(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,Dd.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=o;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new B(l,c));i=Math.max(i,d)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class si{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ue.fromPositions(i.getEndPosition())}}class tq{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ue.fromRange(i,0)}}class iv{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ue.fromPositions(i.getStartPosition())}}class g0{constructor(e,t,n,i,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ue.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class FA{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class CS{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class _t{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-b4(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new B(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=Gm.atomicPosition(s,t.column-1,n,0);if(o!==-1&&o+1>=i)return new B(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?_t.leftPositionAtomicSoftTabs(t,n,e.tabSize):_t.leftPosition(t,n);return new CS(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let o,a;if(n.hasSelection()&&!i)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),c=t.normalizePosition(_t.clipPositionColumn(l,t),0),d=_t.left(e,t,c);o=d.lineNumber,a=d.column}return n.move(i,o,a,0)}static clipPositionColumn(e,t){return new B(e.lineNumber,_t.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+KE(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new B(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=Gm.atomicPosition(o,n-1,i,1);if(a!==-1)return new B(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?_t.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):_t.rightPosition(t,n.lineNumber,n.column);return new CS(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let o,a;if(n.hasSelection()&&!i)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),c=t.normalizePosition(_t.clipPositionColumn(l,t),1),d=_t.right(e,t,c);o=d.lineNumber,a=d.column}return n.move(i,o,a,0)}static vertical(e,t,n,i,s,o,a,l){const c=On.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,d=t.getLineCount(),u=n===1&&i===1,h=n===d&&i===t.getLineMaxColumn(n),f=o<n?u:h;if(n=o,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>d?(n=d,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,c),f?s=0:s=c-On.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){const g=new B(n,i),_=t.normalizePosition(g,l);s=s+(i-_.column),n=_.lineNumber,i=_.column}return new CS(n,i,s)}static down(e,t,n,i,s,o,a){return this.vertical(e,t,n,i,s,n+o,a,4)}static moveDown(e,t,n,i,s){let o,a;n.hasSelection()&&!i?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);const l=_t.down(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,s=_t.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=_t.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new ni(new x(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new B(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,i,s,o,a){return this.vertical(e,t,n,i,s,n-o,a,3)}static moveUp(e,t,n,i,s){let o,a;n.hasSelection()&&!i?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);const l=_t.up(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,s=_t.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=_t.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new ni(new x(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new B(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let o=n.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,i){const s=n.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o;let l;return n.position.column===a?l=o:l=a,n.move(i,s,l,0)}static moveToEndOfLine(e,t,n,i,s){const o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(i,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const s=t.getLineCount(),o=t.getLineMaxColumn(s);return n.move(i,s,o,0)}}class bu{static deleteRight(e,t,n,i){const s=[];let o=e!==3;for(let a=0,l=i.length;a<l;a++){const c=i[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=_t.right(t,n,u);d=new x(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){s[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(o=!0),s[a]=new si(d,"")}return[o,s]}static isAutoClosingPairDelete(e,t,n,i,s,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const d=o[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=s.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),g=i.get(f);if(!g)return!1;if(ec(f)){if(n==="never")return!1}else if(t==="never")return!1;const _=h.charAt(u.column-1);let b=!1;for(const v of g)v.open===f&&v.close===_&&(b=!0);if(!b)return!1;if(e==="auto"){let v=!1;for(let C=0,y=a.length;C<y;C++){const w=a[C];if(u.lineNumber===w.startLineNumber&&u.column===w.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].getPosition(),l=new x(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[s]=new si(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const o=[];let a=e!==2;for(let l=0,c=i.length;l<c;l++){const d=bu.getDeleteRange(i[l],n,t);if(d.isEmpty()){o[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),o[l]=new si(d,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const s=t.getLineContent(i.lineNumber),o=Zi(s),a=o===-1?s.length+1:o+1;if(i.column<=a){const l=n.visibleColumnFromColumn(t,i),c=On.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,i.lineNumber,c);return new x(i.lineNumber,d,i.lineNumber,i.column)}}return x.fromPositions(bu.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=SH(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new B(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const i=[];let s=null;n.sort((o,a)=>B.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&s?.endLineNumber!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new x(d,u,h,f);s=g,g.isEmpty()?i[o]=null:i[o]=new si(g,"")}else i[o]=null;else i[o]=new si(l,"")}return new es(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class dt{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){const o=e.charCodeAt(s),a=t.get(o);if(a===0){if(i===2)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const s=e.length;for(let o=i;o<s;o++){const a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return s}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const s=e.length;for(let o=n.column-1;o<s;o++){const a=e.charCodeAt(o),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){const o=e.charCodeAt(s),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,o=n.column;o===1&&s>1&&(s=s-1,o=t.getLineMaxColumn(s));let a=dt._findPreviousWordOnLine(e,t,new B(s,o));if(i===0)return new B(s,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=dt._findPreviousWordOnLine(e,t,new B(s,a.start+1))),new B(s,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=dt._findPreviousWordOnLine(e,t,new B(s,a.start+1));return new B(s,a?a.start+1:1)}return a&&o<=a.end+1&&(a=dt._findPreviousWordOnLine(e,t,new B(s,a.start+1))),new B(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new B(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a===95&&l!==95)return new B(n,o);if((cc(a)||zb(a))&&Yo(l))return new B(n,o);if(Yo(a)&&Yo(l)&&o+1<i){const c=s.charCodeAt(o);if(cc(c)||zb(c))return new B(n,o)}}return new B(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let l=dt._findNextWordOnLine(e,t,new B(s,o));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=dt._findNextWordOnLine(e,t,new B(s,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(s);else if(i===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=dt._findNextWordOnLine(e,t,new B(s,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(s)}else l&&!a&&o>=l.start+1&&(l=dt._findNextWordOnLine(e,t,new B(s,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(s);return new B(s,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new B(n+1,1):t;const s=e.getLineContent(n);for(let o=t.column+1;o<i;o++){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a!==95&&l===95)return new B(n,o);if((cc(a)||zb(a))&&Yo(l))return new B(n,o);if(Yo(a)&&Yo(l)&&o+1<i){const c=s.charCodeAt(o);if(cc(c)||zb(c))return new B(n,o)}}return new B(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=ga(n,i);return s+1<i?new x(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(bu.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new x(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new B(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const u=this._deleteWordLeftWhitespace(i,a);if(u)return u}let d=dt._findPreviousWordOnLine(n,i,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=dt._findPreviousWordOnLine(n,i,new B(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l))),new x(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new B(n.positionLineNumber,n.positionColumn),s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let o=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,o))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;o+1<i&&this._charAtIsWhitespace(n,o+1);)o++;return new x(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(s===0)return n.lineNumber>1?new x(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new x(n.lineNumber,1,n.lineNumber+1,1):new x(n.lineNumber,1,n.lineNumber,1);const o=u=>u.start+1<=n.column&&n.column<=u.end+1,a=(u,h)=>(u=Math.min(u,n.column),h=Math.max(h,n.column),new x(n.lineNumber,u,n.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,g=!1;for(;f-1<s&&this._charAtIsWhitespace(i,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(i,h-2);)h--;return a(h,f)},c=dt._findPreviousWordOnLine(e,t,n);if(c&&o(c))return l(c);const d=dt._findNextWordOnLine(e,t,n);return d&&o(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=dt._moveWordPartLeft(e,n);return new x(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const s=e.charAt(i);if(s!==" "&&s!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new x(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new B(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const d=i.getLineCount(),u=i.getLineMaxColumn(l);if(l===d&&c===u)return null;if(o){const f=this._deleteWordRightWhitespace(i,a);if(f)return f}let h=dt._findNextWordOnLine(n,i,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=dt._findNextWordOnLine(n,i,new B(l,1)),h?c=h.start+1:c=i.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=dt._findNextWordOnLine(n,i,new B(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=dt._findNextWordOnLine(n,i,new B(l,1)),h?c=h.start+1:c=i.getLineMaxColumn(l))),new x(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=dt._moveWordPartRight(e,n);return new x(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new x(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=wr(t),s=dt._findPreviousWordOnLine(i,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return dt._createWordAtPosition(e,n.lineNumber,s);const o=dt._findNextWordOnLine(i,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?dt._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,i,s){const o=wr(e.wordSeparators),a=dt._findPreviousWordOnLine(o,t,s),l=dt._findNextWordOnLine(o,t,s);if(!i){let f,g;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(s.lineNumber)),new ni(new x(s.lineNumber,f,s.lineNumber,g),0,new B(s.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,d=l.end+1):(c=s.column,d=s.column);const u=s.lineNumber;let h;if(n.selectionStart.containsPosition(s))h=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){h=c;const f=new B(u,h);n.selectionStart.containsPosition(f)&&(h=n.selectionStart.endColumn)}else{h=d;const f=new B(u,h);n.selectionStart.containsPosition(f)&&(h=n.selectionStart.startColumn)}return n.move(!0,u,h,0)}}class b1 extends dt{static deleteWordPartLeft(e){const t=sv([dt.deleteWordLeft(e,0),dt.deleteWordLeft(e,2),dt._deleteWordPartLeft(e.model,e.selection)]);return t.sort(x.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=sv([dt.deleteWordRight(e,0),dt.deleteWordRight(e,2),dt._deleteWordPartRight(e.model,e.selection)]);return t.sort(x.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=sv([dt.moveWordLeft(e,t,n,0),dt.moveWordLeft(e,t,n,2),dt._moveWordPartLeft(t,n)]);return i.sort(B.compare),i[2]}static moveWordPartRight(e,t,n){const i=sv([dt.moveWordRight(e,t,n,0),dt.moveWordRight(e,t,n,2),dt._moveWordPartRight(t,n)]);return i.sort(B.compare),i[0]}}function sv(r){return r.filter(e=>Boolean(e))}class ti{static addCursorDown(e,t,n){const i=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];i[s++]=new Ze(l.modelState,l.viewState),n?i[s++]=Ze.fromModelState(_t.translateDown(e.cursorConfig,e.model,l.modelState)):i[s++]=Ze.fromViewState(_t.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];i[s++]=new Ze(l.modelState,l.viewState),n?i[s++]=Ze.fromModelState(_t.translateUp(e.cursorConfig,e.model,l.modelState)):i[s++]=Ze.fromViewState(_t.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=t.modelState.position.column,o=i===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Ze.fromViewState(_t.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Ze.fromModelState(_t.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=this._moveToLineEnd(e,l,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=o-s.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return Ze.fromViewState(_t.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return Ze.fromModelState(_t.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[i]=Ze.fromModelState(new ni(new x(a,1,a,1),0,new B(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=Ze.fromModelState(_t.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=Ze.fromModelState(_t.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return Ze.fromModelState(new ni(new x(1,1,1,1),0,new B(n,i),0))}static line(e,t,n,i,s){const o=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new B(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const c=e.model.getLineCount();let d=o.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),Ze.fromModelState(new ni(new x(o.lineNumber,1,d,u),0,new B(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Ze.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),Ze.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Ze.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return Ze.fromModelState(dt.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Ze(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return Ze.fromViewState(new ni(new x(n,i,n,i),0,new B(n,i),0))}static moveTo(e,t,n,i,s){const o=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new B(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Ze.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,s,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return o===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return o===2?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return o===2?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return o===2?t.map(a=>Ze.fromViewState(_t.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ze.fromModelState(_t.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return o===2?t.map(a=>Ze.fromViewState(_t.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ze.fromModelState(_t.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new Ze(t.modelState,t.viewState);{let o;s>n.endLineNumber-1?o=n.endLineNumber-1:s<n.startLineNumber?o=n.startLineNumber:o=s;const a=_t.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Ze.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(s=>Ze.fromViewState(_t.moveLeft(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);i[s]=Ze.fromViewState(_t.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveRight(e,t,n,i){return t.map(s=>Ze.fromViewState(_t.moveRight(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);i[s]=Ze.fromViewState(_t.moveRight(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveDownByViewLines(e,t,n,i){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ze.fromViewState(_t.moveDown(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ze.fromModelState(_t.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ze.fromViewState(_t.moveUp(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ze.fromModelState(_t.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return Ze.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return Ze.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}}var CC;(function(r){const e=function(n){if(!cs(n))return!1;const i=n;return!(!hs(i.to)||!xs(i.select)&&!YF(i.select)||!xs(i.by)&&!hs(i.by)||!xs(i.value)&&!Ic(i.value))};r.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},r.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case r.RawDirection.Left:i=0;break;case r.RawDirection.Right:i=1;break;case r.RawDirection.Up:i=2;break;case r.RawDirection.Down:i=3;break;case r.RawDirection.PrevBlankLine:i=4;break;case r.RawDirection.NextBlankLine:i=5;break;case r.RawDirection.WrappedLineStart:i=6;break;case r.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case r.RawDirection.WrappedLineColumnCenter:i=8;break;case r.RawDirection.WrappedLineEnd:i=9;break;case r.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case r.RawDirection.ViewPortTop:i=11;break;case r.RawDirection.ViewPortBottom:i=13;break;case r.RawDirection.ViewPortCenter:i=12;break;case r.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let s=0;switch(n.by){case r.RawUnit.Line:s=1;break;case r.RawUnit.WrappedLine:s=2;break;case r.RawUnit.Character:s=3;break;case r.RawUnit.HalfLine:s=4;break}return{direction:i,unit:s,select:!!n.select,value:n.value||1}}r.parse=t})(CC||(CC={}));function bf(r,e,t,n){const i=hf(e,t.startLineNumber,t.startColumn),s=n.getLanguageConfiguration(i.languageId);if(!s)return null;const o=i.getLineContent(),a=o.substr(0,t.startColumn-1-i.firstCharOffset);let l;t.isEmpty()?l=o.substr(t.startColumn-1-i.firstCharOffset):l=hf(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-i.firstCharOffset);let c="";if(t.startLineNumber>1&&i.firstCharOffset===0){const _=hf(e,t.startLineNumber-1);_.languageId===i.languageId&&(c=_.getLineContent())}const d=s.onEnter(r,c,a,l);if(!d)return null;const u=d.indentAction;let h=d.appendText;const f=d.removeText||0;h?u===yn.Indent&&(h="	"+h):u===yn.Indent||u===yn.IndentOutdent?h="	":h="";let g=F4(e,t.startLineNumber,t.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:h,removeText:f,indentation:g}}var nq=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iq=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const yS=Object.create(null);function pd(r,e){if(e<=0)return"";yS[r]||(yS[r]=["",r]);const t=yS[r];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+r;return t[e]}let dr=class IL{constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,s){const o=On.visibleColumnFromColumn(e,t,n);if(s){const a=pd(" ",i),c=On.prevIndentTabStop(o,i)/i;return pd(a,c)}else{const a="	",c=On.prevRenderTabStop(o,n)/n;return pd(a,c)}}static shiftIndent(e,t,n,i,s){const o=On.visibleColumnFromColumn(e,t,n);if(s){const a=pd(" ",i),c=On.nextIndentTabStop(o,i)/i;return pd(a,c)}else{const a="	",c=On.nextRenderTabStop(o,n)/n;return pd(a,c)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=n;u<=i;u++,c=d){d=0;const h=e.getLineContent(u);let f=Zi(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&On.visibleColumnFromColumn(h,f+1,s)%o!==0&&e.tokenization.isCheapToTokenize(u-1)){const b=bf(this._opts.autoIndent,e,new x(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(b){if(d=c,b.appendText)for(let v=0,C=b.appendText.length;v<C&&d<o&&b.appendText.charCodeAt(v)===32;v++)d++;b.removeText&&(d=Math.max(0,d-b.removeText));for(let v=0;v<d&&!(f===0||h.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=IL.unshiftIndent(h,f+1,s,o,a):g=IL.shiftIndent(h,f+1,s,o,a),this._addEditOperation(t,new x(u,1,u,f+1),g),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?pd(" ",o):"	";for(let d=n;d<=i;d++){const u=e.getLineContent(d);let h=Zi(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new x(d,1,d,h+1),"")}else this._addEditOperation(t,new x(d,1,d,1),c),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const i=t.getInverseEditOperations()[0];return new ue(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new ue(n.startLineNumber,i,n.endLineNumber,n.endColumn):new ue(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}};dr=nq([iq(2,_n)],dr);class sq{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new x(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new x(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new ue(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class rq{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new x(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new ue(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}}function oq(r,e,t){const n=r.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,s=-1;for(i=e-1;i>=1;i--){if(r.tokenization.getLanguageIdAtPosition(i,0)!==n)return s;const o=r.getLineContent(i);if(t.shouldIgnore(o)||/^\s+$/.test(o)||o===""){s=i;continue}return i}}return-1}function v1(r,e,t,n=!0,i){if(r<4)return null;const s=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(t<=1)return{indentation:"",action:null};const o=oq(e,t,s);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=e.getLineContent(o);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:Dt(a),action:yn.Indent,line:o};if(s.shouldDecrease(a))return{indentation:Dt(a),action:null,line:o};{if(o===1)return{indentation:Dt(e.getLineContent(o)),action:null,line:o};const l=o-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!s.shouldIndentNextLine(e.getLineContent(u))){d=u;break}return{indentation:Dt(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:Dt(e.getLineContent(o)),action:null,line:o};for(let d=o;d>0;d--){const u=e.getLineContent(d);if(s.shouldIncrease(u))return{indentation:Dt(u),action:yn.Indent,line:d};if(s.shouldIndentNextLine(u)){let h=0;for(let f=d-1;f>0;f--)if(!s.shouldIndentNextLine(e.getLineContent(d))){h=f;break}return{indentation:Dt(e.getLineContent(h+1)),action:null,line:h+1}}else if(s.shouldDecrease(u))return{indentation:Dt(u),action:null,line:d}}return{indentation:Dt(e.getLineContent(1)),action:null,line:1}}}function Jp(r,e,t,n,i,s){if(r<4)return null;const o=s.getLanguageConfiguration(t);if(!o)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=v1(r,e,n,void 0,s),c=e.getLineContent(n);if(l){const d=l.line;if(d!==void 0){const u=o.onEnter(r,"",e.getLineContent(d),"");if(u){let h=Dt(e.getLineContent(d));return u.removeText&&(h=h.substring(0,h.length-u.removeText)),u.indentAction===yn.Indent||u.indentAction===yn.IndentOutdent?h=i.shiftIndent(h):u.indentAction===yn.Outdent&&(h=i.unshiftIndent(h)),a.shouldDecrease(c)&&(h=i.unshiftIndent(h)),u.appendText&&(h+=u.appendText),Dt(h)}}return a.shouldDecrease(c)?l.action===yn.Indent?l.indentation:i.unshiftIndent(l.indentation):l.action===yn.Indent?i.shiftIndent(l.indentation):l.indentation}return null}function aq(r,e,t,n,i){if(r<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const s=e.tokenization.getLineTokens(t.startLineNumber),o=Vy(s,t.startColumn-1),a=o.getLineContent();let l=!1,c;o.firstCharOffset>0&&s.getLanguageId(0)!==o.languageId?(l=!0,c=a.substr(0,t.startColumn-1-o.firstCharOffset)):c=s.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-o.firstCharOffset):d=hf(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-o.firstCharOffset);const u=i.getLanguageConfiguration(o.languageId).indentRulesSupport;if(!u)return null;const h=c,f=Dt(c),g={tokenization:{getLineTokens:C=>e.tokenization.getLineTokens(C),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(C,y)=>e.getLanguageIdAtPosition(C,y)},getLineContent:C=>C===t.startLineNumber?h:e.getLineContent(C)},_=Dt(s.getLineContent()),b=v1(r,g,t.startLineNumber+1,void 0,i);if(!b){const C=l?_:f;return{beforeEnter:C,afterEnter:C}}let v=l?_:b.indentation;return b.action===yn.Indent&&(v=n.shiftIndent(v)),u.shouldDecrease(d)&&(v=n.unshiftIndent(v)),{beforeEnter:l?_:f,afterEnter:v}}function lq(r,e,t,n,i,s){if(r<4)return null;const o=hf(e,t.startLineNumber,t.startColumn);if(o.firstCharOffset)return null;const a=s.getLanguageConfiguration(o.languageId).indentRulesSupport;if(!a)return null;const l=o.getLineContent(),c=l.substr(0,t.startColumn-1-o.firstCharOffset);let d;if(t.isEmpty()?d=l.substr(t.startColumn-1-o.firstCharOffset):d=hf(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-o.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+n+d)){const u=v1(r,e,t.startLineNumber,!1,s);if(!u)return null;let h=u.indentation;return u.action!==yn.Indent&&(h=i.unshiftIndent(h)),h}return null}function e3(r,e,t){const n=t.getLanguageConfiguration(r.getLanguageId()).indentRulesSupport;return!n||e<1||e>r.getLineCount()?null:n.getIndentMetadata(r.getLineContent(e))}class Kt{static indent(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new dr(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new dr(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return n=n||1,dr.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,dr.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const s=[];for(let o=0,a=n.length;o<a;o++)s[o]=new si(n[o],i[o]);return new es(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){const o=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&i.indexOf(`
`)!==i.length-1&&(s=!1),s){const u=new x(d.lineNumber,1,d.lineNumber,1);o[a]=new FA(u,i,c,!0)}else o[a]=new si(c,i)}return new es(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));const o=va(n);if(o.length===t.length)return o}return null}static paste(e,t,n,i,s,o){const a=this._distributePasteToCursors(e,n,i,s,o);return a?(n=n.sort(x.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const o=v1(e.autoIndent,t,n,!1,e.languageConfigurationService);if(o)i=o.action,s=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(ga(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=bf(e.autoIndent,t,new x(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return i&&(i===yn.Indent&&(s=Kt.shiftIndent(e,s)),i===yn.Outdent&&(s=Kt.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="";const o=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)s+=" "}else s="	";return new si(n,s,i)}static tab(e,t,n){const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){i[s]=new si(new x(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[s]=new dr(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static compositionType(e,t,n,i,s,o,a,l){const c=i.map(d=>this._compositionType(n,d,s,o,a,l));return new es(4,c,{shouldPushStackElementBefore:rv(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),d=new x(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&o===0?null:new g0(d,n,0,o)}static _typeCommand(e,t,n){return n?new iv(e,t,!0):new si(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return Kt._typeCommand(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(i.startLineNumber),c=Dt(l).substring(0,i.startColumn-1);return Kt._typeCommand(i,`
`+e.normalizeIndentation(c),n)}const s=bf(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===yn.None)return Kt._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===yn.Indent)return Kt._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===yn.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),d=`
`+c+`
`+l;return n?new iv(i,d,!0):new g0(i,d,-1,c.length-l.length,!0)}else if(s.indentAction===yn.Outdent){const l=Kt.unshiftIndent(e,s.indentation);return Kt._typeCommand(i,`
`+e.normalizeIndentation(l+s.appendText),n)}}const o=t.getLineContent(i.startLineNumber),a=Dt(o).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=aq(e.autoIndent,t,i,{unshiftIndent:c=>Kt.unshiftIndent(e,c),shiftIndent:c=>Kt.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,i.getEndPosition());const d=i.endColumn,u=t.getLineContent(i.endLineNumber),h=Zi(u);if(h>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,h+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new iv(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new g0(i,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Kt._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=F4(t,n.startLineNumber,n.startColumn),o=lq(e.autoIndent,t,n,i,{shiftIndent:a=>Kt.shiftIndent(e,a),unshiftIndent:a=>Kt.unshiftIndent(e,a)},e.languageConfigurationService);if(o===null)return null;if(o!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Kt._typeCommand(new x(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+i,!1):Kt._typeCommand(new x(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==s)return!1;const h=ec(s);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&h)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let _=0,b=i.length;_<b;_++){const v=i[_];if(c.lineNumber===v.startLineNumber&&c.column===v.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){const o=[];for(let a=0,l=i.length;a<l;a++){const d=i[a].getPosition(),u=new x(d.lineNumber,d.column,d.lineNumber,d.column+1);o[a]=new si(u,s)}return new es(4,o,{shouldPushStackElementBefore:rv(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=i.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new x(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+i!==a.open){l=!1;break}l&&(o=a)}return o}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const o of i)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s}static _getAutoClosingPairClose(e,t,n,i,s){const o=ec(i),a=o?e.autoClosingQuotes:e.autoClosingBrackets,l=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const g of n)if(!g.isEmpty())return null;const c=n.map(g=>{const _=g.getPosition();return s?{lineNumber:_.lineNumber,beforeColumn:_.column-i.length,afterColumn:_.column}:{lineNumber:_.lineNumber,beforeColumn:_.column,afterColumn:_.column}}),d=this._findAutoClosingPairOpen(e,t,c.map(g=>new B(g.lineNumber,g.beforeColumn)),i);if(!d)return null;const u=this._findContainedAutoClosingPair(e,d),h=u?u.close:"";let f=!0;for(const g of c){const{lineNumber:_,beforeColumn:b,afterColumn:v}=g,C=t.getLineContent(_),y=C.substring(0,b-1),w=C.substring(v-1);if(w.startsWith(h)||(f=!1),w.length>0){const k=w.charAt(0);if(!Kt._isBeforeClosingBrace(e,w)&&!l(k))return null}if(d.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const k=wr(e.wordSeparators);if(y.length>0){const D=y.charCodeAt(y.length-1);if(k.get(D)===0)return null}}if(!t.tokenization.isCheapToTokenize(_))return null;t.tokenization.forceTokenization(_);const L=t.tokenization.getLineTokens(_),T=Vy(L,b-1);if(!d.shouldAutoClose(T,b-T.firstCharOffset))return null;const S=d.findNeutralCharacter();if(S){const k=t.tokenization.getTokenTypeIfInsertingCharacter(_,b,S);if(!d.isOK(k))return null}}return f?d.close.substring(0,d.close.length-h.length):d.close}static _runAutoClosingOpenCharType(e,t,n,i,s,o,a){const l=[];for(let c=0,d=i.length;c<d;c++){const u=i[c];l[c]=new t3(u,s,!o,a)}return new es(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return ec(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!Kt._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=ec(i);for(const o of n){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),d=l===o.startLineNumber?o.startColumn-1:0,u=l===o.endLineNumber?o.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(s&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(ec(l))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=t.surroundingPairs[s];o[a]=new sq(c,s,d)}return new es(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;const o=i.getPosition();n.tokenization.forceTokenization(o.lineNumber);const a=n.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(s,a,o.column)}catch(c){return We(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(d){if(d.startLineNumber===o.lineNumber)return null;const u=n.getLineContent(d.startLineNumber),h=Dt(u),f=t.normalizeIndentation(h),g=n.getLineContent(o.lineNumber),_=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,b=g.substring(_-1,o.column-1),v=f+b+s,C=new x(o.lineNumber,1,o.lineNumber,o.column),y=new si(C,v);return new es(wS(v,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,o){if(!i)return null;let a=null;for(const u of i)if(a===null)a=u.insertedText;else if(a!==u.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const u of i)if(u.deletedText.length!==0){c=!0;break}if(c){if(!Kt._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const u=ec(l);for(const g of i)if(g.deletedSelectionStart!==0||g.deletedSelectionEnd!==g.deletedText.length||/^[ \t]+$/.test(g.deletedText)||u&&ec(g.deletedText))return null;const h=[];for(const g of s){if(!g.isEmpty())return null;h.push(g.getPosition())}if(h.length!==i.length)return null;const f=[];for(let g=0,_=h.length;g<_;g++)f.push(new rq(h[g],i[g].deletedText,l));return new es(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,s,o,l)){const u=s.map(h=>new si(new x(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new es(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,n,s,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,n,s,l,!0,d):null}static typeWithInterceptors(e,t,n,i,s,o,a){if(!e&&a===`
`){const d=[];for(let u=0,h=s.length;u<h;u++)d[u]=Kt._enter(n,i,!1,s[u]);return new es(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){const d=[];let u=!1;for(let h=0,f=s.length;h<f;h++)if(d[h]=this._runAutoIndentType(n,i,s[h],a),!d[h]){u=!0;break}if(!u)return new es(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,i,s,o,a))return this._runAutoClosingOvertype(t,n,i,s,a);if(!e){const d=this._getAutoClosingPairClose(n,i,s,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,i,s,a,!1,d)}if(!e&&this._isSurroundSelectionType(n,i,s,a))return this._runSurroundSelectionType(t,n,i,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const d=this._typeInterceptorElectricChar(t,n,i,s[0],a);if(d)return d}const l=[];for(let d=0,u=s.length;d<u;d++)l[d]=new si(s[d],a);const c=wS(a,t);return new es(c,l,{shouldPushStackElementBefore:rv(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){const o=[];for(let l=0,c=i.length;l<c;l++)o[l]=new si(i[l],s);const a=wS(s,e);return new es(a,o,{shouldPushStackElementBefore:rv(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,o=n.length;s<o;s++){let a=n[s].positionLineNumber;if(a===1)i[s]=new iv(new x(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new x(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].positionLineNumber,l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new x(a,l,a,l))}return i}static lineBreakInsert(e,t,n){const i=[];for(let s=0,o=n.length;s<o;s++)i[s]=this._enter(e,t,!0,n[s]);return i}}class t3 extends g0{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new x(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new x(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}class cq{constructor(e,t,n,i,s,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=s,this.insertedSelectionEnd=o}}function wS(r,e){return r===" "?e===5||e===6?6:5:4}function rv(r,e){return ER(r)&&!ER(e)?!0:r===5?!1:DR(r)!==DR(e)}function DR(r){return r===6||r===5?"space":r}function ER(r){return r===4||r===5||r===6}var A;(function(r){r.editorSimpleInput=new ge("editorSimpleInput",!1,!0),r.editorTextFocus=new ge("editorTextFocus",!1,p("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),r.focus=new ge("editorFocus",!1,p("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),r.textInputFocus=new ge("textInputFocus",!1,p("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),r.readOnly=new ge("editorReadonly",!1,p("editorReadonly","Whether the editor is read only")),r.inDiffEditor=new ge("inDiffEditor",!1,p("inDiffEditor","Whether the context is a diff editor")),r.columnSelection=new ge("editorColumnSelection",!1,p("editorColumnSelection","Whether `editor.columnSelection` is enabled")),r.writable=r.readOnly.toNegated(),r.hasNonEmptySelection=new ge("editorHasSelection",!1,p("editorHasSelection","Whether the editor has text selected")),r.hasOnlyEmptySelection=r.hasNonEmptySelection.toNegated(),r.hasMultipleSelections=new ge("editorHasMultipleSelections",!1,p("editorHasMultipleSelections","Whether the editor has multiple selections")),r.hasSingleSelection=r.hasMultipleSelections.toNegated(),r.tabMovesFocus=new ge("editorTabMovesFocus",!1,p("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),r.tabDoesNotMoveFocus=r.tabMovesFocus.toNegated(),r.isInWalkThroughSnippet=new ge("isInEmbeddedEditor",!1,!0),r.canUndo=new ge("canUndo",!1,!0),r.canRedo=new ge("canRedo",!1,!0),r.hoverVisible=new ge("editorHoverVisible",!1,p("editorHoverVisible","Whether the editor hover is visible")),r.inCompositeEditor=new ge("inCompositeEditor",void 0,p("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),r.notInCompositeEditor=r.inCompositeEditor.toNegated(),r.languageId=new ge("editorLangId","",p("editorLangId","The language identifier of the editor")),r.hasCompletionItemProvider=new ge("editorHasCompletionItemProvider",!1,p("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),r.hasCodeActionsProvider=new ge("editorHasCodeActionsProvider",!1,p("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),r.hasCodeLensProvider=new ge("editorHasCodeLensProvider",!1,p("editorHasCodeLensProvider","Whether the editor has a code lens provider")),r.hasDefinitionProvider=new ge("editorHasDefinitionProvider",!1,p("editorHasDefinitionProvider","Whether the editor has a definition provider")),r.hasDeclarationProvider=new ge("editorHasDeclarationProvider",!1,p("editorHasDeclarationProvider","Whether the editor has a declaration provider")),r.hasImplementationProvider=new ge("editorHasImplementationProvider",!1,p("editorHasImplementationProvider","Whether the editor has an implementation provider")),r.hasTypeDefinitionProvider=new ge("editorHasTypeDefinitionProvider",!1,p("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),r.hasHoverProvider=new ge("editorHasHoverProvider",!1,p("editorHasHoverProvider","Whether the editor has a hover provider")),r.hasDocumentHighlightProvider=new ge("editorHasDocumentHighlightProvider",!1,p("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),r.hasDocumentSymbolProvider=new ge("editorHasDocumentSymbolProvider",!1,p("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),r.hasReferenceProvider=new ge("editorHasReferenceProvider",!1,p("editorHasReferenceProvider","Whether the editor has a reference provider")),r.hasRenameProvider=new ge("editorHasRenameProvider",!1,p("editorHasRenameProvider","Whether the editor has a rename provider")),r.hasSignatureHelpProvider=new ge("editorHasSignatureHelpProvider",!1,p("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),r.hasInlayHintsProvider=new ge("editorHasInlayHintsProvider",!1,p("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),r.hasDocumentFormattingProvider=new ge("editorHasDocumentFormattingProvider",!1,p("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),r.hasDocumentSelectionFormattingProvider=new ge("editorHasDocumentSelectionFormattingProvider",!1,p("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),r.hasMultipleDocumentFormattingProvider=new ge("editorHasMultipleDocumentFormattingProvider",!1,p("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),r.hasMultipleDocumentSelectionFormattingProvider=new ge("editorHasMultipleDocumentSelectionFormattingProvider",!1,p("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(A||(A={}));const pt=0;class un extends Un{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}var yC;(function(r){const e=function(n){if(!cs(n))return!1;const i=n;return!(!hs(i.to)||!xs(i.by)&&!hs(i.by)||!xs(i.value)&&!Ic(i.value)||!xs(i.revealCursor)&&!YF(i.revealCursor))};r.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},r.RawDirection={Up:"up",Down:"down"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor"};function t(n){let i;switch(n.to){case r.RawDirection.Up:i=1;break;case r.RawDirection.Down:i=2;break;default:return null}let s;switch(n.by){case r.RawUnit.Line:s=1;break;case r.RawUnit.WrappedLine:s=2;break;case r.RawUnit.Page:s=3;break;case r.RawUnit.HalfPage:s=4;break;case r.RawUnit.Editor:s=5;break;default:s=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:s,value:o,revealCursor:a,select:!!n.select}}r.parse=t})(yC||(yC={}));var Jh;(function(r){const e=function(t){if(!cs(t))return!1;const n=t;return!(!Ic(n.lineNumber)&&!hs(n.lineNumber)||!xs(n.at)&&!hs(n.at))};r.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},r.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Jh||(Jh={}));class NL{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(bt).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(bt).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}var zn;(function(r){class e extends un{constructor(C){super(C),this._minimalReveal=C.minimalReveal,this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,[ti.moveTo(C,C.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&C.revealPrimaryCursor(y.source,!0,this._minimalReveal)}}r.MoveTo=te(new e({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),r.MoveToSelect=te(new e({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class t extends un{runCoreEditorCommand(C,y){C.model.pushStackElement();const w=this._getColumnSelectResult(C,C.getPrimaryCursorState(),C.getCursorColumnSelectData(),y);C.setCursorStates(y.source,3,w.viewStates.map(L=>Ze.fromViewState(L))),C.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:w.fromLineNumber,fromViewVisualColumn:w.fromVisualColumn,toViewLineNumber:w.toLineNumber,toViewVisualColumn:w.toVisualColumn}),w.reversed?C.revealTopMostCursor(y.source):C.revealBottomMostCursor(y.source)}}r.ColumnSelect=te(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,C,y,w){const L=v.model.validatePosition(w.position),T=v.coordinatesConverter.validateViewPosition(new B(w.viewPosition.lineNumber,w.viewPosition.column),L),S=w.doColumnSelect?y.fromViewLineNumber:T.lineNumber,k=w.doColumnSelect?y.fromViewVisualColumn:w.mouseColumn-1;return Dd.columnSelect(v.cursorConfig,v,S,k,T.lineNumber,w.mouseColumn-1)}}),r.CursorColumnSelectLeft=te(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(v,C,y,w){return Dd.columnSelectLeft(v.cursorConfig,v,y)}}),r.CursorColumnSelectRight=te(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(v,C,y,w){return Dd.columnSelectRight(v.cursorConfig,v,y)}});class n extends t{constructor(C){super(C),this._isPaged=C.isPaged}_getColumnSelectResult(C,y,w,L){return Dd.columnSelectUp(C.cursorConfig,C,w,this._isPaged)}}r.CursorColumnSelectUp=te(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3600,linux:{primary:0}}})),r.CursorColumnSelectPageUp=te(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(C){super(C),this._isPaged=C.isPaged}_getColumnSelectResult(C,y,w,L){return Dd.columnSelectDown(C.cursorConfig,C,w,this._isPaged)}}r.CursorColumnSelectDown=te(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3602,linux:{primary:0}}})),r.CursorColumnSelectPageDown=te(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends un{constructor(){super({id:"cursorMove",precondition:void 0,description:CC.description})}runCoreEditorCommand(C,y){const w=CC.parse(y);w&&this._runCursorMove(C,y.source,w)}_runCursorMove(C,y,w){C.model.pushStackElement(),C.setCursorStates(y,3,s._move(C,C.getCursorStates(),w)),C.revealPrimaryCursor(y,!0)}static _move(C,y,w){const L=w.select,T=w.value;switch(w.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ti.simpleMove(C,y,w.direction,L,T,w.unit);case 11:case 13:case 12:case 14:return ti.viewportMove(C,y,w.direction,L,T);default:return null}}}r.CursorMoveImpl=s,r.CursorMove=te(new s);class o extends un{constructor(C){super(C),this._staticArgs=C.args}runCoreEditorCommand(C,y){let w=this._staticArgs;this._staticArgs.value===-1&&(w={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||C.cursorConfig.pageSize}),C.model.pushStackElement(),C.setCursorStates(y.source,3,ti.simpleMove(C,C.getCursorStates(),w.direction,w.select,w.value,w.unit)),C.revealPrimaryCursor(y.source,!0)}}r.CursorLeft=te(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),r.CursorLeftSelect=te(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1039}})),r.CursorRight=te(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),r.CursorRightSelect=te(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1041}})),r.CursorUp=te(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),r.CursorUpSelect=te(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),r.CursorPageUp=te(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:11}})),r.CursorPageUpSelect=te(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1035}})),r.CursorDown=te(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),r.CursorDownSelect=te(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),r.CursorPageDown=te(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:12}})),r.CursorPageDownSelect=te(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1036}})),r.CreateCursor=te(new class extends un{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,C){let y;C.wholeLine?y=ti.line(v,v.getPrimaryCursorState(),!1,C.position,C.viewPosition):y=ti.moveTo(v,v.getPrimaryCursorState(),!1,C.position,C.viewPosition);const w=v.getCursorStates();if(w.length>1){const L=y.modelState?y.modelState.position:null,T=y.viewState?y.viewState.position:null;for(let S=0,k=w.length;S<k;S++){const D=w[S];if(!(L&&!D.modelState.selection.containsPosition(L))&&!(T&&!D.viewState.selection.containsPosition(T))){w.splice(S,1),v.model.pushStackElement(),v.setCursorStates(C.source,3,w);return}}}w.push(y),v.model.pushStackElement(),v.setCursorStates(C.source,3,w)}}),r.LastCursorMoveToSelect=te(new class extends un{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,C){const y=v.getLastAddedCursorIndex(),w=v.getCursorStates(),L=w.slice(0);L[y]=ti.moveTo(v,w[y],!0,C.position,C.viewPosition),v.model.pushStackElement(),v.setCursorStates(C.source,3,L)}});class a extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,ti.moveToBeginningOfLine(C,C.getCursorStates(),this._inSelectionMode)),C.revealPrimaryCursor(y.source,!0)}}r.CursorHome=te(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),r.CursorHomeSelect=te(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,this._exec(C.getCursorStates())),C.revealPrimaryCursor(y.source,!0)}_exec(C){const y=[];for(let w=0,L=C.length;w<L;w++){const T=C[w],S=T.modelState.position.lineNumber;y[w]=Ze.fromModelState(T.modelState.move(this._inSelectionMode,S,1,0))}return y}}r.CursorLineStart=te(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:0,mac:{primary:287}}})),r.CursorLineStartSelect=te(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,ti.moveToEndOfLine(C,C.getCursorStates(),this._inSelectionMode,y.sticky||!1)),C.revealPrimaryCursor(y.source,!0)}}r.CursorEnd=te(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:pt,kbExpr:A.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),r.CursorEndSelect=te(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:pt,kbExpr:A.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,this._exec(C,C.getCursorStates())),C.revealPrimaryCursor(y.source,!0)}_exec(C,y){const w=[];for(let L=0,T=y.length;L<T;L++){const S=y[L],k=S.modelState.position.lineNumber,D=C.model.getLineMaxColumn(k);w[L]=Ze.fromModelState(S.modelState.move(this._inSelectionMode,k,D,0))}return w}}r.CursorLineEnd=te(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:0,mac:{primary:291}}})),r.CursorLineEndSelect=te(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,ti.moveToBeginningOfBuffer(C,C.getCursorStates(),this._inSelectionMode)),C.revealPrimaryCursor(y.source,!0)}}r.CursorTop=te(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:2062,mac:{primary:2064}}})),r.CursorTopSelect=te(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,ti.moveToEndOfBuffer(C,C.getCursorStates(),this._inSelectionMode)),C.revealPrimaryCursor(y.source,!0)}}r.CursorBottom=te(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:2061,mac:{primary:2066}}})),r.CursorBottomSelect=te(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends un{constructor(){super({id:"editorScroll",precondition:void 0,description:yC.description})}runCoreEditorCommand(C,y){const w=yC.parse(y);w&&this._runEditorScroll(C,y.source,w)}_runEditorScroll(C,y,w){const L=this._computeDesiredScrollTop(C,w);if(w.revealCursor){const T=C.getCompletelyVisibleViewRangeAtScrollTop(L);C.setCursorStates(y,3,[ti.findPositionInViewportIfOutside(C,C.getPrimaryCursorState(),T,w.select)])}C.viewLayout.setScrollPosition({scrollTop:L},0)}_computeDesiredScrollTop(C,y){if(y.unit===1){const T=C.getCompletelyVisibleViewRange(),S=C.coordinatesConverter.convertViewRangeToModelRange(T);let k;y.direction===1?k=Math.max(1,S.startLineNumber-y.value):k=Math.min(C.model.getLineCount(),S.startLineNumber+y.value);const D=C.coordinatesConverter.convertModelPositionToViewPosition(new B(k,1));return C.viewLayout.getVerticalOffsetForLineNumber(D.lineNumber)}if(y.unit===5){let T=0;return y.direction===2&&(T=C.model.getLineCount()-C.cursorConfig.pageSize),C.viewLayout.getVerticalOffsetForLineNumber(T)}let w;y.unit===3?w=C.cursorConfig.pageSize*y.value:y.unit===4?w=Math.round(C.cursorConfig.pageSize/2)*y.value:w=y.value;const L=(y.direction===1?-1:1)*w;return C.viewLayout.getCurrentScrollTop()+L*C.cursorConfig.lineHeight}}r.EditorScrollImpl=f,r.EditorScroll=te(new f),r.ScrollLineUp=te(new class extends un{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(v,C){r.EditorScroll._runEditorScroll(v,C.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageUp=te(new class extends un{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(v,C){r.EditorScroll._runEditorScroll(v,C.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),r.ScrollEditorTop=te(new class extends un{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus}})}runCoreEditorCommand(v,C){r.EditorScroll._runEditorScroll(v,C.source,{direction:1,unit:5,value:1,revealCursor:!1,select:!1})}}),r.ScrollLineDown=te(new class extends un{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(v,C){r.EditorScroll._runEditorScroll(v,C.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageDown=te(new class extends un{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(v,C){r.EditorScroll._runEditorScroll(v,C.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}}),r.ScrollEditorBottom=te(new class extends un{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus}})}runCoreEditorCommand(v,C){r.EditorScroll._runEditorScroll(v,C.source,{direction:2,unit:5,value:1,revealCursor:!1,select:!1})}});class g extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,[ti.word(C,C.getPrimaryCursorState(),this._inSelectionMode,y.position)]),C.revealPrimaryCursor(y.source,!0)}}r.WordSelect=te(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),r.WordSelectDrag=te(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),r.LastCursorWordSelect=te(new class extends un{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,C){const y=v.getLastAddedCursorIndex(),w=v.getCursorStates(),L=w.slice(0),T=w[y];L[y]=ti.word(v,T,T.modelState.hasSelection(),C.position),v.model.pushStackElement(),v.setCursorStates(C.source,3,L)}});class _ extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){C.model.pushStackElement(),C.setCursorStates(y.source,3,[ti.line(C,C.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),C.revealPrimaryCursor(y.source,!1)}}r.LineSelect=te(new _({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),r.LineSelectDrag=te(new _({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class b extends un{constructor(C){super(C),this._inSelectionMode=C.inSelectionMode}runCoreEditorCommand(C,y){const w=C.getLastAddedCursorIndex(),L=C.getCursorStates(),T=L.slice(0);T[w]=ti.line(C,L[w],this._inSelectionMode,y.position,y.viewPosition),C.model.pushStackElement(),C.setCursorStates(y.source,3,T)}}r.LastCursorLineSelect=te(new b({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),r.LastCursorLineSelectDrag=te(new b({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),r.CancelSelection=te(new class extends un{constructor(){super({id:"cancelSelection",precondition:A.hasNonEmptySelection,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,[ti.cancelSelection(v,v.getPrimaryCursorState())]),v.revealPrimaryCursor(C.source,!0)}}),r.RemoveSecondaryCursors=te(new class extends un{constructor(){super({id:"removeSecondaryCursors",precondition:A.hasMultipleSelections,kbOpts:{weight:pt+1,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,[v.getPrimaryCursorState()]),v.revealPrimaryCursor(C.source,!0),aC(p("removedCursor","Removed secondary cursors"))}}),r.RevealLine=te(new class extends un{constructor(){super({id:"revealLine",precondition:void 0,description:Jh.description})}runCoreEditorCommand(v,C){const y=C,w=y.lineNumber||0;let L=typeof w=="number"?w+1:parseInt(w)+1;L<1&&(L=1);const T=v.model.getLineCount();L>T&&(L=T);const S=new x(L,1,L,v.model.getLineMaxColumn(L));let k=0;if(y.at)switch(y.at){case Jh.RawAtArgument.Top:k=3;break;case Jh.RawAtArgument.Center:k=1;break;case Jh.RawAtArgument.Bottom:k=4;break}const D=v.coordinatesConverter.convertModelRangeToViewRange(S);v.revealRange(C.source,!1,D,k,0)}}),r.SelectAll=new class extends NL{constructor(){super(tz)}runDOMCommand(){Ys&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(v,C,y){const w=C._getViewModel();w&&this.runCoreEditorCommand(w,y)}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates("keyboard",3,[ti.selectAll(v,v.getPrimaryCursorState())])}},r.SetSelection=te(new class extends un{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,[Ze.fromModelSelection(C.selection)])}})})(zn||(zn={}));const dq=le.and(A.textInputFocus,A.columnSelection);function Ng(r,e){Ms.registerKeybindingRule({id:r,primary:e,when:dq,weight:pt+1})}Ng(zn.CursorColumnSelectLeft.id,1039);Ng(zn.CursorColumnSelectRight.id,1041);Ng(zn.CursorColumnSelectUp.id,1040);Ng(zn.CursorColumnSelectPageUp.id,1035);Ng(zn.CursorColumnSelectDown.id,1042);Ng(zn.CursorColumnSelectPageDown.id,1036);function AR(r){return r.register(),r}var vf;(function(r){class e extends Un{runEditorCommand(n,i,s){const o=i._getViewModel();o&&this.runCoreEditingCommand(i,o,s||{})}}r.CoreEditingCommand=e,r.LineBreakInsert=te(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:A.writable,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Kt.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),r.Outdent=te(new class extends e{constructor(){super({id:"outdent",precondition:A.writable,kbOpts:{weight:pt,kbExpr:le.and(A.editorTextFocus,A.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Kt.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),r.Tab=te(new class extends e{constructor(){super({id:"tab",precondition:A.writable,kbOpts:{weight:pt,kbExpr:le.and(A.editorTextFocus,A.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Kt.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),r.DeleteLeft=te(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[s,o]=bu.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),r.DeleteRight=te(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:pt,kbExpr:A.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[s,o]=bu.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),r.Undo=new class extends NL{constructor(){super(L5)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(83)===!0))return n.getModel().undo()}},r.Redo=new class extends NL{constructor(){super(T5)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(83)===!0))return n.getModel().redo()}}})(vf||(vf={}));class IR extends l1{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(bt).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function Yu(r,e){AR(new IR("default:"+r,r)),AR(new IR(r,r,e))}Yu("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Yu("replacePreviousChar");Yu("compositionType");Yu("compositionStart");Yu("compositionEnd");Yu("paste");Yu("cut");class uq{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){zn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new B(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Ti&&t.get(98),i=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){zn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){zn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),zn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),zn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){zn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){zn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){zn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){zn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){zn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){zn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){zn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){zn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){zn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class C1{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return C1.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),n}}var SS;class n3{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let s=0,o=0;for(let l=n;l<=i;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(s=c,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,o)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),s=this.getEndLineNumber();let o=!1;for(let a=e;a<=n;a++)a>=i&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let u=0;u<n;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),i=!0}}return i}}class i3{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new n3(()=>this._host.createVisibleLine())}_createDomNode(){const e=at(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(133)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new ll(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class ll{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let o=t;o<=n;o++)s.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const o=t,a=Math.min(n,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,i,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const o=s.rendLineNumberStart+s.linesLength,a=n;o<=a&&(this._insertLinesAfter(s,o,a,i,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const o=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-o+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=o+l;a[l].layoutLine(c,i[c-s])}}_insertLinesBefore(e,t,n,i,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const s=e.lines[n+i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){ll._ttPolicy&&(n=ll._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");ll._ttPolicy&&(t=ll._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(n[s]){const a=i.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const i=ll._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let c=!1;for(let d=0;d<s;d++){const u=o[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,n[d],this.viewportData,i))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let c=!1;const d=[];for(let u=0;u<s;u++){const h=o[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,n[u],this.viewportData,i))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,i.build(),d)}}}ll._ttPolicy=(SS=window.trustedTypes)===null||SS===void 0?void 0:SS.createPolicy("editorViewLayer",{createHTML:r=>r});ll._sb=Mc(1e5);class s3 extends er{constructor(e){super(e),this._visibleLines=new i3(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new hq(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class hq{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(61),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=at(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(61)}renderLine(e,t,n,i){let s="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const l=this._dynamicOverlays[o];s+=l.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(s),i.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class fq extends s3{constructor(e){super(e);const n=this._context.configuration.options.get(133);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(133);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class gq extends s3{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(133);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),xi(this.domNode,t.get(46))}onConfigurationChanged(e){const t=this._context.configuration.options;xi(this.domNode,t.get(46));const n=t.get(133);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class op{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class pq extends er{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=at(document.createElement("div")),ya.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=at(document.createElement("div")),ya.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new mq(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i){this._widgets[e.getId()].setPosition(t,n,i),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let mq=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=at(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(133);this._fixedOverflowWidgets=i.get(38),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(61),this._range=null,this._viewRange=null,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(61),e.hasChanged(133)){const n=t.get(133);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range,this._affinity)}_setPosition(e,t){var n;if(this._range=e,this._viewRange=null,this._affinity=t,this._range){const i=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(i,(n=this._affinity)!==null&&n!==void 0?n:void 0))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t,n){this._setPosition(e,n),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i,s){const o=e.top,a=o,l=t.top+this._lineHeight,c=s.viewportHeight-l,d=o-i,u=a>=i,h=l,f=c>=i;let g=e.left,_=t.left;return g+n>s.scrollLeft+s.viewportWidth&&(g=s.scrollLeft+s.viewportWidth-n),_+n>s.scrollLeft+s.viewportWidth&&(_=s.scrollLeft+s.viewportWidth-n),g<s.scrollLeft&&(g=s.scrollLeft),_<s.scrollLeft&&(_=s.scrollLeft),{fitsAbove:u,aboveTop:d,aboveLeft:g,fitsBelow:f,belowTop:h,belowLeft:_}}_layoutHorizontalSegmentInPage(e,t,n,i){const s=Math.max(0,t.left-i),o=Math.min(t.left+t.width+i,e.width);let a=t.left+n-xl.scrollX;if(a+i>o){const l=a-(o-i);a-=l,n-=l}if(a<s){const l=a-s;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,i,s){const o=e.top-i,a=t.top+this._lineHeight,l=wi(this._viewDomNode.domNode),c=l.top+o-xl.scrollY,d=l.top+a-xl.scrollY,u=Qy(document.body),[h,f]=this._layoutHorizontalSegmentInPage(u,l,e.left-s.scrollLeft+this._contentLeft,n),[g,_]=this._layoutHorizontalSegmentInPage(u,l,t.left-s.scrollLeft+this._contentLeft,n),b=22,v=22,C=c>=b,y=d+i<=u.height-v;return this._fixedOverflowWidgets?{fitsAbove:C,aboveTop:Math.max(c,b),aboveLeft:f,fitsBelow:y,belowTop:d,belowLeft:_}:{fitsAbove:C,aboveTop:o,aboveLeft:h,fitsBelow:y,belowTop:a,belowLeft:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new op(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],i=t[0];for(const u of t)u.lineNumber<n.lineNumber&&(n=u),u.lineNumber>i.lineNumber&&(i=u);let s=1073741824;for(const u of n.ranges)u.left<s&&(s=u.left);let o=1073741824;for(const u of i.ranges)u.left<o&&(o=u.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new op(a,s),c=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,d=new op(c,o);return[l,d]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let s=null;if(typeof this._actual.beforeRender=="function"&&(s=xS(this._actual.beforeRender,this._actual)),s)this._cachedDomNodeOffsetWidth=s.width,this._cachedDomNodeOffsetHeight=s.height;else{const a=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(a.width),this._cachedDomNodeOffsetHeight=Math.round(a.height)}}let i;this.allowEditorOverflow?i=this._layoutBoxInPage(t,n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):i=this._layoutBoxInViewport(t,n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let s=1;s<=2;s++)for(const o of this._preference)if(o===1){if(!i)return null;if(s===2||i.fitsAbove)return{coordinate:new op(i.aboveTop,i.aboveLeft),position:1}}else if(o===2){if(!i)return null;if(s===2||i.fitsBelow)return{coordinate:new op(i.belowTop,i.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&xS(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&xS(this._actual.afterRender,this._actual,this._renderData.position)}};function xS(r,e,...t){try{return r.call(e,...t)}catch{return null}}class r3 extends Ig{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new ue(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(i=>i.positionLineNumber);t.sort((i,s)=>i-s),qs(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const n=this._selections.every(i=>i.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=i;l++){const c=l-n;for(;o<s&&this._cursorLineNumbers[o]<l;)o++;o<s&&this._cursorLineNumbers[o]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class _q extends r3{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class bq extends r3{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Vt((r,e)=>{const t=r.getColor($5);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||r.defines(TR)){const n=r.getColor(TR);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),Li(r.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class vq extends Ig{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(n[i++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:x.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=o;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',u=Math.max(c.range.startLineNumber,s),h=Math.min(c.range.endLineNumber,o);for(let f=u;f<=h;f++){const g=f-s;n[g]+=d}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.options.isWholeLine)continue;const h=u.options.className,f=Boolean(u.options.showIfCollapsed);let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new x(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),o===h&&a===f&&x.areIntersectingOrTouching(l,g)){l=x.plusRange(l,g);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,i,s,n),o=h,a=f,l=g}o!==null&&this._renderNormalDecoration(e,l,o,a,i,s,n)}_renderNormalDecoration(e,t,n,i,s,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const u=l[c];if(u.outsideRenderedLine)continue;const h=u.lineNumber-o;if(i&&u.ranges.length===1){const f=u.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),_=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new m1(_,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=u.ranges.length;f<g;f++){const _=u.ranges[f],b='<div class="cdr '+n+'" style="left:'+String(_.left)+"px;width:"+String(_.width)+"px;height:"+s+'px;"></div>';a[h]+=b}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Yr extends j{onclick(e,t){this._register(Z(e,he.CLICK,n=>t(new aa(n))))}onmousedown(e,t){this._register(Z(e,he.MOUSE_DOWN,n=>t(new aa(n))))}onmouseover(e,t){this._register(Z(e,he.MOUSE_OVER,n=>t(new aa(n))))}onmouseleave(e,t){this._register(Z(e,he.MOUSE_LEAVE,n=>t(new aa(n))))}onkeydown(e,t){this._register(Z(e,he.KEY_DOWN,n=>t(new jt(n))))}onkeyup(e,t){this._register(Z(e,he.KEY_UP,n=>t(new jt(n))))}oninput(e,t){this._register(Z(e,he.INPUT,t))}onblur(e,t){this._register(Z(e,he.BLUR,t))}onfocus(e,t){this._register(Z(e,he.FOCUS,t))}ignoreGesture(e){kt.ignoreTarget(e)}}const Gf=11;class Cq extends Yr{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=Gf+"px",this.domNode.style.height=Gf+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Eg),this._register(Hn(this.bgDomNode,he.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Hn(this.domNode,he.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new eb),this._pointerdownScheduleRepeatTimer=this._register(new Js)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class yq extends j{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Js)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const wq=140;class o3 extends Yr{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new yq(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Eg),this._shouldRender=!0,this.domNode=at(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Z(this.domNode.domNode,he.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new Cq(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=at(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Z(this.slider.domNode,he.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);n<=s&&s<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const s=wi(this.domNode.domNode);t=e.pageX-s.left,n=e.pageY-s.top}const i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const o=this._sliderOrthogonalPointerPosition(s),a=Math.abs(o-n);if(hi&&a>wq){this._setDesiredScrollPositionNow(i.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const Sq=20;class Zm{constructor(e,t,n,i,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Zm(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(Sq,Math.floor(n*a/i))),d=(a-c)/(i-n),u=s*d;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=Zm._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class xq extends o3{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Zm(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-Gf)/2,a=(t.horizontalScrollbarSize-Gf)/2;this._createArrow({className:"scra",icon:m.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Wf(null,1,0))}),this._createArrow({className:"scra",icon:m.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Wf(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class kq extends o3{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Zm(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-Gf)/2,a=(t.verticalScrollbarSize-Gf)/2;this._createArrow({className:"scra",icon:m.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Wf(null,0,1))}),this._createArrow({className:"scra",icon:m.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Wf(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class wC{constructor(e,t,n,i,s,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,s=s|0,o=o|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),s<0&&(s=0),a+s>o&&(a=o-s),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=s,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new wC(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new wC(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class lb extends j{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new R),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new wC(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),(n=this._smoothScrolling)===null||n===void 0||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new Ym(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=Ym.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class NR{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function kS(r,e){const t=e-r;return function(n){return r+t*Dq(n)}}function Lq(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}class Ym{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,o;return e<t?(s=e+.75*n,o=t-.75*n):(s=e-.75*n,o=t+.75*n),Lq(kS(e,s),kS(o,t),.33)}return kS(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new NR(n,i,!1)}return new NR(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return Ym.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new Ym(e,t,i,n)}}function Tq(r){return Math.pow(r,3)}function Dq(r){return 1-Tq(1-r)}const Eq=500,MR=50;class Aq{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class ML{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const i=new Aq(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}ML.INSTANCE=new ML;class BA extends Yr{constructor(e,t,n){super(),this._onScroll=this._register(new R),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new R),e.style.overflow="hidden",this._options=Iq(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const i={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new kq(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new xq(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=at(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=at(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=at(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new Js),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=ut(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Je&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ut(this._mouseWheelToDispose),e)){const n=i=>{this._onMouseWheel(new Wf(i))};this._mouseWheelToDispose.push(Z(this._listenOnDomNode,he.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=ML.INSTANCE;{const s=window.devicePixelRatio/w4();hi||Ti?t.accept(Date.now(),e.deltaX/s,e.deltaY/s):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(s)>=Math.abs(o)?o=0:s=0),this._options.flipAxes&&([s,o]=[o,s]);const a=!Je&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(s){const d=MR*s,u=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,u)}if(o){const d=MR*o,u=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,u)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Eq)}}class a3 extends BA{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new lb({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>To(i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class WA extends BA{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class cb extends BA{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new lb({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>To(i)});super(e,t,n),this._register(n),this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function Iq(r){const e={lazyRender:typeof r.lazyRender<"u"?r.lazyRender:!1,className:typeof r.className<"u"?r.className:"",useShadows:typeof r.useShadows<"u"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel<"u"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes<"u"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded<"u"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel<"u"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX<"u"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity<"u"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity<"u"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis<"u"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll<"u"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize<"u"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode<"u"?r.listenOnDomNode:null,horizontal:typeof r.horizontal<"u"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize<"u"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows<"u"?r.horizontalHasArrows:!1,vertical:typeof r.vertical<"u"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize<"u"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows<"u"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize<"u"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage<"u"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize<"u"?r.verticalSliderSize:e.verticalScrollbarSize,Je&&(e.className+=" mac"),e}class Nq extends er{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,o=s.get(94),a=s.get(69),l=s.get(36),c=s.get(97),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+uC(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new WA(t.domNode,d,this._context.viewLayout.getScrollable())),ya.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=at(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,g)=>{const _={};if(f){const b=h.scrollTop;b&&(_.scrollTop=this._context.viewLayout.getCurrentScrollTop()+b,h.scrollTop=0)}if(g){const b=h.scrollLeft;b&&(_.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+b,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(_,1)};this._register(Z(n.domNode,"scroll",h=>u(n.domNode,!0,!0))),this._register(Z(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(Z(i.domNode,"scroll",h=>u(i.domNode,!0,!1))),this._register(Z(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(133);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(67).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}onConfigurationChanged(e){if(e.hasChanged(94)||e.hasChanged(69)||e.hasChanged(36)){const t=this._context.configuration.options,n=t.get(94),i=t.get(69),s=t.get(36),o=t.get(97),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(133)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+uC(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}Vt((r,e)=>{const t=r.getColor(Ag);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=r.getColor(Fd);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=r.getColor(Bd);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const s=r.getColor(Wd);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${s};
			}
		`)});class SC{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class VA extends Ig{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,o=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.className;let u=Math.max(c.startLineNumber,e)-e;const h=Math.min(c.endLineNumber,t)-e;s===d?(u=Math.max(o+1,u),o=Math.max(o,h)):(s=d,o=h);for(let f=u;f<=o;f++)i[f].push(s)}return i}}class Mq extends VA{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.glyphMarginClassName;l&&(n[i++]=new SC(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+s+'px;"></div>',c=[];for(let d=t;d<=n;d++){const u=d-t,h=i[u];h.length===0?c[u]="":c[u]='<div class="cgmr codicon '+h.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class l3 extends j{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function y1(r,e){let t=0,n=0;const i=r.length;for(;n<i;){const s=r.charCodeAt(n);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;n++}return n===i?-1:t}var Yd;(function(r){r[r.Disabled=0]="Disabled",r[r.EnabledForActive=1]="EnabledForActive",r[r.Enabled=2]="Enabled"})(Yd||(Yd={}));class Ud{constructor(e,t,n,i,s,o){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class em{constructor(e,t){this.top=e,this.endColumn=t}}class Rq extends l3{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return y1(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(s&&s.offSide);let a=-2,l=-1,c=-2,d=-1;const u=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let k=S-2;k>=0;k--){const D=this._computeIndentLevel(k);if(D>=0){a=k,l=D;break}}}if(c===-2){c=-1,d=-1;for(let k=S;k<i;k++){const D=this._computeIndentLevel(k);if(D>=0){c=k,d=D;break}}}};let h=-2,f=-1,g=-2,_=-1;const b=S=>{if(h===-2){h=-1,f=-1;for(let k=S-2;k>=0;k--){const D=this._computeIndentLevel(k);if(D>=0){h=k,f=D;break}}}if(g!==-1&&(g===-2||g<S-1)){g=-1,_=-1;for(let k=S;k<i;k++){const D=this._computeIndentLevel(k);if(D>=0){g=k,_=D;break}}}};let v=0,C=!0,y=0,w=!0,L=0,T=0;for(let S=0;C||w;S++){const k=e-S,D=e+S;S>1&&(k<1||k<t)&&(C=!1),S>1&&(D>i||D>n)&&(w=!1),S>5e4&&(C=!1,w=!1);let O=-1;if(C&&k>=1){const U=this._computeIndentLevel(k-1);U>=0?(c=k-1,d=U,O=Math.ceil(U/this.textModel.getOptions().indentSize)):(u(k),O=this._getIndentLevelForWhitespaceLine(o,l,d))}let F=-1;if(w&&D<=i){const U=this._computeIndentLevel(D-1);U>=0?(h=D-1,f=U,F=Math.ceil(U/this.textModel.getOptions().indentSize)):(b(D),F=this._getIndentLevelForWhitespaceLine(o,f,_))}if(S===0){T=O;continue}if(S===1){if(D<=i&&F>=0&&T+1===F){C=!1,v=D,y=D,L=F;continue}if(k>=1&&O>=0&&O-1===T){w=!1,v=k,y=k,L=O;continue}if(v=e,y=e,L=T,L===0)return{startLineNumber:v,endLineNumber:y,indent:L}}C&&(O>=L?v=k:C=!1),w&&(F>=L?y=D:w=!1)}return{startLineNumber:v,endLineNumber:y,indent:L}}getLinesBracketGuides(e,t,n,i){var s;const o=[];for(let h=e;h<=t;h++)o.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new x(e,1,t,this.textModel.getLineMaxColumn(t)));let c;if(n&&l.length>0){const h=(e<=n.lineNumber&&n.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(x.fromPositions(n))).filter(f=>x.strictContainsPosition(f.range,n));c=(s=U0(h,f=>a))===null||s===void 0?void 0:s.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new c3;for(const h of l){if(!h.closingBracketRange)continue;const f=c&&h.range.equalsRange(c);if(!f&&!i.includeInactive)continue;const g=u.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,d)+(i.highlightActive&&f?" "+u.activeClassName:""),_=h.openingBracketRange.getStartPosition(),b=h.closingBracketRange.getStartPosition(),v=i.horizontalGuides===Yd.Enabled||i.horizontalGuides===Yd.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){v&&o[h.range.startLineNumber-e].push(new Ud(-1,h.openingBracketRange.getEndPosition().column,g,new em(!1,b.column),-1,-1));continue}const C=this.getVisibleColumnFromPosition(b),y=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),w=Math.min(y,C,h.minVisibleColumnIndentation+1);let L=!1;Zi(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(L=!0);const k=Math.max(_.lineNumber,e),D=Math.min(b.lineNumber,t),O=L?1:0;for(let F=k;F<D+O;F++)o[F-e].push(new Ud(w,-1,g,null,F===_.lineNumber?_.column:-1,F===b.lineNumber?b.column:-1));v&&(_.lineNumber>=e&&y>w&&o[_.lineNumber-e].push(new Ud(w,-1,g,new em(!1,_.column),-1,-1)),b.lineNumber<=t&&C>w&&o[b.lineNumber-e].push(new Ud(w,-1,g,new em(!L,b.column),-1,-1)))}for(const h of o)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return o}getVisibleColumnFromPosition(e){return On.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/i.indentSize);continue}if(l===-2){l=-1,c=-1;for(let _=h-2;_>=0;_--){const b=this._computeIndentLevel(_);if(b>=0){l=_,c=b;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let _=h;_<n;_++){const b=this._computeIndentLevel(_);if(b>=0){d=_,u=b;break}}}a[f]=this._getIndentLevelForWhitespaceLine(o,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}class c3{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class Oq extends Ig{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(134),i=t.get(46);this._lineHeight=t.get(61),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(134),i=t.get(46);return this._lineHeight=t.get(61),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,u=this.getGuidesByLine(o,a,d),h=[];for(let f=o;f<=a;f++){const g=f-o,_=u[g];let b="";const v=(n=(t=e.visibleRangeForPosition(new B(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const C of _){const y=C.column===-1?v+(C.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new B(f,C.column)).left;if(y>l||this._maxIndentLeft>0&&y>this._maxIndentLeft)break;const w=C.horizontalLine?C.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",L=C.horizontalLine?((s=(i=e.visibleRangeForPosition(new B(f,C.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&s!==void 0?s:y+this._spaceWidth)-y:this._spaceWidth;b+=`<div class="core-guide ${C.className} ${w}" style="left:${y}px;height:${c}px;width:${L}px"></div>`}h[g]=b}this._renderResult=h}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Yd.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Yd.EnabledForActive:Yd.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const u=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=i?i[u-e]:[],g=new Lm(f),_=s?s[u-e]:[];for(let b=1;b<=_;b++){const v=(b-1)*c+1,C=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&o<=u&&u<=a&&b===l;h.push(...g.takeWhile(w=>w.visibleColumn<v)||[]);const y=g.peek();(!y||y.visibleColumn!==v||y.horizontalLine)&&h.push(new Ud(v,-1,C?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}h.push(...g.takeWhile(b=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function ov(r){if(!(r&&r.isTransparent()))return r}Vt((r,e)=>{const t=r.getColor(ob);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=r.getColor(ab)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const i=[{bracketColor:q5,guideColor:RG,guideColorActive:VG},{bracketColor:Z5,guideColor:OG,guideColorActive:HG},{bracketColor:Y5,guideColor:PG,guideColorActive:UG},{bracketColor:X5,guideColor:FG,guideColorActive:jG},{bracketColor:Q5,guideColor:BG,guideColorActive:$G},{bracketColor:J5,guideColor:WG,guideColorActive:zG}],s=new c3,o=i.map(a=>{var l,c;const d=r.getColor(a.bracketColor),u=r.getColor(a.guideColor),h=r.getColor(a.guideColorActive),f=ov((l=ov(u))!==null&&l!==void 0?l:d?.transparent(.3)),g=ov((c=ov(h))!==null&&c!==void 0?c:d);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(V6);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${s.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${s.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${s.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class Pq{constructor(){this._currentVisibleRange=new x(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Fq{constructor(e,t,n,i,s,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=s,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class Bq{constructor(e,t,n,i,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=s,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];o=Math.min(o,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}class w1 extends er{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new i3(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(46),o=i.get(134),a=i.get(133);this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=i.get(91),this._horizontalScrollbarHeight=a.horizontalScrollbarHeight,this._cursorSurroundingLines=i.get(25),this._cursorSurroundingLinesStyle=i.get(26),this._canUseLayerHinting=!i.get(28),this._viewLineOptions=new xR(n,this._context.theme.type),ya.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Zd}`),xi(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Tt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Tt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Pq,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new na(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(134)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(46),i=t.get(134),s=t.get(133);return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(91),this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),xi(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(133)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new xR(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Fq(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Bq(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new B(i,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(i<s||i>o)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new B(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===na.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const s=this._visibleLines.getVisibleLine(i);if(e===s.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=x.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;const s=[];let o=0;const a=new SR(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new B(i.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=i.startLineNumber;u<=i.endLineNumber;u++){if(u<c||u>d)continue;const h=u===i.startLineNumber?i.startColumn:1,f=u===i.endLineNumber?i.endColumn:this._context.viewModel.getLineMaxColumn(u),g=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,f,a);if(g){if(t&&u<n){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new B(u+1,1)).lineNumber,_!==l&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new YK(g.outsideRenderedLine,u,m1.from(g.ranges))}}return o===0?null:s}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new SR(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new XK(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}i=Math.max(i,a.getWidth())}return s&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Ti&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s,o){const a=e.top,l=e.height,c=a+l;let d,u,h;if(s&&s.length>0){let _=s[0].startLineNumber,b=s[0].endLineNumber;for(let v=1,C=s.length;v<C;v++){const y=s[v];_=Math.min(_,y.startLineNumber),b=Math.max(b,y.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(_),h=this._context.viewLayout.getVerticalOffsetForLineNumber(b)+this._lineHeight}else if(i)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;if((t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default")n||(u-=this._lineHeight);else{const _=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);u-=_*this._lineHeight,h+=Math.max(0,_-1)*this._lineHeight}(o===0||o===4)&&(h+=n?this._horizontalScrollbarHeight:this._lineHeight);let g;if(h-u>l){if(!d)return-1;g=u}else if(o===5||o===6)if(o===6&&a<=u&&h<=c)g=a;else{const _=Math.max(5*this._lineHeight,l*.2),b=u-_,v=h-l;g=Math.max(v,b)}else if(o===1||o===2)if(o===2&&a<=u&&h<=c)g=a;else{const _=(u+h)/2;g=Math.max(0,_-l/2)}else g=this._computeMinimumScrolling(a,c,u,h,o===3,o===4);return g}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,i=n+t.width;let s=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const c of l.ranges)s=Math.min(s,Math.round(c.left)),o=Math.max(o,Math.round(c.left+c.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(const d of c.ranges)s=Math.min(s,Math.round(d.left)),o=Math.max(o,Math.round(d.left+d.width))}return e.minimalReveal||(s=Math.max(0,s-w1.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding),e.type==="selections"&&o-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,i,s,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,i,s,o){e=e|0,t=t|0,n=n|0,i=i|0,s=!!s,o=!!o;const a=t-e;if(i-n<a){if(s)return n;if(o)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}w1.HORIZONTAL_EXTRA_PX=30;class Wq extends VA{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(133);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(133);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.linesDecorationsClassName;l&&(n[i++]=new SC(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(n[i++]=new SC(a.range.startLineNumber,a.range.startLineNumber,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=n;c++){const d=c-t,u=i[d];let h="";for(let f=0,g=u.length;f<g;f++)h+='<div class="cldr '+u[f]+a;l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Vq extends VA{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.marginClassName;l&&(n[i++]=new SC(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let o=t;o<=n;o++){const a=o-t,l=i[a];let c="";for(let d=0,u=l.length;d<u;d++)c+='<div class="cmdr '+l[d]+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class pr{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=pr._clamp(e),this.g=pr._clamp(t),this.b=pr._clamp(n),this.a=pr._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}pr.Empty=new pr(0,0,0,0);class db extends j{constructor(){super(),this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Yt.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new db),this._INSTANCE}_updateColorMap(){const e=Yt.getColorMap();if(!e){this._colors=[pr.Empty],this._backgroundIsLight=!0;return}this._colors=[pr.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new pr(i.r,i.g,i.b,Math.round(i.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}db._INSTANCE=null;const Hq=(()=>{const r=[];for(let e=32;e<=126;e++)r.push(e);return r.push(65533),r})(),Uq=(r,e)=>(r-=32,r<0||r>96?e<=2?(r+96)%96:96-1:r);class Xm{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Xm.soften(e,12/15),this.charDataLight=Xm.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=eC(e[i]*t);return n}renderChar(e,t,n,i,s,o,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,g=u?1:f;if(t+h>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const _=d?this.charDataLight:this.charDataNormal,b=Uq(i,c),v=e.width*4,C=a.r,y=a.g,w=a.b,L=s.r-C,T=s.g-y,S=s.b-w,k=Math.max(o,l),D=e.data;let O=b*h*f,F=n*v+t*4;for(let U=0;U<g;U++){let K=F;for(let ae=0;ae<h;ae++){const fe=_[O++]/255*(o/255);D[K++]=C+L*fe,D[K++]=y+T*fe,D[K++]=w+S*fe,D[K++]=k}F+=v}}blockRenderChar(e,t,n,i,s,o,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||n+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(s/255),g=o.r,_=o.g,b=o.b,v=i.r-g,C=i.g-_,y=i.b-b,w=g+v*f,L=_+C*f,T=b+y*f,S=Math.max(s,a),k=e.data;let D=n*h+t*4;for(let O=0;O<u;O++){let F=D;for(let U=0;U<c;U++)k[F++]=w,k[F++]=L,k[F++]=T,k[F++]=S;D+=h}}}const RR={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},OR=r=>{const e=new Uint8ClampedArray(r.length/2);for(let t=0;t<r.length;t+=2)e[t>>1]=RR[r[t]]<<4|RR[r[t+1]]&15;return e},PR={1:Al(()=>OR("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Al(()=>OR("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class tm{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return PR[e]?n=new Xm(PR[e](),e):n=tm.createFromSampleData(tm.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold ${16}px ${e}`,n.textBaseline="middle";let i=0;for(const s of Hq)n.fillText(String.fromCharCode(s),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const i=tm._downsample(e,t);return new Xm(i,t)}static _downsampleChar(e,t,n,i,s){const o=1*s,a=2*s;let l=i,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,_=(f+1)/o*10;let b=0,v=0;for(let y=u;y<h;y++){const w=t+Math.floor(y)*3840,L=1-(y-Math.floor(y));for(let T=g;T<_;T++){const S=1-(T-Math.floor(T)),k=w+Math.floor(T)*4,D=S*L;v+=D,b+=e[k]*e[k+3]/255*D}}const C=b/v;c=Math.max(c,C),n[l++]=eC(C)}}return c}static _downsample(e,t){const n=2*t*1*t,i=n*96,s=new Uint8ClampedArray(i);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,o,t)),o+=n,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<i;d++)s[d]*=c}return s}}const jq=140,$q=2;class Qm{constructor(e,t,n){const i=e.options,s=i.get(131),o=i.get(133),a=o.minimap,l=i.get(46),c=i.get(67);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(96),this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(61),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Al(()=>tm.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=Qm._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Qm._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(IK);return n?new pr(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(NK);return t?pr._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class nm{constructor(e,t,n,i,s,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,i,s,o,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),_=e.lineHeight;if(e.minimapHeightIsEditorHeight){const L=l*e.lineHeight+(e.scrollBeyondLastLine?s-e.lineHeight:0),T=Math.max(1,Math.floor(s*s/L)),S=Math.max(0,e.minimapHeight-T),k=S/(d-s),D=c*k,O=S>0,F=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new nm(c,d,O,k,D,T,1,Math.min(a,F))}let b;if(o&&n!==a){const L=n-t+1;b=Math.floor(L*f/h)}else{const L=s/_;b=Math.floor(L*f/h)}let v;e.scrollBeyondLastLine?v=(a-1)*f/h:v=Math.max(0,a*f/h-b),v=Math.min(e.minimapHeight-b,v);const C=v/(d-s),y=c*C;let w=0;if(e.scrollBeyondLastLine&&(w=s/_-1),g>=a+w){const T=a,S=v>0;return new nm(c,d,S,C,y,b,1,T)}else{let L=Math.max(1,Math.floor(t-y*h/f));u&&u.scrollHeight===d&&(u.scrollTop>c&&(L=Math.min(L,u.startLineNumber)),u.scrollTop<c&&(L=Math.max(L,u.startLineNumber)));const T=Math.min(a,L+g-1),S=(c-i)/_,k=(t-L+S)*f/h;return new nm(c,d,!0,C,k,b,L,T)}}}class xC{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}xC.INVALID=new xC(-1);class FR{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new n3(()=>xC.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,s=n.length;i<s;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class HA{constructor(e,t,n,i){this._backgroundFillData=HA._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=i,l[c+1]=s,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Jm{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const i=e.pixelRatio,s=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=cf.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:s,pixelRatio:i}),l=t/a,c=l/2;if(!n||n.minimapLines.length===0){const y=[];if(y[0]=1,a>1){for(let w=0,L=a-1;w<L;w++)y[w]=Math.round(w*l+c);y[a-1]=t}return[new Jm(l,y),[]]}const d=n.minimapLines,u=d.length,h=[];let f=0,g=0,_=1;const b=10;let v=[],C=null;for(let y=0;y<a;y++){const w=Math.max(_,Math.round(y*l)),L=Math.max(w,Math.round((y+1)*l));for(;f<u&&d[f]<w;){if(v.length<b){const S=f+1+g;C&&C.type==="deleted"&&C._oldIndex===f-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:f,deleteFromLineNumber:S,deleteToLineNumber:S},v.push(C)),g--}f++}let T;if(f<u&&d[f]<=L)T=d[f],f++;else if(y===0?T=1:y+1===a?T=t:T=Math.round(y*l+c),v.length<b){const S=f+1+g;C&&C.type==="inserted"&&C._i===y-1?C.insertToLineNumber++:(C={type:"inserted",_i:y,insertFromLineNumber:S,insertToLineNumber:S},v.push(C)),g++}h[y]=T,_=T}if(v.length<b)for(;f<u;){const y=f+1+g;C&&C.type==="deleted"&&C._oldIndex===f-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:f,deleteFromLineNumber:y,deleteToLineNumber:y},v.push(C)),g--,f++}else v=[{type:"flush"}];return[new Jm(l,h),v]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class zq extends er{constructor(e){super(e),this.tokensColorTracker=db.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Qm(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Jm.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new kC(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Qm(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,n]=Jm.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let s=0,o=t-e+1;s<o;s++)n[s]?i[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new ue(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new x(s,1,o,this._context.viewModel.getLineMaxColumn(o))}else n=new x(e,1,t,this._context.viewModel.getLineMaxColumn(t));const i=this._context.viewModel.getDecorationsInViewport(n);if(this._samplingState){const s=[];for(const o of i){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new Z4(new x(l,a.startColumn,c,a.endColumn),o.options))}return s}return i}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new x(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class kC extends j{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(CR),this._domNode=at(document.createElement("div")),ya.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=at(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=at(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=at(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=at(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=at(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Hn(this._domNode.domNode,he.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=wi(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(n,d,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new Eg,this._sliderPointerDownListener=Hn(this._slider.domNode,he.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=kt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=Z(this._domNode.domNode,Bt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=Z(this._domNode.domNode,Bt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Hn(this._domNode.domNode,Bt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const i=e.pageX;this._slider.toggleClassName("active",!0);const s=(o,a)=>{const l=Math.abs(a-i);if(hi&&l>jq){this._model.setScrollTop(n.scrollTop);return}const c=o-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(c))};e.pageY!==t&&s(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>s(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new HA(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(CR),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=nm.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(x.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,i,s);const d=new BR(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,o),this._renderDecorationsLineHighlights(c,n,d,e,o);const u=new BR(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,i),this._renderDecorationsHighlights(c,n,u,e,o,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=Math.max(i.startLineNumber,l.startLineNumber),d=Math.min(i.endLineNumber,l.endLineNumber);if(c>d)continue;for(let f=c;f<=d;f++)n.set(f,!0);const u=(c-i.startLineNumber)*s,h=(d-i.startLineNumber)*s+s;a>=u||(a>o&&e.fillRect(Xl,o,e.canvas.width,a-o),o=u),a=h}a>o&&e.fillRect(Xl,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,i,s){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==_r.Inline)continue;const d=Math.max(i.startLineNumber,l.range.startLineNumber),u=Math.min(i.endLineNumber,l.range.endLineNumber);if(d>u)continue;const h=c.getColor(this._theme.value);if(!h||h.isTransparent())continue;let f=o.get(h.toString());f||(f=h.transparent(.5).toString(),o.set(h.toString(),f)),e.fillStyle=f;for(let g=d;g<=u;g++){if(n.has(g))continue;n.set(g,!0);const _=(d-i.startLineNumber)*s;e.fillRect(Xl,_,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,i,s,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=Math.max(i.startLineNumber,c.startLineNumber),u=Math.min(i.endLineNumber,c.endLineNumber);if(!(d>u))for(let h=d;h<=u;h++)this.renderDecorationOnLine(e,n,c,this._selectionColor,i,h,s,s,o,a,l)}}_renderDecorationsHighlights(e,t,n,i,s,o,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=Math.max(i.startLineNumber,c.range.startLineNumber),h=Math.min(i.endLineNumber,c.range.endLineNumber);if(u>h)continue;const f=d.getColor(this._theme.value);if(!(!f||f.isTransparent()))for(let g=u;g<=h;g++)switch(d.position){case _r.Inline:this.renderDecorationOnLine(e,n,c.range,f,i,g,s,s,o,a,l);continue;case _r.Gutter:{const _=(g-i.startLineNumber)*s,b=2;this.renderDecoration(e,f,b,_,$q,s);continue}}}}renderDecorationOnLine(e,t,n,i,s,o,a,l,c,d,u){const h=(o-s.startLineNumber)*l;if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,_=f===o?n.startColumn:1,b=g===o?n.endColumn:this._model.getLineMaxColumn(o),v=this.getXOffsetForPosition(t,o,_,c,d,u),C=this.getXOffsetForPosition(t,o,b,c,d,u);this.renderDecoration(e,i,v,h,C-v,a)}getXOffsetForPosition(e,t,n,i,s,o){if(n===1)return Xl;if((n-1)*s>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Xl];let d=Xl;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?i*s:Nc(h)?2*s:s,g=d+f;if(g>=o){l[u]=o;break}l[u]=g,d=g}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,i,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const fe=this._lastRenderData._get();return new FR(e,fe.imageData,fe.lines)}const s=this._getBuffer();if(!s)return null;const[o,a,l]=kC._renderUntouchedLines(s,t,n,i,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,_=g.backgroundIsLight(),b=this._model.options.renderMinimap,v=this._model.options.charRenderer(),C=this._model.options.fontScale,y=this._model.options.minimapCharWidth,L=(b===1?2:2+1)*C,T=i>L?Math.floor((i-L)/2):0,S=h.a/255,k=new pr(Math.round((h.r-u.r)*S+u.r),Math.round((h.g-u.g)*S+u.g),Math.round((h.b-u.b)*S+u.b),255);let D=0;const O=[];for(let fe=0,we=n-t+1;fe<we;fe++)l[fe]&&kC._renderLine(s,k,h.a,_,b,y,g,f,v,D,T,d,c[fe],C,i),O[fe]=new xC(D),D+=i;const F=o===-1?0:o,K=(a===-1?s.height:a)-F;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,F,s.width,K),new FR(e,s,O)}static _renderUntouchedLines(e,t,n,i,s){const o=[];if(!s){for(let k=0,D=n-t+1;k<D;k++)o[k]=!0;return[-1,-1,o]}const a=s._get(),l=a.imageData.data,c=a.rendLineNumberStart,d=a.lines,u=d.length,h=e.width,f=e.data,g=(n-t+1)*i*h*4;let _=-1,b=-1,v=-1,C=-1,y=-1,w=-1,L=0;for(let k=t;k<=n;k++){const D=k-t,O=k-c,F=O>=0&&O<u?d[O].dy:-1;if(F===-1){o[D]=!0,L+=i;continue}const U=F*h*4,K=(F+i)*h*4,ae=L*h*4,fe=(L+i)*h*4;C===U&&w===ae?(C=K,w=fe):(v!==-1&&(f.set(l.subarray(v,C),y),_===-1&&v===0&&v===y&&(_=C),b===-1&&C===g&&v===y&&(b=v)),v=U,C=K,y=ae,w=fe),o[D]=!1,L+=i}v!==-1&&(f.set(l.subarray(v,C),y),_===-1&&v===0&&v===y&&(_=C),b===-1&&C===g&&v===y&&(b=v));const T=_===-1?-1:_/(h*4),S=b===-1?-1:b/(h*4);return[T,S,o]}static _renderLine(e,t,n,i,s,o,a,l,c,d,u,h,f,g,_){const b=f.content,v=f.tokens,C=e.width-o,y=_===1;let w=Xl,L=0,T=0;for(let S=0,k=v.getCount();S<k;S++){const D=v.getEndOffset(S),O=v.getForeground(S),F=a.getColor(O);for(;L<D;L++){if(w>C)return;const U=b.charCodeAt(L);if(U===9){const K=h-(L+T)%h;T+=K-1,w+=K*o}else if(U===32)w+=o;else{const K=Nc(U)?2:1;for(let ae=0;ae<K;ae++)if(s===2?c.blockRenderChar(e,w,d+u,F,l,t,n,y):c.renderChar(e,w,d+u,U,F,l,t,n,g,i,y),w+=o,w>C)return}}}}}class BR{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,s=this._endLineNumber-this._startLineNumber+1;i<s;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}Vt((r,e)=>{const t=r.getColor(MK);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=r.getColor(RK);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const i=r.getColor(OK);i&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${i}; }`);const s=r.getColor(Ag);s&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${s} -6px 0 6px -6px inset; }`)});class Kq extends er{constructor(e){super(e);const n=this._context.configuration.options.get(133);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=at(document.createElement("div")),ya.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(133);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=at(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}class Gq{constructor(e,t){const n=e.options;this.lineHeight=n.get(61),this.pixelRatio=n.get(131),this.overviewRulerLanes=n.get(76),this.renderBorder=n.get(75);const i=t.getColor(yG);this.borderColor=i?i.toString():null,this.hideCursor=n.get(54);const s=t.getColor(z5);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(67),a=o.enabled,l=o.side,c=t.getColor(wG),d=Yt.getDefaultBackground();let u=null;c!==void 0?u=c:a&&(u=d),u===null||l==="left"?this.backgroundColor=null:this.backgroundColor=W.Format.CSS.formatHex(u);const f=n.get(133).overviewRuler;this.top=f.top,this.right=f.right,this.domWidth=f.width,this.domHeight=f.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[g,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=g,this.w=_}_initLanes(e,t,n){const i=t-e;if(n>=3){const s=Math.floor(i/3),o=Math.floor(i/3),a=i-s-o,l=e,c=l+s,d=l+s+a;return[[0,l,c,l,d,l,c,l],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(n===2){const s=Math.floor(i/2),o=i-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=i;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class qq extends er{constructor(e){super(e),this._domNode=at(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Yt.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Gq(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(B.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),o=t/s,a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));const u=this._settings.x,h=this._settings.w;a.sort(Y4.cmp);for(const f of a){const g=f.color,_=f.data;d.fillStyle=g;let b=0,v=0,C=0;for(let y=0,w=_.length/3;y<w;y++){const L=_[3*y],T=_[3*y+1],S=_[3*y+2];let k=i.getVerticalOffsetForLineNumber(T)*o|0,D=(i.getVerticalOffsetForLineNumber(S)+n)*o|0;if(D-k<l){let F=(k+D)/2|0;F<c?F=c:F+c>t&&(F=t-c),k=F-c,D=F+c}k>C+1||L!==b?(y!==0&&d.fillRect(u[b],v,h[b],C-v),b=L,v=k,C=D):D>C&&(C=D)}d.fillRect(u[b],v,h[b],C-v)}if(!this._settings.hideCursor&&this._settings.cursorColor){const f=2*this._settings.pixelRatio|0,g=f/2|0,_=this._settings.x[7],b=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let v=-100,C=-100;for(let y=0,w=this._cursorPositions.length;y<w;y++){const L=this._cursorPositions[y];let T=i.getVerticalOffsetForLineNumber(L.lineNumber)*o|0;T<g?T=g:T+g>t&&(T=t-g);const S=T-g,k=S+f;S>C+1?(y!==0&&d.fillRect(_,v,b,C-v),v=S,C=k):k>C&&(C=k)}d.fillRect(_,v,b,C-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}}class WR{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class e_{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class Zq{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(e_.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),s=n/i,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const w=d.getColorZones();if(w){a.push(w);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(s*u),g=Math.floor(s*h);let _=Math.floor((f+g)/2),b=g-_;b<o&&(b=o),_-b<0&&(_=b),_+b>n&&(_=n-b);const v=d.color;let C=this._color2Id[v];C||(C=++this._lastAssignedId,this._color2Id[v]=C,this._id2Color[C]=v);const y=new WR(_-b,_+b,C);d.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(WR.compare),a}}class Yq extends rb{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=at(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Zq(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(61)),this._zoneManager.setPixelRatio(n.get(131)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(61)&&(this._zoneManager.setLineHeight(t.get(61)),this._render()),e.hasChanged(131)&&(this._zoneManager.setPixelRatio(t.get(131)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,o=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==s?(e.fillRect(0,o,i,a-o),s=c,e.fillStyle=n[s],o=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,o,i,a-o),o=d,a=u)}e.fillRect(0,o,i,a-o)}}class Xq extends er{constructor(e){super(e),this.domNode=at(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),s=i;let o=t-e;for(;o>0;){const a=at(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}Vt((r,e)=>{const t=r.getColor(vG);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class Qq extends er{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(94);this._useShadows=n.useShadows,this._domNode=at(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(133);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(94);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}Vt((r,e)=>{const t=r.getColor(Ag);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class Jq{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class eZ{constructor(e,t){this.lineNumber=e,this.ranges=t}}function tZ(r){return new Jq(r)}function nZ(r){return new eZ(r.lineNumber,r.ranges.map(tZ))}class rn extends Ig{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<n.length;c++)n[c].lineNumber===a&&(s=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!o&&c>=0;c--)n[c].lineNumber===l&&(o=n[c].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,_=t[a-1].ranges[0].left+t[a-1].ranges[0].width;av(d-g)<i?h.top=2:d>g&&(h.top=1),av(u-_)<i?f.top=2:g<u&&u<_&&(f.top=1)}else s&&(h.top=s.startStyle.top,f.top=s.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,_=t[a+1].ranges[0].left+t[a+1].ranges[0].width;av(d-g)<i?h.bottom=2:g<d&&d<_&&(h.bottom=1),av(u-_)<i?f.bottom=2:u<_&&(f.bottom=1)}else o&&(h.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(nZ);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const s=!!i[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,c=i[i.length-1].lineNumber;for(let d=0,u=i.length;d<u;d++){const h=i[d],f=h.lineNumber,g=f-t,_=n&&(f===c||f===l)?a:o,b=n&&f===l?1:0;let v="",C="";for(let y=0,w=h.ranges.length;y<w;y++){const L=h.ranges[y];if(s){const S=L.startStyle,k=L.endStyle;if(S.top===1||S.bottom===1){v+=this._createSelectionPiece(b,_,rn.SELECTION_CLASS_NAME,L.left-rn.ROUNDED_PIECE_WIDTH,rn.ROUNDED_PIECE_WIDTH);let D=rn.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(D+=" "+rn.SELECTION_TOP_RIGHT),S.bottom===1&&(D+=" "+rn.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(b,_,D,L.left-rn.ROUNDED_PIECE_WIDTH,rn.ROUNDED_PIECE_WIDTH)}if(k.top===1||k.bottom===1){v+=this._createSelectionPiece(b,_,rn.SELECTION_CLASS_NAME,L.left+L.width,rn.ROUNDED_PIECE_WIDTH);let D=rn.EDITOR_BACKGROUND_CLASS_NAME;k.top===1&&(D+=" "+rn.SELECTION_TOP_LEFT),k.bottom===1&&(D+=" "+rn.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(b,_,D,L.left+L.width,rn.ROUNDED_PIECE_WIDTH)}}let T=rn.SELECTION_CLASS_NAME;if(s){const S=L.startStyle,k=L.endStyle;S.top===0&&(T+=" "+rn.SELECTION_TOP_LEFT),S.bottom===0&&(T+=" "+rn.SELECTION_BOTTOM_LEFT),k.top===0&&(T+=" "+rn.SELECTION_TOP_RIGHT),k.bottom===0&&(T+=" "+rn.SELECTION_BOTTOM_RIGHT)}C+=this._createSelectionPiece(b,_,T,L.left,L.width)}e[g][0]+=v,e[g][1]+=C}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let o=n;o<=i;o++){const a=o-n;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){s[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}rn.SELECTION_CLASS_NAME="selected-text";rn.SELECTION_TOP_LEFT="top-left-radius";rn.SELECTION_BOTTOM_LEFT="bottom-left-radius";rn.SELECTION_TOP_RIGHT="top-right-radius";rn.SELECTION_BOTTOM_RIGHT="bottom-right-radius";rn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";rn.ROUNDED_PIECE_WIDTH=10;Vt((r,e)=>{const t=r.getColor(ml);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=r.getColor(DA);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const i=r.getColor(Mz);i&&!i.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function av(r){return r<0?-r:r}class VR{constructor(e,t,n,i,s,o){this.top=e,this.left=t,this.width=n,this.height=i,this.textContent=s,this.textContentClassName=o}}class HR{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(46);this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=at(document.createElement("div")),this._domNode.setClassName(`cursor ${Zd}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),xi(this._domNode,n),this._domNode.setDisplay("none"),this._position=new B(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(46);return this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),xi(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,s]=_H(n,t-1);return[new B(e,i+1),n.substring(i,s)]}_prepareRender(e){let t="";const[n,i]=this._getGraphemeAwarePosition();if(this._cursorStyle===ii.Line||this._cursorStyle===ii.LineThin){const h=e.visibleRangeForPosition(n);if(!h||h.outsideRenderedLine)return null;let f;this._cursorStyle===ii.Line?(f=lR(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=i)):f=lR(1);let g=h.left;f>=2&&g>=1&&(g-=1);const _=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new VR(_,g,f,this._lineHeight,t,"")}const s=e.linesVisibleRangesForRange(new x(n.lineNumber,n.column,n.lineNumber,n.column+i.length),!1);if(!s||s.length===0)return null;const o=s[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=i==="	"?this._typicalHalfwidthCharacterWidth:a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let c="";if(this._cursorStyle===ii.Block){const h=this._context.viewModel.getViewLineData(n.lineNumber);t=i;const f=h.tokens.findTokenIndexAtOffset(n.column-1);c=h.tokens.getClassName(f)}let d=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===ii.Underline||this._cursorStyle===ii.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new VR(d,a.left,l,u,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Zd} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class t_ extends er{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new HR(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=at(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Js,this._cursorFlatBlinkInterval=new eb,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let i=0;i<n;i++){const s=new HR(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let i=0;i<n;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let i=0,s=e.ranges.length;i<s;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},t_.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},t_.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ii.Line:e+=" cursor-line-style";break;case ii.Block:e+=" cursor-block-style";break;case ii.Underline:e+=" cursor-underline-style";break;case ii.LineThin:e+=" cursor-line-thin-style";break;case ii.BlockOutline:e+=" cursor-block-outline-style";break;case ii.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}t_.BLINK_INTERVAL=500;Vt((r,e)=>{const t=r.getColor(z5);if(t){let n=r.getColor(_G);n||(n=t.opposite()),e.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${t}; }`),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),Li(r.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const LS=()=>{throw new Error("Invalid change accessor")};class iZ extends er{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(133);this._lineHeight=t.get(61),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=at(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=at(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(i.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(133);return this._lineHeight=t.get(61),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(61)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new B(o,this._context.viewModel.model.getLineMaxColumn(o))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),s=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const i={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};sZ(e,i),i.addZone=LS,i.removeZone=LS,i.layoutZone=LS}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:at(t.domNode),marginDomNode:t.marginDomNode?at(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){We(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){We(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,i=!0);const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l];let d=0,u=0,h="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,u=n[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function sZ(r,e){try{return r(e)}catch(t){We(t)}}class rZ{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class oZ{constructor(e,t,n){this.configuration=e,this.theme=new rZ(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class aZ{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new x(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class lZ extends er{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.domNode=at(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(133),i=n.contentWidth-n.verticalScrollbarWidth;return this.contentWidth!==i&&(this.contentWidth=i,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const n=e.getDecorationsInViewport();for(const i of n){if(!i.options.blockClassName)continue;let s=this.blocks[t];s||(s=this.blocks[t]=at(document.createElement("div")),this.domNode.appendChild(s));const o=e.getVerticalOffsetForLineNumber(i.range.startLineNumber),a=e.getVerticalOffsetForLineNumber(i.range.endLineNumber+1);s.setClassName("blockDecorations-block "+i.options.blockClassName),s.setLeft(e.scrollLeft),s.setWidth(this.contentWidth),s.setTop(o),s.setHeight(a-o),t++}for(let i=t;i<this.blocks.length;i++)this.blocks[i].domNode.remove();this.blocks.length=t}}class cZ extends rb{constructor(e,t,n,i,s,o){super(),this._selections=[new ue(1,1,1,1)],this._renderAnimationFrame=null;const a=new uq(t,i,s,e);this._context=new oZ(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new GG(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=at(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=at(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=at(document.createElement("div")),ya.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Nq(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new w1(this._context,this._linesContent),this._viewZones=new iZ(this._context),this._viewParts.push(this._viewZones);const l=new qq(this._context);this._viewParts.push(l);const c=new Qq(this._context);this._viewParts.push(c);const d=new fq(this._context);this._viewParts.push(d),d.addDynamicOverlay(new _q(this._context)),d.addDynamicOverlay(new rn(this._context)),d.addDynamicOverlay(new Oq(this._context)),d.addDynamicOverlay(new vq(this._context));const u=new gq(this._context);this._viewParts.push(u),u.addDynamicOverlay(new bq(this._context)),u.addDynamicOverlay(new Mq(this._context)),u.addDynamicOverlay(new Vq(this._context)),u.addDynamicOverlay(new Wq(this._context)),u.addDynamicOverlay(new Kf(this._context));const h=new _u(this._context);h.getDomNode().appendChild(this._viewZones.marginDomNode),h.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(h),this._contentWidgets=new pq(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new t_(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Kq(this._context),this._viewParts.push(this._overlayWidgets);const f=new Xq(this._context);this._viewParts.push(f);const g=new lZ(this._context);this._viewParts.push(g);const _=new zq(this._context);if(this._viewParts.push(_),l){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(l.getDomNode(),b.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(h.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new hG(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new iG(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new B(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(133);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(130)+" "+uC(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=l5(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){dZ(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!pA(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new aZ(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new ZK(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(i);for(const s of e)s.render(i),s.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new B(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?C1.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new Yq(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n;let i=e.position&&e.position.range||null;if(i===null){const o=e.position?e.position.position:null;o!==null&&(i=new x(o.lineNumber,o.column,o.lineNumber,o.column))}const s=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,i,s,(n=(t=e.position)===null||t===void 0?void 0:t.positionAffinity)!==null&&n!==void 0?n:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function dZ(r){try{return r()}catch(e){We(e)}}class LC{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ni(new x(1,1,1,1),0,new B(1,1),0),new ni(new x(1,1,1,1),0,new B(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Ze(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return ue.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,o),l=this._validatePositionWithCache(e,s,i,a);return n.equals(o)&&i.equals(a)&&s.equals(l)?t:new ni(x.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+i.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=LC._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new ni(i,s,o,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new ni(i,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new ni(i,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new B(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new B(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new x(i.lineNumber,i.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new ni(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class UR{constructor(e){this.context=e,this.cursors=[new LC(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return B6(this.cursors,Gp(e=>e.viewState.position,B.compare)).viewState.position}getBottomMostViewPosition(){return qF(this.cursors,Gp(e=>e.viewState.position,B.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Ze.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const i=n-t;for(let s=0;s<i;s++)this._addSecondaryCursor()}else if(t>n){const i=t-n;for(let s=0;s<i;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new LC(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(Gp(n=>n.selection,x.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],o=i.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=i.index<s.index?n:n+1,d=i.index<s.index?n+1:n,u=t[d].index,h=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const _=f.plusRange(g),b=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let C;u===this.lastAddedCursorIndex?(C=b,this.lastAddedCursorIndex=h):C=v;let y;C?y=new ue(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):y=new ue(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn),t[c].selection=y;const w=Ze.fromModelSelection(y);e[h].setState(this.context,w.modelState,w.viewState)}for(const _ of t)_.index>u&&_.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),n--}}}}class jR{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}class uZ{constructor(){this.changeType=1}}class Do{constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new Do(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new Do(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}}class $R{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class hZ{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class fZ{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class gZ{constructor(){this.changeType=5}}class Cf{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Cf(n,i,s,o)}}class d3{constructor(e){this.changes=e}}class Xd{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Cf.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Xd._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Xd(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:s,isUndoing:o,isRedoing:a,isFlush:l}}}class pZ{constructor(){this.type=0}}class mZ{constructor(){this.type=1}}class _Z{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class bZ{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class fh{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class lv{constructor(){this.type=5}}class vZ{constructor(e){this.type=6,this.isFocused=e}}class CZ{constructor(){this.type=7}}class cv{constructor(){this.type=8}}class u3{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class RL{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class OL{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class p0{constructor(e,t,n,i,s,o,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=s,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class yZ{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class wZ{constructor(e){this.theme=e,this.type=14}}class SZ{constructor(e){this.type=15,this.ranges=e}}class xZ{constructor(){this.type=16}}let kZ=class{constructor(){this.type=17}};class LZ extends j{constructor(){super(),this._onEvent=this._register(new R),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new TZ),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class TZ{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class UA{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new UA(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class jA{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new jA(this.oldHasFocus,e.hasFocus)}}class $A{constructor(e,t,n,i,s,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new $A(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class DZ{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class EZ{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class TC{constructor(e,t,n,i,s,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return TC._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new TC(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class AZ{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class IZ{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class NZ{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class MZ{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class RZ{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class OZ{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class PZ{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class qf extends j{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new jR(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new UR(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=ut(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new jR(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;i!==null&&i.length>qf.MAX_CURSOR_COUNT&&(i=i.slice(0,qf.MAX_CURSOR_COUNT),s=!0);const o=im.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,s,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=x.fromPositions(a[0],a[0]),e.emitViewEvent(new p0(t,n,l,c,i,s,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,d=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(d=o.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Ze.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof d3){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new UR(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const s=Ze.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,s)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Ze.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,Ze.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],i);this._autoClosedActions.push(new zR(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=FZ.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof t3&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),i.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const o=im.from(this._model,this);if(o.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new bZ(l,a)),!i||i.cursorState.length!==o.cursorState.length||o.cursorState.some((c,d)=>!c.modelState.equals(i.cursorState[d].modelState))){const c=i?i.cursorState.map(u=>u.modelState.selection):null,d=i?i.modelVersionId:0;e.emitOutgoingEvent(new TC(c,a,d,o.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=s.text.length-o[2].length-1,u=s.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,n,i){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(s)for(let u=0,h=s.length;u<h;u++){const[f,g]=s[u],_=c[u],b=_.range.startLineNumber,v=_.range.startColumn-1+f,C=_.range.startColumn-1+g;o.push(new x(b,C+1,b,C+2)),a.push(new x(b,v+1,b,C+2))}const d=i(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const s=im.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){We(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return zR.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new sm(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Kt.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let s=0;for(;s<i;){const o=KE(t,s),a=t.substr(s,o);this._executeEditOperation(Kt.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation(Kt.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,s,o){if(t.length===0&&n===0&&i===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new ue(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Kt.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))},e,o)}paste(e,t,n,i,s){this._executeEdit(()=>{this._executeEditOperation(Kt.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(bu.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new es(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new es(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}qf.MAX_CURSOR_COUNT=1e4;class im{constructor(e,t){this.modelVersionId=e,this.cursorState=t}static from(e,t){return new im(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class zR{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(x.compareRangesUsingStarts),e.sort(x.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class FZ{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let o=0,a=i.trackedRanges.length;o<a;o++)i.model._setTrackedRange(i.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,d=i.length;c<d;c++)s.hasOwnProperty(i[c].identifier.major.toString())||o.push(i[c]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const _=parseInt(g,10),b=e.model._getTrackedRange(e.trackedRanges[_]);return e.trackedRangesDirection[_]===0?new ue(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):new ue(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let s=0;const o=(u,h,f=!1)=>{x.isEmpty(u)&&h===""||i.push({identifier:{major:t,minor:s++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:o,addTrackedEditOperation:(u,h,f)=>{a=!0,o(u,h,f)},trackSelection:(u,h)=>{const f=ue.liftSelection(u);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?g=2:g=3}else g=1;const _=e.trackedRanges.length,b=e.model._setTrackedRange(null,f,g);return e.trackedRanges[_]=b,e.trackedRangesDirection[_]=f.getDirection(),_.toString()}};try{n.getEditOperations(e.model,d)}catch(u){return We(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-x.compareRangesUsingEnds(n.range,i.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(x.getStartPosition(i.range).isBefore(x.getEndPosition(s.range))){let o;i.identifier.major>s.identifier.major?o=i.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class BZ{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class sm{constructor(e,t){this._original=sm._capture(e,t)}static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new BZ(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}deduceOutcome(e,t){if(!this._original)return null;const n=sm._capture(e,t);if(!n||this._original.length!==n.length)return null;const i=[];for(let s=0,o=this._original.length;s<o;s++)i.push(sm._deduceOutcome(this._original[s],n[s]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,lu(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Im(e.text,t.text)),s=e.text.substring(n,e.text.length-i),o=t.text.substring(n,t.text.length-i);return new cq(s,e.startSelection-n,e.endSelection-n,o,t.startSelection-n,t.endSelection-n)}}class h3{constructor(e,t,n,i,s,o){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=s,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}function vu(r){let e=0,t=0,n=0,i=0;for(let s=0,o=r.length;s<o;s++){const a=r.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&r.charCodeAt(s+1)===10?(i|=2,s++):i|=3,n=s+1):a===10&&(i|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}class dv{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}}class WZ{constructor(e,t,n,i,s,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class VZ extends WZ{constructor(e,t,n,i,s,o,a){super(e,t,n,i,s,o),this.minVisibleColumnIndentation=a}}class PL{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}PL.zero=new PL(0,0);function HZ(r,e,t,n){return r!==t?pn(t-r,n):pn(0,n-e)}const jr=0;function UZ(r){return r===0}const Gs=Math.pow(2,26);function pn(r,e){return r*Gs+e}function kc(r){const e=r,t=Math.floor(e/Gs),n=e-t*Gs;return new PL(t,n)}function jZ(r){return Math.floor(r/Gs)}function ln(r,e){return e<Gs?r+e:r-r%Gs+e}function $Z(r,e){const t=r,n=e;if(n-t<=0)return jr;const s=Math.floor(t/Gs),o=Math.floor(n/Gs),a=n-o*Gs;if(s===o){const l=t-s*Gs;return pn(0,a-l)}else return pn(o-s,a)}function yf(r,e){return r<e}function fc(r,e){return r<=e}function Rp(r,e){return r>=e}function gh(r){return pn(r.lineNumber-1,r.column-1)}function wl(r,e){const t=r,n=Math.floor(t/Gs),i=t-n*Gs,s=e,o=Math.floor(s/Gs),a=s-o*Gs;return new x(n+1,i+1,o+1,a+1)}function zZ(r){const e=va(r);return pn(e.length-1,e[e.length-1].length)}class KR{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class KZ{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>zA.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return $Z(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?pn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):pn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=kc(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?pn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):pn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(fc(n,e)){this.nextEditIdx++;const i=kc(n),s=kc(this.translateOldToCur(t.endOffsetBeforeObj)),o=i.lineCount-s.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class zA{constructor(e,t,n){this.endOffsetBeforeObj=kc(t),this.endOffsetAfterObj=kc(ln(e,n)),this.offsetObj=kc(e)}static from(e){return new zA(e.startOffset,e.endOffset,e.newLength)}}const m0=new Array;class Dn{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=Dn.cache[e];return n||(n=new Dn(e,t),Dn.cache[e]=n),n}return new Dn(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const o=1<<n|this.items;return o===this.items?this:Dn.create(o,this.additionalItems)}i--;const s=this.additionalItems.slice(0);for(;s.length<i;)s.push(0);return s[i]|=1<<(n&31),Dn.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===m0&&e.additionalItems===m0)return t===this.items?this:t===e.items?e:Dn.create(t,m0);const n=new Array;for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const s=this.additionalItems[i]||0,o=e.additionalItems[i]||0;n.push(s|o)}return Dn.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Dn.cache=new Array(129);Dn.empty=Dn.create(0,m0);const GR={getKey(r){return r}};class f3{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class KA{constructor(e){this._length=e}get length(){return this._length}}class n_ extends KA{constructor(e,t,n,i,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}static create(e,t,n){let i=e.length;return t&&(i=ln(i,t.length)),n&&(i=ln(i,n.length)),new n_(i,e,t,n,t?t.missingOpeningBracketIds:Dn.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new n_(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(ln(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class wa extends KA{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,i=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=ln(s,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=ln(s,n.length),o=o.merge(n.missingOpeningBracketIds)}return i?new GZ(s,e.listHeight+1,e,t,n,o):new i_(s,e.listHeight+1,e,t,n,o)}static getEmpty(){return new qZ(jr,0,[],Dn.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const s=this.getChild(i);t=ln(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let s=0;s<this.childrenLength;s++){const o=this.getChild(s);o&&(n=Math.min(n,o.computeMinIndentation(i,t)),i=ln(i,o.length))}return this.cachedMinIndentation=n,n}}class i_ extends wa{constructor(e,t,n,i,s,o){super(e,t,o),this._item1=n,this._item2=i,this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new i_(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class GZ extends i_{toMutable(){return new i_(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class DC extends wa{constructor(e,t,n,i){super(e,t,i),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new DC(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class qZ extends DC{toMutable(){return new DC(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const ZZ=[];class GA extends KA{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return ZZ}deepClone(){return this}}class Mh extends GA{get kind(){return 0}get missingOpeningBracketIds(){return Dn.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=kc(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=jZ(ln(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=i;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=On.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,d)}return o}}class EC extends GA{constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}static create(e,t,n){return new EC(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return Dn.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class YZ extends GA{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let ac=class{constructor(e,t,n,i,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=s}};class g3{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new XZ(this.textModel,this.bracketTokens),this._offset=jr,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return pn(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=ln(this._offset,e);const t=kc(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=ln(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class XZ{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,o=s.getCount();let a=null;if(this.lineTokenOffset<o){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=ci.getTokenType(l)===0,d=ci.containsBalancedBrackets(l),u=s.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=s.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),g=this.bracketTokens.getSingleLanguageBracketTokens(h),_=g.regExpGlobal;if(_){_.lastIndex=0;const b=_.exec(f);b&&(a=g.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=HZ(e,t,this.lineIdx,this.lineCharOffset);return new ac(i,0,-1,Dn.getEmpty(),new Mh(i))}}class QZ{constructor(e,t){this.text=e,this._offset=jr,this.idx=0;const n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,s=[];let o,a=0,l=0,c=0,d=0;const u=new Array;for(let g=0;g<60;g++)u.push(new ac(pn(0,g),0,-1,Dn.getEmpty(),new Mh(pn(0,g))));const h=new Array;for(let g=0;g<60;g++)h.push(new ac(pn(1,g),0,-1,Dn.getEmpty(),new Mh(pn(1,g))));if(i)for(i.lastIndex=0;(o=i.exec(e))!==null;){const g=o.index,_=o[0];if(_===`
`)a++,l=g+1;else{if(c!==g){let b;if(d===a){const v=g-c;if(v<u.length)b=u[v];else{const C=pn(0,v);b=new ac(C,0,-1,Dn.getEmpty(),new Mh(C))}}else{const v=a-d,C=g-l;if(v===1&&C<h.length)b=h[C];else{const y=pn(v,C);b=new ac(y,0,-1,Dn.getEmpty(),new Mh(y))}}s.push(b)}s.push(t.getToken(_)),c=g+_.length,d=a}}const f=e.length;if(c!==f){const g=d===a?pn(0,f-c):pn(a-d,f-l);s.push(new ac(g,0,-1,Dn.getEmpty(),new Mh(g)))}this.length=pn(a,f-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new NV}}class qA{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}const i=new Map;for(const s of e.bracketsNew.openingBrackets){const o=pn(0,s.bracketText.length),a=n(s),l=Dn.getEmpty().add(a,GR);i.set(s.bracketText,new ac(o,1,a,l,EC.create(o,s,l)))}for(const s of e.bracketsNew.closingBrackets){const o=pn(0,s.bracketText.length);let a=Dn.getEmpty();const l=s.getClosedBrackets();for(const c of l)a=a.add(n(c),GR);i.set(s.bracketText,new ac(o,2,n(l[0]),a,EC.create(o,s,a)))}return new qA(i)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>JZ(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function JZ(r){let e=Zs(r);return/^[\w ]+/.test(r)&&(e=`\\b${e}`),/[\w ]+$/.test(r)&&(e=`${e}\\b`),e}class p3{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=qA.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function eY(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;const o=e,a=r[o].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-o>=2?m3(o===0&&e===r.length?r:r.slice(o,e),!1):r[o]}let n=t(),i=t();if(!i)return n;for(let o=t();o;o=t())qR(n,i)<=qR(i,o)?(n=TS(n,i),i=o):i=TS(i,o);return TS(n,i)}function m3(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const s=i<<1;r[i]=wa.create23(r[s],r[s+1],s+3===t?r[s+2]:null,e)}t=n}return wa.create23(r[0],r[1],t>=3?r[2]:null,e)}function qR(r,e){return Math.abs(r.listHeight-e.listHeight)}function TS(r,e){return r.listHeight===e.listHeight?wa.create23(r,e,null,!1):r.listHeight>e.listHeight?tY(r,e):nY(e,r)}function tY(r,e){r=r.toMutable();let t=r;const n=new Array;let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const o=n[s];i?o.childrenLength>=3?i=wa.create23(o.unappendChild(),i,null,!1):(o.appendChildOfSameHeight(i),i=void 0):o.handleChildrenChanged()}return i?wa.create23(r,i,null,!1):r}function nY(r,e){r=r.toMutable();let t=r;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let s=n.length-1;s>=0;s--){const o=n[s];i?o.childrenLength>=3?i=wa.create23(i,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(i),i=void 0):o.handleChildrenChanged()}return i?wa.create23(i,r,null,!1):r}class iY{constructor(e){this.lastOffset=jr,this.nextNodes=[e],this.offsets=[jr],this.idxs=[]}readLongestNodeAt(e,t){if(yf(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=ap(this.nextNodes);if(!n)return;const i=ap(this.offsets);if(yf(e,i))return;if(yf(i,e))if(ln(i,n.length)<=e)this.nextNodeAfterCurrent();else{const s=DS(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=DS(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=ap(this.offsets),t=ap(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=ap(this.nextNodes),i=DS(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(ln(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}function DS(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function ap(r){return r.length>0?r[r.length-1]:void 0}function FL(r,e,t,n){return new sY(r,e,t,n).parseDocument()}class sY{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new iY(n):void 0,this.positionMapper=new KZ(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Dn.getEmpty());return e||(e=wa.getEmpty()),e}parseList(e){const t=new Array;for(;;){const i=this.tokenizer.peek();if(!i||i.kind===2&&i.bracketIds.intersects(e))break;const s=this.parseChild(e);s.kind===4&&s.childrenLength===0||t.push(s)}return this.oldNodeReader?eY(t):m3(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!UZ(n)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>yf(s.length,n)?s.canBeReused(e):!1);if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new YZ(t.bracketIds,t.length);case 0:return t.astNode;case 1:{const n=e.merge(t.bracketIds),i=this.parseList(n),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===t.bracketId||s.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),n_.create(t.astNode,i,s.astNode)):n_.create(t.astNode,i,null)}default:throw new Error("unexpected")}}}class rY extends j{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new R,this.denseKeyProvider=new f3,this.brackets=new p3(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,e.tokenization.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new QZ(this.textModel.getValue(),n);this.initialAstWithoutTokens=FL(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.tokenization.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new KR(pn(n.fromLineNumber-1,0),pn(n.toLineNumber,0),pn(n.toLineNumber-n.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=e.changes.map(n=>{const i=x.lift(n.range);return new KR(gh(i.getStartPosition()),gh(i.getEndPosition()),zZ(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const i=t,s=new g3(this.textModel,this.brackets);return FL(s,e,i,n)}getBracketsInRange(e){const t=pn(e.startLineNumber-1,e.startColumn-1),n=pn(e.endLineNumber-1,e.endColumn-1),i=new Array,s=this.initialAstWithoutTokens||this.astWithTokens;return BL(s,jr,s.length,t,n,i,0,new Map),i}getBracketPairsInRange(e,t){const n=new Array,i=gh(e.getStartPosition()),s=gh(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new oY(n,t,this.textModel);return WL(o,jr,o.length,i,s,a,0,new Map),n}getFirstBracketAfter(e){const t=this.initialAstWithoutTokens||this.astWithTokens;return b3(t,jr,t.length,gh(e))}getFirstBracketBefore(e){const t=this.initialAstWithoutTokens||this.astWithTokens;return _3(t,jr,t.length,gh(e))}}function _3(r,e,t,n){if(r.kind===4||r.kind===2){const i=[];for(const s of r.children)t=ln(e,s.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=i.length-1;s>=0;s--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=i[s];if(yf(o,n)){const l=_3(r.children[s],o,a,n);if(l)return l}}return null}else{if(r.kind===3)return null;if(r.kind===1){const i=wl(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function b3(r,e,t,n){if(r.kind===4||r.kind===2){for(const i of r.children){if(t=ln(e,i.length),yf(n,t)){const s=b3(i,e,t,n);if(s)return s}e=t}return null}else{if(r.kind===3)return null;if(r.kind===1){const i=wl(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function BL(r,e,t,n,i,s,o,a){if(!(o>200)){if(r.kind===4)for(const l of r.children)t=ln(e,l.length),fc(e,i)&&Rp(t,n)&&BL(l,e,t,n,i,s,o,a),e=t;else if(r.kind===2){let l=0;if(a){let c=a.get(r.openingBracket.text);c===void 0&&(c=0),l=c,c++,a.set(r.openingBracket.text,c)}{const c=r.openingBracket;if(t=ln(e,c.length),fc(e,i)&&Rp(t,n)){const d=wl(e,t);s.push(new dv(d,o,l,!r.closingBracket))}e=t}if(r.child){const c=r.child;t=ln(e,c.length),fc(e,i)&&Rp(t,n)&&BL(c,e,t,n,i,s,o+1,a),e=t}if(r.closingBracket){const c=r.closingBracket;if(t=ln(e,c.length),fc(e,i)&&Rp(t,n)){const d=wl(e,t);s.push(new dv(d,o,l,!1))}e=t}a?.set(r.openingBracket.text,l)}else if(r.kind===3){const l=wl(e,t);s.push(new dv(l,o-1,0,!0))}else if(r.kind===1){const l=wl(e,t);s.push(new dv(l,o-1,0,!1))}}}class oY{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function WL(r,e,t,n,i,s,o,a){var l;if(!(o>200))if(r.kind===2){let c=0;if(a){let h=a.get(r.openingBracket.text);h===void 0&&(h=0),c=h,h++,a.set(r.openingBracket.text,h)}const d=ln(e,r.openingBracket.length);let u=-1;if(s.includeMinIndentation&&(u=r.computeMinIndentation(e,s.textModel)),s.result.push(new VZ(wl(e,t),wl(e,d),r.closingBracket?wl(ln(d,((l=r.child)===null||l===void 0?void 0:l.length)||jr),t):void 0,o,c,r,u)),e=d,r.child){const h=r.child;t=ln(e,h.length),fc(e,i)&&Rp(t,n)&&WL(h,e,t,n,i,s,o+1,a)}a?.set(r.openingBracket.text,c)}else{let c=e;for(const d of r.children){const u=c;c=ln(c,d.length),fc(u,i)&&fc(n,c)&&WL(d,u,c,n,i,s,o,a)}}}class aY extends j{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Fi),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get canBuildAST(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Q;this.bracketPairsTree.value=lY(e.add(new rY(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t,n){const i=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=U0(this.getBracketPairsInRange(x.fromPositions(t,t))||[],l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?uv(this._findMatchingBracketUp(l,i,ES(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=qF(this.getBracketPairsInRange(x.fromPositions(e,e)).filter(i=>i.closingBracketRange!==void 0&&(i.openingBracketRange.containsPosition(e)||i.closingBracketRange.containsPosition(e))),Gp(i=>i.openingBracketRange.containsPosition(e)?i.openingBracketRange:i.closingBracketRange,x.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=ES(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),o=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=i-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if($o(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=i+1;c<s;c++){const d=t.getStartOffset(c);if(d>=l)break;if($o(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),o=i.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(o)).brackets;if(a&&!$o(i.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,i,a,o),d=null;for(;;){const u=Or.findNextBracketInRange(a.forwardRegex,n,s,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof tl)return null;d=f}}l=u.endColumn-1}if(d)return d}if(o>0&&i.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(l)).brackets;if(c&&!$o(i.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,i,c,l),h=Or.findPrevBracketInRange(c.reversedRegex,n,s,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof tl?null:g}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof tl?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,s=e.reversedRegex;let o=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(n&&++a%100===0&&!n())return tl.INSTANCE;const f=Or.findPrevBracketInRange(s,c,d,u,h);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,g=h.length,_=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,_=t.column-1);let b=!0;for(;f>=0;f--){const v=d.getLanguageId(f)===i&&!$o(d.getStandardTokenType(f));if(v)b?g=d.getStartOffset(f):(g=d.getStartOffset(f),_=d.getEndOffset(f));else if(b&&g!==_){const C=l(c,h,g,_);if(C)return C}b=v}if(b&&g!==_){const v=l(c,h,g,_);if(v)return v}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,s=e.forwardRegex;let o=1,a=0;const l=(d,u,h,f)=>{for(;;){if(n&&++a%100===0&&!n())return tl.INSTANCE;const g=Or.findNextBracketInRange(s,d,u,h,f);if(!g)break;const _=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(_)?o++:e.isClose(_)&&o--,o===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let g=0,_=0,b=0;d===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),_=t.column-1,b=t.column-1);let v=!0;for(;g<h;g++){const C=u.getLanguageId(g)===i&&!$o(u.getStandardTokenType(g));if(C)v||(_=u.getStartOffset(g)),b=u.getEndOffset(g);else if(v&&_!==b){const y=l(d,f,_,b);if(y)return y}v=C}if(v&&_!==b){const C=l(d,f,_,b);if(C)return C}}return null}findPrevBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(n))||null;let i=null,s=null,o=null;for(let a=n.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===n.lineNumber){u=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,f=n.column-1;const _=l.getLanguageId(u);i!==_&&(i=_,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let g=!0;for(;u>=0;u--){const _=l.getLanguageId(u);if(i!==_){if(s&&o&&g&&h!==f){const v=Or.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(v)return this._toFoundBracket(o,v);g=!1}i=_,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const b=!!s&&!$o(l.getStandardTokenType(u));if(b)g?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(o&&s&&g&&h!==f){const v=Or.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(v)return this._toFoundBracket(o,v)}g=b}if(o&&s&&g&&h!==f){const _=Or.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(_)return this._toFoundBracket(o,_)}}return null}findNextBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(n))||null;const i=this.textModel.getLineCount();let s=null,o=null,a=null;for(let l=n.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===n.lineNumber){h=c.findTokenIndexAtOffset(n.column-1),f=n.column-1,g=n.column-1;const b=c.getLanguageId(h);s!==b&&(s=b,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let _=!0;for(;h<d;h++){const b=c.getLanguageId(h);if(s!==b){if(a&&o&&_&&f!==g){const C=Or.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(C)return this._toFoundBracket(a,C);_=!1}s=b,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const v=!!o&&!$o(c.getStandardTokenType(h));if(v)_||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(a&&o&&_&&f!==g){const C=Or.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(C)return this._toFoundBracket(a,C)}_=v}if(a&&o&&_&&f!==g){const b=Or.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(b)return this._toFoundBracket(a,b)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=x.fromPositions(n),g=U0(this.getBracketPairsInRange(x.fromPositions(n,n)),_=>_.closingBracketRange!==void 0&&_.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const i=ES(t),s=this.textModel.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){const _=[];for(let b=0,v=g?g.brackets.length:0;b<v;b++)_[b]=0;o.set(f,_)}a=o.get(f)};let c=0;const d=(f,g,_,b,v)=>{for(;;){if(i&&++c%100===0&&!i())return tl.INSTANCE;const C=Or.findNextBracketInRange(f.forwardRegex,g,_,b,v);if(!C)break;const y=_.substring(C.startColumn-1,C.endColumn-1).toLowerCase(),w=f.textIsBracket[y];if(w&&(w.isOpen(y)?a[w.index]++:w.isClose(y)&&a[w.index]--,a[w.index]===-1))return this._matchFoundBracket(C,w,!1,i);b=C.endColumn-1}return null};let u=null,h=null;for(let f=n.lineNumber;f<=s;f++){const g=this.textModel.tokenization.getLineTokens(f),_=g.getCount(),b=this.textModel.getLineContent(f);let v=0,C=0,y=0;if(f===n.lineNumber){v=g.findTokenIndexAtOffset(n.column-1),C=n.column-1,y=n.column-1;const L=g.getLanguageId(v);u!==L&&(u=L,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let w=!0;for(;v<_;v++){const L=g.getLanguageId(v);if(u!==L){if(h&&w&&C!==y){const S=d(h,f,b,C,y);if(S)return uv(S);w=!1}u=L,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const T=!!h&&!$o(g.getStandardTokenType(v));if(T)w||(C=g.getStartOffset(v)),y=g.getEndOffset(v);else if(h&&w&&C!==y){const S=d(h,f,b,C,y);if(S)return uv(S)}w=T}if(h&&w&&C!==y){const L=d(h,f,b,C,y);if(L)return uv(L)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}}function lY(r,e){return{object:r,dispose:()=>e?.dispose()}}function ES(r){if(typeof r>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=r}}class tl{constructor(){this._searchCanceledBrand=void 0}}tl.INSTANCE=new tl;function uv(r){return r instanceof tl?null:r}class cY extends j{constructor(e){super(),this.textModel=e,this.colorProvider=new v3,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const i=new Array,s=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of s)i.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range});return i}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new x(1,1,this.textModel.getLineCount(),1),e,t):[]}}class v3{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Vt((r,e)=>{const t=[q5,Z5,Y5,X5,Q5,J5],n=new v3;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${r.getColor(MG)}; }`);const i=t.map(s=>r.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const o=i[s%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${o}; }`)}});function hv(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class oi{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${hv(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${hv(this.oldText)}")`:`(replace@${this.oldPosition} "${hv(this.oldText)}" with "${hv(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;no(e,i,n),n+=4;for(let s=0;s<i;s++)GH(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=to(e,t);return t+=4,rL(e,t,n)}writeSize(){return 4+4+oi._writeStringSize(this.oldText)+oi._writeStringSize(this.newText)}write(e,t){return no(e,this.oldPosition,t),t+=4,no(e,this.newPosition,t),t+=4,t=oi._writeString(e,this.oldText,t),t=oi._writeString(e,this.newText,t),t}static read(e,t,n){const i=to(e,t);t+=4;const s=to(e,t);t+=4;const o=oi._readString(e,t);t+=oi._writeStringSize(o);const a=oi._readString(e,t);return t+=oi._writeStringSize(a),n.push(new oi(i,o,s,a)),t}}function dY(r,e){return r===null||r.length===0?e:new Go(r,e).compress()}class Go{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[c,d]=Go._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(c),i=d;continue}if(n.newPosition<i.oldPosition){const[c,d]=Go._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(c),n=d;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[c,d]=Go._splitPrev(n,i.oldLength);a=c,l=i,n=d,i=this._getCurr(++t)}else{const[c,d]=Go._splitCurr(i,n.newLength);a=n,l=c,n=this._getPrev(++e),i=d}this._result[this._resultLen++]=new oi(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=Go._merge(this._result);return Go._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Go._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Go._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new oi(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new oi(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new oi(e.oldPosition,e.oldText,e.newPosition,n),new oi(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new oi(e.oldPosition,n,e.newPosition,e.newText),new oi(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,i=e[0];for(let s=1;s<e.length;s++){const o=e[s];i.oldEnd===o.oldPosition?i=new oi(i.oldPosition,i.oldText+o.oldText,i.newPosition,i.newText+o.newText):(t[n++]=i,i=o)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}function Kl(r){return r===47||r===92}function C3(r){return r.replace(/[\\/]/g,En.sep)}function uY(r){return r.indexOf("/")===-1&&(r=C3(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function ZR(r,e=En.sep){if(!r)return"";const t=r.length,n=r.charCodeAt(0);if(Kl(n)){if(Kl(r.charCodeAt(1))&&!Kl(r.charCodeAt(2))){let s=3;const o=s;for(;s<t&&!Kl(r.charCodeAt(s));s++);if(o!==s&&!Kl(r.charCodeAt(s+1))){for(s+=1;s<t;s++)if(Kl(r.charCodeAt(s)))return r.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(y3(n)&&r.charCodeAt(1)===58)return Kl(r.charCodeAt(2))?r.slice(0,2)+e:r.slice(0,2);let i=r.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(Kl(r.charCodeAt(i)))return r.slice(0,i+1)}return""}function VL(r,e,t,n=ha){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!jE(r,e))return!1;if(e.length===r.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,r.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function y3(r){return r>=65&&r<=90||r>=97&&r<=122}function hY(r,e=hi){return e?y3(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function zo(r){return q0(r,!0)}class ZA{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Am(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===He.file)return VL(zo(e),zo(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(XR(e.authority,t.authority))return VL(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Se.joinPath(e,...t)}basenameOrAuthority(e){return kr(e)||e.authority}basename(e){return En.basename(e.path)}extname(e){return En.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===He.file?t=Se.file(c4(zo(e))).path:(t=En.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===He.file?t=Se.file(l4(zo(e))).path:t=En.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!XR(e.authority,t.authority))return;if(e.scheme===He.file){const s=XV(zo(e),zo(t));return hi?C3(s):s}let n=e.path||"/";const i=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const o=Math.min(n.length,i.length);s<o&&!(n.charCodeAt(s)!==i.charCodeAt(s)&&n.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);n=i.substr(0,s)+n.substr(s)}return En.relative(n,i)}resolvePath(e,t){if(e.scheme===He.file){const n=Se.file(YV(zo(e),t));return e.with({authority:n.authority,path:n.path})}return t=uY(t),e.with({path:En.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Vh(e,t)}hasTrailingPathSeparator(e,t=ha){if(e.scheme===He.file){const n=zo(e);return n.length>ZR(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ha){return QR(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ha){let n=!1;if(e.scheme===He.file){const i=zo(e);n=i!==void 0&&i.length===ZR(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!QR(e,t)?e.with({path:e.path+"/"}):e}}const Wt=new ZA(()=>!1);new ZA(r=>r.scheme===He.file?!Ti:!0);new ZA(r=>!0);const w3=Wt.isEqual.bind(Wt);Wt.isEqualOrParent.bind(Wt);Wt.getComparisonKey.bind(Wt);const fY=Wt.basenameOrAuthority.bind(Wt),kr=Wt.basename.bind(Wt),gY=Wt.extname.bind(Wt),S1=Wt.dirname.bind(Wt),pY=Wt.joinPath.bind(Wt),mY=Wt.normalizePath.bind(Wt),_Y=Wt.relativePath.bind(Wt),YR=Wt.resolvePath.bind(Wt);Wt.isAbsolutePath.bind(Wt);const XR=Wt.isEqualAuthority.bind(Wt),QR=Wt.hasTrailingPathSeparator.bind(Wt);Wt.removeTrailingPathSeparator.bind(Wt);Wt.addTrailingPathSeparator.bind(Wt);var Wc;(function(r){r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(r.META_DATA_MIME,s),n}r.parseMetaData=e})(Wc||(Wc={}));function ph(r){return r.toString()}class Kn{constructor(e,t,n,i,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),i=HL(e);return new Kn(n,n,i,i,t,t,[])}append(e,t,n,i,s){t.length>0&&(this.changes=dY(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(no(e,t?t.length:0,n),n+=4,t)for(const i of t)no(e,i.selectionStartLineNumber,n),n+=4,no(e,i.selectionStartColumn,n),n+=4,no(e,i.positionLineNumber,n),n+=4,no(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=to(e,t);t+=4;for(let s=0;s<i;s++){const o=to(e,t);t+=4;const a=to(e,t);t+=4;const l=to(e,t);t+=4;const c=to(e,t);t+=4,n.push(new ue(o,a,l,c))}return t}serialize(){let e=10+Kn._writeSelectionsSize(this.beforeCursorState)+Kn._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;no(t,this.beforeVersionId,n),n+=4,no(t,this.afterVersionId,n),n+=4,SM(t,this.beforeEOL,n),n+=1,SM(t,this.afterEOL,n),n+=1,n=Kn._writeSelections(t,this.beforeCursorState,n),n=Kn._writeSelections(t,this.afterCursorState,n),no(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=to(t,n);n+=4;const s=to(t,n);n+=4;const o=wM(t,n);n+=1;const a=wM(t,n);n+=1;const l=[];n=Kn._readSelections(t,n,l);const c=[];n=Kn._readSelections(t,n,c);const d=to(t,n);n+=4;const u=[];for(let h=0;h<d;h++)n=oi.read(t,n,u);return new Kn(i,s,o,a,l,c,u)}}class S3{constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=Kn.create(n,i)}get type(){return 0}get resource(){return Se.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Kn?this._data:Kn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Se.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Kn}append(e,t,n,i,s){this._data instanceof Kn&&this._data.append(e,t,n,i,s)}close(){this._data instanceof Kn&&(this._data=this._data.serialize())}open(){this._data instanceof Kn||(this._data=Kn.deserialize(this._data))}undo(){if(Se.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Kn&&(this._data=this._data.serialize());const e=Kn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Se.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Kn&&(this._data=this._data.serialize());const e=Kn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Kn&&(this._data=this._data.serialize()),this._data.byteLength+168}}class bY{constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const s=ph(i.resource);this._editStackElementsMap.set(s,i)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=ph(e);return this._editStackElementsMap.has(t)}setModel(e){const t=ph(Se.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=ph(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,s){const o=ph(e.uri);this._editStackElementsMap.get(o).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=ph(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${kr(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function HL(r){return r.getEOL()===`
`?0:1}function nl(r){return r?r instanceof S3||r instanceof bY:!1}class YA{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);nl(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);nl(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(nl(t)&&t.canAppend(this._model))return t;const n=new S3(p("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],HL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),o=YA._computeCursorState(n,s),a=s.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),i.append(this._model,a.map(l=>l.textChange),HL(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return We(n),null}}}class vY{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function CY(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){const h=r.charCodeAt(s),f=t.charCodeAt(s);if(h!==f)break}let o=0,a=0;for(let h=s;h<e;h++)r.charCodeAt(h)===32?o++:a++;let l=0,c=0;for(let h=s;h<n;h++)t.charCodeAt(h)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(o-l);if(d===0){i.spacesDiff=u,u>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(u%d===0){i.spacesDiff=u/d;return}}function JR(r,e,t){const n=Math.min(r.getLineCount(),1e4);let i=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new vY;for(let g=1;g<=n;g++){const _=r.getLineLength(g),b=r.getLineContent(g),v=_<=65536;let C=!1,y=0,w=0,L=0;for(let S=0,k=_;S<k;S++){const D=v?b.charCodeAt(S):r.getLineCharCode(g,S);if(D===9)L++;else if(D===32)w++;else{C=!0,y=S;break}}if(!C||(L>0?i++:w>1&&s++,CY(o,a,b,y,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const T=u.spacesDiff;T<=c&&d[T]++,o=b,a=y}let h=t;i!==s&&(h=i<s);let f=e;if(h){let g=h?0:.1*n;l.forEach(_=>{const b=d[_];b>g&&(g=b,f=_)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function ts(r){return(r.metadata&1)>>>0}function Ot(r,e){r.metadata=r.metadata&254|e<<0}function ui(r){return(r.metadata&2)>>>1===1}function Nt(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function x3(r){return(r.metadata&4)>>>2===1}function e2(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function yY(r){return(r.metadata&24)>>>3}function t2(r,e){r.metadata=r.metadata&231|e<<3}function wY(r){return(r.metadata&32)>>>5===1}function n2(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}class k3{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ot(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,e2(this,!1),t2(this,1),n2(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Nt(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;e2(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),t2(this,this.options.stickiness),n2(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const je=new k3(null,0,0);je.parent=je;je.left=je;je.right=je;Ot(je,0);class AS{constructor(){this.root=je,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s){return this.root===je?[]:AY(this,e,t,n,i,s)}search(e,t,n){return this.root===je?[]:EY(this,e,t,n)}collectNodesFromOwner(e){return TY(this,e)}collectNodesPostOrder(){return DY(this)}insert(e){i2(this,e),this._normalizeDeltaIfNecessary()}delete(e){s2(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,o=n.end+i;n.setCachedOffsets(s,o,t)}acceptReplace(e,t,n,i){const s=kY(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const l=s[o];s2(this,l)}this._normalizeDeltaIfNecessary(),LY(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const l=s[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,xY(l,e,e+t,n,i),l.maxEnd=l.end,i2(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,SY(this))}}function SY(r){let e=r.root,t=0;for(;e!==je;){if(e.left!==je&&!ui(e.left)){e=e.left;continue}if(e.right!==je&&!ui(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Vc(e),Nt(e,!0),Nt(e.left,!1),Nt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Nt(r.root,!1)}function mh(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function xY(r,e,t,n,i){const s=yY(r),o=s===0||s===2,a=s===1||s===2,l=t-e,c=n,d=Math.min(l,c),u=r.start;let h=!1;const f=r.end;let g=!1;e<=u&&f<=t&&wY(r)&&(r.start=e,h=!0,r.end=e,g=!0);{const b=i?1:l>0?2:0;!h&&mh(u,o,e,b)&&(h=!0),!g&&mh(f,a,e,b)&&(g=!0)}if(d>0&&!i){const b=l>c?2:0;!h&&mh(u,o,e+d,b)&&(h=!0),!g&&mh(f,a,e+d,b)&&(g=!0)}{const b=i?1:0;!h&&mh(u,o,t,b)&&(r.start=e+c,h=!0),!g&&mh(f,a,t,b)&&(r.end=e+c,g=!0)}const _=c-l;h||(r.start=Math.max(0,u+_)),g||(r.end=Math.max(0,f+_)),r.start>r.end&&(r.end=r.start)}function kY(r,e,t){let n=r.root,i=0,s=0,o=0,a=0;const l=[];let c=0;for(;n!==je;){if(ui(n)){Nt(n.left,!1),Nt(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!ui(n.left)){if(s=i+n.maxEnd,s<e){Nt(n,!0);continue}if(n.left!==je){n=n.left;continue}}if(o=i+n.start,o>t){Nt(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),Nt(n,!0),n.right!==je&&!ui(n.right)){i+=n.delta,n=n.right;continue}}return Nt(r.root,!1),l}function LY(r,e,t,n){let i=r.root,s=0,o=0,a=0;const l=n-(t-e);for(;i!==je;){if(ui(i)){Nt(i.left,!1),Nt(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),Vc(i),i=i.parent;continue}if(!ui(i.left)){if(o=s+i.maxEnd,o<e){Nt(i,!0);continue}if(i.left!==je){i=i.left;continue}}if(a=s+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),Nt(i,!0);continue}if(Nt(i,!0),i.right!==je&&!ui(i.right)){s+=i.delta,i=i.right;continue}}Nt(r.root,!1)}function TY(r,e){let t=r.root;const n=[];let i=0;for(;t!==je;){if(ui(t)){Nt(t.left,!1),Nt(t.right,!1),t=t.parent;continue}if(t.left!==je&&!ui(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Nt(t,!0),t.right!==je&&!ui(t.right)){t=t.right;continue}}return Nt(r.root,!1),n}function DY(r){let e=r.root;const t=[];let n=0;for(;e!==je;){if(ui(e)){Nt(e.left,!1),Nt(e.right,!1),e=e.parent;continue}if(e.left!==je&&!ui(e.left)){e=e.left;continue}if(e.right!==je&&!ui(e.right)){e=e.right;continue}t[n++]=e,Nt(e,!0)}return Nt(r.root,!1),t}function EY(r,e,t,n){let i=r.root,s=0,o=0,a=0;const l=[];let c=0;for(;i!==je;){if(ui(i)){Nt(i.left,!1),Nt(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(i.left!==je&&!ui(i.left)){i=i.left;continue}o=s+i.start,a=s+i.end,i.setCachedOffsets(o,a,n);let d=!0;if(e&&i.ownerId&&i.ownerId!==e&&(d=!1),t&&x3(i)&&(d=!1),d&&(l[c++]=i),Nt(i,!0),i.right!==je&&!ui(i.right)){s+=i.delta,i=i.right;continue}}return Nt(r.root,!1),l}function AY(r,e,t,n,i,s){let o=r.root,a=0,l=0,c=0,d=0;const u=[];let h=0;for(;o!==je;){if(ui(o)){Nt(o.left,!1),Nt(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!ui(o.left)){if(l=a+o.maxEnd,l<e){Nt(o,!0);continue}if(o.left!==je){o=o.left;continue}}if(c=a+o.start,c>t){Nt(o,!0);continue}if(d=a+o.end,d>=e){o.setCachedOffsets(c,d,s);let f=!0;n&&o.ownerId&&o.ownerId!==n&&(f=!1),i&&x3(o)&&(f=!1),f&&(u[h++]=o)}if(Nt(o,!0),o.right!==je&&!ui(o.right)){a+=o.delta,o=o.right;continue}}return Nt(r.root,!1),u}function i2(r,e){if(r.root===je)return e.parent=je,e.left=je,e.right=je,Ot(e,0),r.root=e,r.root;IY(r,e),tc(e.parent);let t=e;for(;t!==r.root&&ts(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;ts(n)===1?(Ot(t.parent,0),Ot(n,0),Ot(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,rm(r,t)),Ot(t.parent,0),Ot(t.parent.parent,1),om(r,t.parent.parent))}else{const n=t.parent.parent.left;ts(n)===1?(Ot(t.parent,0),Ot(n,0),Ot(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,om(r,t)),Ot(t.parent,0),Ot(t.parent.parent,1),rm(r,t.parent.parent))}return Ot(r.root,0),e}function IY(r,e){let t=0,n=r.root;const i=e.start,s=e.end;for(;;)if(MY(i,s,n.start+t,n.end+t)<0)if(n.left===je){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===je){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=je,e.right=je,Ot(e,1)}function s2(r,e){let t,n;if(e.left===je?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===je?(t=e.left,n=e):(n=NY(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,Ot(t,0),e.detach(),IS(),Vc(t),r.root.parent=je;return}const i=ts(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Ot(n,ts(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==je&&(n.left.parent=n),n.right!==je&&(n.right.parent=n)),e.detach(),i){tc(t.parent),n!==e&&(tc(n),tc(n.parent)),IS();return}tc(t),tc(t.parent),n!==e&&(tc(n),tc(n.parent));let s;for(;t!==r.root&&ts(t)===0;)t===t.parent.left?(s=t.parent.right,ts(s)===1&&(Ot(s,0),Ot(t.parent,1),rm(r,t.parent),s=t.parent.right),ts(s.left)===0&&ts(s.right)===0?(Ot(s,1),t=t.parent):(ts(s.right)===0&&(Ot(s.left,0),Ot(s,1),om(r,s),s=t.parent.right),Ot(s,ts(t.parent)),Ot(t.parent,0),Ot(s.right,0),rm(r,t.parent),t=r.root)):(s=t.parent.left,ts(s)===1&&(Ot(s,0),Ot(t.parent,1),om(r,t.parent),s=t.parent.left),ts(s.left)===0&&ts(s.right)===0?(Ot(s,1),t=t.parent):(ts(s.left)===0&&(Ot(s.right,0),Ot(s,1),rm(r,s),s=t.parent.left),Ot(s,ts(t.parent)),Ot(t.parent,0),Ot(s.left,0),om(r,t.parent),t=r.root));Ot(t,0),IS()}function NY(r){for(;r.left!==je;)r=r.left;return r}function IS(){je.parent=je,je.delta=0,je.start=0,je.end=0}function rm(r,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==je&&(t.left.parent=e),t.parent=e.parent,e.parent===je?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Vc(e),Vc(t)}function om(r,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==je&&(t.right.parent=e),t.parent=e.parent,e.parent===je?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Vc(e),Vc(t)}function L3(r){let e=r.end;if(r.left!==je){const t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==je){const t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function Vc(r){r.maxEnd=L3(r)}function tc(r){for(;r!==je;){const e=L3(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function MY(r,e,t,n){return r===t?e-n:r-t}class UL{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Me)return XA(this.right);let e=this;for(;e.parent!==Me&&e.parent.left!==e;)e=e.parent;return e.parent===Me?Me:e.parent}prev(){if(this.left!==Me)return T3(this.left);let e=this;for(;e.parent!==Me&&e.parent.right!==e;)e=e.parent;return e.parent===Me?Me:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Me=new UL(null,0);Me.parent=Me;Me.left=Me;Me.right=Me;Me.color=0;function XA(r){for(;r.left!==Me;)r=r.left;return r}function T3(r){for(;r.right!==Me;)r=r.right;return r}function QA(r){return r===Me?0:r.size_left+r.piece.length+QA(r.right)}function JA(r){return r===Me?0:r.lf_left+r.piece.lineFeedCnt+JA(r.right)}function NS(){Me.parent=Me}function am(r,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Me&&(t.left.parent=e),t.parent=e.parent,e.parent===Me?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function lm(r,e){const t=e.left;e.left=t.right,t.right!==Me&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Me?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function fv(r,e){let t,n;if(e.left===Me?(n=e,t=n.right):e.right===Me?(n=e,t=n.left):(n=XA(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),NS(),r.root.parent=Me;return}const i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,Op(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,Op(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Me&&(n.left.parent=n),n.right!==Me&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,Op(r,n)),e.detach(),t.parent.left===t){const o=QA(t),a=JA(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,za(r,t.parent,l,c)}}if(Op(r,t.parent),i){NS();return}let s;for(;t!==r.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,am(r,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,lm(r,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,am(r,t.parent),t=r.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,lm(r,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,am(r,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,lm(r,t.parent),t=r.root));t.color=0,NS()}function r2(r,e){for(Op(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,am(r,e)),e.parent.color=0,e.parent.parent.color=1,lm(r,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,lm(r,e)),e.parent.color=0,e.parent.parent.color=1,am(r,e.parent.parent))}r.root.color=0}function za(r,e,t,n){for(;e!==r.root&&e!==Me;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function Op(r,e){let t=0,n=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=QA(e.left)-e.size_left,n=JA(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}const Ba=65535;function D3(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}class RY{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}function Za(r,e=!0){const t=[0];let n=1;for(let i=0,s=r.length;i<s;i++){const o=r.charCodeAt(i);o===13?i+1<s&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:o===10&&(t[n++]=i+1)}return e?D3(t):t}function OY(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,s=0,o=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,r[t++]=l+2,l++):(n++,r[t++]=l+1):d===10?(i++,r[t++]=l+1):o&&d!==9&&(d<32||d>126)&&(o=!1)}const a=new RY(D3(r),n,i,s,o);return r.length=0,a}class bs{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}class Ed{constructor(e,t){this.buffer=e,this.lineStarts=t}}class PY{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Me&&e.iterate(e.root,n=>(n!==Me&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class FY{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const s=n[i];if(s.node.parent===null||s.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){const i=[];for(const s of n)s!==null&&i.push(s);this._cache=i}}}class BY{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Ed("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Me,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Za(e[s].buffer));const a=new bs(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,a)}this._searchCache=new FY(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Ba,n=t-Math.floor(t/3),i=n*2;let s="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(o<=n||o+d<i)return s+=c,o+=d,!0;const u=s.replace(/\r\n|\r|\n/g,e);return a.push(new Ed(u,Za(u))),s=c,o=d,!0}),o>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new Ed(l,Za(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new PY(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Me;)if(i.left!==Me&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;const s=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==Me;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){const o=this.getOffsetAt(n+1,1),a=i-o;return new B(n+1,a+1)}return new B(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Me){const s=this.getOffsetAt(n+1,1),o=i-e-s;return new B(n+1,o+1)}else t=t.right;return new B(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let o=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==Me;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===Me)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,d=o.start.line,u=o.end.line;let h=c[d]+o.start.column;if(i&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(i=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=d+1;f<u;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(i=!0,o.end.column===0?t--:n=l.substr(c[u],o.end.column-1)):n=l.substr(c[u],o.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,o,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,s),_=this.offsetInBuffer(e.piece.bufferIndex,o);let b;const v={line:0,column:0};let C,y;t._wordSeparators?(C=h.buffer.substring(g,_),y=w=>w+g,t.reset(0)):(C=h.buffer,y=w=>w,t.reset(g));do if(b=t.next(C),b){if(y(b.index)>=_)return d;this.positionInBuffer(e,y(b.index)-f,v);const w=this.getLineFeedCnt(e.piece.bufferIndex,s,v),L=v.line===s.line?v.column-s.column+i:v.column+1,T=L+b[0].length;if(u[d++]=xd(new x(n+w,L,n+w,T),b,l),y(b.index)+b[0].length>=_||d>=c)return d}while(b);return d}findMatchesLineByLine(e,t,n,i){const s=[];let o=0;const a=new jh(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,n,i,o,s),s;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const _=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(_>=1){const v=this._buffers[f.piece.bufferIndex].lineStarts,C=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=v[d.line+_],w=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,h,w,d,this.positionInBuffer(f,y-C),t,n,i,o,s),o>=i)return s;h+=_}const b=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const v=this.getLineContent(h).substring(b,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,b,o,s,n,i),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(b),h,b,o,s,n,i),o>=i)return s;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const _=h===e.startLineNumber?e.startColumn-1:0,b=this.getLineContent(h).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,b,e.endLineNumber,_,o,s,n,i),s}const g=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,h,g,d,u,t,n,i,o,s),s}_findMatchesInLine(e,t,n,i,s,o,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=n.length;let _=-f;for(;(_=n.indexOf(h,_+f))!==-1;)if((!d||aA(d,n,g,_,f))&&(a[o++]=new Nm(new x(i,_+1+s,i,_+1+f+s),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(n),u&&(a[o++]=xd(new x(i,u.index+1+s,i,u.index+1+u[0].length+s),u,l),o>=c))return o;while(u);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Me){const{node:i,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,c=this.positionInBuffer(i,s);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Ba){this.appendToNode(i,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(o+i.piece.length>e){const d=[];let u=new bs(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,s)===10){const _={line:u.start.line+1,column:0};u=new bs(u.bufferIndex,_,u.end,this.getLineFeedCnt(u.bufferIndex,_,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,s-1)===13){const _=this.positionInBuffer(i,s-1);this.deleteNodeTail(i,_),t="\r"+t,i.piece.length===0&&d.push(i)}else this.deleteNodeTail(i,c);else this.deleteNodeTail(i,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(i,u);let f=i;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,i)}else{const i=this.createNewPieces(t);let s=this.rbInsertLeft(null,i[0]);for(let o=1;o<i.length;o++)s=this.rbInsertRight(s,i[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Me)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,o=i.node;if(s===o){const h=this.positionInBuffer(s,n.remainder),f=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){const g=s.next();fv(this,s),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(s,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,h),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(o,i.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const d=s.next();for(let h=d;h!==Me&&h!==o;h=h.next())a.push(h);const u=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new bs(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,za(this,t,-1,-1),t.piece.length===0&&n.push(t)}const i=this.createNewPieces(e);let s=this.rbInsertLeft(t,i[i.length-1]);for(let o=i.length-2;o>=0;o--)s=this.rbInsertLeft(s,i[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let s=i;for(let o=1;o<n.length;o++)s=this.rbInsertRight(s,n[o]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,l=o[i.start.line]+i.start.column+t;let c=i.start.line,d=i.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=o[u],u!==d);)if(h=o[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return n?(n.line=u,n.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const s=i[n.line+1],o=i[n.line]+n.column;if(s>o+1)return n.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)fv(this,e[t])}createNewPieces(e){if(e.length>Ba){const d=[];for(;e.length>Ba;){const h=e.charCodeAt(Ba-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,Ba-1),e=e.substring(Ba-1)):(f=e.substring(0,Ba),e=e.substring(Ba));const g=Za(f);d.push(new bs(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new Ed(f,g))}const u=Za(e);return d.push(new bs(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new Ed(e,u)),d}let t=this._buffers[0].buffer.length;const n=Za(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new bs(0,i,l,this.getLineFeedCnt(0,i,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,i="";const s=this._searchCache.get2(e);if(s){n=s.node;const o=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+o,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==Me;)if(n.left!==Me&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(u+l,u+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Me;){const o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=o.substring(l,l+a-t),i}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=o.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Me;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-i,d=a-s,u=n.length+d;e.piece=new bs(n.bufferIndex,n.start,o,l,u),za(this,e,d,c)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-i,d=s-l,u=n.length+d;e.piece=new bs(n.bufferIndex,o,n.end,a,u),za(this,e,d,c)}shrinkNode(e,t,n){const i=e.piece,s=i.start,o=i.end,a=i.length,l=i.lineFeedCnt,c=t,d=this.getLineFeedCnt(i.bufferIndex,i.start,c),u=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new bs(i.bufferIndex,i.start,c,d,u),za(this,e,u-a,d-l);const h=new bs(i.bufferIndex,n,o,this.getLineFeedCnt(i.bufferIndex,n,o),this.offsetInBuffer(i.bufferIndex,o)-this.offsetInBuffer(i.bufferIndex,n)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=Za(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new bs(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,za(this,e,t.length,h)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Me;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Me;)if(n.left!==Me&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,o),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Me;){if(n.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(n.piece.length>=t-1){const s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Me||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;return i===n.length-1||n[i+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Me||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new bs(e.piece.bufferIndex,e.piece.start,s,a,o),za(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new bs(t.piece.bufferIndex,l,t.piece.end,d,c),za(this,t,-1,-1),t.piece.length===0&&n.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<n.length;h++)fv(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)fv(this,n);else{const i=n.piece,s={line:i.start.line+1,column:0},o=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,s,i.end);n.piece=new bs(i.bufferIndex,s,i.end,a,o),za(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Me)return t(Me);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Me)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new UL(t,1);if(n.left=Me,n.right=Me,n.parent=Me,n.size_left=0,n.lf_left=0,this.root===Me)this.root=n,n.color=0;else if(e.right===Me)e.right=n,n.parent=e;else{const s=XA(e.right);s.left=n,n.parent=s}return r2(this,n),n}rbInsertLeft(e,t){const n=new UL(t,1);if(n.left=Me,n.right=Me,n.parent=Me,n.size_left=0,n.lf_left=0,this.root===Me)this.root=n,n.color=0;else if(e.left===Me)e.left=n,n.parent=e;else{const i=T3(e.left);i.right=n,n.parent=i}return r2(this,n),n}}class wf extends j{constructor(e,t,n,i,s,o,a){super(),this._onDidChangeContent=this._register(new R),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new BY(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),s=this.getPositionAt(n);return new x(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let o=i;o<=s;o++){const a=this.getLineContent(o),l=o===i?e.startColumn-1:0,c=o===s?e.endColumn-1:a.length;for(let d=l;d<c;d++)Vn(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Zi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=ga(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let _=0;_<e.length;_++){const b=e[_];a&&b._isTracked&&(a=!1);const v=b.range;if(b.text){let T=!0;o||(T=!Wy(b.text),o=T),!i&&T&&(i=Of(b.text)),!s&&T&&(s=C4(b.text))}let C="",y=0,w=0,L=0;if(b.text){let T;[y,w,L,T]=vu(b.text);const S=this.getEOL();T===0||T===(S===`\r
`?2:1)?C=b.text:C=b.text.replace(/\r\n|\r|\n/g,S)}l[_]={sortIndex:_,identifier:b.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:C,eolCount:y,firstLineLength:w,lastLineLength:L,forceMoveMarkers:Boolean(b.forceMoveMarkers),isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}l.sort(wf._sortOpsAscending);let c=!1;for(let _=0,b=l.length-1;_<b;_++){const v=l[_].range.getEndPosition(),C=l[_+1].range.getStartPosition();if(C.isBeforeOrEqual(v)){if(C.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=n||t?wf._getInverseEditRanges(l):[],u=[];if(t)for(let _=0;_<l.length;_++){const b=l[_],v=d[_];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let C=v.startLineNumber;C<=v.endLineNumber;C++){let y="";C===v.startLineNumber&&(y=this.getLineContent(b.range.startLineNumber),Zi(y)!==-1)||u.push({lineNumber:C,oldContent:y})}}let h=null;if(n){let _=0;h=[];for(let b=0;b<l.length;b++){const v=l[b],C=d[b],y=this.getValueInRange(v.range),w=v.rangeOffset+_;_+=v.text.length-y.length,h[b]={sortIndex:v.sortIndex,identifier:v.identifier,range:C,text:y,textChange:new oi(v.rangeOffset,y,w,v.text)}}c||h.sort((b,v)=>b.sortIndex-v.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((_,b)=>b.lineNumber-_.lineNumber),g=[];for(let _=0,b=u.length;_<b;_++){const v=u[_].lineNumber;if(_>0&&u[_-1].lineNumber===v)continue;const C=u[_].oldContent,y=this.getLineContent(v);y.length===0||y===C||Zi(y)!==-1||g.push(v)}}return this._onDidChangeContent.fire(),new UH(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new x(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const _=e[f],b=_.range;t=t||_.forceMoveMarkers,l.push(this.getValueInRange(new x(o,a,b.startLineNumber,b.startColumn))),_.text.length>0&&l.push(_.text),o=b.endLineNumber,a=b.endColumn}const c=l.join(""),[d,u,h]=vu(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(wf._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],s=i.range.startLineNumber,o=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(s===a&&o===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const c=new x(s,o,a,l);t.push({range:c,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,s=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,d;s?s.range.endLineNumber===l.range.startLineNumber?(c=n,d=i+(l.range.startColumn-s.range.endColumn)):(c=n+(l.range.startLineNumber-s.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new x(c,d,c,d+l.firstLineLength):u=new x(c,d,c+h-1,l.lastLineLength+1)}else u=new x(c,d,c,d);n=u.endLineNumber,i=u.endColumn,t.push(u),s=l}return t}static _sortOpsAscending(e,t){const n=x.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=x.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class WY{constructor(e,t,n,i,s,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=n.length;s<o;s++){const a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=Za(a);n[s]=new Ed(a,l)}const i=new wf(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class E3{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&qE(e)&&(this.BOM=CH,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=OY(this._tmpLineStarts,e);this.chunks.push(new Ed(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=Of(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=C4(e))}finish(e=!0){return this._finish(),new WY(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Za(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class VY{constructor(e,t){this._startLineNumber=e,this._tokens=t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class MS{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new VY(e,[t]))}finalize(){return this._tokens}}class o2{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=My(this._store,e,n)}}class HY{constructor(e,t){this.tokenizationSupport=e,this.initialState=t,this._lineBeginState=new o2(null),this._lineNeedsTokenization=new o2(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,t,n){if(this._lineNeedsTokenization.set(t,!1),this._firstLineNeedsTokenization=t+1,t===e-1)return;const i=this._lineBeginState.get(t+1);if(i===null||!n.equals(i)){this._lineBeginState.set(t+1,n),this.markMustBeTokenized(t+1);return}let s=t+1;for(;s<e&&!this._lineNeedsTokenization.get(s);)s++;this._firstLineNeedsTokenization=s}applyEdits(e,t){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,t),this._lineNeedsTokenization.insert(e.startLineNumber,t)}}class UY extends j{constructor(e,t,n){super(),this._textModel=e,this._tokenizationPart=t,this._languageIdCodec=n,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(Yt.onDidChange(i=>{const s=this._textModel.getLanguageId();i.changedLanguages.indexOf(s)!==-1&&(this._resetTokenizationState(),this._tokenizationPart.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let t=0,n=e.changes.length;t<n;t++){const i=e.changes[t],[s]=vu(i.text);this._tokenizationStateStore.applyEdits(i.range,s)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}_resetTokenizationState(){const[e,t]=jY(this._textModel,this._tokenizationPart);e&&t?this._tokenizationStateStore=new HY(e,t):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Om(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?FF(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._textModel.getLineCount(),t=new MS,n=fs.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}tokenizeViewport(e,t){const n=new MS;this._tokenizeViewport(n,e,t),this._tokenizationPart.setTokens(n.finalize(),this._isTokenizationComplete())}reset(){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}forceTokenization(e){const t=new MS;this._updateTokensUntilLine(t,e),this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const i=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=lp(this._languageIdCodec,i,this._tokenizationStateStore.tokenizationSupport,o,!0,n),l=new Zn(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,s=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(i);const o=this._tokenizationStateStore.getBeginState(i-1);if(!o)return null;const a=this._textModel.getLineContent(i),l=a.substring(0,s-1)+n+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(i,0),d=lp(this._languageIdCodec,c,this._tokenizationStateStore.tokenizationSupport,l,!0,o);return new Zn(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_isTokenizationComplete(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex>=this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationStateStore)return;const n=this._textModel.getLanguageId(),i=this._textModel.getLineCount(),s=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=s;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),c=lp(this._languageIdCodec,n,this._tokenizationStateStore.tokenizationSupport,a,!0,l);e.add(o+1,c.tokens),this._tokenizationStateStore.setEndState(i,o,c.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationStateStore||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let i=this._textModel.getLineFirstNonWhitespaceColumn(t);const s=[];let o=null;for(let c=t-1;i>1&&c>=1;c--){const d=this._textModel.getLineFirstNonWhitespaceColumn(c);if(d!==0&&d<i&&(s.push(this._textModel.getLineContent(c)),i=d,o=this._tokenizationStateStore.getBeginState(c-1),o))break}o||(o=this._tokenizationStateStore.initialState);const a=this._textModel.getLanguageId();let l=o;for(let c=s.length-1;c>=0;c--)l=lp(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,s[c],!1,l).endState;for(let c=t;c<=n;c++){const d=this._textModel.getLineContent(c),u=lp(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,d,!0,l);e.add(c,u.tokens),this._tokenizationStateStore.markMustBeTokenized(c-1),l=u.endState}}}function jY(r,e){if(r.isTooLargeForTokenization())return[null,null];const t=Yt.get(e.getLanguageId());if(!t)return[null,null];let n;try{n=t.getInitialState()}catch(i){return We(i),[null,null]}return[t,n]}function lp(r,e,t,n,i,s){let o=null;if(t)try{o=t.tokenizeEncoded(n,i,s.clone())}catch(a){We(a)}return o||(o=Ky(r.encodeLanguageId(e),s)),Zn.convertToEndOffset(o.tokens,n.length),o}const Ya=new Uint32Array(0).buffer;class qo{static deleteBeginning(e,t){return e===null||e===Ya?e:qo.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Ya)return e;const n=cl(e),i=n[n.length-2];return qo.delete(e,t,i)}static delete(e,t,n){if(e===null||e===Ya||t===n)return e;const i=cl(e),s=i.length>>>1;if(t===0&&i[i.length-2]===n)return Ya;const o=Zn.findIndexInTokensArray(i,t),a=o>0?i[o-1<<1]:0,l=i[o<<1];if(n<l){const f=n-t;for(let g=o;g<s;g++)i[g<<1]-=f;return e}let c,d;a!==t?(i[o<<1]=t,c=o+1<<1,d=t):(c=o<<1,d=a);const u=n-t;for(let f=o+1;f<s;f++){const g=i[f<<1]-u;g>d&&(i[c++]=g,i[c++]=i[(f<<1)+1],d=g)}if(c===i.length)return e;const h=new Uint32Array(c);return h.set(i.subarray(0,c),0),h.buffer}static append(e,t){if(t===Ya)return e;if(e===Ya)return t;if(e===null)return e;if(t===null)return null;const n=cl(e),i=cl(t),s=i.length>>>1,o=new Uint32Array(n.length+i.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<s;c++)o[a++]=i[c<<1]+l,o[a++]=i[(c<<1)+1];return o.buffer}static insert(e,t,n){if(e===null||e===Ya)return e;const i=cl(e),s=i.length>>>1;let o=Zn.findIndexInTokensArray(i,t);o>0&&i[o-1<<1]===t&&o--;for(let a=o;a<s;a++)i[a<<1]+=n;return e}}function cl(r){return r instanceof Uint32Array?r:new Uint32Array(r)}class AC{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Ya)return new Zn(cl(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=a2(this._languageIdCodec.encodeLanguageId(e)),new Zn(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?cl(n):null;if(t===0){let s=!1;if(i&&i.length>1&&(s=ci.getLanguageId(i[1])!==e),!s)return Ya}if(!i||i.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=a2(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=My(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const o=AC._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!AC._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=cl(e),i=cl(t);if(n.length!==i.length)return!1;for(let s=0,o=n.length;s<o;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new B(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=qo.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=qo.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=qo.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=qo.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=qo.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=qo.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=qo.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}}function a2(r){return(r<<0|0<<8|0<<11|1<<15|2<<24|1024)>>>0}class eI{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;n=e.plusRange(s).plusRange(o)}let i=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[l,c]=a.split(n);if(l.isEmpty()){i=i||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,o++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=My(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const i=eI._findFirstPieceWithLine(n,e),s=n[i].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,g)=>{f!==u&&(u=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=s.getStartCharacter(f),_=s.getEndCharacter(f),b=s.getMetadata(f),v=((b&1?2048:0)|(b&2?4096:0)|(b&4?8192:0)|(b&8?16384:0)|(b&16?16744448:0)|(b&32?4278190080:0))>>>0,C=~v>>>0;for(;l<o&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<_;)h(t.getEndOffset(l),t.getMetadata(l)&C|b&v),l++;if(l<o)h(_,t.getMetadata(l)&C|b&v),t.getEndOffset(l)===_&&l++;else{const y=Math.min(Math.max(0,l-1),o-1);h(_,t.getMetadata(y)&C|b&v)}}for(;l<o;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Zn(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)i=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,i,s){for(const o of this._pieces)o.acceptEdit(e,t,n,i,s)}}class IC extends l3{constructor(e,t,n,i,s){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this.bracketPairsTextModelPart=i,this._languageId=s,this._onDidChangeLanguage=this._register(new R),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new R),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new R),this.onDidChangeTokens=this._onDidChangeTokens.event,this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new R),this._tokens=new AC(this._languageService.languageIdCodec),this._semanticTokens=new eI(this._languageService.languageIdCodec),this._tokenization=new UY(n,this,this._languageService.languageIdCodec),this._languageRegistryListener=this._languageConfigurationService.onDidChange(o=>{o.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})}acceptEdit(e,t,n,i,s){this._tokens.acceptEdit(e,n,i),this._semanticTokens.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}handleDidChangeAttached(){this._tokenization.handleDidChangeAttached()}flush(){this._tokens.flush(),this._semanticTokens.flush()}handleDidChangeContent(e){this._tokenization.handleDidChangeContent(e)}dispose(){this._languageRegistryListener.dispose(),this._tokenization.dispose(),super.dispose()}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this.bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}setTokens(e,t=!1){if(e.length!==0){const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];let a=0,l=0,c=!1;for(let d=o.startLineNumber;d<=o.endLineNumber;d++)c?(this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),o.getLineTokens(d),!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),o.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._textModel.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this.bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._semanticTokens.addSparseTokens(e,n)}getTokenTypeIfInsertingCharacter(e,t,n){const i=this._textModel.validatePosition(new B(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){const i=this._textModel.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(i,t,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[o,a]=IC._findLanguageBoundaries(i,s),l=km(t.column,this.getLanguageConfiguration(i.getLanguageId(s)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&o===t.column-1){const[c,d]=IC._findLanguageBoundaries(i,s-1),u=km(t.column,this.getLanguageConfiguration(i.getLanguageId(s-1)).getWordDefinition(),n.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)i=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)s=e.getEndOffset(o);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new B(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}setLanguageId(e){if(this._languageId===e)return;const t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this.bracketPairsTextModelPart.handleDidChangeLanguage(t),this._tokenization.handleDidChangeLanguage(t),this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}}const x1=tt("undoRedoService");class A3{constructor(e,t){this.resource=e,this.elements=t}}class Zf{constructor(){this.id=Zf._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Zf._ID=0;Zf.None=new Zf;class ia{constructor(){this.id=ia._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}ia._ID=0;ia.None=new ia;var $Y=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},RS=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function zY(r){const e=new E3;return e.acceptChunk(r),e.finish()}function KY(r){const e=new E3;let t;for(;typeof(t=r.read())=="string";)e.acceptChunk(t);return e.finish()}function l2(r,e){let t;return typeof r=="string"?t=zY(r):VH(r)?t=KY(r):t=r,t.create(e)}let gv=0;const GY=999,qY=1e4;class ZY{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}const cp=()=>{throw new Error("Invalid change accessor")};let Rl=class Pp extends j{constructor(e,t,n,i=null,s,o,a){super(),this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new R),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new JY(h=>this.handleBeforeFireDecorationsChangedEvent(h))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new R),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new R),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new R),this._eventEmitter=this._register(new eX),this._deltaDecorationCallCnt=0,gv++,this.id="$model"+gv,this.isForSimpleWidget=n.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=Se.parse("inmemory://model/"+gv):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=l2(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=Pp.resolveOptions(this._buffer,n),this._bracketPairs=this._register(new aY(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Rq(this,this._languageConfigurationService)),this._decorationProvider=this._register(new cY(this)),this._tokenizationTextModelPart=new IC(this._languageService,this._languageConfigurationService,this,this._bracketPairs,t);const d=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new x(1,1,d,this._buffer.getLineLength(d)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=u>Pp.LARGE_FILE_SIZE_THRESHOLD||d>Pp.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>Pp.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=y4(gv),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new c2,this._commandManager=new YA(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=JR(e,t.tabSize,t.insertSpaces);return new d0({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new d0({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return yo(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new wf([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=j.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Xd(e,t)))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=l2(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokenizationTextModelPart.flush(),this._decorations=Object.create(null),this._decorationsTree=new c2,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Cf([new uZ],this._versionId,!1,!1),this._createContentChanged2(new x(1,1,s,o),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Cf([new gZ],this._versionId,!1,!1),this._createContentChanged2(new x(1,1,s,o),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,Vc(s)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const s=this._buffer.getLineLength(i);s>=qY?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new d0({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=JR(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),vC(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(v4.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new ZY(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(s);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return n===s&&i===o&&a===c&&l===d&&e instanceof x&&!(e instanceof ue)?e:new x(s,o,c,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(Vn(o))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(i<1)return new B(1,1);if(i>o)return new B(o,this.getLineMaxColumn(o));if(s<=1)return new B(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new B(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,s-2);if(Vn(l))return new B(i,s-1)}return new B(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof B&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,c=Vn(a),d=Vn(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof x&&!(e instanceof ue)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,o=n.column,a=i.lineNumber,l=i.column;{const c=o>1?this._buffer.getLineCharCode(s,o-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=Vn(c),h=Vn(d);return!u&&!h?new x(s,o,a,l):s===a&&o===l?new x(s,o-1,a,l-1):u&&h?new x(s,o-1,a,l+1):u?new x(s,o-1,a,l):new x(s,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new x(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,o,a=GY){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>x.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>x.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!n&&e.indexOf(`
`)<0){const h=new Cd(e,n,i,s).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,o,a)}else d=u=>Gb.findMatches(this,new Cd(e,n,i,s),u,o,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,n,i,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new Cd(e,n,i,s).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new x(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,o,1);return Gb.findNextMatch(this,new Cd(e,n,i,s),a,o),h.length>0||(u=new x(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,o,1),h.length>0)?h[0]:null}return Gb.findNextMatch(this,new Cd(e,n,i,s),a,o)}findPreviousMatch(e,t,n,i,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return Gb.findPreviousMatch(this,new Cd(e,n,i,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Zw?e:new Zw(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const i=t.map(o=>({range:this.validateRange(o.range),text:o.text}));let s=!0;if(e)for(let o=0,a=e.length;o<a;o++){const l=e[o];let c=!1;for(let d=0,u=i.length;d<u;d++){const h=i[d].range,f=h.startLineNumber>l.endLineNumber,g=l.startLineNumber>h.endLineNumber;if(!f&&!g){c=!0;break}}if(!c){s=!1;break}}if(s)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){const l=this._trimAutoWhitespaceLines[o],c=this.getLineMaxColumn(l);let d=!0;for(let u=0,h=i.length;u<h;u++){const f=i[u].range,g=i[u].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===c&&f.isEmpty()&&g&&g.length>0&&g.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&g&&g.length>0&&g.charAt(g.length-1)===`
`)){d=!1;break}}if(d){const u=new x(l,1,l,c);t.push(new Zw(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new x(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new x(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,d=o.length;c<d;c++){const u=o[c],[h,f,g]=vu(u.text);this._tokenizationTextModelPart.acceptEdit(u.range,u.text,h,f,g),this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,d=o.length;c<d;c++){const u=o[c],[h]=vu(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,_=g-f,b=h,v=Math.min(_,b),C=b-_,y=s-l-C+f,w=y,L=y+b,T=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new B(w,1)),this.getOffsetAt(new B(L,this.getLineMaxColumn(L))),0),S=Do.fromDecorations(T),k=new Lm(S);for(let D=v;D>=0;D--){const O=f+D,F=y+D;k.takeFromEndWhile(K=>K.lineNumber>F);const U=k.takeFromEndWhile(K=>K.lineNumber===F);a.push(new $R(O,this.getLineContent(F),U))}if(v<_){const D=f+v;a.push(new hZ(D+1,g))}if(v<b){const D=new Lm(S),O=f+v,F=b-v,U=s-l-F+O+1,K=[],ae=[];for(let fe=0;fe<F;fe++){const we=U+fe;ae[fe]=this.getLineContent(we),D.takeWhile(xe=>xe.lineNumber<we),K[fe]=D.takeWhile(xe=>xe.lineNumber===we)}a.push(new fZ(O+1,f+b,ae,K))}l+=C}this._emitContentChangedEvent(new Cf(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(i=>new $R(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeInjectedText.fire(new d3(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,u2(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)};let i=null;try{i=t(n)}catch(s){We(s)}return n.addDecoration=cp,n.changeDecoration=cp,n.changeDecorationOptions=cp,n.removeDecoration=cp,n.deltaDecorations=cp,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),We(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:d2[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,a,s),i.setOptions(d2[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){const s=this.getLineCount(),o=Math.min(s,Math.max(1,e)),a=Math.min(s,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new x(o,1,a,l),d=this._getDecorationsInRange(c,n,i);return lM(d,this._decorationProvider.getDecorationsInRange(c,n,i)),d}getDecorationsInRange(e,t=0,n=!1){const i=this.validateRange(e),s=this._getDecorationsInRange(i,t,n);return lM(s,this._decorationProvider.getDecorationsInRange(i,t,n)),s}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return Do.fromDecorations(i).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,s,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,o,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let o=0;const a=n.length;let l=0;const c=new Array(a);for(;o<s||l<a;){let d=null;if(o<s){do d=this._decorations[t[o++]];while(!d&&o<s);if(d){if(d.options.after){const u=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(d.options.before){const u=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const b=++this._lastDecorationId,v=`${this._instanceId};${b}`;d=new k3(v,0,0),this._decorations[v]=d}const u=n[l],h=this._validateRangeRelaxedNoAllocations(u.range),f=u2(u.options),g=this._buffer.getOffsetAt(h.startLineNumber,h.startColumn),_=this._buffer.getOffsetAt(h.endLineNumber,h.endColumn);d.ownerId=e,d.reset(i,g,_,h),d.setOptions(f),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}getLanguageId(){return this.tokenization.getLanguageId()}setMode(e){this.tokenization.setLanguageId(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return YY(this.getLineContent(e))+1}};Rl.MODEL_SYNC_LIMIT=50*1024*1024;Rl.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Rl.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Rl.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:yi.tabSize,indentSize:yi.indentSize,insertSpaces:yi.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:yi.trimAutoWhitespace,largeFileOptimizations:yi.largeFileOptimizations,bracketPairColorizationOptions:yi.bracketPairColorizationOptions};Rl=$Y([RS(4,x1),RS(5,Qt),RS(6,_n)],Rl);function YY(r){let e=0;for(const t of r)if(t===" "||t==="	")e++;else break;return e}function OS(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function PS(r){return!!r.options.after||!!r.options.before}class c2{constructor(){this._decorationsTree0=new AS,this._decorationsTree1=new AS,this._injectedTextDecorationsTree=new AS}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,s){const o=e.getVersionId(),a=this._intervalSearch(t,n,i,s,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,s){const o=this._decorationsTree0.intervalSearch(e,t,n,i,s),a=this._decorationsTree1.intervalSearch(e,t,n,i,s),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,s);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,i).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,i){const s=e.getVersionId(),o=this._search(t,n,i,s);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const s=this._decorationsTree0.search(e,t,i),o=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return s.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){PS(e)?this._injectedTextDecorationsTree.insert(e):OS(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){PS(e)?this._injectedTextDecorationsTree.delete(e):OS(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){PS(e)?this._injectedTextDecorationsTree.resolveNode(e,t):OS(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}function Wa(r){return r.replace(/[^a-z0-9\-_]/gi," ")}class I3{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class XY extends I3{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:yr.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class QY extends I3{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?W.fromHex(e):t.getColor(e.id)}}class Cu{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof Cu?e:new Cu(e)}}class Be{constructor(e){var t,n;this.description=e.description,this.blockClassName=e.blockClassName?Wa(e.blockClassName):null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Wa(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new XY(e.overviewRuler):null,this.minimap=e.minimap?new QY(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?Wa(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Wa(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Wa(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Wa(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Wa(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Wa(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Wa(e.afterContentClassName):null,this.after=e.after?Cu.from(e.after):null,this.before=e.before?Cu.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1,this.hideInStringTokens=(n=e.hideInStringTokens)!==null&&n!==void 0?n:!1}static register(e){return new Be(e)}static createDynamic(e){return new Be(e)}}Be.EMPTY=Be.register({description:"empty"});const d2=[Be.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Be.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Be.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Be.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function u2(r){return r instanceof Be?r:Be.createDynamic(r)}class JY extends j{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new R),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class eX extends j{constructor(){super(),this._fastEmitter=this._register(new R),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new R),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var tX=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const h2={getInitialState:()=>Bf,tokenizeEncoded:(r,e,t)=>Ky(0,t)};function nX(r,e,t){return tX(this,void 0,void 0,function*(){if(!t)return f2(e,r.languageIdCodec,h2);const n=yield Yt.getOrCreate(t);return f2(e,r.languageIdCodec,n||h2)})}function iX(r,e,t,n,i,s,o){let a="<div>",l=n,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=n)continue;let g="";for(;l<f&&l<i;l++){const _=r.charCodeAt(l);switch(_){case 9:{let b=s-(l+c)%s;for(c+=b-1;b>0;)o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),b--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(_),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>i||l>=i)break}return a+="</div>",a}function f2(r,e,t){let n='<div class="monaco-tokenized-source">';const i=va(r);let s=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o];o>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,s);Zn.convertToEndOffset(c.tokens,l.length);const u=new Zn(c.tokens,l,e).inflate();let h=0;for(let f=0,g=u.getCount();f<g;f++){const _=u.getClassName(f),b=u.getEndOffset(f);n+=`<span class="${_}">${HE(l.substring(h,b))}</span>`,h=b}s=c.endState}return n+="</div>",n}class sX{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class rX{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}class s_{constructor(e,t,n,i){this._instanceId=y4(++s_.INSTANCE_COUNT),this._pendingChanges=new sX,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const o=i+s>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?s=o:i=o+1:t<e[o].afterLineNumber?s=o:i=o+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,s,o,a)=>{t=!0,i=i|0,s=s|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new rX(l,i,s,o,a)),l},changeOneWhitespace:(i,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:i,newAfterLineNumber:s,newHeight:o})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const i=new Set;for(const l of n)i.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const o=l=>{const c=[];for(const d of l)if(!i.has(d.id)){if(s.has(d.id)){const u=s.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=s_.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const s=this._arr[i];this._removeWhitespace(i),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const o=(i-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+i+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,s=t;for(;i<s;){const o=(i+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)i=o+1;else{if(e>=a)return o;s=o}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(i)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=o+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=s,h=u;const f=5e5;let g=0;s>=f&&(g=Math.floor(s/f)*f,g=Math.floor(g/n)*n,h-=g);const _=[],b=e+(t-e)/2;let v=-1;for(let L=i;L<=o;L++){if(v===-1){const T=u,S=u+n;(T<=b&&b<S||T>b)&&(v=L)}for(u+=n,_[L-i]=h,h+=n;d===L;)h+=c,u+=c,a++,a>=l?d=o+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=L;break}}v===-1&&(v=o);const C=this.getVerticalOffsetForLineNumber(o)|0;let y=i,w=o;return y<w&&s<e&&y++,y<w&&C+n>t&&w--,{bigNumbersDelta:g,startLineNumber:i,endLineNumber:o,relativeVerticalOffset:_,centeredLineNumber:v,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:w}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=i+s)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let o=n;o<=i;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}s_.INSTANCE_COUNT=0;const oX=125;class Fp{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class aX extends j{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new R),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Fp(0,0,0,0),this._scrollable=this._register(new lb({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new UA(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class lX extends j{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(133),o=i.get(77);this._linesLayout=new s_(t,i.get(61),o.top,o.bottom),this._scrollable=this._register(new aX(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Fp(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(105)?oX:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(61)&&this._linesLayout.setLineHeight(t.get(61)),e.hasChanged(77)){const n=t.get(77);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(133)){const n=t.get(133),i=n.contentWidth,s=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new Fp(i,o.contentWidth,s,this._getContentHeight(i,s,a)))}else this._updateHeight();e.hasChanged(105)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(94);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(96)?s+=Math.max(0,t-i.get(61)-i.get(77).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new Fp(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new qM(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new qM(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(134),i=t.get(46),s=t.get(133);if(n.isViewportWrapping){const o=t.get(67);return e>s.contentWidth+i.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+s.verticalScrollbarWidth:e}else{const o=t.get(95)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+o+s.verticalScrollbarWidth,a)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Fp(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class cX{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new B(i.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new B(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);o=new x(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new Z4(o,s),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){const t=new x(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(t).inlineDecorations[0]}_getDecorationsInRange(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,$0(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber,s=[];let o=0;const a=[];for(let l=n;l<=i;l++)a[l-n]=[];for(let l=0,c=t.length;l<c;l++){const d=t[l],u=d.options;if(!tI(this.model,d))continue;const h=this._getOrCreateViewModelDecoration(d),f=h.range;if(s[o++]=h,u.inlineClassName){const g=new Xp(f,u.inlineClassName,u.inlineClassNameAffectsLetterSpacing?3:0),_=Math.max(n,f.startLineNumber),b=Math.min(i,f.endLineNumber);for(let v=_;v<=b;v++)a[v-n].push(g)}if(u.beforeContentClassName&&n<=f.startLineNumber&&f.startLineNumber<=i){const g=new Xp(new x(f.startLineNumber,f.startColumn,f.startLineNumber,f.startColumn),u.beforeContentClassName,1);a[f.startLineNumber-n].push(g)}if(u.afterContentClassName&&n<=f.endLineNumber&&f.endLineNumber<=i){const g=new Xp(new x(f.endLineNumber,f.endColumn,f.endLineNumber,f.endColumn),u.afterContentClassName,2);a[f.endLineNumber-n].push(g)}}return{decorations:s,inlineDecorations:a}}}function tI(r,e){return!(e.options.hideInCommentTokens&&nI(r,e)||e.options.hideInStringTokens&&iI(r,e))}function nI(r,e){return N3(r,e.range,t=>t===1)}function iI(r,e){return N3(r,e.range,t=>t===2)}function N3(r,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=r.tokenization.getLineTokens(n),s=n===e.startLineNumber,o=n===e.endLineNumber;let a=s?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(o&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}function BS(r,e){return r===null?e?NC.INSTANCE:MC.INSTANCE:new dX(r,e)}class dX{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Do(0,0,c+1,this._projectionData.injectionOptions[d],0));o=Do.applyInjectedText(e.getLineContent(t),a).substring(i,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=g2(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,s,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,g=0;for(let _=0;_<l.getOutputLineCount();_++){const b=new Array;u[_]=b;const v=_>0?l.breakOffsets[_-1]:0,C=l.breakOffsets[_];for(;g<c.length;){const y=d[g].content.length,w=c[g]+f,L=w+y;if(w>C)break;if(v<L){const T=d[g];if(T.inlineClassName){const S=_>0?l.wrappedTextIndentLength:0,k=S+Math.max(w-v,0),D=S+Math.min(L-v,C);k!==D&&b.push(new Bj(k,D,T.inlineClassName,T.inlineClassNameAffectsLetterSpacing))}}if(L<=C)f+=y,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:Zn.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=n;f<n+i;f++){const g=s+f-n;if(!o[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,s=n>0?i.wrappedTextIndentLength:0,o=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(o,a,s);let c=l.getLineContent();n>0&&(c=g2(i.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(n)+1,u=c.length+1,h=n+1<this.getViewLineCount(),f=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new hA(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class NC{constructor(){}isVisible(){return!0}setVisible(e){return e?this:MC.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),s=i.getLineContent();return new hA(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new B(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}NC.INSTANCE=new NC;class MC{constructor(){}isVisible(){return!1}setVisible(e){return e?NC.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}MC.INSTANCE=new MC;const WS=[""];function g2(r){if(r>=WS.length)for(let e=1;e<=r;e++)WS[e]=uX(e);return WS[r]}function uX(r){return new Array(r+1).join(" ")}class hX{constructor(e,t,n,i,s,o,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new gX(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=n.length,o=this.createLineBreaksComputer(),a=new Lm(Do.fromDecorations(i));for(let _=0;_<s;_++){const b=a.takeWhile(v=>v.lineNumber===_+1);o.addRequest(n[_],b,t?t[_]:null)}const l=o.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(_=>this.model.getDecorationRange(_)).sort(x.compareRangesUsingStarts);let u=1,h=0,f=-1,g=f+1<d.length?h+1:s+2;for(let _=0;_<s;_++){const b=_+1;b===g&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,g=f+1<d.length?h+1:s+2);const v=b>=u&&b<=h,C=BS(l[_],!v);c[_]=C.getViewLineCount(),this.modelLineProjections[_]=C}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new tj(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),n=fX(t),i=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(x.compareRangesUsingStarts);if(n.length===i.length){let h=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(i[f])){h=!0;break}if(!h)return!1}const s=n.map(h=>({range:h,options:Be.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const o=n;let a=1,l=0,c=-1,d=c+1<o.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,d=c+1<o.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const _=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,_)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i){const s=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i;if(s&&o&&a&&l)return!1;const c=s&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;let d=null;if(c){d=[];for(let u=0,h=this.modelLineProjections.length;u<h;u++)d[u]=this.modelLineProjections[u].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new RL(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=i.length;d<u;d++){const h=BS(i[d],!s);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new OL(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,s=this.modelLineProjections[i].getViewLineCount(),o=this.modelLineProjections[i].isVisible(),a=BS(n,o);this.modelLineProjections[i]=a;const l=this.modelLineProjections[i].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,g=0,_=-1;s>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,g=u+1,_=g+(s-l)-1,c=!0):s<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+s-1,h=u+1,f=h+(l-s)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(i,l);const b=d<=u?new u3(d,u-d+1):null,v=h<=f?new OL(h,f):null,C=g<=_?new RL(g,_):null;return[c,b,v,C]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,s.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new p2(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new B(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new B(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,u=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new p2(l,h))}if(!c.isVisible()&&o){const d=new B(l-1,this.model.getLineMaxColumn(l-1)+1),u=x.fromPositions(o,d);s.push(new m2(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new B(l,1))}if(o){const l=x.fromPositions(o,this.getModelEndPositionOfViewLine(i));s.push(new m2(l,a))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,i);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const v=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(v.lineNumber===d.modelLineWrappedLineIdx)g=v.column;else if(v.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(v.lineNumber>d.modelLineWrappedLineIdx)return}const _=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),b=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return b.lineNumber===d.modelLineWrappedLineIdx?new Ud(f.visibleColumn,g,f.className,new em(f.horizontalLine.top,_.column),-1,-1):b.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Ud(f.visibleColumn,g,f.className,new em(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});o.push(h.filter(f=>!!f))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const o=[],a=[],l=n.lineNumber-1,c=i.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const _=this.modelLineProjections[g];if(_.isVisible()){const b=_.getViewLineNumberOfModelPosition(0,g===l?n.column:1),v=_.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),C=v-b+1;let y=0;C>1&&_.getViewLineMinColumn(this.model,g+1,v)===1&&(y=b===0?1:2),o.push(C),a.push(y),d===null&&(d=new B(g+1,0))}else d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,i.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let g=0,_=s.length;g<_;g++){let b=s[g];const v=Math.min(u-f,o[g]),C=a[g];let y;C===2?y=0:C===1?y=1:y=v;for(let w=0;w<v;w++)w===y&&(b=0),h[f++]=b}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const o=i.index,a=i.remainder,l=[];for(let c=o,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===o?a:0;let f=u.getViewLineCount()-h,g=!1;if(s+f>t&&(g=!0,f=t-s+1),u.getViewLinesData(this.model,c+1,h,f,s-e,n,l),s+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,o=i.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,o),c=a.getViewLineMaxColumn(this.model,s+1,o);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new B(s+1,d)).equals(n)?new B(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new x(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new B(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new x(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const i=this.model.validatePosition(new B(e,t)),s=i.lineNumber,o=i.column;let a=s-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new B(1,1);const c=1+this.projectedModelLineLineCounts.getPrefixSum(a);let d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),n):d=this.modelLineProjections[s-1].getViewPositionOfModelPosition(c,o,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return x.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new x(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(s.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new x(i.lineNumber,1,s.lineNumber,s.column),t,n);let o=[];const a=i.lineNumber-1,l=s.lineNumber-1;let c=null;for(let f=a;f<=l;f++)if(this.modelLineProjections[f].isVisible())c===null&&(c=new B(f+1,f===a?i.column:1));else if(c!==null){const _=this.model.getLineMaxColumn(f);o=o.concat(this.model.getDecorationsInRange(new x(c.lineNumber,c.column,f,_),t,n)),c=null}c!==null&&(o=o.concat(this.model.getDecorationsInRange(new x(c.lineNumber,c.column,s.lineNumber,s.column),t,n)),c=null),o.sort((f,g)=>{const _=x.compareRangesUsingStarts(f.range,g.range);return _===0?f.id<g.id?-1:f.id>g.id?1:0:_});const d=[];let u=0,h=null;for(const f of o){const g=f.id;h!==g&&(h=g,d[u++]=f)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function fX(r){if(r.length===0)return[];const e=r.slice();e.sort(x.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let s=1,o=e.length;s<o;s++){const a=e[s];a.startLineNumber>i+1?(t.push(new x(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new x(n,1,i,1)),t}class p2{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class m2{constructor(e,t){this.modelRange=e,this.viewLines=t}}class gX{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class pX{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new mX(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new RL(t,n)}onModelLinesInserted(e,t,n,i){return new OL(t,n)}onModelLineChanged(e,t,n){return[!1,new u3(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new hA(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const s=[];for(let o=e;o<=t;o++){const a=o-e;s[a]=n[a]?this.getViewLineData(o):null}return s}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class mX{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class _X extends j{constructor(e,t,n,i,s,o,a,l){if(super(),this.languageConfigurationService=a,this._themeService=l,this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new LZ,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new hh(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new Tt(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new Tt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=sI.create(this.model),this.model.isTooLargeForTokenization())this._lines=new pX(this.model);else{const c=this._configuration.options,d=c.get(46),u=c.get(127),h=c.get(134),f=c.get(126);this._lines=new hX(this._editorId,this.model,i,s,d,this.model.getOptions().tabSize,u,h.wrappingColumn,f)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new qf(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new lX(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(c=>{c.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),c.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new yZ(c)),this._eventDispatcher.emitOutgoingEvent(new $A(c.oldScrollWidth,c.oldScrollLeft,c.oldScrollHeight,c.oldScrollTop,c.scrollWidth,c.scrollLeft,c.scrollHeight,c.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(c=>{this._eventDispatcher.emitOutgoingEvent(c)})),this._decorations=new cX(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(c=>{try{const d=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(d,c)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(db.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new xZ)})),this._register(this._themeService.onDidColorThemeChange(c=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new wZ(c))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new x(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const i of n)this.model.tokenization.tokenizeViewport(i.startLineNumber,i.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new vZ(e)),this._eventDispatcher.emitOutgoingEvent(new jA(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new pZ)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new mZ)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStart.isValid){const d=new B(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber));n=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let i=!1;const s=this._configuration.options,o=s.get(46),a=s.get(127),l=s.get(134),c=s.get(126);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,c)&&(e.emitViewEvent(new lv),e.emitViewEvent(new cv),e.emitViewEvent(new fh(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(i=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(83)&&(this._decorations.reset(),e.emitViewEvent(new fh(null))),e.emitViewEvent(new _Z(t)),this.viewLayout.onConfigurationChanged(t),i&&n){const d=this.coordinatesConverter.convertModelPositionToViewPosition(n),u=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:u+this._viewportStart.startLineDelta},1)}hh.shouldRecreate(t)&&(this.cursorConfig=new hh(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let i=!1,s=!1;const o=e instanceof Xd?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Xd?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of o)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let g=u.injectedTexts[h];g&&(g=g.filter(_=>!_.ownerId||_.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new Lm(c);for(const u of o)switch(u.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new lv),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(n.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),i=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),i=!0;break}case 2:{const h=d.dequeue(),[f,g,_,b]=this._lines.onModelLineChanged(a,u.lineNumber,h);s=f,g&&n.emitViewEvent(g),_&&(n.emitViewEvent(_),this.viewLayout.onLinesInserted(_.fromLineNumber,_.toLineNumber)),b&&(n.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!i&&s&&(n.emitViewEvent(new cv),n.emitViewEvent(new fh(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const i=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof Xd&&n.emitOutgoingEvent(new RZ(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const s=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new B(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new B(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new SZ(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitOutgoingEvent(new PZ(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new CZ),this.cursorConfig=new hh(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new MZ(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new hh(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new NZ(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new lv),t.emitViewEvent(new cv),t.emitViewEvent(new fh(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new hh(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new OZ(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new fh(e)),this._eventDispatcher.emitOutgoingEvent(new IZ(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new lv),n.emitViewEvent(new cv),n.emitViewEvent(new fh(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new EZ)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(133),t=this._configuration.options.get(61),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new x(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const i=[];let s=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=n.length;d<u;d++){const h=n[d].startLineNumber,f=n[d].endLineNumber;f<o||h>l||(o<h&&(i[s++]=new x(o,a,h-1,this.model.getLineMaxColumn(h-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(i[s++]=new x(o,a,l,c)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new x(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new x(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new B(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Zi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=ga(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,i)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Xs(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,i,o.tokens,t,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new Fj(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,$0(this._configuration.options)),n=new bX;for(const i of t){const s=i.options,o=s.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,s.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor();const i=t.options.minimap;i&&i.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(x.compareRangesUsingStarts);let s=!1,o=!1;for(const l of e)l.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+i);return c}if(s&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,n?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===br||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const d=i.startLineNumber;i=new x(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const s=this._configuration.options.get(46),o=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Ts.fontFamily;let c;return l?c=Ts.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Ts.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=s;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===n?i-1:0,f=c===s?o-1:u.length;u===""?l+="<br>":l+=iX(u,d.inflate(),t,h,f,a,hi)}return l}_getColorMap(){const e=Yt.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=W.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new AZ);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,i,s))}paste(e,t,n,i){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new x(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new p0(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new x(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new p0(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,i,s){this._withViewEventsCollector(o=>o.emitViewEvent(new p0(e,!1,n,null,i,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new kZ),this._eventDispatcher.emitOutgoingEvent(new DZ))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class sI{constructor(e,t,n,i,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=s}static create(e){const t=e._setTrackedRange(null,new x(1,1,1,1),1);return new sI(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new B(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new x(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=o-s}invalidate(){this._isValid=!1}}class bX{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=n){i>c&&(a[a.length-1]=i);return}a.push(s,n,i)}else{const a=new Y4(e,t,[s,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}class k1{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}var r_;(function(r){r[r.Ignore=0]="Ignore",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(r_||(r_={}));(function(r){const e="error",t="warning",n="warn",i="info",s="ignore";function o(l){return l?Vh(e,l)?r.Error:Vh(t,l)||Vh(n,l)?r.Warning:Vh(i,l)?r.Info:r.Ignore:r.Ignore}r.fromValue=o;function a(l){switch(l){case r.Error:return e;case r.Warning:return t;case r.Info:return i;default:return s}}r.toString=a})(r_||(r_={}));const Zt=r_;var M3=Zt;const xn=tt("notificationService");class vX{}class cm{constructor(e,t,n,i,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&i>this.injectionOffsets[s];s++)i<this.injectionOffsets[s]+this.injectionOptions[s].content.length?i=this.injectionOffsets[s]:i-=this.injectionOptions[s].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,s=0,o=0;for(;n<=i;){s=n+(i-n)/2|0;const l=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=o)i=s-1;else if(e>l)n=s+1;else break;else if(e<o)i=s-1;else if(e>=l)n=s+1;else break}let a=e-o;return s>0&&(a+=this.wrappedTextIndentLength),new pv(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new pv(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new pv(e+1,this.getMinOutputOffset(e+1))}return new pv(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&_2(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(b2(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let s=n.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[n.injectedTextIndex]&&!(_2(this.injectionOptions[s].cursorStops)||(i-=this.injectionOptions[s].content.length,b2(this.injectionOptions[s].cursorStops)));)s--;return i}}else if(t===1||t===4){let i=n.offsetInInputWithInjections+n.length,s=n.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)i+=this.injectionOptions[s+1].content.length,s++;return i}else if(t===0||t===3){let i=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)i-=this.injectionOptions[s-1].content.length,s--;return i}Ry()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let s=0;s<t.length;s++){const o=n[s].content.length,a=t[s]+i,l=t[s]+i+o;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:o};i+=o}}}}function _2(r){return r==null?!0:r===fo.Right||r===fo.Both}function b2(r){return r==null?!0:r===fo.Left||r===fo.Both}class pv{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new B(e+this.outputLineIndex,this.outputOffset+1)}}class rI{constructor(e,t){this.classifier=new CX(e,t)}static create(e){return new rI(e.get(122),e.get(121))}createLineBreaksComputer(e,t,n,i){const s=[],o=[],a=[];return{addRequest:(l,c,d)=>{s.push(l),o.push(c),a.push(d)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let d=0,u=s.length;d<u;d++){const h=o[d],f=a[d];f&&!f.injectionOptions&&!h?c[d]=yX(this.classifier,f,s[d],t,n,l,i):c[d]=wX(this.classifier,s[d],h,t,n,l,i)}return jL.length=0,$L.length=0,c}}}}class CX extends Lg{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let jL=[],$L=[];function yX(r,e,t,n,i,s,o){if(i===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,d=R3(t,n,i,s,o),u=i-d,h=jL,f=$L;let g=0,_=0,b=0,v=i;const C=l.length;let y=0;if(y>=0){let w=Math.abs(c[y]-v);for(;y+1<C;){const L=Math.abs(c[y+1]-v);if(L>=w)break;w=L,y++}}for(;y<C;){let w=y<0?0:l[y],L=y<0?0:c[y];_>w&&(w=_,L=b);let T=0,S=0,k=0,D=0;if(L<=v){let F=L,U=w===0?0:t.charCodeAt(w-1),K=w===0?0:r.get(U),ae=!0;for(let fe=w;fe<a;fe++){const we=fe,xe=t.charCodeAt(fe);let De,Oe;if(Vn(xe)?(fe++,De=0,Oe=2):(De=r.get(xe),Oe=dm(xe,F,n,s)),we>_&&zL(U,K,xe,De)&&(T=we,S=F),F+=Oe,F>v){we>_?(k=we,D=F-Oe):(k=fe+1,D=F),F-S>u&&(T=0),ae=!1;break}U=xe,K=De}if(ae){g>0&&(h[g]=l[l.length-1],f[g]=c[l.length-1],g++);break}}if(T===0){let F=L,U=t.charCodeAt(w),K=r.get(U),ae=!1;for(let fe=w-1;fe>=_;fe--){const we=fe+1,xe=t.charCodeAt(fe);if(xe===9){ae=!0;break}let De,Oe;if(cu(xe)?(fe--,De=0,Oe=2):(De=r.get(xe),Oe=Nc(xe)?s:1),F<=v){if(k===0&&(k=we,D=F),F<=v-u)break;if(zL(xe,De,U,K)){T=we,S=F;break}}F-=Oe,U=xe,K=De}if(T!==0){const fe=u-(D-S);if(fe<=n){const we=t.charCodeAt(k);let xe;Vn(we)?xe=2:xe=dm(we,D,n,s),fe-xe<0&&(T=0)}}if(ae){y--;continue}}if(T===0&&(T=k,S=D),T<=_){const F=t.charCodeAt(_);Vn(F)?(T=_+2,S=b+2):(T=_+1,S=b+dm(F,b,n,s))}for(_=T,h[g]=T,b=S,f[g]=S,g++,v=S+u;y<0||y<C&&c[y]<S;)y++;let O=Math.abs(c[y]-v);for(;y+1<C;){const F=Math.abs(c[y+1]-v);if(F>=O)break;O=F,y++}}return g===0?null:(h.length=g,f.length=g,jL=e.breakOffsets,$L=e.breakOffsetsVisibleColumn,e.breakOffsets=h,e.breakOffsetsVisibleColumn=f,e.wrappedTextIndentLength=d,e)}function wX(r,e,t,n,i,s,o){const a=Do.applyInjectedText(e,t);let l,c;if(t&&t.length>0?(l=t.map(S=>S.options),c=t.map(S=>S.column-1)):(l=null,c=null),i===-1)return l?new cm(c,l,[a.length],[],0):null;const d=a.length;if(d<=1)return l?new cm(c,l,[a.length],[],0):null;const u=R3(a,n,i,s,o),h=i-u,f=[],g=[];let _=0,b=0,v=0,C=i,y=a.charCodeAt(0),w=r.get(y),L=dm(y,0,n,s),T=1;Vn(y)&&(L+=1,y=a.charCodeAt(1),w=r.get(y),T++);for(let S=T;S<d;S++){const k=S,D=a.charCodeAt(S);let O,F;Vn(D)?(S++,O=0,F=2):(O=r.get(D),F=dm(D,L,n,s)),zL(y,w,D,O)&&(b=k,v=L),L+=F,L>C&&((b===0||L-v>h)&&(b=k,v=L-F),f[_]=b,g[_]=v,_++,C=v+h,b=0),y=D,w=O}return _===0&&(!t||t.length===0)?null:(f[_]=d,g[_]=L,new cm(c,l,f,g,u))}function dm(r,e,t,n){return r===9?t-e%t:Nc(r)||r<32?n:1}function v2(r,e){return e-r%e}function zL(r,e,t,n){return t!==32&&(e===2&&n!==2||e!==1&&n===1||e===3&&n!==2||n===3&&e!==1)}function R3(r,e,t,n,i){let s=0;if(i!==0){const o=Zi(r);if(o!==-1){for(let l=0;l<o;l++){const c=r.charCodeAt(l)===9?v2(s,e):1;s+=c}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const c=v2(s,e);s+=c}s+n>t&&(s=0)}}return s}var VS;const HS=(VS=window.trustedTypes)===null||VS===void 0?void 0:VS.createPolicy("domLineBreaksComputer",{createHTML:r=>r});class oI{static create(){return new oI}constructor(){}createLineBreaksComputer(e,t,n,i){const s=[],o=[];return{addRequest:(a,l,c)=>{s.push(a),o.push(l)},finalize:()=>SX(s,e,t,n,i,o)}}}function SX(r,e,t,n,i,s){var o;function a(k){const D=s[k];if(D){const O=Do.applyInjectedText(r[k],D),F=D.map(K=>K.options),U=D.map(K=>K.column-1);return new cm(U,F,[O.length],[],0)}else return null}if(n===-1){const k=[];for(let D=0,O=r.length;D<O;D++)k[D]=a(D);return k}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),d=Math.round(t*(i===3?2:i===2?1:0)),u=Math.ceil(e.spaceWidth*d),h=document.createElement("div");xi(h,e);const f=Mc(1e4),g=[],_=[],b=[],v=[],C=[];for(let k=0;k<r.length;k++){const D=Do.applyInjectedText(r[k],s[k]);let O=0,F=0,U=l;if(i!==0)if(O=Zi(D),O===-1)O=0;else{for(let we=0;we<O;we++){const xe=D.charCodeAt(we)===9?t-F%t:1;F+=xe}const fe=Math.ceil(e.spaceWidth*F);fe+e.typicalFullwidthCharacterWidth>l?(O=0,F=0):U=l-fe}const K=D.substr(O),ae=xX(K,F,t,U,f,u);g[k]=O,_[k]=F,b[k]=K,v[k]=ae[0],C[k]=ae[1]}const y=f.build(),w=(o=HS?.createHTML(y))!==null&&o!==void 0?o:y;h.innerHTML=w,h.style.position="absolute",h.style.top="10000",h.style.wordWrap="break-word",document.body.appendChild(h);const L=document.createRange(),T=Array.prototype.slice.call(h.children,0),S=[];for(let k=0;k<r.length;k++){const D=T[k],O=kX(L,D,b[k],v[k]);if(O===null){S[k]=a(k);continue}const F=g[k],U=_[k]+d,K=C[k],ae=[];for(let De=0,Oe=O.length;De<Oe;De++)ae[De]=K[O[De]];if(F!==0)for(let De=0,Oe=O.length;De<Oe;De++)O[De]+=F;let fe,we;const xe=s[k];xe?(fe=xe.map(De=>De.options),we=xe.map(De=>De.column-1)):(fe=null,we=null),S[k]=new cm(we,fe,O,ae,U)}return document.body.removeChild(h),S}function xX(r,e,t,n,i,s){if(s!==0){const h=String(s);i.appendASCIIString('<div style="text-indent: -'),i.appendASCIIString(h),i.appendASCIIString("px; padding-left: "),i.appendASCIIString(h),i.appendASCIIString("px; box-sizing: border-box; width:")}else i.appendASCIIString('<div style="width:');i.appendASCIIString(String(n)),i.appendASCIIString('px;">');const o=r.length;let a=e,l=0;const c=[],d=[];let u=0<o?r.charCodeAt(0):0;i.appendASCIIString("<span>");for(let h=0;h<o;h++){h!==0&&h%16384===0&&i.appendASCIIString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<o?r.charCodeAt(h+1):0;let g=1,_=1;switch(f){case 9:g=t-a%t,_=g;for(let b=1;b<=g;b++)b<g?i.write1(160):i.appendASCII(32);break;case 32:u===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString("&lt;");break;case 62:i.appendASCIIString("&gt;");break;case 38:i.appendASCIIString("&amp;");break;case 0:i.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:Nc(f)&&_++,f<32?i.write1(9216+f):i.write1(f)}l+=g,a+=_}return i.appendASCIIString("</span>"),c[r.length]=l,d[r.length]=a,i.appendASCIIString("</div>"),[c,d]}function kX(r,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),s=[];try{KL(r,i,n,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function KL(r,e,t,n,i,s,o,a){if(n===s||(i=i||US(r,e,t[n],t[n+1]),o=o||US(r,e,t[s],t[s+1]),Math.abs(i[0].top-o[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,c=US(r,e,t[l],t[l+1]);KL(r,e,t,n,i,l,c,a),KL(r,e,t,l,c,s,o,a)}function US(r,e,t,n){return r.setStart(e[t/16384|0].firstChild,t%16384),r.setEnd(e[n/16384|0].firstChild,n%16384),r.getClientRects()}var LX=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Va=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},TX=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let DX=0,EX=class{constructor(e,t,n,i,s){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s}dispose(){ut(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},Yf=class Rh extends j{constructor(e,t,n,i,s,o,a,l,c,d,u,h){super(),this.languageConfigurationService=u,this._deliveryQueue=new i4,this._onDidDispose=this._register(new R),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new C2({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new C2({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onWillType=this._onWillType.event,this._onDidType=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new R({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection();const f=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++DX,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,f,d)),this._register(this._configuration.onDidChange(b=>{this._onDidChangeConfiguration.fire(b);const v=this._configuration.options;if(b.hasChanged(133)){const C=v.get(133);this._onDidLayoutChange.fire(C)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=o,this._themeService=l,this._register(new AX(this,this._contextKeyService)),this._register(new IX(this,this._contextKeyService,h)),this._instantiationService=i.createChild(new k1([Re,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new NX(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let g;Array.isArray(n.contributions)?g=n.contributions:g=qd.getEditorContributions();for(const b of g){if(this._contributions[b.id]){We(new Error(`Cannot have two contributions with the same id ${b.id}`));continue}try{const v=this._instantiationService.createInstance(b.ctor,this);this._contributions[b.id]=v}catch(v){We(v)}}qd.getEditorActions().forEach(b=>{if(this._actions[b.id]){We(new Error(`Cannot have two actions with the same id ${b.id}`));return}const v=new h3(b.id,b.label,b.alias,as(b.precondition),()=>this._instantiationService.invokeFunction(C=>Promise.resolve(b.runEditorCommand(C,this,null))),this._contextKeyService);this._actions[v.id]=v});const _=()=>!this._configuration.options.get(83)&&this._configuration.options.get(32).enabled;this._register(new $$(this._domElement,{onDragEnter:()=>{},onDragOver:b=>{if(!_())return;const v=this.getTargetAtClientPoint(b.clientX,b.clientY);v?.position&&this.showDropIndicatorAt(v.position)},onDrop:b=>TX(this,void 0,void 0,function*(){if(!_()||(this.removeDropIndicator(),!b.dataTransfer))return;const v=this.getTargetAtClientPoint(b.clientX,b.clientY);v?.position&&this._onDropIntoEditor.fire({position:v.position,event:b})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,t,n){return new xL(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return J_.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?dt.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(i)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,i){const s=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,i)}getTopForLineNumber(e,t=!1){return this._modelData?Rh._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Rh._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,i=!1){const s=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,i)}getBottomForLineNumber(e,t=!1){return this._modelData?Rh._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e){var t;(t=this._modelData)===null||t===void 0||t.viewModel.setHiddenAreas(e.map(n=>x.lift(n)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return On.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!B.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!x.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,o,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new x(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!B.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new x(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=ue.isISelection(e),i=x.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new ue(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new x(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!x.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(x.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,s=e.length;i<s;i++)if(!ue.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const s of t){const o=this._contributions[s];typeof o.saveViewState=="function"&&(e[s]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const i=t.contributionsState||{},s=Object.keys(this._contributions);for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._contributions[c];typeof d.restoreViewState=="function"&&d.restoreViewState(i[c])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._actions[s])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run()).then(void 0,We);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel,a=o.getSelection().getStartPosition();o.paste(t,n,i,e);const l=o.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new x(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=qd.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(i.runEditorCommand(s,this,n)).then(void 0,We)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(83))return!1;let i;return n?Array.isArray(n)?i=()=>n:i=n:i=()=>null,this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new MX(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,$0(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,$0(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(133)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(133),s=Rh._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:n.get(61)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){xi(e,this._configuration.options.get(46))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const n=new _X(this._id,this._configuration,e,oI.create(),rI.create(this._configuration.options),o=>To(o),this.languageConfigurationService,this._themeService);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(p("cursors.maximum","The number of cursors has been limited to {0}.",qf.MAX_CURSOR_COUNT));const a=[];for(let d=0,u=o.selections.length;d<u;d++)a[d]=o.selections[d].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const c={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(c);break}case 7:this._onDidChangeModelDecorations.fire(o.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(o.event);break;case 10:this._onDidChangeModelContent.fire(o.event);break;case 11:this._onDidChangeModelOptions.fire(o.event);break;case 12:this._onDidChangeModelTokens.fire(o.event);break}}));const[i,s]=this._createView(n);if(s){this._domElement.appendChild(i.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];i.addContentWidget(this._contentWidgets[c])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];i.addOverlayWidget(this._overlayWidgets[c])}i.render(!1,!0),i.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new EX(e,n,i,s,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,l)=>{this._paste("keyboard",s,o,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,l)=>{this._compositionType("keyboard",s,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,l)=>{const c={text:s,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new C1(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new cZ(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new x(e.lineNumber,e.column,e.lineNumber,e.column),options:Rh.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}};Yf.dropIntoEditorDecorationOptions=Be.register({description:"workbench-dnd-target",className:"dnd-target"});Yf=LX([Va(3,Ve),Va(4,bt),Va(5,Sn),Va(6,Re),Va(7,It),Va(8,xn),Va(9,Wl),Va(10,_n),Va(11,be)],Yf);class C2 extends j{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new R(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new R(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class AX extends j{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=A.editorSimpleInput.bindTo(t),this._editorFocus=A.focus.bindTo(t),this._textInputFocus=A.textInputFocus.bindTo(t),this._editorTextFocus=A.editorTextFocus.bindTo(t),this._editorTabMovesFocus=A.tabMovesFocus.bindTo(t),this._editorReadonly=A.readOnly.bindTo(t),this._inDiffEditor=A.inDiffEditor.bindTo(t),this._editorColumnSelection=A.columnSelection.bindTo(t),this._hasMultipleSelections=A.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=A.hasNonEmptySelection.bindTo(t),this._canUndo=A.canUndo.bindTo(t),this._canRedo=A.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class IX extends j{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=A.languageId.bindTo(t),this._hasCompletionItemProvider=A.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=A.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=A.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=A.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=A.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=A.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=A.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=A.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=A.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=A.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=A.hasReferenceProvider.bindTo(t),this._hasRenameProvider=A.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=A.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=A.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=A.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=A.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=A.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=A.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=A.isInWalkThroughSnippet.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===He.walkThroughSnippet)})}}class NX extends j{constructor(e){super(),this._onChange=this._register(new R),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(fu(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}class MX{constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}get length(){return this._decorationIds.length}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}}}const RX=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),OX=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function jS(r){return RX+encodeURIComponent(r.toString())+OX}const PX=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),FX=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function BX(r){return PX+encodeURIComponent(r.toString())+FX}Vt((r,e)=>{const t=r.getColor(N5);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=r.getColor(ca);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${jS(n)}") repeat-x bottom left; }`);const i=r.getColor(vz);i&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);const s=r.getColor(Uf);s&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const o=r.getColor(zs);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${jS(o)}") repeat-x bottom left; }`);const a=r.getColor(Cz);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=r.getColor(_C);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=r.getColor(ds);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${jS(c)}") repeat-x bottom left; }`);const d=r.getColor(yz);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const u=r.getColor(Sz);u&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const h=r.getColor(wz);h&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${BX(h)}") no-repeat bottom left; }`);const f=r.getColor(kG);f&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const g=r.getColor(xG);g&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${g}; }`);const _=r.getColor(Ks)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${_}}`)});class Et{constructor(e,t,n){const i=s=>this.emitter.fire(s);this.emitter=new R({onFirstListenerAdd:()=>e.addEventListener(t,i,n),onLastListenerRemove:()=>e.removeEventListener(t,i,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function GL(r){return r.preventDefault(),r.stopPropagation(),r}var Mg=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const WX=!1;var RC;(function(r){r.North="north",r.South="south",r.East="east",r.West="west"})(RC||(RC={}));let VX=4;const HX=new R;let UX=300;const jX=new R;class aI{constructor(){this.disposables=new Q}get onPointerMove(){return this.disposables.add(new Et(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Et(window,"mouseup")).event}dispose(){this.disposables.dispose()}}Mg([In],aI.prototype,"onPointerMove",null);Mg([In],aI.prototype,"onPointerUp",null);class lI{constructor(e){this.el=e,this.disposables=new Q}get onPointerMove(){return this.disposables.add(new Et(this.el,Bt.Change)).event}get onPointerUp(){return this.disposables.add(new Et(this.el,Bt.End)).event}dispose(){this.disposables.dispose()}}Mg([In],lI.prototype,"onPointerMove",null);Mg([In],lI.prototype,"onPointerUp",null);class OC{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}Mg([In],OC.prototype,"onPointerMove",null);Mg([In],OC.prototype,"onPointerUp",null);const y2="pointer-events-disabled";class bi extends j{constructor(e,t,n){super(),this.hoverDelay=UX,this.hoverDelayer=this._register(new Ca(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new R),this._onDidStart=this._register(new R),this._onDidChange=this._register(new R),this._onDidReset=this._register(new R),this._onDidEnd=this._register(new R),this.orthogonalStartSashDisposables=this._register(new Q),this.orthogonalStartDragHandleDisposables=this._register(new Q),this.orthogonalEndSashDisposables=this._register(new Q),this.orthogonalEndDragHandleDisposables=this._register(new Q),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=q(e,ee(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Je&&this.el.classList.add("mac");const i=this._register(new Et(this.el,"mousedown")).event;this._register(i(u=>this.onPointerStart(u,new aI),this));const s=this._register(new Et(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new Et(this.el,"mouseenter")).event;this._register(o(()=>bi.onMouseEnter(this)));const a=this._register(new Et(this.el,"mouseleave")).event;this._register(a(()=>bi.onMouseLeave(this))),this._register(kt.addTarget(this.el));const l=ve.map(this._register(new Et(this.el,Bt.Start)).event,u=>{var h;return Object.assign(Object.assign({},u),{target:(h=u.initialTarget)!==null&&h!==void 0?h:null})});this._register(l(u=>this.onPointerStart(u,new lI(this.el)),this));const c=this._register(new Et(this.el,Bt.Tap)).event,d=ve.map(ve.filter(ve.debounce(c,(u,h)=>{var f;return{event:h,count:((f=u?.count)!==null&&f!==void 0?f:0)+1}},250),({count:u})=>u===2),({event:u})=>{var h;return Object.assign(Object.assign({},u),{target:(h=u.initialTarget)!==null&&h!==void 0?h:null})});this._register(d(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=VX,this._register(HX.event(u=>{this.size=u,this.layout()}))),this._register(jX.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",WX),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=q(this.el,ee(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Ke(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Et(this._orthogonalStartDragHandle,"mouseenter")).event(()=>bi.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Et(this._orthogonalStartDragHandle,"mouseleave")).event(()=>bi.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=q(this.el,ee(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Ke(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Et(this._orthogonalEndDragHandle,"mouseenter")).event(()=>bi.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Et(this._orthogonalEndDragHandle,"mouseleave")).event(()=>bi.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){wt.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new OC(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new OC(t))),!this.state)return;const i=H$("iframe");for(const g of i)g.classList.add(y2);const s=e.pageX,o=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Sr(this.el),d=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=Je?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=Je?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new Q;d(),n||this.onDidEnablementChange.event(d,null,u);const h=g=>{wt.stop(g,!1);const _={startX:s,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(_)},f=g=>{wt.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const _ of i)_.classList.remove(y2)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&bi.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&bi.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){bi.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}class Hc{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}}return new Hc(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const ub={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:ls.text},md={CurrentDragAndDropData:void 0};var w2,S2;class $X{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class zX{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?UE(e,this._value,0,e.length,this._from,this._to):Q_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class KX{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?UE(e,this._value,0,e.length,this._from,this._to):Q_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class GX{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new KX(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return eL(e,this._value.scheme);if(this._states[this._stateIdx]===2)return eL(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Am(e,this._value.query);if(this._states[this._stateIdx]===5)return Am(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class mv{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class Sf{constructor(e){this._iter=e}static forUris(e=()=>!1,t=()=>!1){return new Sf(new GX(e,t))}static forStrings(){return new Sf(new $X)}static forConfigKeys(){return new Sf(new zX)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new mv,this._root.segment=n.value());const s=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new mv,i.left.segment=n.value()),s.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new mv,i.right.segment=n.value()),s.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new mv,i.mid.segment=n.value()),s.push([0,i]),i=i.mid;else break}const o=i.value;i.value=t,i.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=s[a][0],u=s[a+1][0];if(d===1&&u===1)s[a][1]=l.rotateLeft();else if(d===-1&&u===-1)s[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),s=[];let o=this._root;for(;o;){const a=i.cmp(o.segment);if(a>0)s.push([-1,o]),o=o.left;else if(a<0)s.push([1,o]),o=o.right;else if(i.hasNext())i.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:l,value:c,segment:d}=a;this._delete(a.key,!1),o.key=l,o.value=c,o.segment=d}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(s.length>0){const[l,c]=s[s.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),s[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}class qX{constructor(e,t){this.uri=e,this.value=t}}class Pi{constructor(e,t){this[w2]="ResourceMap",e instanceof Pi?(this.map=new Map(e.map),this.toKey=t??Pi.defaultToKey):(this.map=new Map,this.toKey=e??Pi.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new qX(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(w2=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}Pi.defaultToKey=r=>r.toString();class ZX{constructor(){this[S2]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(S2=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}let nd=class extends ZX{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};function cI(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){const s=r[n](e,t);if(s)return s}return null}}O3.bind(void 0,!1);const L1=O3.bind(void 0,!0);function O3(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=jE(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function P3(r,e){const t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function F3(r,e){return qL(r.toLowerCase(),e.toLowerCase(),0,0)}function qL(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=qL(r,e,t+1,n+1))?hI({start:n,end:n+1},i):null}return qL(r,e,t,n+1)}function dI(r){return 97<=r&&r<=122}function T1(r){return 65<=r&&r<=90}function uI(r){return 48<=r&&r<=57}function B3(r){return r===32||r===9||r===10||r===13}const W3=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>W3.add(r.charCodeAt(0)));function PC(r){return B3(r)||W3.has(r)}function YX(r,e){return r===e||PC(r)&&PC(e)}function V3(r){return dI(r)||T1(r)||uI(r)}function hI(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function H3(r,e){for(let t=e;t<r.length;t++){const n=r.charCodeAt(t);if(T1(n)||uI(n)||t>0&&!V3(r.charCodeAt(t-1)))return t}return r.length}function ZL(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,s=n+1;for(i=ZL(r,e,t+1,n+1);!i&&(s=H3(e,s))<e.length;)i=ZL(r,e,t+1,s),s++;return i===null?null:hI({start:n,end:n+1},i)}}function XX(r){let e=0,t=0,n=0,i=0,s=0;for(let d=0;d<r.length;d++)s=r.charCodeAt(d),T1(s)&&e++,dI(s)&&t++,V3(s)&&n++,uI(s)&&i++;const o=e/r.length,a=t/r.length,l=n/r.length,c=i/r.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function QX(r){const{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function JX(r){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function eQ(r){let e=0,t=0,n=0,i=0;for(let s=0;s<r.length;s++)n=r.charCodeAt(s),T1(n)&&e++,dI(n)&&t++,B3(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function U3(r,e){if(!e||(e=e.trim(),e.length===0)||!eQ(r)||e.length>60)return null;const t=XX(e);if(!JX(t)){if(!QX(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=ZL(r,e,0,i))===null;)i=H3(e,i+1);return n}function tQ(r,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(r=r.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=YL(r,e,0,i,t))===null;)i=j3(e,i+1);return n}function YL(r,e,t,n,i){if(t===r.length)return[];if(n===e.length)return null;if(YX(r.charCodeAt(t),e.charCodeAt(n))){let s=null,o=n+1;if(s=YL(r,e,t+1,n+1,i),!i)for(;!s&&(o=j3(e,o))<e.length;)s=YL(r,e,t+1,o,i),o++;return s===null?null:hI({start:n,end:n+1},s)}else return null}function j3(r,e){for(let t=e;t<r.length;t++)if(PC(r.charCodeAt(t))||t>0&&PC(r.charCodeAt(t-1)))return t;return r.length}const nQ=cI(L1,U3,P3),iQ=cI(L1,U3,F3),x2=new nd(1e4);function k2(r,e,t=!1){if(typeof r!="string"||typeof e!="string")return null;let n=x2.get(r);n||(n=new RegExp(fH(r),"i"),x2.set(r,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?iQ(r,e):nQ(r,e)}function sQ(r,e,t,n,i,s){const o=Math.min(13,r.length);for(;t<o;t++){const a=Xf(r,e,t,n,i,s,{firstMatchCanBeWeak:!1,boostFullMatch:!0});if(a)return a}return[0,s]}function D1(r){if(typeof r>"u")return[];const e=[],t=r[1];for(let n=r.length-1;n>1;n--){const i=r[n]+t,s=e[e.length-1];s&&s.end===i?s.end=i+1:e.push({start:i,end:i+1})}return e}const gc=128;function fI(){const r=[],e=[];for(let t=0;t<=gc;t++)e[t]=0;for(let t=0;t<=gc;t++)r.push(e.slice(0));return r}function $3(r){const e=[];for(let t=0;t<=r;t++)e[t]=0;return e}const z3=$3(2*gc),XL=$3(2*gc),Ha=fI(),_d=fI(),_v=fI();function bv(r,e){if(e<0||e>=r.length)return!1;const t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!GE(t)}}function L2(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function _0(r,e,t){return e[r]!==t[r]}function rQ(r,e,t,n,i,s,o=!1){for(;e<t&&i<s;)r[e]===n[i]&&(o&&(z3[e]=i),e+=1),i+=1;return e===t}var So;(function(r){r.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}r.isDefault=e})(So||(So={}));class gI{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}gI.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function Xf(r,e,t,n,i,s,o=gI.default){const a=r.length>gc?gc:r.length,l=n.length>gc?gc:n.length;if(t>=a||s>=l||a-t>l-s||!rQ(e,t,a,i,s,l,!0))return;oQ(a,l,t,s,e,i);let c=1,d=1,u=t,h=s;const f=[!1];for(c=1,u=t;u<a;c++,u++){const C=z3[u],y=XL[u],w=u+1<a?XL[u+1]:l;for(d=C-s+1,h=C;h<w;d++,h++){let L=Number.MIN_SAFE_INTEGER,T=!1;h<=y&&(L=aQ(r,e,u,t,n,i,h,l,s,Ha[c-1][d-1]===0,f));let S=0;L!==Number.MAX_SAFE_INTEGER&&(T=!0,S=L+_d[c-1][d-1]);const k=h>C,D=k?_d[c][d-1]+(Ha[c][d-1]>0?-5:0):0,O=h>C+1&&Ha[c][d-1]>0,F=O?_d[c][d-2]+(Ha[c][d-2]>0?-5:0):0;if(O&&(!k||F>=D)&&(!T||F>=S))_d[c][d]=F,_v[c][d]=3,Ha[c][d]=0;else if(k&&(!T||D>=S))_d[c][d]=D,_v[c][d]=2,Ha[c][d]=0;else if(T)_d[c][d]=S,_v[c][d]=1,Ha[c][d]=Ha[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o.firstMatchCanBeWeak)return;c--,d--;const g=[_d[c][d],s];let _=0,b=0;for(;c>=1;){let C=d;do{const y=_v[c][C];if(y===3)C=C-2;else if(y===2)C=C-1;else break}while(C>=1);_>1&&e[t+c-1]===i[s+d-1]&&!_0(C+s-1,n,i)&&_+1>Ha[c][C]&&(C=d),C===d?_++:_=1,b||(b=C),c--,d=C-1,g.push(d)}l===a&&o.boostFullMatch&&(g[0]+=2);const v=b-a;return g[0]-=v,g}function oQ(r,e,t,n,i,s){let o=r-1,a=e-1;for(;o>=t&&a>=n;)i[o]===s[a]&&(XL[o]=a,o--),a--}function aQ(r,e,t,n,i,s,o,a,l,c,d){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return o===t-n?u=r[t]===i[o]?7:5:_0(o,i,s)&&(o===0||!_0(o-1,i,s))?(u=r[t]===i[o]?7:5,h=!0):bv(s,o)&&(o===0||!bv(s,o-1))?u=5:(bv(s,o-1)||L2(s,o-1))&&(u=5,h=!0),u>1&&t===n&&(d[0]=!0),h||(h=_0(o,i,s)||bv(s,o-1)||L2(s,o-1)),t===n?o>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,o+1===a&&(u-=h?3:5),u}function lQ(r,e,t,n,i,s,o){return cQ(r,e,t,n,i,s,!0,o)}function cQ(r,e,t,n,i,s,o,a){let l=Xf(r,e,t,n,i,s,a);if(l&&!o)return l;if(r.length>=3){const c=Math.min(7,r.length-1);for(let d=t+1;d<c;d++){const u=dQ(r,d);if(u){const h=Xf(u,u.toLowerCase(),t,n,i,s,a);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}}return l}function dQ(r,e){if(e+1>=r.length)return;const t=r[e],n=r[e+1];if(t!==n)return r.slice(0,e)+n+t+r.slice(e+2)}const um="$(",pI=new RegExp(`\\$\\(${Gi.iconNameExpression}(?:${Gi.iconModifierExpression})?\\)`,"g"),uQ=new RegExp(Gi.iconNameCharacter),hQ=new RegExp(`(\\\\)?${pI.source}`,"g");function fQ(r){return r.replace(hQ,(e,t)=>t?e:`\\${e}`)}const gQ=new RegExp(`\\\\${pI.source}`,"g");function pQ(r){return r.replace(gQ,e=>`\\${e}`)}const mQ=new RegExp(`(\\s)?(\\\\)?${pI.source}(\\s)?`,"g");function mI(r){return r.indexOf(um)===-1?r:r.replace(mQ,(e,t,n,i)=>n?e:t||i||"")}function _h(r){const e=r.indexOf(um);return e===-1?{text:r}:_Q(r,e)}function _Q(r,e){const t=[];let n="";function i(h){if(h){n+=h;for(const f of h)t.push(a)}}let s=-1,o="",a=0,l,c,d=e;const u=r.length;for(i(r.substr(0,e));d<u;){if(l=r[d],c=r[d+1],l===um[0]&&c===um[1])s=d,i(o),o=um,d++;else if(l===")"&&s!==-1){const h=d-s+1;a+=h,s=-1,o=""}else s!==-1?uQ.test(l)?o+=l:(i(o),s=-1,o=""):i(l);d++}return i(o),{text:n,iconOffsets:t}}function vv(r,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return k2(r,n,t);const s=By(n," "),o=n.length-s.length,a=k2(r,s,t);if(a)for(const l of a){const c=i[l.start+o]+o;l.start+=c,l.end+=c}return a}class rs{constructor(e="",t=!1){var n,i,s;if(this.value=e,typeof this.value!="string")throw Co("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=bQ(this.supportThemeIcons?fQ(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(Zs(t),"g");return e.replace(n,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}}function Qf(r){return K3(r)?!r.value:Array.isArray(r)?r.every(Qf):!0}function K3(r){return r instanceof rs?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function bQ(r){return r.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function Cv(r){return r.replace(/"/g,"&quot;")}function $S(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function vQ(r){const e=[],t=r.split("|").map(i=>i.trim());r=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),o=i?i[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:r,dimensions:e}}var QL=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function CQ(r,e){hs(e)?r.title=mI(e):e?.markdownNotSupportedFallback?r.title=e.markdownNotSupportedFallback:r.removeAttribute("title")}class yQ{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t,n){var i;return QL(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||hs(e)||e instanceof HTMLElement)s=e;else if(!j0(e.markdown))s=(i=e.markdown)!==null&&i!==void 0?i:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(p("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new fi;const o=this._cancellationTokenSource.token;if(s=yield e.markdown(o),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(s,t,n)})}show(e,t,n){const i=this._hoverWidget;if(this.hasContent(e)){const s=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!i},n);this._hoverWidget=this.hoverDelegate.showHover(s,t)}i?.dispose()}hasContent(e){return e?K3(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function G3(r,e,t,n){let i,s;const o=(u,h)=>{var f;u&&(s?.dispose(),s=void 0),h&&(i?.dispose(),i=void 0),(f=r.onDidHideHover)===null||f===void 0||f.call(r)},a=(u,h,f)=>new Js(()=>QL(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new yQ(r,f||e,u>0),yield s.update(t,h,n))}),u),l=()=>{if(i)return;const u=new Q,h=_=>o(!1,_.fromElement===e);u.add(Z(e,he.MOUSE_LEAVE,h,!0));const f=()=>o(!0,!0);u.add(Z(e,he.MOUSE_DOWN,f,!0));const g={targetElements:[e],dispose:()=>{}};if(r.placement===void 0||r.placement==="mouse"){const _=b=>{g.x=b.x+10,b.target instanceof HTMLElement&&b.target.classList.contains("action-label")&&o(!0,!0)};u.add(Z(e,he.MOUSE_MOVE,_,!0))}u.add(a(r.delay,!1,g)),i=u},c=Z(e,he.MOUSE_OVER,l,!0);return{show:u=>{o(!1,!0),a(0,u)},hide:()=>{o(!0,!0)},update:(u,h)=>QL(this,void 0,void 0,function*(){t=u,yield s?.update(t,void 0,h)}),dispose:()=>{c.dispose(),o(!0,!0)}}}class Jo extends j{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Ds&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}get action(){return this._action}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Vf)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(kt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Ys&&this._register(Z(e,he.DRAG_START,i=>{var s;return(s=i.dataTransfer)===null||s===void 0?void 0:s.setData(ub.TEXT,this._action.label)}))),this._register(Z(t,Bt.Tap,i=>this.onClick(i,!0))),this._register(Z(t,he.MOUSE_DOWN,i=>{n||wt.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),Je&&this._register(Z(t,he.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(Z(t,he.CLICK,i=>{wt.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register(Z(t,he.DBLCLICK,i=>{wt.stop(i,!0)})),[he.MOUSE_UP,he.MOUSE_OUT].forEach(i=>{this._register(Z(t,i,s=>{wt.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;wt.stop(e,!0);const i=Us(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.getAction().tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=G3(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class o_ extends Jo{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=q(this.element,ee("a.action-label"))),this.label&&(this._action.id===ki.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(q(this.element,ee("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=p({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var wQ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Sa extends j{constructor(e,t={}){var n,i,s,o,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new R({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new R),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new R),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(o=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Vf,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._register(this._actionRunner.onBeforeRun(u=>this._onBeforeRun.fire(u))),this._actionIds=[],this.viewItems=[],this.viewItemDisposables=new Map,this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(Z(this.domNode,he.KEY_DOWN,u=>{const h=new jt(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(h.equals(c[0])||h.equals(c[1]))?f=this.focusPrevious():d&&(h.equals(d[0])||h.equals(d[1]))?f=this.focusNext():h.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():h.equals(14)?f=this.focusFirst():h.equals(13)?f=this.focusLast():h.equals(2)&&g instanceof Jo&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(h)?this._triggerKeys.keyDown?this.doTrigger(h):this.triggerKeyDown=!0:f=!1,f&&(h.preventDefault(),h.stopPropagation())})),this._register(Z(this.domNode,he.KEY_UP,u=>{const h=new jt(u);this.isTriggerKeyEvent(h)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(h)),h.preventDefault(),h.stopPropagation()):(h.equals(2)||h.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(fu(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(gf()===this.domNode||!kl(gf(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Jo&&n.isEnabled());t instanceof Jo&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Jo&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(kl(gf(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=Ic(t.index)?t.index:null;n.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s)),a||(a=new o_(this.context,s,Object.assign({hoverDelegate:this.options.hoverDelegate},t))),this.options.allowContextMenu||this.viewItemDisposables.set(a,Z(o,he.CONTEXT_MENU,l=>{wt.stop(l,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Jo&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(s.id)):(this.actionsList.insertBefore(o,this.actionsList.children[i]),this.viewItems.splice(i,0,a),this._actionIds.splice(i,0,s.id),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){ut(this.viewItems),this.viewItemDisposables.forEach(e=>e.dispose()),this.viewItemDisposables.clear(),this.viewItems=[],this._actionIds=[],Fn(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ki.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ki.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let o=!0;j0(s.focus)||(o=!1),this.options.focusOnlyEnabledItems&&j0(s.isEnabled)&&!s.isEnabled()&&(o=!1),s.action.id===ki.ID&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Jo){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return wQ(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){ut(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const SQ={IconContribution:"base.contributions.icons"};var T2;(function(r){function e(t,n){let i=t.defaults;for(;mt.isThemeIcon(i);){const s=Xu.getIcon(i.id);if(!s)return;i=s.defaults}return i}r.getDefinition=e})(T2||(T2={}));var D2;(function(r){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}r.toJSONObject=e;function t(n){const i=s=>hs(s)?s:void 0;if(n&&Array.isArray(n.src)&&n.src.every(s=>hs(s.format)&&hs(s.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(s=>({format:s.format,location:Se.parse(s.location)}))}}r.fromJSONObject=t})(D2||(D2={}));class xQ{constructor(){this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:p("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Gi.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}const o={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;mt.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of i.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${mt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter(o=>!mt.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}const Xu=new xQ;Jt.add(SQ.IconContribution,Xu);function Nn(r,e,t,n){return Xu.registerIcon(r,e,t,n)}function q3(){return Xu}function kQ(){for(const r of m.getAll())Xu.registerIcon(r.id,r.definition,r.description)}kQ();const Z3="vscode://schemas/icons",Y3=Jt.as(zy.JSONContribution);Y3.registerSchema(Z3,Xu.getIconSchema());const E2=new Tt(()=>Y3.notifySchemaChanged(Z3),200);Xu.onDidChange(()=>{E2.isScheduled()||E2.schedule()});const X3=Nn("widget-close",m.close,p("widgetClose","Icon for the close action in widgets."));Nn("goto-previous-location",m.arrowUp,p("previousChangeIcon","Icon for goto previous editor location."));Nn("goto-next-location",m.arrowDown,p("nextChangeIcon","Icon for goto next editor location."));mt.modify(m.sync,"spin");mt.modify(m.loading,"spin");var LQ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},TQ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},DQ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},zS;const yv=3;class dp{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class KS{constructor(e){this.entries=e}}const EQ=Nn("diff-review-insert",m.add,p("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),AQ=Nn("diff-review-remove",m.remove,p("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),IQ=Nn("diff-review-close",m.close,p("diffReviewCloseIcon","Icon for 'Close' in diff review."));let FC=class wd extends j{constructor(e,t){super(),this._languageService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=at(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=at(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Sa(this.actionBarContainer.domNode)),this._actionBar.push(new Ds("diffreview.close",p("label.close","Close"),"close-diff-review "+mt.asClassName(IQ),!0,()=>DQ(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=at(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=at(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new cb(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Hn(this.domNode.domNode,"click",n=>{n.preventDefault();const i=d5(n.target,"diff-review-row");i&&this._goToRow(i)})),this._register(Hn(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new B(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new B(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new B(e,1)),this._diffEditor.revealPosition(new B(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:wd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];const i=[];let s=0;for(let c=0,d=e.length;c<d;c++){const u=e[c],h=u.originalStartLineNumber,f=u.originalEndLineNumber,g=u.modifiedStartLineNumber,_=u.modifiedEndLineNumber,b=[];let v=0;{const C=f===0?h:h-1,y=_===0?g:g-1;let w=1,L=1;if(c>0){const k=e[c-1];k.originalEndLineNumber===0?w=k.originalStartLineNumber+1:w=k.originalEndLineNumber+1,k.modifiedEndLineNumber===0?L=k.modifiedStartLineNumber+1:L=k.modifiedEndLineNumber+1}let T=C-yv+1,S=y-yv+1;if(T<w){const k=w-T;T=T+k,S=S+k}if(S<L){const k=L-S;T=T+k,S=S+k}b[v++]=new dp(T,C,S,y)}f!==0&&(b[v++]=new dp(h,f,0,0)),_!==0&&(b[v++]=new dp(0,0,g,_));{const C=f===0?h+1:f+1,y=_===0?g+1:_+1;let w=t,L=n;if(c+1<d){const k=e[c+1];k.originalEndLineNumber===0?w=k.originalStartLineNumber:w=k.originalStartLineNumber-1,k.modifiedEndLineNumber===0?L=k.modifiedStartLineNumber:L=k.modifiedStartLineNumber-1}let T=C+yv-1,S=y+yv-1;if(T>w){const k=w-T;T=T+k,S=S+k}if(S>L){const k=L-S;T=T+k,S=S+k}b[v++]=new dp(C,T,y,S)}i[s++]=new KS(b)}let o=i[0].entries;const a=[];let l=0;for(let c=1,d=i.length;c<d;c++){const u=i[c].entries,h=o[o.length-1],f=u[0];if(h.getType()===0&&f.getType()===0&&f.originalLineStart<=h.originalLineEnd){o[o.length-1]=new dp(h.originalLineStart,f.originalLineEnd,h.modifiedLineStart,f.modifiedLineEnd),o=o.concat(u.slice(1));continue}a[l++]=new KS(o),o=u}return a[l++]=new KS(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const s=this._diffs[n].entries,o=s[s.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),o=i.getOptions();if(!this._isVisible||!n||!i){Fn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),xi(c,t.get(46));let d=0,u=0,h=0,f=0;for(let S=0,k=l.length;S<k;S++){const D=l[S],O=D.originalLineStart,F=D.originalLineEnd,U=D.modifiedLineStart,K=D.modifiedLineEnd;O!==0&&(d===0||O<d)&&(d=O),F!==0&&(u===0||F>u)&&(u=F),U!==0&&(h===0||U<h)&&(h=U),K!==0&&(f===0||K>f)&&(f=K)}const g=document.createElement("div");g.className="diff-review-row";const _=document.createElement("div");_.className="diff-review-cell diff-review-summary";const b=u-d+1,v=f-h+1;_.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${b} +${h},${v} @@`)),g.setAttribute("data-line",String(h));const C=S=>S===0?p("no_lines_changed","no lines changed"):S===1?p("one_line_changed","1 line changed"):p("more_lines_changed","{0} lines changed",S),y=C(b),w=C(v);g.setAttribute("aria-label",p({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,y,h,w)),g.appendChild(_),g.setAttribute("role","listitem"),c.appendChild(g);const L=t.get(61);let T=h;for(let S=0,k=l.length;S<k;S++){const D=l[S];wd._renderSection(c,D,T,L,this._width,e,n,s,t,i,o,this._languageService.languageIdCodec),D.modifiedLineStart!==0&&(T=D.modifiedLineEnd)}Fn(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,s,o,a,l,c,d,u,h){const f=t.getType();let g="diff-review-row",_="";const b="diff-review-spacer";let v=null;switch(f){case 1:g="diff-review-row line-insert",_=" char-insert",v=EQ;break;case 2:g="diff-review-row line-delete",_=" char-delete",v=AQ;break}const C=t.originalLineStart,y=t.originalLineEnd,w=t.modifiedLineStart,L=t.modifiedLineEnd,T=Math.max(L-w,y-C),S=o.get(133),k=S.glyphMarginWidth+S.lineNumbersWidth,D=c.get(133),O=10+D.glyphMarginWidth+D.lineNumbersWidth;for(let F=0;F<=T;F++){const U=C===0?0:C+F,K=w===0?0:w+F,ae=document.createElement("div");ae.style.minWidth=s+"px",ae.className=g,ae.setAttribute("role","listitem"),K!==0&&(n=K),ae.setAttribute("data-line",String(n));const fe=document.createElement("div");fe.className="diff-review-cell",fe.style.height=`${i}px`,ae.appendChild(fe);const we=document.createElement("span");we.style.width=k+"px",we.style.minWidth=k+"px",we.className="diff-review-line-number"+_,U!==0?we.appendChild(document.createTextNode(String(U))):we.innerText=" ",fe.appendChild(we);const xe=document.createElement("span");xe.style.width=O+"px",xe.style.minWidth=O+"px",xe.style.paddingRight="10px",xe.className="diff-review-line-number"+_,K!==0?xe.appendChild(document.createTextNode(String(K))):xe.innerText=" ",fe.appendChild(xe);const De=document.createElement("span");if(De.className=b,v){const Te=document.createElement("span");Te.className=mt.asClassName(v),Te.innerText="  ",De.appendChild(Te)}else De.innerText="  ";fe.appendChild(De);let Oe;if(K!==0){let Te=this._renderLine(d,c,u.tabSize,K,h);wd._ttPolicy&&(Te=wd._ttPolicy.createHTML(Te)),fe.insertAdjacentHTML("beforeend",Te),Oe=d.getLineContent(K)}else{let Te=this._renderLine(a,o,l.tabSize,U,h);wd._ttPolicy&&(Te=wd._ttPolicy.createHTML(Te)),fe.insertAdjacentHTML("beforeend",Te),Oe=a.getLineContent(U)}Oe.length===0&&(Oe=p("blankLine","blank"));let nt="";switch(f){case 0:U===K?nt=p({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",Oe,U):nt=p("equalLine","{0} original line {1} modified line {2}",Oe,U,K);break;case 1:nt=p("insertLine","+ {0} modified line {1}",Oe,K);break;case 2:nt=p("deleteLine","- {0} original line {1}",Oe,U);break}ae.setAttribute("aria-label",nt),e.appendChild(ae)}}static _renderLine(e,t,n,i,s){const o=e.getLineContent(i),a=t.get(46),l=Zn.createEmpty(o,s),c=Xs.isBasicASCII(o,e.mightContainNonBasicASCII()),d=Xs.containsRTL(o,c,e.mightContainRTL());return Yy(new td(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,c,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(107),t.get(90),t.get(85),t.get(47)!==js.OFF,null)).html}};FC._ttPolicy=(zS=window.trustedTypes)===null||zS===void 0?void 0:zS.createPolicy("diffReview",{createHTML:r=>r});FC=LQ([TQ(1,Qt)],FC);Vt((r,e)=>{const t=r.getColor(K5);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=r.getColor(Ag);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class NQ extends me{constructor(){super({id:"editor.action.diffReview.next",label:p("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:le.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Q3(e);n&&n.diffReviewNext()}}class MQ extends me{constructor(){super({id:"editor.action.diffReview.prev",label:p("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:le.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Q3(e);n&&n.diffReviewPrev()}}function Q3(r){const e=r.get(bt),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,s=t.length;i<s;i++){const o=t[i];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}ie(NQ);ie(MQ);const RQ="editorWorkerService",Tr=tt(RQ),Qu=tt("contextViewService"),Vl=tt("contextMenuService");var GS=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class OQ extends j{constructor(e,t,n,i,s,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=s,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=m.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(61),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],d=i.modifiedEndLineNumber===0;c.push(new Ds("diff.clipboard.copyDeletedContent",d?i.originalEndLineNumber>i.modifiedStartLineNumber?p("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):p("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?p("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):p("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>GS(this,void 0,void 0,function*(){const _=new x(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),b=i.originalModel.getValueInRange(_);yield this._clipboardService.writeText(b)})));let u=0,h;i.originalEndLineNumber>i.modifiedStartLineNumber&&(h=new Ds("diff.clipboard.copyDeletedLineContent",d?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>GS(this,void 0,void 0,function*(){const _=i.originalModel.getLineContent(i.originalStartLineNumber+u);if(_===""){const b=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(b===0?`
`:`\r
`)}else yield this._clipboardService.writeText(_)})),c.push(h)),n.getOption(83)||c.push(new Ds("diff.inline.revertChange",p("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>GS(this,void 0,void 0,function*(){const _=new x(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),b=i.originalModel.getValueInRange(_);if(i.modifiedEndLineNumber===0){const v=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new x(i.modifiedStartLineNumber,v,i.modifiedStartLineNumber,v),text:l+b}])}else{const v=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new x(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,v),text:b}])}})));const g=(_,b)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:_,y:b}),getActions:()=>(h&&(h.label=d?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+u):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+u)),c),autoSelectFirstItem:!0})};this._register(Hn(this._diffActions,"mousedown",_=>{const{top:b,height:v}=wi(this._diffActions),C=Math.floor(a/3);_.preventDefault(),g(_.posx,b+v+C)})),this._register(n.onMouseMove(_=>{_.target.type===8||_.target.type===5?_.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(_=>{_.event.rightButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._viewZoneId&&(_.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a),g(_.event.posx,_.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:i}=wi(e),s=t-i,o=Math.floor(s/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],o<l)return c}return o}}const Hl=tt("clipboardService"),J3=tt("progressService");class Ju{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}Ju.None=Object.freeze({report(){}});const id=tt("editorProgressService");var PQ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ua=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},qS;class A2{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,n,i){const s=i?Hc.capture(e):null;e.changeViewZones(o=>{var a;for(const l of this._zones)o.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=n.zones.length;l<c;l++){const d=n.zones[l];d.suppressMouseDown=!0;const u=o.addZone(d);this._zones.push(u),this._zonesMap[String(u)]=!0,n.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new OQ(u,d.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),s?.restore(e),e.changeDecorations(o=>{this._decorations=o.deltaDecorations(this._decorations,n.decorations)}),t?.setZones(n.overviewZones)}}let FQ=0;const BQ=Nn("diff-insert",m.add,p("diffInsertIcon","Line decoration for inserts in the diff editor.")),e9=Nn("diff-remove",m.remove,p("diffRemoveIcon","Line decoration for removals in the diff editor.")),I2=(qS=window.trustedTypes)===null||qS===void 0?void 0:qS.createPolicy("diffEditorWidget",{createHTML:r=>r});let Uc=class pi extends j{constructor(e,t,n,i,s,o,a,l,c,d,u,h){super(),this._editorProgressService=h,this._onDidDispose=this._register(new R),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new R),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new R),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new k1([Re,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=d,this._id=++FQ,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=R2(t,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new Tt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=pi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=at(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Hn(this._overviewDomElement,he.POINTER_DOWN,g=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(g)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new A2(u,i),this._modifiedEditorState=new A2(u,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new D5(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(FC,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new dl(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new M2(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(g=>{this._strategy&&this._strategy.applyColors(g)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=pi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const f=qd.getDiffEditorContributions();for(const g of f)try{this._register(a.createInstance(g.ctor,this))}catch(_){We(_)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=uC(e.type),n}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(Zp(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(46)&&this._updateDecorationsRunner.schedule(),s.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+pi.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(46)&&this._updateDecorationsRunner.schedule(),s.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+pi.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),this._register(n.onMouseDown(s=>{var o,a;if(!s.event.rightButton&&s.target.position&&(!((o=s.target.element)===null||o===void 0)&&o.className.includes("arrow-revert-change"))){const l=s.target.position.lineNumber,c=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(d=>d.modifiedStartLineNumber===l-1||d.modifiedStartLineNumber===l);c&&this.revertChange(c),s.event.stopPropagation(),this._updateDecorations();return}})),n}revertChange(e){const t=this._modifiedEditor,n=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!n||!i||!t)return;const s=e.originalEndLineNumber>0?new x(e.originalStartLineNumber,1,e.originalEndLineNumber,n.getLineMaxColumn(e.originalEndLineNumber)):null,o=s?n.getValueInRange(s):null,a=e.modifiedEndLineNumber>0?new x(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,i.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=i.getEOL();if(e.originalEndLineNumber===0&&a){let c=a;e.modifiedStartLineNumber>1?c=a.setStartPosition(e.modifiedStartLineNumber-1,i.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<i.getLineCount()&&(c=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:c,text:""}])}else if(e.modifiedEndLineNumber===0&&o!==null){const c=e.modifiedStartLineNumber<i.getLineCount()?new B(e.modifiedStartLineNumber+1,1):new B(e.modifiedStartLineNumber,i.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:x.fromPositions(c,c),text:e.modifiedStartLineNumber<i.getLineCount()?o+l:l+o}])}else a&&o!==null&&t.executeEdits("diffEditor",[{range:a,text:o}])}_createInnerEditor(e,t,n,i){return e.createInstance(Yf,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return J_.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=R2(e,this._options),n=jQ(this._options,t);this._options=t;const i=n.ignoreTrimWhitespace||n.renderIndicators||n.renderMarginRevertIcon,s=this._isVisible&&(n.maxComputationTime||n.maxFileSize);i?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new dl(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new M2(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=pi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=pi.ENTIRE_DIFF_OVERVIEW_WIDTH-2*pi.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:pi.ONE_OVERVIEW_WIDTH,right:n+pi.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:pi.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),pi.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,s=o=>{const a=o.getValueLength();return i===0||a<=i};if(!s(e)||!s(t)){(!pi._equals(e.uri,this._lastOriginalWarning)||!pi._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(p("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,i.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,i.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off"),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Io.revealHorizontalRightPadding.defaultValue+pi.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=pi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-pi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(pi.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?pi.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),s=Math.max(0,i-2*0),o=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,s=n.length-1;for(;i<s;){const o=Math.floor((i+s)/2),a=t(n[o]),l=o+1<=s?t(n[o+1]):1073741824;e<a?s=o-1:e>=l?i=o+1:(i=o,s=o)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?i+Math.min(a,o):i+o-s+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=o?n+Math.min(a,s):n+s-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};Uc.ONE_OVERVIEW_WIDTH=15;Uc.ENTIRE_DIFF_OVERVIEW_WIDTH=30;Uc.UPDATE_DIFF_DECORATIONS_DELAY=200;Uc=PQ([Ua(3,Hl),Ua(4,Tr),Ua(5,Re),Ua(6,Ve),Ua(7,bt),Ua(8,It),Ua(9,xn),Ua(10,Vl),Ua(11,id)],Uc);class t9 extends j{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor(Xz)||(e.getColor(M5)||LL).transparent(2),n=e.getColor(Qz)||(e.getColor(R5)||TL).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,s,o){o=o.sort((d,u)=>d.afterLineNumber-u.afterLineNumber),s=s.sort((d,u)=>d.afterLineNumber-u.afterLineNumber);const a=this._getViewZones(e,s,o,n),l=this._getOriginalEditorDecorations(a,e,t,n),c=this._getModifiedEditorDecorations(a,e,t,n,i);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:a.modified}}}}class N2{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class jd{constructor(e,t,n,i,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const i=e.getModel(),s=e._getViewModel();if(i&&s){const o=a_(i,s,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(61),t=this._modifiedEditor.getOption(61),n=this._originalEditor.getOption(134).wrappingColumn!==-1,i=this._modifiedEditor.getOption(134).wrappingColumn!==-1,s=n||i,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let d=0,u=0,h=0,f=0,g=0,_=0;const b=(T,S)=>T.afterLineNumber-S.afterLineNumber,v=(T,S)=>{if(S.domNode===null&&T.length>0){const k=T[T.length-1];if(k.afterLineNumber===S.afterLineNumber&&k.domNode===null){k.heightInLines+=S.heightInLines;return}}T.push(S)},C=new N2(this._modifiedForeignVZ),y=new N2(this._originalForeignVZ);let w=1,L=1;for(let T=0,S=this._lineChanges.length;T<=S;T++){const k=T<S?this._lineChanges[T]:null;k!==null?(h=k.originalStartLineNumber+(k.originalEndLineNumber>0?-1:0),f=k.modifiedStartLineNumber+(k.modifiedEndLineNumber>0?-1:0),u=k.originalEndLineNumber>0?jd._getViewLineCount(this._originalEditor,k.originalStartLineNumber,k.originalEndLineNumber):0,d=k.modifiedEndLineNumber>0?jd._getViewLineCount(this._modifiedEditor,k.modifiedStartLineNumber,k.modifiedEndLineNumber):0,g=Math.max(k.originalStartLineNumber,k.originalEndLineNumber),_=Math.max(k.modifiedStartLineNumber,k.modifiedEndLineNumber)):(h+=1e7+u,f+=1e7+d,g=h,_=f);let D=[],O=[];if(s){let K;k?k.originalEndLineNumber>0?K=k.originalStartLineNumber-w:K=k.modifiedStartLineNumber-L:K=o.getLineCount()-w+1;for(let ae=0;ae<K;ae++){const fe=w+ae,we=L+ae,xe=a.getModelLineViewLineCount(fe),De=l.getModelLineViewLineCount(we);xe<De?D.push({afterLineNumber:fe,heightInLines:De-xe,domNode:null,marginDomNode:null}):xe>De&&O.push({afterLineNumber:we,heightInLines:xe-De,domNode:null,marginDomNode:null})}k&&(w=(k.originalEndLineNumber>0?k.originalEndLineNumber:k.originalStartLineNumber)+1,L=(k.modifiedEndLineNumber>0?k.modifiedEndLineNumber:k.modifiedStartLineNumber)+1)}for(;C.current&&C.current.afterLineNumber<=_;){let K;C.current.afterLineNumber<=f?K=h-f+C.current.afterLineNumber:K=g;let ae=null;k&&k.modifiedStartLineNumber<=C.current.afterLineNumber&&C.current.afterLineNumber<=k.modifiedEndLineNumber&&(ae=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),D.push({afterLineNumber:K,heightInLines:C.current.height/t,domNode:null,marginDomNode:ae}),C.advance()}for(;y.current&&y.current.afterLineNumber<=g;){let K;y.current.afterLineNumber<=h?K=f-h+y.current.afterLineNumber:K=_,O.push({afterLineNumber:K,heightInLines:y.current.height/e,domNode:null}),y.advance()}if(k!==null&&BC(k)){const K=this._produceOriginalFromDiff(k,u,d);K&&D.push(K)}if(k!==null&&WC(k)){const K=this._produceModifiedFromDiff(k,u,d);K&&O.push(K)}let F=0,U=0;for(D=D.sort(b),O=O.sort(b);F<D.length&&U<O.length;){const K=D[F],ae=O[U],fe=K.afterLineNumber-h,we=ae.afterLineNumber-f;fe<we?(v(c.original,K),F++):we<fe?(v(c.modified,ae),U++):K.shouldNotShrink?(v(c.original,K),F++):ae.shouldNotShrink?(v(c.modified,ae),U++):K.heightInLines>=ae.heightInLines?(K.heightInLines-=ae.heightInLines,U++):(ae.heightInLines-=K.heightInLines,F++)}for(;F<D.length;)v(c.original,D[F]),F++;for(;U<O.length;)v(c.modified,O[U]),U++}return{original:jd._ensureDomNodes(c.original),modified:jd._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=s9()),t))}}function il(r,e,t,n,i){return{range:new x(r,e,t,n),options:i}}const $i={arrowRevertChange:Be.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+mt.asClassName(m.arrowRight)}),charDelete:Be.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Be.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Be.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Be.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Be.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Be.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+mt.asClassName(BQ),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Be.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Be.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+mt.asClassName(e9),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Be.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class dl extends t9{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new bi(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Uc.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const s=Math.floor(.5*n);return i=this._disableSash?s:i||s,n>dl.MINIMUM_EDITOR_WIDTH*2?(i<dl.MINIMUM_EDITOR_WIDTH&&(i=dl.MINIMUM_EDITOR_WIDTH),i>n-dl.MINIMUM_EDITOR_WIDTH&&(i=n-dl.MINIMUM_EDITOR_WIDTH)):i=s,this._sashPosition!==i&&(this._sashPosition=i),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Uc.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new WQ(e,t,n,i,s).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=this._dataSource.getOriginalEditor(),o=String(this._removeColor),a={decorations:[],overviewZones:[]},l=s.getModel(),c=s._getViewModel();for(const d of t)if(WC(d)){a.decorations.push({range:new x(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:i?$i.lineDeleteWithSign:$i.lineDelete}),(!BC(d)||!d.charChanges)&&a.decorations.push(il(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,$i.charDeleteWholeLine));const u=a_(l,c,d.originalStartLineNumber,d.originalEndLineNumber);if(a.overviewZones.push(new e_(u.startLineNumber,u.endLineNumber,0,o)),d.charChanges){for(const h of d.charChanges)if(i9(h))if(n)for(let f=h.originalStartLineNumber;f<=h.originalEndLineNumber;f++){let g,_;f===h.originalStartLineNumber?g=h.originalStartColumn:g=l.getLineFirstNonWhitespaceColumn(f),f===h.originalEndLineNumber?_=h.originalEndColumn:_=l.getLineLastNonWhitespaceColumn(f),a.decorations.push(il(f,g,f,_,$i.charDelete))}else a.decorations.push(il(h.originalStartLineNumber,h.originalStartColumn,h.originalEndLineNumber,h.originalEndColumn,$i.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n,i,s){const o=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=o.getModel(),d=o._getViewModel();for(const u of t){if(s)if(u.modifiedEndLineNumber>0)l.decorations.push({range:new x(u.modifiedStartLineNumber,1,u.modifiedStartLineNumber,1),options:$i.arrowRevertChange});else{const h=e.modified.find(f=>f.afterLineNumber===u.modifiedStartLineNumber);h&&(h.marginDomNode=UQ())}if(BC(u)){l.decorations.push({range:new x(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:i?$i.lineInsertWithSign:$i.lineInsert}),(!WC(u)||!u.charChanges)&&l.decorations.push(il(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,$i.charInsertWholeLine));const h=a_(c,d,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(l.overviewZones.push(new e_(h.startLineNumber,h.endLineNumber,0,a)),u.charChanges){for(const f of u.charChanges)if(n9(f))if(n)for(let g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){let _,b;g===f.modifiedStartLineNumber?_=f.modifiedStartColumn:_=c.getLineFirstNonWhitespaceColumn(g),g===f.modifiedEndLineNumber?b=f.modifiedEndColumn:b=c.getLineLastNonWhitespaceColumn(g),l.decorations.push(il(g,_,g,b,$i.charInsert))}else l.decorations.push(il(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,$i.charInsert))}}}return l}}dl.MINIMUM_EDITOR_WIDTH=100;class WQ extends jd{constructor(e,t,n,i,s){super(e,t,n,i,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class M2 extends t9{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const s=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new VQ(e,t,n,s,o,i).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=String(this._removeColor),o={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),c=a._getViewModel();let d=0;for(const u of t)if(WC(u)){for(o.decorations.push({range:new x(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:$i.lineDeleteMargin});d<e.modified.length;){const g=e.modified[d];if(g.diff&&g.diff.originalStartLineNumber>=u.originalStartLineNumber)break;d++}let h=0;if(d<e.modified.length){const g=e.modified[d];g.diff&&g.diff.originalStartLineNumber===u.originalStartLineNumber&&g.diff.originalEndLineNumber===u.originalEndLineNumber&&g.diff.modifiedStartLineNumber===u.modifiedStartLineNumber&&g.diff.modifiedEndLineNumber===u.modifiedEndLineNumber&&(h=g.heightInLines)}const f=a_(l,c,u.originalStartLineNumber,u.originalEndLineNumber);o.overviewZones.push(new e_(f.startLineNumber,f.endLineNumber,h,s))}return o}_getModifiedEditorDecorations(e,t,n,i,s){const o=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=o.getModel(),d=o._getViewModel();for(const u of t)if(BC(u)){l.decorations.push({range:new x(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:i?$i.lineInsertWithSign:$i.lineInsert});const h=a_(c,d,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(l.overviewZones.push(new e_(h.startLineNumber,h.endLineNumber,0,a)),u.charChanges){for(const f of u.charChanges)if(n9(f))if(n)for(let g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){let _,b;g===f.modifiedStartLineNumber?_=f.modifiedStartColumn:_=c.getLineFirstNonWhitespaceColumn(g),g===f.modifiedEndLineNumber?b=f.modifiedEndColumn:b=c.getLineLastNonWhitespaceColumn(g),l.decorations.push(il(g,_,g,b,$i.charInsert))}else l.decorations.push(il(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,$i.charInsert))}else l.decorations.push(il(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,$i.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}}class VQ extends jd{constructor(e,t,n,i,s,o){super(e,t,n,i,s),this._originalModel=i.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${Zd}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(46),s=t.get(29),o=i.typicalHalfwidthCharacterWidth,a=t.get(95),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(61),h=t.get(133).decorationsWidth,f=t.get(107),g=t.get(90),_=t.get(85),b=t.get(47),v=this._lineBreaksComputer.finalize();let C=0;for(let y=0;y<this._pendingLineChange.length;y++){const w=this._pendingLineChange[y],L=this._pendingViewZones[y],T=L.domNode;xi(T,i);const S=L.marginDomNode;xi(S,i);const k=[];if(w.charChanges)for(const we of w.charChanges)i9(we)&&k.push(new Xp(new x(we.originalStartLineNumber,we.originalStartColumn,we.originalEndLineNumber,we.originalEndColumn),"char-delete",0));const D=k.length>0,O=Mc(1e4);let F=0,U=0,K=null;for(let we=w.originalStartLineNumber;we<=w.originalEndLineNumber;we++){const xe=we-w.originalStartLineNumber,De=this._originalModel.tokenization.getLineTokens(we),Oe=De.getLineContent(),nt=v[C++],Te=Ls.filter(k,we,1,Oe.length+1);if(nt){let ce=0;for(const re of nt.breakOffsets){const pe=De.sliceAndInflate(ce,re,0),it=Oe.substring(ce,re);F=Math.max(F,this._renderOriginalLine(U++,it,pe,Ls.extractWrapped(Te,ce,re),D,l,c,i,s,d,h,f,g,_,b,n,O,S)),ce=re}for(K||(K=[]);K.length<xe;)K[K.length]=1;K[xe]=nt.breakOffsets.length,L.heightInLines+=nt.breakOffsets.length-1;const oe=document.createElement("div");oe.className="gutter-delete",e.original.push({afterLineNumber:we,afterColumn:0,heightInLines:nt.breakOffsets.length-1,domNode:s9(),marginDomNode:oe})}else F=Math.max(F,this._renderOriginalLine(U++,Oe,De,Te,D,l,c,i,s,d,h,f,g,_,b,n,O,S))}F+=a;const ae=O.build(),fe=I2?I2.createHTML(ae):ae;if(T.innerHTML=fe,L.minWidthInPx=F*o,K){const we=w.originalEndLineNumber-w.originalStartLineNumber;for(;K.length<=we;)K[K.length]=1}L.diff.viewLineCounts=K}e.original.sort((y,w)=>y.afterLineNumber-w.afterLineNumber)}_renderOriginalLine(e,t,n,i,s,o,a,l,c,d,u,h,f,g,_,b,v,C){v.appendASCIIString('<div class="view-line'),s||v.appendASCIIString(" char-delete"),v.appendASCIIString('" style="top:'),v.appendASCIIString(String(e*d)),v.appendASCIIString('px;width:1000000px;">');const y=Xs.isBasicASCII(t,o),w=Xs.containsRTL(t,y,a),L=tb(new td(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,y,w,0,n,i,b,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,h,f,g,_!==js.OFF,null),v);if(v.appendASCIIString("</div>"),this._renderIndicators){const T=document.createElement("div");T.className=`delete-sign ${mt.asClassName(e9)}`,T.setAttribute("style",`position:absolute;top:${e*d}px;width:${u}px;height:${d}px;right:0;`),C.appendChild(T)}return L.characterMapping.getHorizontalOffset(L.characterMapping.length)}}function HQ(r,e){return li(r,e,["off","on","inherit"])}function BC(r){return r.modifiedEndLineNumber>0}function WC(r){return r.originalEndLineNumber>0}function n9(r){return r.modifiedStartLineNumber===r.modifiedEndLineNumber?r.modifiedEndColumn-r.modifiedStartColumn>0:r.modifiedEndLineNumber-r.modifiedStartLineNumber>0}function i9(r){return r.originalStartLineNumber===r.originalEndLineNumber?r.originalEndColumn-r.originalStartColumn>0:r.originalEndLineNumber-r.originalStartLineNumber>0}function s9(){const r=document.createElement("div");return r.className="diagonal-fill",r}function UQ(){const r=document.createElement("div");return r.className="arrow-revert-change "+mt.asClassName(m.arrowRight),ee("div",{},r)}function a_(r,e,t,n){const i=r.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new x(t,r.getLineMinColumn(t),n,r.getLineMaxColumn(n)))}function R2(r,e){return{enableSplitViewResizing:Le(r.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Le(r.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Le(r.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:lk(r.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:lk(r.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Le(r.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Le(r.renderIndicators,e.renderIndicators),originalEditable:Le(r.originalEditable,e.originalEditable),diffCodeLens:Le(r.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Le(r.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:HQ(r.diffWordWrap,e.diffWordWrap)}}function jQ(r,e){return{enableSplitViewResizing:r.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:r.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:r.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:r.maxComputationTime!==e.maxComputationTime,maxFileSize:r.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:r.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:r.renderIndicators!==e.renderIndicators,originalEditable:r.originalEditable!==e.originalEditable,diffCodeLens:r.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:r.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:r.diffWordWrap!==e.diffWordWrap}}Vt((r,e)=>{const t=r.getColor(M5);t&&e.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`);const n=r.getColor(Gz)||t;n&&e.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${n}; }`);const i=r.getColor(Zz)||n;i&&(e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${i}; }`),e.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${i}; }`));const s=r.getColor(R5);s&&e.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${s}; }`);const o=r.getColor(qz)||s;o&&e.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${o}; }`);const a=r.getColor(Yz)||o;a&&(e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${a}; }`),e.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${a}; }`));const l=r.getColor(Jz);l&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${Li(r.type)?"dashed":"solid"} ${l}; }`);const c=r.getColor(eK);c&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${Li(r.type)?"dashed":"solid"} ${c}; }`);const d=r.getColor(Ag);d&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${d}; }`);const u=r.getColor(tK);u&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${u}; }`);const h=r.getColor(Fd);h&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${h};
			}
		`);const f=r.getColor(Bd);f&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${f};
			}
		`);const g=r.getColor(Wd);g&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${g};
			}
		`);const _=r.getColor(nK);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${_} 12.5%,
			#0000 12.5%, #0000 50%,
			${_} 50%, ${_} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var $Q=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zQ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},KQ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let JL=class extends j{constructor(e){super(),this._themeService=e,this._onCodeEditorAdd=this._register(new R),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new R),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new R),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new R),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new qi,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}openCodeEditor(e,t,n){return KQ(this,void 0,void 0,function*(){for(const i of this._codeEditorOpenHandlers){const s=yield i(e,t,n);if(s!==null)return s}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Ke(t)}};JL=$Q([zQ(0,It)],JL);var GQ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},O2=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},qQ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let VC=class extends JL{constructor(e,t){super(t),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((n,i,s)=>qQ(this,void 0,void 0,function*(){return i?this.doOpenEditor(i,n):null}))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===He.http||s===He.https)return p5(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const s={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};VC=GQ([O2(0,Re),O2(1,It)],VC);lt(bt,VC);const Rg=tt("layoutService");var r9=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},o9=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let HC=class{constructor(e){this._codeEditorService=e,this.onDidLayout=ve.None,this.offset={top:0,quickPickTop:0}}get dimension(){return this._dimension||(this._dimension=Qy(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}};HC=r9([o9(0,bt)],HC);let eT=class extends HC{constructor(e,t){super(t),this._container=e}get hasContainer(){return!1}get container(){return this._container}};eT=r9([o9(1,bt)],eT);lt(Rg,HC);const hb=tt("dialogService");var ZQ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},P2=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wv=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function Sv(r){return r.scheme===He.file?r.fsPath:r.path}let a9=0;class xv{constructor(e,t,n,i,s,o,a){this.id=++a9,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class F2{constructor(e,t){this.resourceLabel=e,this.reason=t}}class B2{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);const n=[];return e.length>0&&n.push(p({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(p({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class YQ{constructor(e,t,n,i,s,o,a){this.id=++a9,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new B2),this.removedResources.has(t)||this.removedResources.set(t,new F2(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new B2),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new F2(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class l9{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new A3(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const c=this._past[a];n&&(i>=t||c.id!==e.elements[i])&&(n=!1,s=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class ZS{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const c9=new l9("","");c9.locked=!0;let tT=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Zf.None,n=ia.None){if(e.type===0){const i=Sv(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new xv(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],o=[];for(const a of e.resources){const l=Sv(a),c=this.getUriComparisonKey(a);i.has(c)||(i.add(c),s.push(l),o.push(c))}s.length===1?this._pushElement(new xv(e,s[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new YQ(e,s,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new l9(i,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const o=Sv(s.resource),a=this.getUriComparisonKey(s.resource),l=new xv(s,o,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const o=Sv(s.resource),a=this.getUriComparisonKey(s.resource),l=new xv(s,o,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new A3(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=i)}return[t,n]}canUndo(e){if(e instanceof ia){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){We(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),i.dispose(),s()),l=>(o(),i.dispose(),this._onError(l,e))):(o(),i.dispose(),s())}_invokeWorkspacePrepare(e){return wv(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return j.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?j.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(j.None);const n=e.actual.prepareUndoRedo();return n?OE(n)?t(n):n.then(i=>t(i)):t(j.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||c9);return new ZS(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new kv(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new kv}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return wv(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Zt.Info,p("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[p({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),p("nok","Undo this File"),p("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;i=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return s.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=p({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new ZS([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof ia){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return wv(this,void 0,void 0,function*(){if((yield this._dialogService.show(Zt.Info,p("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[p("confirmDifferentSource.yes","Yes"),p("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=i)}return[t,n]}canRedo(e){if(e instanceof ia){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new kv(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new kv}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return wv(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=p({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new ZS([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof ia){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};tT=ZQ([P2(0,hb),P2(1,xn)],tT);class kv{constructor(e){this.returnValue=e}}lt(x1,tT);function ys(r,e,t){return Math.min(Math.max(r,e),t)}class d9{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class XQ{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}var W2=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Dr=tt("openerService"),QQ=Object.freeze({_serviceBrand:void 0,registerOpener(){return j.None},registerValidator(){return j.None},registerExternalUriResolver(){return j.None},setDefaultExternalOpener(){},registerExternalOpener(){return j.None},open(){return W2(this,void 0,void 0,function*(){return!1})},resolveExternalUri(r){return W2(this,void 0,void 0,function*(){return{resolved:r,dispose(){}}})}});function _I(r,e){return Se.isUri(r)?Vh(r.scheme,e):jE(r,e+":")}function V2(r,...e){return e.some(t=>_I(r,t))}function u9(r){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(r.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},r=r.with({fragment:""})),{selection:e,uri:r}}var JQ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},eJ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Er=tt("ILanguageFeatureDebounceService");var UC;(function(r){const e=new WeakMap;let t=0;function n(i){let s=e.get(i);return s===void 0&&(s=++t,e.set(i,s)),s}r.of=n})(UC||(UC={}));class tJ{constructor(e,t,n,i,s,o){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=s,this._max=o,this._cache=new nd(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>qy(UC.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?ys(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new XQ(6),this._cache.set(n,i));const s=ys(i.update(t),this._min,this._max);return _I(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new d9;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ys(e,this._min,this._max)}}let nT=class{constructor(e){this._logService=e,this._data=new Map}for(e,t,n){var i,s,o;const a=(i=n?.min)!==null&&i!==void 0?i:50,l=(s=n?.max)!==null&&s!==void 0?s:Math.pow(a,2),c=(o=n?.key)!==null&&o!==void 0?o:void 0,d=`${UC.of(e)},${a}${c?","+c:""}`;let u=this._data.get(d);return u||(u=new tJ(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l),this._data.set(d,u)),u}_overallAverage(){const e=new d9;for(const t of this._data.values())e.update(t.default());return e.value}};nT=JQ([eJ(0,Zr)],nT);lt(Er,nT,!0);const fb=tt("IWorkspaceEditService");class Og{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Qd.is(t))return Qd.lift(t);if(xf.is(t))return xf.lift(t);throw new Error("Unsupported edit")})}}class Qd extends Og{constructor(e,t,n=void 0,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}static is(e){return e instanceof Qd?!0:cs(e)&&Se.isUri(e.resource)&&cs(e.textEdit)}static lift(e){return e instanceof Qd?e:new Qd(e.resource,e.textEdit,e.versionId,e.metadata)}}class xf extends Og{constructor(e,t,n={},i){super(i),this.oldResource=e,this.newResource=t,this.options=n}static is(e){return e instanceof xf?!0:cs(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof xf?e:new xf(e.oldResource,e.newResource,e.options,e.metadata)}}const bI=Object.freeze({id:"editor",order:5,type:"object",title:p("editorConfigurationTitle","Editor"),scope:5}),jC=Object.assign(Object.assign({},bI),{properties:{"editor.tabSize":{type:"number",default:yi.tabSize,minimum:1,markdownDescription:p("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:yi.insertSpaces,markdownDescription:p("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:yi.detectIndentation,markdownDescription:p("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:yi.trimAutoWhitespace,description:p("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:yi.largeFileOptimizations,description:p("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:p("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[p("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),p("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),p("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:p("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[p("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),p("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),p("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:p("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:p("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:p("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:["array","null"],default:null,description:p("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:p("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:p("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:p("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:p("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:p("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:p("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:p("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:p("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function nJ(r){return typeof r.type<"u"||typeof r.anyOf<"u"}for(const r of Wh){const e=r.schema;if(typeof e<"u")if(nJ(e))jC.properties[`editor.${r.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(jC.properties[t]=e[t])}let Lv=null;function h9(){return Lv===null&&(Lv=Object.create(null),Object.keys(jC.properties).forEach(r=>{Lv[r]=!0})),Lv}function iJ(r){return h9()[`editor.${r}`]||!1}function sJ(r){return h9()[`diffEditor.${r}`]||!1}const rJ=Jt.as(Bl.Configuration);rJ.registerConfiguration(jC);class Gt{static insert(e,t){return{range:new x(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Ss{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?xM(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?xM(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=el(this.contents),n=el(this.overrides),i=[...this.keys];for(const s of e)if(!s.isEmpty()){this.mergeContents(t,s.contents);for(const o of s.overrides){const[a]=n.filter(l=>qs(l.identifiers,o.identifiers));a?(this.mergeContents(a.contents,o.contents),a.keys.push(...o.keys),a.keys=El(a.keys)):n.push(el(o))}for(const o of s.keys)i.indexOf(o)===-1&&i.push(o)}return new Ss(t,i,n)}freeze(){return this.frozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const i of El([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[i];const o=t[i];o&&(typeof s=="object"&&typeof o=="object"?(s=el(s),this.mergeContents(s,o)):s=o),n[i]=s}return new Ss(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&cs(e[n])&&cs(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=el(t[n])}}checkAndFreeze(e){return this.frozen&&!Object.isFrozen(e)?z6(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=s=>{s&&(n?this.mergeContents(n,s):n=el(s))};for(const s of this.overrides)qs(s.identifiers,[e])?t=s.contents:s.identifiers.includes(e)&&i(s.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),tA(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&aU(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class E1{constructor(e,t,n,i,s=new Ss,o=new Ss,a=new Pi,l=new Ss,c=new Pi,d=!0){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=i,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._freeze=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Pi,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new Ss,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),l=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(e),c=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(e),d=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),u=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),h=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),f=n?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,g=s?t.overrideIdentifier?s.freeze().override(t.overrideIdentifier).getValue(e):s.freeze().getValue(e):void 0,_=t.overrideIdentifier?o.override(t.overrideIdentifier).getValue(e):o.getValue(e),b=i.getValue(e),v=El(i.overrides.map(C=>C.identifiers).flat()).filter(C=>i.getOverrideValue(e,C)!==void 0);return{defaultValue:a,policyValue:l,applicationValue:c,userValue:d,userLocalValue:u,userRemoteValue:h,workspaceValue:f,workspaceFolderValue:g,memoryValue:_,value:b,default:a!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,policy:l!==void 0?{value:l}:void 0,application:c!==void 0?{value:c,override:t.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:d!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:u!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:h!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:f!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:g!==void 0?{value:s?.freeze().getValue(e),override:t.overrideIdentifier?s?.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:_!==void 0?{value:o.getValue(e),override:t.overrideIdentifier?o.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:v.length?v:void 0}}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(i=i.merge(this._policyConfiguration)),i}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),i=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),o=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(Se.revive(c[0]),this.parseConfigurationModel(c[1])),l),new Pi);return new E1(t,n,i,s,new Ss,o,a,new Ss,new Pi,!1)}static parseConfigurationModel(e){return new Ss(e.contents,e.keys,e.overrides).freeze()}}class oJ{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._previousConfiguration=void 0;const s=new Set;e.keys.forEach(a=>s.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>s.add(l))),this.affectedKeys=[...s.values()];const o=new Ss;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=E1.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,s=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!mr(i,s)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=I4({[t]:!0},()=>{}),i;for(;typeof n=="object"&&(i=Object.keys(n)[0]);){if(e=e[i],!e)return!1;n=n[i]}return!0}}const aJ=/^(cursor|delete)/;class lJ extends j{constructor(e,t,n,i,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new R),this._currentChord=null,this._currentChordChecker=new eb,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=ef.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Js,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ve.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=n.getDispatchParts();if(i===null)return this._log("\\ Keyboard event cannot be dispatched"),null;const s=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,o,i)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(p("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=ef.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=ef.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getParts();return this._ignoreSingleModifiers=new ef(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let i=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let s=null,o=null;if(n){const[d]=e.getSingleModifierDispatchParts();s=d,o=d}else[s]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,s);return this._logService.trace("KeybindingService#dispatch",l,c?.commandId),c&&c.enterChord?(i=!0,this._enterChordMode(s,l),this._log("+ Entering chord mode..."),i):(this._currentChord&&(!c||!c.commandId)&&(this._log(`+ Leaving chord mode: Nothing bound to "${this._currentChord.label} ${l}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(i=!0),this._log(`+ Invoking command ${c.commandId}.`),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d)),aJ.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class ef{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}ef.EMPTY=new ef(null);const Mn=tt("keybindingService");class hm{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const i of e){const s=i.command;s&&s.charAt(0)!=="-"&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=hm.handleRemovals([].concat(e).concat(t));for(let i=0,s=this._keybindings.length;i<s;i++){const o=this._keybindings[i];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,i){return!(t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||i&&(!e.when||!G$(i,e.when)))}static handleRemovals(e){const t=new Map;for(let i=0,s=e.length;i<s;i++){const o=e[i];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.command||o.command.length===0){n.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){n.push(o);continue}let l=!1;for(const c of a){const d=c.keypressParts[0],u=c.keypressParts[1],h=c.when;if(this._isTargetedForRemoval(o,d,u,h)){l=!0;break}}if(!l){n.push(o);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.command===t.command)continue;const o=s.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&s.keypressParts[1]!==t.keypressParts[1]||hm.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:b5(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const s=n[i];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let i=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=o.length;a<l;a++){const c=o[a];c.keypressParts[1]===n&&i.push(c)}}else{const o=this._map.get(n);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;i=o}const s=this._findCommand(e,i);return s?t===null&&s.keypressParts.length>1&&s.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${H2(s.when)}, source: ${U2(s)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${s.command}, when: ${H2(s.when)}, source: ${U2(s)}.`),{enterChord:!1,leaveChord:s.keypressParts.length>1,commandId:s.command,commandArgs:s.commandArgs,bubble:s.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(hm._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function H2(r){return r?`${r.serialize()}`:"no when condition"}function U2(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}class j2{constructor(e,t,n,i,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?iT(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=iT(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function iT(r){const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(!i)return e;e.push(i)}return e}class A1{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=n(a);if(l===null)return null;i[s]=uJ(a,l,this.modifierLabels[e])}return i.join(" ")}}const vI=new A1({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),cJ=new A1({ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:p({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),dJ=new A1({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new A1({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function uJ(r,e,t){if(e===null)return"";const n=[];return r.ctrlKey&&n.push(t.ctrlKey),r.shiftKey&&n.push(t.shiftKey),r.altKey&&n.push(t.altKey),r.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class hJ extends Xj{constructor(e,t){if(super(),t.length===0)throw Co("parts");this._os=e,this._parts=t}getLabel(){return vI.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return cJ.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:dJ.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new Yj(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class l_ extends hJ{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Od.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Od.toString(e.keyCode)}_getElectronAccelerator(e){return Od.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return l_.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Od.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=WE[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof uu)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new uu(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=iT(e.map(i=>this._resolveSimpleUserBinding(i)));return n.length>0?[new l_(new sC(n),t)]:[]}}const Jf=tt("labelService"),c_=tt("contextService");function $2(r){const e=r;return typeof e?.id=="string"&&Se.isUri(e.uri)}function fJ(r){if(r.configuration)return{id:r.id,configPath:r.configuration};if(r.folders.length===1)return{id:r.id,uri:r.folders[0].uri}}class gJ{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const sT="code-workspace";p("codeWorkspace","Code Workspace");var Tn;(function(r){r.noSelection=p("noSelection","No selection"),r.singleSelectionRange=p("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),r.singleSelection=p("singleSelection","Line {0}, Column {1}"),r.multiSelectionRange=p("multiSelectionRange","{0} selections ({1} characters selected)"),r.multiSelection=p("multiSelection","{0} selections"),r.emergencyConfOn=p("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),r.openingDocs=p("openingDocs","Now opening the Editor Accessibility documentation page."),r.readonlyDiffEditor=p("readonlyDiffEditor"," in a read-only pane of a diff editor."),r.editableDiffEditor=p("editableDiffEditor"," in a pane of a diff editor."),r.readonlyEditor=p("readonlyEditor"," in a read-only code editor"),r.editableEditor=p("editableEditor"," in a code editor"),r.changeConfigToOnMac=p("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),r.changeConfigToOnWinLinux=p("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),r.auto_on=p("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),r.auto_off=p("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),r.tabFocusModeOnMsg=p("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),r.tabFocusModeOnMsgNoKb=p("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),r.tabFocusModeOffMsg=p("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),r.tabFocusModeOffMsgNoKb=p("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),r.openDocMac=p("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),r.openDocWinLinux=p("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),r.outroMsg=p("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),r.showAccessibilityHelpAction=p("showAccessibilityHelpAction","Show Accessibility Help")})(Tn||(Tn={}));var rT;(function(r){r.inspectTokensAction=p("inspectTokens","Developer: Inspect Tokens")})(rT||(rT={}));var $C;(function(r){r.gotoLineActionLabel=p("gotoLineActionLabel","Go to Line/Column...")})($C||($C={}));var oT;(function(r){r.helpQuickAccessActionLabel=p("helpQuickAccess","Show all Quick Access Providers")})(oT||(oT={}));var zC;(function(r){r.quickCommandActionLabel=p("quickCommandActionLabel","Command Palette"),r.quickCommandHelp=p("quickCommandActionHelp","Show And Run Commands")})(zC||(zC={}));var d_;(function(r){r.quickOutlineActionLabel=p("quickOutlineActionLabel","Go to Symbol..."),r.quickOutlineByCategoryActionLabel=p("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(d_||(d_={}));var KC;(function(r){r.editorViewAccessibleLabel=p("editorViewAccessibleLabel","Editor content"),r.accessibilityHelpMessage=p("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(KC||(KC={}));var aT;(function(r){r.toggleHighContrast=p("toggleHighContrast","Toggle High Contrast Theme")})(aT||(aT={}));var lT;(function(r){r.bulkEditServiceSummary=p("bulkEditServiceSummary","Made {0} edits in {1} files")})(lT||(lT={}));const f9=tt("workspaceTrustManagementService");var _i;(function(r){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}r.intersect=e;function t(s){return s.end-s.start<=0}r.isEmpty=t;function n(s,o){return!t(e(s,o))}r.intersects=n;function i(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},c={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}r.relativeComplement=i})(_i||(_i={}));var pc;(function(r){r[r.AVOID=0]="AVOID",r[r.ALIGN=1]="ALIGN"})(pc||(pc={}));function tf(r,e,t){const n=t.mode===pc.ALIGN?t.offset:t.offset+t.size,i=t.mode===pc.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=r-n?n:e<=i?i-e:Math.max(r-e,0):e<=i?i-e:e<=r-n?n:0}class eg extends j{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=j.None,this.toDisposeOnSetContainer=j.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ee(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,ss(this.view),this.setContainer(e,t),this._register(Ke(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ee(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=pJ,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ee("slot"))}else this.container.appendChild(this.view);const i=new Q;eg.BUBBLE_UP_EVENTS.forEach(s=>{i.add(Hn(this.container,s,o=>{this.onDOMEvent(o,!1)}))}),eg.BUBBLE_DOWN_EVENTS.forEach(s=>{i.add(Hn(this.container,s,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){var t,n;this.isVisible()&&this.hide(),Fn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",$s(this.view),this.toDisposeOnClean=e.render(this.view)||j.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)===null||n===void 0||n.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(_a&&gA.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(f5(e)){const u=wi(e),h=R$(e);t={top:u.top*h,left:u.left*h,width:u.width*h,height:u.height*h}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Pr(this.view),i=vL(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},h={offset:t.left,size:t.width,position:o===0?0:1,mode:pc.ALIGN};l=tf(window.innerHeight,i,u)+window.pageYOffset,_i.intersects({start:l,end:l+i},{start:u.offset,end:u.offset+u.size})&&(h.mode=pc.AVOID),c=tf(window.innerWidth,n,h)}else{const u={offset:t.left,size:t.width,position:o===0?0:1},h={offset:t.top,size:t.height,position:s===0?0:1,mode:pc.ALIGN};c=tf(window.innerWidth,n,u),_i.intersects({start:c,end:c+n},{start:u.offset,end:u.offset+u.size})&&(h.mode=pc.AVOID),l=tf(window.innerHeight,i,h)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=wi(this.container);this.view.style.top=`${l-(this.useFixedPosition?wi(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?wi(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),ss(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!kl(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}eg.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];eg.BUBBLE_DOWN_EVENTS=["click"];const pJ=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var mJ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_J=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let cT=class extends j{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=j.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new eg(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?(t!==this.container||this.shadowRoot!==n)&&(this.container=t,this.setContainer(t,n?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=n,this.contextView.show(e);const i=Ke(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};cT=mJ([_J(0,Rg)],cT);var z2=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Tv="**",K2="/",b0="[/\\\\]",v0="[^/\\\\]",bJ=/\//g;function G2(r,e){switch(r){case 0:return"";case 1:return`${v0}*?`;default:return`(?:${b0}|${v0}+${b0}${e?`|${b0}${v0}+`:""})*?`}}function q2(r,e){if(!r)return[];const t=[];let n=!1,i=!1,s="";for(const o of r){switch(o){case e:if(!n&&!i){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}s+=o}return s&&t.push(s),t}function g9(r){if(!r)return"";let e="";const t=q2(r,K2);if(t.every(n=>n===Tv))e=".*";else{let n=!1;t.forEach((i,s)=>{if(i===Tv){if(n)return;e+=G2(2,s===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const d of i){if(d!=="}"&&o){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===K2?u="":u=Zs(d),c+=u;continue}switch(d){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${q2(a,",").map(f=>g9(f)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=v0;continue;case"*":e+=G2(1);continue;default:e+=Zs(d)}}s<t.length-1&&(t[s+1]!==Tv||s+2<t.length)&&(e+=b0)}n=i===Tv})}return e}const vJ=/^\*\*\/\*\.[\w\.-]+$/,CJ=/^\*\*\/([\w\.-]+)\/?$/,yJ=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,wJ=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,SJ=/^\*\*((\/[\w\.-]+)+)\/?$/,xJ=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Z2=new nd(1e4),Y2=function(){return!1},ma=function(){return null};function CI(r,e){if(!r)return ma;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=Z2.get(n);if(i)return X2(i,r);let s;return vJ.test(t)?i=kJ(t.substr(4),t):(s=CJ.exec(YS(t,e)))?i=LJ(s[1],t):(e.trimForExclusions?wJ:yJ).test(t)?i=TJ(t,e):(s=SJ.exec(YS(t,e)))?i=Q2(s[1].substr(1),t,!0):(s=xJ.exec(YS(t,e)))?i=Q2(s[1],t,!1):i=DJ(t),Z2.set(n,i),X2(i,r)}function X2(r,e){if(typeof e=="string")return r;const t=function(n,i){return VL(n,e.base,!Ti)?r(n.substr(e.base.length+1),i):null};return t.allBasenames=r.allBasenames,t.allPaths=r.allPaths,t.basenames=r.basenames,t.patterns=r.patterns,t}function YS(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function kJ(r,e){return function(t,n){return typeof t=="string"&&t.endsWith(r)?e:null}}function LJ(r,e){const t=`/${r}`,n=`\\${r}`,i=function(o,a){return typeof o!="string"?null:a?a===r?e:null:o===r||o.endsWith(t)||o.endsWith(n)?e:null},s=[r];return i.basenames=s,i.patterns=[e],i.allBasenames=s,i}function TJ(r,e){const t=m9(r.slice(1,-1).split(",").map(a=>CI(a,e)).filter(a=>a!==ma),r),n=t.length;if(!n)return ma;if(n===1)return t[0];const i=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return r;return null},s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(i.allPaths=o),i}function Q2(r,e,t){const n=ha===En.sep,i=n?r:r.replace(bJ,ha),s=ha+i,o=En.sep+r;let a;return t?a=function(l,c){return typeof l=="string"&&(l===i||l.endsWith(s)||!n&&(l===r||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===i||!n&&l===r)?e:null},a.allPaths=[(t?"*/":"./")+r],a}function DJ(r){try{const e=new RegExp(`^${g9(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return ma}}function EJ(r,e,t){return!r||typeof e!="string"?!1:p9(r)(e,void 0,t)}function p9(r,e={}){if(!r)return Y2;if(typeof r=="string"||AJ(r)){const t=CI(r,e);if(t===ma)return Y2;const n=function(i,s){return!!t(i,s)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return IJ(r,e)}function AJ(r){const e=r;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function IJ(r,e){const t=m9(Object.getOwnPropertyNames(r).map(a=>NJ(a,r[a],e)).filter(a=>a!==ma)),n=t.length;if(!n)return ma;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(d,u){let h;for(let f=0,g=t.length;f<g;f++){const _=t[f](d,u);if(typeof _=="string")return _;lL(_)&&(h||(h=[]),h.push(_))}return h?(()=>z2(this,void 0,void 0,function*(){for(const f of h){const g=yield f;if(typeof g=="string")return g}return null}))():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const i=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=Kd(a)),d||(d=l.substr(0,l.length-QV(a).length)));const _=g(a,l,d,c);if(typeof _=="string")return _;lL(_)&&(u||(u=[]),u.push(_))}return u?(()=>z2(this,void 0,void 0,function*(){for(const h of u){const f=yield h;if(typeof f=="string")return f}return null}))():null},s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(i.allPaths=o),i}function NJ(r,e,t){if(e===!1)return ma;const n=CI(r,t);if(n===ma)return ma;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const s=(o,a,l,c)=>{if(!c||!n(o,a))return null;const d=i.replace("$(basename)",l),u=c(d);return lL(u)?u.then(h=>h?r:null):u?r:null};return s.requiresSiblings=!0,s}}return n}function m9(r,e){const t=r.filter(a=>!!a.basenames);if(t.length<2)return r;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=n.indexOf(l);return c!==-1?i[c]:null};s.basenames=n,s.patterns=i,s.allBasenames=n;const o=r.filter(a=>!a.basenames);return o.push(s),o}let tg=[],yI=[],_9=[];function Dv(r,e=!1){MJ(r,!1,e)}function MJ(r,e,t){const n=RJ(r,e);tg.push(n),n.userConfigured?_9.push(n):yI.push(n),t&&!n.userConfigured&&tg.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function RJ(r,e){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:e,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?p9(r.filepattern.toLowerCase()):void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(En.sep)>=0:!1}}function OJ(){tg=tg.filter(r=>r.userConfigured),yI=[]}function PJ(r,e){return FJ(r,e).map(t=>t.id)}function FJ(r,e){let t;if(r)switch(r.scheme){case He.file:t=r.fsPath;break;case He.data:{t=Wc.parseMetaData(r).get(Wc.META_DATA_LABEL);break}case He.vscodeNotebookCell:t=void 0;break;default:t=r.path}if(!t)return[{id:"unknown",mime:ls.unknown}];t=t.toLowerCase();const n=Kd(t),i=J2(t,n,_9);if(i)return[i,{id:br,mime:ls.text}];const s=J2(t,n,yI);if(s)return[s,{id:br,mime:ls.text}];if(e){const o=BJ(e);if(o)return[o,{id:br,mime:ls.text}]}return[{id:"unknown",mime:ls.unknown}]}function J2(r,e,t){var n;let i,s,o;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?r:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(s=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}if(i)return i;if(s)return s;if(o)return o}function BJ(r){if(qE(r)&&(r=r.substr(1)),r.length>0)for(let e=tg.length-1;e>=0;e--){const t=tg[e];if(!t.firstline)continue;const n=r.match(t.firstline);if(n&&n.length>0)return t}}const Ev=Object.prototype.hasOwnProperty,eO="vs.editor.nullLanguage";class WJ{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(eO,0),this._register(br,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||eO}}class u_ extends j{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,u_.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new WJ,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Ff.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){u_.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},OJ();const e=[].concat(Ff.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),Jt.as(Bl.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;Ev.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)Dv({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)Dv({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)Dv({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);pH(l)||Dv({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){We(l)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const o=s!==null&&s.length>0;if(!(o&&s[0]===null)){const a=(o?s[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Ev.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return Ev.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Ev.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:PJ(e,t)}}u_.instanceCount=0;class h_ extends j{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new R),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new R({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,h_.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new u_(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){h_.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return zF(n,null)}createById(e){return new tO(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new tO(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=br),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),Yt.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}h_.instanceCount=0;class tO{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new R({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}function nO(r){let e=r.definition;for(;e instanceof m;)e=e.definition;return`.codicon-${r.id}:before { content: '${e.fontCharacter}'; }`}const dT=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,XS=/(&amp;)?(&amp;)([^\s&])/g;var GC;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(GC||(GC={}));let fm=class extends Sa{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation"),super(i,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,s),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Je||Ti?[10]:[]],keyDown:!0}}),this.menuElement=i,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Q),this.initializeOrUpdateStyleSheet(e,{}),this._register(kt.addTarget(i)),Z(i,he.KEY_DOWN,a=>{new jt(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(Z(i,he.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){wt.stop(a,!0);const c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof iO&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){const d=c.shift();d&&d.container&&(this.focusItemByElement(d.container),c.push(d)),this.mnemonics.set(l,c)}}})),Ti&&this._register(Z(i,he.KEY_DOWN,a=>{const l=new jt(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),wt.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),wt.stop(a,!0))})),this._register(Z(this.domNode,he.MOUSE_OUT,a=>{const l=a.relatedTarget;kl(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(Z(this.actionsList,he.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!kl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(kt.addTarget(this.actionsList)),this._register(Z(this.actionsList,Bt.Tap,a=>{let l=a.initialTarget;if(!(!l||!kl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));const s={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new cb(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(Z(i,Bt.Change,a=>{wt.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(Z(o,he.MOUSE_UP,a=>{a.preventDefault()})),i.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof QS)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(Vm(e)?this.styleSheet=Sr(e):(fm.globalStyleSheet||(fm.globalStyleSheet=Sr()),this.styleSheet=fm.globalStyleSheet)),this.styleSheet.textContent=HJ(t,Vm(e))}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",i=e.backgroundColor?`${e.backgroundColor}`:"",s=e.borderColor?`1px solid ${e.borderColor}`:"",o="5px",a=e.shadowColor?`0 2px 8px ${e.shadowColor}`:"";t.style.outline=s,t.style.borderRadius=o,t.style.color=n,t.style.backgroundColor=i,t.style.boxShadow=a,this.viewItems&&this.viewItems.forEach(l=>{(l instanceof uT||l instanceof QS)&&l.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof ki)return new QS(t.context,e,{icon:!0});if(e instanceof jm){const i=new iO(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const s=i.getMnemonic();if(s&&i.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(i),this.mnemonics.set(s,o)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(i.keybinding=a)}}const s=new uT(t.context,e,i);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}};class uT extends Jo{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const i=this.getAction().label;if(i){const s=dT.exec(i);s&&(this.mnemonic=(s[1]?s[1]:s[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Tt(()=>{this.element&&(this._register(Z(this.element,he.MOUSE_UP,i=>{if(wt.stop(i,!0),Ys){if(new aa(i).rightButton)return;this.onClick(i)}else setTimeout(()=>{this.onClick(i)},0)})),this._register(Z(this.element,he.CONTEXT_MENU,i=>{wt.stop(i,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=q(this.element,ee("a.action-menu-item")),this._action.id===ki.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=q(this.item,ee("span.menu-item-check"+m.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=q(this.item,ee("span.action-label")),this.options.label&&this.options.keybinding&&(q(this.item,ee("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Fn(this.label);let t=mI(this.getAction().label);if(t){const n=VJ(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const i=dT.exec(t);if(i){t=HE(t),XS.lastIndex=0;let s=XS.exec(t);for(;s&&s[1];)s=XS.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(By(o(t.substr(0,s.index))," "),ee("u",{"aria-hidden":"true"},s[3]),m4(o(t.substr(s.index+s[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():"",this.item.style.outline=i,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t?t.toString():"")}style(e){this.menuStyle=e,this.applyStyle()}}class iO extends uT{constructor(e,t,n,i){super(e,e,i),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new Q),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:GC.Right,this.showScheduler=new Tt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Tt(()=>{this.element&&!kl(gf(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=q(this.item,ee("span.submenu-indicator"+m.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(Z(this.element,he.KEY_UP,t=>{const n=new jt(t);(n.equals(17)||n.equals(3))&&(wt.stop(t,!0),this.createSubmenu(!0))})),this._register(Z(this.element,he.KEY_DOWN,t=>{const n=new jt(t);gf()===this.item&&(n.equals(17)||n.equals(3))&&wt.stop(t,!0)})),this._register(Z(this.element,he.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(Z(this.element,he.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(Z(this.element,he.FOCUS_OUT,t=>{this.element&&!kl(gf(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){wt.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=tf(e.width,t.width,{position:i===GC.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=tf(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=q(this.element,ee("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new fm(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Jy],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new At(window.innerWidth,window.innerHeight),At.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(Z(this.submenuContainer,he.KEY_UP,c=>{new jt(c).equals(15)&&(wt.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(Z(this.submenuContainer,he.KEY_DOWN,c=>{new jt(c).equals(15)&&wt.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){var e;if(super.applyStyle(),!this.menuStyle)return;const n=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=n?`${n}`:""),(e=this.parentData.submenu)===null||e===void 0||e.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class QS extends o_{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function VJ(r){const e=dT,t=e.exec(r);if(!t)return r;const n=!t[1];return r.replace(e,n?"$2$3":"").trim()}function HJ(r,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${nO(m.menuSelection)}
${nO(m.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .6em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=r.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const i=r.scrollbarSliderBackground;i&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${i};
				}
			`);const s=r.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const o=r.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}function so(r,e){const t=Object.create(null);for(const n in e){const i=e[n];i&&(t[n]=qa(i,r))}return t}function wI(r,e,t){function n(){const i=so(r.getColorTheme(),e);typeof t=="function"?t(i):t.style(i)}return n(),r.onDidColorThemeChange(n)}function UJ(r,e,t){return wI(e,{badgeBackground:t?.badgeBackground||Kh,badgeForeground:t?.badgeForeground||Gh,badgeBorder:Ge},r)}function yu(r,e,t){return wI(e,Object.assign(Object.assign({},I1),t||{}),r)}const I1={listFocusBackground:iK,listFocusForeground:sK,listFocusOutline:rK,listActiveSelectionBackground:Cl,listActiveSelectionForeground:da,listActiveSelectionIconForeground:Ap,listFocusAndSelectionOutline:oK,listFocusAndSelectionBackground:Cl,listFocusAndSelectionForeground:da,listInactiveSelectionBackground:aK,listInactiveSelectionIconForeground:cK,listInactiveSelectionForeground:lK,listInactiveFocusBackground:dK,listInactiveFocusOutline:uK,listHoverBackground:hK,listHoverForeground:fK,listDropBackground:gK,listSelectionOutline:$t,listHoverOutline:$t,listFilterWidgetBackground:pK,listFilterWidgetOutline:mK,listFilterWidgetNoMatchesOutline:_K,listFilterWidgetShadow:bK,treeIndentGuidesStroke:vK,tableColumnsBorder:CK,tableOddRowsBackgroundColor:yK,inputActiveOptionBorder:gC,inputActiveOptionForeground:mC,inputActiveOptionBackground:pC,inputBackground:h1,inputForeground:f1,inputBorder:g1,inputValidationInfoBackground:vA,inputValidationInfoForeground:CA,inputValidationInfoBorder:yA,inputValidationWarningBackground:wA,inputValidationWarningForeground:SA,inputValidationWarningBorder:xA,inputValidationErrorBackground:kA,inputValidationErrorForeground:LA,inputValidationErrorBorder:TA},jJ={shadowColor:po,borderColor:wK,foregroundColor:SK,backgroundColor:xK,selectionForegroundColor:kK,selectionBackgroundColor:LK,selectionBorderColor:TK,separatorColor:DK,scrollbarShadow:Ag,scrollbarSliderBackground:Fd,scrollbarSliderHoverBackground:Bd,scrollbarSliderActiveBackground:Wd};function $J(r,e,t){return wI(e,Object.assign(Object.assign({},jJ),t),r)}class zJ{constructor(e,t,n,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.themeService=s,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n;const i=f5(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{const o=e.getMenuClassName?e.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(ee(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",Z(this.block,he.MOUSE_DOWN,c=>c.stopPropagation()));const a=new Q,l=e.actionRunner||new Vf;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new fm(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add($J(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(Z(window,he.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(Z(window,he.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;const d=new aa(c);let u=d.target;if(!d.rightButton){for(;u;){if(u===s)return;u=u.parentElement}this.contextViewService.hideContextView(!0)}})),yo(a,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:s=>{var o;(o=e.onHide)===null||o===void 0||o.call(e,!!s),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},i,!!i)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Da(e.error)&&this.notificationService.error(e.error)}}var KJ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},up=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let hT=class extends j{constructor(e,t,n,i,s){super(),this._onDidShowContextMenu=new R,this._onDidHideContextMenu=new R,this.contextMenuHandler=new zJ(n,e,t,i,s)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var n;(n=e.onHide)===null||n===void 0||n.call(e,t),this._onDidHideContextMenu.fire()}})),uc.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};hT=KJ([up(0,No),up(1,xn),up(2,Qu),up(3,Mn),up(4,It)],hT);function qC(r){let e=JSON.parse(r);return e=fT(e),e}function fT(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return Se.revive(r);case 2:return new RegExp(r.source,r.flags);case 14:return new Date(r.source)}if(r instanceof Uy||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=fT(r[t],e+1);else for(const t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=fT(r[t],e+1))}return r}var ZC;(function(r){r[r.API=0]="API",r[r.USER=1]="USER"})(ZC||(ZC={}));var SI=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},YC=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Ad=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let gT=class{constructor(e){this._commandService=e}open(e,t){return Ad(this,void 0,void 0,function*(){if(!_I(e,He.command))return!1;if(!t?.allowCommands)return!0;typeof e=="string"&&(e=Se.parse(e));let n=[];try{n=qC(decodeURIComponent(e.query))}catch{try{n=qC(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};gT=SI([YC(0,Sn)],gT);let pT=class{constructor(e){this._editorService=e}open(e,t){return Ad(this,void 0,void 0,function*(){typeof e=="string"&&(e=Se.parse(e));const{selection:n,uri:i}=u9(e);return e=i,e.scheme===He.file&&(e=mY(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,source:t?.fromUserGesture?ZC.USER:ZC.API},t?.editorOptions)},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0})}};pT=SI([YC(0,bt)],pT);let mT=class{constructor(e,t){this._openers=new qi,this._validators=new qi,this._resolvers=new qi,this._resolvedUriTargets=new Pi(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new qi,this._defaultExternalOpener={openExternal:n=>Ad(this,void 0,void 0,function*(){return V2(n,He.http,He.https)?p5(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>Ad(this,void 0,void 0,function*(){return i?.openExternal||V2(n,He.mailto,He.http,He.https,He.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new gT(t)),this._openers.push(new pT(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return Ad(this,void 0,void 0,function*(){const i=typeof e=="string"?Se.parse(e):e,s=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(s,t)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return Ad(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return Ad(this,void 0,void 0,function*(){const n=typeof e=="string"?Se.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let s;if(typeof e=="string"&&n.toString()===i.toString()?s=e:s=encodeURI(i.toString(!0)),t?.allowContributedOpeners){const o=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:o},qe.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},qe.None)})}dispose(){this._validators.clear()}};mT=SI([YC(0,bt),YC(1,Sn)],mT);var Xt;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(Xt||(Xt={}));(function(r){function e(o,a){return a-o}r.compare=e;const t=Object.create(null);t[r.Error]=p("sev.error","Error"),t[r.Warning]=p("sev.warning","Warning"),t[r.Info]=p("sev.info","Info");function n(o){return t[o]||""}r.toString=n;function i(o){switch(o){case Zt.Error:return r.Error;case Zt.Warning:return r.Warning;case Zt.Info:return r.Info;case Zt.Ignore:return r.Hint}}r.fromSeverity=i;function s(o){switch(o){case r.Error:return Zt.Error;case r.Warning:return Zt.Warning;case r.Info:return Zt.Info;case r.Hint:return Zt.Ignore}}r.toSeverity=s})(Xt||(Xt={}));var XC;(function(r){const e="";function t(i){return n(i,!0)}r.makeKey=t;function n(i,s){const o=[e];return i.source?o.push(i.source.replace("¦","\\¦")):o.push(e),i.code?typeof i.code=="string"?o.push(i.code.replace("¦","\\¦")):o.push(i.code.value.replace("¦","\\¦")):o.push(e),i.severity!==void 0&&i.severity!==null?o.push(Xt.toString(i.severity)):o.push(e),i.message&&s?o.push(i.message.replace("¦","\\¦")):o.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?o.push(i.startLineNumber.toString()):o.push(e),i.startColumn!==void 0&&i.startColumn!==null?o.push(i.startColumn.toString()):o.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?o.push(i.endLineNumber.toString()):o.push(e),i.endColumn!==void 0&&i.endColumn!==null?o.push(i.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}r.makeKeyOptionalMessage=n})(XC||(XC={}));const Ia=tt("markerService");var GJ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class qJ extends j{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Ke(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let s=0;s<i.length;s++)this._markersData.set(i[s],e[s]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}let _T=class extends j{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new R),this._markerDecorations=new Pi,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new qJ(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const n=this._markerDecorations.get(e.uri);n&&(n.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===He.inMemory||e.uri.scheme===He.internal||e.uri.scheme===He.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=x.lift(t);if(t.severity===Xt.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(i===1||n.endColumn>=i)return n;const s=e.getWordAtPosition(n.getStartPosition());s&&(n=new x(n.startLineNumber,s.startColumn,n.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new x(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,s,o;switch(e.severity){case Xt.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case Xt.Warning:t="squiggly-warning",n=an(IG),i=20,o={color:an(AK),position:_r.Inline};break;case Xt.Info:t="squiggly-info",n=an(NG),i=10;break;case Xt.Error:default:t="squiggly-error",n=an(AG),i=30,o={color:an(EK),position:_r.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:yr.Right},minimap:o,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};_T=GJ([sO(0,en),sO(1,Ia)],_T);class gm{constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,t){return new gm(e,new QC(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new x(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,s,o]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new gm(this._startLineNumber,i),new gm(this._startLineNumber+o,s)]}applyEdit(e,t){const[n,i,s]=vu(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new B(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(t===0&&n===0)return;const o=e.lineNumber-this._startLineNumber;if(o<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();o>=a+1||this._tokens.acceptInsertText(o,e.column-1,t,n,i,s)}}class QC{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new x(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else if(s>e)n=i-1;else{let o=i;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new rO(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new rO(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<o;d++){const u=4*d,h=s[u],f=s[u+1],g=s[u+2],_=s[u+3];if((h>e||h===e&&g>=t)&&(h<n||h===n&&f<=i))l=!0;else{if(a===0&&(c=h),l){const b=4*a;s[b]=h-c,s[b+1]=f,s[b+2]=g,s[b+3]=_}a++}}return this._tokenCount=a,c}split(e,t,n,i){const s=this._tokens,o=this._tokenCount,a=[],l=[];let c=a,d=0,u=0;for(let h=0;h<o;h++){const f=4*h,g=s[f],_=s[f+1],b=s[f+2],v=s[f+3];if(g>e||g===e&&b>=t){if(g<n||g===n&&_<=i)continue;c!==l&&(c=l,d=0,u=g)}c[d++]=g-u,c[d++]=_,c[d++]=b,c[d++]=v}return[new QC(new Uint32Array(a)),new QC(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,i,s){const o=this._tokens,a=this._tokenCount,l=i-t;let c=0,d=!1;for(let u=0;u<a;u++){const h=4*u;let f=o[h],g=o[h+1],_=o[h+2];const b=o[h+3];if(f<t||f===t&&_<=n){c++;continue}else if(f===t&&g<n)f===i&&_>s?_-=s-n:_=n;else if(f===t&&g===n)if(f===i&&_>s)_-=s-n;else{d=!0;continue}else if(f<i||f===i&&g<s)if(f===i&&_>s)f===t?(g=n,_=g+(_-s)):(g=0,_=g+(_-s));else{d=!0;continue}else if(f>i){if(l===0&&!d){c=a;break}f-=l}else if(f===i&&g>=s)e&&f===0&&(g+=e,_+=e),f-=l,g-=s-n,_-=s-n;else throw new Error("Not possible!");const v=4*c;o[v]=f,o[v+1]=g,o[v+2]=_,o[v+3]=b,c++}this._tokenCount=c}acceptInsertText(e,t,n,i,s,o){const a=n===0&&i===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const u=4*d;let h=l[u],f=l[u+1],g=l[u+2];if(!(h<e||h===e&&g<t)){if(h===e&&g===t)if(a)g+=1;else continue;else if(h===e&&f<t&&t<g)n===0?g+=i:g=t;else{if(h===e&&f===t&&a)continue;if(h===e)if(h+=n,n===0)f+=i,g+=i;else{const _=g-f;f=s+(f-t),g=f+_}else h+=n}l[u]=h,l[u+1]=f,l[u+2]=g}}}}class rO{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var ZJ=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JS=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let bT=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new sl}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,i);let o;if(s)o=s.metadata,this._logService.getLevel()===go.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${ci.getForeground(o)}, fontStyle ${ci.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===go.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")o=2147483647;else{if(o=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;o|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;o|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;o|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;o|=u|8}if(d.foreground){const u=d.foreground<<15;o|=u|16}o===0&&(o=2147483647)}}else this._logService.getLevel()===go.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,o),this._logService.getLevel()===go.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${ci.getForeground(o)}, fontStyle ${ci.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,i,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${i} is outside the previous data (length ${s}).`))}};bT=ZJ([JS(1,It),JS(2,Qt),JS(3,Zr)],bT);function b9(r,e,t){const n=r.data,i=r.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),o=[];let a=0,l=1,c=0;for(;a<i;){const d=a;let u=Math.min(d+s,i);if(u<i){let C=u;for(;C-1>d&&n[5*C]===0;)C--;if(C-1===d){let y=u;for(;y+1<i&&n[5*y]===0;)y++;u=y}else u=C}let h=new Uint32Array((u-d)*4),f=0,g=0,_=0,b=0;for(;a<u;){const C=5*a,y=n[C],w=n[C+1],L=l+y|0,T=y===0?c+w|0:w,S=n[C+2],k=T+S|0,D=n[C+3],O=n[C+4];if(k<=T)e.warnInvalidLengthSemanticTokens(L,T+1);else if(_===L&&b>T)e.warnOverlappingSemanticTokens(L,T+1);else{const F=e.getMetadata(D,O,t);F!==2147483647&&(g===0&&(g=L),h[f]=L-g,h[f+1]=T,h[f+2]=k,h[f+3]=F,f+=4,_=L,b=k)}l=L,c=T,a++}f!==h.length&&(h=h.subarray(0,f));const v=gm.create(g,h);o.push(v)}return o}class YJ{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}class sl{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=sl._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<sl._SIZES.length?2/3*this._currentLength:0),this._elements=[],sl._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=sl._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<sl._SIZES.length?2/3*this._currentLength:0),this._elements=[],sl._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new YJ(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}sl._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function XJ(r){for(let e=0,t=r.length;e<t;e+=4){const n=r[e+0],i=r[e+1],s=r[e+2],o=r[e+3];r[e+0]=o,r[e+1]=s,r[e+2]=i,r[e+3]=n}}function QJ(r){const e=new Uint8Array(r.buffer,r.byteOffset,r.length*4);return BF()||XJ(e),Uy.wrap(e)}function v9(r){const e=new Uint32Array(JJ(r));let t=0;if(e[t++]=r.id,r.type==="full")e[t++]=1,e[t++]=r.data.length,e.set(r.data,t),t+=r.data.length;else{e[t++]=2,e[t++]=r.deltas.length;for(const n of r.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return QJ(e)}function JJ(r){let e=0;if(e+=1+1,r.type==="full")e+=1+r.data.length;else{e+=1,e+=(1+1+1)*r.deltas.length;for(const t of r.deltas)t.data&&(e+=t.data.length)}return e}var jc=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function N1(r){return r&&!!r.data}function C9(r){return r&&Array.isArray(r.edits)}class eee{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function y9(r,e){return r.has(e)}function tee(r,e){const t=r.orderedGroups(e);return t.length>0?t[0]:[]}function w9(r,e,t,n,i){return jc(this,void 0,void 0,function*(){const s=tee(r,e),o=yield Promise.all(s.map(a=>jc(this,void 0,void 0,function*(){let l,c=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,i)}catch(d){c=d,l=null}return(!l||!N1(l)&&!C9(l))&&(l=null),new eee(a,l,c)})));for(const a of o){if(a.error)throw a.error;if(a.tokens)return a}return o.length>0?o[0]:null})}function nee(r,e){const t=r.orderedGroups(e);return t.length>0?t[0]:null}class iee{constructor(e,t){this.provider=e,this.tokens=t}}function see(r,e){return r.has(e)}function S9(r,e){const t=r.orderedGroups(e);return t.length>0?t[0]:[]}function xI(r,e,t,n){return jc(this,void 0,void 0,function*(){const i=S9(r,e),s=yield Promise.all(i.map(o=>jc(this,void 0,void 0,function*(){let a;try{a=yield o.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){Jn(l),a=null}return(!a||!N1(a))&&(a=null),new iee(o,a)})));for(const o of s)if(o.tokens)return o;return s.length>0?s[0]:null})}rt.registerCommand("_provideDocumentSemanticTokensLegend",(r,...e)=>jc(void 0,void 0,void 0,function*(){const[t]=e;Lt(t instanceof Se);const n=r.get(en).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=r.get(be),s=nee(i,n);return s?s[0].getLegend():r.get(Sn).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));rt.registerCommand("_provideDocumentSemanticTokens",(r,...e)=>jc(void 0,void 0,void 0,function*(){const[t]=e;Lt(t instanceof Se);const n=r.get(en).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=r.get(be);if(!y9(i,n))return r.get(Sn).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield w9(i,n,null,null,qe.None);if(!s)return;const{provider:o,tokens:a}=s;if(!a||!N1(a))return;const l=v9({id:0,type:"full",data:a.data});return a.resultId&&o.releaseDocumentSemanticTokens(a.resultId),l}));rt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(r,...e)=>jc(void 0,void 0,void 0,function*(){const[t,n]=e;Lt(t instanceof Se);const i=r.get(en).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=r.get(be),o=S9(s,i);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!n||!x.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const a=yield xI(s,i,x.lift(n),qe.None);if(a)return a.provider.getLegend()}));rt.registerCommand("_provideDocumentRangeSemanticTokens",(r,...e)=>jc(void 0,void 0,void 0,function*(){const[t,n]=e;Lt(t instanceof Se),Lt(x.isIRange(n));const i=r.get(en).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=r.get(be),o=yield xI(s,i,x.lift(n),qe.None);if(!(!o||!o.tokens))return v9({id:0,type:"full",data:o.tokens.data})}));var kI=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ki=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function Gl(r){return r.toString()}function oO(r){const e=new Zy,t=r.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class ree{constructor(e,t,n){this._modelEventListeners=new Q,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const oee=Ti||Je?1:2;class aee{constructor(e,t,n,i,s,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let JC=class Bp extends j{constructor(e,t,n,i,s,o,a,l,c){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=i,this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=a,this._languageFeatureDebounceService=l,this._onModelAdded=this._register(new R),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new R),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new R),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new lee(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new CT(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,c))}static _readModelOptions(e,t){var n;let i=yi.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s=i;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let o=yi.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let a=oee;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=yi.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let d=yi.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let u=yi.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let h=yi.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:o,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:ar===3||ar===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let i=this._modelCreationOptionsByLanguageAndResource[e+t];if(!i){const s=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);i=Bp._readModelOptions({editor:s,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=i}return i}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this._models[s],a=o.model.getLanguageId(),l=o.model.uri,c=e[a+l],d=this.getCreationOptions(a,l,o.model.isForSimpleWidget);Bp._setModelOptionsForModel(o.model,d,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&mr(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Gl(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Gl(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Gl(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t,n,i),o=new Rl(e,t,s,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(Gl(n))){const c=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),u=oO(o)===c.sha1;if(u||c.sharesUndoRedoStack){for(const h of d.past)nl(h)&&h.matchesResource(n)&&h.setModel(o);for(const h of d.future)nl(h)&&h.matchesResource(n)&&h.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,h=>nl(h)&&h.matchesResource(n)),u&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Gl(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new ree(o,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,n,i=!1){let s;return t?(s=this._createModelData(e,t.languageId,n,i),this.setMode(s.model,t)):s=this._createModelData(e,br,n,i),this._onModelAdded.fire(s.model),s.model}setMode(e,t){if(!t)return;const n=this._models[Gl(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=Gl(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===He.file||e.scheme===He.vscodeRemote||e.scheme===He.vscodeUserData||e.scheme===He.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Gl(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)nl(c)&&c.matchesResource(e.uri)&&(s=!0,o+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)nl(c)&&c.matchesResource(e.uri)&&(s=!0,o+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=Bp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!i&&o>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>nl(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new aee(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,o,oO(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);Bp._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}};JC.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;JC=kI([Ki(0,ft),Ki(1,z4),Ki(2,It),Ki(3,Zr),Ki(4,x1),Ki(5,Qt),Ki(6,_n),Ki(7,Er),Ki(8,be)],JC);const LI="editor.semanticHighlighting";function vT(r,e,t){var n;const i=(n=t.getValue(LI,{overrideIdentifier:r.getLanguageId(),resource:r.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}let CT=class extends j{constructor(e,t,n,i,s,o){super(),this._watchers=Object.create(null),this._semanticStyling=e;const a=d=>{this._watchers[d.uri.toString()]=new f_(d,this._semanticStyling,n,s,o)},l=(d,u)=>{u.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const u=this._watchers[d.uri.toString()];vT(d,n,i)?u||a(d):u&&l(d,u)}};this._register(t.onModelAdded(d=>{vT(d,n,i)&&a(d)})),this._register(t.onModelRemoved(d=>{const u=this._watchers[d.uri.toString()];u&&l(d,u)})),this._register(i.onDidChangeConfiguration(d=>{d.affectsConfiguration(LI)&&c()})),this._register(n.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};CT=kI([Ki(1,en),Ki(2,It),Ki(3,ft),Ki(4,Er),Ki(5,be)],CT);class lee extends j{constructor(e,t,n){super(),this._themeService=e,this._languageService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new bT(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}class cee{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}let f_=class Sd extends j{constructor(e,t,n,i,s){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=t,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=i.for(this._provider,"DocumentSemanticTokens",{min:Sd.REQUEST_MIN_DELAY,max:Sd.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new Tt(()=>this._fetchDocumentSemanticTokensNow(),Sd.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const o=()=>{ut(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};o(),this._register(this._provider.onDidChange(()=>{o(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!y9(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}const e=new fi,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=w9(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const s=[],o=this._model.onDidChangeContent(l=>{s.push(l)}),a=new fs(!1);i.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:c,tokens:d}=l,u=this._semanticStyling.get(c);this._setDocumentSemanticTokens(c,d||null,u,s)}},l=>{l&&(Da(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||We(l),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),s.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,i,s){s=Math.min(s,n.length-i,e.length-t);for(let o=0;o<s;o++)n[i+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,o=()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),o();return}if(C9(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const h of t.edits)a+=(h.data?h.data.length:0)-h.deleteCount;const l=s.data,c=new Uint32Array(l.length+a);let d=l.length,u=c.length;for(let h=t.edits.length-1;h>=0;h--){const f=t.edits[h];if(f.start>l.length){n.warnInvalidEditStart(s.resultId,t.resultId,h,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const g=d-(f.start+f.deleteCount);g>0&&(Sd._copy(l,d-g,c,u-g,g),u-=g),f.data&&(Sd._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),d=f.start}d>0&&Sd._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(N1(t)){this._currentDocumentResponse=new cee(e,t.resultId,t.data);const a=b9(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);o()}};f_.REQUEST_MIN_DELAY=300;f_.REQUEST_MAX_DELAY=2e3;f_=kI([Ki(2,It),Ki(3,Er),Ki(4,be)],f_);const dee=new RegExp(`(\\\\)?\\$\\((${Gi.iconNameExpression}(?:${Gi.iconModifierExpression})?)\\)`,"g");function Jd(r){const e=new Array;let t,n=0,i=0;for(;(t=dee.exec(r))!==null;){i=t.index||0,e.push(r.substring(n,i)),n=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:uee({id:o}))}return n<r.length&&e.push(r.substring(n)),e}function uee(r){const e=ee("span");return e.classList.add(...Gi.asClassNameArray(r)),e}const hee={buttonBackground:W.fromHex("#0E639C"),buttonHoverBackground:W.fromHex("#006BB3"),buttonSeparator:W.white,buttonForeground:W.white};class aO extends j{constructor(e,t){super(),this._onDidClick=this._register(new R),this.options=t||Object.create(null),Ta(this.options,hee,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(kt.addTarget(this._element)),[he.CLICK,Bt.Tap].forEach(n=>{this._register(Z(this._element,n,i=>{if(!this.enabled){wt.stop(i);return}this._onDidClick.fire(i)}))}),this._register(Z(this._element,he.KEY_DOWN,n=>{const i=new jt(n);let s=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(n),s=!0):i.equals(9)&&(this._element.blur(),s=!0),s&&wt.stop(i,!0)})),this._register(Z(this._element,he.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(Z(this._element,he.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(fu(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.setHoverBackground()})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.applyStyles()})),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?Oc(this._element,...Jd(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const fee={badgeBackground:W.fromHex("#4D4D4D"),badgeForeground:W.fromHex("#FFFFFF")};class yT{constructor(e,t){this.count=0,this.options=t||Object.create(null),Ta(this.options,fee,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=q(e,ee(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=hr(this.countFormat,this.count),this.element.title=hr(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const lO="done",cO="active",ex="infinite",tx="infinite-long-running",dO="discrete",gee={progressBarBackground:W.fromHex("#0E70C0")};class M1 extends j{constructor(e,t){super(),this.options=t||Object.create(null),Ta(this.options,gee,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new Tt(()=>$s(this.element),0)),this.longRunningScheduler=this._register(new Tt(()=>this.infiniteLongRunning(),M1.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(cO,ex,tx,dO),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(lO),this.element.classList.contains(ex)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(dO,lO,tx),this.element.classList.add(cO,ex),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(tx)}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}M1.LONG_RUNNING_INFINITE_THRESHOLD=1e4;class TI{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const x9=new TI("id#");const nx={},pee=new TI("quick-input-button-icon-");function wT(r){if(!r)return;let e;const t=r.dark.toString();return nx[t]?e=nx[t]:(e=pee.nextId(),CL(`.${e}, .hc-light .${e}`,`background-image: ${gu(r.light||r.dark)}`),CL(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${gu(r.dark)}`),nx[t]=e),e}const mee={ctrlCmd:!1,alt:!1};var g_;(function(r){r[r.Blur=1]="Blur",r[r.Gesture=2]="Gesture",r[r.Other=3]="Other"})(g_||(g_={}));var io;(function(r){r[r.NONE=0]="NONE",r[r.FIRST=1]="FIRST",r[r.SECOND=2]="SECOND",r[r.LAST=3]="LAST"})(io||(io={}));function _ee(r,e={}){const t=DI(e);return t.textContent=r,t}function k9(r,e={}){const t=DI(e);return L9(t,vee(r,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function DI(r){const e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}class bee{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function L9(r,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(Hn(s,"click",o=>{t.callback(String(e.index),o)})),i=s}else e.type===8?i=document.createElement("br"):e.type===1&&(i=r);i&&r!==i&&r.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(s=>{L9(i,s,t,n)})}function vee(r,e){const t={type:1,children:[]};let n=0,i=t;const s=[],o=new bee(r);for(;!o.eos();){let a=o.next();const l=a==="\\"&&ST(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&Cee(a,e)&&a===o.peek()){o.advance(),i.type===2&&(i=s.pop());const c=ST(a,e);if(i.type===c||i.type===5&&c===6)i=s.pop();else{const d={type:c,children:[]};c===5&&(d.index=n,n++),i.children.push(d),s.push(i),i=d}}else if(a===`
`)i.type===2&&(i=s.pop()),i.children.push({type:8});else if(i.type!==2){const c={type:2,content:a};i.children.push(c),s.push(i),i=c}else i.content+=a}return i.type===2&&(i=s.pop()),t}function Cee(r,e){return ST(r,e)!==0}function ST(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class yee{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class wee{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new yee(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const hp=ee,See={inputBackground:W.fromHex("#3C3C3C"),inputForeground:W.fromHex("#CCCCCC"),inputValidationInfoBorder:W.fromHex("#55AAFF"),inputValidationInfoBackground:W.fromHex("#063B49"),inputValidationWarningBorder:W.fromHex("#B89500"),inputValidationWarningBackground:W.fromHex("#352A05"),inputValidationErrorBorder:W.fromHex("#BE1100"),inputValidationErrorBackground:W.fromHex("#5A1D1D")};class T9 extends Yr{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new R),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new R),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Ta(this.options,See,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=q(e,hp(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",o=q(this.element,hp(".ibwrapper"));if(this.input=q(o,hp(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=q(o,hp("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new a3(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),q(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Et(document,"selectionchange")),l=ve.filter(a.event,()=>{const c=document.getSelection();return c?.anchorNode===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Sa(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:vL(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Pr(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Pr(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=q(i,hp(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?k9(this.message.content,s):_ee(this.message.content,s);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",q(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=p("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=p("alertWarningMessage","Warning: {0}",this.message.content):n=p("alertInfoMessage","Info: {0}",this.message.content),di(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=vL(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;n!==null&&i!==null&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class D9 extends T9{constructor(e,t,n){const i=p({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or ⇅ ${i}`,o=` (⇅ ${i})`;super(e,t,n),this._onDidFocus=this._register(new R),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new R),this.onDidBlur=this._onDidBlur.event,this.history=new wee(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?s:o,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const d=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(o)||l(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,aC(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,aC(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const xee=ee;class kee extends j{constructor(e){super(),this.parent=e,this.onKeyDown=t=>Z(this.inputBox.inputElement,he.KEY_DOWN,n=>{t(new jt(n))}),this.onMouseDown=t=>Z(this.inputBox.inputElement,he.MOUSE_DOWN,n=>{t(new aa(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=q(this.parent,xee(".quick-input-box")),this.inputBox=this._register(new T9(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Zt.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Zt.Info?1:e===Zt.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Zt.Info?1:e===Zt.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class wu{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t?.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=q(e,ee("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=wu.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&mr(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(ee("span",void 0,...this.supportIcons?Jd(o):[o])),t=n.end}const i=this.text.substring(n.start,n.end),s=ee("span.highlight",void 0,...this.supportIcons?Jd(i):[i]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(ee("span",void 0,...this.supportIcons?Jd(n):[n]))}Oc(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{i=s===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=i),a.end>=o&&(a.end+=i));return n+=i,"⏎"})}}class ix{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class ey extends j{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new ix(q(e,ee(".monaco-icon-label")))),this.labelContainer=q(this.domNode.element,ee(".monaco-icon-label-container"));const n=q(this.labelContainer,ee("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new ix(q(this.labelContainer,ee("span.monaco-icon-description-container")))),t?.supportHighlights||t?.supportIcons?this.nameNode=new Dee(n,!!t.supportIcons):this.nameNode=new Lee(n),t?.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new wu(q(this.descriptionContainer.element,ee("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new ix(q(this.descriptionContainer.element,ee("span.label-description")))),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"];n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough")),this.domNode.className=i.join(" "),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof wu?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n?.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,n?.descriptionTitle||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)CQ(e,t);else{const i=G3(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class Lee{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&mr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=q(this.container,ee("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=t?.domId&&`${t?.domId}_${n}`;q(this.container,ee("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&q(this.container,ee("span.label-separator",void 0,t?.separator||"/"))}}}}function Tee(r,e,t){if(!t)return;let n=0;return r.map(i=>{const s={start:n,end:n+i.length},o=t.map(a=>_i.intersect(s,a)).filter(a=>!_i.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,o})}class Dee{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&mr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new wu(q(this.container,ee("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",i=Tee(e,n,t?.matches);for(let s=0;s<e.length;s++){const o=e[s],a=i?i[s]:void 0,l=t?.domId&&`${t?.domId}_${s}`,c=ee("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new wu(q(this.container,c),{supportIcons:this.supportIcons}).set(o,a,void 0,t?.labelEscapeNewLines),s<e.length-1&&q(c,ee("span.label-separator",void 0,n))}}}}const Av=ee;class EI{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=q(e,Av(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&EI.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(q(this.domNode,Av("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Fn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const i=vI.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(n?.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(n?.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(n?.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(n?.metaKey),i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,Boolean(n?.keyCode),"")}renderKey(e,t,n,i){q(e,this.createKeyElement(t,n?".highlight":"")),i&&q(e,Av("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){q(e,this.createKeyElement(p("unbound","Unbound")))}createKeyElement(e,t=""){const n=Av("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&mr(e.firstPart,t.firstPart)&&mr(e.chordPart,t.chordPart)}}const uO=new Cc(()=>{const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}});new Cc(()=>({collator:new Intl.Collator(void 0,{numeric:!0})}));new Cc(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function Eee(r,e,t=!1){const n=r||"",i=e||"",s=uO.value.collator.compare(n,i);return uO.value.collatorIsNumeric&&s===0&&n!==i?n<i?-1:1:s}function Aee(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),s=Iee(r,e,t);if(s)return s;const o=n.endsWith(t),a=i.endsWith(t);if(o!==a)return o?-1:1;const l=Eee(n,i);return l!==0?l:n.localeCompare(i)}function Iee(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),s=n.startsWith(t),o=i.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}var E9=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nee=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Ko=ee;class Mee{constructor(e){this.hidden=!1,this._onChecked=new R,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class gb{get templateId(){return gb.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=q(e,Ko(".quick-input-list-entry"));const n=q(t.entry,Ko("label.quick-input-list-label"));t.toDisposeTemplate.push(Hn(n,he.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=q(n,Ko("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Hn(t.checkbox,he.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const i=q(n,Ko(".quick-input-list-rows")),s=q(i,Ko(".quick-input-list-row")),o=q(i,Ko(".quick-input-list-row"));t.label=new ey(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=q(s,Ko(".quick-input-list-entry-keybinding"));t.keybinding=new EI(a,ar);const l=q(o,Ko(".quick-input-list-label-meta"));return t.detail=new ey(l,{supportHighlights:!0,supportIcons:!0}),t.separator=q(t.entry,Ko(".quick-input-list-separator")),t.actionBar=new Sa(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=ut(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(c=>n.checkbox.checked=c));const{labelHighlights:i,descriptionHighlights:s,detailHighlights:o}=e,a=Object.create(null);a.matches=i||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=s||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:o,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((c,d)=>{let u=c.iconClass||(c.iconPath?wT(c.iconPath):void 0);c.alwaysVisible&&(u=u?`${u} always-visible`:"always-visible");const h=new Ds(`id-${d}`,"",u,!0,()=>Nee(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return h.tooltip=c.tooltip||"",h}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=ut(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=ut(e.toDisposeElement),e.toDisposeTemplate=ut(e.toDisposeTemplate)}}gb.ID="listelement";class Ree{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return gb.ID}}var vn;(function(r){r[r.First=1]="First",r[r.Second=2]="Second",r[r.Last=3]="Last",r[r.Next=4]="Next",r[r.Previous=5]="Previous",r[r.NextPage=6]="NextPage",r[r.PreviousPage=7]="PreviousPage"})(vn||(vn={}));class AI{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new R,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new R,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new R,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new R,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new R,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new R,this.onKeyDown=this._onKeyDown.event,this._onLeave=new R,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=q(this.parent,Ko(".quick-input-list"));const i=new Ree,s=new Fee;this.list=n.createList("QuickInput",this.container,i,[new gb],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:s}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new jt(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(Je?o.metaKey:o.ctrlKey)&&this.list.setFocus(Ui(this.list.length));break;case 16:{const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break}case 18:{const l=this.list.getFocus();l.length===1&&l[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(Z(this.container,he.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ve.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return ve.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=ut(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,i,s)=>{var o,a,l;if(i.type!=="separator"){const c=s&&e[s-1],d=i.label&&i.label.replace(/\r?\n/g," "),u=_h(d).text.trim(),h=i.meta&&i.meta.replace(/\r?\n/g," "),f=i.description&&i.description.replace(/\r?\n/g," "),g=i.detail&&i.detail.replace(/\r?\n/g," "),_=i.ariaLabel||[d,f,g].map(v=>oH(v)).filter(v=>!!v).join(", "),b=this.parent.classList.contains("show-checkboxes");n.push(new Mee({hasCheckbox:b,index:s,item:i,saneLabel:d,saneSortLabel:u,saneMeta:h,saneAriaLabel:_,saneDescription:f,saneDetail:g,labelHighlights:(o=i.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=i.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=i.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,i,s)=>(n.set(i.item,s),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===vn.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=vn.First),e===vn.Previous&&this.list.getFocus()[0]===0&&(e=vn.Last),e===vn.Second&&this.list.length<2&&(e=vn.First),e){case vn.First:this.list.focusFirst();break;case vn.Second:this.list.focusNth(1);break;case vn.Last:this.list.focusLast();break;case vn.Next:this.list.focusNext();break;case vn.Previous:this.list.focusPrevious();break;case vn.NextPage:this.list.focusNextPage();break;case vn.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this.inputElements[i.index-1];i.separator=s&&s.type==="separator"?s:void 0});else{let i;this.elements.forEach(s=>{let o;this.matchOnLabelMode==="fuzzy"?o=this.matchOnLabel?as(vv(e,_h(s.saneLabel))):void 0:o=this.matchOnLabel?as(Oee(t,_h(s.saneLabel))):void 0;const a=this.matchOnDescription?as(vv(e,_h(s.saneDescription||""))):void 0,l=this.matchOnDetail?as(vv(e,_h(s.saneDetail||""))):void 0,c=this.matchOnMeta?as(vv(e,_h(s.saneMeta||""))):void 0;if(o||a||l||c?(s.labelHighlights=o,s.descriptionHighlights=a,s.detailHighlights=l,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const d=s.index&&this.inputElements[s.index-1];i=d&&d.type==="separator"?d:i,i&&!s.hidden&&(s.separator=i,i=void 0)}})}const n=this.elements.filter(i=>!i.hidden);if(this.sortByLabel&&e){const i=e.toLowerCase();n.sort((s,o)=>Pee(s,o,i))}return this.elementsToIndexes=n.reduce((i,s,o)=>(i.set(s.item,o),i),new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=ut(this.elementDisposables),this.disposables=ut(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}E9([In],AI.prototype,"onDidChangeFocus",null);E9([In],AI.prototype,"onDidChangeSelection",null);function Oee(r,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return hO(r,t);const i=By(t," "),s=t.length-i.length,o=hO(r,i);if(o)for(const a of o){const l=n[a.start+s]+s;a.start+=l,a.end+=l}return o}function hO(r,e){const t=e.toLowerCase().indexOf(r.toLowerCase());return t!==-1?[{start:t,end:t+r.length}]:null}function Pee(r,e,t){const n=r.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:Aee(r.saneSortLabel,e.saneSortLabel,t)}class Fee{getWidgetAriaLabel(){return p("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}var fO=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Os=ee,xT={iconClass:m.quickInputBack.classNames,tooltip:p("quickInput.back","Back"),handle:-1};class R1 extends j{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=R1.noPromptMessage,this._severity=Zt.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new R),this.onDidHideEmitter=this._register(new R),this.onDisposeEmitter=this._register(new R),this.visibleDisposables=this._register(new Q),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!_a;this._ignoreFocusOut=e&&!_a,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=g_.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Js,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const i=this.buttons.filter(o=>o===xT);this.ui.leftActionBar.push(i.map((o,a)=>{const l=new Ds(`id-${a}`,"",o.iconClass||wT(o.iconPath),!0,()=>fO(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const s=this.buttons.filter(o=>o!==xT);this.ui.rightActionBar.push(s.map((o,a)=>{const l=new Ds(`id-${a}`,"",o.iconClass||wT(o.iconPath),!0,()=>fO(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Oc(this.ui.message,...Jd(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?p("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Zt.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}R1.noPromptMessage=p("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class p_ extends R1{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new R),this.onWillAcceptEmitter=this._register(new R),this.onDidAcceptEmitter=this._register(new R),this.onDidCustomEmitter=this._register(new R),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?io.NONE:io.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new R),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new R),this.onDidTriggerItemButtonEmitter=this._register(new R),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?mee:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(vn.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(vn.Next),this.canSelectMany&&this.ui.list.domFocus(),wt.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(vn.Previous):this.ui.list.focus(vn.Last),this.canSelectMany&&this.ui.list.domFocus(),wt.stop(e,!0);break;case 12:this.ui.list.focus(vn.NextPage),this.canSelectMany&&this.ui.list.domFocus(),wt.stop(e,!0);break;case 11:this.ui.list.focus(vn.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),wt.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(vn.First),wt.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(vn.Last),wt.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&qs(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&qs(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&qs(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Z(this.ui.container,he.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new jt(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let i=this.ariaLabel;if(i||(i=this.placeholder||p_.DEFAULT_ARIA_LABEL,this.title&&(i+=` - ${this.title}`)),this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case io.NONE:this._itemActivation=io.FIRST;break;case io.SECOND:this.ui.list.focus(vn.Second),this._itemActivation=io.FIRST;break;case io.LAST:this.ui.list.focus(vn.Last),this._itemActivation=io.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(vn.First)),this.keepScrollPosition&&(this.scrollTop=e)}}p_.DEFAULT_ARIA_LABEL=p("quickInputBox.ariaLabel","Type to narrow down results.");class O1 extends j{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new R),this.onDidCustomEmitter=this._register(new R),this.onDidTriggerButtonEmitter=this._register(new R),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new R),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new R),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(Z(window,he.KEY_DOWN,e,!0)),this._register(Z(window,he.KEY_UP,e,!0)),this._register(Z(window,he.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=q(this.parentElement,Os(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Sr(e),n=q(e,Os(".quick-input-titlebar")),i=this._register(new Sa(n));i.domNode.classList.add("quick-input-left-action-bar");const s=q(n,Os(".quick-input-title")),o=this._register(new Sa(n));o.domNode.classList.add("quick-input-right-action-bar");const a=q(e,Os(".quick-input-description")),l=q(e,Os(".quick-input-header")),c=q(l,Os("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",p("quickInput.checkAll","Toggle all checkboxes")),this._register(Hn(c,he.CHANGE,O=>{const F=c.checked;S.setAllVisibleChecked(F)})),this._register(Z(c,he.CLICK,O=>{(O.x||O.y)&&f.setFocus()}));const d=q(l,Os(".quick-input-description")),u=q(l,Os(".quick-input-and-message")),h=q(u,Os(".quick-input-filter")),f=this._register(new kee(h));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=q(h,Os(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const _=new yT(g,{countFormat:p({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),b=q(h,Os(".quick-input-count"));b.setAttribute("aria-live","polite");const v=new yT(b,{countFormat:p({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),C=q(l,Os(".quick-input-action")),y=new aO(C);y.label=p("ok","OK"),this._register(y.onDidClick(O=>{this.onDidAcceptEmitter.fire()}));const w=q(l,Os(".quick-input-action")),L=new aO(w);L.label=p("custom","Custom"),this._register(L.onDidClick(O=>{this.onDidCustomEmitter.fire()}));const T=q(u,Os(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new AI(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked(O=>{c.checked=O})),this._register(S.onChangedVisibleCount(O=>{_.setCount(O)})),this._register(S.onChangedCheckedCount(O=>{v.setCount(O)})),this._register(S.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof p_&&this.controller.canSelectMany&&S.clearFocus()},0)})),this._register(S.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const k=new M1(e);k.getContainer().classList.add("quick-input-progress");const D=fu(e);return this._register(D),this._register(Z(e,he.FOCUS,O=>{this.previousFocusElement=O.relatedTarget instanceof HTMLElement?O.relatedTarget:void 0},!0)),this._register(D.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(g_.Blur),this.previousFocusElement=void 0})),this._register(Z(e,he.FOCUS,O=>{f.setFocus()})),this._register(Z(e,he.KEY_DOWN,O=>{const F=new jt(O);switch(F.keyCode){case 3:wt.stop(O,!0),this.onDidAcceptEmitter.fire();break;case 9:wt.stop(O,!0),this.hide(g_.Gesture);break;case 2:if(!F.altKey&&!F.ctrlKey&&!F.metaKey){const U=[".action-label.codicon"];e.classList.contains("show-checkboxes")?U.push("input"):U.push("input[type=text]"),this.getUI().list.isDisplayed()&&U.push(".monaco-list");const K=e.querySelectorAll(U.join(", "));F.shiftKey&&F.target===K[0]?(wt.stop(O,!0),K[K.length-1].focus()):!F.shiftKey&&F.target===K[K.length-1]&&(wt.stop(O,!0),K[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:s,description1:a,description2:d,rightActionBar:o,checkAll:c,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:_,countContainer:b,count:v,okContainer:C,ok:y,message:T,customButtonContainer:w,customButton:L,list:S,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:O=>this.show(O),hide:()=>this.hide(),setVisibilities:O=>this.setVisibilities(O),setComboboxAccessibility:O=>this.setComboboxAccessibility(O),setEnabled:O=>this.setEnabled(O),setContextKey:O=>this.options.setContextKey(O)},this.updateStyles(),this.ui}pick(e,t={},n=qe.None){return new Promise((i,s)=>{let o=d=>{var u;o=i,(u=t.onKeyMods)===null||u===void 0||u.call(t,a.keyMods),i(d)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(o(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),g=a.activeItems.filter(b=>b!==f[0]),_=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=_}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{ut(c),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{s(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new p_(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Zt.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Oc(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const i=this.options.backKeybindingLabel();xT.tooltip=i?p("quickInput.backWithKeybinding","Back ({0})",i):p("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!i){let s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=as(s.parentElement);s?.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,O1.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}O1.MAX_WIDTH=600;class Bee{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}class bh extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function gO(r,e){const t=[];for(const n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;const i=_i.intersect(r,n.range);_i.isEmpty(i)||t.push({range:i,size:n.size})}return t}function kT({start:r,end:e},t){return{start:r+t,end:e+t}}function Wee(r){const e=[];let t=null;for(const n of r){const i=n.range.start,s=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:i,end:s},size:o},e.push(t)}return e}function Vee(...r){return Wee(r.reduce((e,t)=>e.concat(t),[]))}class pO{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,s=gO({start:0,end:e},this.groups),o=gO({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:kT(l.range,i),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=Vee(s,a,o),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,o=n+s*i.size;if(e<o)return t+Math.floor((e-n)/i.size);t+=s,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,o=n+s;if(e<o)return t+(e-n)*i.size;t+=s*i.size,n=o}return-1}}function Hee(r){var e;try{(e=r.parentElement)===null||e===void 0||e.removeChild(r)}catch{}}class Uee{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=ee(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:s}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),Hee(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var sd=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const Ho={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class pb{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class jee{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class $ee{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function zee(r,e){return Array.isArray(r)&&Array.isArray(e)?qs(r,e):r===e}class Kee{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Xr{constructor(e,t,n,i=Ho){var s,o,a,l,c,d,u,h,f,g;if(this.virtualDelegate=t,this.domId=`list_id_${++Xr.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Ca(50),this.splicing=!1,this.dragOverAnimationStopDisposable=j.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=j.None,this.onDragLeaveTimeout=j.None,this.disposables=new Q,this._onDidChangeContentHeight=new R,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new pO;for(const b of n)this.renderers.set(b.templateId,b);this.cache=this.disposables.add(new Uee(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=(s=i.horizontalScrolling)!==null&&s!==void 0?s:Ho.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.accessibilityProvider=new Kee(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((o=i.transformOptimization)!==null&&o!==void 0?o:Ho.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(kt.addTarget(this.rowsContainer)),this.scrollable=new lb({forceIntegerValues:!0,smoothScrollDuration:(a=i.smoothScrolling)!==null&&a!==void 0&&a?125:0,scheduleAtNextAnimationFrame:b=>To(b)}),this.scrollableElement=this.disposables.add(new WA(this.rowsContainer,{alwaysConsumeMouseWheel:(l=i.alwaysConsumeMouseWheel)!==null&&l!==void 0?l:Ho.alwaysConsumeMouseWheel,horizontal:1,vertical:(c=i.verticalScrollMode)!==null&&c!==void 0?c:Ho.verticalScrollMode,useShadows:(d=i.useShadows)!==null&&d!==void 0?d:Ho.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Z(this.rowsContainer,Bt.Change,b=>this.onTouchChange(b))),this.disposables.add(Z(this.scrollableElement.getDomNode(),"scroll",b=>b.target.scrollTop=0)),this.disposables.add(Z(this.domNode,"dragover",b=>this.onDragOver(this.toDragEvent(b)))),this.disposables.add(Z(this.domNode,"drop",b=>this.onDrop(this.toDragEvent(b)))),this.disposables.add(Z(this.domNode,"dragleave",b=>this.onDragLeave(this.toDragEvent(b)))),this.disposables.add(Z(this.domNode,"dragend",b=>this.onDragEnd(b))),this.setRowLineHeight=(u=i.setRowLineHeight)!==null&&u!==void 0?u:Ho.setRowLineHeight,this.setRowHeight=(h=i.setRowHeight)!==null&&h!==void 0?h:Ho.setRowHeight,this.supportDynamicHeights=(f=i.supportDynamicHeights)!==null&&f!==void 0?f:Ho.supportDynamicHeights,this.dnd=(g=i.dnd)!==null&&g!==void 0?g:Ho.dnd,this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:pS(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=_i.intersect(i,s),a=new Map;for(let T=o.end-1;T>=o.start;T--){const S=this.items[T];if(S.dragStartDisposable.dispose(),S.checkedDisposable.dispose(),S.row){let k=a.get(S.templateId);k||(k=[],a.set(S.templateId,k));const D=this.renderers.get(S.templateId);D&&D.disposeElement&&D.disposeElement(S.element,T,S.row.templateData,S.size),k.push(S.row)}S.row=null}const l={start:e+t,end:this.items.length},c=_i.intersect(l,i),d=_i.relativeComplement(l,i),u=n.map(T=>({id:String(this.itemId++),element:T,templateId:this.virtualDelegate.getTemplateId(T),size:this.virtualDelegate.getHeight(T),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(T),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:j.None,checkedDisposable:j.None}));let h;e===0&&t>=this.items.length?(this.rangeMap=new pO,this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),_=kT(c,f),b=_i.intersect(g,_);for(let T=b.start;T<b.end;T++)this.updateItemInDOM(this.items[T],T);const v=_i.relativeComplement(_,g);for(const T of v)for(let S=T.start;S<T.end;S++)this.removeItemFromDOM(S);const C=d.map(T=>kT(T,f)),w=[{start:e,end:e+n.length},...C].map(T=>_i.intersect(g,T)),L=this.getNextToLastElement(w);for(const T of w)for(let S=T.start;S<T.end;S++){const k=this.items[S],D=a.get(k.templateId),O=D?.pop();this.insertItemInDOM(S,L,O)}for(const T of a.values())for(const S of T)this.cache.release(S);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(T=>T.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=To(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:O$(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:pS(this.domNode)})}render(e,t,n,i,s,o=!1){const a=this.getRenderRange(t,n),l=_i.relativeComplement(a,e),c=_i.relativeComplement(e,a),d=this.getNextToLastElement(l);if(o){const u=_i.intersect(e,a);for(let h=u.start;h<u.end;h++)this.updateItemInDOM(this.items[h],h)}for(const u of l)for(let h=u.start;h<u.end;h++)this.insertItemInDOM(h,d);for(const u of c)for(let h=u.start;h<u.end;h++)this.removeItemFromDOM(h);i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];i.row||(i.row=n??this.cache.alloc(i.templateId));const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(i.element);if(typeof o=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){const c=d=>i.row.domNode.setAttribute("aria-checked",String(!!d));c(o.value),i.checkedDisposable=o.onDidChange(c)}i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error(`No renderer found for template id ${i.templateId}`);a?.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=Z(i.row.domNode,"dragstart",c=>this.onDragStart(i.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Ys?"-moz-fit-content":"fit-content",e.width=pS(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return ve.map(this.disposables.add(new Et(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return ve.map(this.disposables.add(new Et(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return ve.filter(ve.map(this.disposables.add(new Et(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return ve.map(this.disposables.add(new Et(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return ve.map(this.disposables.add(new Et(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return ve.any(ve.map(this.disposables.add(new Et(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),ve.map(this.disposables.add(new Et(this.domNode,Bt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return ve.map(this.disposables.add(new Et(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return ve.map(this.disposables.add(new Et(this.rowsContainer,Bt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var i,s;if(!n.dataTransfer)return;const o=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(ub.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(o,n)),typeof a>"u"&&(a=String(o.length));const l=ee(".monaco-drag-image");l.textContent=a,document.body.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>document.body.removeChild(l),0)}this.currentDragData=new pb(o),md.CurrentDragAndDropData=new jee(o),(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,this.currentDragData,n)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),md.CurrentDragAndDropData&&md.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(md.CurrentDragAndDropData)this.currentDragData=md.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new $ee}const n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&n.effect===0?"copy":"move";let i;if(typeof n!="boolean"&&n.feedback?i=n.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=El(i).filter(s=>s>=-1&&s<this.length).sort((s,o)=>s-o),i=i[0]===-1?[-1]:i,zee(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Ke(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of i){const o=this.items[s];o.dropTarget=!0,(t=o.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Ke(()=>{var s;for(const o of i){const a=this.items[o];a.dropTarget=!1,(s=a.row)===null||s===void 0||s.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=du(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,md.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,md.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=j.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=c5(this.domNode).top;this.dragOverAnimationDisposable=U$(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=du(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const s=Number(i);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,o;e===this.elementTop(i.start)?(s=i.start,o=0):i.end-i.start>1&&(s=i.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=_i.relativeComplement(i,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=_i.relativeComplement(l,i);for(const h of u)for(let f=h.start;f<h.end;f++){const g=f+1,_=g<this.items.length?this.items[g].row:null,b=_?_.domNode:null;this.insertItemInDOM(f,b)}for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof s=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(s)-o+h;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,n,i;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(s.element);if(c!==null){const d=s.size;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const o=s.size;if(!this.setRowHeight&&s.row){const c=s.row.domNode.offsetHeight;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-o}const a=this.cache.alloc(s.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(s.templateId);return l&&(l.renderElement(s.element,e,a.templateData,void 0),(t=l.disposeElement)===null||t===void 0||t.call(l,s.element,e,a.templateData,void 0)),s.size=a.domNode.offsetHeight,(i=(n=this.virtualDelegate).setDynamicHeight)===null||i===void 0||i.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),s.size-o}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const n=this.renderers.get(t.row.templateId);n&&((e=n.disposeElement)===null||e===void 0||e.call(n,t.element,-1,t.row.templateData,void 0),n.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),ut(this.disposables)}}Xr.InstanceCount=0;sd([In],Xr.prototype,"onMouseClick",null);sd([In],Xr.prototype,"onMouseDblClick",null);sd([In],Xr.prototype,"onMouseMiddleClick",null);sd([In],Xr.prototype,"onMouseDown",null);sd([In],Xr.prototype,"onMouseOver",null);sd([In],Xr.prototype,"onContextMenu",null);sd([In],Xr.prototype,"onTouchStart",null);sd([In],Xr.prototype,"onTap",null);var eh=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},mO=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Gee{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(s=>s.templateData===n);if(i>=0){const s=this.renderedElements[i];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let ty=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new R,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new Gee(this)}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...n.map((c,d)=>c?d+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=o).map(c=>c+s)],l=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(i=this.sortedIndexes.find(d=>d>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(bO),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=LT(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return IE(this.sortedIndexes,e,bO)>=0}dispose(){ut(this._onChange)}};eh([In],ty.prototype,"renderer",null);class qee extends ty{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class sx{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),s=n.map(o=>i.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,s)}}function Su(r){return r.tagName==="INPUT"||r.tagName==="TEXTAREA"}function nf(r){return r.classList.contains("monaco-editor")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:nf(r.parentElement)}function A9(r){return r.tagName==="A"&&r.classList.contains("monaco-button")||r.tagName==="DIV"&&r.classList.contains("monaco-button-dropdown")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:A9(r.parentElement)}class I9{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Q,this.multipleSelectionDisposables=new Q,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(Je?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(ve.chain(this.disposables.add(new Et(this.view.domNode,"keydown")).event).filter(e=>!Su(e.target)).map(e=>new jt(e)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(Je?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Ui(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}eh([In],I9.prototype,"onKeyDown",null);var Lc;(function(r){r[r.Automatic=0]="Automatic",r[r.Trigger=1]="Trigger"})(Lc||(Lc={}));var sf;(function(r){r[r.Idle=0]="Idle",r[r.Typing=1]="Typing"})(sf||(sf={}));const Zee=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=93&&r.keyCode<=102||r.keyCode>=80&&r.keyCode<=90}};class Yee{constructor(e,t,n,i,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=i,this.delegate=s,this.enabled=!1,this.state=sf.Idle,this.mode=Lc.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Q,this.disposables=new Q,this.updateOptions(e.options)}updateOptions(e){var t,n;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(n=e.typeNavigationMode)!==null&&n!==void 0?n:Lc.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(ve.chain(this.enabledDisposables.add(new Et(this.view.domNode,"keydown")).event)).filter(s=>!Su(s.target)).filter(()=>this.mode===Lc.Automatic||this.triggered).map(s=>new jt(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(GL).map(s=>s.browserEvent.key).event,n=ve.debounce(t,()=>null,800,void 0,void 0,this.enabledDisposables);ve.reduce(ve.any(t,n),(s,o)=>o===null?null:(s||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&di(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=sf.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===sf.Idle?1:0;this.state=sf.Typing;for(let s=0;s<this.list.length;s++){const o=(n+s+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l>"u"||L1(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class Xee{constructor(e,t){this.list=e,this.view=t,this.disposables=new Q,this.disposables.add(ve.chain(this.disposables.add(new Et(t.domNode,"keydown")).event)).filter(i=>!Su(i.target)).map(i=>new jt(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const s=window.getComputedStyle(i);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function N9(r){return Je?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function M9(r){return r.browserEvent.shiftKey}function Qee(r){return r instanceof MouseEvent&&r.button===2}const _O={isSelectionSingleChangeEvent:N9,isSelectionRangeChangeEvent:M9};class R9{constructor(e){this.list=e,this.disposables=new Q,this._onPointer=new R,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||_O),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(kt.addTarget(e.getHTMLElement()))),ve.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||_O))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){nf(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(nf(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Su(e.browserEvent.target)||nf(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Qee(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Su(e.browserEvent.target)||nf(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const d=this.list.getFocus()[0];n=d??t,this.list.setAnchor(n)}const i=Math.min(n,t),s=Math.max(n,t),o=Ui(i,s+1),a=this.list.getSelection(),l=tte(LT(a,[n]),n);if(l.length===0)return;const c=LT(o,nte(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),s=i.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class O9{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):Je||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const Jee={listFocusBackground:W.fromHex("#7FB0D0"),listActiveSelectionBackground:W.fromHex("#0E639C"),listActiveSelectionForeground:W.fromHex("#FFFFFF"),listActiveSelectionIconForeground:W.fromHex("#FFFFFF"),listFocusAndSelectionOutline:W.fromHex("#90C2F9"),listFocusAndSelectionBackground:W.fromHex("#094771"),listFocusAndSelectionForeground:W.fromHex("#FFFFFF"),listInactiveSelectionBackground:W.fromHex("#3F3F46"),listInactiveSelectionIconForeground:W.fromHex("#FFFFFF"),listHoverBackground:W.fromHex("#2A2D2E"),listDropBackground:W.fromHex("#383B3D"),treeIndentGuidesStroke:W.fromHex("#a9a9a9"),tableColumnsBorder:W.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:W.fromHex("#cccccc").transparent(.04)},ete={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function tte(r,e){const t=r.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function LT(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function nte(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}const bO=(r,e)=>r-e;class ite{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let s=0;for(const o of this.renderers)o.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){var s;let o=0;for(const a of this.renderers)(s=a.disposeElement)===null||s===void 0||s.call(a,e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class ste{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class rte{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var s,o;(o=(s=this.dnd).onDragLeave)===null||o===void 0||o.call(s,e,t,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}class Ro{constructor(e,t,n,i,s=ete){var o,a,l,c;this.user=e,this._options=s,this.focus=new ty("focused"),this.anchor=new ty("anchor"),this.eventBufferer=new FE,this._ariaLabel="",this.disposables=new Q,this._onDidDispose=new R,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new qee(d!=="listbox"),Ta(s,Jee,!1);const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(u.push(new ste(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(f=>new ite(f.templateId,[...u,f]));const h=Object.assign(Object.assign({},s),{dnd:s.dnd&&new rte(this,s.dnd)});if(this.view=new Xr(t,n,i,h),this.view.domNode.setAttribute("role",d),s.styleController)this.styleController=s.styleController(this.view.domId);else{const f=Sr(this.view.domNode);this.styleController=new O9(f,this.view.domId)}if(this.spliceable=new Bee([new sx(this.focus,this.view,s.identityProvider),new sx(this.selection,this.view,s.identityProvider),new sx(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Xee(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new I9(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const f=s.keyboardNavigationDelegate||Zee;this.typeNavigationController=new Yee(this,this.view,s.keyboardNavigationLabelProvider,(c=s.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return ve.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return ve.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(ve.chain(this.disposables.add(new Et(this.view.domNode,"keydown")).event)).map(s=>new jt(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(GL).filter(()=>!1).event,n=this.disposables.add(ve.chain(this.disposables.add(new Et(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(s=>new jt(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(GL).map(({browserEvent:s})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:s}}).event,i=this.disposables.add(ve.chain(this.view.onContextMenu)).filter(s=>!e).map(({element:s,index:o,browserEvent:a})=>({element:s,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return ve.any(t,n,i)}get onKeyDown(){return this.disposables.add(new Et(this.view.domNode,"keydown")).event}get onDidFocus(){return ve.signal(this.disposables.add(new Et(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new R9(this)}updateOptions(e={}){var t,n;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)===null||n===void 0||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new bh(this.user,`Invalid start index: ${e}`);if(t<0)throw new bh(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new bh(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new bh(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return zF(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new bh(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,i);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return mO(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){const s=this.findPreviousIndex(n,!1,t);s>-1&&i!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let o=s+this.view.renderHeight;n>i&&(o-=this.view.elementHeight(n)),this.view.setScrollTop(o),this.view.getScrollTop()!==s&&(this.setFocus([]),yield Rc(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return mO(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const s=this.getFocus()[0];if(s!==n&&(s===void 0||s>=n)){const o=this.findNextIndex(n,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([n],e)}else{const o=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==o&&(this.setFocus([]),yield Rc(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new bh(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(Ic(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*ys(t,0,1)+i)}else{const o=i+s,a=n+this.view.renderHeight;i<n&&o>=a||(i<n||o>=a&&s>=this.view.renderHeight?this.view.setScrollTop(i):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}eh([In],Ro.prototype,"onDidChangeFocus",null);eh([In],Ro.prototype,"onDidChangeSelection",null);eh([In],Ro.prototype,"onContextMenu",null);eh([In],Ro.prototype,"onKeyDown",null);eh([In],Ro.prototype,"onDidFocus",null);class ote{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:j.None}}renderElement(e,t,n,i){if(n.disposable&&n.disposable.dispose(),!n.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,n.data,i);const o=new fi,a=s.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class ate{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function lte(r,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new ate(r,e.accessibilityProvider)})}class cte{constructor(e,t,n,i,s={}){const o=()=>this.model,a=i.map(l=>new ote(l,o));this.list=new Ro(e,t,n,a,lte(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ve.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return ve.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return ve.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Ui(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const dte={separatorBorder:W.transparent};class P9{constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,i;e!==this.visible&&(e?(this.size=ys(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(i=(n=this.view).setVisible)===null||i===void 0||i.call(n,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class ute extends P9{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class hte extends P9{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Xa;(function(r){r[r.Idle=0]="Idle",r[r.Busy=1]="Busy"})(Xa||(Xa={}));var ny;(function(r){r.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}r.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}r.Invisible=t})(ny||(ny={}));class F9 extends j{constructor(e,t={}){var n,i,s,o,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Xa.Idle,this._onDidSashChange=this._register(new R),this._onDidSashReset=this._register(new R),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=q(this.el,ee(".sash-container")),this.viewContainer=ee(".split-view-container"),this.scrollable=new lb({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:To}),this.scrollableElement=this._register(new WA(this.viewContainer,{vertical:this.orientation===0?(o=t.scrollbarVisibility)!==null&&o!==void 0?o:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),q(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||dte),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,c)=>{const d=xs(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},u=l.view;this.doAddView(u,d,c,!0)}),this.contentSize=this.viewItems.reduce((l,c)=>l+c.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let i=0;i<this.viewItems.length;i++){const s=this.viewItems[i];s.size=ys(Math.round(this.proportions[i]*e),s.minimumSize,s.maximumSize)}else{const i=Ui(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),s=yo(Z(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),Z(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const _=this.viewItems[i];d=(_.minimumSize-_.size)/2,u=(_.maximumSize-_.size)/2}else{const _=this.viewItems[i+1];d=(_.size-_.maximumSize)/2,u=(_.size-_.minimumSize)/2}let h,f;if(!l){const g=Ui(i,-1),_=Ui(i+1,this.viewItems.length),b=g.reduce((k,D)=>k+(this.viewItems[D].minimumSize-c[D]),0),v=g.reduce((k,D)=>k+(this.viewItems[D].viewMaximumSize-c[D]),0),C=_.length===0?Number.POSITIVE_INFINITY:_.reduce((k,D)=>k+(c[D]-this.viewItems[D].minimumSize),0),y=_.length===0?Number.NEGATIVE_INFINITY:_.reduce((k,D)=>k+(c[D]-this.viewItems[D].viewMaximumSize),0),w=Math.max(b,y),L=Math.min(C,v),T=this.findFirstSnapIndex(g),S=this.findFirstSnapIndex(_);if(typeof T=="number"){const k=this.viewItems[T],D=Math.floor(k.viewMinimumSize/2);h={index:T,limitDelta:k.visible?w-D:w+D,size:k.size}}if(typeof S=="number"){const k=this.viewItems[S],D=Math.floor(k.viewMinimumSize/2);f={index:S,limitDelta:k.visible?L+D:L-D,size:k.size}}}this.sashDragState={start:a,current:a,index:i,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:s}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:s,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-n,u=this.resize(t,d,i,void 0,void 0,o,a,l,c);if(s){const h=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),g=h?t:t+1,_=this.viewItems[g],b=_.size-_.maximumSize,v=_.size-_.minimumSize,C=h?t-1:t+1;this.resize(C,-u,f,void 0,void 0,b,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ys(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==Xa.Idle)throw new Error("Cant modify splitview");if(this.state=Xa.Busy,e<0||e>=this.viewItems.length)return;const n=Ui(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=ys(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(i,s),this.state=Xa.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=ys(n,a.minimumSize,a.maximumSize);const i=Ui(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==Xa.Idle)throw new Error("Cant modify splitview");this.state=Xa.Busy;const s=ee(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const o=e.onDidChange(h=>this.onViewChange(d,h)),a=Ke(()=>this.viewContainer.removeChild(s)),l=yo(o,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const d=this.orientation===0?new ute(s,e,c,l):new hte(s,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new bi(this.sashContainer,{getHorizontalSashTop:k=>this.getSashPosition(k),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},h),{orientation:1})):new bi(this.sashContainer,{getVerticalSashLeft:k=>this.getSashPosition(k),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},h),{orientation:0})),g=this.orientation===0?k=>({sash:f,start:k.startY,current:k.currentY,alt:k.altKey}):k=>({sash:f,start:k.startX,current:k.currentX,alt:k.altKey}),b=ve.map(f.onDidStart,g)(this.onSashStart,this),C=ve.map(f.onDidChange,g)(this.onSashChange,this),w=ve.map(f.onDidEnd,()=>this.sashItems.findIndex(k=>k.sash===f))(this.onSashEnd,this),L=f.onDidReset(()=>{const k=this.sashItems.findIndex(K=>K.sash===f),D=Ui(k,-1),O=Ui(k+1,this.viewItems.length),F=this.findFirstSnapIndex(D),U=this.findFirstSnapIndex(O);typeof F=="number"&&!this.viewItems[F].visible||typeof U=="number"&&!this.viewItems[U].visible||this._onDidSashReset.fire(k)}),T=yo(b,C,w,L,f),S={sash:f,disposable:T};this.sashItems.splice(n-1,0,S)}s.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),i||this.relayout([n],u),this.state=Xa.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,s)=>i+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),i,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=Ui(e,-1),u=Ui(e+1,this.viewItems.length);if(s)for(const S of s)Kw(d,S),Kw(u,S);if(i)for(const S of i)Ub(d,S),Ub(u,S);const h=d.map(S=>this.viewItems[S]),f=d.map(S=>n[S]),g=u.map(S=>this.viewItems[S]),_=u.map(S=>n[S]),b=d.reduce((S,k)=>S+(this.viewItems[k].minimumSize-n[k]),0),v=d.reduce((S,k)=>S+(this.viewItems[k].maximumSize-n[k]),0),C=u.length===0?Number.POSITIVE_INFINITY:u.reduce((S,k)=>S+(n[k]-this.viewItems[k].minimumSize),0),y=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((S,k)=>S+(n[k]-this.viewItems[k].maximumSize),0),w=Math.max(b,y,o),L=Math.min(C,v,a);let T=!1;if(l){const S=this.viewItems[l.index],k=t>=l.limitDelta;T=k!==S.visible,S.setVisible(k,l.size)}if(!T&&c){const S=this.viewItems[c.index],k=t<c.limitDelta;T=k!==S.visible,S.setVisible(k,c.size)}if(T)return this.resize(e,t,n,i,s,o,a);t=ys(t,w,L);for(let S=0,k=t;S<h.length;S++){const D=h[S],O=ys(f[S]+k,D.minimumSize,D.maximumSize),F=O-f[S];k-=F,D.size=O}for(let S=0,k=t;S<g.length;S++){const D=g[S],O=ys(_[S]-k,D.minimumSize,D.maximumSize),F=O-_[S];k+=F,D.size=O}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=Ui(this.viewItems.length-1,-1),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);for(const a of o)Kw(i,a);for(const a of s)Ub(i,a);typeof e=="number"&&Ub(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],c=ys(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const s=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&o[l+1]),h=!(n[l]&&s[l+1]);if(u&&h){const f=Ui(l,-1),g=Ui(l+1,this.viewItems.length),_=this.findFirstSnapIndex(f),b=this.findFirstSnapIndex(g),v=typeof _=="number"&&!this.viewItems[_].visible,C=typeof b=="number"&&!this.viewItems[b].visible;v&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:C&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),ut(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class mb{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=mb.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=i.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=q(e,ee(".monaco-table-tr")),n=[],i=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=q(t,ee(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),i.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const l=this.columns[s].project(e);o.disposeElement(l,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Fn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}mb.TemplateId="row";function fte(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return mb.TemplateId}}}class gte{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new R,this.onDidLayout=this._onDidLayout.event,this.element=ee(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:ve.None}layout(e){this._onDidLayout.fire([this.index,e])}}class P1{constructor(e,t,n,i,s,o){this.virtualDelegate=n,this.domId=`table_id_${++P1.InstanceCount}`,this.disposables=new Q,this.cachedWidth=0,this.cachedHeight=0,this.domNode=q(t,ee(`.monaco-table.${this.domId}`));const a=i.map((d,u)=>new gte(d,u)),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new F9(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new mb(i,s,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Ro(e,this.domNode,fte(n),[c],o)),ve.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=i.reduce((f,g)=>f+g.weight,0),h=i[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=Sr(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}P1.InstanceCount=0;const pte={inputActiveOptionBorder:W.fromHex("#007ACC00"),inputActiveOptionForeground:W.fromHex("#FFFFFF"),inputActiveOptionBackground:W.fromHex("#0E639C50")};class _b extends Yr{constructor(e){super(),this._onChange=this._register(new R),this.onChange=this._onChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},pte),e),this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Gi.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const mte=p("caseDescription","Match Case"),_te=p("wordsDescription","Match Whole Word"),bte=p("regexDescription","Use Regular Expression");class B9 extends _b{constructor(e){super({icon:m.caseSensitive,title:mte+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class W9 extends _b{constructor(e){super({icon:m.wholeWord,title:_te+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class V9 extends _b{constructor(e){super({icon:m.regex,title:bte+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}const vte=p("defaultLabel","input");class Cte extends Yr{constructor(e,t,n,i){var s;super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalToggles=[],this._onDidOptionChange=this._register(new R),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new R),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new R),this._onKeyUp=this._register(new R),this._onCaseSensitiveKeyDown=this._register(new R),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new R),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||vte,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const o=i.appendCaseSensitiveLabel||"",a=i.appendWholeWordsLabel||"",l=i.appendRegexLabel||"",c=i.history||[],d=!!i.flexibleHeight,u=!!i.flexibleWidth,h=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new D9(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:c,showHistoryHint:i.showHistoryHint,flexibleHeight:d,flexibleWidth:u,flexibleMaxHeight:h})),this.regex=this._register(new V9({appendTitle:l,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new W9({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new B9({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));const f=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const _=f.indexOf(document.activeElement);if(_>=0){let b=-1;g.equals(17)?b=(_+1)%f.length:g.equals(15)&&(_===0?b=f.length-1:b=_-1),g.equals(9)?(f[_].blur(),this.inputBox.focus()):b>=0&&f[b].focus(),wt.stop(g,!0)}}}),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this._showOptionButtons||(this.caseSensitive.domNode.style.display="none",this.wholeWords.domNode.style.display="none",this.regex.domNode.style.display="none");for(const g of(s=i?.additionalToggles)!==null&&s!==void 0?s:[])this._register(g),this.controls.appendChild(g.domNode),this._register(g.onChange(_=>{this._onDidOptionChange.fire(_),!_&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(g);this.additionalToggles.length>0&&(this.controls.style.display="block"),this.inputBox.paddingRight=(this._showOptionButtons?this.caseSensitive.width()+this.wholeWords.width()+this.regex.width():0)+this.additionalToggles.reduce((g,_)=>g+_.width(),0),this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(Z(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(Z(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}get onDidChange(){return this.inputBox.onDidChange}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);for(const n of this.additionalToggles)n.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}var $d;(function(r){r[r.Unknown=0]="Unknown",r[r.Twistie=1]="Twistie",r[r.Element=2]="Element",r[r.Filter=3]="Filter"})($d||($d={}));class ur extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class II{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function NI(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function m_(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function rx(r){return typeof r.collapsible=="boolean"}class yte{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new FE,this._onDidChangeCollapseState=new R,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new R,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new R,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Ca(W4),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Ye.empty(),i={}){if(e.length===0)throw new ur(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,o){var a;i===void 0&&(i=Ye.empty()),o===void 0&&(o=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,s);const c=[...i],d=t[t.length-1],u=new ta({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+n)].map(b=>e.getId(b.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,s);const h=t.slice(0,-1),f=(b,v,C)=>{if(o>0)for(let y=0;y<C;y++)b--,v--,this.spliceSmart(e,[...h,b,0],Number.MAX_SAFE_INTEGER,c[v].children,s,o-1)};let g=Math.min(l.children.length,d+n),_=c.length;for(const b of u.changes.sort((v,C)=>C.originalStart-v.originalStart))f(g,_,g-(b.originalStart+b.originalLength)),g=b.originalStart,_=b.modifiedStart-d,this.spliceSimple([...h,g],b.originalLength,Ye.slice(c,_,_+b.modifiedLength),s);f(g,_,g)}spliceSimple(e,t,n=Ye.empty(),{onDidCreateNode:i,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=Ye.map(n,S=>this.createTreeNode(S,a,a.visible?1:0,c,u,i)),f=e[e.length-1],g=a.children.length>0;let _=0;for(let S=f;S>=0&&S<a.children.length;S--){const k=a.children[S];if(k.visible){_=k.visibleChildIndex;break}}const b=[];let v=0,C=0;for(const S of h)b.push(S),C+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=_+v++);const y=cM(a.children,f,t,b);o?a.lastDiffIds?cM(a.lastDiffIds,f,t,b.map(S=>o.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>o.getId(S.element).toString()):a.lastDiffIds=void 0;let w=0;for(const S of y)S.visible&&w++;if(w!==0)for(let S=f+b.length;S<a.children.length;S++){const k=a.children[S];k.visible&&(k.visibleChildIndex-=w)}if(a.visibleChildrenCount+=v-w,c&&d){const S=y.reduce((k,D)=>k+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,C-S),this.list.splice(l,S,u)}if(y.length>0&&s){const S=k=>{s(k),k.children.forEach(S)};y.forEach(S)}this._onDidSplice.fire({insertedNodes:b,deletedNodes:y});const L=a.children.length>0;g!==L&&this.setCollapsible(e.slice(0,-1),L);let T=a;for(;T;){if(T.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}T=T.parent}}rerender(e){if(e.length===0)throw new ur(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!rx(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(rx(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!rx(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&s.push(a);const c=e.children||Ye.empty(),d=i&&l!==0&&!a.collapsed,u=Ye.map(c,g=>this.createTreeNode(g,a,l,d,s,o));let h=0,f=1;for(const g of u)a.children.push(g),f+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=h++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=h,a.visible=l===2?h>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,i&&s.pop()),o?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,n,i&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):NI(n)?(e.filterData=n.data,m_(n.visibility)):(e.filterData=void 0,m_(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new ur(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new ur(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:i,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new ur(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],n+1,i,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:N6(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class wte{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}globalThis&&globalThis.__awaiter;class Ste extends pb{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function ox(r){return r instanceof pb?new Ste(r):r}class xte{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=j.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,ox(e),t)}onDragOver(e,t,n,i,s=!0){const o=this.dnd.onDragOver(ox(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=du(()=>{const h=this.modelProvider(),f=h.getNodeLocation(t);h.isCollapsed(f)&&h.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!s){const h=typeof o=="boolean"?o:o.accept,f=typeof o=="boolean"?void 0:o.effect;return{accept:h,effect:f,feedback:[n]}}return o}if(o.bubble===1){const h=this.modelProvider(),f=h.getNodeLocation(t),g=h.getParentNodeLocation(f),_=h.getNode(g),b=g&&h.getListIndex(g);return this.onDragOver(e,_,b,i,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),u=l.getListRenderCount(c);return Object.assign(Object.assign({},o),{feedback:Ui(d,d+u)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(ox(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}}function kte(r,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new xte(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=r(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}class MI{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,i;(i=(n=this.delegate).setDynamicHeight)===null||i===void 0||i.call(n,e.element,t)}}var __;(function(r){r.None="none",r.OnHover="onHover",r.Always="always"})(__||(__={}));class Lte{constructor(e,t=[]){this._elements=t,this.disposables=new Q,this.onDidChange=ve.forEach(e,n=>this._elements=n,this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}}class b_{constructor(e,t,n,i,s={}){var o;this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=b_.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new wte,this.activeIndentNodes=new Set,this.indentGuidesDisposable=j.None,this.disposables=new Q,this.templateId=e.templateId,this.updateOptions(s),ve.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(o=e.onDidChangeTwistieState)===null||o===void 0||o.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=ys(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==__.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Q;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=q(e,ee(".monaco-tl-row")),n=q(t,ee(".monaco-tl-indent")),i=q(t,ee(".monaco-tl-twistie")),s=q(t,ee(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:j.None,templateData:o}}renderElement(e,t,n,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:n,height:i}),this.renderedElements.set(e.element,e));const s=b_.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${s}px`,n.indent.style.width=`${s+this.indent-16}px`,this.renderTwistie(e,n),typeof i=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){var s,o;n.indentGuidesDisposable.dispose(),(o=(s=this.renderer).disposeElement)===null||o===void 0||o.call(s,e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...m.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...m.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Fn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Q,i=this.modelProvider();let s=e;for(;;){const o=i.getNodeLocation(s),a=i.getParentNodeLocation(o);if(!a)break;const l=i.getNode(a),c=ee(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),n.add(Ke(()=>this.renderedIndentGuides.delete(l,c))),s=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const s=n.getNodeLocation(i);try{const o=n.getParentNodeLocation(s);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ut(this.disposables)}}b_.DefaultIndent=8;class Tte{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Q,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,t){let n=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?n=o?1:0:NI(o)?n=m_(o.visibility):n=o,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:So.Default,visibility:n};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(i)?i:[i];for(const o of s){const a=o&&o.toString();if(typeof a>"u")return{data:So.Default,visibility:n};const l=Xf(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===ua.Filter?2:{data:So.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ut(this.disposables)}}var ua;(function(r){r[r.Highlight=0]="Highlight",r[r.Filter=1]="Filter"})(ua||(ua={}));let Dte=class{constructor(e,t,n,i,s){var o;this.tree=e,this.view=n,this.filter=i,this.contextViewProvider=s,this._pattern="",this.width=0,this._onDidChangeMode=new R,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new R,this._onDidChangeOpenState=new R,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Q,this.disposables=new Q,this._mode=(o=e.options.defaultFindMode)!==null&&o!==void 0?o:ua.Highlight,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t;const n=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&n?(e=this.widget)===null||e===void 0||e.showMessage({type:2,content:p("not found","No elements found.")}):(t=this.widget)===null||t===void 0||t.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===ua.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!So.isDefault(e.filterData)}style(e){var t;this.styles=e,(t=this.widget)===null||t===void 0||t.style(e)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function vO(r){let e=$d.Unknown;return mS(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=$d.Twistie:mS(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=$d.Element:mS(r.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=$d.Filter),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function C0(r,e){e(r),r.children.forEach(t=>C0(t,e))}class ax{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new R,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!t?.__forceEvent&&qs(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>C0(d,c)),this.set([...l.values()]);return}const n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>C0(l,i));const s=new Map,o=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>C0(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const u=s.get(c);u&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class Ete extends R9{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(A9(e.browserEvent.target)||Su(e.browserEvent.target)||nf(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),s&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class Ate extends Ro{constructor(e,t,n,i,s,o,a,l){super(e,t,n,i,l),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new Ete(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],s=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),i.length>0&&super.setFocus(El([...super.getFocus(),...i])),s.length>0&&super.setSelection(El([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class H9{constructor(e,t,n,i,s={}){var o;this._user=e,this._options=s,this.eventBufferer=new FE,this.onDidChangeFindOpenState=ve.None,this.disposables=new Q,this._onWillRefilter=new R,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new R;const a=new MI(n),l=new gM,c=new gM,d=this.disposables.add(new Lte(c.event));this.renderers=i.map(f=>new b_(f,()=>this.model,l.event,d,s));for(const f of this.renderers)this.disposables.add(f);let u;s.keyboardNavigationLabelProvider&&(u=new Tte(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:u}),this.disposables.add(u)),this.focus=new ax(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new ax(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new ax(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new Ate(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},kte(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),l.input=this.model.onDidChangeCollapseState;const h=ve.forEach(this.model.onDidSplice,f=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(f),this.selection.onDidModelSplice(f)})},this.disposables);if(h(()=>null,null,this.disposables),c.input=ve.chain(ve.any(h,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const f=new Set;for(const g of this.focus.getNodes())f.add(g);for(const g of this.selection.getNodes())f.add(g);return[...f.values()]}).event,s.keyboardSupport!==!1){const f=ve.chain(this.view.onKeyDown).filter(g=>!Su(g.target)).map(g=>new jt(g));f.filter(g=>g.keyCode===15).on(this.onLeftArrow,this,this.disposables),f.filter(g=>g.keyCode===17).on(this.onRightArrow,this,this.disposables),f.filter(g=>g.keyCode===10).on(this.onSpace,this,this.disposables)}(!((o=s.findWidgetEnabled)!==null&&o!==void 0)||o)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider?(this.findController=new Dte(this,this.model,this.view,u,s.contextViewProvider),this.focusNavigationFilter=f=>this.findController.shouldAllowFocus(f),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=ve.None,this.styleElement=Sr(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===__.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ve.filter(ve.map(this.view.onMouseDblClick,vO),e=>e.target!==$d.Filter)}get onPointer(){return ve.map(this.view.onPointer,vO)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return ve.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:ua.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===__.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),Ic(t)&&((n=this.findController)===null||n===void 0||n.layout(t))}style(e){var t;const n=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${n}:hover .monaco-tl-indent > .indent-guide, .monaco-list${n}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),i.push(`.monaco-list${n} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=i.join(`
`),(t=this.findController)===null||t===void 0||t.style(e),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(i,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const o=this.model.getParentNodeLocation(i);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){ut(this.disposables),this.view.dispose()}}class RI{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new yte(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,s){return n.sorter.compare(i.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Ye.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=Ye.empty(),n){const i=new Set,s=new Set,o=l=>{var c;if(l.element===null)return;const d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();s.add(u),this.nodesByIdentity.set(u,d)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,d)},a=l=>{var c;if(l.element===null)return;const d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();s.has(u)||this.nodesByIdentity.delete(u)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=Ye.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Ye.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,s=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:i,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new ur(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new ur(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new ur(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new ur(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function y0(r){const e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:Ye.map(Ye.from(r.children),y0),collapsible:r.collapsible,collapsed:r.collapsed}}function w0(r){const e=[r.element],t=r.incompressible||!1;let n,i;for(;[i,n]=Ye.consume(Ye.from(r.children),2),!(i.length!==1||i[0].incompressible);)r=i[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:Ye.map(Ye.concat(i,n),w0),collapsible:r.collapsible,collapsed:r.collapsed}}function TT(r,e=0){let t;return e<r.element.elements.length-1?t=[TT(r,e+1)]:t=Ye.map(Ye.from(r.children),n=>TT(n,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function CO(r){return TT(r,0)}function U9(r,e,t){return r.element===e?Object.assign(Object.assign({},r),{children:t}):Object.assign(Object.assign({},r),{children:Ye.map(Ye.from(r.children),n=>U9(n,e,t))})}const Ite=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}});class Nte{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new RI(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Ye.empty(),n){const i=n.diffIdentityProvider&&Ite(n.diffIdentityProvider);if(e===null){const f=Ye.map(t,this.enabled?w0:y0);this._setChildren(null,f,{diffIdentityProvider:i,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Error("Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=CO(o),d=U9(c,e,t),u=(this.enabled?w0:y0)(d),h=l.children.map(f=>f===o?u:f);this._setChildren(l.element,h,{diffIdentityProvider:i,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=Ye.map(n,CO),s=Ye.map(i,e?w0:y0);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,s=a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new ur(this.user,`Tree element not found: ${e}`);return t}}const Mte=r=>r[r.length-1];class OI{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new OI(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function Rte(r,e){return{splice(t,n,i){e.splice(t,n,i.map(s=>r.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function Ote(r,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(r(t),n)}}})}class Pte{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||Mte;const i=s=>this.elementMapper(s.elements);this.nodeMapper=new II(s=>new OI(i,s)),this.model=new Nte(e,Rte(this.nodeMapper,t),Ote(i,n))}get onDidSplice(){return ve.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return ve.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ve.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Ye.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var Fte=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class PI extends H9{constructor(e,t,n,i,s={}){super(e,t,n,i,s),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Ye.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new RI(e,t,n)}}class j9{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){var s,o,a,l;n.compressedTreeNode?(o=(s=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(s,n.compressedTreeNode,t,n.data,i):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}Fte([In],j9.prototype,"compressedTreeNodeProvider",null);function Bte(r,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=r().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class $9 extends PI{constructor(e,t,n,i,s={}){const o=()=>this,a=i.map(l=>new j9(o,l));super(e,t,n,a,Bte(o,s))}setChildren(e,t=Ye.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new Pte(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var ql=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function lx(r){return Object.assign(Object.assign({},r),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function DT(r,e){return e.parent?e.parent===r?!0:DT(r,e.parent):!1}function Wte(r,e){return r===e||DT(r,e)||DT(e,r)}class FI{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new FI(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Vte{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...m.treeItemLoading.classNamesArray),!0):(t.classList.remove(...m.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){var s,o;(o=(s=this.renderer).disposeElement)===null||o===void 0||o.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function yO(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function wO(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}class Hte extends pb{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function cx(r){return r instanceof pb?new Hte(r):r}class Ute{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,cx(e),t)}onDragOver(e,t,n,i,s=!0){return this.dnd.onDragOver(cx(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(cx(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}}function z9(r){return r&&Object.assign(Object.assign({},r),{collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new Ute(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:r.accessibilityProvider&&Object.assign(Object.assign({},r.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=r.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))}),filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},r.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick>"u"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:r.additionalScrollHeight})}function ET(r,e){e(r),r.children.forEach(t=>ET(t,e))}class K9{constructor(e,t,n,i,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new R,this._onDidChangeNodeSlowState=new R,this.nodeMapper=new II(a=>new FI(a)),this.disposables=new Q,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,i,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=lx({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return ve.map(this.tree.onDidChangeFocus,yO)}get onDidChangeSelection(){return ve.map(this.tree.onDidChangeSelection,yO)}get onMouseDblClick(){return ve.map(this.tree.onMouseDblClick,wO)}get onPointer(){return ve.map(this.tree.onPointer,wO)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,s){const o=new MI(n),a=i.map(c=>new Vte(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=z9(s)||{};return new PI(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return ql(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,s){return ql(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new ur(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ve.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,i,s),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return ql(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new ur(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ve.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield ve.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield ve.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new ur(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return ql(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return ql(this,void 0,void 0,function*(){let i;if(this.subTreeRefreshPromises.forEach((s,o)=>{!i&&Wte(o,e)&&(i=s.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return ql(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(s=>i=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield cL.settled(s.map(o=>this.doRefreshSubTree(o,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return ql(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(Ye.empty());else{const s=this.doGetChildren(e);if(uM(s))i=Promise.resolve(s);else{const o=Rc(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=s.finally(()=>o.cancel())}}try{const s=yield i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Da(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return uM(n)?this.processChildren(n):(t=Xn(()=>ql(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(We))}setChildren(e,t,n,i){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const d of e.children)if(o.set(d.element,d),this.identityProvider){const u=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:u})}const l=[],c=s.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const _=lx({element:d,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const _=f.node;return o.delete(_.element),this.nodes.delete(_.element),this.nodes.set(d,_),_.element=d,_.hasChildren=u,n?f.collapsed?(_.children.forEach(b=>ET(b,v=>this.nodes.delete(v.element))),_.children.splice(0,_.children.length),_.stale=!0):l.push(_):u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_}const g=lx({element:d,parent:e,id:h,hasChildren:u});return i&&i.viewState.focus&&i.viewState.focus.indexOf(h)>-1&&i.focus.push(g),i&&i.viewState.selection&&i.viewState.selection.indexOf(h)>-1&&i.selection.push(g),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(h)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const d of o.values())ET(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){const i=e.children.map(o=>this.asTreeElement(o,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Ye.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class BI{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new BI(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class jte{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...m.treeItemLoading.classNamesArray),!0):(t.classList.remove(...m.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){var s,o;(o=(s=this.renderer).disposeElement)===null||o===void 0||o.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){var s,o;(o=(s=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(s,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ut(this.disposables)}}function $te(r){const e=r&&z9(r);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class zte extends K9{constructor(e,t,n,i,s,o,a={}){super(e,t,n,s,o,a),this.compressionDelegate=i,this.compressibleNodeMapper=new II(l=>new BI(l)),this.filter=a.filter}createTree(e,t,n,i,s){const o=new MI(n),a=i.map(c=>new jte(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=$te(s)||{};return new $9(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=h=>this.identityProvider.getId(h).toString(),i=h=>{const f=new Set;for(const g of h){const _=this.tree.getCompressedTreeNode(g===this.root?null:g);if(_.element)for(const b of _.element.elements)f.add(n(b.element))}return f},s=i(this.tree.getSelection()),o=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let d=!1;const u=h=>{const f=h.element;if(f)for(let g=0;g<f.elements.length;g++){const _=n(f.elements[g].element),b=f.elements[f.elements.length-1].element;s.has(_)&&a.indexOf(b)===-1&&(a.push(b),l=!0),o.has(_)&&c.indexOf(b)===-1&&(c.push(b),d=!0)}h.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=Ye.filter(e,t=>{const n=this.filter.filter(t,1),i=Kte(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}function Kte(r){return typeof r=="boolean"?r?1:0:NI(r)?m_(r.visibility):m_(r)}class Gte extends H9{constructor(e,t,n,i,s,o={}){super(e,t,n,i,o),this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,n){return new RI(e,t,n)}}new ge("isMac",Je,p("isMac","Whether the operating system is macOS"));new ge("isLinux",Ti,p("isLinux","Whether the operating system is Linux"));const F1=new ge("isWindows",hi,p("isWindows","Whether the operating system is Windows"));new ge("isWeb",Jc,p("isWeb","Whether the platform is a web browser"));new ge("isMacNative",Je&&!Jc,p("isMacNative","Whether the operating system is macOS on a non-browser platform"));new ge("isIOS",_a,p("isIOS","Whether the operating system is iOS"));new ge("isDevelopment",!1,!0);new ge("productQualityType","",p("productQualityType","Quality type of VS Code"));const G9="inputFocus";new ge(G9,!1,p("inputFocus","Whether keyboard focus is inside an input box"));var Na=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ht=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Ar=tt("listService");let AT=class{constructor(e){this._themeService=e,this.disposables=new Q,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const i=new O9(Sr(),"");this.disposables.add(yu(i,this._themeService))}if(this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),yo(e.onDidFocus(()=>this.setLastFocusedList(e)),Ke(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};AT=Na([ht(0,It)],AT);const q9=new ge("listFocus",!0),B1=new ge("listSupportsMultiselect",!0),Z9=le.and(q9,le.not(G9)),WI=new ge("listHasSelectionOrFocus",!1),VI=new ge("listDoubleSelection",!1),HI=new ge("listMultiSelection",!1),W1=new ge("listSelectionNavigation",!1),qte=new ge("listSupportsFind",!0),UI=new ge("treeElementCanCollapse",!1),Zte=new ge("treeElementHasParent",!1),jI=new ge("treeElementCanExpand",!1),Yte=new ge("treeElementHasChild",!1),Xte=new ge("treeFindOpen",!1),Y9="listTypeNavigationMode",X9="listAutomaticKeyboardNavigation";function V1(r,e){const t=r.createScoped(e.getHTMLElement());return q9.bindTo(t),t}const th="workbench.list.multiSelectModifier",IT="workbench.list.openMode",Cr="workbench.list.horizontalScrolling",$I="workbench.list.defaultFindMode",zI="workbench.list.keyboardNavigation",v_="workbench.tree.indent",iy="workbench.tree.renderIndentGuides",Eo="workbench.list.smoothScrolling",xa="workbench.list.mouseWheelScrollSensitivity",ka="workbench.list.fastScrollSensitivity",sy="workbench.tree.expandMode";function La(r){return r.getValue(th)==="alt"}class Qte extends j{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=La(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(th)&&(this.useAltAsMultipleSelectionModifier=La(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:N9(e)}isSelectionRangeChangeEvent(e){return M9(e)}}function H1(r,e){var t;const n=r.get(ft),i=r.get(Mn),s=new Q;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return i.mightProducePrintableCharacter(a)}},smoothScrolling:Boolean(n.getValue(Eo)),mouseWheelScrollSensitivity:n.getValue(xa),fastScrollSensitivity:n.getValue(ka),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:s.add(new Qte(n)),keyboardNavigationEventFilter:tne(i)}),s]}let NT=class extends Ro{constructor(e,t,n,i,s,o,a,l,c,d){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:Boolean(c.getValue(Cr)),[h,f]=d.invokeFunction(H1,s);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},so(l.getColorTheme(),I1)),h),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=V1(o,this),this.themeService=l,this.listSupportsMultiSelect=B1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),W1.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=WI.bindTo(this.contextKeyService),this.listDoubleSelection=VI.bindTo(this.contextKeyService),this.listMultiSelection=HI.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=La(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||b.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||b.length>0)})),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(th)&&(this._useAltAsMultipleSelectionModifier=La(c));let b={};if(_.affectsConfiguration(Cr)&&this.horizontalScrolling===void 0){const v=Boolean(c.getValue(Cr));b=Object.assign(Object.assign({},b),{horizontalScrolling:v})}if(_.affectsConfiguration(Eo)){const v=Boolean(c.getValue(Eo));b=Object.assign(Object.assign({},b),{smoothScrolling:v})}if(_.affectsConfiguration(xa)){const v=c.getValue(xa);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:v})}if(_.affectsConfiguration(ka)){const v=c.getValue(ka);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:v})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new Q9(this,Object.assign({configurationService:c},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=yu(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};NT=Na([ht(5,Re),ht(6,Ar),ht(7,It),ht(8,ft),ht(9,Ve)],NT);let SO=class extends cte{constructor(e,t,n,i,s,o,a,l,c,d){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:Boolean(c.getValue(Cr)),[h,f]=d.invokeFunction(H1,s);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},so(l.getColorTheme(),I1)),h),{horizontalScrolling:u})),this.disposables=new Q,this.disposables.add(f),this.contextKeyService=V1(o,this),this.themeService=l,this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=B1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),W1.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this._useAltAsMultipleSelectionModifier=La(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),s.overrideStyles&&this.disposables.add(yu(this,l,s.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(th)&&(this._useAltAsMultipleSelectionModifier=La(c));let b={};if(_.affectsConfiguration(Cr)&&this.horizontalScrolling===void 0){const v=Boolean(c.getValue(Cr));b=Object.assign(Object.assign({},b),{horizontalScrolling:v})}if(_.affectsConfiguration(Eo)){const v=Boolean(c.getValue(Eo));b=Object.assign(Object.assign({},b),{smoothScrolling:v})}if(_.affectsConfiguration(xa)){const v=c.getValue(xa);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:v})}if(_.affectsConfiguration(ka)){const v=c.getValue(ka);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:v})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new Q9(this,Object.assign({configurationService:c},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=yu(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};SO=Na([ht(5,Re),ht(6,Ar),ht(7,It),ht(8,ft),ht(9,Ve)],SO);let xO=class extends P1{constructor(e,t,n,i,s,o,a,l,c,d,u){const h=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:Boolean(d.getValue(Cr)),[f,g]=u.invokeFunction(H1,o);super(e,t,n,i,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},so(c.getColorTheme(),I1)),f),{horizontalScrolling:h})),this.disposables.add(g),this.contextKeyService=V1(a,this),this.themeService=c,this.listSupportsMultiSelect=B1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),W1.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=WI.bindTo(this.contextKeyService),this.listDoubleSelection=VI.bindTo(this.contextKeyService),this.listMultiSelection=HI.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=La(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||v.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||v.length>0)})),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(th)&&(this._useAltAsMultipleSelectionModifier=La(d));let v={};if(b.affectsConfiguration(Cr)&&this.horizontalScrolling===void 0){const C=Boolean(d.getValue(Cr));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(b.affectsConfiguration(Eo)){const C=Boolean(d.getValue(Eo));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(b.affectsConfiguration(xa)){const C=d.getValue(xa);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(b.affectsConfiguration(ka)){const C=d.getValue(ka);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new Jte(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=yu(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};xO=Na([ht(6,Re),ht(7,Ar),ht(8,It),ht(9,ft),ht(10,Ve)],xO);class KI extends j{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new R),this.onDidOpen=this._onDidOpen.event,this._register(ve.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(IT)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=t?.configurationService.getValue(IT)!=="doubleClick"}))):this.openOnSingleClick=(n=t?.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,i,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,s=!0,o=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,n,i,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}}class Q9 extends KI{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Jte extends KI{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class ene extends KI{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function tne(r){let e=!1;return t=>{if(t.toKeybinding().isModifierKey())return!1;if(e)return e=!1,!1;const n=r.softDispatch(t,t.target);return n?.enterChord?(e=!0,!1):(e=!1,!n)}}let kO=class extends PI{constructor(e,t,n,i,s,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=o.invokeFunction(bb,s);super(e,t,n,i,u),this.disposables.add(f),this.internals=new xu(this,s,h,s.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};kO=Na([ht(5,Ve),ht(6,Re),ht(7,Ar),ht(8,It),ht(9,ft)],kO);let LO=class extends $9{constructor(e,t,n,i,s,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=o.invokeFunction(bb,s);super(e,t,n,i,u),this.disposables.add(f),this.internals=new xu(this,s,h,s.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};LO=Na([ht(5,Ve),ht(6,Re),ht(7,Ar),ht(8,It),ht(9,ft)],LO);let TO=class extends Gte{constructor(e,t,n,i,s,o,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=a.invokeFunction(bb,o);super(e,t,n,i,s,h),this.disposables.add(g),this.internals=new xu(this,o,f,o.overrideStyles,l,c,d,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};TO=Na([ht(6,Ve),ht(7,Re),ht(8,Ar),ht(9,It),ht(10,ft)],TO);let MT=class extends K9{constructor(e,t,n,i,s,o,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=a.invokeFunction(bb,o);super(e,t,n,i,s,h),this.disposables.add(g),this.internals=new xu(this,o,f,o.overrideStyles,l,c,d,u),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};MT=Na([ht(6,Ve),ht(7,Re),ht(8,Ar),ht(9,It),ht(10,ft)],MT);let DO=class extends zte{constructor(e,t,n,i,s,o,a,l,c,d,u,h){const{options:f,getTypeNavigationMode:g,disposable:_}=l.invokeFunction(bb,a);super(e,t,n,i,s,o,f),this.disposables.add(_),this.internals=new xu(this,a,g,a.overrideStyles,c,d,u,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};DO=Na([ht(7,Ve),ht(8,Re),ht(9,Ar),ht(10,It),ht(11,ft)],DO);function J9(r){const e=r.getValue($I);if(e==="highlight")return ua.Highlight;if(e==="filter")return ua.Filter;const t=r.getValue(zI);if(t==="simple"||t==="highlight")return ua.Highlight;if(t==="filter")return ua.Filter}function bb(r,e){var t;const n=r.get(ft),i=r.get(Qu),s=r.get(Re),o=r.get(Ve),a=()=>{const h=s.getContextKeyValue(Y9);if(h==="automatic")return Lc.Automatic;if(h==="trigger"||s.getContextKeyValue(X9)===!1)return Lc.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(n.getValue(Cr)),[c,d]=o.invokeFunction(H1,e),u=e.additionalScrollHeight;return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof n.getValue(v_)=="number"?n.getValue(v_):void 0,renderIndentGuides:n.getValue(iy),smoothScrolling:Boolean(n.getValue(Eo)),defaultFindMode:J9(n),horizontalScrolling:l,additionalScrollHeight:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:n.getValue(sy)==="doubleClick",contextViewProvider:i})}}let xu=class{constructor(e,t,n,i,s,o,a,l){var c;this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=V1(s,e),this.listSupportsMultiSelect=B1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),W1.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.listSupportFindWidget=qte.bindTo(this.contextKeyService),this.listSupportFindWidget.set((c=t.findWidgetEnabled)!==null&&c!==void 0?c:!0),this.hasSelectionOrFocus=WI.bindTo(this.contextKeyService),this.hasDoubleSelection=VI.bindTo(this.contextKeyService),this.hasMultiSelection=HI.bindTo(this.contextKeyService),this.treeElementCanCollapse=UI.bindTo(this.contextKeyService),this.treeElementHasParent=Zte.bindTo(this.contextKeyService),this.treeElementCanExpand=jI.bindTo(this.contextKeyService),this.treeElementHasChild=Yte.bindTo(this.contextKeyService),this.treeFindOpen=Xte.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=La(l),this.updateStyleOverrides(i);const u=()=>{const f=e.getFocus()[0];if(!f)return;const g=e.getNode(f);this.treeElementCanCollapse.set(g.collapsible&&!g.collapsed),this.treeElementHasParent.set(!!e.getParentElement(f)),this.treeElementCanExpand.set(g.collapsible&&g.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(f))},h=new Set;h.add(Y9),h.add(X9),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||g.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||g.length>0),u()}),e.onDidChangeCollapseState(u),e.onDidChangeModel(u),e.onDidChangeFindOpenState(f=>this.treeFindOpen.set(f)),l.onDidChangeConfiguration(f=>{let g={};if(f.affectsConfiguration(th)&&(this._useAltAsMultipleSelectionModifier=La(l)),f.affectsConfiguration(v_)){const _=l.getValue(v_);g=Object.assign(Object.assign({},g),{indent:_})}if(f.affectsConfiguration(iy)){const _=l.getValue(iy);g=Object.assign(Object.assign({},g),{renderIndentGuides:_})}if(f.affectsConfiguration(Eo)){const _=Boolean(l.getValue(Eo));g=Object.assign(Object.assign({},g),{smoothScrolling:_})}if((f.affectsConfiguration($I)||f.affectsConfiguration(zI))&&e.updateOptions({defaultFindMode:J9(l)}),f.affectsConfiguration(Cr)&&t.horizontalScrolling===void 0){const _=Boolean(l.getValue(Cr));g=Object.assign(Object.assign({},g),{horizontalScrolling:_})}if(f.affectsConfiguration(sy)&&t.expandOnlyOnTwistieClick===void 0&&(g=Object.assign(Object.assign({},g),{expandOnlyOnTwistieClick:l.getValue(sy)==="doubleClick"})),f.affectsConfiguration(xa)){const _=l.getValue(xa);g=Object.assign(Object.assign({},g),{mouseWheelScrollSensitivity:_})}if(f.affectsConfiguration(ka)){const _=l.getValue(ka);g=Object.assign(Object.assign({},g),{fastScrollSensitivity:_})}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(h)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new ene(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){ut(this.styler),this.styler=e?yu(this.tree,this.themeService,e):j.None}dispose(){this.disposables=ut(this.disposables),ut(this.styler),this.styler=void 0}};xu=Na([ht(4,Re),ht(5,Ar),ht(6,It),ht(7,ft)],xu);const nne=Jt.as(Bl.Configuration);nne.registerConfiguration({id:"workbench",order:7,title:p("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[th]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[p("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:p({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[IT]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Cr]:{type:"boolean",default:!1,description:p("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[v_]:{type:"number",default:8,minimum:4,maximum:40,description:p("tree indent setting","Controls tree indentation in pixels.")},[iy]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:p("render tree indent guides","Controls whether the tree should render indent guides.")},[Eo]:{type:"boolean",default:!1,description:p("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[xa]:{type:"number",default:1,markdownDescription:p("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[ka]:{type:"number",default:5,description:p("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[$I]:{type:"string",enum:["highlight","filter"],enumDescriptions:[p("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),p("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:p("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[zI]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[p("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),p("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),p("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:p("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:p("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' instead.")},[sy]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var RT;(function(r){r[r.PRESERVE=0]="PRESERVE",r[r.LAST=1]="LAST"})(RT||(RT={}));const nh={Quickaccess:"workbench.contributions.quickaccess"};class ine{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Ke(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Y_([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}Jt.add(nh.Quickaccess,new ine);const Ul=tt("quickInputService");var sne=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},EO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let OT=class extends j{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Jt.as(nh.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a?.descriptor;if(a&&o&&l===o){e!==o.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!n?.preserveValue){let f;if(a&&l&&l!==o){const g=a.value.substr(l.prefix.length);g&&(f=`${o.prefix}${g}`)}if(!f){const g=s?.defaultFilterValue;g===RT.LAST?f=this.lastAcceptedPickerValues.get(o):typeof g=="string"&&(f=`${o.prefix}${g}`)}typeof f=="string"&&(e=f)}const c=new Q,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,o,n),d.placeholder=o?.placeholder,d.quickNavigate=n?.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof n?.itemActivation=="number"||n?.quickNavigateConfiguration)&&(d.itemActivation=(i=n?.itemActivation)!==null&&i!==void 0?i:io.SECOND),d.contextKey=o?.contextKey,d.filterValue=f=>f.substring(o?o.prefix.length:0),o?.placeholder&&(d.ariaLabel=o?.placeholder);let u;t&&(u=new sA,c.add(Al(d.onWillAccept)(f=>{f.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,s,o,e));const h=c.add(new fi);if(s&&c.add(s.provide(d,h.token)),Al(d.onDidHide)(()=>{d.selectedItems.length===0&&h.cancel(),c.dispose(),u?.complete(d.selectedItems.slice(0))}),d.show(),t)return u?.p}adjustValueSelection(e,t,n){var i;let s;n?.preserveValue?s=[e.value.length,e.value.length]:s=[(i=t?.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i){const s=new Q,o=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return s.add(Ke(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),s.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&s.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),s}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};OT=sne([EO(0,Ul),EO(1,Ve)],OT);var rne=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fp=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let PT=class extends Y${constructor(e,t,n,i,s){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=i,this.layoutService=s,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(OT))),this._quickAccess}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),returnFocus:()=>e.focus(),createList:(s,o,a,l,c)=>this.instantiationService.createInstance(NT,s,o,a,l,c),styles:this.computeStyles()},i=this._register(new O1(Object.assign(Object.assign({},n),t)));return i.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(s=>i.layout(s,e.offset.quickPickTop))),this._register(i.onShow(()=>this.resetContextKeys())),this._register(i.onHide(()=>this.resetContextKeys())),i}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new ge(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=qe.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},so(this.theme,{quickInputBackground:pR,quickInputForeground:kz,quickInputTitleBackground:Lz,contrastBorder:Ge,widgetShadow:po})),inputBox:so(this.theme,{inputForeground:f1,inputBackground:h1,inputBorder:g1,inputValidationInfoBackground:vA,inputValidationInfoForeground:CA,inputValidationInfoBorder:yA,inputValidationWarningBackground:wA,inputValidationWarningForeground:SA,inputValidationWarningBorder:xA,inputValidationErrorBackground:kA,inputValidationErrorForeground:LA,inputValidationErrorBorder:TA}),countBadge:so(this.theme,{badgeBackground:Kh,badgeForeground:Gh,badgeBorder:Ge}),button:so(this.theme,{buttonForeground:Ep,buttonBackground:kL,buttonHoverBackground:_z,buttonBorder:Ge}),progressBar:so(this.theme,{progressBarBackground:bz}),keybindingLabel:so(this.theme,{keybindingLabelBackground:Ez,keybindingLabelForeground:Az,keybindingLabelBorder:Iz,keybindingLabelBottomBorder:Nz,keybindingLabelShadow:po}),list:so(this.theme,{listBackground:pR,listInactiveFocusForeground:Ip,listInactiveSelectionIconForeground:Np,listInactiveFocusBackground:Mp,listFocusOutline:$t,listInactiveFocusOutline:$t,pickerGroupBorder:Dz,pickerGroupForeground:Tz})}}};PT=rne([fp(0,Ve),fp(1,Re),fp(2,It),fp(3,Wl),fp(4,Rg)],PT);var e7=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Id=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let FT=class extends PT{constructor(e,t,n,i,s,o){super(t,n,i,s,new eT(e.getContainerDomNode(),o)),this.host=void 0;const a=ng.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return l.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};FT=e7([Id(1,Ve),Id(2,Re),Id(3,It),Id(4,Wl),Id(5,bt)],FT);let BT=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(FT,e);this.mapEditorToService.set(e,t),Al(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=qe.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};BT=e7([Id(0,Ve),Id(1,bt)],BT);class ng{constructor(e){this.editor=e,this.widget=new U1(this.editor)}static get(e){return e.getContribution(ng.ID)}dispose(){this.widget.dispose()}}ng.ID="editor.controller.quickInput";class U1{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return U1.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}U1.ID="editor.contrib.quickInputWidget";ct(ng.ID,ng);class one{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}}function ane(r){if(!r||!Array.isArray(r))return[];const e=[];let t=0;for(let n=0,i=r.length;n<i;n++){const s=r[n];let o=-1;if(typeof s.fontStyle=="string"){o=0;const c=s.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new one(s.token||"",n,o,a,l)}return e}function lne(r,e){r.sort((d,u)=>{const h=fne(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,n="000000",i="ffffff";for(;r.length>=1&&r[0].token==="";){const d=r.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(i=d.background)}const s=new dne;for(const d of e)s.getId(d);const o=s.getId(n),a=s.getId(i),l=new n7(t,o,a),c=new i7(l);for(let d=0,u=r.length;d<u;d++){const h=r[d];c.insert(h.token,h.fontStyle,s.getId(h.foreground),s.getId(h.background))}return new t7(s,c)}const cne=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;let dne=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(cne);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=W.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}};class t7{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(ane(e),t)}static createFromParsedTokenTheme(e,t){return lne(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const i=this._match(t),s=hne(t);n=(i.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const une=/\b(comment|string|regex|regexp)\b/;function hne(r){const e=r.match(une);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function fne(r,e){return r<e?-1:r>e?1:0}let n7=class{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new n7(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}},i7=class{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const s=this._children.get(n);return typeof s<"u"?s.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}const s=e.indexOf(".");let o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(o);typeof l>"u"&&(l=new i7(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,i)}};function gne(r){const e=[];for(let t=1,n=r.length;t<n;t++){const i=r[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const pne={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Pn]:"#FFFFFE",[Ks]:"#000000",[DA]:"#E5EBF1",[ob]:"#D3D3D3",[ab]:"#939393",[EA]:"#ADD6FF4D"}},mne={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Pn]:"#1E1E1E",[Ks]:"#D4D4D4",[DA]:"#3A3D41",[ob]:"#404040",[ab]:"#707070",[EA]:"#ADD6FF26"}},_ne={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Pn]:"#000000",[Ks]:"#FFFFFF",[ob]:"#FFFFFF",[ab]:"#FFFFFF"}},bne={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Pn]:"#FFFFFF",[Ks]:"#292929",[ob]:"#292929",[ab]:"#292929"}};function vne(r){const e=new R,t=q3();return t.onDidChange(()=>e.fire()),r?.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const n=r?r.getProductIconTheme():new s7,i={},s=a=>{const l=n.getIcon(a);if(!l)return;const c=l.font;return c?(i[c.id]=c.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${cR(c.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},o=[];for(const a of t.getIcons()){const l=s(a);l&&o.push(l)}for(const a in i){const l=i[a],c=l.weight?`font-weight: ${l.weight};`:"",d=l.style?`font-style: ${l.style};`:"",u=l.src.map(h=>`${gu(h.location)} format('${h.format}')`).join(", ");o.push(`@font-face { src: ${u}; font-family: ${cR(a)};${c}${d} font-display: block; }`)}return o.join(`
`)}}}class s7{getIcon(e){const t=q3();let n=e.defaults;for(;mt.isThemeIcon(n);){const i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}}const ul="vs",kf="vs-dark",eu="hc-black",tu="hc-light",r7=Jt.as(A5.ColorContribution),Cne=Jt.as(v5.ThemingContribution);class o7{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(S0(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,W.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=WT(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,W.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=r7.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case ul:return fr.LIGHT;case eu:return fr.HIGH_CONTRAST_DARK;case tu:return fr.HIGH_CONTRAST_LIGHT;default:return fr.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=WT(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const s={token:""};n&&(s.foreground=n),i&&(s.background=i),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=t7.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=ci.getForeground(s),a=ci.getFontStyle(s);return{foreground:o,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4),strikethrough:Boolean(a&8)}}}function S0(r){return r===ul||r===kf||r===eu||r===tu}function WT(r){switch(r){case ul:return pne;case kf:return mne;case eu:return _ne;case tu:return bne}}function Iv(r){const e=WT(r);return new o7(r,e)}class yne extends j{constructor(){super(),this._onColorThemeChange=this._register(new R),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new R),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new s7,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(ul,Iv(ul)),this._knownThemes.set(kf,Iv(kf)),this._knownThemes.set(eu,Iv(eu)),this._knownThemes.set(tu,Iv(tu));const e=vne(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(ul),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),ZE("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return Vm(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Sr(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),j.None}_registerShadowDomContainer(e){const t=Sr(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!S0(t.base)&&!S0(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new o7(e,t)),S0(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(ul),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==Li(this._theme.type)){let t;$m(this._theme.type)?t=e?eu:kf:t=e?tu:ul,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};Cne.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const i=[];for(const o of r7.getColors()){const a=this._theme.getColor(o.id,!0);a&&i.push(`${E5(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${i.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(gne(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Yt.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const tr=tt("themeService");var wne=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let VT=class extends j{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new R,this._onDidChangeReducedMotion=new R,this._accessibilityModeEnabledContext=ib.bindTo(this._contextKeyService);const i=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),i(),this._register(this.onDidChangeScreenReaderOptimized(()=>i()));const s=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(Z(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const n=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",n),this._layoutService.container.classList.toggle("enable-motion",!n)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};VT=wne([dx(0,Re),dx(1,Rg),dx(2,ft)],VT);var Wp=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},rf;(function(r){r[r.None=0]="None",r[r.Initialized=1]="Initialized",r[r.Closed=2]="Closed"})(rf||(rf={}));class Lf extends j{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new R),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=rf.None,this.cache=new Map,this.flushDelayer=new IU(Lf.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,s)=>this.accept(s,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===rf.Closed)return;let n=!1;Us(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return Us(n)?t:n}getBoolean(e,t){const n=this.get(e);return Us(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Us(n)?t:parseInt(n,10)}set(e,t){return Wp(this,void 0,void 0,function*(){if(this.state===rf.Closed)return;if(Us(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return Wp(this,void 0,void 0,function*(){if(!(this.state===rf.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return Wp(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return Wp(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}Lf.DEFAULT_FLUSH_DELAY=100;class ux{constructor(){this.onDidChangeItemsExternal=ve.None,this.items=new Map}updateItems(e){var t,n;return Wp(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((i,s)=>this.items.set(s,i)),(n=e.delete)===null||n===void 0||n.forEach(i=>this.items.delete(i))})}}const Nv="__$__targetStorageMarker",Qr=tt("storageService");var ry;(function(r){r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN"})(ry||(ry={}));class j1 extends j{constructor(e={flushInterval:j1.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new K0),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new K0),this._onWillSaveState=this._register(new R),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(e,t){if(t===Nv){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(Us(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,n,i),(s=this.getStorage(n))===null||s===void 0||s.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,s;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(Nv,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(s=this.getStorage(t))===null||s===void 0||s.set(Nv,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.get(Nv,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}j1.DEFAULT_FLUSH_INTERVAL=60*1e3;class Sne extends j1{constructor(){super(),this.applicationStorage=this._register(new Lf(new ux)),this.profileStorage=this._register(new Lf(new ux)),this.workspaceStorage=this._register(new Lf(new ux)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}var GI=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Tf=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let HT=class{constructor(e,t){this._commandService=e,this._hiddenStates=new oy(t)}createMenu(e,t,n){return new UT(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};HT=GI([Tf(0,Sn),Tf(1,Qr)],HT);let oy=class Vp{constructor(e){this._storageService=e,this._disposables=new Q,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1;try{const t=e.get(Vp._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(t=>{if(t.key===Vp._key){if(!this._ignoreChangeEvent)try{const n=e.get(Vp._key,0,"{}");this._data=JSON.parse(n)}catch(n){console.log("FAILED to read storage after UPDATE",n)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}isHidden(e,t){var n,i;return(i=(n=this._data[e.id])===null||n===void 0?void 0:n.includes(t))!==null&&i!==void 0?i:!1}updateHidden(e,t,n){const i=this._data[e.id];if(n)i?i.indexOf(t)<0&&i.push(t):this._data[e.id]=[t];else if(i){const s=i.indexOf(t);s>=0&&M6(i,s),i.length===0&&delete this._data[e.id]}this._persist()}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Vp._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};oy._key="menu.hiddenCommands";oy=GI([Tf(0,Qr)],oy);let UT=class Oh{constructor(e,t,n,i,s,o){this._id=e,this._hiddenStates=t,this._options=n,this._commandService=i,this._contextKeyService=s,this._menuService=o,this._disposables=new Q,this._menuGroups=[],this._contextKeys=new Set,this._build();const a=new Tt(()=>{this._build(),this._onDidChange.fire(this)},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(vr.onDidChangeMenu(d=>{d.has(e)&&a.schedule()}));const l=this._disposables.add(new Q),c=()=>{const d=new Tt(()=>this._onDidChange.fire(this),n.eventDebounceDelay);l.add(d),l.add(s.onDidChangeContext(u=>{u.affectsSome(this._contextKeys)&&d.schedule()})),l.add(t.onDidChange(()=>{d.schedule()}))};this._onDidChange=new R({onFirstListenerAdd:c,onLastListenerRemove:l.clear.bind(l)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=vr.getMenuItems(this._id);let t;e.sort(Oh._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(Oh._fillInKbExprKeys(e.when,this._contextKeys),zh(e)){if(e.command.precondition&&Oh._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Oh._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&vr.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(const n of this._menuGroups){const[i,s]=n,o=[],a=[];for(const l of s)if(this._contextKeyService.contextMatchesRules(l.when)){let c;if(zh(l)){const u=xne(this._id,l.command,this._hiddenStates);c=new Fc(l.command,l.alt,e,u,this._contextKeyService,this._commandService)}else c=new bA(l,this._menuService,this._contextKeyService,e),c.actions.length===0&&(c.dispose(),c=void 0);c&&a.push(c)}a.length>0&&t.push([i,a]),o.length>0}return t}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}static _compareMenuItems(e,t){const n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;const a=n.localeCompare(i);if(a!==0)return a}const s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:Oh._compareTitles(zh(e)?e.command.title:e.title,zh(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}};UT=GI([Tf(3,Sn),Tf(4,Re),Tf(5,qu)],UT);function xne(r,e,t){const n=`${r.id}/${e.id}`,i=typeof e.title=="string"?e.title:e.title.value,s=uR({id:n,label:p("hide.label","Hide '{0}'",i),run(){t.updateHidden(r,e.id,!0)}}),o=uR({id:n,label:i,get checked(){return!t.isHidden(r,e.id)},run(){const a=!t.isHidden(r,e.id);t.updateHidden(r,e.id,a)}});return{hide:s,toggle:o,get isHidden(){return!o.checked}}}var kne=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},AO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},vh=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let jT=class extends j{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(Il||XE)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=()=>{const t=new sA;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(n=>vh(this,void 0,void 0,function*(){(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)}))};this.layoutService.hasContainer&&(this._register(Z(this.layoutService.container,"click",e)),this._register(Z(this.layoutService.container,"keydown",e)))}writeText(e,t){return vh(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,i=document.body.appendChild(ee("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return vh(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return vh(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return vh(this,void 0,void 0,function*(){this.findText=e})}readResources(){return vh(this,void 0,void 0,function*(){return this.resources})}};jT=kne([AO(0,Rg),AO(1,Zr)],jT);var Lne=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Tne=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const pm="data-keybinding-context";let qI=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class ig extends qI{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}ig.INSTANCE=new ig;class C_ extends qI{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=Sf.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===7){const s=Array.from(Ye.map(this._values,([o])=>o));this._values.clear(),n.fire(new NO(s))}else{const s=[];for(const o of i.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...Ye.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new NO(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(C_._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(C_._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}C_._keyPrefix="config.";class Dne{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class IO{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class NO{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class Ene{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function Ane(r,e){return r.allKeysContainedIn(new Set(Object.keys(e)))}class a7{constructor(e){this._onDidChangeContext=new K0({merge:t=>new Ene(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Dne(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Ine(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new IO(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new IO(e))}getContext(e){return this._isDisposed?ig.INSTANCE:this.getContextValuesContainer(Nne(e))}}let $T=class extends a7{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Q,this._lastContextId=0;const t=new C_(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?ig.INSTANCE:this._contexts.get(e)||ig.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new qI(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};$T=Lne([Tne(0,ft)],$T);class Ine extends a7{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Fi,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(pm)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(pm,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;Ane(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(pm),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?ig.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function Nne(r){for(;r;){if(r.hasAttribute(pm)){const e=r.getAttribute(pm);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}function Mne(r,e,t){r.get(Re).createKey(String(e),Rne(t))}function Rne(r){return QF(r,e=>{if(typeof e=="object"&&e.$mid===1)return Se.revive(e).toString();if(e instanceof Se)return e.toString()})}rt.registerCommand(q$,Mne);rt.registerCommand({id:"getContextKeyInfo",handler(){return[...ge.all()].sort((r,e)=>r.key.localeCompare(e.key))},description:{description:p("getContextKeyInfo","A command that returns information about context keys"),args:[]}});rt.registerCommand("_generateContextKeyInfo",function(){const r=[],e=new Set;for(const t of ge.all())e.has(t.key)||(e.add(t.key),r.push(t));r.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(r,void 0,2))});let One=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class Pne{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new One(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(i,t);if(s)return s;t.delete(n)}}}class MO extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class ZI{constructor(e=new k1,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Ve,this)}createChild(e){return new ZI(e,this._strict,this)}invokeFunction(e,...t){const n=Wr.traceInvocation(e);let i=!1;try{return e({get:o=>{if(i)throw IV("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof Xo?(n=Wr.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Wr.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=ho.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of i){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const o=i.length>0?i[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...s)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Xo)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const n=this._getServiceInstanceOrDescriptor(e);return n instanceof Xo?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new Pne(a=>a.id.toString());let s=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(i.lookupOrInsertNode(a),s++>1e3)throw new MO(i);for(const l of ho.getServiceDependencies(a.desc.ctor)){const c=this._getServiceInstanceOrDescriptor(l.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),c instanceof Xo){const d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,d),o.push(d)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new MO(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Xo){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,s){if(this._services.get(e)instanceof Xo)return this._createServiceInstance(t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const s=new Cc(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];const l=s.value;let c=l[a];return typeof c!="function"||(c=c.bind(l),o[a]=c),c},set(o,a,l){return s.value[a]=l,!0}})}else return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class Wr{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Wr._None}static traceCreation(e){return Wr._None}branch(e,t){const n=new Wr(2,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Wr._totals+=e;let t=!1;function n(s,o){const a=[],l=new Array(s+1).join("	");for(const[c,d,u]of o._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=n(s+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const i=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Wr._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join(`
`))}}Wr._None=new class extends Wr{constructor(){super(-1,null)}stop(){}branch(){return this}};Wr._totals=0;class Fne{constructor(){this._byResource=new Pi,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new Pi,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){const n=this._byResource.get(e);return n?.get(t)}delete(e,t){let n=!1,i=!1;const s=this._byResource.get(e);s&&(n=s.delete(t));const o=this._byOwner.get(t);if(o&&(i=o.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Ye.empty():Se.isUri(e)?(s=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&s!==void 0?s:Ye.empty():Ye.map(Ye.concat(...this._byOwner.values()),o=>o[1])}}class Bne{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Pi,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===He.inMemory||e.scheme===He.walkThrough||e.scheme===He.walkThroughSnippet||e.scheme===He.vscodeSourceControl)return t;for(const{severity:n}of this._service.read({resource:e}))n===Xt.Error?t.errors+=1:n===Xt.Warning?t.warnings+=1:n===Xt.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class nc{constructor(){this._onMarkerChanged=new HV({delay:0,merge:nc._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new Fne,this._stats=new Bne(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if($F(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const s of n){const o=nc._toMarker(e,t,s);o&&i.push(o)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=n;if(o)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:i,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const n=[],i=this._data.values(e);if(i)for(const s of i){const o=Ye.first(s);o&&(n.push(o.resource),this._data.delete(o.resource,e))}if(Si(t)){const s=new Pi;for(const{resource:o,marker:a}of t){const l=nc._toMarker(e,o,a);if(!l)continue;const c=s.get(o);c?c.push(l):(s.set(o,[l]),n.push(o))}for(const[o,a]of s)this._data.set(o,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(nc._accept(l,i)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!n){const o=[];for(const a of this._data.values())for(const l of a)if(nc._accept(l,i)){const c=o.push(l);if(s>0&&c===s)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const c of l)if(nc._accept(c,i)){const d=a.push(c);if(s>0&&d===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Pi;for(const n of e)for(const i of n)t.set(i,!0);return Array.from(t.keys())}}function l7(r,e,t,n,i,s){if(Array.isArray(r)){let o=0;for(const a of r){const l=l7(a,e,t,n,i,s);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof r=="string")return n?r==="*"?5:r===t?10:0:0;if(r){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=r;if(!n&&!c)return 0;d&&i&&(e=i);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(o)if(o===t)u=10;else if(o==="*")u=Math.max(u,5);else return 0;if(d)if(d===s)u=10;else if(d==="*"&&s!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h=Object.assign(Object.assign({},a),{base:l4(a.base)}),h===e.fsPath||EJ(h,e.fsPath))u=10;else return 0}return u}else return 0}}function c7(r){return typeof r=="string"?!1:Array.isArray(r)?r.every(c7):!!r.exclusive}class RO{constructor(e,t,n,i){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((n=e.notebookUri)===null||n===void 0?void 0:n.toString())}}class tn{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new R,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Ke(()=>{if(n){const i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,s=>{n&&i===s._score?n.push(s.provider):(i=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;const i=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),s=i?new RO(e.uri,e.getLanguageId(),i.uri,i.type):new RO(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((n=this._lastCandidate)===null||n===void 0)&&n.equals(s))){this._lastCandidate=s;for(const o of this._entries)if(o._score=l7(o.selector,s.uri,s.languageId,jH(e),s.notebookUri,s.notebookType),c7(o.selector)&&o._score>0){for(const a of this._entries)a._score=0;o._score=1e3;break}this._entries.sort(tn._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class Wne{constructor(){this.referenceProvider=new tn(this._score.bind(this)),this.renameProvider=new tn(this._score.bind(this)),this.codeActionProvider=new tn(this._score.bind(this)),this.definitionProvider=new tn(this._score.bind(this)),this.typeDefinitionProvider=new tn(this._score.bind(this)),this.declarationProvider=new tn(this._score.bind(this)),this.implementationProvider=new tn(this._score.bind(this)),this.documentSymbolProvider=new tn(this._score.bind(this)),this.inlayHintsProvider=new tn(this._score.bind(this)),this.colorProvider=new tn(this._score.bind(this)),this.codeLensProvider=new tn(this._score.bind(this)),this.documentFormattingEditProvider=new tn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new tn(this._score.bind(this)),this.onTypeFormattingEditProvider=new tn(this._score.bind(this)),this.signatureHelpProvider=new tn(this._score.bind(this)),this.hoverProvider=new tn(this._score.bind(this)),this.documentHighlightProvider=new tn(this._score.bind(this)),this.selectionRangeProvider=new tn(this._score.bind(this)),this.foldingRangeProvider=new tn(this._score.bind(this)),this.linkProvider=new tn(this._score.bind(this)),this.inlineCompletionsProvider=new tn(this._score.bind(this)),this.completionProvider=new tn(this._score.bind(this)),this.linkedEditingRangeProvider=new tn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new tn(this._score.bind(this)),this.documentSemanticTokensProvider=new tn(this._score.bind(this)),this.documentOnDropEditProvider=new tn(this._score.bind(this)),this.documentPasteEditProvider=new tn(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}lt(be,Wne,!0);class Vne extends Ss{constructor(e={}){const t=Jt.as(Bl.Configuration).getConfigurationProperties(),n=Object.keys(t),i=Object.create(null),s=[];for(const o in t){const a=e[o],l=a!==void 0?a:t[o].default;tA(i,o,l,c=>console.error(`Conflict in default settings: ${c}`))}for(const o of Object.keys(i))Mm.test(o)&&s.push({identifiers:O4(o),keys:Object.keys(i[o]),contents:I4(i[o],a=>console.error(`Conflict in default settings file: ${a}`))});super(i,n,s)}}var rd=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Oi=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},d7=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Hne{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new R}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let zT=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new PV(new Hne(t))):Promise.reject(new Error("Model not found"))}};zT=rd([Oi(0,en)],zT);class $1{show(){return $1.NULL_PROGRESS_RUNNER}showWhile(e,t){return d7(this,void 0,void 0,function*(){yield e})}}$1.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class Une{withProgress(e,t,n){return t({report:()=>{}})}}class jne{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,i){return Promise.resolve({choice:0})}}class z1{info(e){return this.notify({severity:Zt.Info,message:e})}warn(e){return this.notify({severity:Zt.Warning,message:e})}error(e){return this.notify({severity:Zt.Error,message:e})}notify(e){switch(e.severity){case Zt.Error:console.error(e.message);break;case Zt.Warning:console.warn(e.message);break;default:console.log(e.message);break}return z1.NO_OP}status(e,t){return j.None}}z1.NO_OP=new vX;let KT=class{constructor(e){this._onWillExecuteCommand=new R,this._onDidExecuteCommand=new R,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=rt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}};KT=rd([Oi(0,Ve)],KT);let sg=class extends lJ{constructor(e,t,n,i,s,o){super(e,t,n,i,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new Q;g.add(Z(f,he.KEY_DOWN,_=>{const b=new jt(_);this._dispatch(b,b.target)&&(b.preventDefault(),b.stopPropagation())})),g.add(Z(f,he.KEY_UP,_=>{const b=new jt(_);this._singleModifierDispatch(b,b.target)&&b.preventDefault()})),this._domNodeListeners.push(new $ne(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const _=this._domNodeListeners[g];_.domNode===f&&(this._domNodeListeners.splice(g,1),_.dispose())}},c=f=>{f.getOption(56)||a(f.getContainerDomNode())},d=f=>{f.getOption(56)||l(f.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(d)),o.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(o.onDiffEditorAdd(u)),this._register(o.onDiffEditorRemove(h)),o.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,n,i){return yo(rt.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}addDynamicKeybindings(e){const t=e.map(n=>{var i,s;const o=_L(n.keybinding,ar);return{keybinding:(i=o?.parts)!==null&&i!==void 0?i:null,command:(s=n.command)!==null&&s!==void 0?s:null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Ke(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Ms.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new hm(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)n[i++]=new j2(void 0,s.command,s.commandArgs,o,t,null,!1);else{const l=l_.resolveUserBinding(a,ar);for(const c of l)n[i++]=new j2(c,s.command,s.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new uu(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new l_(t,ar)}};sg=rd([Oi(0,Re),Oi(1,Sn),Oi(2,No),Oi(3,xn),Oi(4,Zr),Oi(5,bt)],sg);class $ne extends j{constructor(e,t){super(),this.domNode=e,this._register(t)}}function OO(r){return r&&typeof r=="object"&&(!r.overrideIdentifier||typeof r.overrideIdentifier=="string")&&(!r.resource||r.resource instanceof Se)}class u7{constructor(){this._onDidChangeConfiguration=new R,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new E1(new Vne,new Ss,new Ss,new Ss)}getValue(e,t){const n=typeof e=="string"?e:void 0,i=OO(e)?e:OO(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[s,o]=i;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),n.push(s))}if(n.length>0){const i=new oJ({keys:n,overrides:[]},t,this._configuration);i.source=8,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}let GT=class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new R,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,i)=>t.affectsConfiguration(i)})})}getValue(e,t,n){const s=(B.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof s>"u"?this.configurationService.getValue():this.configurationService.getValue(s)}};GT=rd([Oi(0,ft)],GT);let qT=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Ti||Je?`
`:`\r
`}};qT=rd([Oi(0,ft)],qT);class zne{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class y_{constructor(){const e=Se.from({scheme:y_.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new gJ({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===y_.SCHEME?this.workspace.folders[0]:null}}y_.SCHEME="inmemory";function ay(r,e,t){if(!e||!(r instanceof u7))return;const n=[];Object.keys(e).forEach(i=>{iJ(i)&&n.push([`editor.${i}`,e[i]]),t&&sJ(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&r.updateValues(n)}let ZT=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return d7(this,void 0,void 0,function*(){const n=new Map;for(const o of e){if(!(o instanceof Qd))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(Gt.replaceMove(x.lift(o.textEdit.range),o.textEdit.text))}let i=0,s=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),s+=1,i+=a.length;return{ariaSummary:hr(lT.bulkEditServiceSummary,i,s)}})}};ZT=rd([Oi(0,en)],ZT);class Kne{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return kr(e)}}let YT=class extends cT{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const i=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();i&&(t=i.getContainerDomNode())}return super.showContextView(e,t,n)}};YT=rd([Oi(0,Rg),Oi(1,bt)],YT);class Gne{constructor(){this._neverEmitter=new R,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class qne extends h_{constructor(){super()}}class Zne extends bj{constructor(){super(new _j)}}let XT=class extends hT{constructor(e,t,n,i,s){super(e,t,n,i,s),this.configure({blockMouse:!1})}};XT=rd([Oi(0,No),Oi(1,xn),Oi(2,Qu),Oi(3,Mn),Oi(4,It)],XT);lt(ft,u7);lt(cA,GT);lt(z4,qT);lt(c_,y_);lt(Jf,Kne);lt(No,zne);lt(hb,jne);lt(xn,z1);lt(Ia,nc);lt(Qt,qne);lt(tr,yne);lt(Zr,Zne);lt(en,JC);lt(mA,_T);lt(Re,$T);lt(J3,Une);lt(id,$1);lt(Qr,Sne);lt(Tr,pL);lt(fb,ZT);lt(f9,Gne);lt(ps,zT);lt(Wl,VT);lt(Ar,AT);lt(Sn,KT);lt(Mn,sg);lt(Ul,BT);lt(Qu,YT);lt(Dr,mT);lt(Hl,jT);lt(Vl,XT);lt(qu,HT);var Ae;(function(r){const e=new k1;for(const[o,a]of kM())e.set(o,a);const t=new ZI(e,!0);e.set(Ve,t);function n(o){const a=e.get(o);if(!a)throw new Error("Missing service "+o);return a instanceof Xo?t.invokeFunction(l=>l.get(o)):a}r.get=n;let i=!1;function s(o){if(i)return t;i=!0;for(const[a,l]of kM())e.get(a)||e.set(a,l);for(const a in o)if(o.hasOwnProperty(a)){const l=tt(a);e.get(l)instanceof Xo&&e.set(l,o[a])}return t}r.initialize=s})(Ae||(Ae={}));var YI=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ut=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Yne=0,PO=!1;function Xne(r){if(!r){if(PO)return;PO=!0}z$(r||document.body)}let ly=class extends Yf{constructor(e,t,n,i,s,o,a,l,c,d,u,h){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||KC.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+KC.accessibilityHelpMessage,super(e,f,{},n,i,s,o,l,c,d,u,h),a instanceof sg?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,Xne(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++Yne,s=le.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),j.None;const t=e.id,n=e.label,i=le.and(le.equals("editorId",this.getId()),le.deserialize(e.precondition)),s=e.keybindings,o=le.and(i,le.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new Q,u=this.getId()+":"+t;if(d.add(rt.registerCommand(u,c)),a){const f={command:{id:u,title:n},when:i,group:a,order:l};d.add(vr.appendMenuItem(M.EditorContext,f))}if(Array.isArray(s))for(const f of s)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));const h=new h3(u,n,n,i,c,this._contextKeyService);return this._actions[t]=h,d.add(Ke(()=>{delete this._actions[t]})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof VC)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};ly=YI([Ut(2,Ve),Ut(3,bt),Ut(4,Sn),Ut(5,Re),Ut(6,Mn),Ut(7,It),Ut(8,xn),Ut(9,Wl),Ut(10,_n),Ut(11,be)],ly);let QT=class extends ly{constructor(e,t,n,i,s,o,a,l,c,d,u,h,f,g,_){const b=Object.assign({},t);ay(d,b,!1);const v=l.registerEditorContainer(e);typeof b.theme=="string"&&l.setTheme(b.theme),typeof b.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(Boolean(b.autoDetectHighContrast));const C=b.model;delete b.model,super(e,b,n,i,s,o,a,l,c,u,g,_),this._configurationService=d,this._standaloneThemeService=l,this._register(v);let y;if(typeof C>"u"){const w=f.getLanguageIdByMimeType(b.language)||b.language||br;y=h7(h,f,b.value||"",w,void 0),this._ownsModel=!0}else y=C,this._ownsModel=!1;if(this._attachModel(y),y){const w={oldModelUrl:null,newModelUrl:y.uri};this._onDidChangeModel.fire(w)}}dispose(){super.dispose()}updateOptions(e){ay(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};QT=YI([Ut(2,Ve),Ut(3,bt),Ut(4,Sn),Ut(5,Re),Ut(6,Mn),Ut(7,tr),Ut(8,xn),Ut(9,ft),Ut(10,Wl),Ut(11,en),Ut(12,Qt),Ut(13,_n),Ut(14,be)],QT);let JT=class extends Uc{constructor(e,t,n,i,s,o,a,l,c,d,u,h){const f=Object.assign({},t);ay(c,f,!0);const g=a.registerEditorContainer(e);typeof f.theme=="string"&&a.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&a.setAutoDetectHighContrast(Boolean(f.autoDetectHighContrast)),super(e,f,{},h,s,i,n,o,a,l,d,u),this._configurationService=c,this._standaloneThemeService=a,this._register(g)}dispose(){super.dispose()}updateOptions(e){ay(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(ly,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};JT=YI([Ut(2,Ve),Ut(3,Re),Ut(4,Tr),Ut(5,bt),Ut(6,tr),Ut(7,xn),Ut(8,ft),Ut(9,Vl),Ut(10,id),Ut(11,Hl)],JT);function h7(r,e,t,n,i){if(t=t||"",!n){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),FO(r,t,e.createByFilepathOrFirstLine(i||null,o),i)}return FO(r,t,e.createById(n),i)}function FO(r,e,t,n){return r.createModel(e,t,n)}function Qne(r,e,t){return Ae.initialize(t||{}).createInstance(QT,r,e)}function Jne(r){return Ae.get(bt).onCodeEditorAdd(t=>{r(t)})}function eie(r){return Ae.get(bt).onDiffEditorAdd(t=>{r(t)})}function tie(){return Ae.get(bt).listCodeEditors()}function nie(){return Ae.get(bt).listDiffEditors()}function iie(r,e,t){return Ae.initialize(t||{}).createInstance(JT,r,e)}function sie(r,e){return new WH(r,e)}function rie(r){if(typeof r.id!="string"||typeof r.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return rt.registerCommand(r.id,r.run)}function oie(r){if(typeof r.id!="string"||typeof r.label!="string"||typeof r.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=le.deserialize(r.precondition),t=(i,...s)=>Un.runEditorCommand(i,s,e,(o,a,l)=>Promise.resolve(r.run(a,...l))),n=new Q;if(n.add(rt.registerCommand(r.id,t)),r.contextMenuGroupId){const i={command:{id:r.id,title:r.label},when:e,group:r.contextMenuGroupId,order:r.contextMenuOrder||0};n.add(vr.appendMenuItem(M.EditorContext,i))}if(Array.isArray(r.keybindings)){const i=Ae.get(Mn);if(!(i instanceof sg))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=le.and(e,le.deserialize(r.keybindingContext));n.add(i.addDynamicKeybindings(r.keybindings.map(o=>({keybinding:o,command:r.id,when:s}))))}}return n}function aie(r){return f7([r])}function f7(r){const e=Ae.get(Mn);return e instanceof sg?e.addDynamicKeybindings(r.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:le.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),j.None)}function lie(r,e,t){const n=Ae.get(Qt),i=n.getLanguageIdByMimeType(e)||e;return h7(Ae.get(en),n,r,i,t)}function cie(r,e){const t=Ae.get(Qt);Ae.get(en).setMode(r,t.createById(e))}function die(r,e,t){r&&Ae.get(Ia).changeOne(e,r.uri,t)}function uie(r){Ae.get(Ia).changeAll(r,[])}function hie(r){return Ae.get(Ia).read(r)}function fie(r){return Ae.get(Ia).onMarkerChanged(r)}function gie(r){return Ae.get(en).getModel(r)}function pie(){return Ae.get(en).getModels()}function mie(r){return Ae.get(en).onModelAdded(r)}function _ie(r){return Ae.get(en).onModelRemoved(r)}function bie(r){return Ae.get(en).onModelLanguageChanged(t=>{r({model:t.model,oldLanguage:t.oldLanguageId})})}function vie(r){return Sj(Ae.get(en),Ae.get(_n),r)}function Cie(r,e){const t=Ae.get(Qt),n=Ae.get(tr);return n.registerEditorContainer(r),fA.colorizeElement(n,t,r,e)}function yie(r,e,t){const n=Ae.get(Qt);return Ae.get(tr).registerEditorContainer(document.body),fA.colorize(n,r,e,t)}function wie(r,e,t=4){return Ae.get(tr).registerEditorContainer(document.body),fA.colorizeModelLine(r,e,t)}function Sie(r){const e=Yt.get(r);return e||{getInitialState:()=>Bf,tokenize:(t,n,i)=>nA(r,i)}}function xie(r,e){Yt.getOrCreate(e);const t=Sie(e),n=va(r),i=[];let s=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenize(l,!0,s);i[o]=c.tokens,s=c.endState}return i}function kie(r,e){Ae.get(tr).defineTheme(r,e)}function Lie(r){Ae.get(tr).setTheme(r)}function Tie(){sL.clearAllFontInfos()}function Die(r,e){return rt.registerCommand({id:r,handler:e})}function Eie(){return{create:Qne,getEditors:tie,getDiffEditors:nie,onDidCreateEditor:Jne,onDidCreateDiffEditor:eie,createDiffEditor:iie,createDiffNavigator:sie,addCommand:rie,addEditorAction:oie,addKeybindingRule:aie,addKeybindingRules:f7,createModel:lie,setModelLanguage:cie,setModelMarkers:die,getModelMarkers:hie,removeAllMarkers:uie,onDidChangeMarkers:fie,getModels:pie,getModel:gie,onDidCreateModel:mie,onWillDisposeModel:_ie,onDidChangeModelLanguage:bie,createWebWorker:vie,colorizeElement:Cie,colorize:yie,colorizeModelLine:wie,tokenize:xie,defineTheme:kie,setTheme:Lie,remeasureFonts:Tie,registerCommand:Die,AccessibilitySupport:_k,ContentWidgetPositionPreference:wk,CursorChangeReason:Sk,DefaultEndOfLine:xk,EditorAutoIndentStrategy:Lk,EditorOption:Tk,EndOfLinePreference:Dk,EndOfLineSequence:Ek,MinimapPosition:Fk,MouseTargetType:Bk,OverlayWidgetPositionPreference:Wk,OverviewRulerLane:Vk,RenderLineNumbersType:Uk,RenderMinimap:jk,ScrollbarVisibility:zk,ScrollType:$k,TextEditorCursorBlinkingStyle:Yk,TextEditorCursorStyle:Xk,TrackedRangeStickiness:Qk,WrappingIndent:Jk,InjectedTextCursorStops:Ik,PositionAffinity:Hk,ConfigurationChangedEvent:JF,BareFontInfo:Gd,FontInfo:iL,TextModelResolvedOptions:d0,FindMatch:Nm,ApplyUpdateResult:qp,EditorType:J_,EditorOptions:Io}}function Aie(r,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!r(t))return!1;return!0}function Mv(r,e){return typeof r=="boolean"?r:e}function BO(r,e){return typeof r=="string"?r:e}function Iie(r){const e={};for(const t of r)e[t]=!0;return e}function WO(r,e=!1){e&&(r=r.map(function(n){return n.toLowerCase()}));const t=Iie(r);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function eD(r,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,o){n=!0;let a="";if(typeof r[o]=="string")a=r[o];else if(r[o]&&r[o]instanceof RegExp)a=r[o].source;else throw r[o]===void 0?Pt(r,"language definition does not contain attribute '"+o+"', used at: "+e):Pt(r,"attribute reference '"+o+"' must be a string, used at: "+e);return Nh(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");const i=(r.ignoreCase?"i":"")+(r.unicode?"u":"");return new RegExp(e,i)}function Nie(r,e,t,n){if(n<0)return r;if(n<e.length)return e[n];if(n>=100){n=n-100;const i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}function Mie(r,e,t,n){let i=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(i=parseInt(o[3]),o[2]&&(i=i+100)),s=o[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=WO(l.split("|"),r.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=r[l];if(!d)throw Pt(r,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Aie(function(h){return typeof h=="string"},d))throw Pt(r,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=WO(d,r.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=eD(r,"^"+l+"$");c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return eD(r,"^"+sc(r,l,u,h,f)+"$").test(d)};else if(l.indexOf("$")<0){const d=wc(r,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=wc(r,l);c=function(u,h,f,g,_){const b=sc(r,d,h,f,g);return a==="=="?u===b:u!==b}}return i===-1?{name:t,value:n,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:n,test:function(d,u,h,f){const g=Nie(d,u,h,i);return c(g||"",d,u,h,f)}}}function tD(r,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Pt(r,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Pt(r,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Pt(r,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!Uj(r,sc(r,i,"",[],""))))throw Pt(r,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,r.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let i=0,s=t.length;i<s;i++)n[i]=tD(r,e,t[i]);return{group:n}}else if(t.cases){const n=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const o=tD(r,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:o,name:s}):s==="@eos"?n.push({test:function(a,l,c,d){return d},value:o,name:s}):n.push(Mie(r,e,s,o))}const i=r.defaultToken;return{test:function(s,o,a,l){for(const c of n)if(!c.test||c.test(s,o,a,l))return c.value;return i}}}else throw Pt(r,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}let Rie=class{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Pt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=eD(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=tD(e,this.name,t)}};function g7(r,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=r,t.includeLF=Mv(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=Mv(e.ignoreCase,!1),t.unicode=Mv(e.unicode,!1),t.tokenPostfix=BO(e.tokenPostfix,"."+t.languageId),t.defaultToken=BO(e.defaultToken,"source"),t.usesEmbedded=!1;const n=e;n.languageId=r,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(o,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw Pt(t,"an 'include' attribute must be a string at: "+o);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw Pt(t,"include target '"+d+"' is not defined at: "+o);i(o+"."+d,a,e.tokenizer[d])}else{const u=new Rie(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(n,h)}else throw Pt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(n,c[1]);else{if(!c.regex)throw Pt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=Mv(c.matchOnlyAtLineStart,!1)),u.setRegex(n,c.regex),u.setAction(n,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Pt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,i("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Pt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Pt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:wc(t,a.open),close:wc(t,a.close)});else throw Pt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}var Oie=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function Pie(r){Ff.registerLanguage(r)}function Fie(){let r=[];return r=r.concat(Ff.getLanguages()),r}function Bie(r){return Ae.get(Qt).languageIdCodec.encodeLanguageId(r)}function Wie(r,e){const n=Ae.get(Qt).onDidEncounterLanguage(i=>{i===r&&(n.dispose(),e())});return n}function Vie(r,e){if(!Ae.get(Qt).isRegisteredLanguageId(r))throw new Error(`Cannot set configuration for unknown language ${r}`);return Ae.get(_n).register(r,e,100)}class Hie{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return w_.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new Fy(i.tokens,i.endState)}}class w_{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<i&&(l=i),n[s]=new Tm(l,a.scopes,t),i=l}return n}static adaptTokenize(e,t,n,i){const s=t.tokenize(n,i),o=w_._toClassicTokens(s.tokens,e);let a;return s.endState.equals(i)?a=i:a=s.endState,new VE(o,a)}tokenize(e,t,n){return w_.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let o=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=i.match(n,u.scopes);if(o>0&&s[o-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),s[o++]=f,s[o++]=h,a=f}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let o;return i.endState.equals(n)?o=n:o=i.endState,new Fy(s,o)}}function Uie(r){return typeof r.getInitialState=="function"}function jie(r){return"tokenizeEncoded"in r}function p7(r){return r&&typeof r.then=="function"}function $ie(r){const e=Ae.get(tr);if(r){const t=[null];for(let n=1,i=r.length;n<i;n++)t[n]=W.fromHex(r[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function m7(r,e){return jie(e)?new Hie(r,e):new w_(r,e,Ae.get(Qt),Ae.get(tr))}function XI(r,e){const t={createTokenizationSupport:()=>Oie(this,void 0,void 0,function*(){const n=yield Promise.resolve(e.create());return n?Uie(n)?m7(r,n):new Bm(Ae.get(Qt),Ae.get(tr),r,g7(r,n),Ae.get(ft)):null})};return Yt.registerFactory(r,t)}function zie(r,e){if(!Ae.get(Qt).isRegisteredLanguageId(r))throw new Error(`Cannot set tokens provider for unknown language ${r}`);return p7(e)?XI(r,{create:()=>e}):Yt.register(r,m7(r,e))}function Kie(r,e){const t=n=>new Bm(Ae.get(Qt),Ae.get(tr),r,g7(r,n),Ae.get(ft));return p7(e)?XI(r,{create:()=>e}):Yt.register(r,t(e))}function Gie(r,e){return Ae.get(be).referenceProvider.register(r,e)}function qie(r,e){return Ae.get(be).renameProvider.register(r,e)}function Zie(r,e){return Ae.get(be).signatureHelpProvider.register(r,e)}function Yie(r,e){return Ae.get(be).hoverProvider.register(r,{provideHover:(n,i,s)=>{const o=n.getWordAtPosition(i);return Promise.resolve(e.provideHover(n,i,s)).then(a=>{if(a)return!a.range&&o&&(a.range=new x(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn)),a.range||(a.range=new x(i.lineNumber,i.column,i.lineNumber,i.column)),a})}})}function Xie(r,e){return Ae.get(be).documentSymbolProvider.register(r,e)}function Qie(r,e){return Ae.get(be).documentHighlightProvider.register(r,e)}function Jie(r,e){return Ae.get(be).linkedEditingRangeProvider.register(r,e)}function ese(r,e){return Ae.get(be).definitionProvider.register(r,e)}function tse(r,e){return Ae.get(be).implementationProvider.register(r,e)}function nse(r,e){return Ae.get(be).typeDefinitionProvider.register(r,e)}function ise(r,e){return Ae.get(be).codeLensProvider.register(r,e)}function sse(r,e,t){return Ae.get(be).codeActionProvider.register(r,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(i,s,o,a)=>{const c=Ae.get(Ia).read({resource:i.uri}).filter(d=>x.areIntersectingOrTouching(d,s));return e.provideCodeActions(i,s,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function rse(r,e){return Ae.get(be).documentFormattingEditProvider.register(r,e)}function ose(r,e){return Ae.get(be).documentRangeFormattingEditProvider.register(r,e)}function ase(r,e){return Ae.get(be).onTypeFormattingEditProvider.register(r,e)}function lse(r,e){return Ae.get(be).linkProvider.register(r,e)}function cse(r,e){return Ae.get(be).completionProvider.register(r,e)}function dse(r,e){return Ae.get(be).colorProvider.register(r,e)}function use(r,e){return Ae.get(be).foldingRangeProvider.register(r,e)}function hse(r,e){return Ae.get(be).declarationProvider.register(r,e)}function fse(r,e){return Ae.get(be).selectionRangeProvider.register(r,e)}function gse(r,e){return Ae.get(be).documentSemanticTokensProvider.register(r,e)}function pse(r,e){return Ae.get(be).documentRangeSemanticTokensProvider.register(r,e)}function mse(r,e){return Ae.get(be).inlineCompletionsProvider.register(r,e)}function _se(r,e){return Ae.get(be).inlayHintsProvider.register(r,e)}function bse(){return{register:Pie,getLanguages:Fie,onLanguage:Wie,getEncodedLanguageId:Bie,setLanguageConfiguration:Vie,setColorMap:$ie,registerTokensProviderFactory:XI,setTokensProvider:zie,setMonarchTokensProvider:Kie,registerReferenceProvider:Gie,registerRenameProvider:qie,registerCompletionItemProvider:cse,registerSignatureHelpProvider:Zie,registerHoverProvider:Yie,registerDocumentSymbolProvider:Xie,registerDocumentHighlightProvider:Qie,registerLinkedEditingRangeProvider:Jie,registerDefinitionProvider:ese,registerImplementationProvider:tse,registerTypeDefinitionProvider:nse,registerCodeLensProvider:ise,registerCodeActionProvider:sse,registerDocumentFormattingEditProvider:rse,registerDocumentRangeFormattingEditProvider:ose,registerOnTypeFormattingEditProvider:ase,registerLinkProvider:lse,registerColorProvider:dse,registerFoldingRangeProvider:use,registerDeclarationProvider:hse,registerSelectionRangeProvider:fse,registerDocumentSemanticTokensProvider:gse,registerDocumentRangeSemanticTokensProvider:pse,registerInlineCompletionsProvider:mse,registerInlayHintsProvider:_se,DocumentHighlightKind:kk,CompletionItemKind:vk,CompletionItemTag:Ck,CompletionItemInsertTextRule:Y0,SymbolKind:qk,SymbolTag:Zk,IndentAction:Ak,CompletionTriggerKind:yk,SignatureHelpTriggerKind:Gk,InlayHintKind:Nk,InlineCompletionTriggerKind:Mk,CodeActionTriggerType:bk,FoldingRangeKind:ko}}const QI=tt("IEditorCancelService"),_7=new ge("cancellableOperation",!1,p("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));lt(QI,class{constructor(){this._tokens=new WeakMap}add(r,e){let t=this._tokens.get(r);t||(t=r.invokeWithinContext(i=>{const s=_7.bindTo(i.get(Re)),o=new qi;return{key:s,tokens:o}}),this._tokens.set(r,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(r){const e=this._tokens.get(r);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class vse extends fi{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(QI).add(e,this))}dispose(){this._unregister(),super.dispose()}}te(new class extends Un{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:_7})}runEditorCommand(r,e){r.get(QI).cancel(e)}});let cy=class{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?hr("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof cy))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new cy(e,this.flags))}};class ku extends vse{constructor(e,t,n,i){super(e,i),this._listener=new Q,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!x.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!x.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class JI extends fi{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function Ol(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===J_.ICodeEditor:!1}function b7(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===J_.IDiffEditor:!1}function v7(r){return Ol(r)?r:b7(r)?r.getModifiedEditor():null}class rg{static _handleEolEdits(e,t){let n;const i=[];for(const s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&i.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=rg._handleEolEdits(e,t);i.length===1&&rg._isFullModelReplaceEdit(e,i[0])?e.executeEdits("formatEditsCommand",i.map(s=>Gt.replace(x.lift(s.range),s.text))):e.executeEdits("formatEditsCommand",i.map(s=>Gt.replaceMove(x.lift(s.range),s.text))),n&&e.pushUndoStop()}}class hx{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var Ao=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function eN(r){if(r=r.filter(i=>i.range),!r.length)return;let{range:e}=r[0];for(let i=1;i<r.length;i++)e=x.plusRange(e,r[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?r.length===1?di(p("hint11","Made 1 formatting edit on line {0}",t)):di(p("hintn1","Made {0} formatting edits on line {1}",r.length,t)):r.length===1?di(p("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):di(p("hintnn","Made {0} formatting edits between lines {1} and {2}",r.length,t,n))}function C7(r,e,t){const n=[],i=new Set,s=r.ordered(t);for(const a of s)n.push(a),a.extensionId&&i.add(hx.toKey(a.extensionId));const o=e.ordered(t);for(const a of o){if(a.extensionId){if(i.has(hx.toKey(a.extensionId)))continue;i.add(hx.toKey(a.extensionId))}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return n}class Lu{static setFormatterSelector(e){return{dispose:Lu._selectors.unshift(e)}}static select(e,t,n){return Ao(this,void 0,void 0,function*(){if(e.length===0)return;const i=Ye.first(Lu._selectors);if(i)return yield i(e,t,n)})}}Lu._selectors=new qi;function y7(r,e,t,n,i,s){return Ao(this,void 0,void 0,function*(){const o=r.get(Ve),{documentRangeFormattingEditProvider:a}=r.get(be),l=Ol(e)?e.getModel():e,c=a.ordered(l),d=yield Lu.select(c,l,n);d&&(i.report(d),yield o.invokeFunction(Cse,d,e,t,s))})}function Cse(r,e,t,n,i){return Ao(this,void 0,void 0,function*(){const s=r.get(Tr);let o,a;Ol(t)?(o=t.getModel(),a=new ku(t,5,void 0,i)):(o=t,a=new JI(t,i));const l=[];let c=0;for(const g of NE(n).sort(x.compareRangesUsingStarts))c>0&&x.areIntersectingOrTouching(l[c-1],g)?l[c-1]=x.fromPositions(l[c-1].getStartPosition(),g.getEndPosition()):c=l.push(g);const d=g=>Ao(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(o,g,o.getFormattingOptions(),a.token))||[]}),u=(g,_)=>{if(!g.length||!_.length)return!1;const b=g.reduce((v,C)=>x.plusRange(v,C.range),g[0].range);if(!_.some(v=>x.intersectRanges(b,v.range)))return!1;for(const v of g)for(const C of _)if(x.intersectRanges(v.range,C.range))return!0;return!1},h=[],f=[];try{for(const g of l){if(a.token.isCancellationRequested)return!0;f.push(yield d(g))}for(let g=0;g<l.length;++g)for(let _=g+1;_<l.length;++_){if(a.token.isCancellationRequested)return!0;if(u(f[g],f[_])){const b=x.plusRange(l[g],l[_]),v=yield d(b);l.splice(_,1),l.splice(g,1),l.push(b),f.splice(_,1),f.splice(g,1),f.push(v),g=0,_=0}}for(const g of f){if(a.token.isCancellationRequested)return!0;const _=yield s.computeMoreMinimalEdits(o.uri,g);_&&h.push(..._)}}finally{a.dispose()}if(h.length===0)return!1;if(Ol(t))rg.execute(t,h,!0),eN(h),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:g}]=h,_=new ue(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn);o.pushEditOperations([_],h.map(b=>({text:b.text,range:x.lift(b.range),forceMoveMarkers:!0})),b=>{for(const{range:v}of b)if(x.areIntersectingOrTouching(v,_))return[new ue(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn)];return null})}return!0})}function yse(r,e,t,n,i){return Ao(this,void 0,void 0,function*(){const s=r.get(Ve),o=r.get(be),a=Ol(e)?e.getModel():e,l=C7(o.documentFormattingEditProvider,o.documentRangeFormattingEditProvider,a),c=yield Lu.select(l,a,t);c&&(n.report(c),yield s.invokeFunction(wse,c,e,t,i))})}function wse(r,e,t,n,i){return Ao(this,void 0,void 0,function*(){const s=r.get(Tr);let o,a;Ol(t)?(o=t.getModel(),a=new ku(t,5,void 0,i)):(o=t,a=new JI(t,i));let l;try{const c=yield e.provideDocumentFormattingEdits(o,o.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(o.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(Ol(t))rg.execute(t,l,n!==2),n!==2&&(eN(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:c}]=l,d=new ue(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);o.pushEditOperations([d],l.map(u=>({text:u.text,range:x.lift(u.range),forceMoveMarkers:!0})),u=>{for(const{range:h}of u)if(x.areIntersectingOrTouching(h,d))return[new ue(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)];return null})}return!0})}function Sse(r,e,t,n,i,s){return Ao(this,void 0,void 0,function*(){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,i,s)).catch(Jn);if(Si(l))return yield r.computeMoreMinimalEdits(t.uri,l)}})}function xse(r,e,t,n,i){return Ao(this,void 0,void 0,function*(){const s=C7(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of s){const a=yield Promise.resolve(o.provideDocumentFormattingEdits(t,n,i)).catch(Jn);if(Si(a))return yield r.computeMoreMinimalEdits(t.uri,a)}})}function w7(r,e,t,n,i,s,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,i,s,o)).catch(Jn).then(l=>r.computeMoreMinimalEdits(t.uri,l))}rt.registerCommand("_executeFormatRangeProvider",function(r,...e){return Ao(this,void 0,void 0,function*(){const[t,n,i]=e;Lt(Se.isUri(t)),Lt(x.isIRange(n));const s=r.get(ps),o=r.get(Tr),a=r.get(be),l=yield s.createModelReference(t);try{return Sse(o,a,l.object.textEditorModel,x.lift(n),i,qe.None)}finally{l.dispose()}})});rt.registerCommand("_executeFormatDocumentProvider",function(r,...e){return Ao(this,void 0,void 0,function*(){const[t,n]=e;Lt(Se.isUri(t));const i=r.get(ps),s=r.get(Tr),o=r.get(be),a=yield i.createModelReference(t);try{return xse(s,o,a.object.textEditorModel,n,qe.None)}finally{a.dispose()}})});rt.registerCommand("_executeFormatOnTypeProvider",function(r,...e){return Ao(this,void 0,void 0,function*(){const[t,n,i,s]=e;Lt(Se.isUri(t)),Lt(B.isIPosition(n)),Lt(typeof i=="string");const o=r.get(ps),a=r.get(Tr),l=r.get(be),c=yield o.createModelReference(t);try{return w7(a,l,c.object.textEditorModel,B.lift(n),i,s,qe.None)}finally{c.dispose()}})});var fx;Io.wrappingIndent.defaultValue=0;Io.glyphMargin.defaultValue=!1;Io.autoIndent.defaultValue=3;Io.overviewRulerLanes.defaultValue=2;Lu.setFormatterSelector((r,e,t)=>Promise.resolve(r[0]));const Yi=f4();Yi.editor=Eie();Yi.languages=bse();const kse=Yi.CancellationTokenSource,Lse=Yi.Emitter,S7=Yi.KeyCode,x7=Yi.KeyMod,Tse=Yi.Position,Dse=Yi.Range,Ese=Yi.Selection,Ase=Yi.SelectionDirection,Ise=Yi.MarkerSeverity,Nse=Yi.MarkerTag,S_=Yi.Uri,Mse=Yi.Token,Br=Yi.editor,us=Yi.languages;(!((fx=mn.MonacoEnvironment)===null||fx===void 0)&&fx.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=Yi);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const vb=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:kse,Emitter:Lse,KeyCode:S7,KeyMod:x7,MarkerSeverity:Ise,MarkerTag:Nse,Position:Tse,Range:Dse,Selection:Ese,SelectionDirection:Ase,Token:Mse,Uri:S_,editor:Br,languages:us},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Rse=Object.defineProperty,Ose=Object.getOwnPropertyDescriptor,Pse=Object.getOwnPropertyNames,Fse=Object.prototype.hasOwnProperty,VO=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Pse(e))!Fse.call(r,i)&&i!==t&&Rse(r,i,{get:()=>e[i],enumerable:!(n=Ose(e,i))||n.enumerable});return r},Bse=(r,e,t)=>(VO(r,e,"default"),t&&VO(t,e,"default")),Hp={};Bse(Hp,vb);var k7={},gx={},L7=class{static getOrCreate(r){return gx[r]||(gx[r]=new L7(r)),gx[r]}_languageId;_loadingTriggered;_lazyLoadPromise;_lazyLoadPromiseResolve;_lazyLoadPromiseReject;constructor(r){this._languageId=r,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,k7[this._languageId].loader().then(r=>this._lazyLoadPromiseResolve(r),r=>this._lazyLoadPromiseReject(r))),this._lazyLoadPromise}};function K1(r){const e=r.id;k7[e]=r,Hp.languages.register(r);const t=L7.getOrCreate(e);Hp.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),Hp.languages.onLanguage(e,async()=>{const n=await t.load();Hp.languages.setLanguageConfiguration(e,n.conf)})}K1({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>Qc(()=>import("./css.js"),[])});K1({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>Qc(()=>import("./html.js"),["assets/html.js","assets/index.js","assets/index.css"])});K1({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>Qc(()=>import("./javascript.js"),["assets/javascript.js","assets/typescript.js","assets/index.js","assets/index.css"])});K1({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>Qc(()=>import("./typescript.js"),["assets/typescript.js","assets/index.js","assets/index.css"])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Wse=Object.defineProperty,Vse=Object.getOwnPropertyDescriptor,Hse=Object.getOwnPropertyNames,Use=Object.prototype.hasOwnProperty,HO=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Hse(e))!Use.call(r,i)&&i!==t&&Wse(r,i,{get:()=>e[i],enumerable:!(n=Vse(e,i))||n.enumerable});return r},jse=(r,e,t)=>(HO(r,e,"default"),t&&HO(t,e,"default")),Pg={};jse(Pg,vb);var tN=class{_onDidChange=new Pg.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},nN={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},iN={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},T7=new tN("css",nN,iN),D7=new tN("scss",nN,iN),E7=new tN("less",nN,iN);Pg.languages.css={cssDefaults:T7,lessDefaults:E7,scssDefaults:D7};function sN(){return Qc(()=>import("./cssMode.js"),["assets/cssMode.js","assets/index.js","assets/index.css"])}Pg.languages.onLanguage("less",()=>{sN().then(r=>r.setupMode(E7))});Pg.languages.onLanguage("scss",()=>{sN().then(r=>r.setupMode(D7))});Pg.languages.onLanguage("css",()=>{sN().then(r=>r.setupMode(T7))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var $se=Object.defineProperty,zse=Object.getOwnPropertyDescriptor,Kse=Object.getOwnPropertyNames,Gse=Object.prototype.hasOwnProperty,UO=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Kse(e))!Gse.call(r,i)&&i!==t&&$se(r,i,{get:()=>e[i],enumerable:!(n=zse(e,i))||n.enumerable});return r},qse=(r,e,t)=>(UO(r,e,"default"),t&&UO(t,e,"default")),G1={};qse(G1,vb);var Zse=class{_onDidChange=new G1.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},Yse={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},q1={format:Yse,suggest:{},data:{useDefaultDataProvider:!0}};function Z1(r){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:r===mm,documentFormattingEdits:r===mm,documentRangeFormattingEdits:r===mm}}var mm="html",jO="handlebars",$O="razor",A7=Y1(mm,q1,Z1(mm)),Xse=A7.defaults,I7=Y1(jO,q1,Z1(jO)),Qse=I7.defaults,N7=Y1($O,q1,Z1($O)),Jse=N7.defaults;G1.languages.html={htmlDefaults:Xse,razorDefaults:Jse,handlebarDefaults:Qse,htmlLanguageService:A7,handlebarLanguageService:I7,razorLanguageService:N7,registerHTMLLanguageService:Y1};function ere(){return Qc(()=>import("./htmlMode.js"),["assets/htmlMode.js","assets/index.js","assets/index.css"])}function Y1(r,e=q1,t=Z1(r)){const n=new Zse(r,e,t);let i;const s=G1.languages.onLanguage(r,async()=>{i=(await ere()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),i?.dispose(),i=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var tre=Object.defineProperty,nre=Object.getOwnPropertyDescriptor,ire=Object.getOwnPropertyNames,sre=Object.prototype.hasOwnProperty,zO=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ire(e))!sre.call(r,i)&&i!==t&&tre(r,i,{get:()=>e[i],enumerable:!(n=nre(e,i))||n.enumerable});return r},rre=(r,e,t)=>(zO(r,e,"default"),t&&zO(t,e,"default")),Cb={};rre(Cb,vb);var ore=class{_onDidChange=new Cb.Emitter;_diagnosticsOptions;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},are={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},lre={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},M7=new ore("json",are,lre);Cb.languages.json={jsonDefaults:M7};function cre(){return Qc(()=>import("./jsonMode.js"),["assets/jsonMode.js","assets/index.js","assets/index.css"])}Cb.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});Cb.languages.onLanguage("json",()=>{cre().then(r=>r.setupMode(M7))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var dre=Object.defineProperty,ure=Object.getOwnPropertyDescriptor,hre=Object.getOwnPropertyNames,fre=Object.prototype.hasOwnProperty,KO=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hre(e))!fre.call(r,i)&&i!==t&&dre(r,i,{get:()=>e[i],enumerable:!(n=ure(e,i))||n.enumerable});return r},gre=(r,e,t)=>(KO(r,e,"default"),t&&KO(t,e,"default")),pre="4.5.5",og={};gre(og,vb);var R7=(r=>(r[r.None=0]="None",r[r.CommonJS=1]="CommonJS",r[r.AMD=2]="AMD",r[r.UMD=3]="UMD",r[r.System=4]="System",r[r.ES2015=5]="ES2015",r[r.ESNext=99]="ESNext",r))(R7||{}),O7=(r=>(r[r.None=0]="None",r[r.Preserve=1]="Preserve",r[r.React=2]="React",r[r.ReactNative=3]="ReactNative",r[r.ReactJSX=4]="ReactJSX",r[r.ReactJSXDev=5]="ReactJSXDev",r))(O7||{}),P7=(r=>(r[r.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",r[r.LineFeed=1]="LineFeed",r))(P7||{}),F7=(r=>(r[r.ES3=0]="ES3",r[r.ES5=1]="ES5",r[r.ES2015=2]="ES2015",r[r.ES2016=3]="ES2016",r[r.ES2017=4]="ES2017",r[r.ES2018=5]="ES2018",r[r.ES2019=6]="ES2019",r[r.ES2020=7]="ES2020",r[r.ESNext=99]="ESNext",r[r.JSON=100]="JSON",r[r.Latest=99]="Latest",r))(F7||{}),B7=(r=>(r[r.Classic=1]="Classic",r[r.NodeJs=2]="NodeJs",r))(B7||{}),W7=class{_onDidChange=new og.Emitter;_onDidExtraLibsChange=new og.Emitter;_extraLibs;_removedExtraLibs;_eagerModelSync;_compilerOptions;_diagnosticsOptions;_workerOptions;_onDidExtraLibsChangeTimeout;_inlayHintsOptions;constructor(r,e,t,n){this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(r),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(n),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(r,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===r)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(n=this._extraLibs[t].version+1),this._extraLibs[t]={content:r,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let i=this._extraLibs[t];i&&i.version===n&&(delete this._extraLibs[t],this._removedExtraLibs[t]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(r){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),r&&r.length>0)for(const e of r){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,n=e.content;let i=1;this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:n,version:i}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(r){this._compilerOptions=r||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(r){this._diagnosticsOptions=r||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(r){this._workerOptions=r||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(r){this._inlayHintsOptions=r||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(r){}setEagerModelSync(r){this._eagerModelSync=r}getEagerModelSync(){return this._eagerModelSync}},mre=pre,V7=new W7({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),H7=new W7({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),_re=()=>X1().then(r=>r.getTypeScriptWorker()),bre=()=>X1().then(r=>r.getJavaScriptWorker());og.languages.typescript={ModuleKind:R7,JsxEmit:O7,NewLineKind:P7,ScriptTarget:F7,ModuleResolutionKind:B7,typescriptVersion:mre,typescriptDefaults:V7,javascriptDefaults:H7,getTypeScriptWorker:_re,getJavaScriptWorker:bre};function X1(){return Qc(()=>import("./tsMode.js"),["assets/tsMode.js","assets/index.js","assets/index.css"])}og.languages.onLanguage("typescript",()=>X1().then(r=>r.setupTypeScript(V7)));og.languages.onLanguage("javascript",()=>X1().then(r=>r.setupJavaScript(H7)));var vre=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cre=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Q1=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const J1=new ge("selectionAnchorSet",!1);let Pl=class U7{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=J1.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(U7.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(ue.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new rs().appendText(p("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),di(p("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(ue.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Pl.ID="editor.contrib.selectionAnchorController";Pl=vre([Cre(1,Re)],Pl);class yre extends me{constructor(){super({id:"editor.action.setSelectionAnchor",label:p("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2080),weight:100}})}run(e,t){var n;return Q1(this,void 0,void 0,function*(){(n=Pl.get(t))===null||n===void 0||n.setSelectionAnchor()})}}class wre extends me{constructor(){super({id:"editor.action.goToSelectionAnchor",label:p("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:J1})}run(e,t){var n;return Q1(this,void 0,void 0,function*(){(n=Pl.get(t))===null||n===void 0||n.goToSelectionAnchor()})}}class Sre extends me{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:p("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:J1,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2089),weight:100}})}run(e,t){var n;return Q1(this,void 0,void 0,function*(){(n=Pl.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}}class xre extends me{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:p("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:J1,kbOpts:{kbExpr:A.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return Q1(this,void 0,void 0,function*(){(n=Pl.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}}ct(Pl.ID,Pl);ie(yre);ie(wre);ie(Sre);ie(xre);const kre=I("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},p("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class Lre extends me{constructor(){super({id:"editor.action.jumpToBracket",label:p("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:3160,weight:100}})}run(e,t){var n;(n=xo.get(t))===null||n===void 0||n.jumpToBracket()}}class Tre extends me{constructor(){super({id:"editor.action.selectToBracket",label:p("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var i;let s=!0;n&&n.selectBrackets===!1&&(s=!1),(i=xo.get(t))===null||i===void 0||i.selectToBracket(s)}}class Dre{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class xo extends j{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new Tt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(66),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(66)&&(this._matchBrackets=this._editor.getOption(66),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(xo.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),s=e.bracketPairs.matchBracket(i);let o=null;if(s)s[0].containsPosition(i)&&!s[1].containsPosition(i)?o=s[1].getStartPosition():s[1].containsPosition(i)&&(o=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)o=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(o=l.range.getStartPosition())}}return o?new ue(o.lineNumber,o.column,o.lineNumber,o.column):new ue(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const s=i.getStartPosition();let o=t.bracketPairs.matchBracket(s);if(!o&&(o=t.bracketPairs.findEnclosingBrackets(s),!o)){const c=t.bracketPairs.findNextBracket(s);c&&c.range&&(o=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(x.compareRangesUsingStarts);const[c,d]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(s)){const u=a;a=l,l=u}}a&&l&&n.push(new ue(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const n of this._lastBracketsData){const i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);const s=[];let o=0;for(let u=0,h=e.length;u<h;u++){const f=e[u];f.isEmpty()&&(s[o++]=f.getStartPosition())}s.length>1&&s.sort(B.compare);const a=[];let l=0,c=0;const d=i.length;for(let u=0,h=s.length;u<h;u++){const f=s[u];for(;c<d&&i[c].position.isBefore(f);)c++;if(c<d&&i[c].position.equals(f))a[l++]=i[c];else{let g=t.bracketPairs.matchBracket(f,20),_=xo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.bracketPairs.findEnclosingBrackets(f,20),_=xo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new Dre(f,g,_)}}this._lastBracketsData=a,this._lastVersionId=n}}xo.ID="editor.contrib.bracketMatchingController";xo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Be.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:an(kre),position:yr.Center}});xo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Be.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});ct(xo.ID,xo);ie(Tre);ie(Lre);Vt((r,e)=>{const t=r.getColor(CG);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=r.getColor(G5);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});vr.appendMenuItem(M.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:p({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class Ere{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const o=new x(n,i-1,n,i),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new x(n,s,n,s),a)}else{const o=new x(n,s,n,s+1),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new x(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new ue(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new ue(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class j7 extends me{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const n=[],i=t.getSelections();for(const s of i)n.push(new Ere(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class Are extends j7{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:p("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:A.writable})}}class Ire extends j7{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:p("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:A.writable})}}ie(Are);ie(Ire);class Nre extends me{constructor(){super({id:"editor.action.transposeLetters",label:p("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],s=t.getSelections();for(const o of s){if(!o.isEmpty())continue;const a=o.startLineNumber,l=o.startColumn,c=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?o.getPosition():_t.rightPosition(n,o.getPosition().lineNumber,o.getPosition().column),u=_t.leftPosition(n,d),h=_t.leftPosition(n,u),f=n.getValueInRange(x.fromPositions(h,u)),g=n.getValueInRange(x.fromPositions(u,d)),_=x.fromPositions(h,d);i.push(new si(_,g+f))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}ie(Nre);var Mre=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Tu="9_cutcopypaste",Rre=vo||document.queryCommandSupported("cut"),$7=vo||document.queryCommandSupported("copy"),Ore=typeof navigator.clipboard>"u"||Ys?document.queryCommandSupported("paste"):!0;function rN(r){return r.register(),r}const Pre=Rre?rN(new Tg({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:vo?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:M.MenubarEditMenu,group:"2_ccp",title:p({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:M.EditorContext,group:Tu,title:p("actions.clipboard.cutLabel","Cut"),when:A.writable,order:1},{menuId:M.CommandPalette,group:"",title:p("actions.clipboard.cutLabel","Cut"),order:1},{menuId:M.SimpleEditorContext,group:Tu,title:p("actions.clipboard.cutLabel","Cut"),when:A.writable,order:1}]})):void 0,Fre=$7?rN(new Tg({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:vo?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:M.MenubarEditMenu,group:"2_ccp",title:p({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:M.EditorContext,group:Tu,title:p("actions.clipboard.copyLabel","Copy"),order:2},{menuId:M.CommandPalette,group:"",title:p("actions.clipboard.copyLabel","Copy"),order:1},{menuId:M.SimpleEditorContext,group:Tu,title:p("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;vr.appendMenuItem(M.MenubarEditMenu,{submenu:M.MenubarCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});vr.appendMenuItem(M.EditorContext,{submenu:M.EditorContextCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:Tu,order:3});vr.appendMenuItem(M.EditorContext,{submenu:M.EditorContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1});const px=Ore?rN(new Tg({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:vo?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:M.MenubarEditMenu,group:"2_ccp",title:p({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:M.EditorContext,group:Tu,title:p("actions.clipboard.pasteLabel","Paste"),when:A.writable,order:4},{menuId:M.CommandPalette,group:"",title:p("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:M.SimpleEditorContext,group:Tu,title:p("actions.clipboard.pasteLabel","Paste"),when:A.writable,order:4}]})):void 0;class Bre extends me{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(33)&&t.getSelection().isEmpty()||(AL.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),AL.forceCopyWithSyntaxHighlighting=!1)}}function z7(r,e){r&&(r.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(bt).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const s=i.getOption(33),o=i.getSelection();return o&&o.isEmpty()&&!s||document.execCommand(e),!0}return!1}),r.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}z7(Pre,"cut");z7(Fre,"copy");px&&(px.addImplementation(1e4,"code-editor",(r,e)=>{const t=r.get(bt),n=r.get(Hl),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&Jc?(()=>Mre(void 0,void 0,void 0,function*(){const o=yield n.readText();if(o!==""){const a=qm.INSTANCE.get(o);let l=!1,c=null,d=null;a&&(l=i.getOption(33)&&!!a.isFromEmptySelection,c=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),i.trigger("keyboard","paste",{text:o,pasteOnNewLine:l,multicursorText:c,mode:d})}}))():!0:!1}),px.addImplementation(0,"generic-dom",(r,e)=>(document.execCommand("paste"),!0)));$7&&ie(Bre);class et{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+et.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new et(this.value+et.sep+e)}}et.sep=".";et.None=new et("@@none@@");et.Empty=new et("");et.QuickFix=new et("quickfix");et.Refactor=new et("refactor");et.Source=new et("source");et.SourceOrganizeImports=et.Source.append("organizeImports");et.SourceFixAll=et.Source.append("fixAll");var Bi;(function(r){r.Refactor="refactor",r.RefactorPreview="refactor preview",r.Lightbulb="lightbulb",r.Default="other (default)",r.SourceAction="source action",r.QuickFix="quick fix action",r.FixAll="fix all",r.OrganizeImports="organize imports",r.AutoFix="auto fix",r.QuickFixHover="quick fix hover window",r.OnSave="save participants",r.ProblemsView="problems view"})(Bi||(Bi={}));function Wre(r,e){return!(r.include&&!r.include.intersects(e)||r.excludes&&r.excludes.some(t=>K7(e,t,r.include))||!r.includeSourceActions&&et.Source.contains(e))}function Vre(r,e){const t=e.kind?new et(e.kind):void 0;return!(r.include&&(!t||!r.include.contains(t))||r.excludes&&t&&r.excludes.some(n=>K7(t,n,r.include))||!r.includeSourceActions&&t&&et.Source.contains(t)||r.onlyIncludePreferredActions&&!e.isPreferred)}function K7(r,e,t){return!(!e.contains(r)||t&&e.contains(t))}class sa{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new sa(t.kind,t.apply,!1):new sa(sa.getKindFromUser(e,t.kind),sa.getApplyFromUser(e,t.apply),sa.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new et(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var oN=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const G7="editor.action.codeAction",q7="editor.action.refactor",Hre="editor.action.refactor.preview",Z7="editor.action.sourceAction",aN="editor.action.organizeImports",lN="editor.action.fixAll";class Y7{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return oN(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Jn(i)}n&&(this.action.edit=n.edit)}return this})}}class cN extends j{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(cN.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Si(e.diagnostics)?Si(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Si(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&et.QuickFix.contains(new et(e.kind))&&!!e.isPreferred)}}const GO={actions:[],documentation:void 0};function dN(r,e,t,n,i,s){var o;const a=n.filter||{},l={only:(o=a.include)===null||o===void 0?void 0:o.value,trigger:n.type},c=new JI(e,s),d=Ure(r,e,a),u=new Q,h=d.map(g=>oN(this,void 0,void 0,function*(){try{i.report(g);const _=yield g.provideCodeActions(e,t,l,c.token);if(_&&u.add(_),c.token.isCancellationRequested)return GO;const b=(_?.actions||[]).filter(C=>C&&Vre(a,C)),v=jre(g,b,a.include);return{actions:b.map(C=>new Y7(C,g)),documentation:v}}catch(_){if(Da(_))throw _;return Jn(_),GO}})),f=r.onDidChange(()=>{const g=r.all(e);qs(g,d)||c.cancel()});return Promise.all(h).then(g=>{const _=g.map(v=>v.actions).flat(),b=Y_(g.map(v=>v.documentation));return new cN(_,b,u)}).finally(()=>{f.dispose(),c.dispose()})}function Ure(r,e,t){return r.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(i=>Wre(t,new et(i))):!0)}function jre(r,e,t){if(!r.documentation)return;const n=r.documentation.map(i=>({kind:new et(i.kind),command:i.command}));if(t){let i;for(const s of n)s.kind.contains(t)&&(i?i.kind.contains(s.kind)&&(i=s):i=s);if(i)return i?.command}for(const i of e)if(i.kind){for(const s of n)if(s.kind.contains(new et(i.kind)))return s.command}}rt.registerCommand("_executeCodeActionProvider",function(r,e,t,n,i){return oN(this,void 0,void 0,function*(){if(!(e instanceof Se))throw Co();const{codeActionProvider:s}=r.get(be),o=r.get(en).getModel(e);if(!o)throw Co();const a=ue.isISelection(t)?ue.liftSelection(t):x.isIRange(t)?o.validateRange(t):void 0;if(!a)throw Co();const l=typeof n=="string"?new et(n):void 0,c=yield dN(s,o,a,{type:1,triggerAction:Bi.Default,filter:{includeSourceActions:!0,include:l}},Ju.None,qe.None),d=[],u=Math.min(c.validActions.length,typeof i=="number"?i:0);for(let h=0;h<u;h++)d.push(c.validActions[h].resolve(qe.None));try{return yield Promise.all(d),c.validActions.map(h=>h.action)}finally{setTimeout(()=>c.dispose(),100)}})});var $re=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zre=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Is=class nD{constructor(e,t){this._messageWidget=new Fi,this._messageListeners=new Q,this._editor=e,this._visible=nD.MESSAGE_VISIBLE.bindTo(t)}static get(e){return e.getContribution(nD.ID)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){di(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new qO(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Js(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new x(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(qO.fadeOut(this._messageWidget.value))}};Is.ID="editor.contrib.messageController";Is.MESSAGE_VISIBLE=new ge("messageVisible",!1,p("messageVisible","Whether the editor is currently showing an inline message"));Is=$re([zre(1,Re)],Is);const Kre=Un.bindToContribution(Is.get);te(new Kre({id:"leaveEditorMessage",precondition:Is.MESSAGE_VISIBLE,handler:r=>r.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let qO=class{constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const o=document.createElement("div");o.classList.add("message"),o.textContent=i,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};ct(Is.ID,Is);var X7=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ka=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Gre=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Fg={Visible:new ge("CodeActionMenuVisible",!1,p("CodeActionMenuVisible","Whether the code action list widget is visible"))};class mx extends Ds{constructor(e,t){super(e.command?e.command.id:e.title,qre(e.title),void 0,!e.disabled,t),this.action=e}}function qre(r){return r.replace(/\r\n|\r|\n/g," ")}const Zre="codeActionWidget",_x=26;let iD=class{constructor(e,t){this.acceptKeybindings=e,this.keybindingService=t}get templateId(){return Zre}renderTemplate(e){const t=Object.create(null);return t.disposables=[],t.root=e,t.text=document.createElement("span"),e.append(t.text),t}renderElement(e,t,n){const i=n,s=e.title,o=e.isEnabled,a=e.isSeparator,l=e.isDocumentation;i.text.textContent=s,o?i.root.classList.remove("option-disabled"):(i.root.classList.add("option-disabled"),i.root.style.backgroundColor="transparent !important"),a&&(i.root.classList.add("separator"),i.root.style.height="10px"),l||(()=>{var d,u;const[h,f]=this.acceptKeybindings;i.root.title=p({key:"label",comment:['placeholders are keybindings, e.g "F2 to Refactor, Shift+F2 to Preview"']},"{0} to Refactor, {1} to Preview",(d=this.keybindingService.lookupKeybinding(h))===null||d===void 0?void 0:d.getLabel(),(u=this.keybindingService.lookupKeybinding(f))===null||u===void 0?void 0:u.getLabel())})()}disposeTemplate(e){e.disposables=ut(e.disposables)}};iD=X7([Ka(1,Mn)],iD);let dy=class sD extends j{constructor(e,t,n,i,s,o,a,l,c,d){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._languageFeaturesService=s,this._telemetryService=o,this._configurationService=l,this._contextViewService=c,this._contextKeyService=d,this._showingActions=this._register(new Fi),this.codeActionList=this._register(new Fi),this.options=[],this._visible=!1,this.viewItems=[],this.hasSeperator=!1,this._keybindingResolver=new ew({getKeybindings:()=>i.getKeybindings()}),this._ctxMenuWidgetVisible=Fg.Visible.bindTo(this._contextKeyService),this.listRenderer=new iD(["onEnterSelectCodeAction","onEnterSelectCodeActionWithPreview"],i)}get isVisible(){return this._visible}isCodeActionWidgetEnabled(e){return this._configurationService.getValue("editor.experimental.useCustomCodeActionMenu",{resource:e.uri})}_onListSelection(e){e.elements.length&&e.elements.forEach(t=>{t.isEnabled&&(t.action.run(),this.hideCodeActionWidget())})}_onListHover(e){var t,n,i,s;e.element?!((n=e.element)===null||n===void 0)&&n.isEnabled?((i=this.codeActionList.value)===null||i===void 0||i.setFocus([e.element.index]),this.focusedEnabledItem=this.viewItems.indexOf(e.element),this.currSelectedItem=e.element.index):(this.currSelectedItem=void 0,(s=this.codeActionList.value)===null||s===void 0||s.setFocus([e.element.index])):(this.currSelectedItem=void 0,(t=this.codeActionList.value)===null||t===void 0||t.setFocus([]))}renderCodeActionMenuList(e,t){var n;const i=new Q,s=document.createElement("div"),o=document.createElement("div");this.block=e.appendChild(o),this.block.classList.add("context-view-block"),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",i.add(Z(this.block,he.MOUSE_DOWN,h=>h.stopPropagation())),s.id="codeActionMenuWidget",s.classList.add("codeActionMenuWidget"),e.appendChild(s),this.codeActionList.value=new Ro("codeActionWidget",s,{getHeight(h){return h.isSeparator?10:_x},getTemplateId(h){return"codeActionWidget"}},[this.listRenderer],{keyboardSupport:!1}),i.add(this.codeActionList.value.onMouseOver(h=>this._onListHover(h))),i.add(this.codeActionList.value.onDidChangeFocus(h=>{var f;return(f=this.codeActionList.value)===null||f===void 0?void 0:f.domFocus()})),i.add(this.codeActionList.value.onDidChangeSelection(h=>this._onListSelection(h))),i.add(this._editor.onDidLayoutChange(h=>this.hideCodeActionWidget())),t.forEach((h,f)=>{const g=h.class==="separator";let _=!1;h instanceof mx&&(_=h.action.kind===sD.documentationID),g&&(this.hasSeperator=!0);const b={title:h.label,detail:h.tooltip,action:t[f],isEnabled:h.enabled,isSeparator:g,index:f,isDocumentation:_};h.enabled&&this.viewItems.push(b),this.options.push(b)}),this.codeActionList.value.splice(0,this.codeActionList.value.length,this.options);const a=this.hasSeperator?(t.length-1)*_x+10:t.length*_x;s.style.height=String(a)+"px",this.codeActionList.value.layout(a);const l=[];this.options.forEach((h,f)=>{var g,_;if(!this.codeActionList.value)return;const b=(_=document.getElementById((g=this.codeActionList.value)===null||g===void 0?void 0:g.getElementID(f)))===null||_===void 0?void 0:_.getElementsByTagName("span")[0].offsetWidth;l.push(Number(b))});const c=Math.max(...l);s.style.width=c+52+"px",(n=this.codeActionList.value)===null||n===void 0||n.layout(a,c),this.viewItems.length<1||this.viewItems.every(h=>h.isDocumentation)?this.currSelectedItem=void 0:(this.focusedEnabledItem=0,this.currSelectedItem=this.viewItems[0].index,this.codeActionList.value.setFocus([this.currSelectedItem])),this.codeActionList.value.domFocus();const d=fu(e),u=d.onDidBlur(()=>{this.hideCodeActionWidget()});return i.add(u),i.add(d),this._ctxMenuWidgetVisible.set(!0),i}focusPrevious(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems[0].index;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let n;do this.focusedEnabledItem=this.focusedEnabledItem-1,this.focusedEnabledItem<0&&(this.focusedEnabledItem=this.viewItems.length-1),n=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([n.index]),this.currSelectedItem=n.index;while(this.focusedEnabledItem!==t&&(!n.isEnabled||n.action.id===ki.ID));return!0}focusNext(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems.length-1;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let n;do this.focusedEnabledItem=(this.focusedEnabledItem+1)%this.viewItems.length,n=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([n.index]),this.currSelectedItem=n.index;while(this.focusedEnabledItem!==t&&(!n.isEnabled||n.action.id===ki.ID));return!0}navigateListWithKeysUp(){this.focusPrevious()}navigateListWithKeysDown(){this.focusNext()}onEnterSet(){var e;typeof this.currSelectedItem=="number"&&((e=this.codeActionList.value)===null||e===void 0||e.setSelection([this.currSelectedItem]))}dispose(){super.dispose()}hideCodeActionWidget(){this._ctxMenuWidgetVisible.reset(),this.options=[],this.viewItems=[],this.focusedEnabledItem=0,this.currSelectedItem=void 0,this.hasSeperator=!1,this._contextViewService.hideContextView({source:this})}codeActionTelemetry(e,t,n){this._telemetryService.publicLog2("codeAction.applyCodeAction",{codeActionFrom:e,validCodeActions:n.validActions.length,cancelled:t})}show(e,t,n,i){return Gre(this,void 0,void 0,function*(){const s=this._editor.getModel();if(!s)return;const o=i.includeDisabledActions?t.allActions:t.validActions;if(!o.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,n4();this._visible=!0,this._showingActions.value=t;const a=this.getMenuActions(e,o,t.documentation),l=B.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},c=this._keybindingResolver.getResolver(),d=this._editor.getOption(117);this.isCodeActionWidgetEnabled(s)?this._contextViewService.showContextView({getAnchor:()=>l,render:u=>this.renderCodeActionMenuList(u,a),onHide:u=>{const h=i.fromLightbulb?Bi.Lightbulb:e.triggerAction;this.codeActionTelemetry(h,u,t),this._visible=!1,this._editor.focus()}},this._editor.getDomNode(),!1):this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>l,getActions:()=>a,onHide:u=>{const h=i.fromLightbulb?Bi.Lightbulb:e.triggerAction;this.codeActionTelemetry(h,u,t),this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:u=>u instanceof mx?c(u.action):void 0})})}getMenuActions(e,t,n){var i,s;const o=d=>new mx(d.action,()=>this._delegate.onSelectCodeAction(d,e)),a=t.map(o),l=[...n],c=this._editor.getModel();if(c&&a.length)for(const d of this._languageFeaturesService.codeActionProvider.all(c))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(s=(i=e.filter)===null||i===void 0?void 0:i.include)===null||s===void 0?void 0:s.value},t.map(u=>u.action)));return l.length&&a.push(new ki,...l.map(d=>o(new Y7({title:d.title,command:d,kind:sD.documentationID},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=wi(this._editor.getDomNode()),i=n.left+t.left,s=n.top+t.top+t.height;return{x:i,y:s}}};dy.documentationID="_documentation";dy=X7([Ka(2,Vl),Ka(3,Mn),Ka(4,be),Ka(5,No),Ka(6,It),Ka(7,ft),Ka(8,Qu),Ka(9,Re)],dy);class ew{constructor(e){this._keybindingProvider=e}getResolver(){const e=new Rf(()=>this._keybindingProvider.getKeybindings().filter(t=>ew.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===aN?n={kind:et.SourceOrganizeImports.value}:t.command===lN&&(n={kind:et.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},sa.fromUser(n,{kind:et.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new et(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,s)=>i?i.kind.contains(s.kind)?s:i:s,void 0)}}ew.codeActionCommands=[q7,G7,Z7,aN,lN];var Yre=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xre=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},_m;(function(r){r.Hidden={type:0};class e{constructor(n,i,s,o){this.actions=n,this.trigger=i,this.editorPosition=s,this.widgetPosition=o,this.type=1}}r.Showing=e})(_m||(_m={}));let uy=class Q7 extends j{constructor(e,t,n,i){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=i,this._onClick=this._register(new R),this.onClick=this._onClick.event,this._state=_m.Hidden,this._domNode=document.createElement("div"),this._domNode.className=m.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(s=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),kt.ignoreTarget(this._domNode),this._register(A$(this._domNode,s=>{if(this.state.type!==1)return;this._editor.focus(),s.preventDefault();const{top:o,height:a}=wi(this._domNode),l=this._editor.getOption(61);let c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:s.posx,y:o+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Z(this._domNode,"mouseenter",s=>{(s.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(59)&&!this._editor.getOption(59).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(59).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:o,column:a}=s.validatePosition(n),l=s.getOptions().tabSize,c=i.get(46),d=s.getLineContent(o),u=y1(d,l),h=c.spaceWidth*u>22,f=_=>_>2&&this._editor.getTopForLineNumber(_)===this._editor.getTopForLineNumber(_-1);let g=o;if(!h){if(o>1&&!f(o-1))g-=1;else if(!f(o+1))g+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new _m.Showing(e,t,n,{position:{lineNumber:g,column:1},preference:Q7._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=_m.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...m.lightBulb.classNamesArray),this._domNode.classList.add(...m.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=p("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...m.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...m.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=p("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=p("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};uy._posPref=[0];uy=Yre([Xre(3,Mn)],uy);Vt((r,e)=>{var t;const n=(t=r.getColor(Pn))===null||t===void 0?void 0:t.transparent(.7),i=r.getColor(zz);i&&e.addRule(`
		.monaco-editor .contentWidgets ${m.lightBulb.cssSelector} {
			color: ${i};
			background-color: ${n};
		}`);const s=r.getColor(Kz);s&&e.addRule(`
		.monaco-editor .contentWidgets ${m.lightbulbAutofix.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`)});var Qre=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jre=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},bx=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},eoe=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},toe=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},x0;let rD=class extends j{constructor(e,t,n,i,s){super(),this._editor=e,this.delegate=i,this._activeCodeActions=this._register(new Fi),this.previewOn=!1,x0.set(this,!1),this._codeActionWidget=new Rf(()=>this._register(s.createInstance(dy,this._editor,{onSelectCodeAction:(o,a)=>bx(this,void 0,void 0,function*(){this.previewOn?this.delegate.applyCodeAction(o,!0,Boolean(this.previewOn)):this.delegate.applyCodeAction(o,!0,Boolean(a.preview)),this.previewOn=!1})}))),this._lightBulbWidget=new Rf(()=>{const o=this._register(s.createInstance(uy,this._editor,t,n));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1,fromLightbulb:!0}))),o})}dispose(){eoe(this,x0,!0,"f"),super.dispose()}hideCodeActionWidget(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().hideCodeActionWidget()}onEnter(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().onEnterSet()}onPreviewEnter(){this.previewOn=!0,this.onEnter()}navigateList(e){this._codeActionWidget.hasValue()&&(e?this._codeActionWidget.getValue().navigateListWithKeysUp():this._codeActionWidget.getValue().navigateListWithKeysDown())}update(e){var t,n,i,s,o;return bx(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let a;try{a=yield e.actions}catch(l){We(l);return}if(!toe(this,x0,"f"))if(this._lightBulbWidget.getValue().update(a,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const c=this.tryGetValidActionToApply(e.trigger,a);if(c){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(c,!1,!1)}finally{a.dispose()}return}if(e.trigger.context){const d=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,a);if(d&&d.action.disabled){(i=Is.get(this._editor))===null||i===void 0||i.showMessage(d.action.disabled,e.trigger.context.position),a.dispose();return}}}const l=!!(!((s=e.trigger.filter)===null||s===void 0)&&s.include);if(e.trigger.context&&(!a.allActions.length||!l&&!a.validActions.length)){(o=Is.get(this._editor))===null||o===void 0||o.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=a,a.dispose();return}this._activeCodeActions.value=a,this._codeActionWidget.getValue().show(e.trigger,a,e.position,{includeDisabledActions:l,fromLightbulb:!1})}else this._codeActionWidget.getValue().isVisible?a.dispose():this._activeCodeActions.value=a})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,i){return bx(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,i)})}};x0=new WeakMap;rD=Qre([Jre(4,Ve)],rD);var vx=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},noe=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ph;const J7=new ge("supportedCodeAction","");class ioe extends j{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new Js),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>w3(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Bi.Default})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Bi.Default})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const i=t.validateRange(n);if(x.intersectRanges(i,e))return x.lift(i)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:s}=n.getPosition(),o=t.getLineContent(i);if(o.length===0)return;if(s===1){if(/\s/.test(o[0]))return}else if(s===t.getLineMaxColumn(i)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[s-2])&&/\s/.test(o[s-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const i=this._getRangeOfMarker(t),s=i?i.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:s};return this._signalChange(o),o}}var Nd;(function(r){r.Empty={type:0};class e{constructor(n,i,s,o){this.trigger=n,this.rangeOrSelection=i,this.position=s,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(Da(a))return soe;throw a})}cancel(){this._cancellablePromise.cancel()}}r.Triggered=e})(Nd||(Nd={}));const soe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class roe extends j{constructor(e,t,n,i,s){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=s,this._codeActionOracle=this._register(new Fi),this._state=Nd.Empty,this._onDidChangeState=this._register(new R),this.onDidChangeState=this._onDidChangeState.event,Ph.set(this,!1),this._supportedCodeActions=J7.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){vx(this,Ph,"f")||(noe(this,Ph,!0,"f"),super.dispose(),this.setState(Nd.Empty,!0))}_update(){if(vx(this,Ph,"f"))return;this._codeActionOracle.value=void 0,this.setState(Nd.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(83)){const t=[];for(const n of this._registry.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new ioe(this._editor,this._markerService,n=>{var i;if(!n){this.setState(Nd.Empty);return}const s=Xn(o=>dN(this._registry,e,n.selection,n.trigger,Ju.None,o));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(s,250)),this.setState(new Nd.Triggered(n.trigger,n.selection,n.position,s))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Bi.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!vx(this,Ph,"f")&&this._onDidChangeState.fire(e))}}Ph=new WeakMap;var ooe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gp=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},eB=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function yb(r){return le.regex(J7.keys()[0],new RegExp("(\\s|^)"+Zs(r.value)+"\\b"))}function tB(r,e,t,n){const i=sa.fromUser(e,{kind:et.Refactor,apply:"never"});return ih(r,typeof e?.kind=="string"?i.preferred?p("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",e.kind):p("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",e.kind):i.preferred?p("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):p("editor.action.refactor.noneMessage","No refactorings available"),{include:et.Refactor.contains(i.kind)?i.kind:et.None,onlyIncludePreferredActions:i.preferred},i.apply,t,n)}const tw={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:p("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:p("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[p("args.schema.apply.first","Always apply the first returned code action."),p("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),p("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:p("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let $c=class nB extends j{constructor(e,t,n,i,s,o){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new roe(this._editor,o.codeActionProvider,t,n,i)),this._register(this._model.onDidChangeState(a=>this.update(a))),this._ui=new Rf(()=>this._register(new rD(e,Bg.Id,wb.Id,{applyCodeAction:(a,l,c)=>eB(this,void 0,void 0,function*(){try{yield this._applyCodeAction(a,c)}finally{l&&this._trigger({type:2,triggerAction:Bi.QuickFix,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(nB.ID)}update(e){this._ui.getValue().update(e)}hideCodeActionMenu(){this._ui.hasValue()&&this._ui.getValue().hideCodeActionWidget()}navigateCodeActionList(e){this._ui.hasValue()&&this._ui.getValue().navigateList(e)}selectedOption(){this._ui.hasValue()&&this._ui.getValue().onEnter()}selectedOptionWithPreview(){this._ui.hasValue()&&this._ui.getValue().onPreviewEnter()}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,i,s){var o;if(!this._editor.hasModel())return;(o=Is.get(this._editor))===null||o===void 0||o.closeMessage();const a=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:i,context:{notAvailableMessage:e,position:a},preview:s})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(aoe,e,oD.FromCodeActions,{preview:t,editor:this._editor})}};$c.ID="editor.contrib.quickFixController";$c=ooe([gp(1,Ia),gp(2,Re),gp(3,id),gp(4,Ve),gp(5,be)],$c);var oD;(function(r){r.OnSave="onSave",r.FromProblemsView="fromProblemsView",r.FromCodeActions="fromCodeActions"})(oD||(oD={}));function aoe(r,e,t,n){return eB(this,void 0,void 0,function*(){const i=r.get(fb),s=r.get(Sn),o=r.get(No),a=r.get(xn);if(o.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(qe.None),e.action.edit&&(yield i.apply(Og.convert(e.action.edit),{editor:n?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:!0,showPreview:n?.preview})),e.action.command)try{yield s.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(l){const c=loe(l);a.error(typeof c=="string"?c:p("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function loe(r){return typeof r=="string"?r:r instanceof Error&&typeof r.message=="string"?r.message:void 0}function ih(r,e,t,n,i=!1,s=Bi.Default){if(r.hasModel()){const o=$c.get(r);o?.manualTriggerAtCurrentPosition(e,s,t,n,i)}}class Bg extends me{constructor(){super({id:Bg.Id,label:p("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:le.and(A.writable,A.hasCodeActionsProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:2132,weight:100}})}run(e,t){return ih(t,p("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,!1,Bi.QuickFix)}}Bg.Id="editor.action.quickFix";class coe extends Un{constructor(){super({id:G7,precondition:le.and(A.writable,A.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:tw}]}})}runEditorCommand(e,t,n){const i=sa.fromUser(n,{kind:et.Empty,apply:"ifSingle"});return ih(t,typeof n?.kind=="string"?i.preferred?p("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):p("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?p("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):p("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class doe extends me{constructor(){super({id:q7,label:p("refactor.label","Refactor..."),alias:"Refactor...",precondition:le.and(A.writable,A.hasCodeActionsProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:le.and(A.writable,yb(et.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:tw}]}})}run(e,t,n){return tB(t,n,!1,Bi.Refactor)}}class uoe extends me{constructor(){super({id:Hre,label:p("refactor.preview.label","Refactor with Preview..."),alias:"Refactor Preview...",precondition:le.and(A.writable,A.hasCodeActionsProvider),description:{description:"Refactor Preview...",args:[{name:"args",schema:tw}]}})}run(e,t,n){return tB(t,n,!0,Bi.RefactorPreview)}}class hoe extends me{constructor(){super({id:Z7,label:p("source.label","Source Action..."),alias:"Source Action...",precondition:le.and(A.writable,A.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:le.and(A.writable,yb(et.Source))},description:{description:"Source Action...",args:[{name:"args",schema:tw}]}})}run(e,t,n){const i=sa.fromUser(n,{kind:et.Source,apply:"never"});return ih(t,typeof n?.kind=="string"?i.preferred?p("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):p("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?p("editor.action.source.noneMessage.preferred","No preferred source actions available"):p("editor.action.source.noneMessage","No source actions available"),{include:et.Source.contains(i.kind)?i.kind:et.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,void 0,Bi.SourceAction)}}class foe extends me{constructor(){super({id:aN,label:p("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:le.and(A.writable,yb(et.SourceOrganizeImports)),kbOpts:{kbExpr:A.editorTextFocus,primary:1581,weight:100}})}run(e,t){return ih(t,p("editor.action.organize.noneMessage","No organize imports action available"),{include:et.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",void 0,Bi.OrganizeImports)}}class goe extends me{constructor(){super({id:lN,label:p("fixAll.label","Fix All"),alias:"Fix All",precondition:le.and(A.writable,yb(et.SourceFixAll))})}run(e,t){return ih(t,p("fixAll.noneMessage","No fix all action available"),{include:et.SourceFixAll,includeSourceActions:!0},"ifSingle",void 0,Bi.FixAll)}}class wb extends me{constructor(){super({id:wb.Id,label:p("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:le.and(A.writable,yb(et.QuickFix)),kbOpts:{kbExpr:A.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return ih(t,p("editor.action.autoFix.noneMessage","No auto fixes available"),{include:et.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",void 0,Bi.AutoFix)}}wb.Id="editor.action.autoFix";const Sb=Un.bindToContribution($c.get),xb=100+90;te(new Sb({id:"hideCodeActionMenuWidget",precondition:Fg.Visible,handler(r){r.hideCodeActionMenu()},kbOpts:{weight:xb,primary:9,secondary:[1033]}}));te(new Sb({id:"focusPreviousCodeAction",precondition:Fg.Visible,handler(r){r.navigateCodeActionList(!0)},kbOpts:{weight:xb+1e5,primary:16,secondary:[2064]}}));te(new Sb({id:"focusNextCodeAction",precondition:Fg.Visible,handler(r){r.navigateCodeActionList(!1)},kbOpts:{weight:xb+1e5,primary:18,secondary:[2066]}}));te(new Sb({id:"onEnterSelectCodeAction",precondition:Fg.Visible,handler(r){r.selectedOption()},kbOpts:{weight:xb+1e5,primary:3,secondary:[1026]}}));te(new Sb({id:"onEnterSelectCodeActionWithPreview",precondition:Fg.Visible,handler(r){r.selectedOptionWithPreview()},kbOpts:{weight:xb+1e5,primary:2051}}));Jt.as(Bl.Configuration).registerConfiguration(Object.assign(Object.assign({},bI),{properties:{"editor.experimental.useCustomCodeActionMenu":{type:"boolean",tags:["experimental"],scope:5,description:p("codeActionWidget","Enabling this adjusts how the code action menu is rendered."),default:!1}}}));ct($c.ID,$c);ie(Bg);ie(doe);ie(uoe);ie(hoe);ie(foe);ie(wb);ie(goe);te(new coe);var ZO=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class aD{constructor(){this.lenses=[],this._disposables=new Q}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function iB(r,e,t){return ZO(this,void 0,void 0,function*(){const n=r.ordered(e),i=new Map,s=new aD,o=n.map((a,l)=>ZO(this,void 0,void 0,function*(){i.set(a,l);try{const c=yield Promise.resolve(a.provideCodeLenses(e,t));c&&s.add(c,a)}catch(c){Jn(c)}}));return yield Promise.all(o),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:i.get(a.provider)<i.get(l.provider)?-1:i.get(a.provider)>i.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s})}rt.registerCommand("_executeCodeLensProvider",function(r,...e){let[t,n]=e;Lt(Se.isUri(t)),Lt(typeof n=="number"||!n);const{codeLensProvider:i}=r.get(be),s=r.get(en).getModel(t);if(!s)throw Co();const o=[],a=new Q;return iB(i,s,qe.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)n==null||Boolean(d.symbol.command)?o.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(s,d.symbol,qe.None)).then(u=>o.push(u||d.symbol)));return Promise.all(c)}).then(()=>o).finally(()=>{setTimeout(()=>a.dispose(),100)})});var poe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},moe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const sB=tt("ICodeLensCache");class YO{constructor(e,t){this.lineCount=e,this.data=t}}let lD=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new nd(20,.75);const t="codelens/cache";Om(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),Al(e.onWillSaveState)(s=>{s.reason===ry.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(o=>{var a;return{range:o.symbol.range,command:o.symbol.command&&{id:"",title:(a=o.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new aD;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new YO(e.getLineCount(),i);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const s of n.data.lenses)i.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],s=[];for(const a of i.lines)s.push({range:new x(a,1,a,11)});const o=new aD;o.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new YO(i.lineCount,o))}}catch{}}};lD=poe([moe(0,Qr)],lD);lt(sB,lD);class _oe{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class nw{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${nw._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();const n=[];let i=!1;for(let s=0;s<e.length;s++){const o=e[s];if(o&&(i=!0,o.command)){const a=Jd(o.command.title.trim());o.command.id?(n.push(ee("a",{id:String(s),title:o.command.tooltip,role:"button"},...a)),this._commands.set(String(s),o.command)):n.push(ee("span",{title:o.command.tooltip},...a)),s+1<e.length&&n.push(ee("span",void 0," | "))}}i?(Oc(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Oc(this._domNode,ee("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}nw._idPool=0;class Cx{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}class XO{constructor(e,t,n,i,s,o,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let l;const c=[];this._data.forEach((d,u)=>{d.symbol.command&&c.push(d.symbol),i.addDecoration({range:d.symbol.range,options:Be.EMPTY},h=>this._decorationIds[u]=h),l?l=x.plusRange(l,d.symbol.range):l=x.lift(d.symbol.range)}),this._viewZone=new _oe(l.startLineNumber-1,o,a),this._viewZoneId=s.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new nw(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&x.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:Be.EMPTY},s=>this._decorationIds[i]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var boe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pp=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},voe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let ag=class{constructor(e,t,n,i,s,o){this._editor=e,this._languageFeaturesService=t,this._commandService=i,this._notificationService=s,this._codeLensCache=o,this._disposables=new Q,this._localToDispose=new Q,this._lenses=[],this._oldCodeLensModels=new Q,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Tt(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(46)||a.hasChanged(16)||a.hasChanged(15))&&this._updateLensStyle(),a.hasChanged(14)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+rA(this._editor.getId()).toString(16),this._styleElement=Sr(Vm(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(61)/this._editor.getOption(48));let t=this._editor.getOption(16);return(!t||t<5)&&(t=this._editor.getOption(48)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),i=this._editor.getOption(46),s=`--codelens-font-family${this._styleClassName}`,o=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${o}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${s}), ${Ts.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(s,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(o,i.fontFeatureSettings),this._editor.changeViewZones(l=>{for(const c of this._lenses)c.updateHeight(e,l)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(du(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of this._languageFeaturesService.codeLensProvider.all(e))if(typeof i.onDidChange=="function"){const s=i.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new Tt(()=>{var i;const s=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=Xn(o=>iB(this._languageFeaturesService.codeLensProvider,e,o)),this._getCodeLensModelPromise.then(o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()},We)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(Ke(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(i=>{this._editor.changeViewZones(s=>{const o=[];let a=-1;this._lenses.forEach(c=>{!c.isValid()||a===c.getLineNumber()?o.push(c):(c.update(s),a=c.getLineNumber())});const l=new Cx;o.forEach(c=>{c.dispose(l,s),this._lenses.splice(this._lenses.indexOf(c),1)}),l.commit(i)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Ke(()=>{if(this._editor.getModel()){const i=Hc.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(o=>{this._disposeAllLenses(s,o)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let s=i.target.element;if(s?.tagName==="SPAN"&&(s=s.parentElement),s?.tagName==="A")for(const o of this._lenses){const a=o.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new Cx;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),n=[];let i;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}const s=Hc.capture(this._editor),o=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new Cx;let d=0,u=0;for(;u<n.length&&d<this._lenses.length;){const h=n[u][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<h?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===h?(this._lenses[d].updateCodeLensSymbols(n[u],c),u++,d++):(this._lenses.splice(d,0,new XO(n[u],this._editor,this._styleClassName,c,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,u++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;u<n.length;)this._lenses.push(new XO(n[u],this._editor,this._styleClassName,c,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++;c.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const s=Date.now(),o=Xn(a=>{const l=n.map((c,d)=>{const u=new Array(c.length),h=c.map((f,g)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(t,f.symbol,a)).then(_=>{u[g]=_},Jn):(u[g]=f.symbol,Promise.resolve(void 0)));return Promise.all(h).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(u)})});return Promise.all(l)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{We(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}};ag.ID="css.editor.codeLens";ag=boe([pp(1,be),pp(2,Er),pp(3,Sn),pp(4,xn),pp(5,sB)],ag);ct(ag.ID,ag);ie(class extends me{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:A.hasCodeLensProvider,label:p("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return voe(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Ul),i=e.get(Sn),s=e.get(xn),o=t.getSelection().positionLineNumber,a=t.getContribution(ag.ID);if(!a)return;const l=a.getModel();if(!l)return;const c=[];for(const u of l.lenses)u.symbol.command&&u.symbol.range.startLineNumber===o&&c.push({label:u.symbol.command.title,command:u.symbol.command});if(c.length===0)return;const d=yield n.pick(c,{canPickMany:!1});if(d){if(l.isDisposed)return yield i.executeCommand(this.id);try{yield i.executeCommand(d.command.id,...d.command.arguments||[])}catch(u){s.error(u)}}})}});function Coe(r,e,t){const n=[],s=r.ordered(e).reverse().map(o=>Promise.resolve(o.provideDocumentColors(e,t)).then(a=>{if(Array.isArray(a))for(const l of a)n.push({colorInfo:l,provider:o})}));return Promise.all(s).then(()=>n)}function QO(r,e,t,n){return Promise.resolve(t.provideColorPresentations(r,e,n))}rt.registerCommand("_executeDocumentColorProvider",function(r,...e){const[t]=e;if(!(t instanceof Se))throw Co();const{colorProvider:n}=r.get(be),i=r.get(en).getModel(t);if(!i)throw Co();const s=[],a=n.ordered(i).reverse().map(l=>Promise.resolve(l.provideDocumentColors(i,qe.None)).then(c=>{if(Array.isArray(c))for(const d of c)s.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(a).then(()=>s)});rt.registerCommand("_executeColorPresentationProvider",function(r,...e){const[t,n]=e,{uri:i,range:s}=n;if(!(i instanceof Se)||!Array.isArray(t)||t.length!==4||!x.isIRange(s))throw Co();const[o,a,l,c]=t,{colorProvider:d}=r.get(be),u=r.get(en).getModel(i);if(!u)throw Co();const h={range:s,color:{red:o,green:a,blue:l,alpha:c}},f=[],_=d.ordered(u).reverse().map(b=>Promise.resolve(b.provideColorPresentations(u,h,qe.None)).then(v=>{Array.isArray(v)&&f.push(...v)}));return Promise.all(_).then(()=>f)});var yoe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},woe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const rB=Object.create({}),Soe=500;let Du=class oB extends j{constructor(e,t,n,i){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new Q),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new sb(this._editor),this._colorDecorationClassRefs=this._register(new Q),this._debounceInformation=i.for(n.colorProvider,"Document Colors",{min:oB.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(n.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{const s=this._isEnabled;this._isEnabled=this.isEnabled(),s!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Js,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){this._computePromise=Xn(e=>woe(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return Promise.resolve([]);const n=new fs(!1),i=yield Coe(this._languageFeaturesService.colorProvider,t,e);return this._debounceInformation.update(t,n.elapsed()),i})),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},We)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Be.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,s)=>this._colorDatas.set(i,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[];for(let n=0;n<e.length&&t.length<Soe;n++){const{red:i,green:s,blue:o,alpha:a}=e[n].colorInfo.color,l=new Qe(Math.round(i*255),Math.round(s*255),Math.round(o*255),a),c=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:LH,inlineClassName:`${d.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:rB}}})}this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(x.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};Du.ID="editor.contrib.colorDetector";Du.RECOMPUTE_TIME=1e3;Du=yoe([yx(1,ft),yx(2,be),yx(3,Er)],Du);ct(Du.ID,Du);class xoe{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new R,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new R,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const _o=ee;class koe extends j{constructor(e,t,n){super(),this.model=t,this.domNode=_o(".colorpicker-header"),q(e,this.domNode),this.pickedColorNode=q(this.domNode,_o(".picked-color"));const i=p("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",i);const s=q(this.domNode,_o(".original-color"));s.style.backgroundColor=W.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(mu)||W.white,this._register(Vt((o,a)=>{this.backgroundColor=o.getColor(mu)||W.white})),this._register(Z(this.pickedColorNode,he.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Z(s,he.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=W.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=W.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(_o(".codicon.codicon-color-mode"))}}class Loe extends j{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=_o(".colorpicker-body"),q(e,this.domNode),this.saturationBox=new Toe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new Doe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new Eoe(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new W(new la(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new W(new la(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new W(new la(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class Toe extends j{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this.domNode=_o(".saturation-wrap"),q(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",q(this.domNode,this.canvas),this.selection=_o(".saturation-selection"),q(this.domNode,this.selection),this.layout(),this._register(Z(this.domNode,he.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Eg);const t=wi(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>this.onDidChangePosition(i.pageX-t.left,i.pageY-t.top),()=>null);const n=Z(document,he.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new W(new la(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=W.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class aB extends j{constructor(e,t){super(),this.model=t,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new R,this.onColorFlushed=this._onColorFlushed.event,this.domNode=q(e,_o(".strip")),this.overlay=q(this.domNode,_o(".overlay")),this.slider=q(this.domNode,_o(".slider")),this.slider.style.top="0px",this._register(Z(this.domNode,he.POINTER_DOWN,n=>this.onPointerDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new Eg),n=wi(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-n.top),()=>null);const i=Z(document,he.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class Doe extends aB{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:i}=e.rgba,s=new W(new Qe(t,n,i,1)),o=new W(new Qe(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class Eoe extends aB{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class Aoe extends Yr{constructor(e,t,n,i){super(),this.model=t,this.pixelRatio=n,this._register(Pf.onDidChange(()=>this.layout()));const s=_o(".colorpicker-widget");e.appendChild(s);const o=new koe(s,this.model,i);this.body=new Loe(s,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var Ioe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Noe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},JO=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Moe{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let cD=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=1}computeSync(e,t){return[]}computeAsync(e,t,n){return Cn.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return JO(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=Du.get(this._editor);if(!i)return[];for(const s of t){if(!i.isColorDecoration(s))continue;const o=i.getColorData(s.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,n){return JO(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:s,green:o,blue:a,alpha:l}=t.color,c=new Qe(Math.round(s*255),Math.round(o*255),Math.round(a*255),l),d=new W(c),u=yield QO(e,t,n,qe.None),h=new xoe(d,[],0);return h.colorPresentations=u||[],h.guessColorPresentation(d,i),new Moe(this,x.lift(t.range),h,n)})}renderHoverParts(e,t){if(t.length===0||!this._editor.hasModel())return j.None;const n=new Q,i=t[0],s=this._editor.getModel(),o=i.model,a=n.add(new Aoe(e.fragment,o,this._editor.getOption(131),this._themeService));e.setColorPicker(a);let l=new x(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn);const c=()=>{let u,h;if(o.presentation.textEdit){u=[o.presentation.textEdit],h=new x(o.presentation.textEdit.range.startLineNumber,o.presentation.textEdit.range.startColumn,o.presentation.textEdit.range.endLineNumber,o.presentation.textEdit.range.endColumn);const f=this._editor.getModel()._setTrackedRange(null,h,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",u),h=this._editor.getModel()._getTrackedRange(f)||h}else u=[{range:l,text:o.presentation.label,forceMoveMarkers:!1}],h=l.setEndPosition(l.endLineNumber,l.startColumn+o.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",u);o.presentation.additionalTextEdits&&(u=[...o.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",u),e.hide()),this._editor.pushUndoStop(),l=h},d=u=>QO(s,{range:l,color:{red:u.rgba.r/255,green:u.rgba.g/255,blue:u.rgba.b/255,alpha:u.rgba.a}},i.provider,qe.None).then(h=>{o.colorPresentations=h||[]});return n.add(o.onColorFlushed(u=>{d(u).then(c)})),n.add(o.onDidChangeColor(d)),n}};cD=Ioe([Noe(1,It)],cD);function dD(r,e){return!!r[e]}class wx{constructor(e,t){this.target=e.target,this.hasTriggerModifier=dD(e.event,t.triggerModifier),this.hasSideBySideModifier=dD(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class eP{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=dD(e,t.triggerModifier)}}class Rv{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function tP(r){return r==="altKey"?Je?new Rv(57,"metaKey",6,"altKey"):new Rv(5,"ctrlKey",6,"altKey"):Je?new Rv(6,"altKey",57,"metaKey"):new Rv(6,"altKey",5,"ctrlKey")}class uN extends j{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new R),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new R),this.onExecute=this._onExecute.event,this._onCancel=this._register(new R),this.onCancel=this._onCancel.event,this._editor=e,this._opts=tP(this._editor.getOption(72)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(72)){const n=tP(this._editor.getOption(72));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new wx(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new wx(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new wx(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new eP(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new eP(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var Roe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ja=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Eu=class extends Yf{constructor(e,t,n,i,s,o,a,l,c,d,u,h){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},i,s,o,a,l,c,d,u,h),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(f=>this._onParentConfigurationChanged(f)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Ta(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Eu=Roe([ja(3,Ve),ja(4,bt),ja(5,Sn),ja(6,Re),ja(7,It),ja(8,xn),ja(9,Wl),ja(10,_n),ja(11,be)],Eu);const nP=new W(new Qe(0,122,204)),Ooe={showArrow:!0,showFrame:!0,className:"",frameColor:nP,arrowColor:nP,keepEditorSelection:!1},Poe="vs.editor.contrib.zoneWidget";class Foe{constructor(e,t,n,i,s,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=s,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class Boe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class iw{constructor(e){this._editor=e,this._ruleName=iw._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),aR(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){aR(this._ruleName),CL(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:x.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}iw._IdGenerator=new TI(".arrow-decoration-");class Woe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new Q,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=el(t),Ta(this.options,Ooe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new iw(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){const t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const n=x.isIRange(e)?x.lift(e):x.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:Be.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){const e=this.editor.getOption(61);let t=0;if(this.options.showArrow){const n=Math.round(e/3);t+=2*n}if(this.options.showFrame){const n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),s=this._getWidth(i);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(i)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(61),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,d=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new Foe(o,n.lineNumber,n.column,t,g=>this._onViewZoneTop(g),g=>this._onViewZoneHeight(g)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new Boe(Poe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}const u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,s),this.options.keepEditorSelection||this.editor.setSelection(e);const h=this.editor.getModel();if(h){const f=e.endLineNumber+1;f<=h.getLineCount()?this.revealLine(f,!1):this.revealLine(h.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new bi(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const n=(t.currentY-e.startY)/this.editor.getOption(61),i=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+i;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class Voe extends Vf{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new R),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=q(e,ee(".monaco-dropdown")),this._label=q(this._element,ee(".dropdown-label"));let n=t.labelRenderer;n||(n=s=>(s.textContent=t.label||"",null));for(const s of[he.CLICK,he.MOUSE_DOWN,Bt.Tap])this._register(Z(this.element,s,o=>wt.stop(o,!0)));for(const s of[he.MOUSE_DOWN,Bt.Tap])this._register(Z(this._label,s,o=>{o instanceof MouseEvent&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(Z(this._label,he.KEY_UP,s=>{const o=new jt(s);(o.equals(3)||o.equals(10))&&(wt.stop(s,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(kt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class Hoe extends Voe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class lB extends Jo{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new R),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=q(s,ee("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new Hoe(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:this.getAction().label&&(e=this.getAction().label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var hN=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},or=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},cB=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function Uoe(r,e,t,n,i,s,o){const a=r.getActions(e);return $oe(a,t,!1,typeof n=="string"?c=>c===n:n,i,s,o),joe(a)}function joe(r){const e=new Q;for(const[,t]of r)for(const n of t)e.add(n);return e}function $oe(r,e,t,n=a=>a==="navigation",i=Number.MAX_SAFE_INTEGER,s=()=>!1,o=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const c=new Set;for(const[d,u]of r){let h;n(d)?(h=a,h.length>0&&o&&h.push(new ki)):(h=l,h.length>0&&h.push(new ki));for(let f of u){t&&(f=f instanceof Fc&&f.alt?f.alt:f);const g=h.push(f);f instanceof jm&&c.add({group:d,action:f,index:g-1})}}for(const{group:d,action:u,index:h}of c){const f=n(d)?a:l,g=u.actions;(g.length<=1||f.length+g.length-2<=i)&&s(u,d,f.length)&&f.splice(h,1,...g)}if(a!==l&&a.length>i){const d=a.splice(i,a.length-i);l.unshift(...d,new ki)}}let lg=class extends o_{constructor(e,t,n,i,s,o,a){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=s,this._themeService=o,this._contextMenuService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Fi),this._altKey=uc.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return cB(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(hi||Ti)&&this._altKey.keyStatus.shiftKey;const i=()=>{var s;const o=t&&n&&!!(!((s=this._commandAction.alt)===null||s===void 0)&&s.enabled);o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(s=>{n=s.altKey||(hi||Ti)&&s.shiftKey,i()})),this._register(Z(e,"mouseleave",s=>{t=!1,i()})),this._register(Z(e,"mouseenter",s=>{t=!0,i()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=n?p("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?p("titleAndKb","{0} ({1})",o,l):o;s=p("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,vI.modifierLabels[ar].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:i}=this;if(!n||!i)return;const s=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(s)if(mt.isThemeIcon(s)){const o=mt.asClassNameArray(s);i.classList.add(...o),this._itemClassDispose.value=Ke(()=>{i.classList.remove(...o)})}else i.style.backgroundImage=$m(this._themeService.getColorTheme().type)?gu(s.dark):gu(s.light),i.classList.add("icon"),this._itemClassDispose.value=yo(Ke(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};lg=hN([or(2,Mn),or(3,xn),or(4,Re),or(5,It),or(6,Vl)],lg);let uD=class extends lB{constructor(e,t,n,i){var s,o;const a=Object.assign({},t??Object.create(null),{menuAsChild:(s=t?.menuAsChild)!==null&&s!==void 0?s:!1,classNames:(o=t?.classNames)!==null&&o!==void 0?o:mt.isThemeIcon(e.item.icon)?mt.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,a),this._contextMenuService=n,this._themeService=i}render(e){super.render(e),Lt(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!mt.isThemeIcon(n)){this.element.classList.add("icon");const i=()=>{this.element&&(this.element.style.backgroundImage=$m(this._themeService.getColorTheme().type)?gu(n.dark):gu(n.light))};i(),this._register(this._themeService.onDidColorThemeChange(()=>{i()}))}}};uD=hN([or(2,Vl),or(3,It)],uD);let hD=class extends Jo{constructor(e,t,n,i,s,o,a,l){var c,d,u;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let h;const f=l.get(this._storageKey,1);f&&(h=e.actions.find(_=>f===_.id)),h||(h=e.actions[0]),this._defaultAction=this._instaService.createInstance(lg,h,{keybinding:this._getDefaultActionKeybindingLabel(h)});const g=Object.assign({},t??Object.create(null),{menuAsChild:(c=t?.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t?.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(u=t?.actionRunner)!==null&&u!==void 0?u:new Vf});this._dropdown=new lB(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(_=>{_.action instanceof Fc&&this.update(_.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(lg,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Vf{runAction(t,n){return cB(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(W$(this._container,ee(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let n;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ee(".action-container");this._defaultAction.render(q(this._container,t)),this._register(Z(t,he.KEY_DOWN,i=>{const s=new jt(i);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=ee(".dropdown-action-container");this._dropdown.render(q(this._container,n)),this._register(Z(n,he.KEY_DOWN,i=>{var s;const o=new jt(i);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};hD=hN([or(2,Mn),or(3,xn),or(4,Vl),or(5,qu),or(6,Ve),or(7,Qr)],hD);function zoe(r,e,t){return e instanceof Fc?r.createInstance(lg,e,t):e instanceof bA?e.item.rememberDefaultAction?r.createInstance(hD,e,t):r.createInstance(uD,e,t):void 0}var dB=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uB=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const hB=tt("IPeekViewService");lt(hB,class{constructor(){this._widgets=new Map}addExclusiveWidget(r,e){const t=this._widgets.get(r);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const i=this._widgets.get(r);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(r))};this._widgets.set(r,{widget:e,listener:e.onDidClose(n)})}});var gs;(function(r){r.inPeekEditor=new ge("inReferenceSearchEditor",!0,p("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),r.notInPeekEditor=r.inPeekEditor.toNegated()})(gs||(gs={}));let x_=class{constructor(e,t){e instanceof Eu&&gs.inPeekEditor.bindTo(t)}dispose(){}};x_.ID="editor.contrib.referenceController";x_=dB([uB(1,Re)],x_);ct(x_.ID,x_);function Koe(r){const e=r.get(bt).getFocusedCodeEditor();return e instanceof Eu?e.getParentEditor():e}const Goe={headerBackgroundColor:W.white,primaryHeadingColor:W.fromHex("#333333"),secondaryHeadingColor:W.fromHex("#6c6c6cb3")};let hy=class extends Woe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new R,this.onDidClose=this._onDidClose.event,Ta(this.options,Goe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ee(".head"),this._bodyElement=ee(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=ee(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),Hn(n,"click",o=>this._onTitleClick(o))),q(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=ee("span.filename"),this._secondaryHeading=ee("span.dirname"),this._metaHeading=ee("span.meta"),q(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=ee(".peekview-actions");q(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new Sa(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Ds("peekview.close",p("label.close","Close"),m.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:zoe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Fn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,$s(this._metaHeading)):ss(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(61)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};hy=dB([uB(2,Ve)],hy);const qoe=I("peekViewTitle.background",{dark:Ce(ds,.1),light:Ce(ds,.1),hcDark:null,hcLight:null},p("peekViewTitleBackground","Background color of the peek view title area.")),fB=I("peekViewTitleLabel.foreground",{dark:W.white,light:W.black,hcDark:W.white,hcLight:Ks},p("peekViewTitleForeground","Color of the peek view title.")),gB=I("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},p("peekViewTitleInfoForeground","Color of the peek view title info.")),Zoe=I("peekView.border",{dark:ds,light:ds,hcDark:Ge,hcLight:Ge},p("peekViewBorder","Color of the peek view borders and arrow.")),Yoe=I("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:W.black,hcLight:W.white},p("peekViewResultsBackground","Background color of the peek view result list."));I("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:W.white,hcLight:Ks},p("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));I("peekViewResult.fileForeground",{dark:W.white,light:"#1E1E1E",hcDark:W.white,hcLight:Ks},p("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));I("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},p("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));I("peekViewResult.selectionForeground",{dark:W.white,light:"#6C6C6C",hcDark:W.white,hcLight:Ks},p("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const Ov=I("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:W.black,hcLight:W.white},p("peekViewEditorBackground","Background color of the peek view editor."));I("peekViewEditorGutter.background",{dark:Ov,light:Ov,hcDark:Ov,hcLight:Ov},p("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));I("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},p("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));I("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},p("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));I("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:$t,hcLight:$t},p("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var Xoe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class zc{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=x9.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?p({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",kr(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):p("aria.oneReference","symbol in {0} on line {1} at column {2}",kr(this.uri),this.range.startLineNumber,this.range.startColumn)}}class Qoe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:s,endLineNumber:o,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:s-t}),c=new x(i,l.startColumn,i,s),d=new x(o,a,o,1073741824),u=n.getValueInRange(c).replace(/^\s+/,""),h=n.getValueInRange(e),f=n.getValueInRange(d).replace(/\s+$/,"");return{value:u+h+f,highlight:{start:u.length,end:u.length+h.length}}}}class k_{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new Pi}dispose(){ut(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?p("aria.fileReferences.1","1 symbol in {0}, full path {1}",kr(this.uri),this.uri.fsPath):p("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,kr(this.uri),this.uri.fsPath)}resolve(e){return Xoe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new Qoe(n))}catch(n){We(n)}return this})}}class Es{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new R,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Es._compareReferences);let i;for(const s of e)if((!i||!Wt.isEqual(i.uri,s.uri,!0))&&(i=new k_(this,s.uri),this.groups.push(i)),i.children.length===0||Es._compareReferences(s,i.children[i.children.length-1])!==0){const o=new zc(n===s,i,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),i.children.push(o)}}dispose(){ut(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Es(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?p("aria.result.0","No results found"):this.references.length===1?p("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?p("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):p("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:n}=e;let i=n.children.indexOf(e);const s=n.children.length,o=n.parent.groups.length;return o===1||t&&i+1<s||!t&&i>0?(t?i=(i+1)%s:i=(i+s-1)%s,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,s)=>({idx:s,prefixLen:lu(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,s)=>i.prefixLen>s.prefixLen?-1:i.prefixLen<s.prefixLen?1:i.offsetDist<s.offsetDist?-1:i.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&x.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Wt.compare(e.uri,t.uri)||x.compareRangesUsingStarts(e.range,t.range)}}var sw=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},L_=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let fD=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Es||e instanceof k_}getChildren(e){if(e instanceof Es)return e.groups;if(e instanceof k_)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};fD=sw([L_(0,ps)],fD);class Joe{getHeight(){return 23}getTemplateId(e){return e instanceof k_?T_.id:kb.id}}let gD=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof zc){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return kr(e.uri)}};gD=sw([L_(0,Mn)],gD);class eae{getId(e){return e instanceof zc?e.id:e.uri}}let pD=class extends j{constructor(e,t,n){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new ey(i,{supportHighlights:!0})),this.badge=new yT(q(i,ee(".count"))),this._register(UJ(this.badge,n)),e.appendChild(i)}set(e,t){const n=S1(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(p("referencesCount","{0} references",i)):this.badge.setTitleFormat(p("referenceCount","{0} reference",i))}};pD=sw([L_(1,Jf),L_(2,It)],pD);let T_=class pB{constructor(e){this._instantiationService=e,this.templateId=pB.id}renderTemplate(e){return this._instantiationService.createInstance(pD,e)}renderElement(e,t,n){n.set(e.element,D1(e.filterData))}disposeTemplate(e){e.dispose()}};T_.id="FileReferencesRenderer";T_=sw([L_(0,Ve)],T_);class tae{constructor(e){this.label=new wu(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${kr(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:o}=i;t&&!So.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,D1(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[o]))}}}class kb{constructor(){this.templateId=kb.id}renderTemplate(e){return new tae(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}kb.id="OneReferenceRenderer";class nae{getWidgetAriaLabel(){return p("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var iae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$a=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},iP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class rw{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Q,this._callOnModelChange=new Q,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let i=0,s=e.children.length;i<s;i++){const o=e.children[i];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:rw.DecorationOptions}),n.push(i))}this._editor.changeDecorations(i=>{const s=i.deltaDecorations([],t);for(let o=0;o<s.length;o++)this._decorations.set(s[o],e.children[n[o]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[n,i]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let o=!1;if(!x.equalsRange(s,i.range)){if(x.spansMultipleLines(s))o=!0;else{const a=i.range.endColumn-i.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=s}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}rw.DecorationOptions=Be.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class sae{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class rae extends MT{}let mD=class extends hy{constructor(e,t,n,i,s,o,a,l,c,d,u,h){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._languageService=u,this._languageConfigurationService=h,this._disposeOnNewModel=new Q,this._callOnDispose=new Q,this._onDidSelectReference=new R,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new At(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),ut(this._preview),ut(this._previewNotAvailableMessage),ut(this._tree),ut(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(Zoe)||W.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(qoe)||W.transparent,primaryHeadingColor:e.getColor(fB),secondaryHeadingColor:e.getColor(gB)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=q(e,ee("div.messages")),ss(this._messageContainer),this._splitView=new F9(e,{orientation:1}),this._previewContainer=q(e,ee("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Eu,this._previewContainer,t,this.editor),ss(this._previewContainer),this._previewNotAvailableMessage=new Rl(p("missingPreviewMessage","no preview available"),br,Rl.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=q(e,ee("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new nae,keyboardNavigationLabelProvider:this._instantiationService.createInstance(gD),identityProvider:new eae,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Yoe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Hn(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(rae,"ReferencesWidget",this._treeContainer,new Joe,[this._instantiationService.createInstance(T_),this._instantiationService.createInstance(kb)],this._instantiationService.createInstance(fD),n),this._splitView.addView({onDidChange:ve.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},ny.Distribute),this._splitView.addView({onDidChange:ve.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},ny.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const i=(s,o)=>{s instanceof zc&&(o==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:o,source:"tree"}))};this._tree.onDidOpen(s=>{s.sideBySide?i(s.element,"side"):s.editorOptions.pinned?i(s.element,"goto"):i(s.element,"show")}),ss(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new At(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=p("noResults","No results"),$s(this._messageContainer),Promise.resolve(void 0)):(ss(this._messageContainer),this._decorationsManager=new rw(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),$s(this._treeContainer),$s(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof zc)return e;if(e instanceof k_&&e.children.length>0)return e.children[0]}revealReference(e){return iP(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return iP(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==He.inMemory?this.setTitle(fY(e.uri),this._uriLabel.getUriLabel(S1(e.uri))):this.setTitle(p("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}ut(this._previewModelReference);const s=i.object;if(s){const o=this._preview.getModel()===s.textEditorModel?0:1,a=x.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}};mD=iae([$a(3,It),$a(4,ps),$a(5,Ve),$a(6,hB),$a(7,Jf),$a(8,x1),$a(9,Mn),$a(10,Qt),$a(11,_n)],mD);var oae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ch=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},sP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const sh=new ge("referenceSearchVisible",!1,p("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let Kc=class _D{constructor(e,t,n,i,s,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=s,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new Q,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=sh.bindTo(n)}static get(e){return e.getContribution(_D.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",o=sae.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(mD,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(p("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(p("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,u=new B(e.startLineNumber,e.startColumn),h=this._model.nearestReference(d,u);if(h)return this._widget.setSelection(h).then(()=>{this._widget&&this._editor.getOption(79)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return sP(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i),s?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return sP(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=x.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t,selectionSource:"code.jump"}},this._editor).then(n=>{var i;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const s=_D.get(n),o=this._model.clone();this.closeWidget(),n.focus(),s?.toggleWidget(t,Xn(a=>Promise.resolve(o)),(i=this._peekMode)!==null&&i!==void 0?i:!1)}},n=>{this._ignoreModelChangeEvent=!1,We(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:s}=e;this._editorService.openCodeEditor({resource:i,options:{selection:s,selectionSource:"code.jump",pinned:n}},this._editor,t)}};Kc.ID="editor.contrib.referencesController";Kc=oae([Ch(2,Re),Ch(3,bt),Ch(4,xn),Ch(5,Ve),Ch(6,Qr),Ch(7,ft)],Kc);function rh(r,e){const t=Koe(r);if(!t)return;const n=Kc.get(t);n&&e(n)}Ms.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Bn(2089,60),when:le.or(sh,gs.inPeekEditor),handler(r){rh(r,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Ms.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:le.or(sh,gs.inPeekEditor),handler(r){rh(r,e=>{e.goToNextOrPreviousReference(!0)})}});Ms.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:le.or(sh,gs.inPeekEditor),handler(r){rh(r,e=>{e.goToNextOrPreviousReference(!1)})}});rt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");rt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");rt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");rt.registerCommand("closeReferenceSearch",r=>rh(r,e=>e.closeWidget()));Ms.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:le.and(gs.inPeekEditor,le.not("config.editor.stablePeek"))});Ms.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:le.and(sh,le.not("config.editor.stablePeek"))});Ms.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:le.and(sh,Z9,UI.negate(),jI.negate()),handler(r){var e;const n=(e=r.get(Ar).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof zc&&rh(r,i=>i.revealReference(n[0]))}});Ms.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:le.and(sh,Z9,UI.negate(),jI.negate()),handler(r){var e;const n=(e=r.get(Ar).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof zc&&rh(r,i=>i.openReference(n[0],!0,!0))}});rt.registerCommand("openReference",r=>{var e;const n=(e=r.get(Ar).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof zc&&rh(r,i=>i.openReference(n[0],!1,!0))});var mB=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Up=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const fN=new ge("hasSymbols",!1,p("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),ow=tt("ISymbolNavigationService");let bD=class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=fN.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new vD(this._editorService),i=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const u of t.references)if(w3(u.uri,a.uri))c=!0,d=d||x.containsPosition(u.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=yo(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:x.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?p("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):p("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};bD=mB([Up(0,Re),Up(1,bt),Up(2,xn),Up(3,Mn)],bD);lt(ow,bD,!0);te(new class extends Un{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:fN,kbOpts:{weight:100,primary:70}})}runEditorCommand(r,e){return r.get(ow).revealNext(e)}});Ms.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:fN,primary:9,handler(r){r.get(ow).reset()}});let vD=class{constructor(e){this._listener=new Map,this._disposables=new Q,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),ut(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,yo(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};vD=mB([Up(0,bt)],vD);var _B=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function Lb(r,e,t,n){const s=t.ordered(r).map(o=>Promise.resolve(n(o,r,e)).then(void 0,a=>{Jn(a)}));return Promise.all(s).then(o=>{const a=[];for(const l of o)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function gN(r,e,t,n){return Lb(e,t,r,(i,s,o)=>i.provideDefinition(s,o,n))}function bB(r,e,t,n){return Lb(e,t,r,(i,s,o)=>i.provideDeclaration(s,o,n))}function vB(r,e,t,n){return Lb(e,t,r,(i,s,o)=>i.provideImplementation(s,o,n))}function CB(r,e,t,n){return Lb(e,t,r,(i,s,o)=>i.provideTypeDefinition(s,o,n))}function aw(r,e,t,n,i){return Lb(e,t,r,(s,o,a)=>_B(this,void 0,void 0,function*(){const l=yield s.provideReferences(o,a,{includeDeclaration:!0},i);if(!n||!l||l.length!==2)return l;const c=yield s.provideReferences(o,a,{includeDeclaration:!1},i);return c&&c.length===1?c:l}))}function Tb(r){return _B(this,void 0,void 0,function*(){const e=yield r(),t=new Es(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}Aa("_executeDefinitionProvider",(r,e,t)=>{const n=r.get(be),i=gN(n.definitionProvider,e,t,qe.None);return Tb(()=>i)});Aa("_executeTypeDefinitionProvider",(r,e,t)=>{const n=r.get(be),i=CB(n.typeDefinitionProvider,e,t,qe.None);return Tb(()=>i)});Aa("_executeDeclarationProvider",(r,e,t)=>{const n=r.get(be),i=bB(n.declarationProvider,e,t,qe.None);return Tb(()=>i)});Aa("_executeReferenceProvider",(r,e,t)=>{const n=r.get(be),i=aw(n.referenceProvider,e,t,!1,qe.None);return Tb(()=>i)});Aa("_executeImplementationProvider",(r,e,t)=>{const n=r.get(be),i=vB(n.implementationProvider,e,t,qe.None);return Tb(()=>i)});var zr=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},Sx,xx,kx,Lx,Tx,Dx,Ex,Ax;vr.appendMenuItem(M.EditorContext,{submenu:M.EditorContextPeek,title:p("peek.submenu","Peek"),group:"navigation",order:100});const yB=new Set;function Oo(r){const e=new r;return k5(e),yB.add(e.id),e}class D_{constructor(e,t){this.model=e,this.position=t}static is(e){return!e||typeof e!="object"?!1:!!(e instanceof D_||B.isIPosition(e.position)&&e.model)}}class Kr extends me{constructor(e,t){super(t),this.configuration=e}run(e,t,n){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(xn),s=e.get(bt),o=e.get(id),a=e.get(ow),l=e.get(be),c=t.getModel(),d=t.getPosition(),u=D_.is(n)?n:new D_(c,d),h=new ku(t,5),f=iA(this._getLocationModel(l,u.model,u.position,h.token),h.token).then(g=>zr(this,void 0,void 0,function*(){var _;if(!g||h.token.isCancellationRequested)return;di(g.ariaMessage);let b;if(g.referenceAt(c.uri,d)){const C=this._getAlternativeCommand(t);!Kr._activeAlternativeCommands.has(C)&&yB.has(C)&&(b=t.getAction(C))}const v=g.references.length;if(v===0){if(!this.configuration.muteMessage){const C=c.getWordAtPosition(d);(_=Is.get(t))===null||_===void 0||_.showMessage(this._getNoResultFoundMessage(C),d)}}else if(v===1&&b)Kr._activeAlternativeCommands.add(this.id),b.run().finally(()=>{Kr._activeAlternativeCommands.delete(this.id)});else return this._onResult(s,a,t,g)}),g=>{i.error(g)}).finally(()=>{h.dispose()});return o.showWhile(f,250),f}_onResult(e,t,n,i){return zr(this,void 0,void 0,function*(){const s=this._getGoToPreference(n);if(!(n instanceof Eu)&&(this.configuration.openInPeek||s==="peek"&&i.references.length>1))this._openInPeek(n,i);else{const o=i.firstReference(),a=i.references.length>1&&s==="gotoAndPeek",l=yield this._openReference(n,e,o,this.configuration.openToSide,!a);a&&l?this._openInPeek(l,i):i.dispose(),s==="goto"&&t.put(o)}})}_openReference(e,t,n,i,s){return zr(this,void 0,void 0,function*(){let o;if(cH(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:x.collapseToStart(o),selectionRevealType:3,selectionSource:"code.jump"}},e,i);if(a){if(s){const l=a.getModel(),c=a.createDecorationsCollection([{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}})}_openInPeek(e,t){const n=Kc.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),Xn(i=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}Kr._activeAlternativeCommands=new Set;class Db extends Kr{_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(yield gN(e.definitionProvider,t,n,i),p("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("noResultWord","No definition found for '{0}'",e.word):p("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleDefinitions}}const wB=Jc&&!QE()?2118:70;Oo((Sx=class CD extends Db{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:CD.id,label:p("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:le.and(A.hasDefinitionProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:wB,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),rt.registerCommandAlias("editor.action.goToDeclaration",CD.id)}},Sx.id="editor.action.revealDefinition",Sx));Oo((xx=class yD extends Db{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:yD.id,label:p("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:le.and(A.hasDefinitionProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,wB),weight:100}}),rt.registerCommandAlias("editor.action.openDeclarationToTheSide",yD.id)}},xx.id="editor.action.revealDefinitionAside",xx));Oo((kx=class wD extends Db{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:wD.id,label:p("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:le.and(A.hasDefinitionProvider,gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:M.EditorContextPeek,group:"peek",order:2}}),rt.registerCommandAlias("editor.action.previewDeclaration",wD.id)}},kx.id="editor.action.peekDefinition",kx));class SB extends Kr{_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(yield bB(e.declarationProvider,t,n,i),p("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(53).multipleDeclarations}}Oo((Lx=class xB extends SB{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:xB.id,label:p("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:le.and(A.hasDeclarationProvider,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}},Lx.id="editor.action.revealDeclaration",Lx));Oo(class extends SB{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:p("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:le.and(A.hasDeclarationProvider,gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:M.EditorContextPeek,group:"peek",order:3}})}});class kB extends Kr{_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(yield CB(e.typeDefinitionProvider,t,n,i),p("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):p("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleTypeDefinitions}}Oo((Tx=class LB extends kB{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:LB.ID,label:p("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:le.and(A.hasTypeDefinitionProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},Tx.ID="editor.action.goToTypeDefinition",Tx));Oo((Dx=class TB extends kB{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:TB.ID,label:p("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:le.and(A.hasTypeDefinitionProvider,gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:M.EditorContextPeek,group:"peek",order:4}})}},Dx.ID="editor.action.peekTypeDefinition",Dx));class DB extends Kr{_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(yield vB(e.implementationProvider,t,n,i),p("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):p("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(53).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(53).multipleImplementations}}Oo((Ex=class EB extends DB{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:EB.ID,label:p("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:le.and(A.hasImplementationProvider,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},Ex.ID="editor.action.goToImplementation",Ex));Oo((Ax=class AB extends DB{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:AB.ID,label:p("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:le.and(A.hasImplementationProvider,gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:M.EditorContextPeek,group:"peek",order:5}})}},Ax.ID="editor.action.peekImplementation",Ax));class IB extends Kr{_getNoResultFoundMessage(e){return e?p("references.no","No references found for '{0}'",e.word):p("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(53).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(53).multipleReferences}}Oo(class extends IB{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:p("goToReferences.label","Go to References"),alias:"Go to References",precondition:le.and(A.hasReferenceProvider,gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:A.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(yield aw(e.referenceProvider,t,n,!0,i),p("ref.title","References"))})}});Oo(class extends IB{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:p("references.action.label","Peek References"),alias:"Peek References",precondition:le.and(A.hasReferenceProvider,gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:M.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(yield aw(e.referenceProvider,t,n,!1,i),p("ref.title","References"))})}});class aae extends Kr{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:p("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:le.and(gs.notInPeekEditor,A.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,i){return zr(this,void 0,void 0,function*(){return new Es(this._references,p("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&p("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(53).multipleReferences}_getAlternativeCommand(){return""}}rt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Se},{name:"position",description:"The position at which to start",constraint:B.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(r,e,t,n,i,s,o)=>zr(void 0,void 0,void 0,function*(){Lt(Se.isUri(e)),Lt(B.isIPosition(t)),Lt(Array.isArray(n)),Lt(typeof i>"u"||typeof i=="string"),Lt(typeof o>"u"||typeof o=="boolean");const a=r.get(bt),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Ol(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends aae{_getNoResultFoundMessage(u){return s||super._getNoResultFoundMessage(u)}}({muteMessage:!Boolean(s),openInPeek:Boolean(o),openToSide:!1},n,i);c.get(Ve).invokeFunction(d.run.bind(d),l)})})});rt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Se},{name:"position",description:"The position at which to start",constraint:B.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(r,e,t,n,i)=>zr(void 0,void 0,void 0,function*(){r.get(Sn).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});rt.registerCommand({id:"editor.action.findReferences",handler:(r,e,t)=>{Lt(Se.isUri(e)),Lt(B.isIPosition(t));const n=r.get(be),i=r.get(bt);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(s=>{if(!Ol(s)||!s.hasModel())return;const o=Kc.get(s);if(!o)return;const a=Xn(c=>aw(n.referenceProvider,s.getModel(),B.lift(t),!1,c).then(d=>new Es(d,p("ref.title","References")))),l=new x(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(l,a,!1))})}});rt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");vr.appendMenuItems([{id:M.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:p({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:M.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:p({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:M.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:p({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:M.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:p({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:M.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:p({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var lae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ix=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Au=class k0{constructor(e,t,n,i){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=i,this.toUnhook=new Q,this.toUnhookForKeyboard=new Q,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new uN(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([o,a])=>{this.startFindDefinitionFromMouse(o,as(a))})),this.toUnhook.add(s.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},a=>{this.removeLinkDecorations(),We(a)})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(k0.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;const i=new cy(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Xn(s=>this.findDefinition(e,s)),this.previousPromise.then(s=>{if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}if(s.length>1)this.addDecoration(new x(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new rs().appendText(p("multipleResults","Click to show {0} definitions.",s.length)));else{const o=s[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:c}=o.range;if(c<1||c>l.getLineCount()){a.dispose();return}const d=this.getPreviewValue(l,c,o);let u;o.originSelectionRange?u=x.lift(o.originSelectionRange):u=new x(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const h=this.languageService.guessLanguageIdByFilepathOrFirstLine(l.uri);this.addDecoration(u,new rs().appendCodeblock(h||"",d)),a.dispose()})}}).then(void 0,We)}getPreviewValue(e,t,n){let i=n.range;return i.endLineNumber-i.startLineNumber>=k0.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+k0.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<i;s++){const o=e.getLineFirstNonWhitespaceColumn(s);if(n===o)break}return new x(t,1,s+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?gN(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(80)&&!this.isInPeekEditor(n);return new Db({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(Re);return gs.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};Au.ID="editor.contrib.gotodefinitionatposition";Au.MAX_SOURCE_PREVIEW_LINES=8;Au=lae([Ix(1,ps),Ix(2,Qt),Ix(3,be)],Au);ct(Au.ID,Au);Vt((r,e)=>{const t=r.getColor(NA);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const Pv=ee;class NB extends j{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new cb(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class pN extends j{constructor(e,t,n){super(),this.actionContainer=q(e,Pv("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=q(this.actionContainer,Pv("a.action")),this.action.setAttribute("role","button"),t.iconClass&&q(this.action,Pv(`span.icon.${t.iconClass}`));const i=q(this.action,Pv("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register(Z(this.actionContainer,he.CLICK,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this._register(Z(this.actionContainer,he.KEY_UP,s=>{new jt(s).equals(3)&&(s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}static render(e,t,n){return new pN(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}var cae=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},dae=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}};class uae{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}}class MB extends j{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new R),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new Tt(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new Tt(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new Tt(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(55).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=MU(e=>this._computer.computeAsync(e)),cae(this,void 0,void 0,function*(){var e,t;try{try{for(var n=dae(this._asyncIterable),i;i=yield n.next(),!i.done;){const s=i.value;s&&(this._result.push(s),this._fireResult())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(s){We(s)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new uae(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class Nx{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class L0{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}const oh=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};class Fr{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,n=this.value.charCodeAt(e),i;if(i=Fr._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(Fr.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(Fr.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(Fr.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(Fr.isVariableCharacter(n)||Fr.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Fr._table[n]>"u"&&!Fr.isDigitCharacter(n)&&!Fr.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}}Fr._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Wg{constructor(){this._children=[]}appendChild(e){return e instanceof os&&this._children[this._children.length-1]instanceof os?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),s=n.children.slice(0);s.splice(i,1,...t),n._children=s,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Eb)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class os extends Wg{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new os(this.value)}}class RB extends Wg{}class Vr extends RB{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Vg?this._children[0]:void 0}clone(){const e=new Vr(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class Vg extends Wg{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof os&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new Vg;return this.options.forEach(e.appendChild,e),e}}class mN extends Wg{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof ro&&Boolean(s.elseValue))&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof ro){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){const e=new mN;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class ro extends Wg{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":Boolean(e)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(e)&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new ro(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class E_ extends RB{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new os(t)],!0):!1}clone(){const e=new E_(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function rP(r,e){const t=[...r];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class Eb extends Wg{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(n){return n instanceof Vr&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return rP([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:n}=e;for(;n;)n instanceof Vr&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof E_&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new Eb;return this._children=this.children.map(t=>t.clone()),e}walk(e){rP(this.children,e)}}class Gc{constructor(){this._scanner=new Fr,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){const i=new Eb;return this.parseFragment(e,i),this.ensureFinalTabstop(i,n??!1,t??!1),i}parseFragment(e,t){const n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const i=new Map,s=[];t.walk(o=>(o instanceof Vr&&(o.isFinalTabstop?i.set(0,void 0):!i.has(o.index)&&o.children.length>0?i.set(o.index,o.children):s.push(o)),!0));for(const o of s){const a=i.get(o.index);if(a){const l=new Vr(o.index);l.transform=o.transform;for(const c of a)l.appendChild(c.clone());t.replace(o,[l])}}return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new Vr(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new os(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Vr(Number(t)):new E_(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new Vr(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new os("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const o=new Vg;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(o),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new os(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new E_(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new os("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){const t=new mN;let n="",i="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new os(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);const i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new ro(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new ro(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new ro(Number(i),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new ro(Number(i),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new ro(Number(i),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const o=this._until(4);if(o)return e.appendChild(new ro(Number(i),void 0,s,o)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new ro(Number(i),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new os(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const hae=p("defaultLabel","input"),fae=p("label.preserveCaseToggle","Preserve Case");class gae extends _b{constructor(e){super({icon:m.preserveCase,title:fae+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class pae extends Yr{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new R),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new R),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new R),this._onInput=this._register(new R),this._onKeyUp=this._register(new R),this._onPreserveCaseKeyDown=this._register(new R),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||hae,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const s=i.appendPreserveCaseLabel||"",o=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,c=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new D9(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new gae({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(h=>{this._onPreserveCaseKeyDown.fire(h)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=d.indexOf(document.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%d.length:h.equals(15)&&(f===0?g=d.length-1:g=f-1),h.equals(9)?(d[f].blur(),this.inputBox.focus()):g>=0&&d[g].focus(),wt.stop(h,!0)}}});const u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var OB=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PB=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const _N=new ge("suggestWidgetVisible",!1,p("suggestWidgetVisible","Whether suggestion are visible")),bN="historyNavigationWidgetFocus",FB="historyNavigationForwardsEnabled",BB="historyNavigationBackwardsEnabled";let nu;const Fv=[];function WB(r,e){if(Fv.includes(e))throw new Error("Cannot register the same widget multiple times");Fv.push(e);const t=new Q,n=t.add(r.createScoped(e.element)),i=new ge(bN,!1).bindTo(n),s=new ge(FB,!0).bindTo(n),o=new ge(BB,!0).bindTo(n),a=()=>{i.set(!0),nu=e},l=()=>{i.set(!1),nu===e&&(nu=void 0)};return e.element===document.activeElement&&a(),t.add(e.onDidFocus(()=>a())),t.add(e.onDidBlur(()=>l())),t.add(Ke(()=>{Fv.splice(Fv.indexOf(e),1),l()})),{scopedContextKeyService:n,historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}let SD=class extends Cte{constructor(e,t,n,i,s=!1){super(e,t,s,n),this._register(WB(i,this.inputBox))}};SD=OB([PB(3,Re)],SD);let xD=class extends pae{constructor(e,t,n,i,s=!1){super(e,t,s,n),this._register(WB(i,this.inputBox))}};xD=OB([PB(3,Re)],xD);Ms.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:le.and(le.has(bN),le.equals(BB,!0),_N.isEqualTo(!1)),primary:16,secondary:[528],handler:r=>{nu&&nu.showPreviousValue()}});Ms.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:le.and(le.has(bN),le.equals(FB,!0),_N.isEqualTo(!1)),primary:18,secondary:[530],handler:r=>{nu&&nu.showNextValue()}});var bm=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Xe={Visible:_N,HasFocusedSuggestion:new ge("suggestWidgetHasFocusedSuggestion",!1,p("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new ge("suggestWidgetDetailsVisible",!1,p("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new ge("suggestWidgetMultipleSuggestions",!1,p("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new ge("suggestionMakesTextEdit",!0,p("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new ge("acceptSuggestionOnEnter",!0,p("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new ge("suggestionHasInsertAndReplaceRange",!1,p("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new ge("suggestionInsertMode",void 0,{type:"string",description:p("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new ge("suggestionCanResolve",!1,p("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Tc=new M("suggestWidgetStatusBar");class mae{constructor(e,t,n,i){this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=So.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,x.isIRange(t.range)?(this.editStart=new B(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new B(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new B(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||x.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new B(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new B(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new B(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||x.spansMultipleLines(t.range.insert)||x.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return bm(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{Da(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class A_{constructor(e=2,t=new Set,n=new Set,i=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=i}}A_.default=new A_;let _ae;function bae(){return _ae}class vae{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}function vN(r,e,t,n=A_.default,i={triggerKind:0},s=qe.None){return bm(this,void 0,void 0,function*(){const o=new fs(!0);t=t.clone();const a=e.getWordAtPosition(t),l=a?new x(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):x.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],u=new Q,h=[];let f=!1;const g=(b,v,C)=>{var y,w,L;let T=!1;if(!v)return T;for(const S of v.suggestions)if(!n.kindFilter.has(S.kind)){if(!n.showDeprecated&&(!((y=S?.tags)===null||y===void 0)&&y.includes(1)))continue;S.range||(S.range=c),S.sortText||(S.sortText=typeof S.label=="string"?S.label:S.label.label),!f&&S.insertTextRules&&S.insertTextRules&4&&(f=Gc.guessNeedsClipboard(S.insertText)),d.push(new mae(t,S,v,b)),T=!0}return OE(v)&&u.add(v),h.push({providerName:(w=b._debugDisplayName)!==null&&w!==void 0?w:"unknown_provider",elapsedProvider:(L=v.duration)!==null&&L!==void 0?L:-1,elapsedOverall:C.elapsed()}),T},_=(()=>bm(this,void 0,void 0,function*(){}))();for(const b of r.orderedGroups(e)){let v=!1;if(yield Promise.all(b.map(C=>bm(this,void 0,void 0,function*(){if(!(n.providerFilter.size>0&&!n.providerFilter.has(C)))try{const y=new fs(!0),w=yield C.provideCompletionItems(e,t,i,s);v=g(C,w,y)||v}catch(y){Jn(y)}}))),v||s.isCancellationRequested)break}return yield _,s.isCancellationRequested?(u.dispose(),Promise.reject(new ed)):new vae(d.sort(VB(n.snippetSortOrder)),f,{entries:h,elapsed:o.elapsed()},u)})}function CN(r,e){if(r.sortTextLow&&e.sortTextLow){if(r.sortTextLow<e.sortTextLow)return-1;if(r.sortTextLow>e.sortTextLow)return 1}return r.textLabel<e.textLabel?-1:r.textLabel>e.textLabel?1:r.completion.kind-e.completion.kind}function Cae(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return CN(r,e)}function yae(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return CN(r,e)}const lw=new Map;lw.set(0,Cae);lw.set(2,yae);lw.set(1,CN);function VB(r){return lw.get(r)}rt.registerCommand("_executeCompletionItemProvider",(r,...e)=>bm(void 0,void 0,void 0,function*(){const[t,n,i,s]=e;Lt(Se.isUri(t)),Lt(B.isIPosition(n)),Lt(typeof i=="string"||!i),Lt(typeof s=="number"||!s);const{completionProvider:o}=r.get(be),a=yield r.get(ps).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=yield vN(o,a.object.textEditorModel,B.lift(n),void 0,{triggerCharacter:i,triggerKind:i?1:0});for(const u of d.items)c.length<(s??0)&&c.push(u.resolve(qe.None)),l.incomplete=l.incomplete||u.container.incomplete,l.suggestions.push(u.completion);try{return yield Promise.all(c),l}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{a.dispose()}}));function wae(r,e){var t;(t=r.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}class of{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}var yN=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const oP=ee;let gy=class kD extends j{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._widget=this._register(this._instantiationService.createInstance(iu,this._editor)),this._isChangingDecorations=!1,this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const i of oh.getAll())this._participants.push(this._instantiationService.createInstance(i,this._editor));this._participants.sort((i,s)=>i.hoverOrdinal-s.hoverOrdinal),this._computer=new py(this._editor,this._participants),this._hoverOperation=this._register(new MB(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value,i.isComplete,i.hasLoadingMessage)})),this._register(this._editor.onDidChangeModelDecorations(()=>{this._isChangingDecorations||this._onModelDecorationsChanged()})),this._register(Hn(this._widget.getDomNode(),"keydown",i=>{i.equals(9)&&this.hide()})),this._register(Yt.onDidChange(()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))}))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){const t=[];for(const i of this._participants)if(i.suggestHoverAnchor){const s=i.suggestHoverAnchor(e);s&&t.push(s)}const n=e.target;if(n.type===6&&t.push(new Nx(0,n.range)),n.type===7){const i=this._editor.getOption(46).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<i&&t.push(new Nx(0,n.range))}return t.length===0?!1:(t.sort((i,s)=>s.priority-i.priority),this._startShowingAt(t[0],0,!1),!0)}startShowingAtRange(e,t,n){this._startShowingAt(new Nx(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._computer.anchor&&this._computer.anchor.equals(e))){if(this._hoverOperation.cancel(),this._widget.position)if(!this._computer.anchor||!e.canAdoptVisibleHover(this._computer.anchor,this._widget.position))this.hide();else{const i=this._messages.filter(s=>s.isValidForHoverAnchor(e));if(i.length===0)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}containsNode(e){return this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}_renderMessages(e,t){const{showAtPosition:n,showAtRange:i,highlightRange:s}=kD.computeHoverRanges(e.range,t),o=new Q,a=o.add(new LD(this._keybindingService)),l=document.createDocumentFragment();let c=null;const d={fragment:l,statusBar:a,setColorPicker:u=>c=u,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const u of this._participants){const h=t.filter(f=>f.owner===u);h.length>0&&o.add(u.renderHoverParts(d,h))}if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(s){const u=this._editor.createDecorationsCollection();try{this._isChangingDecorations=!0,u.set([{range:s,options:kD._DECORATION_OPTIONS}])}finally{this._isChangingDecorations=!1}o.add(Ke(()=>{try{this._isChangingDecorations=!0,u.clear()}finally{this._isChangingDecorations=!1}}))}this._widget.showAt(l,new Sae(c,n,i,this._editor.getOption(55).above,this._computer.shouldFocus,o))}else o.dispose()}static computeHoverRanges(e,t){const n=e.startLineNumber;let i=e.startColumn,s=e.endColumn,o=t[0].range,a=null;for(const l of t)o=x.plusRange(o,l.range),l.range.startLineNumber===n&&l.range.endLineNumber===n&&(i=Math.min(i,l.range.startColumn),s=Math.max(s,l.range.endColumn)),l.forceShowAtRange&&(a=l.range);return{showAtPosition:a?a.getStartPosition():new B(e.startLineNumber,i),showAtRange:a||new x(n,i,n,s),highlightRange:o}}};gy._DECORATION_OPTIONS=Be.register({description:"content-hover-highlight",className:"hoverHighlight"});gy=yN([fy(1,Ve),fy(2,Mn)],gy);class Sae{constructor(e,t,n,i,s,o){this.colorPicker=e,this.showAtPosition=t,this.showAtRange=n,this.preferAbove=i,this.stoleFocus=s,this.disposables=o}}let iu=class HB extends j{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=A.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new NB),this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(46)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,t;return(t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition)!==null&&t!==void 0?t:null}get isColorPickerVisible(){var e;return Boolean((e=this._visibleData)===null||e===void 0?void 0:e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return HB.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Xe.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(46);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}showAt(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const n=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==n&&(this._hover.contentsDomNode.style.paddingBottom=n,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}};iu.ID="editor.contrib.contentHoverWidget";iu=yN([fy(1,Re)],iu);let LD=class extends j{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=oP("div.hover-row.status-bar"),this.actionsElement=q(this.hoverElement,oP("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(pN.render(this.actionsElement,e,n))}append(e){const t=q(this.actionsElement,e);return this._hasContent=!0,t}};LD=yN([fy(0,Mn)],LD);class py{constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];const s=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===i?o.range.startColumn:1,l=o.range.endLineNumber===i?o.range.endColumn:s;if(o.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Cn.EMPTY;const n=py._getLineDecorations(this._editor,t);return Cn.merge(this._participants.map(i=>i.computeAsync?i.computeAsync(t,n,e):Cn.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=py._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return Y_(t)}}let UB={};(function(){function r(e,t){t(UB)}r.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof r=="function"&&r.amd?r(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(Y,$){for(var z=0;z<$.length;z++){var E=$[z];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(Y,E.key,E)}}function n(Y,$,z){return $&&t(Y.prototype,$),z&&t(Y,z),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function i(Y,$){if(Y){if(typeof Y=="string")return s(Y,$);var z=Object.prototype.toString.call(Y).slice(8,-1);if(z==="Object"&&Y.constructor&&(z=Y.constructor.name),z==="Map"||z==="Set")return Array.from(Y);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return s(Y,$)}}function s(Y,$){($==null||$>Y.length)&&($=Y.length);for(var z=0,E=new Array($);z<$;z++)E[z]=Y[z];return E}function o(Y,$){var z=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(z)return(z=z.call(Y)).next.bind(z);if(Array.isArray(Y)||(z=i(Y))||$&&Y&&typeof Y.length=="number"){z&&(Y=z);var E=0;return function(){return E>=Y.length?{done:!0}:{done:!1,value:Y[E++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(Y){e.defaults=Y}var c=/[&<>"']/,d=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function($){return f[$]};function _(Y,$){if($){if(c.test(Y))return Y.replace(d,g)}else if(u.test(Y))return Y.replace(h,g);return Y}var b=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function v(Y){return Y.replace(b,function($,z){return z=z.toLowerCase(),z==="colon"?":":z.charAt(0)==="#"?z.charAt(1)==="x"?String.fromCharCode(parseInt(z.substring(2),16)):String.fromCharCode(+z.substring(1)):""})}var C=/(^|[^\[])\^/g;function y(Y,$){Y=typeof Y=="string"?Y:Y.source,$=$||"";var z={replace:function(N,V){return V=V.source||V,V=V.replace(C,"$1"),Y=Y.replace(N,V),z},getRegex:function(){return new RegExp(Y,$)}};return z}var w=/[^\w:]/g,L=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function T(Y,$,z){if(Y){var E;try{E=decodeURIComponent(v(z)).replace(w,"").toLowerCase()}catch{return null}if(E.indexOf("javascript:")===0||E.indexOf("vbscript:")===0||E.indexOf("data:")===0)return null}$&&!L.test(z)&&(z=F($,z));try{z=encodeURI(z).replace(/%25/g,"%")}catch{return null}return z}var S={},k=/^[^:]+:\/*[^/]*$/,D=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/;function F(Y,$){S[" "+Y]||(k.test(Y)?S[" "+Y]=Y+"/":S[" "+Y]=fe(Y,"/",!0)),Y=S[" "+Y];var z=Y.indexOf(":")===-1;return $.substring(0,2)==="//"?z?$:Y.replace(D,"$1")+$:$.charAt(0)==="/"?z?$:Y.replace(O,"$1")+$:Y+$}var U={exec:function(){}};function K(Y){for(var $=1,z,E;$<arguments.length;$++){z=arguments[$];for(E in z)Object.prototype.hasOwnProperty.call(z,E)&&(Y[E]=z[E])}return Y}function ae(Y,$){var z=Y.replace(/\|/g,function(V,P,X){for(var se=!1,Ee=P;--Ee>=0&&X[Ee]==="\\";)se=!se;return se?"|":" |"}),E=z.split(/ \|/),N=0;if(E[0].trim()||E.shift(),E.length>0&&!E[E.length-1].trim()&&E.pop(),E.length>$)E.splice($);else for(;E.length<$;)E.push("");for(;N<E.length;N++)E[N]=E[N].trim().replace(/\\\|/g,"|");return E}function fe(Y,$,z){var E=Y.length;if(E===0)return"";for(var N=0;N<E;){var V=Y.charAt(E-N-1);if(V===$&&!z)N++;else if(V!==$&&z)N++;else break}return Y.slice(0,E-N)}function we(Y,$){if(Y.indexOf($[1])===-1)return-1;for(var z=Y.length,E=0,N=0;N<z;N++)if(Y[N]==="\\")N++;else if(Y[N]===$[0])E++;else if(Y[N]===$[1]&&(E--,E<0))return N;return-1}function xe(Y){Y&&Y.sanitize&&!Y.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function De(Y,$){if($<1)return"";for(var z="";$>1;)$&1&&(z+=Y),$>>=1,Y+=Y;return z+Y}function Oe(Y,$,z,E){var N=$.href,V=$.title?_($.title):null,P=Y[1].replace(/\\([\[\]])/g,"$1");if(Y[0].charAt(0)!=="!"){E.state.inLink=!0;var X={type:"link",raw:z,href:N,title:V,text:P,tokens:E.inlineTokens(P,[])};return E.state.inLink=!1,X}return{type:"image",raw:z,href:N,title:V,text:_(P)}}function nt(Y,$){var z=Y.match(/^(\s+)(?:```)/);if(z===null)return $;var E=z[1];return $.split(`
`).map(function(N){var V=N.match(/^\s+/);if(V===null)return N;var P=V[0];return P.length>=E.length?N.slice(E.length):N}).join(`
`)}var Te=function(){function Y(z){this.options=z||e.defaults}var $=Y.prototype;return $.space=function(E){var N=this.rules.block.newline.exec(E);if(N&&N[0].length>0)return{type:"space",raw:N[0]}},$.code=function(E){var N=this.rules.block.code.exec(E);if(N){var V=N[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:N[0],codeBlockStyle:"indented",text:this.options.pedantic?V:fe(V,`
`)}}},$.fences=function(E){var N=this.rules.block.fences.exec(E);if(N){var V=N[0],P=nt(V,N[3]||"");return{type:"code",raw:V,lang:N[2]?N[2].trim():N[2],text:P}}},$.heading=function(E){var N=this.rules.block.heading.exec(E);if(N){var V=N[2].trim();if(/#$/.test(V)){var P=fe(V,"#");(this.options.pedantic||!P||/ $/.test(P))&&(V=P.trim())}var X={type:"heading",raw:N[0],depth:N[1].length,text:V,tokens:[]};return this.lexer.inline(X.text,X.tokens),X}},$.hr=function(E){var N=this.rules.block.hr.exec(E);if(N)return{type:"hr",raw:N[0]}},$.blockquote=function(E){var N=this.rules.block.blockquote.exec(E);if(N){var V=N[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:N[0],tokens:this.lexer.blockTokens(V,[]),text:V}}},$.list=function(E){var N=this.rules.block.list.exec(E);if(N){var V,P,X,se,Ee,ke,$e,Ue,St,gt,Ie,bn,qt=N[1].trim(),_s=qt.length>1,Rt={type:"list",raw:"",ordered:_s,start:_s?+qt.slice(0,-1):"",loose:!1,items:[]};qt=_s?"\\d{1,9}\\"+qt.slice(-1):"\\"+qt,this.options.pedantic&&(qt=_s?qt:"[*+-]");for(var kn=new RegExp("^( {0,3}"+qt+")((?:[	 ][^\\n]*)?(?:\\n|$))");E&&(bn=!1,!(!(N=kn.exec(E))||this.rules.block.hr.test(E)));){if(V=N[0],E=E.substring(V.length),Ue=N[2].split(`
`,1)[0],St=E.split(`
`,1)[0],this.options.pedantic?(se=2,Ie=Ue.trimLeft()):(se=N[2].search(/[^ ]/),se=se>4?1:se,Ie=Ue.slice(se),se+=N[1].length),ke=!1,!Ue&&/^ *$/.test(St)&&(V+=St+`
`,E=E.substring(St.length+1),bn=!0),!bn)for(var de=new RegExp("^ {0,"+Math.min(3,se-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),_e=new RegExp("^ {0,"+Math.min(3,se-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)");E&&(gt=E.split(`
`,1)[0],Ue=gt,this.options.pedantic&&(Ue=Ue.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(de.test(Ue)||_e.test(E)));){if(Ue.search(/[^ ]/)>=se||!Ue.trim())Ie+=`
`+Ue.slice(se);else if(!ke)Ie+=`
`+Ue;else break;!ke&&!Ue.trim()&&(ke=!0),V+=gt+`
`,E=E.substring(gt.length+1)}Rt.loose||($e?Rt.loose=!0:/\n *\n *$/.test(V)&&($e=!0)),this.options.gfm&&(P=/^\[[ xX]\] /.exec(Ie),P&&(X=P[0]!=="[ ] ",Ie=Ie.replace(/^\[[ xX]\] +/,""))),Rt.items.push({type:"list_item",raw:V,task:!!P,checked:X,loose:!1,text:Ie}),Rt.raw+=V}Rt.items[Rt.items.length-1].raw=V.trimRight(),Rt.items[Rt.items.length-1].text=Ie.trimRight(),Rt.raw=Rt.raw.trimRight();var Pe=Rt.items.length;for(Ee=0;Ee<Pe;Ee++){this.lexer.state.top=!1,Rt.items[Ee].tokens=this.lexer.blockTokens(Rt.items[Ee].text,[]);var nn=Rt.items[Ee].tokens.filter(function(yt){return yt.type==="space"}),Ln=nn.every(function(yt){for(var vt=yt.raw.split(""),ot=0,ei=o(vt),Hi;!(Hi=ei()).done;){var Nr=Hi.value;if(Nr===`
`&&(ot+=1),ot>1)return!0}return!1});!Rt.loose&&nn.length&&Ln&&(Rt.loose=!0,Rt.items[Ee].loose=!0)}return Rt}},$.html=function(E){var N=this.rules.block.html.exec(E);if(N){var V={type:"html",raw:N[0],pre:!this.options.sanitizer&&(N[1]==="pre"||N[1]==="script"||N[1]==="style"),text:N[0]};return this.options.sanitize&&(V.type="paragraph",V.text=this.options.sanitizer?this.options.sanitizer(N[0]):_(N[0]),V.tokens=[],this.lexer.inline(V.text,V.tokens)),V}},$.def=function(E){var N=this.rules.block.def.exec(E);if(N){N[3]&&(N[3]=N[3].substring(1,N[3].length-1));var V=N[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:V,raw:N[0],href:N[2],title:N[3]}}},$.table=function(E){var N=this.rules.block.table.exec(E);if(N){var V={type:"table",header:ae(N[1]).map(function($e){return{text:$e}}),align:N[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:N[3]&&N[3].trim()?N[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(V.header.length===V.align.length){V.raw=N[0];var P=V.align.length,X,se,Ee,ke;for(X=0;X<P;X++)/^ *-+: *$/.test(V.align[X])?V.align[X]="right":/^ *:-+: *$/.test(V.align[X])?V.align[X]="center":/^ *:-+ *$/.test(V.align[X])?V.align[X]="left":V.align[X]=null;for(P=V.rows.length,X=0;X<P;X++)V.rows[X]=ae(V.rows[X],V.header.length).map(function($e){return{text:$e}});for(P=V.header.length,se=0;se<P;se++)V.header[se].tokens=[],this.lexer.inline(V.header[se].text,V.header[se].tokens);for(P=V.rows.length,se=0;se<P;se++)for(ke=V.rows[se],Ee=0;Ee<ke.length;Ee++)ke[Ee].tokens=[],this.lexer.inline(ke[Ee].text,ke[Ee].tokens);return V}}},$.lheading=function(E){var N=this.rules.block.lheading.exec(E);if(N){var V={type:"heading",raw:N[0],depth:N[2].charAt(0)==="="?1:2,text:N[1],tokens:[]};return this.lexer.inline(V.text,V.tokens),V}},$.paragraph=function(E){var N=this.rules.block.paragraph.exec(E);if(N){var V={type:"paragraph",raw:N[0],text:N[1].charAt(N[1].length-1)===`
`?N[1].slice(0,-1):N[1],tokens:[]};return this.lexer.inline(V.text,V.tokens),V}},$.text=function(E){var N=this.rules.block.text.exec(E);if(N){var V={type:"text",raw:N[0],text:N[0],tokens:[]};return this.lexer.inline(V.text,V.tokens),V}},$.escape=function(E){var N=this.rules.inline.escape.exec(E);if(N)return{type:"escape",raw:N[0],text:_(N[1])}},$.tag=function(E){var N=this.rules.inline.tag.exec(E);if(N)return!this.lexer.state.inLink&&/^<a /i.test(N[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(N[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(N[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(N[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:N[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(N[0]):_(N[0]):N[0]}},$.link=function(E){var N=this.rules.inline.link.exec(E);if(N){var V=N[2].trim();if(!this.options.pedantic&&/^</.test(V)){if(!/>$/.test(V))return;var P=fe(V.slice(0,-1),"\\");if((V.length-P.length)%2===0)return}else{var X=we(N[2],"()");if(X>-1){var se=N[0].indexOf("!")===0?5:4,Ee=se+N[1].length+X;N[2]=N[2].substring(0,X),N[0]=N[0].substring(0,Ee).trim(),N[3]=""}}var ke=N[2],$e="";if(this.options.pedantic){var Ue=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ke);Ue&&(ke=Ue[1],$e=Ue[3])}else $e=N[3]?N[3].slice(1,-1):"";return ke=ke.trim(),/^</.test(ke)&&(this.options.pedantic&&!/>$/.test(V)?ke=ke.slice(1):ke=ke.slice(1,-1)),Oe(N,{href:ke&&ke.replace(this.rules.inline._escapes,"$1"),title:$e&&$e.replace(this.rules.inline._escapes,"$1")},N[0],this.lexer)}},$.reflink=function(E,N){var V;if((V=this.rules.inline.reflink.exec(E))||(V=this.rules.inline.nolink.exec(E))){var P=(V[2]||V[1]).replace(/\s+/g," ");if(P=N[P.toLowerCase()],!P||!P.href){var X=V[0].charAt(0);return{type:"text",raw:X,text:X}}return Oe(V,P,V[0],this.lexer)}},$.emStrong=function(E,N,V){V===void 0&&(V="");var P=this.rules.inline.emStrong.lDelim.exec(E);if(P&&!(P[3]&&V.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var X=P[1]||P[2]||"";if(!X||X&&(V===""||this.rules.inline.punctuation.exec(V))){var se=P[0].length-1,Ee,ke,$e=se,Ue=0,St=P[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(St.lastIndex=0,N=N.slice(-1*E.length+se);(P=St.exec(N))!=null;)if(Ee=P[1]||P[2]||P[3]||P[4]||P[5]||P[6],!!Ee){if(ke=Ee.length,P[3]||P[4]){$e+=ke;continue}else if((P[5]||P[6])&&se%3&&!((se+ke)%3)){Ue+=ke;continue}if($e-=ke,!($e>0)){if(ke=Math.min(ke,ke+$e+Ue),Math.min(se,ke)%2){var gt=E.slice(1,se+P.index+ke);return{type:"em",raw:E.slice(0,se+P.index+ke+1),text:gt,tokens:this.lexer.inlineTokens(gt,[])}}var Ie=E.slice(2,se+P.index+ke-1);return{type:"strong",raw:E.slice(0,se+P.index+ke+1),text:Ie,tokens:this.lexer.inlineTokens(Ie,[])}}}}}},$.codespan=function(E){var N=this.rules.inline.code.exec(E);if(N){var V=N[2].replace(/\n/g," "),P=/[^ ]/.test(V),X=/^ /.test(V)&&/ $/.test(V);return P&&X&&(V=V.substring(1,V.length-1)),V=_(V,!0),{type:"codespan",raw:N[0],text:V}}},$.br=function(E){var N=this.rules.inline.br.exec(E);if(N)return{type:"br",raw:N[0]}},$.del=function(E){var N=this.rules.inline.del.exec(E);if(N)return{type:"del",raw:N[0],text:N[2],tokens:this.lexer.inlineTokens(N[2],[])}},$.autolink=function(E,N){var V=this.rules.inline.autolink.exec(E);if(V){var P,X;return V[2]==="@"?(P=_(this.options.mangle?N(V[1]):V[1]),X="mailto:"+P):(P=_(V[1]),X=P),{type:"link",raw:V[0],text:P,href:X,tokens:[{type:"text",raw:P,text:P}]}}},$.url=function(E,N){var V;if(V=this.rules.inline.url.exec(E)){var P,X;if(V[2]==="@")P=_(this.options.mangle?N(V[0]):V[0]),X="mailto:"+P;else{var se;do se=V[0],V[0]=this.rules.inline._backpedal.exec(V[0])[0];while(se!==V[0]);P=_(V[0]),V[1]==="www."?X="http://"+P:X=P}return{type:"link",raw:V[0],text:P,href:X,tokens:[{type:"text",raw:P,text:P}]}}},$.inlineText=function(E,N){var V=this.rules.inline.text.exec(E);if(V){var P;return this.lexer.state.inRawBlock?P=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):_(V[0]):V[0]:P=_(this.options.smartypants?N(V[0]):V[0]),{type:"text",raw:V[0],text:P}}},Y}(),ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:U,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ce._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ce.def=y(ce.def).replace("label",ce._label).replace("title",ce._title).getRegex(),ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,ce.listItemStart=y(/^( *)(bull) */).replace("bull",ce.bullet).getRegex(),ce.list=y(ce.list).replace(/bull/g,ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ce.def.source+")").getRegex(),ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ce.html=y(ce.html,"i").replace("comment",ce._comment).replace("tag",ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ce.paragraph=y(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.blockquote=y(ce.blockquote).replace("paragraph",ce.paragraph).getRegex(),ce.normal=K({},ce),ce.gfm=K({},ce.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ce.gfm.table=y(ce.gfm.table).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.gfm.paragraph=y(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ce.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.pedantic=K({},ce.normal,{html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:U,paragraph:y(ce.normal._paragraph).replace("hr",ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var oe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:U,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:U,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};oe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",oe.punctuation=y(oe.punctuation).replace(/punctuation/g,oe._punctuation).getRegex(),oe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,oe.escapedEmSt=/\\\*|\\_/g,oe._comment=y(ce._comment).replace("(?:-->|$)","-->").getRegex(),oe.emStrong.lDelim=y(oe.emStrong.lDelim).replace(/punct/g,oe._punctuation).getRegex(),oe.emStrong.rDelimAst=y(oe.emStrong.rDelimAst,"g").replace(/punct/g,oe._punctuation).getRegex(),oe.emStrong.rDelimUnd=y(oe.emStrong.rDelimUnd,"g").replace(/punct/g,oe._punctuation).getRegex(),oe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,oe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,oe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,oe.autolink=y(oe.autolink).replace("scheme",oe._scheme).replace("email",oe._email).getRegex(),oe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,oe.tag=y(oe.tag).replace("comment",oe._comment).replace("attribute",oe._attribute).getRegex(),oe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,oe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,oe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,oe.link=y(oe.link).replace("label",oe._label).replace("href",oe._href).replace("title",oe._title).getRegex(),oe.reflink=y(oe.reflink).replace("label",oe._label).replace("ref",ce._label).getRegex(),oe.nolink=y(oe.nolink).replace("ref",ce._label).getRegex(),oe.reflinkSearch=y(oe.reflinkSearch,"g").replace("reflink",oe.reflink).replace("nolink",oe.nolink).getRegex(),oe.normal=K({},oe),oe.pedantic=K({},oe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",oe._label).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",oe._label).getRegex()}),oe.gfm=K({},oe.normal,{escape:y(oe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),oe.gfm.url=y(oe.gfm.url,"i").replace("email",oe.gfm._extended_email).getRegex(),oe.breaks=K({},oe.gfm,{br:y(oe.br).replace("{2,}","*").getRegex(),text:y(oe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function re(Y){return Y.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function pe(Y){var $="",z,E,N=Y.length;for(z=0;z<N;z++)E=Y.charCodeAt(z),Math.random()>.5&&(E="x"+E.toString(16)),$+="&#"+E+";";return $}var it=function(){function Y(z){this.tokens=[],this.tokens.links=Object.create(null),this.options=z||e.defaults,this.options.tokenizer=this.options.tokenizer||new Te,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var E={block:ce.normal,inline:oe.normal};this.options.pedantic?(E.block=ce.pedantic,E.inline=oe.pedantic):this.options.gfm&&(E.block=ce.gfm,this.options.breaks?E.inline=oe.breaks:E.inline=oe.gfm),this.tokenizer.rules=E}Y.lex=function(E,N){var V=new Y(N);return V.lex(E)},Y.lexInline=function(E,N){var V=new Y(N);return V.inlineTokens(E)};var $=Y.prototype;return $.lex=function(E){E=E.replace(/\r\n|\r/g,`
`),this.blockTokens(E,this.tokens);for(var N;N=this.inlineQueue.shift();)this.inlineTokens(N.src,N.tokens);return this.tokens},$.blockTokens=function(E,N){var V=this;N===void 0&&(N=[]),this.options.pedantic?E=E.replace(/\t/g,"    ").replace(/^ +$/gm,""):E=E.replace(/^( *)(\t+)/gm,function($e,Ue,St){return Ue+"    ".repeat(St.length)});for(var P,X,se,Ee;E;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function($e){return(P=$e.call({lexer:V},E,N))?(E=E.substring(P.raw.length),N.push(P),!0):!1}))){if(P=this.tokenizer.space(E)){E=E.substring(P.raw.length),P.raw.length===1&&N.length>0?N[N.length-1].raw+=`
`:N.push(P);continue}if(P=this.tokenizer.code(E)){E=E.substring(P.raw.length),X=N[N.length-1],X&&(X.type==="paragraph"||X.type==="text")?(X.raw+=`
`+P.raw,X.text+=`
`+P.text,this.inlineQueue[this.inlineQueue.length-1].src=X.text):N.push(P);continue}if(P=this.tokenizer.fences(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.heading(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.hr(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.blockquote(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.list(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.html(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.def(E)){E=E.substring(P.raw.length),X=N[N.length-1],X&&(X.type==="paragraph"||X.type==="text")?(X.raw+=`
`+P.raw,X.text+=`
`+P.raw,this.inlineQueue[this.inlineQueue.length-1].src=X.text):this.tokens.links[P.tag]||(this.tokens.links[P.tag]={href:P.href,title:P.title});continue}if(P=this.tokenizer.table(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.lheading(E)){E=E.substring(P.raw.length),N.push(P);continue}if(se=E,this.options.extensions&&this.options.extensions.startBlock&&function(){var $e=1/0,Ue=E.slice(1),St=void 0;V.options.extensions.startBlock.forEach(function(gt){St=gt.call({lexer:this},Ue),typeof St=="number"&&St>=0&&($e=Math.min($e,St))}),$e<1/0&&$e>=0&&(se=E.substring(0,$e+1))}(),this.state.top&&(P=this.tokenizer.paragraph(se))){X=N[N.length-1],Ee&&X.type==="paragraph"?(X.raw+=`
`+P.raw,X.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=X.text):N.push(P),Ee=se.length!==E.length,E=E.substring(P.raw.length);continue}if(P=this.tokenizer.text(E)){E=E.substring(P.raw.length),X=N[N.length-1],X&&X.type==="text"?(X.raw+=`
`+P.raw,X.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=X.text):N.push(P);continue}if(E){var ke="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(ke);break}else throw new Error(ke)}}return this.state.top=!0,N},$.inline=function(E,N){this.inlineQueue.push({src:E,tokens:N})},$.inlineTokens=function(E,N){var V=this;N===void 0&&(N=[]);var P,X,se,Ee=E,ke,$e,Ue;if(this.tokens.links){var St=Object.keys(this.tokens.links);if(St.length>0)for(;(ke=this.tokenizer.rules.inline.reflinkSearch.exec(Ee))!=null;)St.includes(ke[0].slice(ke[0].lastIndexOf("[")+1,-1))&&(Ee=Ee.slice(0,ke.index)+"["+De("a",ke[0].length-2)+"]"+Ee.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ke=this.tokenizer.rules.inline.blockSkip.exec(Ee))!=null;)Ee=Ee.slice(0,ke.index)+"["+De("a",ke[0].length-2)+"]"+Ee.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ke=this.tokenizer.rules.inline.escapedEmSt.exec(Ee))!=null;)Ee=Ee.slice(0,ke.index)+"++"+Ee.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;E;)if($e||(Ue=""),$e=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ie){return(P=Ie.call({lexer:V},E,N))?(E=E.substring(P.raw.length),N.push(P),!0):!1}))){if(P=this.tokenizer.escape(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.tag(E)){E=E.substring(P.raw.length),X=N[N.length-1],X&&P.type==="text"&&X.type==="text"?(X.raw+=P.raw,X.text+=P.text):N.push(P);continue}if(P=this.tokenizer.link(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.reflink(E,this.tokens.links)){E=E.substring(P.raw.length),X=N[N.length-1],X&&P.type==="text"&&X.type==="text"?(X.raw+=P.raw,X.text+=P.text):N.push(P);continue}if(P=this.tokenizer.emStrong(E,Ee,Ue)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.codespan(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.br(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.del(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.autolink(E,pe)){E=E.substring(P.raw.length),N.push(P);continue}if(!this.state.inLink&&(P=this.tokenizer.url(E,pe))){E=E.substring(P.raw.length),N.push(P);continue}if(se=E,this.options.extensions&&this.options.extensions.startInline&&function(){var Ie=1/0,bn=E.slice(1),qt=void 0;V.options.extensions.startInline.forEach(function(_s){qt=_s.call({lexer:this},bn),typeof qt=="number"&&qt>=0&&(Ie=Math.min(Ie,qt))}),Ie<1/0&&Ie>=0&&(se=E.substring(0,Ie+1))}(),P=this.tokenizer.inlineText(se,re)){E=E.substring(P.raw.length),P.raw.slice(-1)!=="_"&&(Ue=P.raw.slice(-1)),$e=!0,X=N[N.length-1],X&&X.type==="text"?(X.raw+=P.raw,X.text+=P.text):N.push(P);continue}if(E){var gt="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(gt);break}else throw new Error(gt)}}return N},n(Y,null,[{key:"rules",get:function(){return{block:ce,inline:oe}}}]),Y}(),Mt=function(){function Y(z){this.options=z||e.defaults}var $=Y.prototype;return $.code=function(E,N,V){var P=(N||"").match(/\S*/)[0];if(this.options.highlight){var X=this.options.highlight(E,P);X!=null&&X!==E&&(V=!0,E=X)}return E=E.replace(/\n$/,"")+`
`,P?'<pre><code class="'+this.options.langPrefix+_(P,!0)+'">'+(V?E:_(E,!0))+`</code></pre>
`:"<pre><code>"+(V?E:_(E,!0))+`</code></pre>
`},$.blockquote=function(E){return`<blockquote>
`+E+`</blockquote>
`},$.html=function(E){return E},$.heading=function(E,N,V,P){if(this.options.headerIds){var X=this.options.headerPrefix+P.slug(V);return"<h"+N+' id="'+X+'">'+E+"</h"+N+`>
`}return"<h"+N+">"+E+"</h"+N+`>
`},$.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},$.list=function(E,N,V){var P=N?"ol":"ul",X=N&&V!==1?' start="'+V+'"':"";return"<"+P+X+`>
`+E+"</"+P+`>
`},$.listitem=function(E){return"<li>"+E+`</li>
`},$.checkbox=function(E){return"<input "+(E?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},$.paragraph=function(E){return"<p>"+E+`</p>
`},$.table=function(E,N){return N&&(N="<tbody>"+N+"</tbody>"),`<table>
<thead>
`+E+`</thead>
`+N+`</table>
`},$.tablerow=function(E){return`<tr>
`+E+`</tr>
`},$.tablecell=function(E,N){var V=N.header?"th":"td",P=N.align?"<"+V+' align="'+N.align+'">':"<"+V+">";return P+E+("</"+V+`>
`)},$.strong=function(E){return"<strong>"+E+"</strong>"},$.em=function(E){return"<em>"+E+"</em>"},$.codespan=function(E){return"<code>"+E+"</code>"},$.br=function(){return this.options.xhtml?"<br/>":"<br>"},$.del=function(E){return"<del>"+E+"</del>"},$.link=function(E,N,V){if(E=T(this.options.sanitize,this.options.baseUrl,E),E===null)return V;var P='<a href="'+_(E)+'"';return N&&(P+=' title="'+N+'"'),P+=">"+V+"</a>",P},$.image=function(E,N,V){if(E=T(this.options.sanitize,this.options.baseUrl,E),E===null)return V;var P='<img src="'+E+'" alt="'+V+'"';return N&&(P+=' title="'+N+'"'),P+=this.options.xhtml?"/>":">",P},$.text=function(E){return E},Y}(),cn=function(){function Y(){}var $=Y.prototype;return $.strong=function(E){return E},$.em=function(E){return E},$.codespan=function(E){return E},$.del=function(E){return E},$.html=function(E){return E},$.text=function(E){return E},$.link=function(E,N,V){return""+V},$.image=function(E,N,V){return""+V},$.br=function(){return""},Y}(),gi=function(){function Y(){this.seen={}}var $=Y.prototype;return $.serialize=function(E){return E.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},$.getNextSafeSlug=function(E,N){var V=E,P=0;if(this.seen.hasOwnProperty(V)){P=this.seen[E];do P++,V=E+"-"+P;while(this.seen.hasOwnProperty(V))}return N||(this.seen[E]=P,this.seen[V]=0),V},$.slug=function(E,N){N===void 0&&(N={});var V=this.serialize(E);return this.getNextSafeSlug(V,N.dryrun)},Y}(),Ii=function(){function Y(z){this.options=z||e.defaults,this.options.renderer=this.options.renderer||new Mt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new cn,this.slugger=new gi}Y.parse=function(E,N){var V=new Y(N);return V.parse(E)},Y.parseInline=function(E,N){var V=new Y(N);return V.parseInline(E)};var $=Y.prototype;return $.parse=function(E,N){N===void 0&&(N=!0);var V="",P,X,se,Ee,ke,$e,Ue,St,gt,Ie,bn,qt,_s,Rt,kn,de,_e,Pe,nn,Ln=E.length;for(P=0;P<Ln;P++){if(Ie=E[P],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ie.type]&&(nn=this.options.extensions.renderers[Ie.type].call({parser:this},Ie),nn!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ie.type))){V+=nn||"";continue}switch(Ie.type){case"space":continue;case"hr":{V+=this.renderer.hr();continue}case"heading":{V+=this.renderer.heading(this.parseInline(Ie.tokens),Ie.depth,v(this.parseInline(Ie.tokens,this.textRenderer)),this.slugger);continue}case"code":{V+=this.renderer.code(Ie.text,Ie.lang,Ie.escaped);continue}case"table":{for(St="",Ue="",Ee=Ie.header.length,X=0;X<Ee;X++)Ue+=this.renderer.tablecell(this.parseInline(Ie.header[X].tokens),{header:!0,align:Ie.align[X]});for(St+=this.renderer.tablerow(Ue),gt="",Ee=Ie.rows.length,X=0;X<Ee;X++){for($e=Ie.rows[X],Ue="",ke=$e.length,se=0;se<ke;se++)Ue+=this.renderer.tablecell(this.parseInline($e[se].tokens),{header:!1,align:Ie.align[se]});gt+=this.renderer.tablerow(Ue)}V+=this.renderer.table(St,gt);continue}case"blockquote":{gt=this.parse(Ie.tokens),V+=this.renderer.blockquote(gt);continue}case"list":{for(bn=Ie.ordered,qt=Ie.start,_s=Ie.loose,Ee=Ie.items.length,gt="",X=0;X<Ee;X++)kn=Ie.items[X],de=kn.checked,_e=kn.task,Rt="",kn.task&&(Pe=this.renderer.checkbox(de),_s?kn.tokens.length>0&&kn.tokens[0].type==="paragraph"?(kn.tokens[0].text=Pe+" "+kn.tokens[0].text,kn.tokens[0].tokens&&kn.tokens[0].tokens.length>0&&kn.tokens[0].tokens[0].type==="text"&&(kn.tokens[0].tokens[0].text=Pe+" "+kn.tokens[0].tokens[0].text)):kn.tokens.unshift({type:"text",text:Pe}):Rt+=Pe),Rt+=this.parse(kn.tokens,_s),gt+=this.renderer.listitem(Rt,_e,de);V+=this.renderer.list(gt,bn,qt);continue}case"html":{V+=this.renderer.html(Ie.text);continue}case"paragraph":{V+=this.renderer.paragraph(this.parseInline(Ie.tokens));continue}case"text":{for(gt=Ie.tokens?this.parseInline(Ie.tokens):Ie.text;P+1<Ln&&E[P+1].type==="text";)Ie=E[++P],gt+=`
`+(Ie.tokens?this.parseInline(Ie.tokens):Ie.text);V+=N?this.renderer.paragraph(gt):gt;continue}default:{var yt='Token with "'+Ie.type+'" type was not found.';if(this.options.silent){console.error(yt);return}else throw new Error(yt)}}}return V},$.parseInline=function(E,N){N=N||this.renderer;var V="",P,X,se,Ee=E.length;for(P=0;P<Ee;P++){if(X=E[P],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[X.type]&&(se=this.options.extensions.renderers[X.type].call({parser:this},X),se!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(X.type))){V+=se||"";continue}switch(X.type){case"escape":{V+=N.text(X.text);break}case"html":{V+=N.html(X.text);break}case"link":{V+=N.link(X.href,X.title,this.parseInline(X.tokens,N));break}case"image":{V+=N.image(X.href,X.title,X.text);break}case"strong":{V+=N.strong(this.parseInline(X.tokens,N));break}case"em":{V+=N.em(this.parseInline(X.tokens,N));break}case"codespan":{V+=N.codespan(X.text);break}case"br":{V+=N.br();break}case"del":{V+=N.del(this.parseInline(X.tokens,N));break}case"text":{V+=N.text(X.text);break}default:{var ke='Token with "'+X.type+'" type was not found.';if(this.options.silent){console.error(ke);return}else throw new Error(ke)}}}return V},Y}();function Ne(Y,$,z){if(typeof Y>"u"||Y===null)throw new Error("marked(): input parameter is undefined or null");if(typeof Y!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Y)+", string expected");if(typeof $=="function"&&(z=$,$=null),$=K({},Ne.defaults,$||{}),xe($),z){var E=$.highlight,N;try{N=it.lex(Y,$)}catch(se){return z(se)}var V=function(Ee){var ke;if(!Ee)try{$.walkTokens&&Ne.walkTokens(N,$.walkTokens),ke=Ii.parse(N,$)}catch($e){Ee=$e}return $.highlight=E,Ee?z(Ee):z(null,ke)};if(!E||E.length<3||(delete $.highlight,!N.length))return V();var P=0;Ne.walkTokens(N,function(se){se.type==="code"&&(P++,setTimeout(function(){E(se.text,se.lang,function(Ee,ke){if(Ee)return V(Ee);ke!=null&&ke!==se.text&&(se.text=ke,se.escaped=!0),P--,P===0&&V()})},0))}),P===0&&V();return}try{var X=it.lex(Y,$);return $.walkTokens&&Ne.walkTokens(X,$.walkTokens),Ii.parse(X,$)}catch(se){if(se.message+=`
Please report this to https://github.com/markedjs/marked.`,$.silent)return"<p>An error occurred:</p><pre>"+_(se.message+"",!0)+"</pre>";throw se}}Ne.options=Ne.setOptions=function(Y){return K(Ne.defaults,Y),l(Ne.defaults),Ne},Ne.getDefaults=a,Ne.defaults=e.defaults,Ne.use=function(){for(var Y=arguments.length,$=new Array(Y),z=0;z<Y;z++)$[z]=arguments[z];var E=K.apply(void 0,[{}].concat($)),N=Ne.defaults.extensions||{renderers:{},childTokens:{}},V;$.forEach(function(P){if(P.extensions&&(V=!0,P.extensions.forEach(function(se){if(!se.name)throw new Error("extension name required");if(se.renderer){var Ee=N.renderers?N.renderers[se.name]:null;Ee?N.renderers[se.name]=function(){for(var ke=arguments.length,$e=new Array(ke),Ue=0;Ue<ke;Ue++)$e[Ue]=arguments[Ue];var St=se.renderer.apply(this,$e);return St===!1&&(St=Ee.apply(this,$e)),St}:N.renderers[se.name]=se.renderer}if(se.tokenizer){if(!se.level||se.level!=="block"&&se.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");N[se.level]?N[se.level].unshift(se.tokenizer):N[se.level]=[se.tokenizer],se.start&&(se.level==="block"?N.startBlock?N.startBlock.push(se.start):N.startBlock=[se.start]:se.level==="inline"&&(N.startInline?N.startInline.push(se.start):N.startInline=[se.start]))}se.childTokens&&(N.childTokens[se.name]=se.childTokens)})),P.renderer&&function(){var se=Ne.defaults.renderer||new Mt,Ee=function(Ue){var St=se[Ue];se[Ue]=function(){for(var gt=arguments.length,Ie=new Array(gt),bn=0;bn<gt;bn++)Ie[bn]=arguments[bn];var qt=P.renderer[Ue].apply(se,Ie);return qt===!1&&(qt=St.apply(se,Ie)),qt}};for(var ke in P.renderer)Ee(ke);E.renderer=se}(),P.tokenizer&&function(){var se=Ne.defaults.tokenizer||new Te,Ee=function(Ue){var St=se[Ue];se[Ue]=function(){for(var gt=arguments.length,Ie=new Array(gt),bn=0;bn<gt;bn++)Ie[bn]=arguments[bn];var qt=P.tokenizer[Ue].apply(se,Ie);return qt===!1&&(qt=St.apply(se,Ie)),qt}};for(var ke in P.tokenizer)Ee(ke);E.tokenizer=se}(),P.walkTokens){var X=Ne.defaults.walkTokens;E.walkTokens=function(se){P.walkTokens.call(this,se),X&&X.call(this,se)}}V&&(E.extensions=N),Ne.setOptions(E)})},Ne.walkTokens=function(Y,$){for(var z=function(){var P=N.value;switch($.call(Ne,P),P.type){case"table":{for(var X=o(P.header),se;!(se=X()).done;){var Ee=se.value;Ne.walkTokens(Ee.tokens,$)}for(var ke=o(P.rows),$e;!($e=ke()).done;)for(var Ue=$e.value,St=o(Ue),gt;!(gt=St()).done;){var Ie=gt.value;Ne.walkTokens(Ie.tokens,$)}break}case"list":{Ne.walkTokens(P.items,$);break}default:Ne.defaults.extensions&&Ne.defaults.extensions.childTokens&&Ne.defaults.extensions.childTokens[P.type]?Ne.defaults.extensions.childTokens[P.type].forEach(function(bn){Ne.walkTokens(P[bn],$)}):P.tokens&&Ne.walkTokens(P.tokens,$)}},E=o(Y),N;!(N=E()).done;)z()},Ne.parseInline=function(Y,$){if(typeof Y>"u"||Y===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Y!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Y)+", string expected");$=K({},Ne.defaults,$||{}),xe($);try{var z=it.lexInline(Y,$);return $.walkTokens&&Ne.walkTokens(z,$.walkTokens),Ii.parseInline(z,$)}catch(E){if(E.message+=`
Please report this to https://github.com/markedjs/marked.`,$.silent)return"<p>An error occurred:</p><pre>"+_(E.message+"",!0)+"</pre>";throw E}},Ne.Parser=Ii,Ne.parser=Ii.parse,Ne.Renderer=Mt,Ne.TextRenderer=cn,Ne.Lexer=it,Ne.lexer=it.lex,Ne.Tokenizer=Te,Ne.Slugger=gi,Ne.parse=Ne;var Vi=Ne.options,Ra=Ne.setOptions,Bo=Ne.use,jn=Ne.walkTokens,Oa=Ne.parseInline,ud=Ne,ms=Ii.parse,hd=it.lex;e.Lexer=it,e.Parser=Ii,e.Renderer=Mt,e.Slugger=gi,e.TextRenderer=cn,e.Tokenizer=Te,e.getDefaults=a,e.lexer=hd,e.marked=Ne,e.options=Vi,e.parse=ud,e.parseInline=Oa,e.parser=ms,e.setOptions=Ra,e.use=Bo,e.walkTokens=jn,Object.defineProperty(e,"__esModule",{value:!0})})})();var aP=UB||exports;function xae(r,e={},t={}){var n;const i=new Q;let s=!1;const o=DI(e),a=function(_){let b;try{b=qC(decodeURIComponent(_))}catch{}return b?(b=QF(b,v=>{if(r.uris&&r.uris[v])return Se.revive(r.uris[v])}),encodeURIComponent(JSON.stringify(b))):_},l=function(_,b){const v=r.uris&&r.uris[_];let C=Se.revive(v);return b?_.startsWith(He.data+":")?_:(C||(C=Se.parse(_)),r5.asBrowserUri(C).toString(!0)):!C||Se.parse(_).toString()===C.toString()?_:(C.query&&(C=C.with({query:a(C.query)})),C.toString())},c=new aP.Renderer;c.image=(_,b,v)=>{let C=[],y=[];return _&&({href:_,dimensions:C}=vQ(_),y.push(`src="${Cv(_)}"`)),v&&y.push(`alt="${Cv(v)}"`),b&&y.push(`title="${Cv(b)}"`),C.length&&(y=y.concat(C)),"<img "+y.join(" ")+">"},c.link=(_,b,v)=>typeof _!="string"?"":(_===v&&(v=$S(v)),b=typeof b=="string"?Cv($S(b)):"",_=$S(_),_=_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${_}" title="${b||_}">${v}</a>`),c.paragraph=_=>`<p>${_}</p>`;const d=[];if(e.codeBlockRenderer&&(c.code=(_,b)=>{const v=x9.nextId(),C=e.codeBlockRenderer(b??"",_);return d.push(C.then(y=>[v,y])),`<div class="code" data-code="${v}">${HE(_)}</div>`}),e.actionHandler){const _=e.actionHandler.disposables.add(new Et(o,"click")),b=e.actionHandler.disposables.add(new Et(o,"auxclick"));e.actionHandler.disposables.add(ve.any(_.event,b.event)(v=>{const C=new aa(v);if(!C.leftButton&&!C.middleButton)return;let y=C.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let w=y.dataset.href;w&&(r.baseUri&&(w=Mx(Se.from(r.baseUri),w)),e.actionHandler.callback(w,C))}catch(w){We(w)}finally{C.preventDefault()}}))}r.supportHtml||(t.sanitizer=_=>(r.isTrusted?_.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?_:"",t.sanitize=!0,t.silent=!0),t.renderer=c;let u=(n=r.value)!==null&&n!==void 0?n:"";u.length>1e5&&(u=`${u.substr(0,1e5)}…`),r.supportThemeIcons&&(u=pQ(u));let h=aP.parse(u,t);r.supportThemeIcons&&(h=Jd(h).map(b=>typeof b=="string"?b:b.outerHTML).join(""));const g=new DOMParser().parseFromString(lP(r,h),"text/html");if(g.body.querySelectorAll("img").forEach(_=>{const b=_.getAttribute("src");if(b){let v=b;try{r.baseUri&&(v=Mx(Se.from(r.baseUri),v))}catch{}_.src=l(v,!0)}}),g.body.querySelectorAll("a").forEach(_=>{const b=_.getAttribute("href");if(_.setAttribute("href",""),!b||/^data:|javascript:/i.test(b)||/^command:/i.test(b)&&!r.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(b))_.replaceWith(..._.childNodes);else{let v=l(b,!1);r.baseUri&&(v=Mx(Se.from(r.baseUri),b)),_.dataset.href=v}}),o.innerHTML=lP(r,g.body.innerHTML),d.length>0&&Promise.all(d).then(_=>{var b,v;if(s)return;const C=new Map(_),y=o.querySelectorAll("div[data-code]");for(const w of y){const L=C.get((b=w.dataset.code)!==null&&b!==void 0?b:"");L&&Oc(w,L)}(v=e.asyncRenderCallback)===null||v===void 0||v.call(e)}),e.asyncRenderCallback)for(const _ of o.getElementsByTagName("img")){const b=i.add(Z(_,"load",()=>{b.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:()=>{s=!0,i.dispose()}}}function Mx(r,e){return/^\w[\w\d+.-]*:/.test(e)?e:r.path.endsWith("/")?YR(r,e).toString():YR(S1(r),e).toString()}function lP(r,e){const{config:t,allowedSchemes:n}=kae(r);n5("uponSanitizeAttribute",(s,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(s.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const i=j$(n);try{return L$(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{i5("uponSanitizeAttribute"),i.dispose()}}function kae(r){const e=[He.http,He.https,He.mailto,He.data,He.file,He.vscodeFileResource,He.vscodeRemote,He.vscodeRemoteResource];return r.isTrusted&&e.push(He.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var Lae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Tae=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},Rx;let Fl=class jB{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new R,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new Q;return{element:i.add(xae(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n)).element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,i)=>Tae(this,void 0,void 0,function*(){var s,o,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),l||(l=br);const c=yield nX(this._languageService,i,l),d=document.createElement("span");if(d.innerHTML=(a=(o=jB._ttpTokenizer)===null||o===void 0?void 0:o.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const u=this._options.editor.getOption(46);xi(d,u)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(We),disposables:t}}}};Fl._ttpTokenizer=(Rx=window.trustedTypes)===null||Rx===void 0?void 0:Rx.createPolicy("tokenizeToString",{createHTML(r){return r}});Fl=Lae([cP(1,Qt),cP(2,Dr)],Fl);const dP=ee;class Df extends j{constructor(e,t,n=QQ){super(),this._renderDisposeables=this._register(new Q),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new NB),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Fl({editor:this._editor},t,n)),this._computer=new Dae(this._editor),this._hoverOperation=this._register(new MB(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(46)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Df.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const s=dP("div.hover-row.markdown-hover"),o=q(s,dP("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));o.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),s=this._editor.getOption(61),o=this._hover.containerDomNode.clientHeight,a=n-i-(o-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}Df.ID="editor.contrib.modesGlyphHoverWidget";class Dae{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){const e=i=>({value:i}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const s=i.options.glyphMarginHoverMessage;!s||Qf(s)||n.push(...NE(s).map(e))}return n}}var Eae=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Aae{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function Iae(r,e,t,n,i){return Eae(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(r.provideHover(t,n,i));if(s&&Mae(s))return new Aae(r,s,e)}catch(s){Jn(s)}})}function wN(r,e,t,n){const s=r.ordered(e).map((o,a)=>Iae(o,a,e,t,n));return Cn.fromPromises(s).coalesce()}function Nae(r,e,t,n){return wN(r,e,t,n).map(i=>i.hover).toPromise()}Aa("_executeHoverProvider",(r,e,t)=>{const n=r.get(be);return Nae(n.hoverProvider,e,t,qe.None)});function Mae(r){const e=typeof r.range<"u",t=typeof r.contents<"u"&&r.contents&&r.contents.length>0;return e&&t}var Rae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const uP=ee;class ra{constructor(e,t,n,i){this.owner=e,this.range=t,this.contents=n,this.ordinal=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let my=class{constructor(e,t,n,i,s){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=s,this.hoverOrdinal=2}createLoadingMessage(e){return new ra(this,e.range,[new rs().appendText(p("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),o=[];let a=1e3;const l=n.getLineLength(i),c=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});typeof d=="number"&&l>=d&&o.push(new ra(this,e.range,[{value:p("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const u of t){const h=u.range.startLineNumber===i?u.range.startColumn:1,f=u.range.endLineNumber===i?u.range.endColumn:s,g=u.options.hoverMessage;if(!g||Qf(g))continue;const _=new x(e.range.startLineNumber,h,e.range.startLineNumber,f);o.push(new ra(this,_,NE(g),a++))}return o}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Cn.EMPTY;const i=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(i))return Cn.EMPTY;const s=new B(e.range.startLineNumber,e.range.startColumn);return wN(this._languageFeaturesService.hoverProvider,i,s,n).filter(o=>!Qf(o.hover.contents)).map(o=>{const a=o.hover.range?x.lift(o.hover.range):e.range;return new ra(this,a,o.hover.contents,o.ordinal)})}renderHoverParts(e,t){return $B(e,t,this._editor,this._languageService,this._openerService)}};my=Rae([Bv(1,Qt),Bv(2,Dr),Bv(3,ft),Bv(4,be)],my);function $B(r,e,t,n,i){e.sort((o,a)=>o.ordinal-a.ordinal);const s=new Q;for(const o of e)for(const a of o.contents){if(Qf(a))continue;const l=uP("div.hover-row.markdown-hover"),c=q(l,uP("div.hover-contents")),d=s.add(new Fl({editor:t},n,i));s.add(d.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",r.onContentsChanged()}));const u=s.add(d.render(a));c.appendChild(u.element),r.fragment.appendChild(l)}return s}var zB=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_y=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class hP{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let TD=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new R,this.onDidChange=this._onDidChange.event,this._dispoables=new Q,this._markers=[],this._nextIdx=-1,Se.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),s=(a,l)=>{let c=Am(a.resource.toString(),l.resource.toString());return c===0&&(i==="position"?c=x.compareRangesUsingStarts(a,l)||Xt.compare(a.severity,l.severity):c=Xt.compare(a.severity,l.severity)||x.compareRangesUsingStarts(a,l)),c},o=()=>{this._markers=this._markerService.read({resource:Se.isUri(e)?e:void 0,severities:Xt.Error|Xt.Warning|Xt.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)};o(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new hP(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,s=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());s<0&&(s=IE(this._markers,{resource:e.uri},(o,a)=>Am(o.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let o=s;o<this._markers.length;o++){let a=x.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new x(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,i=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;const i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(x.containsPosition(this._markers[n],t))return new hP(this._markers[n],n+1,this._markers.length)}}};TD=zB([_y(1,Ia),_y(2,ft)],TD);const KB=tt("IMarkerNavigationService");let DD=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new qi}getMarkerList(e){for(const t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new TD(e,this._markerService,this._configService)}};DD=zB([_y(0,Ia),_y(1,ft)],DD);lt(KB,DD,!0);var ED;(function(r){function e(t){switch(t){case Zt.Ignore:return"severity-ignore "+m.info.classNames;case Zt.Info:return m.info.classNames;case Zt.Warning:return m.warning.classNames;case Zt.Error:return m.error.classNames;default:return""}}r.className=e})(ED||(ED={}));Vt((r,e)=>{const t=r.getColor(PK);if(t){const s=m.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.text-search-provider-messages .providerMessage ${s},
			.extensions-viewlet > .extensions ${s} {
				color: ${t};
			}
		`)}const n=r.getColor(FK);if(n){const s=m.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.extension-editor ${s},
			.text-search-provider-messages .providerMessage ${s},
			.preferences-editor ${s} {
				color: ${n};
			}
		`)}const i=r.getColor(BK);if(i){const s=m.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.text-search-provider-messages .providerMessage ${s},
			.extension-editor ${s} {
				color: ${i};
			}
		`)}});var Oae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yh=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class Pae{constructor(e,t,n,i,s){this._openerService=i,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Q,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(Hn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new a3(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){ut(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:s}=e;let o=(t?.length||0)+2;s&&(typeof s=="string"?o+=s.length:o+=s.value.length);const a=va(n);this._lines=a.length,this._longestLineLength=0;for(const h of a)this._longestLineLength=Math.max(h.length+o,this._longestLineLength);Fn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const h of a)l=document.createElement("div"),l.innerText=h,h===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const h=document.createElement("span");if(h.classList.add("details"),l.appendChild(h),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),h.appendChild(f)}if(s)if(typeof s=="string"){const f=document.createElement("span");f.innerText=`(${s})`,f.classList.add("code"),h.appendChild(f)}else{this._codeLink=ee("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(s.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=q(this._codeLink,ee("span"));f.innerText=s.value,h.appendChild(this._codeLink)}}if(Fn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Si(i)){const h=this._relatedBlock.appendChild(document.createElement("div"));h.style.paddingTop=`${Math.floor(this._editor.getOption(61)*.66)}px`,this._lines+=1;for(const f of i){const g=document.createElement("div"),_=document.createElement("a");_.classList.add("filename"),_.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,_.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(_,f);const b=document.createElement("span");b.innerText=f.message,g.appendChild(_),g.appendChild(b),this._lines+=1,h.appendChild(g)}}const c=this._editor.getOption(46),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Xt.Error:t=p("Error","Error");break;case Xt.Warning:t=p("Warning","Warning");break;case Xt.Info:t=p("Info","Info");break;case Xt.Hint:t=p("Hint","Hint");break}let n=p("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}let cg=class GB extends hy{constructor(e,t,n,i,s,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new Q,this._onDidSelectRelatedInformation=new R,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Xt.Warning,this._backgroundColor=W.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(Vae);let t=AD,n=Fae;this._severity===Xt.Warning?(t=T0,n=Bae):this._severity===Xt.Info&&(t=ID,n=Wae);const i=e.getColor(t),s=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:s,primaryHeadingColor:e.getColor(fB),secondaryHeadingColor:e.getColor(gB)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(GB.TitleMenu,this._contextKeyService);Uoe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=q(e,ee(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new Pae(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const i=x.lift(e),s=this.editor.getPosition(),o=s&&i.containsPosition(s)?s:i.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?p("problems","{0} of {1} problems",t,n):p("change","{0} of {1} problem",t,n);this.setTitle(kr(a.uri),l)}this._icon.className=`codicon ${ED.className(Xt.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};cg.TitleMenu=new M("gotoErrorTitleMenu");cg=Oae([yh(1,It),yh(2,Dr),yh(3,qu),yh(4,Ve),yh(5,Re),yh(6,Jf)],cg);const fP=Km(ca,N5),gP=Km(zs,Uf),pP=Km(ds,_C),AD=I("editorMarkerNavigationError.background",{dark:fP,light:fP,hcDark:Ge,hcLight:Ge},p("editorMarkerNavigationError","Editor marker navigation widget error color.")),Fae=I("editorMarkerNavigationError.headerBackground",{dark:Ce(AD,.1),light:Ce(AD,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),T0=I("editorMarkerNavigationWarning.background",{dark:gP,light:gP,hcDark:Ge,hcLight:Ge},p("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Bae=I("editorMarkerNavigationWarning.headerBackground",{dark:Ce(T0,.1),light:Ce(T0,.1),hcDark:"#0C141F",hcLight:Ce(T0,.2)},p("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),ID=I("editorMarkerNavigationInfo.background",{dark:pP,light:pP,hcDark:Ge,hcLight:Ge},p("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Wae=I("editorMarkerNavigationInfo.headerBackground",{dark:Ce(ID,.1),light:Ce(ID,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Vae=I("editorMarkerNavigation.background",{dark:Pn,light:Pn,hcDark:Pn,hcLight:Pn},p("editorMarkerNavigationBackground","Editor marker navigation widget background."));var Hae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},qB=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let qc=class D0{constructor(e,t,n,i,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=s,this._sessionDispoables=new Q,this._editor=e,this._widgetVisible=ZB.bindTo(this._contextKeyService)}static get(e){return e.getContribution(D0.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(cg,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,s,o;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!x.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:x.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new B(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,i;return qB(this,void 0,void 0,function*(){if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=yield this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);o&&((n=D0.get(o))===null||n===void 0||n.close(),(i=D0.get(o))===null||i===void 0||i.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}})}};qc.ID="editor.contrib.markerController";qc=Hae([Wv(1,KB),Wv(2,Re),Wv(3,bt),Wv(4,Ve)],qc);class cw extends me{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){var n;return qB(this,void 0,void 0,function*(){t.hasModel()&&((n=qc.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}}class Dc extends cw{constructor(){super(!0,!1,{id:Dc.ID,label:Dc.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:578,weight:100},menuOpts:{menuId:cg.TitleMenu,title:Dc.LABEL,icon:Nn("marker-navigation-next",m.arrowDown,p("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Dc.ID="editor.action.marker.next";Dc.LABEL=p("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class su extends cw{constructor(){super(!1,!1,{id:su.ID,label:su.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:1602,weight:100},menuOpts:{menuId:cg.TitleMenu,title:su.LABEL,icon:Nn("marker-navigation-previous",m.arrowUp,p("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}su.ID="editor.action.marker.prev";su.LABEL=p("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class Uae extends cw{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:p("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:66,weight:100},menuOpts:{menuId:M.MenubarGoMenu,title:p({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class jae extends cw{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:p("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:1090,weight:100},menuOpts:{menuId:M.MenubarGoMenu,title:p({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}ct(qc.ID,qc);ie(Dc);ie(su);ie(Uae);ie(jae);const ZB=new ge("markersNavigationVisible",!1),$ae=Un.bindToContribution(qc.get);te(new $ae({id:"closeMarkersNavigation",precondition:ZB,handler:r=>r.close(),kbOpts:{weight:100+50,kbExpr:A.focus,primary:9,secondary:[1033]}}));var zae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ox=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Rr=ee;class Kae{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const mP={type:1,filter:{include:et.QuickFix},triggerAction:Bi.QuickFixHover};let ND=class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),o=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,c=a.range.endLineNumber===i?a.range.endColumn:s,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const u=new x(e.range.startLineNumber,l,e.range.startLineNumber,c);o.push(new Kae(this,u,d))}return o}renderHoverParts(e,t){if(!t.length)return j.None;const n=new Q;t.forEach(s=>e.fragment.appendChild(this.renderMarkerHover(s,n)));const i=t.length===1?t[0]:t.sort((s,o)=>Xt.compare(s.marker.severity,o.marker.severity))[0];return this.renderMarkerStatusbar(e,i,n),n}renderMarkerHover(e,t){const n=Rr("div.hover-row"),i=q(n,Rr("div.marker.hover-contents")),{source:s,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const c=q(i,Rr("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,s||a)if(a&&typeof a!="string"){const d=Rr("span");if(s){const g=q(d,Rr("span"));g.innerText=s}const u=q(d,Rr("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(Z(u,"click",g=>{this._openerService.open(a.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));const h=q(u,Rr("span"));h.innerText=a.value;const f=q(i,d);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const d=q(i,Rr("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(Si(l))for(const{message:d,resource:u,startLineNumber:h,startColumn:f}of l){const g=q(i,Rr("div"));g.style.marginTop="8px";const _=q(g,Rr("a"));_.innerText=`${kr(u)}(${h}, ${f}): `,_.style.cursor="pointer",t.add(Z(_,"click",v=>{v.stopPropagation(),v.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:h,startColumn:f}}}).catch(We)}));const b=q(g,Rr("span"));b.innerText=d,this._editor.applyFontInfo(b)}return n}renderMarkerStatusbar(e,t,n){if((t.marker.severity===Xt.Error||t.marker.severity===Xt.Warning||t.marker.severity===Xt.Info)&&e.statusBar.addAction({label:p("view problem","View Problem"),commandId:Dc.ID,run:()=>{var i;e.hide(),(i=qc.get(this._editor))===null||i===void 0||i.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(83)){const i=e.statusBar.append(Rr("div"));this.recentMarkerCodeActionsInfo&&(XC.makeKey(this.recentMarkerCodeActionsInfo.marker)===XC.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=p("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?j.None:n.add(du(()=>i.textContent=p("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const o=this.getCodeActions(t.marker);n.add(Ke(()=>o.cancel())),o.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=p("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(Ke(()=>{l||a.dispose()})),e.statusBar.addAction({label:p("quick fixes","Quick Fix..."),commandId:Bg.Id,run:c=>{l=!0;const d=$c.get(this._editor),u=wi(c);e.hide(),d?.showCodeActions(mP,a,{x:u.left+6,y:u.top+u.height+6,width:u.width,height:u.height})}})},We)}}getCodeActions(e){return Xn(t=>dN(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new x(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),mP,Ju.None,t))}};ND=zae([Ox(1,mA),Ox(2,Dr),Ox(3,be)],ND);Vt((r,e)=>{const t=r.getColor(d1);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=r.getColor(u1);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});var Gae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Vv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Zc=class YB{constructor(e,t,n,i,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=i,this._toUnhook=new Q,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(55)&&(this._unhookEvents(),this._hookEvents())})}static get(e){return e.getContribution(YB.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(55);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(n=>this._onEditorMouseLeave(n))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;if(t.type===9&&t.detail===iu.ID){this._hoverClicked=!0;return}t.type===12&&t.detail===Df.ID||(t.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;const n=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.containsNode(n)||this._hideWidgets()}_onEditorMouseMove(e){var t,n,i,s,o;const a=e.target;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a.type===9&&a.detail===iu.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a.type===9&&a.detail===iu.ID&&(!((i=this._contentWidget)===null||i===void 0)&&i.isColorPickerVisible())||this._isHoverSticky&&a.type===12&&a.detail===Df.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(s=this._glyphWidget)===null||s===void 0||s.hide();return}if(a.type===2&&a.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new Df(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(a.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(gy,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};Zc.ID="editor.contrib.hover";Zc=Gae([Vv(1,Ve),Vv(2,Dr),Vv(3,Qt),Vv(4,Re)],Zc);class qae extends me{constructor(){super({id:"editor.action.showHover",label:p({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;const n=Zc.get(t);if(!n)return;const i=t.getPosition(),s=new x(i.lineNumber,i.column,i.lineNumber,i.column),o=t.getOption(2)===2;n.showContentHover(s,1,o)}}class Zae extends me{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:p({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=Zc.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const s=new x(i.lineNumber,i.column,i.lineNumber,i.column),o=Au.get(t);if(!o)return;o.startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(s,1,!0)})}}ct(Zc.ID,Zc);ie(qae);ie(Zae);oh.register(my);oh.register(ND);Vt((r,e)=>{const t=r.getColor(Wz);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=r.getColor(mu);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const i=r.getColor(IA);i&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`));const s=r.getColor(d1);s&&e.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const o=r.getColor(u1);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=r.getColor(AA);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=r.getColor(Vz);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=r.getColor(I5);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});class MD extends j{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=e.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==rB||!t.range)return;const n=this._editor.getContribution(Zc.ID);if(n&&!n.isColorPickerVisible()){const i=new x(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);n.showContentHover(i,1,!1)}}}MD.ID="editor.contrib.colorContribution";ct(MD.ID,MD);oh.register(cD);var XB=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function SN(r){return{asString:()=>XB(this,void 0,void 0,function*(){return r}),asFile:()=>{},value:typeof r=="string"?r:void 0}}function Yae(r,e,t){return{asString:()=>XB(this,void 0,void 0,function*(){return""}),asFile:()=>({name:r,uri:e,data:t}),value:void 0}}class QB{constructor(){this._entries=new Map}get size(){return this._entries.size}has(e){return this._entries.has(this.toKey(e))}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*entries(){for(const[e,t]of this._entries.entries())for(const n of t)yield[e,n]}values(){return Array.from(this._entries.values()).flat()}forEach(e){for(const[t,n]of this.entries())e(n,t)}toKey(e){return e.toLowerCase()}}const JB=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let r;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?r=crypto.getRandomValues.bind(crypto):r=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){r(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,s="";return s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s}}(),by={EDITORS:"CodeEditors",FILES:"CodeFiles"};function Xae(r){var e;const t=[];if(r.dataTransfer&&r.dataTransfer.types.length>0){const n=r.dataTransfer.getData(by.EDITORS);if(n)try{t.push(...qC(n))}catch{}else try{const o=r.dataTransfer.getData(ub.RESOURCES);t.push(...Qae(o))}catch{}if(!((e=r.dataTransfer)===null||e===void 0)&&e.files)for(let o=0;o<r.dataTransfer.files.length;o++){const a=r.dataTransfer.files[o];if(a&&a.path)try{t.push({resource:Se.file(a.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}const i=r.dataTransfer.getData(by.FILES);if(i)try{const o=JSON.parse(i);for(const a of o)t.push({resource:Se.file(a),isExternal:!0,allowWorkspaceOpen:!0})}catch{}const s=Jt.as(e8.DragAndDropContribution).getAll();for(const o of s){const a=r.dataTransfer.getData(o.dataFormatKey);if(a)try{t.push(...o.getEditorInputs(a))}catch{}}}return t}function Qae(r){const e=[];if(r){const t=JSON.parse(r);for(const n of t)if(n.indexOf(":")>0){const{selection:i,uri:s}=u9(Se.parse(n));e.push({resource:s,options:{selection:i}})}}return e}class Jae{constructor(){this._contributions=new Map}getAll(){return this._contributions.values()}}const e8={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Jt.add(e8.DragAndDropContribution,new Jae);var ele=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function RD(r){const e=new QB;for(const t of r.items){const n=t.type;if(t.kind==="string"){const i=new Promise(s=>t.getAsString(s));e.append(n,SN(i))}else if(t.kind==="file"){const i=t.getAsFile();i&&e.append(n,tle(i))}}return e}function tle(r){const e=r.path?Se.parse(r.path):void 0;return Yae(r.name,e,()=>ele(this,void 0,void 0,function*(){return new Uint8Array(yield r.arrayBuffer())}))}const nle=Object.freeze([by.EDITORS,by.FILES,ub.RESOURCES]);function ile(r,e,t=!1){var n;if(e.dataTransfer&&(t||!r.has(ls.uriList))){const i=Xae(e).filter(s=>s.resource).map(s=>s.resource.toString());for(const s of(n=e.dataTransfer)===null||n===void 0?void 0:n.items){const o=s.getAsFile();o&&i.push(o.path?Se.file(o.path).toString():o.name)}i.length&&r.replace(ls.uriList,SN(xN.create(i)))}for(const i of nle)r.delete(i)}const xN=Object.freeze({create:r=>El(r.map(e=>e.toString())).join(`\r
`),parse:r=>r.split(`\r
`).filter(e=>!e.startsWith("#"))});function _P(r,e=hi){return hY(r,e)?r.charAt(0).toUpperCase()+r.slice(1):r}var sle=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rle=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class bP{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const n=t.resolve(e);if(n!==void 0)return n}}}class vP{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,i=s.multiline)}if(n&&i&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),o=Dt(s,0,this._selection.startColumn-1);let a=o;e.snippet.walk(c=>c===e?!1:(c instanceof os&&(a=Dt(va(c.value).pop())),!0));const l=lu(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,d,u)=>`${d}${a.substr(l)}${u}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class CP{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Kd(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Kd(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return c4(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(S1(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class yP{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!p4(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}let vy=class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}};vy=sle([rle(2,_n)],vy);class bo{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return bo.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return bo.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return bo.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return bo.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}bo.dayNames=[p("Sunday","Sunday"),p("Monday","Monday"),p("Tuesday","Tuesday"),p("Wednesday","Wednesday"),p("Thursday","Thursday"),p("Friday","Friday"),p("Saturday","Saturday")];bo.dayNamesShort=[p("SundayShort","Sun"),p("MondayShort","Mon"),p("TuesdayShort","Tue"),p("WednesdayShort","Wed"),p("ThursdayShort","Thu"),p("FridayShort","Fri"),p("SaturdayShort","Sat")];bo.monthNames=[p("January","January"),p("February","February"),p("March","March"),p("April","April"),p("May","May"),p("June","June"),p("July","July"),p("August","August"),p("September","September"),p("October","October"),p("November","November"),p("December","December")];bo.monthNamesShort=[p("JanuaryShort","Jan"),p("FebruaryShort","Feb"),p("MarchShort","Mar"),p("AprilShort","Apr"),p("MayShort","May"),p("JuneShort","Jun"),p("JulyShort","Jul"),p("AugustShort","Aug"),p("SeptemberShort","Sep"),p("OctoberShort","Oct"),p("NovemberShort","Nov"),p("DecemberShort","Dec")];class wP{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=fJ(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if($2(e))return Kd(e.uri.path);let t=Kd(e.configPath.path);return t.endsWith(sT)&&(t=t.substr(0,t.length-sT.length-1)),t}_resoveWorkspacePath(e){if($2(e))return _P(e.uri.fsPath);const t=Kd(e.configPath.path);let n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?_P(n):"/"}}class SP{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return JB()}}var ole=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ale=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class sr{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=aM(t.placeholders,Vr.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),s=this._snippet.fullLen(n),o=x.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+s)),a=n.isFinalTabstop?sr._decor.inactiveFinal:sr._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const i=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const o=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);i.push(Gt.replace(a,c.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const s=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);o.push(new ue(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?sr._decor.activeFinal:sr._decor.active),s.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(d);i.changeDecorationOptions(u,d.isFinalTabstop?sr._decor.activeFinal:sr._decor.active),s.add(d)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?sr._decor.inactiveFinal:sr._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Vr){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){return this._snippet.placeholders.length===0||this._snippet.placeholders.length===1&&this._snippet.placeholders[0].isFinalTabstop}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const s=this._placeholderDecorations.get(i),o=this._editor.getModel().getDecorationRange(s);if(!o){e.delete(i.index);break}n.push(o)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;const t=this._placeholderDecorations.get(e);if(!t)return;const n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof Vg,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const o=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(o+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,s._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of s._snippet.placeholders){const c=s._snippet.offset(l),d=s._snippet.fullLen(l),u=x.fromPositions(t.getPositionAt(s._offset+c),t.getPositionAt(s._offset+c+d)),h=n.addDecoration(u,sr._decor.inactive);this._placeholderDecorations.set(l,h)}}this._placeholderGroups=aM(this._snippet.placeholders,Vr.compareByIndex)})}}sr._decor={active:Be.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Be.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Be.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Be.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const xP={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Cy=class Ga{constructor(e,t,n=xP,i){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=i,this._templateMerges=[],this._snippets=[]}static adjustWhitespace(e,t,n,i,s){const o=e.getLineContent(t.lineNumber),a=Dt(o,0,t.column-1);let l;return n.walk(c=>{if(!(c instanceof os)||c.parent instanceof Vg)return!0;const d=c.value.split(/\r\n|\r|\n/);if(i){const h=n.offset(c);if(h===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??n.toString();const f=l.charCodeAt(h-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const u=d.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new os(u)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:s,positionColumn:o}=t,a=o-n,l=o+i,c=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=ue.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,i,s,o,a,l,c){const d=[],u=[];if(!e.hasModel())return{edits:d,snippets:u};const h=e.getModel(),f=e.invokeWithinContext(w=>w.get(c_)),g=e.invokeWithinContext(w=>new CP(w.get(Jf),h)),_=()=>a,b=h.getValueInRange(Ga.adjustSelection(h,e.getSelection(),n,0)),v=h.getValueInRange(Ga.adjustSelection(h,e.getSelection(),0,i)),C=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),y=e.getSelections().map((w,L)=>({selection:w,idx:L})).sort((w,L)=>x.compareRangesUsingStarts(w.selection,L.selection));for(const{selection:w,idx:L}of y){let T=Ga.adjustSelection(h,w,n,0),S=Ga.adjustSelection(h,w,0,i);b!==h.getValueInRange(T)&&(T=w),v!==h.getValueInRange(S)&&(S=w);const k=w.setStartPosition(T.startLineNumber,T.startColumn).setEndPosition(S.endLineNumber,S.endColumn),D=new Gc().parse(t,!0,s),O=k.getStartPosition(),F=Ga.adjustWhitespace(h,O,D,o||L>0&&C!==h.getLineFirstNonWhitespaceColumn(w.positionLineNumber),!0);D.resolveVariables(new bP([g,new yP(_,L,y.length,e.getOption(73)==="spread"),new vP(h,w,L,l),new vy(h,w,c),new bo,new wP(f),new SP])),d[L]=Gt.replace(k,D.toString()),d[L].identifier={major:L,minor:0},d[L]._isTracked=!0,u[L]=new sr(e,D,F)}return{edits:d,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,n,i,s,o,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new Gc,u=new Eb,h=new bP([e.invokeWithinContext(g=>new CP(g.get(Jf),c)),new yP(()=>s,0,e.getSelections().length,e.getOption(73)==="spread"),new vP(c,e.getSelection(),0,o),new vy(c,e.getSelection(),a),new bo,new wP(e.invokeWithinContext(g=>g.get(c_))),new SP]);t=t.sort((g,_)=>x.compareRangesUsingStarts(g.range,_.range));let f=0;for(let g=0;g<t.length;g++){const{range:_,template:b}=t[g];if(g>0){const w=t[g-1].range,L=x.fromPositions(w.getEndPosition(),_.getStartPosition()),T=new os(c.getValueInRange(L));u.appendChild(T),f+=T.value.length}d.parseFragment(b,u),u.resolveVariables(h);const v=u.toString(),C=v.slice(f);f=v.length;const y=Gt.replace(_,C);y.identifier={major:g,minor:0},y._isTracked=!0,l.push(y)}return d.ensureFinalTabstop(u,n,!0),{edits:l,snippets:[new sr(e,u,"")]}}dispose(){ut(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?Ga.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Ga.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{const i=n.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(i[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(s=>ue.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=xP){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=Ga.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,s=>{const o=s.filter(l=>!!l.identifier);for(let l=0;l<i.length;l++)i[l].initialize(o[l].textChange);const a=i[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(i);console.assert(i.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):o.map(l=>ue.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[s,o]of i){o.sort(x.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,o)=>{s.push(...i.get(o))})}e.sort(x.compareRangesUsingStarts);for(const[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(x.compareRangesUsingStarts);for(let s=0;s<i.length;s++)if(!i[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}};Cy=ole([ale(3,_n)],Cy);var lle=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Uv={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Qn=class jp{constructor(e,t,n,i,s){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=s,this._snippetListener=new Q,this._modelVersionId=-1,this._inSnippet=jp.InSnippetMode.bindTo(i),this._hasNextTabstop=jp.HasNextTabstop.bindTo(i),this._hasPrevTabstop=jp.HasPrevTabstop.bindTo(i)}static get(e){return e.getContribution(jp.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}apply(e,t){try{this._doInsert(e,typeof t>"u"?Uv:Object.assign(Object.assign({},Uv),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_edits=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}insert(e,t){try{this._doInsert(e,typeof t>"u"?Uv:Object.assign(Object.assign({},Uv),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(Lt(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Cy(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((n=this._session)===null||n===void 0)&&n.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(s,o)=>{if(!this._session||s!==this._editor.getModel()||!B.equals(this._editor.getPosition(),o))return;const{activeChoice:a}=this._session;if(!a||a.choice.options.length===0)return;const l=s.getValueInRange(a.range),c=Boolean(a.choice.options.find(u=>u.value===l)),d=[];for(let u=0;u<a.choice.options.length;u++){const h=a.choice.options[u];d.push({kind:13,label:h.value,insertText:h.value,sortText:"a".repeat(u+1),range:a.range,filterText:c?`${l}_${h.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:p("next","Go to next placeholder...")}})}return{suggestions:d}}};const i=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme},this._choiceCompletionItemProvider);this._snippetListener.add(i)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletionItemProvider){this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,queueMicrotask(()=>{wae(this._editor,this._choiceCompletionItemProvider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};Qn.ID="snippetController2";Qn.InSnippetMode=new ge("inSnippetMode",!1,p("inSnippetMode","Whether the editor in current in snippet mode"));Qn.HasNextTabstop=new ge("hasNextTabstop",!1,p("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Qn.HasPrevTabstop=new ge("hasPrevTabstop",!1,p("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Qn=lle([Hv(1,Zr),Hv(2,be),Hv(3,Re),Hv(4,_n)],Qn);ct(Qn.ID,Qn);const dw=Un.bindToContribution(Qn.get);te(new dw({id:"jumpToNextSnippetPlaceholder",precondition:le.and(Qn.InSnippetMode,Qn.HasNextTabstop),handler:r=>r.next(),kbOpts:{weight:100+30,kbExpr:A.editorTextFocus,primary:2}}));te(new dw({id:"jumpToPrevSnippetPlaceholder",precondition:le.and(Qn.InSnippetMode,Qn.HasPrevTabstop),handler:r=>r.prev(),kbOpts:{weight:100+30,kbExpr:A.editorTextFocus,primary:1026}}));te(new dw({id:"leaveSnippet",precondition:Qn.InSnippetMode,handler:r=>r.cancel(!0),kbOpts:{weight:100+30,kbExpr:A.editorTextFocus,primary:9,secondary:[1033]}}));te(new dw({id:"acceptSnippet",precondition:Qn.InSnippetMode,handler:r=>r.finish()}));function t8(r,e,t){const n=Qn.get(r);return n?(r.focus(),n.apply(t.map(i=>({range:ue.liftSelection(i),template:e}))),n.isInSnippet()):!1}var cle=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},kP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Px="application/vnd.code.copyMetadata";let I_=class extends j{constructor(e,t,n,i,s){super(),this._bulkEditService=t,this._clipboardService=n,this._configurationService=i,this._languageFeaturesService=s,this._editor=e;const o=e.getContainerDomNode();this._register(Z(o,"copy",a=>this.handleCopy(a))),this._register(Z(o,"cut",a=>this.handleCopy(a))),this._register(Z(o,"paste",a=>this.handlePaste(a),!0))}arePasteActionsEnabled(e){return this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:e.uri})}handleCopy(e){var t;if(!e.clipboardData||!this._editor.hasTextFocus())return;const n=this._editor.getModel(),i=this._editor.getSelections();if(!n||!i?.length||!this.arePasteActionsEnabled(n))return;const s=[...i],o=i[0],a=o.isEmpty();if(a){if(!this._editor.getOption(33))return;s[0]=new x(o.startLineNumber,0,o.startLineNumber,n.getLineLength(o.startLineNumber))}const l=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter(h=>!!h.prepareDocumentPaste);if(!l.length){this.setCopyMetadata(e.clipboardData,{wasFromEmptySelection:a});return}const c=RD(e.clipboardData),d=JB();this.setCopyMetadata(e.clipboardData,{id:d,wasFromEmptySelection:a});const u=Xn(h=>kP(this,void 0,void 0,function*(){const f=yield Promise.all(l.map(g=>g.prepareDocumentPaste(n,s,c,h)));for(const g of f)g?.forEach((_,b)=>{c.replace(b,_)});return c}));(t=this._currentClipboardItem)===null||t===void 0||t.dataTransferPromise.cancel(),this._currentClipboardItem={handle:d,dataTransferPromise:u}}setCopyMetadata(e,t){e.setData(Px,JSON.stringify(t))}handlePaste(e){var t,n,i;return kP(this,void 0,void 0,function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;const s=this._editor.getSelections();if(!s?.length||!this._editor.hasModel())return;const o=this._editor.getModel();if(!this.arePasteActionsEnabled(o))return;let a;const l=(t=e.clipboardData)===null||t===void 0?void 0:t.getData(Px);l&&typeof l=="string"&&(a=JSON.parse(l));const c=this._languageFeaturesService.documentPasteEditProvider.ordered(o);if(!c.length)return;e.preventDefault(),e.stopImmediatePropagation();const d=o.getVersionId(),u=new ku(this._editor,3);try{const h=RD(e.clipboardData);if(a?.id&&((n=this._currentClipboardItem)===null||n===void 0?void 0:n.handle)===a.id&&(yield this._currentClipboardItem.dataTransferPromise).forEach((b,v)=>{h.replace(v,b)}),!h.has(ls.uriList)){const _=yield this._clipboardService.readResources();_.length&&h.append(ls.uriList,SN(xN.create(_)))}h.delete(Px);for(const _ of c){if(!_.pasteMimeTypes.some(v=>v.toLowerCase()===ub.FILES.toLowerCase()?[...h.values()].some(C=>C.asFile()):h.has(v)))continue;const b=yield _.provideDocumentPasteEdits(o,s,h,u.token);if(d!==o.getVersionId())return;if(b){t8(this._editor,typeof b.insertText=="string"?Gc.escape(b.insertText):b.insertText.snippet,s),b.additionalEdit&&(yield this._bulkEditService.apply(Og.convert(b.additionalEdit),{editor:this._editor}));return}}const f=(i=h.get(ls.text))!==null&&i!==void 0?i:h.get("text");if(!f)return;const g=yield f.asString();if(d!==o.getVersionId())return;this._editor.trigger("keyboard","paste",{text:g,pasteOnNewLine:a?.wasFromEmptySelection,multicursorText:null})}finally{u.dispose()}})}};I_.ID="editor.contrib.copyPasteActionController";I_=cle([jv(1,fb),jv(2,Hl),jv(3,ft),jv(4,be)],I_);ct(I_.ID,I_);Jt.as(Bl.Configuration).registerConfiguration(Object.assign(Object.assign({},bI),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:p("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}));class mc{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,s=e.length;if(n+i>s)return!1;for(let o=0;o<i;o++){const a=e.charCodeAt(n+o),l=t.charCodeAt(o);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,s,o){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,u=s.getLineContent(a),h=s.getLineContent(c);let f=u.lastIndexOf(t,l-1+t.length),g=h.indexOf(n,d-1-n.length);if(f!==-1&&g!==-1)if(a===c)u.substring(f+t.length,g).indexOf(n)>=0&&(f=-1,g=-1);else{const b=u.substring(f+t.length),v=h.substring(0,g);(b.indexOf(n)>=0||v.indexOf(n)>=0)&&(f=-1,g=-1)}let _;f!==-1&&g!==-1?(i&&f+t.length<u.length&&u.charCodeAt(f+t.length)===32&&(t=t+" "),i&&g>0&&h.charCodeAt(g-1)===32&&(n=" "+n,g-=1),_=mc._createRemoveBlockCommentOperations(new x(a,f+t.length+1,c,g+1),t,n)):(_=mc._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=_.length===1?n:null);for(const b of _)o.addTrackedEditOperation(b.range,b.text)}static _createRemoveBlockCommentOperations(e,t,n){const i=[];return x.isEmpty(e)?i.push(Gt.delete(new x(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(Gt.delete(new x(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(Gt.delete(new x(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){const s=[];return x.isEmpty(e)?s.push(Gt.replace(new x(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(Gt.insert(new B(e.startLineNumber,e.startColumn),t+(i?" ":""))),s.push(Gt.insert(new B(e.endLineNumber,e.endColumn),(i?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,i),o=this.languageConfigurationService.getLanguageConfiguration(s).comments;!o||!o.blockCommentStartToken||!o.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],s=n[1];return new ue(i.range.endLineNumber,i.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const i=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new ue(i.endLineNumber,i.endColumn+s,i.endLineNumber,i.endColumn+s)}}}class Qa{constructor(e,t,n,i,s,o,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=i,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,i){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),o=i.getLanguageConfiguration(s).comments,a=o?o.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=n-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,i,s,o,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let u=0,h=i.length;u<h;u++){const f=i[u],g=s+u;if(g===s&&a){f.ignore=!0;continue}const _=n.getLineContent(g),b=Zi(_);if(b===-1){f.ignore=o,f.commentStrOffset=_.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=b,d&&!mc._haystackHasNeedleAtOffset(_,f.commentStr,b)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const v=b+f.commentStrLength;v<_.length&&_.charCodeAt(v)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let u=0,h=i.length;u<h;u++)i[u].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:i}}static _gatherPreflightData(e,t,n,i,s,o,a,l){const c=Qa._gatherPreflightCommentStrings(n,i,s,l);return c===null?{supported:!1}:Qa._analyzeLines(e,t,n,c,i,o,a,l)}_executeLineComments(e,t,n,i){let s;n.shouldRemoveComments?s=Qa._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(Qa._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const o=new B(i.positionLineNumber,i.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),x.isEmpty(s[a].range)&&x.getStartPosition(s[a].range).equals(o)&&e.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let s=t.startLineNumber,o=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(n,a-1),c=e.getLineContent(o).indexOf(i,t.endColumn-1-n.length);return l!==-1&&c===-1&&(c=e.getLineContent(s).indexOf(i,l+n.length),o=s),l===-1&&c!==-1&&(l=e.getLineContent(o).lastIndexOf(n,c),s=o),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(s).indexOf(n),l!==-1&&(c=e.getLineContent(s).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+n.length)===32&&(n+=" "),c!==-1&&e.getLineContent(o).charCodeAt(c-1)===32&&(i=" "+i,c-=1),l!==-1&&c!==-1?mc._createRemoveBlockCommentOperations(new x(s,l+n.length+1,o,c+1),n,i):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);const i=e.getLanguageIdAtPosition(n.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const o=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,o,a);if(!l){if(n.isEmpty()){const c=e.getLineContent(n.startLineNumber);let d=Zi(c);d===-1&&(d=c.length),l=mc._createAddBlockCommentOperations(new x(n.startLineNumber,d+1,n.startLineNumber,c.length+1),o,a,this._insertSpace)}else l=mc._createAddBlockCommentOperations(new x(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),o,a,this._insertSpace);l.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(n);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new x(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=Qa._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new ue(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];o.ignore||n.push(Gt.delete(new x(t+i,o.commentStrOffset+1,t+i,o.commentStrOffset+o.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){const n=[],i=this._insertSpace?" ":"";for(let s=0,o=e.length;s<o;s++){const a=e[s];a.ignore||n.push(Gt.insert(new B(t+s,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let s=1073741824,o,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let u=0;for(let h=0,f=t[l].commentStrOffset;u<s&&h<f;h++)u=Qa.nextVisibleColumn(u,i,d.charCodeAt(h)===9,1);u<s&&(s=u)}s=Math.floor(s/i)*i;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let u=0;for(o=0,a=t[l].commentStrOffset;u<s&&o<a;o++)u=Qa.nextVisibleColumn(u,i,d.charCodeAt(o)===9,1);u>s?t[l].commentStrOffset=o-1:t[l].commentStrOffset=o}}}class kN extends me{constructor(e,t){super(t),this._type=e}run(e,t){const n=e.get(_n);if(!t.hasModel())return;const i=t.getModel(),s=[],o=i.getOptions(),a=t.getOption(19),l=t.getSelections().map((d,u)=>({selection:d,index:u,ignoreFirstLine:!1}));l.sort((d,u)=>x.compareRangesUsingStarts(d.selection,u.selection));let c=l[0];for(let d=1;d<l.length;d++){const u=l[d];c.selection.endLineNumber===u.selection.startLineNumber&&(c.index<u.index?u.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=u))}for(const d of l)s.push(new Qa(n,d.selection,o.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class dle extends kN{constructor(){super(0,{id:"editor.action.commentLine",label:p("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:M.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class ule extends kN{constructor(){super(1,{id:"editor.action.addCommentLine",label:p("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2081),weight:100}})}}class hle extends kN{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2099),weight:100}})}}class fle extends me{constructor(){super({id:"editor.action.blockComment",label:p("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:M.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(_n);if(!t.hasModel())return;const i=t.getOption(19),s=[],o=t.getSelections();for(const a of o)s.push(new mc(a,i.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}ie(dle);ie(ule);ie(hle);ie(fle);var gle=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wh=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let dg=class n8{constructor(e,t,n,i,s,o,a){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=s,this._menuService=o,this._configurationService=a,this._toDispose=new Q,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(l=>this._onContextMenu(l))),this._toDispose.add(this._editor.onMouseWheel(l=>{if(this._contextMenuIsBeingShownCount>0){const c=this._contextViewService.getContextViewElement(),d=l.srcElement;d.shadowRoot&&hu(c)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(l=>{this._editor.getOption(20)&&l.keyCode===58&&(l.preventDefault(),l.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(n8.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?M.SimpleEditorContext:M.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),s=i.getActions({arg:e.uri});i.dispose();for(const o of s){const[,a]=o;let l=0;for(const c of a)if(c instanceof bA){const d=this._getMenuActions(e,c.item.submenu);d.length>0&&(n.push(new jm(c.id,c.label,d)),l++)}else n.push(c),l++;l&&n.push(new ki)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(55);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),o=wi(this._editor.getDomNode()),a=o.left+s.left,l=o.top+s.top+s.height;t={x:a,y:l}}const i=this._editor.getOption(117)&&!_a;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:s=>{const o=this._keybindingFor(s);if(o)return new o_(s,s,{label:!0,keybinding:o.getLabel(),isMenu:!0});const a=s;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new o_(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;const t=this._editor.getOption(67);let n=0;const i=c=>({id:`menu-action-${++n}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run,dispose:()=>null}),s=(c,d)=>new jm(`menu-action-${++n}`,c,d,void 0),o=(c,d,u,h,f)=>{if(!d)return i({label:c,enabled:d,run:()=>{}});const g=b=>()=>{this._configurationService.updateValue(u,b)},_=[];for(const b of f)_.push(i({label:b.label,checked:h===b.value,run:g(b.value)}));return s(c,_)},a=[];a.push(i({label:p("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new ki),a.push(i({label:p("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(o(p("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:p("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:p("context.minimap.size.fill","Fill"),value:"fill"},{label:p("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(o(p("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:p("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:p("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(117)&&!_a;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};dg.ID="editor.contrib.contextmenu";dg=gle([wh(1,Vl),wh(2,Qu),wh(3,Re),wh(4,Mn),wh(5,qu),wh(6,ft)],dg);class ple extends me{constructor(){super({id:"editor.action.showContextMenu",label:p("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=dg.get(t))===null||n===void 0||n.showContextMenu()}}ct(dg.ID,dg);ie(ple);class Fx{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}let Bx=class{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}};class Iu extends j{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new Fx(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new Bx(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(Iu.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new Bx(new Fx(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new Bx(new Fx(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}Iu.ID="editor.contrib.cursorUndoRedoController";class mle extends me{constructor(){super({id:"cursorUndo",label:p("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var i;(i=Iu.get(t))===null||i===void 0||i.cursorUndo()}}class _le extends me{constructor(){super({id:"cursorRedo",label:p("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var i;(i=Iu.get(t))===null||i===void 0||i.cursorRedo()}}ct(Iu.ID,Iu);ie(mle);ie(_le);class ble{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){const n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new x(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new ue(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new ue(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new ue(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new ue(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new ue(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function Sh(r){return Je?r.altKey:r.ctrlKey}class Ll extends j{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Sh(e)&&(this._modifierPressed=!0),this._mouseDown&&Sh(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Sh(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Ll.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const i=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}Sh(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new B(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){const i=this._editor.getSelection();if(i){const{selectionStartLineNumber:s,selectionStartColumn:o}=i;n=[new ue(s,o,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new ue(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(Sh(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Ll.ID,new ble(this._dragSelection,t,Sh(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new x(e.lineNumber,e.column,e.lineNumber,e.column),options:Ll._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}Ll.ID="editor.contrib.dragAndDrop";Ll.TRIGGER_KEY_VALUE=Je?6:5;Ll._DECORATION_OPTIONS=Be.register({description:"dnd-target",className:"dnd-target"});ct(Ll.ID,Ll);var i8=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$p=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},E0=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let N_=class extends j{constructor(e,t,n,i,s){super(),this._bulkEditService=t,this._languageFeaturesService=n,this._progressService=i,this._register(e.onDropIntoEditor(o=>this.onDropIntoEditor(e,o.position,o.event))),this._languageFeaturesService.documentOnDropEditProvider.register("*",new OD(s))}onDropIntoEditor(e,t,n){return E0(this,void 0,void 0,function*(){if(!n.dataTransfer||!e.hasModel())return;const i=e.getModel(),s=i.getVersionId(),o=yield this.extractDataTransferData(n);if(o.size===0||e.getModel().getVersionId()!==s)return;const a=new ku(e,1);try{const l=this._languageFeaturesService.documentOnDropEditProvider.ordered(i),c=yield this._progressService.withProgress({location:15,delay:750,title:p("dropProgressTitle","Running drop handlers..."),cancellable:!0},()=>iA((()=>E0(this,void 0,void 0,function*(){for(const d of l){const u=yield d.provideDocumentOnDropEdits(i,t,o,a.token);if(a.token.isCancellationRequested)return;if(u)return u}}))(),a.token),()=>{a.cancel()});if(a.token.isCancellationRequested||e.getModel().getVersionId()!==s)return;if(c){const d=new x(t.lineNumber,t.column,t.lineNumber,t.column);t8(e,typeof c.insertText=="string"?Gc.escape(c.insertText):c.insertText.snippet,[ue.fromRange(d,0)]),c.additionalEdit&&(yield this._bulkEditService.apply(Og.convert(c.additionalEdit),{editor:e}));return}}finally{a.dispose()}})}extractDataTransferData(e){return E0(this,void 0,void 0,function*(){if(!e.dataTransfer)return new QB;const t=RD(e.dataTransfer);return ile(t,e),t})}};N_.ID="editor.contrib.dropIntoEditorController";N_=i8([$p(1,fb),$p(2,be),$p(3,J3),$p(4,c_)],N_);let OD=class{constructor(e){this._workspaceContextService=e}provideDocumentOnDropEdits(e,t,n,i){var s;return E0(this,void 0,void 0,function*(){const o=n.get(ls.uriList);if(o){const l=yield o.asString(),c=this.getUriListInsertText(l);if(c)return{insertText:c}}const a=(s=n.get("text"))!==null&&s!==void 0?s:n.get(ls.text);if(a)return{insertText:yield a.asString()}})}getUriListInsertText(e){const t=[];for(const n of xN.parse(e))try{t.push(Se.parse(n))}catch{}if(t.length)return t.map(n=>{const i=this._workspaceContextService.getWorkspaceFolder(n);if(i){const s=_Y(i.uri,n);if(s)return s}return n.fsPath}).join(" ")}};OD=i8([$p(0,c_)],OD);ct(N_.ID,N_);class Ri{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===Ri._FIND_MATCH_DECORATION||i===Ri._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,s=this._decorations.length;i<s;i++){const o=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(o)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,Ri._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,Ri._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const o=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);s=new x(s.startLineNumber,s.startColumn,o,a)}this._rangeHighlightDecorationId=i.addDecoration(s,Ri._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=Ri._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){i=Ri._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const _=e[f].range;h+d>=_.startLineNumber?_.endLineNumber>h&&(h=_.endLineNumber):(s.push({range:new x(u,1,h,1),options:Ri._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=_.startLineNumber,h=_.endLineNumber)}s.push({range:new x(u,1,h,1),options:Ri._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Ri._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Ri._CURRENT_FIND_MATCH_DECORATION=Be.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:an(MA),position:yr.Center},minimap:{color:an(Xh),position:_r.Inline}});Ri._FIND_MATCH_DECORATION=Be.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:an(MA),position:yr.Center},minimap:{color:an(Xh),position:_r.Inline}});Ri._FIND_MATCH_NO_OVERVIEW_DECORATION=Be.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Ri._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Be.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:an(MA),position:yr.Center}});Ri._RANGE_HIGHLIGHT_DECORATION=Be.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Ri._FIND_SCOPE_DECORATION=Be.register({description:"find-scope",className:"findScope",isWholeLine:!0});class vle{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>x.compareRangesUsingStarts(o.range,a.range));const i=[];let s=n[0];for(let o=1;o<n.length;o++)s.range.endLineNumber===n[o].range.startLineNumber&&s.range.endColumn===n[o].range.startColumn?(s.range=s.range.plusRange(n[o].range),s.text=s.text+n[o].text):(i.push(s),s=n[o]);i.push(s);for(const o of i)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function s8(r,e){if(r&&r[0]!==""){const t=LP(r,e,"-"),n=LP(r,e,"_");return t&&!n?TP(r,e,"-"):!t&&n?TP(r,e,"_"):r[0].toUpperCase()===r[0]?e.toUpperCase():r[0].toLowerCase()===r[0]?e.toLowerCase():yH(r[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):r[0][0].toUpperCase()!==r[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function LP(r,e,t){return r[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&r[0].split(t).length===e.split(t).length}function TP(r,e,t){const n=e.split(t),i=r[0].split(t);let s="";return n.forEach((o,a)=>{s+=s8([i[a]],o)+t}),s.slice(0,-1)}class DP{constructor(e){this.staticValue=e,this.kind=0}}class Cle{constructor(e){this.pieces=e,this.kind=1}}class ug{constructor(e){!e||e.length===0?this._state=new DP(""):e.length===1&&e[0].staticValue!==null?this._state=new DP(e[0].staticValue):this._state=new Cle(e)}static fromStaticValue(e){return new ug([ru.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?s8(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,s=this._state.pieces.length;i<s;i++){const o=this._state.pieces[i];if(o.staticValue!==null){n+=o.staticValue;continue}let a=ug._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){const l=[],c=o.caseOps.length;let d=0;for(let u=0,h=a.length;u<h;u++){if(d>=c){l.push(a.slice(u));break}switch(o.caseOps[d]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),d++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),d++;break;default:l.push(a[u])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class ru{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new ru(e,-1,null)}static caseOps(e,t){return new ru(null,e,t)}}class yle{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=ru.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=ru.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=ru.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new ug(this._result)}}function wle(r){if(!r||r.length===0)return new ug(null);const e=[],t=new yle(r);for(let n=0,i=r.length;n<i;n++){const s=r.charCodeAt(n);if(s===92){if(n++,n>=i)break;const o=r.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(s===36){if(n++,n>=i)break;const o=r.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<i){const l=r.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const od=new ge("findWidgetVisible",!1);od.toNegated();const uw=new ge("findInputFocussed",!1),LN=new ge("replaceInputFocussed",!1),$v={primary:545,mac:{primary:2593}},zv={primary:565,mac:{primary:2613}},Kv={primary:560,mac:{primary:2608}},Gv={primary:554,mac:{primary:2602}},qv={primary:558,mac:{primary:2606}},Ft={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},_c=19999,Sle=240;class vm{constructor(e,t){this._toDispose=new Q,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Js,this._decorations=new Ri(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Tt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,ut(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},Sle)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new x(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const i=this._findMatches(n,!1,_c);this._decorations.set(i,n);const s=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(s);if(o===0&&i.length>0){const a=jF(i.map(l=>l.range),l=>x.compareRangesUsingStarts(l,s)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(37).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===1?(n===1?n=s.getLineCount():n--,i=s.getLineMaxColumn(n)):i--,new B(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<_c){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const n=this._decorations.getFindScope(),i=vm._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());const{lineNumber:s,column:o}=e,a=this._editor.getModel();let l=new B(s,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1)),!!c){if(!t&&!i.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,i=1):i++,new B(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<_c){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),o=vm._getSearchRange(this._editor.getModel(),s);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new B(a,l),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t)),u?!i&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,n,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?wle(this._state.replaceString):ug.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){const i=e.buildReplaceString(n.matches,this._state.preserveCase),s=new si(t,i);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new B(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(s=>vm._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=_c?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Cd(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let u="mu";n.ignoreCase&&(u+="i"),n.global&&(u+="g"),n=new RegExp(n.source,u)}const i=this._editor.getModel(),s=i.getValue(1),o=i.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=s.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=s.replace(n,a.buildReplaceString(null,c));const d=new FA(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let o=0,a=n.length;o<a;o++)i[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);const s=new vle(this._editor.getSelection(),n.map(o=>o.range),i);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let n=this._findMatches(e,!1,1073741824).map(s=>new ue(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const i=this._editor.getSelection();for(let s=0,o=n.length;s<o;s++)if(n[s].equalsRange(i)){n=[i].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}class hw extends Yr{constructor(e,t,n,i){super(),this._hideSoon=this._register(new Tt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=i.getColorTheme().getColor(gC),o=i.getColorTheme().getColor(mC),a=i.getColorTheme().getColor(pC);this.caseSensitive=this._register(new B9({appendTitle:this._keybindingLabelFor(Ft.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new W9({appendTitle:this._keybindingLabelFor(Ft.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new V9({appendTitle:this._keybindingLabelFor(Ft.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(Z(this._domNode,he.MOUSE_LEAVE,l=>this._onMouseLeave())),this._register(Z(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(i.getColorTheme()),this._register(i.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return hw.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){const t={inputActiveOptionBorder:e.getColor(gC),inputActiveOptionForeground:e.getColor(mC),inputActiveOptionBackground:e.getColor(pC)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}hw.ID="editor.contrib.findOptionsWidget";Vt((r,e)=>{const t=r.getColor(wn);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=r.getColor(mo);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const i=r.getColor(po);i&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${i}; }`);const s=r.getColor(Ge);s&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});function Zv(r,e){return r===1?!0:r===2?!1:e}class xle extends j{constructor(){super(),this._onFindReplaceStateChange=this._register(new R),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return Zv(this._isRegexOverride,this._isRegex)}get wholeWord(){return Zv(this._wholeWordOverride,this._wholeWord)}get matchCase(){return Zv(this._matchCaseOverride,this._matchCase)}get preserveCase(){return Zv(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){const i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,s=!0),typeof n<"u"&&(x.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;const s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(u=>{var h;return(h=this._searchScope)===null||h===void 0?void 0:h.some(f=>!x.equalsRange(f,u))})||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,s.isRegex=!0),l!==this.wholeWord&&(o=!0,s.wholeWord=!0),c!==this.matchCase&&(o=!0,s.matchCase=!0),d!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=_c}}function EP(r){var e,t;return((e=r.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=r.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var kle=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Lle=Nn("find-selection",m.selection,p("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),AP=Nn("find-collapsed",m.chevronRight,p("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),IP=Nn("find-expanded",m.chevronDown,p("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Tle=Nn("find-replace",m.replace,p("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Dle=Nn("find-replace-all",m.replaceAll,p("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Ele=Nn("find-previous-match",m.arrowUp,p("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ale=Nn("find-next-match",m.arrowDown,p("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Ile=p("label.find","Find"),Nle=p("placeholder.find","Find"),Mle=p("label.previousMatchButton","Previous Match"),Rle=p("label.nextMatchButton","Next Match"),Ole=p("label.toggleSelectionFind","Find in Selection"),Ple=p("label.closeButton","Close"),Fle=p("label.replace","Replace"),Ble=p("placeholder.replace","Replace"),Wle=p("label.replaceButton","Replace"),Vle=p("label.replaceAllButton","Replace All"),Hle=p("label.toggleReplaceButton","Toggle Replace"),Ule=p("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",_c),jle=p("label.matchesLocation","{0} of {1}"),NP=p("label.noResults","No results"),Uo=419,$le=275,zle=$le-54;let mp=69;const Kle=33,MP="ctrlEnterReplaceAll.windows.donotask",RP=Je?256:2048;class Wx{constructor(e){this.afterLineNumber=e,this.heightInPx=Kle,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function OP(r,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){r.stopPropagation();return}}function PP(r,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){r.stopPropagation();return}}class fw extends Yr{constructor(e,t,n,i,s,o,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=s,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(MP,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Ca(500),this._register(Ke(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(83)&&(this._codeEditor.getOption(83)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(133)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(37)){const u=this._codeEditor.getOption(37).addExtraSpaceOnTop;u&&!this._viewZone&&(this._viewZone=new Wx(0),this._showViewZone()),!u&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>kle(this,void 0,void 0,function*(){if(this._isVisible){const d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=uw.bindTo(o),this._findFocusTracker=this._register(fu(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=LN.bindTo(o),this._replaceFocusTracker=this._register(fu(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(37).addExtraSpaceOnTop&&(this._viewZone=new Wx(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return fw.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(83)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Pr(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,We)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=mp+"px",this._state.matchesCount>=_c?this._matchesCount.title=Ule:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=_c&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=hr(jle,n,t)}else e=NP;this._matchesCount.appendChild(document.createTextNode(e)),di(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),mp=Math.max(mp,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===NP)return n===""?p("ariaSearchNoResultEmpty","{0} found",e):p("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=p("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${i}`:i}return p("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const n=!this._codeEditor.getOption(83);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(37).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(37).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=wi(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=i.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=c5(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(37).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(37).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new Wx(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;const o=s-n.heightInPx;n.heightInPx=s,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(77).top,s<=0)return;n.heightInPx=s,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){const t={inputActiveOptionBorder:e.getColor(gC),inputActiveOptionBackground:e.getColor(pC),inputActiveOptionForeground:e.getColor(mC),inputBackground:e.getColor(h1),inputForeground:e.getColor(f1),inputBorder:e.getColor(g1),inputValidationInfoBackground:e.getColor(vA),inputValidationInfoForeground:e.getColor(CA),inputValidationInfoBorder:e.getColor(yA),inputValidationWarningBackground:e.getColor(wA),inputValidationWarningForeground:e.getColor(SA),inputValidationWarningBorder:e.getColor(xA),inputValidationErrorBackground:e.getColor(kA),inputValidationErrorForeground:e.getColor(LA),inputValidationErrorBorder:e.getColor(TA)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!pA(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let s=!1,o=!1,a=!1;if(this._resized&&Pr(this._domNode)>Uo){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=Pr(this._findInput.domNode);return}if(Uo+28+i>=n&&(o=!0),Uo+28+i-mp>=n&&(a=!0),Uo+28+i-mp>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._resized){this._findInput.inputBox.layout();const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Pr(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!x.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(RP|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return OP(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return PP(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(RP|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{hi&&vo&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(p("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(MP,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return OP(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return PP(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new SD(null,this._contextViewProvider,{width:zle,label:Ile,placeholder:Nle,appendCaseSensitiveLabel:this._keybindingLabelFor(Ft.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Ft.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Ft.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>EP(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Ti&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new xh({label:Mle+this._keybindingLabelFor(Ft.PreviousMatchFindAction),icon:Ele,onTrigger:()=>{this._codeEditor.getAction(Ft.PreviousMatchFindAction).run().then(void 0,We)}})),this._nextBtn=this._register(new xh({label:Rle+this._keybindingLabelFor(Ft.NextMatchFindAction),icon:Ale,onTrigger:()=>{this._codeEditor.getAction(Ft.NextMatchFindAction).run().then(void 0,We)}}));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new _b({icon:Lle,title:Ole+this._keybindingLabelFor(Ft.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new xh({label:Ple+this._keybindingLabelFor(Ft.CloseFindWidgetCommand),icon:X3,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new xD(null,void 0,{label:Fle,placeholder:Ble,appendPreserveCaseLabel:this._keybindingLabelFor(Ft.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>EP(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new xh({label:Wle+this._keybindingLabelFor(Ft.ReplaceOneAction),icon:Tle,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new xh({label:Vle+this._keybindingLabelFor(Ft.ReplaceAllAction),icon:Dle,onTrigger:()=>{this._controller.replaceAll()}}));const s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",s.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new xh({label:Hle,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Pr(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Uo}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(s),this._resizeSash=new bi(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Uo;this._register(this._resizeSash.onDidStart(()=>{a=Pr(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;const c=a+l.startX-l.currentX;if(c<Uo)return;const d=parseFloat(Xy(this._domNode).maxWidth)||0;c>d||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Pr(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=Pr(this._domNode);if(l<Uo)return;let c=Uo;if(!this._resized||l===Uo){const d=this._codeEditor.getLayoutInfo();c=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Pr(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}fw.ID="editor.contrib.findWidget";class xh extends Yr{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+mt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var i,s;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(s=(i=this._opts).onKeyDown)===null||s===void 0||s.call(i,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...mt.asClassNameArray(AP)),this._domNode.classList.add(...mt.asClassNameArray(IP))):(this._domNode.classList.remove(...mt.asClassNameArray(IP)),this._domNode.classList.add(...mt.asClassNameArray(AP)))}}Vt((r,e)=>{const t=(g,_)=>{_&&e.addRule(`.monaco-editor ${g} { background-color: ${_}; }`)};t(".findMatch",r.getColor(_l)),t(".currentFindMatch",r.getColor(Oz)),t(".findScope",r.getColor(Pz));const n=r.getColor(wn);t(".find-widget",n);const i=r.getColor(po);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const s=r.getColor(Vd);s&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Li(r.type)?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const o=r.getColor(Fz);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=r.getColor(Bz);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${Li(r.type)?"dashed":"solid"} ${a}; }`);const l=r.getColor(Ge);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const c=r.getColor(mo);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const d=r.getColor(mz);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);const u=r.getColor(xz);if(u)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${u}; }`);else{const g=r.getColor(pl);g&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`)}const h=r.getColor(DL);h&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${h} !important;
		}
	`);const f=r.getColor(gr);f&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${f}; }`)});var r8=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zo=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Nu=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Gle=524288;function PD(r,e="single",t=!1){if(!r.hasModel())return null;const n=r.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=r.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(r.getModel().getValueLengthInRange(n)<Gle)return r.getModel().getValueInRange(n)}return null}let Ns=class o8 extends j{constructor(e,t,n,i){super(),this._editor=e,this._findWidgetVisible=od.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new Ca(500),this._state=this._register(new xle),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(s=>this._onStateChanged(s))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const s=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),s&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(37).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(o8.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!uw.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Zs(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return Nu(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;const n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){const i=PD(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=Zs(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const i=PD(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){const i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){const i=this._editor.getSelections();i.some(s=>!s.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new vm(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Nu(this,void 0,void 0,function*(){return this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Ns.ID="editor.contrib.findController";Ns=r8([Zo(1,Re),Zo(2,Qr),Zo(3,Hl)],Ns);let FD=class extends Ns{constructor(e,t,n,i,s,o,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=i,this._themeService=s,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return Nu(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(37).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new fw(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new hw(this._editor,this._state,this._keybindingService,this._themeService))}};FD=r8([Zo(1,Qu),Zo(2,Re),Zo(3,Mn),Zo(4,It),Zo(5,xn),Zo(6,Qr),Zo(7,Hl)],FD);const qle=x5(new S5({id:Ft.StartFindAction,label:p("startFindAction","Find"),alias:"Find",precondition:le.or(A.focus,le.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:M.MenubarEditMenu,group:"3_find",title:p({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));qle.addImplementation(0,(r,e,t)=>{const n=Ns.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop}):!1});const Zle={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:p("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:p("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:p("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:p("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class Yle extends me{constructor(){super({id:Ft.StartFindWithArgs,label:p("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Zle})}run(e,t,n){return Nu(this,void 0,void 0,function*(){const i=Ns.get(t);if(i){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(37).loop},s),i.setGlobalBufferTerm(i.getState().searchString)}})}}class Xle extends me{constructor(){super({id:Ft.StartFindWithSelection,label:p("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Nu(this,void 0,void 0,function*(){const n=Ns.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class a8 extends me{run(e,t){return Nu(this,void 0,void 0,function*(){const n=Ns.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(n))})}}class Qle extends a8{constructor(){super({id:Ft.NextMatchFindAction,label:p("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:A.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:le.and(A.focus,uw),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class Jle extends a8{constructor(){super({id:Ft.PreviousMatchFindAction,label:p("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:A.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:le.and(A.focus,uw),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class l8 extends me{run(e,t){return Nu(this,void 0,void 0,function*(){const n=Ns.get(t);if(!n)return;const i=t.getOption(37).seedSearchStringFromSelection==="selection";let s=null;t.getOption(37).seedSearchStringFromSelection!=="never"&&(s=PD(t,"single",i)),s&&n.setSearchString(s),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(n))})}}class ece extends l8{constructor(){super({id:Ft.NextSelectionMatchFindAction,label:p("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class tce extends l8{constructor(){super({id:Ft.PreviousSelectionMatchFindAction,label:p("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const nce=x5(new S5({id:Ft.StartFindReplaceAction,label:p("startReplace","Replace"),alias:"Replace",precondition:le.or(A.focus,le.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:M.MenubarEditMenu,group:"3_find",title:p({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));nce.addImplementation(0,(r,e,t)=>{if(!e.hasModel()||e.getOption(83))return!1;const n=Ns.get(e);if(!n)return!1;const i=e.getSelection(),s=n.isFindInputFocused(),o=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(37).seedSearchStringFromSelection!=="never"&&!s,a=s||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop})});ct(Ns.ID,FD);ie(Yle);ie(Xle);ie(Qle);ie(Jle);ie(ece);ie(tce);const Po=Un.bindToContribution(Ns.get);te(new Po({id:Ft.CloseFindWidgetCommand,precondition:od,handler:r=>r.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:le.and(A.focus,le.not("isComposing")),primary:9,secondary:[1033]}}));te(new Po({id:Ft.ToggleCaseSensitiveCommand,precondition:void 0,handler:r=>r.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:$v.primary,mac:$v.mac,win:$v.win,linux:$v.linux}}));te(new Po({id:Ft.ToggleWholeWordCommand,precondition:void 0,handler:r=>r.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:zv.primary,mac:zv.mac,win:zv.win,linux:zv.linux}}));te(new Po({id:Ft.ToggleRegexCommand,precondition:void 0,handler:r=>r.toggleRegex(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:Kv.primary,mac:Kv.mac,win:Kv.win,linux:Kv.linux}}));te(new Po({id:Ft.ToggleSearchScopeCommand,precondition:void 0,handler:r=>r.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:Gv.primary,mac:Gv.mac,win:Gv.win,linux:Gv.linux}}));te(new Po({id:Ft.TogglePreserveCaseCommand,precondition:void 0,handler:r=>r.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:qv.primary,mac:qv.mac,win:qv.win,linux:qv.linux}}));te(new Po({id:Ft.ReplaceOneAction,precondition:od,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:3094}}));te(new Po({id:Ft.ReplaceOneAction,precondition:od,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:le.and(A.focus,LN),primary:3}}));te(new Po({id:Ft.ReplaceAllAction,precondition:od,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:2563}}));te(new Po({id:Ft.ReplaceAllAction,precondition:od,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:le.and(A.focus,LN),primary:void 0,mac:{primary:2051}}}));te(new Po({id:Ft.SelectAllMatchesAction,precondition:od,handler:r=>r.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:A.focus,primary:515}}));const FP=65535,oo=16777215,BP=4278190080;class Vx{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){const n=e/32|0,i=e%32,s=this._states[n];t?this._states[n]=s|1<<i:this._states[n]=s&~(1<<i)}}class Vs{constructor(e,t,n){if(this.sourceAbbr={[0]:" ",[1]:"u",[2]:"r"},e.length!==t.length||e.length>FP)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Vx(e.length),this._userDefinedStates=new Vx(e.length),this._recoveredStates=new Vx(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(n,i)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){const s=this._startIndexes[n],o=this._endIndexes[n];if(s>oo||o>oo)throw new Error("startLineNumber or endLineNumber must not exceed "+oo);for(;e.length>0&&!t(s,o);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&oo}getEndLineNumber(e){return this._endIndexes[e]&oo}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new ice(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&BP)>>>24)+((this._endIndexes[e]&BP)>>>16);return t===FP?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){const i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.sourceAbbr[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&oo,endLineNumber:this._endIndexes[e]&oo,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),i=new Uint32Array(t);let s=[],o=!1;for(let l=0;l<t;l++){const c=e[l];n[l]=c.startLineNumber,i[l]=c.endLineNumber,s.push(c.type),c.type&&(o=!0)}o||(s=void 0);const a=new Vs(n,i,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n){n=n??Number.MAX_VALUE;const i=(_,b)=>Array.isArray(_)?v=>v<b?_[v]:void 0:v=>v<b?_.toFoldRange(v):void 0,s=i(e,e.length),o=i(t,t.length);let a=0,l=0,c=s(0),d=o(0);const u=[];let h,f=0;const g=[];for(;c||d;){let _;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?_=d:(_=c,_.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,_.source=0),c=s(++a)):(_=d,d.isCollapsed&&d.source===0&&(_.source=2)),d=o(++l);else{let b=l,v=d;for(;;){if(!v||v.startLineNumber>c.endLineNumber){_=c;break}if(v.source===1&&v.endLineNumber>c.endLineNumber)break;v=o(++b)}c=s(++a)}if(_){for(;h&&h.endLineNumber<_.startLineNumber;)h=u.pop();_.endLineNumber>_.startLineNumber&&_.startLineNumber>f&&_.endLineNumber<=n&&(!h||h.endLineNumber>=_.endLineNumber)&&(g.push(_),f=_.startLineNumber,h&&u.push(h),h=_)}}return g}}class ice{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class sce{constructor(e,t){this._updateEventEmitter=new R,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Vs(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}get regions(){return this._regions}get textModel(){return this._textModel}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,s=-1,o=-1;const a=l=>{for(;i<l;){const c=this._regions.getEndLineNumber(i),d=this._regions.isCollapsed(i);if(c<=s){const u=this.regions.getSource(i)!==0;n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(d,c<=o,u))}d&&c>o&&(o=c),i++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),s=Math.max(s,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=i=>{for(const s of e)if(!(s.startLineNumber>i.endLineNumber||i.startLineNumber>s.endLineNumber))return!0;return!1};for(let i=0;i<this._regions.length;i++){const s=this._regions.toFoldRange(i);(s.source===0||!n(s))&&t.push(s)}this.updatePost(Vs.fromFoldRanges(t))}update(e,t=[]){const n=this._currentFoldedOrManualRanges(t),i=Vs.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(Vs.fromFoldRanges(i))}updatePost(e){const t=[];let n=-1;for(let i=0,s=e.length;i<s;i++){const o=e.getStartLineNumber(i),a=e.getEndLineNumber(i),l=e.isCollapsed(i),c=e.getSource(i)!==0,d={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=n,c)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(i=>this._editorDecorationIds=i.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=(i,s)=>{for(const o of e)if(i<o&&o<=s)return!0;return!1},n=[];for(let i=0,s=this._regions.length;i<s;i++){let o=this.regions.isCollapsed(i);const a=this.regions.getSource(i);if(o||a!==0){const l=this._regions.toFoldRange(i),c=this._textModel.getDecorationRange(this._editorDecorationIds[i]);c&&(o&&(t(c.startLineNumber,c.endLineNumber)||c.endLineNumber-c.startLineNumber!==l.endLineNumber-l.startLineNumber)&&(o=!1),n.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:o,source:a}))}}return n}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n],o=this._getLinesChecksum(s.startLineNumber+1,s.endLineNumber);t.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,isCollapsed:s.isCollapsed,source:s.source,checksum:o})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;const i=[],s=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>s)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&i.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(n=a.source)!==null&&n!==void 0?n:0})}const o=Vs.sanitizeAndMerge(this._regions,i,s);this.updatePost(Vs.fromFoldRanges(o))}_getLinesChecksum(e,t){return rA(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let i=this._regions.findRange(e),s=1;for(;i>=0;){const o=this._regions.toRegion(i);(!t||t(o,s))&&n.push(o),s++,i=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],i=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=i,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&n.push(c)}else break}}else for(let o=i,a=this._regions.length;o<a;o++){const l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<s)(!t||t(l))&&n.push(l);else break}return n}}function rce(r,e,t){const n=[];for(const i of t){const s=r.getRegionAtLine(i);if(s){const o=!s.isCollapsed;if(n.push(s),e>1){const a=r.getRegionsInside(s,(l,c)=>l.isCollapsed!==o&&c<e);n.push(...a)}}}r.toggleCollapseState(n)}function Hg(r,e,t=Number.MAX_VALUE,n){const i=[];if(n&&n.length>0)for(const s of n){const o=r.getRegionAtLine(s);if(o&&(o.isCollapsed!==e&&i.push(o),t>1)){const a=r.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);i.push(...a)}}else{const s=r.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);i.push(...s)}r.toggleCollapseState(i)}function c8(r,e,t,n){const i=[];for(const s of n){const o=r.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...o)}r.toggleCollapseState(i)}function oce(r,e,t){const n=[];for(const i of t){const s=r.getAllRegionsAtLine(i,o=>o.isCollapsed!==e);s.length>0&&n.push(s[0])}r.toggleCollapseState(n)}function ace(r,e,t,n){const i=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(l=>o.containsLine(l)),s=r.getRegionsInside(null,i);r.toggleCollapseState(s)}function d8(r,e,t){const n=[];for(const o of t){const a=r.getAllRegionsAtLine(o,void 0);a.length>0&&n.push(a[0])}const i=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,s=r.getRegionsInside(null,i);r.toggleCollapseState(s)}function TN(r,e,t){const n=r.textModel,i=r.regions,s=[];for(let o=i.length-1;o>=0;o--)if(t!==i.isCollapsed(o)){const a=i.getStartLineNumber(o);e.test(n.getLineContent(a))&&s.push(i.toRegion(o))}r.toggleCollapseState(s)}function DN(r,e,t){const n=r.regions,i=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&i.push(n.toRegion(s));r.toggleCollapseState(i)}function lce(r,e){let t=null;const n=e.getRegionAtLine(r);if(n!==null&&(t=n.startLineNumber,r===t)){const i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}function cce(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){if(r!==t.startLineNumber)return t.startLineNumber;{const n=t.parentIndex;let i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<r)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function dce(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){const n=t.parentIndex;let i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>r)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class uce{constructor(e){this._updateEventEmitter=new R,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||vu(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let n=0,i=0,s=Number.MAX_VALUE,o=-1;const a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;const l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);s<=l&&c<=o||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===c?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new x(l,1,c,1))),s=l,o=c)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return WP(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let i=null;const s=o=>((!i||!hce(o,i))&&(i=WP(this._hiddenRanges,o)),i?i.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o];const c=s(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);const d=s(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function hce(r,e){return r>=e.startLineNumber&&r<=e.endLineNumber}function WP(r,e){const t=jF(r,n=>e<n.startLineNumber)-1;return t>=0&&r[t].endLineNumber>=e?r[t]:null}const fce=5e3,gce="indent";class pce{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.maxFoldingRegions=n,this.id=gce}dispose(){}compute(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=n&&!!n.offSide,s=n&&n.markers;return Promise.resolve(_ce(this.editorModel,i,s,this.maxFoldingRegions,t))}}let mce=class{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>oo||t>oo)return;const i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){var t;if(this._length<=this._foldingRangesLimit){const n=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=this._length-1,o=0;s>=0;s--,o++)n[o]=this._startIndexes[s],i[o]=this._endIndexes[s];return new Vs(n,i)}else{(t=this._notifyTooManyRegions)===null||t===void 0||t.call(this,this._foldingRangesLimit);let n=0,i=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+n>this._foldingRangesLimit){i=l;break}n+=c}}const s=e.getOptions().tabSize,o=new Uint32Array(this._foldingRangesLimit),a=new Uint32Array(this._foldingRangesLimit);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],u=e.getLineContent(d),h=y1(u,s);(h<i||h===i&&n++<this._foldingRangesLimit)&&(o[c]=d,a[c]=this._endIndexes[l],c++)}return new Vs(o,a)}}};function _ce(r,e,t,n,i){const s=r.getOptions().tabSize;n=n??fce;const o=new mce(n,i);let a;t&&(a=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const l=[],c=r.getLineCount()+1;l.push({indent:-1,endAbove:c,line:c});for(let d=r.getLineCount();d>0;d--){const u=r.getLineContent(d),h=y1(u,s);let f=l[l.length-1];if(h===-1){e&&(f.endAbove=d);continue}let g;if(a&&(g=u.match(a)))if(g[1]){let _=l.length-1;for(;_>0&&l[_].indent!==-2;)_--;if(_>0){l.length=_+1,f=l[_],o.insertFirst(d,f.line,h),f.line=d,f.indent=h,f.endAbove=d;continue}}else{l.push({indent:-2,endAbove:d,line:d});continue}if(f.indent>h){do l.pop(),f=l[l.length-1];while(f.indent>h);const _=f.endAbove-1;_-d>=1&&o.insertFirst(d,_,h)}f.indent===h?f.endAbove=d:l.push({indent:h,endAbove:d,line:d})}return o.toIndentRanges(r)}const Ab=Nn("folding-expanded",m.chevronDown,p("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),gw=Nn("folding-collapsed",m.chevronRight,p("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),u8=Nn("folding-manual-collapsed",gw,p("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),EN=Nn("folding-manual-expanded",Ab,p("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin."));class ai{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t||this.showFoldingControls==="never"?ai.HIDDEN_RANGE_DECORATION:e?n?this.showFoldingHighlights?ai.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ai.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?ai.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ai.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?ai.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:ai.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?ai.MANUALLY_EXPANDED_VISUAL_DECORATION:ai.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}ai.COLLAPSED_VISUAL_DECORATION=Be.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:mt.asClassName(gw)});ai.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Be.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:mt.asClassName(gw)});ai.MANUALLY_COLLAPSED_VISUAL_DECORATION=Be.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+mt.asClassName(Ab)});ai.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Be.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:mt.asClassName(u8)});ai.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Be.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:mt.asClassName(Ab)});ai.EXPANDED_VISUAL_DECORATION=Be.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+mt.asClassName(Ab)});ai.MANUALLY_EXPANDED_VISUAL_DECORATION=Be.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+mt.asClassName(EN)});ai.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Be.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:mt.asClassName(EN)});ai.HIDDEN_RANGE_DECORATION=Be.register({description:"folding-hidden-range-decoration",stickiness:1});const bce={},vce="syntax";class Cce{constructor(e,t,n,i){this.editorModel=e,this.providers=t,this.limit=i,this.id=vce;for(const s of t)typeof s.onDidChange=="function"&&(this.disposables||(this.disposables=new Q),this.disposables.add(s.onDidChange(n)))}compute(e,t){return yce(this.providers,this.editorModel,e).then(n=>n?Sce(n,this.limit,t):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function yce(r,e,t){let n=null;const i=r.map((s,o)=>Promise.resolve(s.provideFoldingRanges(e,bce,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},Jn));return Promise.all(i).then(s=>n)}class wce{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>oo||t>oo)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=i,this._types[s]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){var e;if(this._length<=this._foldingRangesLimit){const t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=0;i<this._length;i++)t[i]=this._startIndexes[i],n[i]=this._endIndexes[i];return new Vs(t,n,this._types)}else{(e=this._notifyTooManyRegions)===null||e===void 0||e.call(this,this._foldingRangesLimit);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const i=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit),o=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<n||c===n&&t++<this._foldingRangesLimit)&&(i[l]=this._startIndexes[a],s[l]=this._endIndexes[a],o[l]=this._types[a],l++)}return new Vs(i,s,o)}}}function Sce(r,e,t){const n=r.sort((a,l)=>{let c=a.start-l.start;return c===0&&(c=a.rank-l.rank),c}),i=new wce(e,t);let s;const o=[];for(const a of n)if(!s)s=a,i.add(a.start,a.end,a.kind&&a.kind.value,o.length);else if(a.start>s.start)if(a.end<=s.end)o.push(s),s=a,i.add(a.start,a.end,a.kind&&a.kind.value,o.length);else{if(a.start>s.end){do s=o.pop();while(s&&a.start>s.end);s&&o.push(s),s=a}i.add(a.start,a.end,a.kind&&a.kind.value,o.length)}return i.toIndentRanges()}var xce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_p=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Ai=new ge("foldingEnabled",!1);let hg=class h8 extends j{constructor(e,t,n,i,s,o){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=o,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new Q),this.editor=e;const a=this.editor.getOptions();this._isEnabled=a.get(39),this._useFoldingProviders=a.get(40)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(44),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(42),this._maxFoldingRegions=a.get(43),this.updateDebounceInfo=s.for(o.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new ai(e),this.foldingDecorationProvider.showFoldingControls=a.get(101),this.foldingDecorationProvider.showFoldingHighlights=a.get(41),this.foldingEnabled=Ai.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=l=>{this._tooManyRegionsNotified||(i.notify({severity:Zt.Warning,sticky:!0,message:p("maximum fold ranges",`The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?["editor.foldingMaximumRegions"]) to enable more.`,l)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(39)&&(this._isEnabled=this.editor.getOptions().get(39),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(43)&&(this._maxFoldingRegions=this.editor.getOptions().get(43),this._tooManyRegionsNotified=!1,this.onModelChanged()),l.hasChanged(101)||l.hasChanged(41)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(101),this.foldingDecorationProvider.showFoldingHighlights=c.get(41),this.triggerFoldingModelChanged()}l.hasChanged(40)&&(this._useFoldingProviders=this.editor.getOptions().get(40)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(44)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(44)),l.hasChanged(42)&&(this._foldingImportsByDefault=this.editor.getOptions().get(42))})),this.onModelChanged()}static get(e){return e.getContribution(h8.ID)}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&!(!e||e.lineCount!==t.getLineCount())&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new sce(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new uce(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Ca(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new Tt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new pce(e,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){const t=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);t.length>0&&(this.rangeProvider=new Cce(e,t,()=>this.triggerFoldingModelChanged(),this._maxFoldingRegions))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new fs(!0),n=this.getRangeProvider(e.textModel),i=this.foldingRegionPromise=Xn(s=>n.compute(s,this._notifyTooManyRegions));return i.then(s=>{if(s&&i===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const d=s.setCollapsedAllOfType(ko.Imports.value,!0);d&&(o=Hc.capture(this.editor),this._currentModelHasFoldedImports=d)}const a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(s,l),o?.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(We(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const n=this.editor.getSelections();if(n&&n.length>0){const i=[];for(const s of n){const o=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&i.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,We)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const i=e.target.detail,s=e.target.element.offsetLeft;if(i.offsetX-s<5)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const i=this.editor.getModel();if(i&&t.startColumn===i.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==n)return;if(i){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(n))return}const o=t.getRegionAtLine(n);if(o&&o.startLineNumber===n){const a=o.isCollapsed;if(i||a){const l=e.event.altKey;let c=[];if(l){const d=h=>!h.containedBy(o)&&!o.containedBy(h),u=t.getRegionsInside(null,d);for(const h of u)h.isCollapsed&&c.push(h);c.length===0&&(c=u)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const u of t.getRegionsInside(o))u.isCollapsed===a&&c.push(u);(a||!d||c.length===0)&&c.push(o)}t.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};hg.ID="editor.contrib.folding";hg=xce([_p(1,Re),_p(2,_n),_p(3,xn),_p(4,Er),_p(5,be)],hg);class Wi extends me{runEditorCommand(e,t,n){const i=e.get(_n),s=hg.get(t);if(!s)return;const o=s.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(a=>{if(a){this.invoke(s,a,t,n,i);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function f8(r){if(!xs(r)){if(!cs(r))return!1;const e=r;if(!xs(e.levels)&&!Ic(e.levels)||!xs(e.direction)&&!hs(e.direction)||!xs(e.selectionLines)&&(!ZF(e.selectionLines)||!e.selectionLines.every(Ic)))return!1}return!0}class kce extends Wi{constructor(){super({id:"editor.unfold",label:p("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:f8,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=i&&i.levels||1,o=this.getLineNumbers(i,n);i&&i.direction==="up"?c8(t,!1,s,o):Hg(t,!1,s,o)}}class Lce extends Wi{constructor(){super({id:"editor.unfoldRecursively",label:p("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2137),weight:100}})}invoke(e,t,n,i){Hg(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class Tce extends Wi{constructor(){super({id:"editor.fold",label:p("foldAction.label","Fold"),alias:"Fold",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:f8,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=this.getLineNumbers(i,n),o=i&&i.levels,a=i&&i.direction;typeof o!="number"&&typeof a!="string"?oce(t,!0,s):a==="up"?c8(t,!0,o||1,s):Hg(t,!0,o||1,s)}}class Dce extends Wi{constructor(){super({id:"editor.toggleFold",label:p("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2090),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);rce(t,1,i)}}class Ece extends Wi{constructor(){super({id:"editor.foldRecursively",label:p("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2135),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);Hg(t,!0,Number.MAX_VALUE,i)}}class Ace extends Wi{constructor(){super({id:"editor.foldAllBlockComments",label:p("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2133),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())DN(t,ko.Comment.value,!0);else{const o=n.getModel();if(!o)return;const a=s.getLanguageConfiguration(o.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Zs(a.blockCommentStartToken));TN(t,l,!0)}}}}class Ice extends Wi{constructor(){super({id:"editor.foldAllMarkerRegions",label:p("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2077),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())DN(t,ko.Region.value,!0);else{const o=n.getModel();if(!o)return;const a=s.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);TN(t,l,!0)}}}}class Nce extends Wi{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:p("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2078),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())DN(t,ko.Region.value,!1);else{const o=n.getModel();if(!o)return;const a=s.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);TN(t,l,!1)}}}}class Mce extends Wi{constructor(){super({id:"editor.foldAllExcept",label:p("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2131),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);d8(t,!0,i)}}class Rce extends Wi{constructor(){super({id:"editor.unfoldAllExcept",label:p("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2129),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);d8(t,!1,i)}}class Oce extends Wi{constructor(){super({id:"editor.foldAll",label:p("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2069),weight:100}})}invoke(e,t,n){Hg(t,!0)}}class Pce extends Wi{constructor(){super({id:"editor.unfoldAll",label:p("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2088),weight:100}})}invoke(e,t,n){Hg(t,!1)}}class Mu extends Wi{getFoldingLevel(){return parseInt(this.id.substr(Mu.ID_PREFIX.length))}invoke(e,t,n){ace(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}Mu.ID_PREFIX="editor.foldLevel";Mu.ID=r=>Mu.ID_PREFIX+r;class Fce extends Wi{constructor(){super({id:"editor.gotoParentFold",label:p("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=lce(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class Bce extends Wi{constructor(){super({id:"editor.gotoPreviousFold",label:p("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=cce(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class Wce extends Wi{constructor(){super({id:"editor.gotoNextFold",label:p("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=dce(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class Vce extends Wi{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:p("createManualFoldRange.label","Create Manual Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2130),weight:100}})}invoke(e,t,n){var i;const s=[],o=n.getSelections();if(o){for(const a of o){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=Vs.sanitizeAndMerge(t.regions,s,(i=n.getModel())===null||i===void 0?void 0:i.getLineCount());t.updatePost(Vs.fromFoldRanges(a))}}}}class Hce extends Wi{constructor(){super({id:"editor.removeManualFoldingRanges",label:p("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2132),weight:100}})}invoke(e,t,n){const i=n.getSelections();if(i){const s=[];for(const o of i){const{startLineNumber:a,endLineNumber:l}=o;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}}ct(hg.ID,hg);ie(kce);ie(Lce);ie(Tce);ie(Ece);ie(Oce);ie(Pce);ie(Ace);ie(Ice);ie(Nce);ie(Mce);ie(Rce);ie(Dce);ie(Fce);ie(Bce);ie(Wce);ie(Vce);ie(Hce);for(let r=1;r<=7;r++)k5(new Mu({id:Mu.ID(r),label:p("foldLevelAction.label","Fold Level {0}",r),alias:`Fold Level ${r}`,precondition:Ai,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2048|21+r),weight:100}}));const Uce=I("editor.foldBackground",{light:Ce(ml,.3),dark:Ce(ml,.3),hcDark:null,hcLight:null},p("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),jce=I("editorGutter.foldingControlForeground",{dark:Xb,light:Xb,hcDark:Xb,hcLight:Xb},p("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Vt((r,e)=>{const t=r.getColor(Uce);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=r.getColor(jce);n&&e.addRule(`
		.monaco-editor .cldr${mt.asCSSSelector(Ab)},
		.monaco-editor .cldr${mt.asCSSSelector(gw)},
		.monaco-editor .cldr${mt.asCSSSelector(EN)},
		.monaco-editor .cldr${mt.asCSSSelector(u8)} {
			color: ${n} !important;
		}
		`)});class $ce extends me{constructor(){super({id:"editor.action.fontZoomIn",label:p("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Nl.setZoomLevel(Nl.getZoomLevel()+1)}}class zce extends me{constructor(){super({id:"editor.action.fontZoomOut",label:p("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Nl.setZoomLevel(Nl.getZoomLevel()-1)}}class Kce extends me{constructor(){super({id:"editor.action.fontZoomReset",label:p("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Nl.setZoomLevel(0)}}ie($ce);ie(zce);ie(Kce);var g8=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},AN=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let M_=class{constructor(e,t,n){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._disposables=new Q,this._sessionDisposables=new Q,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(i=>{i.hasChanged(51)&&this._update()}))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(51)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const n=new Uh;for(const i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(i=>{const s=i.charCodeAt(i.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=new fi,s=this._editor.onDidChangeModelContent(o=>{if(o.isFlush){i.cancel(),s.dispose();return}for(let a=0,l=o.changes.length;a<l;a++)if(o.changes[a].range.endLineNumber<=n.lineNumber){i.cancel(),s.dispose();return}});w7(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),i.token).then(o=>{i.token.isCancellationRequested||Si(o)&&(rg.execute(this._editor,o,!0),eN(o))}).finally(()=>{s.dispose()})}};M_.ID="editor.contrib.autoFormat";M_=g8([yy(1,be),yy(2,Tr)],M_);let R_=class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new Q,this._callOnModel=new Q,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(50)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(y7,this.editor,e,2,Ju.None,qe.None).catch(We))}};R_.ID="editor.contrib.formatOnPaste";R_=g8([yy(1,be),yy(2,Ve)],R_);class Gce extends me{constructor(){super({id:"editor.action.formatDocument",label:p("formatDocument.label","Format Document"),alias:"Format Document",precondition:le.and(A.notInCompositeEditor,A.writable,A.hasDocumentFormattingProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return AN(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Ve);yield e.get(id).showWhile(n.invokeFunction(yse,t,1,Ju.None,qe.None),250)}})}}class qce extends me{constructor(){super({id:"editor.action.formatSelection",label:p("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:le.and(A.writable,A.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2084),weight:100},contextMenuOpts:{when:A.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return AN(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Ve),i=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new x(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(id).showWhile(n.invokeFunction(y7,t,s,1,Ju.None,qe.None),250)})}}ct(M_.ID,M_);ct(R_.ID,R_);ie(Gce);ie(qce);rt.registerCommand("editor.action.format",r=>AN(void 0,void 0,void 0,function*(){const e=r.get(bt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=r.get(Sn);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var Zce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Yce=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class af{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let s=0;t.children.get(i)!==void 0;s++)i=`${n}_${s}`;return i}static empty(e){return e.children.size===0}}class wy extends af{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class Xce extends af{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}class rl extends af{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t,n){const i=new fi(n),s=new rl(t.uri),o=e.ordered(t),a=o.map((c,d)=>{var u;const h=af.findId(`provider_${d}`,s),f=new Xce(h,s,(u=c.displayName)!==null&&u!==void 0?u:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,i.token)).then(g=>{for(const _ of g||[])rl._makeOutlineElement(_,f);return f},g=>(Jn(g),f)).then(g=>{af.empty(g)?g.remove():s._groups.set(h,g)})}),l=e.onDidChange(()=>{const c=e.ordered(t);qs(c,o)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?rl.create(e,t,n):s._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const n=af.findId(e,t),i=new wy(n,t,e);if(e.children)for(const s of e.children)rl._makeOutlineElement(s,i);t.children.set(i.id,i)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=Ye.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof wy?e.push(t.symbol):e.push(...Ye.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>x.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return rl._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>B.compare(x.getStartPosition(n.range),x.getStartPosition(i.range))||B.compare(x.getEndPosition(i.range),x.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&rl._flattenDocumentSymbols(e,i.children,i.name)}}const pw=tt("IOutlineModelService");let BD=class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new Q,this._cache=new nd(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(i=>{this._cache.delete(i.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return Yce(this,void 0,void 0,function*(){const n=this._languageFeaturesService.documentSymbolProvider,i=n.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!qs(s.provider,i)){const a=new fi;s={versionId:e.getVersionId(),provider:i,promiseCnt:0,source:a,promise:rl.create(n,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(c=>{s.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const o=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return yield s.promise}finally{o.dispose()}})}};BD=Zce([Hx(0,be),Hx(1,Er),Hx(2,en)],BD);lt(pw,BD,!0);var Qce=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};rt.registerCommand("_executeDocumentSymbolProvider",function(r,...e){return Qce(this,void 0,void 0,function*(){const[t]=e;Lt(Se.isUri(t));const n=r.get(pw),s=yield r.get(ps).createModelReference(t);try{return(yield n.getOrCreate(s.object.textEditorModel,qe.None)).getTopLevelSymbols()}finally{s.dispose()}})});const Sy="editor.action.inlineSuggest.commit";function Jce(r,e){return{object:r,dispose:()=>e?.dispose()}}function ede(r,e){const t=new tde(r),n=e.map(i=>{const s=x.lift(i.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:i.text}});n.sort((i,s)=>s.startOffset-i.startOffset);for(const i of n)r=r.substring(0,i.startOffset)+i.text+r.substring(i.endOffset);return r}class tde{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}const nde=[];function ide(){return nde}class p8{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return ede(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}}class WD{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class m8{constructor(e,t,n,i,s=0){this.lineNumber=e,this.columnStart=t,this.length=n,this.newLines=i,this.additionalReservedLineCount=s,this.parts=[new WD(this.columnStart+this.length,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}}class _8 extends j{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(108)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function xy(r,e){if(!e)return e;const t=r.getValueInRange(e.range),n=lu(t,e.insertText),i=r.getOffsetAt(e.range.getStartPosition())+n,s=r.getPositionAt(i),o=t.substr(n),a=Im(o,e.insertText),l=r.getPositionAt(Math.max(i,r.getOffsetAt(e.range.getEndPosition())-a));return{range:x.fromPositions(s,l),insertText:e.insertText.substr(n,e.insertText.length-n-a),snippetInfo:e.snippetInfo,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}function sde(r,e){return r===e?!0:!r||!e?!1:r.range.equalsRange(e.range)&&r.insertText===e.insertText&&r.command===e.command}function b8(r,e,t,n,i=0){if(r.range.startLineNumber!==r.range.endLineNumber)return;const s=e.getLineContent(r.range.startLineNumber),o=Dt(s).length;if(r.range.startColumn-1<=o){const f=Dt(r.insertText).length,g=s.substring(r.range.startColumn-1,o),_=x.fromPositions(r.range.getStartPosition().delta(0,g.length),r.range.getEndPosition()),b=r.insertText.startsWith(g)?r.insertText.substring(g.length):r.insertText.substring(f);r={range:_,insertText:b,command:r.command,snippetInfo:void 0,filterText:r.filterText,additionalTextEdits:r.additionalTextEdits}}const l=e.getValueInRange(r.range),c=rde(l,r.insertText);if(!c)return;const d=r.range.startLineNumber,u=new Array;if(t==="prefix"){const f=c.filter(g=>g.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const h=r.insertText.length-i;for(const f of c){const g=r.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===r.range.startLineNumber&&g<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const _=f.modifiedStart+f.modifiedLength,b=Math.max(f.modifiedStart,Math.min(_,h)),v=r.insertText.substring(f.modifiedStart,b),C=r.insertText.substring(b,Math.max(f.modifiedStart,_));if(v.length>0){const y=va(v);u.push(new WD(g,y,!1))}if(C.length>0){const y=va(C);u.push(new WD(g,y,!0))}}return new p8(d,u,0)}let jo;function rde(r,e){if(jo?.originalValue===r&&jo?.newValue===e)return jo?.changes;{let t=HP(r,e,!0);if(t){const n=VP(t);if(n>0){const i=HP(r,e,!1);i&&VP(i)<n&&(t=i)}}return jo={originalValue:r,newValue:e,changes:t},t}}function VP(r){let e=0;for(const t of r)e+=Math.max(t.originalLength-t.modifiedLength,0);return e}function HP(r,e,t){if(r.length>5e3||e.length>5e3)return;function n(c){let d=0;for(let u=0,h=c.length;u<h;u++){const f=c.charCodeAt(u);f>d&&(d=f)}return d}const i=Math.max(n(r),n(e));function s(c){if(c<0)throw new Error("unexpected");return i+c+1}function o(c){let d=0,u=0;const h=new Int32Array(c.length);for(let f=0,g=c.length;f<g;f++)if(t&&c[f]==="("){const _=u*100+d;h[f]=s(2*_),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const _=u*100+d;h[f]=s(2*_+1),d===0&&u++}else h[f]=c.charCodeAt(f);return h}const a=o(r),l=o(e);return new ta({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}function ode(r,e){const t=new f3,n=new p3(t,c=>e.getLanguageConfiguration(c)),i=new g3(new ade([r]),n),s=FL(i,[],void 0,!0);let o="";const a=r.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=ln(d,c.openingBracket.length),c.child&&(l(c.child,d),d=ln(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=ln(d,c.closingBracket.length);else{const h=n.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);o+=h}else if(c.kind!==3){if(c.kind===0||c.kind===1)o+=a.substring(d,ln(d,c.length));else if(c.kind===4)for(const u of c.children)l(u,d),d=ln(d,u.length)}}return l(s,jr),o}class ade{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}var lde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bp=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},ol=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let VD=class extends j{constructor(e,t,n,i,s,o,a){super(),this.editor=e,this.cache=t,this.commandService=n,this.languageConfigurationService=i,this.languageFeaturesService=s,this.debounceService=o,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Fi),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(n.onDidExecuteCommand(l=>{new Set([vf.Tab.id,vf.DeleteLeft.id,vf.DeleteRight.id,Sy,"acceptSelectedSuggestion"]).has(l.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(l=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(l=>{(l.reason===3||this.session&&!this.session.isValid)&&this.hide()})),this._register(Ke(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{a.getValue("editor.inlineSuggest.hideOnBlur")||this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(57).enabled&&(this.session&&this.session.isValid||this.trigger(lr.Automatic))}trigger(e){if(this.completionSession.value){e===lr.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new cde(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return ol(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};VD=lde([bp(2,Sn),bp(3,_n),bp(4,be),bp(5,Er),bp(6,ft)],VD);class cde extends _8{constructor(e,t,n,i,s,o,a,l,c){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=i,this.cache=s,this.initialTriggerKind=o,this.languageConfigurationService=a,this.registry=l,this.debounce=c,this.minReservedLineCount=0,this.updateOperation=this._register(new Fi),this.updateSoon=this._register(new Tt(()=>{const u=this.initialTriggerKind;return this.initialTriggerKind=lr.Automatic,this.update(u)},50)),this.filteredCompletions=[],this.currentlySelectedCompletionId=void 0;let d;this._register(this.onDidChange(()=>{var u;const h=this.currentCompletion;if(h&&h.sourceInlineCompletion!==d){d=h.sourceInlineCompletion;const f=h.sourceProvider;(u=f.handleItemDidShow)===null||u===void 0||u.call(f,h.sourceInlineCompletions,d)}})),this._register(Ke(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(u=>{var h;u.reason!==3&&((h=this.cache.value)===null||h===void 0||h.updateRanges(),this.cache.value&&(this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire()))})),this._register(this.editor.onDidChangeModelContent(u=>{var h;(h=this.cache.value)===null||h===void 0||h.updateRanges(),this.updateFilteredInlineCompletions(),this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}updateFilteredInlineCompletions(){if(!this.cache.value){this.filteredCompletions=[];return}const e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter(n=>{const i=e.getValueInRange(n.synchronizedRange).toLowerCase(),s=n.inlineCompletion.filterText.toLowerCase(),o=e.getLineIndentColumn(n.synchronizedRange.startLineNumber),a=Math.max(0,t.column-n.synchronizedRange.startColumn);let l=s.substring(0,a),c=s.substring(a),d=i.substring(0,a),u=i.substring(a);return n.synchronizedRange.startColumn<=o&&(d=d.trimStart(),d.length===0&&(u=u.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(d)&&F3(u,c)})}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.filteredCompletions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){return ol(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){return ol(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+e.length-1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return ol(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===lr.Explicit?yield this.updateOperation.value.promise:yield this.update(lr.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==lr.Explicit&&(yield this.update(lr.Explicit))})}hasMultipleInlineCompletions(){var e;return ol(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion;if(!e)return;const t=this.editor.getPosition();if(e.range.getEndPosition().isBefore(t))return;const n=this.editor.getOptions().get(57).mode,i=b8(e,this.editor.getModel(),n,t);return i?i.isEmpty()?void 0:i:new m8(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split(`
`),0)}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return ol(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=new Date,i=Xn(o=>ol(this,void 0,void 0,function*(){let a;try{a=yield C8(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},o,this.languageConfigurationService);const l=new Date;this.debounce.update(this.editor.getModel(),l.getTime()-n.getTime())}catch(l){We(l);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire())})),s=new v8(i,e);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const t=this.currentCompletion;t&&this.commit(t)}commit(e){var t;const n=this.cache.clearAndLeak();e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[Gt.replaceMove(e.range,""),...e.additionalTextEdits]),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),(t=Qn.get(this.editor))===null||t===void 0||t.insert(e.snippetInfo.snippet)):this.editor.executeEdits("inlineSuggestion.accept",[Gt.replaceMove(e.range,e.insertText),...e.additionalTextEdits]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{n?.dispose()}).then(void 0,Jn):n?.dispose(),this.onDidChangeEmitter.fire()}get commands(){var e;return[...new Set(((e=this.cache.value)===null||e===void 0?void 0:e.completions.map(n=>n.inlineCompletion.sourceInlineCompletions))||[])].flatMap(n=>n.commands||[])}}class v8{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class dde extends j{constructor(e,t,n,i){super(),this.editor=t,this.onChange=n,this.triggerKind=i,this.isDisposing=!1;const s=t.changeDecorations(o=>o.deltaDecorations([],e.items.map(a=>({range:a.range,options:{description:"inline-completion-tracking-range"}}))));this._register(Ke(()=>{this.isDisposing=!0,t.removeDecorations(s)})),this.completions=e.items.map((o,a)=>new ude(o,s[a])),this._register(t.onDidChangeModelContent(()=>{this.updateRanges()})),this._register(e)}updateRanges(){if(this.isDisposing)return;let e=!1;const t=this.editor.getModel();for(const n of this.completions){const i=t.getDecorationRange(n.decorationId);if(!i){We(new Error("Decoration has no range"));continue}n.synchronizedRange.equalsRange(i)||(e=!0,n.synchronizedRange=i)}e&&this.onChange()}}class ude{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}}function C8(r,e,t,n,i=qe.None,s){return ol(this,void 0,void 0,function*(){const o=hde(e,t),a=r.all(t),l=yield Promise.all(a.map(d=>ol(this,void 0,void 0,function*(){const u=yield Promise.resolve(d.provideInlineCompletions(t,e,n,i)).catch(Jn);return{completions:u,provider:d,dispose:()=>{u&&d.freeInlineCompletions(u)}}}))),c=new Map;for(const d of l){const u=d.completions;if(u)for(const h of u.items){let f=h.range?x.lift(h.range):o;if(f.startLineNumber!==f.endLineNumber)continue;let g,_;if(typeof h.insertText=="string"){if(g=h.insertText,s&&h.completeBracketPairs){g=fde(g,f.getStartPosition(),t,s);const v=g.length-h.insertText.length;v!==0&&(f=new x(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn+v))}_=void 0}else"snippet"in h.insertText?(g=new Gc().parse(h.insertText.snippet).toString(),_={snippet:h.insertText.snippet,range:f}):Ry(h.insertText);const b={insertText:g,snippetInfo:_,range:f,command:h.command,sourceProvider:d.provider,sourceInlineCompletions:u,sourceInlineCompletion:h,filterText:h.filterText||g,additionalTextEdits:h.additionalTextEdits||ide()};c.set(JSON.stringify({insertText:g,range:h.range}),b)}}return{items:[...c.values()],dispose:()=>{for(const d of l)d.dispose()}}})}function hde(r,e){const t=e.getWordAtPosition(r),n=e.getLineMaxColumn(r.lineNumber);return t?new x(r.lineNumber,t.startColumn,r.lineNumber,n):x.fromPositions(r,r.with(void 0,n))}function fde(r,e,t,n){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+r,o=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),r),a=o?.sliceAndInflate(e.column-1,s.length,0);return a?ode(a,n):r}var gde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class IN{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;const i=n[0].score[0];for(let s=0;s<n.length;s++){const{score:o,completion:a}=n[s];if(o[0]!==i)break;if(a.preselect)return s}return 0}}class y8 extends IN{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class pde extends IN{constructor(){super("recentlyUsed"),this._cache=new nd(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);const s=n[0].score[0];let o=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===s;c++){const d=`${e.getLanguageId()}/${n[c].textLabel}`,u=this._cache.peek(d);if(u&&u.touch>l&&u.type===n[c].completion.kind&&u.insertText===n[c].completion.insertText&&(l=u.touch,a=c),n[c].completion.preselect&&o===-1)return o=c}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:Dm.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}}class mde extends IN{constructor(){super("recentlyUsedByPrefix"),this._trie=Sf.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${i}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){const{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);const s=`${e.getLanguageId()}/${i}`;let o=this._trie.get(s);if(o||(o=this._trie.findSubstr(s)),o)for(let a=0;a<n.length;a++){const{kind:l,insertText:c}=n[a].completion;if(l===o.type&&c===o.insertText)return a}return super.select(e,t,n)}toJSON(){const e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Dm.fromString(n.type),this._trie.set(t,n)}}}let O_=class A0{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Q,this._persistSoon=new Tt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===ry.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const s=A0._strategyCtors.get(i)||y8;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${A0._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${A0._storagePrefix}/${this._strategy.name}`,n,t,1)}}};O_._strategyCtors=new Map([["recentlyUsedByPrefix",mde],["recentlyUsed",pde],["first",y8]]);O_._storagePrefix="suggest/memories";O_=gde([UP(0,Qr),UP(1,ft)],O_);const mw=tt("ISuggestMemories");lt(mw,O_,!0);var _de=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bde=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let P_=class w8{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=w8.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(113)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(113)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),s=n.getWordAtPosition(i.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===i.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};P_.AtEnd=new ge("atEndOfWord",!1);P_=_de([bde(1,Re)],P_);var vde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cde=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Ru=class I0{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=I0.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(I0._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(;i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits););return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=I0._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Ru.OtherSuggestions=new ge("hasOtherSuggestions",!1);Ru=vde([Cde(1,Re)],Ru);class yde{constructor(e,t,n){this._disposables=new Q,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(i=>{if(this._active&&!t.isFrozen()){const s=i.charCodeAt(i.length-1);this._active.acceptCharacters.has(s)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!Si(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Uh;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var wde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Ws{provideSelectionRanges(e,t){return wde(this,void 0,void 0,function*(){const n=[];for(const i of t){const s=[];n.push(s);const o=new Map;yield new Promise(a=>Ws._bracketsRightYield(a,0,e,i,o)),yield new Promise(a=>Ws._bracketsLeftYield(a,0,e,i,o,s))}return n})}static _bracketsRightYield(e,t,n,i,s){const o=new Map,a=Date.now();for(;;){if(t>=Ws._maxRounds){e();break}if(!i){e();break}const l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>Ws._maxDuration){setTimeout(()=>Ws._bracketsRightYield(e,t+1,n,i,s));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,u=o.has(d)?o.get(d):0;o.set(d,u+1)}else{const d=l.bracketInfo.getClosedBrackets()[0].bracketText;let u=o.has(d)?o.get(d):0;if(u-=1,o.set(d,Math.max(0,u)),u<0){let h=s.get(d);h||(h=new qi,s.set(d,h)),h.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,s,o){const a=new Map,l=Date.now();for(;;){if(t>=Ws._maxRounds&&s.size===0){e();break}if(!i){e();break}const c=n.bracketPairs.findPrevBracket(i);if(!c){e();break}if(Date.now()-l>Ws._maxDuration){setTimeout(()=>Ws._bracketsLeftYield(e,t+1,n,i,s,o));break}if(c.bracketInfo.isOpeningBracket){const u=c.bracketInfo.bracketText;let h=a.has(u)?a.get(u):0;if(h-=1,a.set(u,Math.max(0,h)),h<0){const f=s.get(u);if(f){const g=f.shift();f.size===0&&s.delete(u);const _=x.fromPositions(c.range.getEndPosition(),g.getStartPosition()),b=x.fromPositions(c.range.getStartPosition(),g.getEndPosition());o.push({range:_}),o.push({range:b}),Ws._addBracketLeading(n,b,o)}}}else{const u=c.bracketInfo.getClosedBrackets()[0].bracketText,h=a.has(u)?a.get(u):0;a.set(u,h+1)}i=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(i);s!==0&&s!==t.startColumn&&(n.push({range:x.fromPositions(new B(i,s),t.getEndPosition())}),n.push({range:x.fromPositions(new B(i,1),t.getEndPosition())}));const o=i-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:x.fromPositions(new B(o,a),t.getEndPosition())}),n.push({range:x.fromPositions(new B(o,1),t.getEndPosition())}))}}}Ws._maxDuration=30;Ws._maxRounds=2;var Sde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class co{static create(e,t){return Sde(this,void 0,void 0,function*(){if(!t.getOption(108).localityBonus||!t.hasModel())return co.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return co.None;const[s]=yield new Ws().provideSelectionRanges(n,[i]);if(s.length===0)return co.None;const o=yield e.computeWordRanges(n.uri,s[0].range);if(!o)return co.None;const a=n.getWordUntilPosition(i);return delete o[a.word],new class extends co{distance(l,c){if(!i.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,u=o[d];if($F(u))return 2<<20;const h=IE(u,x.fromPositions(l),x.compareRangesUsingStarts),f=h>=0?u[h]:u[Math.max(0,~h-1)];let g=s.length;for(const _ of s){if(!x.containsRange(_.range,f))break;g-=1}return g}}})}}co.None=new class extends co{distance(){return 0}};let jP=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class lc{constructor(e,t,n,i,s,o,a=gI.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=lc._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=s,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,o==="top"?this._snippetCompareFn=lc._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=lc._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(const[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){const t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",s="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?Xf:lQ;for(let c=0;c<o.length;c++){const d=o[c];if(d.isInvalid)continue;this._providerInfo.set(d.provider,Boolean(d.container.incomplete));const u=d.position.column-d.editStart.column,h=u+n-(d.position.column-this._column);if(i.length!==h&&(i=h===0?"":t.slice(-h),s=i.toLowerCase()),d.word=i,h===0)d.score=So.Default;else{let f=0;for(;f<u;){const g=i.charCodeAt(f);if(g===32||g===9)f+=1;else break}if(f>=h)d.score=So.Default;else if(typeof d.completion.filterText=="string"){const g=l(i,s,f,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!g)continue;eL(d.completion.filterText,d.textLabel)===0?d.score=g:(d.score=sQ(i,s,f,d.textLabel,d.labelLow,0),d.score[0]=g[0])}else{const g=l(i,s,f,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!g)continue;d.score=g}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?ok(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return lc._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return lc._compareCompletionItems(e,t)}}var xde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bd=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},kde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class kh{constructor(e,t,n,i,s){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=i,this.noSelect=s}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column||!isNaN(Number(i.word)))}}function Lde(r,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?Boolean(n):!1}function Tde(r,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?Boolean(n):!1}let HD=class S8{constructor(e,t,n,i,s,o,a,l){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=s,this._contextKeyService=o,this._configurationService=a,this._languageFeaturesService=l,this._toDispose=new Q,this._triggerCharacterListener=new Q,this._triggerQuickSuggest=new Js,this._state=0,this._completionDisposables=new Q,this._onDidCancel=new R,this._onDidTrigger=new R,this._onDidSuggest=new R,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new ue(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{c||this._onCursorChange(d)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{c||this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){ut(this._triggerCharacterListener),ut([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(83)||!this._editor.hasModel()||!this._editor.getOption(111))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let s=e.get(i);s||(s=new Set,s.add(bae()),e.set(i,s)),s.add(n)}const t=n=>{if(!Tde(this._editor,this._contextKeyService,this._configurationService)||kh.shouldAutoTrigger(this._editor))return;if(!n){const o=this._editor.getPosition();n=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let i="";cu(n.charCodeAt(n.length-1))?Vn(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);const s=e.get(i);if(s){const o=this._completionModel?{items:this._completionModel.adopt(s),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,noSelect:!1,triggerCharacter:i},Boolean(this._completionModel),s,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1,noSelect:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;of.isAllOff(this._editor.getOption(81))||this._editor.getOption(108).snippetsPreventQuickSuggestions&&(!((e=Qn.get(this._editor))===null||e===void 0)&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!kh.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=this._editor.getOption(81);if(!of.isAllOff(i)){if(!of.isAllOn(i)){t.tokenization.tokenizeIfCheap(n.lineNumber);const s=t.tokenization.getLineTokens(n.lineNumber),o=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(of.valueFor(i,o)!=="on")return}Lde(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0,shy:!1,noSelect:!1})}},this._editor.getOption(82)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new kh(e,t,this._state===2,!1,!1);this._onNewContext(n)})}trigger(e,t=!1,n,i,s){var o;if(!this._editor.hasModel())return;const a=this._editor.getModel(),l=e.auto,c=new kh(a,this._editor.getPosition(),l,e.shy,e.noSelect);this.cancel(t),this._state=l?2:1,this._onDidTrigger.fire({auto:l,shy:e.shy,position:this._editor.getPosition()}),this._context=c;let d={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new fi;const u=this._editor.getOption(103);let h=1;switch(u){case"top":h=0;break;case"bottom":h=2;break}const{itemKind:f,showDeprecated:g}=S8._createSuggestFilter(this._editor),_=new A_(h,s?new Set:f,n,g),b=co.create(this._editorWorkerService,this._editor),v=vN(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),_,d,this._requestToken.token);Promise.all([v,b]).then(([C,y])=>kde(this,void 0,void 0,function*(){var w;if((w=this._requestToken)===null||w===void 0||w.dispose(),!this._editor.hasModel())return;let L=i?.clipboardText;if(!L&&C.needsClipboard&&(L=yield this._clipboardService.readText()),this._state===0)return;const T=this._editor.getModel();let S=C.items;if(i){const D=VB(h);S=S.concat(i.items).sort(D)}const k=new kh(T,this._editor.getPosition(),l,e.shy,e.noSelect);this._completionModel=new lc(S,this._context.column,{leadingLineContent:k.leadingLineContent,characterCountDelta:k.column-this._context.column},y,this._editor.getOption(108),this._editor.getOption(103),void 0,L),this._completionDisposables.add(C.disposable),this._onNewContext(k),this._reportDurationsTelemetry(C.durations)})).catch(We)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(103)==="none"&&t.add(27);const i=e.getOption(108);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Dt(e.leadingLineContent)!==Dt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(const i of this._completionModel.allProvider)t.delete(i);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,noSelect:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{const t=this._completionModel.lineContext;let n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(kh.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,noSelect:this._context.noSelect,isFrozen:n})}}}}};HD=xde([bd(1,Tr),bd(2,Hl),bd(3,No),bd(4,Zr),bd(5,Re),bd(6,ft),bd(7,be)],HD);class _w{constructor(e,t){this._disposables=new Q,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),i=n.length;let s=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){s=!0;break}if(!s)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(o.getValueLengthInRange(l)>_w._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}_w._maxSelectionLength=51200;var Dde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ux=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class NN extends lg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=p("ddd","{0} ({1})",this._action.label,NN.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}let UD=class{constructor(e,t,n,i){this._menuService=n,this._contextKeyService=i,this._menuDisposables=new Q,this.element=q(e,ee(".suggest-status-bar"));const s=o=>o instanceof Fc?t.createInstance(NN,o,void 0):void 0;this._leftActions=new Sa(this.element,{actionViewItemProvider:s}),this._rightActions=new Sa(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(Tc,this._contextKeyService),t=()=>{const n=[],i=[];for(const[s,o]of e.getActions())s==="left"?n.push(...o):i.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};UD=Dde([Ux(1,Ve),Ux(2,qu),Ux(3,Re)],UD);const Ede=I("symbolIcon.arrayForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ade=I("symbolIcon.booleanForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ide=I("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Nde=I("symbolIcon.colorForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Mde=I("symbolIcon.constantForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Rde=I("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ode=I("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pde=I("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Fde=I("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bde=I("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Wde=I("symbolIcon.fileForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vde=I("symbolIcon.folderForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Hde=I("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ude=I("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jde=I("symbolIcon.keyForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$de=I("symbolIcon.keywordForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zde=I("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kde=I("symbolIcon.moduleForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gde=I("symbolIcon.namespaceForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qde=I("symbolIcon.nullForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zde=I("symbolIcon.numberForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Yde=I("symbolIcon.objectForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xde=I("symbolIcon.operatorForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qde=I("symbolIcon.packageForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jde=I("symbolIcon.propertyForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),eue=I("symbolIcon.referenceForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tue=I("symbolIcon.snippetForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nue=I("symbolIcon.stringForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),iue=I("symbolIcon.structForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),sue=I("symbolIcon.textForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rue=I("symbolIcon.typeParameterForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oue=I("symbolIcon.unitForeground",{dark:J,light:J,hcDark:J,hcLight:J},p("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),aue=I("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));Vt((r,e)=>{const t=r.getColor(Ede);t&&e.addRule(`${m.symbolArray.cssSelector} { color: ${t}; }`);const n=r.getColor(Ade);n&&e.addRule(`${m.symbolBoolean.cssSelector} { color: ${n}; }`);const i=r.getColor(Ide);i&&e.addRule(`${m.symbolClass.cssSelector} { color: ${i}; }`);const s=r.getColor(zde);s&&e.addRule(`${m.symbolMethod.cssSelector} { color: ${s}; }`);const o=r.getColor(Nde);o&&e.addRule(`${m.symbolColor.cssSelector} { color: ${o}; }`);const a=r.getColor(Mde);a&&e.addRule(`${m.symbolConstant.cssSelector} { color: ${a}; }`);const l=r.getColor(Rde);l&&e.addRule(`${m.symbolConstructor.cssSelector} { color: ${l}; }`);const c=r.getColor(Ode);c&&e.addRule(`
			${m.symbolValue.cssSelector},${m.symbolEnum.cssSelector} { color: ${c}; }`);const d=r.getColor(Pde);d&&e.addRule(`${m.symbolEnumMember.cssSelector} { color: ${d}; }`);const u=r.getColor(Fde);u&&e.addRule(`${m.symbolEvent.cssSelector} { color: ${u}; }`);const h=r.getColor(Bde);h&&e.addRule(`${m.symbolField.cssSelector} { color: ${h}; }`);const f=r.getColor(Wde);f&&e.addRule(`${m.symbolFile.cssSelector} { color: ${f}; }`);const g=r.getColor(Vde);g&&e.addRule(`${m.symbolFolder.cssSelector} { color: ${g}; }`);const _=r.getColor(Hde);_&&e.addRule(`${m.symbolFunction.cssSelector} { color: ${_}; }`);const b=r.getColor(Ude);b&&e.addRule(`${m.symbolInterface.cssSelector} { color: ${b}; }`);const v=r.getColor(jde);v&&e.addRule(`${m.symbolKey.cssSelector} { color: ${v}; }`);const C=r.getColor($de);C&&e.addRule(`${m.symbolKeyword.cssSelector} { color: ${C}; }`);const y=r.getColor(Kde);y&&e.addRule(`${m.symbolModule.cssSelector} { color: ${y}; }`);const w=r.getColor(Gde);w&&e.addRule(`${m.symbolNamespace.cssSelector} { color: ${w}; }`);const L=r.getColor(qde);L&&e.addRule(`${m.symbolNull.cssSelector} { color: ${L}; }`);const T=r.getColor(Zde);T&&e.addRule(`${m.symbolNumber.cssSelector} { color: ${T}; }`);const S=r.getColor(Yde);S&&e.addRule(`${m.symbolObject.cssSelector} { color: ${S}; }`);const k=r.getColor(Xde);k&&e.addRule(`${m.symbolOperator.cssSelector} { color: ${k}; }`);const D=r.getColor(Qde);D&&e.addRule(`${m.symbolPackage.cssSelector} { color: ${D}; }`);const O=r.getColor(Jde);O&&e.addRule(`${m.symbolProperty.cssSelector} { color: ${O}; }`);const F=r.getColor(eue);F&&e.addRule(`${m.symbolReference.cssSelector} { color: ${F}; }`);const U=r.getColor(tue);U&&e.addRule(`${m.symbolSnippet.cssSelector} { color: ${U}; }`);const K=r.getColor(nue);K&&e.addRule(`${m.symbolString.cssSelector} { color: ${K}; }`);const ae=r.getColor(iue);ae&&e.addRule(`${m.symbolStruct.cssSelector} { color: ${ae}; }`);const fe=r.getColor(sue);fe&&e.addRule(`${m.symbolText.cssSelector} { color: ${fe}; }`);const we=r.getColor(rue);we&&e.addRule(`${m.symbolTypeParameter.cssSelector} { color: ${we}; }`);const xe=r.getColor(oue);xe&&e.addRule(`${m.symbolUnit.cssSelector} { color: ${xe}; }`);const De=r.getColor(aue);De&&e.addRule(`${m.symbolVariable.cssSelector} { color: ${De}; }`)});class x8{constructor(){this._onDidWillResize=new R,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new R,this.onDidResize=this._onDidResize.event,this._sashListener=new Q,this._size=new At(0,0),this._minSize=new At(0,0),this._maxSize=new At(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new bi(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new bi(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new bi(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:RC.North}),this._southSash=new bi(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:RC.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(ve.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(ve.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(ve.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(ve.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:s,width:o}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(i,Math.min(o,t));const a=new At(t,e);At.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var lue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cue=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function MN(r){return!!r&&Boolean(r.completion.documentation||r.completion.detail&&r.completion.detail!==r.completion.label)}let jD=class{constructor(e,t){this._editor=e,this._onDidClose=new R,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new R,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Q,this._renderDisposeable=new Q,this._borderWidth=1,this._size=new At(330,0),this.domNode=ee(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Fl,{editor:e}),this._body=ee(".body"),this._scrollbar=new cb(this._body,{alwaysConsumeMouseWheel:!0}),q(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=q(this._body,ee(".header")),this._close=q(this._header,ee("span"+m.close.cssSelector)),this._close.title=p("details.close","Close"),this._type=q(this._header,ee("p.type")),this._docs=q(this._body,ee("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(46)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(46),n=t.getMassagedFontFamily(),i=e.get(109)||t.fontSize,s=e.get(110)||t.lineHeight,o=t.fontWeight,a=`${i}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/i}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(110)||this._editor.getOption(46).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=p("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:s,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,o=new rs().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!MN(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}…`:s;this._type.textContent=a,this._type.title=a,$s(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Fn(this._type),this._type.title="",ss(this._type),this.domNode.classList.add("no-type");if(Fn(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),Fn(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new At(e,t);At.equals(n,this._size)||(this._size=n,M$(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};jD=lue([cue(1,Ve)],jD);class due{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Q,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new x8,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,s=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=i.width-a.dimension.width,l=!0),a.north&&(s=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+s,left:n.left+o})}a.done&&(n=void 0,i=void 0,s=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const s=Qy(document.body),o=this.widget.getLayoutInfo(),a=new At(220,2*o.lineHeight),l=e.top,c=function(){const y=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),w=-o.borderWidth+e.left+e.width,L=new At(y,s.height-e.top-o.borderHeight-o.verticalPadding),T=L.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:l,left:w,fit:y-t.width,maxSizeTop:L,maxSizeBottom:T,minSize:a.with(Math.min(y,a.width))}}(),d=function(){const y=e.left-o.borderWidth-o.horizontalPadding,w=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),L=new At(y,s.height-e.top-o.borderHeight-o.verticalPadding),T=L.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:l,left:w,fit:y-t.width,maxSizeTop:L,maxSizeBottom:T,minSize:a.with(Math.min(y,a.width))}}(),u=function(){const y=e.left,w=-o.borderWidth+e.top+e.height,L=new At(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:w,left:y,fit:L.height-t.height,maxSizeBottom:L,maxSizeTop:L,minSize:a.with(L.width)}}(),h=[c,d,u],f=(i=h.find(y=>y.fit>=0))!==null&&i!==void 0?i:h.sort((y,w)=>w.fit-y.fit)[0],g=e.top+e.height-o.borderHeight;let _,b=t.height;const v=Math.max(f.maxSizeTop.height,f.maxSizeBottom.height);b>v&&(b=v);let C;n?b<=f.maxSizeTop.height?(_=!0,C=f.maxSizeTop):(_=!1,C=f.maxSizeBottom):b<=f.maxSizeBottom.height?(_=!1,C=f.maxSizeBottom):(_=!0,C=f.maxSizeTop),this._applyTopLeft({left:f.left,top:_?f.top:g-b}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!_,f===c,_,f!==c),this._resizable.minSize=f.minSize,this._resizable.maxSize=C,this._resizable.layout(b,Math.min(C.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Sl;(function(r){r[r.FILE=0]="FILE",r[r.FOLDER=1]="FOLDER",r[r.ROOT_FOLDER=2]="ROOT_FOLDER"})(Sl||(Sl={}));const uue=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function Yv(r,e,t,n){const i=n===Sl.ROOT_FOLDER?["rootfolder-icon"]:n===Sl.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===He.data)s=Wc.parseMetaData(t).get(Wc.META_DATA_LABEL);else{const o=t.path.match(uue);o?(s=Xv(o[2].toLowerCase()),o[1]&&i.push(`${Xv(o[1].toLowerCase())}-name-dir-icon`)):s=Xv(t.authority.toLowerCase())}if(n===Sl.FOLDER)i.push(`${s}-name-folder-icon`);else{if(s){if(i.push(`${s}-name-file-icon`),i.push("name-file-icon"),s.length<=255){const a=s.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const o=hue(r,e,t);o&&i.push(`${Xv(o)}-lang-file-icon`)}}return i}function hue(r,e,t){if(!t)return null;let n=null;if(t.scheme===He.data){const s=Wc.parseMetaData(t).get(Wc.META_DATA_MIME);s&&(n=e.getLanguageIdByMimeType(s))}else{const i=r.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==br?n:e.guessLanguageIdByFilepathOrFirstLine(t)}function Xv(r){return r.replace(/[\11\12\14\15\40]/g,"/")}var fue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},vp;function k8(r){return`suggest-aria-id:${r}`}const gue=Nn("suggest-more-info",m.chevronRight,p("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),pue=new(vp=class N0{extract(e,t){if(e.textLabel.match(N0._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(N0._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=N0._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},vp._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,vp._regexStrict=new RegExp(`^${vp._regexRelaxed.source}$`,"i"),vp);let $D=class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=i,this._onDidToggleDetails=new R,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Q,t.root=e,t.root.classList.add("show-file-icons"),t.icon=q(e,ee(".icon")),t.colorspan=q(t.icon,ee("span.colorspan"));const n=q(e,ee(".contents")),i=q(n,ee(".main"));t.iconContainer=q(i,ee(".icon-label.codicon")),t.left=q(i,ee("span.left")),t.right=q(i,ee("span.right")),t.iconLabel=new ey(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=q(t.left,ee("span.signature-label")),t.qualifierLabel=q(t.left,ee("span.qualifier-label")),t.detailsLabel=q(t.right,ee("span.details-label")),t.readMore=q(t.right,ee("span.readMore"+mt.asCSSSelector(gue))),t.readMore.title=p("readMore","Read More");const s=()=>{const o=this._editor.getOptions(),a=o.get(46),l=a.getMassagedFontFamily(),c=a.fontFeatureSettings,d=o.get(109)||a.fontSize,u=o.get(110)||a.lineHeight,h=a.fontWeight,f=a.letterSpacing,g=`${d}px`,_=`${u}px`,b=`${f}px`;t.root.style.fontSize=g,t.root.style.fontWeight=h,t.root.style.letterSpacing=b,i.style.fontFamily=l,i.style.fontFeatureSettings=c,i.style.lineHeight=_,t.icon.style.height=_,t.icon.style.width=_,t.readMore.style.height=_,t.readMore.style.width=_};return s(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(46)||o.hasChanged(109)||o.hasChanged(110))&&s()})),t}renderElement(e,t,n){const{completion:i}=e;n.root.id=k8(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:D1(e.score)},o=[];if(i.kind===19&&pue.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=Yv(this._modelService,this._languageService,Se.from({scheme:"fake",path:e.textLabel}),Sl.FILE),l=Yv(this._modelService,this._languageService,Se.from({scheme:"fake",path:i.detail}),Sl.FILE);s.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=[Yv(this._modelService,this._languageService,Se.from({scheme:"fake",path:e.textLabel}),Sl.FOLDER),Yv(this._modelService,this._languageService,Se.from({scheme:"fake",path:i.detail}),Sl.FOLDER)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...Gi.asClassNameArray(Dm.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=$x(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=$x(i.label.detail||""),n.detailsLabel.textContent=$x(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(108).showInlineDetails?$s(n.detailsLabel):ss(n.detailsLabel),MN(e)?(n.right.classList.add("can-expand-details"),$s(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),ss(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};$D=fue([jx(1,en),jx(2,Qt),jx(3,It)],$D);function $x(r){return r.replace(/\r\n|\r|\n/g,"")}var mue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Qv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},_ue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};I("editorSuggestWidget.background",{dark:wn,light:wn,hcDark:wn,hcLight:wn},p("editorSuggestWidgetBackground","Background color of the suggest widget."));I("editorSuggestWidget.border",{dark:pl,light:pl,hcDark:pl,hcLight:pl},p("editorSuggestWidgetBorder","Border color of the suggest widget."));const Jv=I("editorSuggestWidget.foreground",{dark:Ks,light:Ks,hcDark:Ks,hcLight:Ks},p("editorSuggestWidgetForeground","Foreground color of the suggest widget."));I("editorSuggestWidget.selectedForeground",{dark:Ip,light:Ip,hcDark:Ip,hcLight:Ip},p("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));I("editorSuggestWidget.selectedIconForeground",{dark:Np,light:Np,hcDark:Np,hcLight:Np},p("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const bue=I("editorSuggestWidget.selectedBackground",{dark:Mp,light:Mp,hcDark:Mp,hcLight:Mp},p("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));I("editorSuggestWidget.highlightForeground",{dark:Hr,light:Hr,hcDark:Hr,hcLight:Hr},p("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));I("editorSuggestWidget.focusHighlightForeground",{dark:Jb,light:Jb,hcDark:Jb,hcLight:Jb},p("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));I("editorSuggestWidgetStatus.foreground",{dark:Ce(Jv,.5),light:Ce(Jv,.5),hcDark:Ce(Jv,.5),hcLight:Ce(Jv,.5)},p("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class vue{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Eu}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(At.is(n))return At.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let F_=class zD{constructor(e,t,n,i,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Js,this._disposables=new Q,this._onDidSelect=new R,this._onDidFocus=new R,this._onDidHide=new R,this._onDidShow=new R,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new R,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new x8,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Cue(this,e),this._persistedSize=new vue(t,e);class o{constructor(f,g,_=!1,b=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=_,this.persistWidth=b}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(h=>{var f,g,_,b;if(this._resize(h.dimension.width,h.dimension.height),a&&(a.persistHeight=a.persistHeight||!!h.north||!!h.south,a.persistWidth=a.persistWidth||!!h.east||!!h.west),!!h.done){if(a){const{itemHeight:v,defaultSize:C}=this.getLayoutInfo(),y=Math.round(v/2);let{width:w,height:L}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-L)<=y)&&(L=(g=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&g!==void 0?g:C.height),(!a.persistWidth||Math.abs(a.currentSize.width-w)<=y)&&(w=(b=(_=a.persistedSize)===null||_===void 0?void 0:_.width)!==null&&b!==void 0?b:C.width),this._persistedSize.store(new At(w,L))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=q(this.element.domNode,ee(".message")),this._listElement=q(this.element.domNode,ee(".tree"));const l=s.createInstance(jD,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new due(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(108).showIcons);c();const d=s.createInstance($D,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ro("SuggestWidget",this._listElement,{getHeight:h=>this.getLayoutInfo().itemHeight,getTemplateId:h=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>p("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:h=>{let f=h.textLabel;if(typeof h.completion.label!="string"){const{detail:v,description:C}=h.completion.label;v&&C?f=p("label.full","{0}{1}, {2}",f,v,C):v?f=p("label.detail","{0}{1}",f,v):C&&(f=p("label.desc","{0}, {1}",f,C))}if(!h.isResolved||!this._isDetailsVisible())return f;const{documentation:g,detail:_}=h.completion,b=hr("{0}{1}",_||"",g?typeof g=="string"?g:g.value:"");return p("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,b)}}}),this._status=s.createInstance(UD,this.element.domNode);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(108).showStatusBar);u(),this._disposables.add(yu(this._list,i,{listInactiveFocusBackground:bue,listInactiveFocusOutline:$t})),this._disposables.add(i.onDidColorThemeChange(h=>this._onThemeChange(h))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onTap(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onDidChangeSelection(h=>this._onListSelection(h))),this._disposables.add(this._list.onDidChangeFocus(h=>this._onListFocus(h))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(h=>{h.hasChanged(108)&&(u(),c())})),this._ctxSuggestWidgetVisible=Xe.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Xe.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Xe.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=Xe.HasFocusedSuggestion.bindTo(n),this._disposables.add(Hn(this._details.widget.domNode,"keydown",h=>{this._onDetailsKeydown.fire(h)})),this._disposables.add(this.editor.onMouseDown(h=>this._onEditorMouseDown(h)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Li(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=Xn(s=>_ue(this,void 0,void 0,function*(){const o=du(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>o.dispose()),l=yield n.resolve(s);return o.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:k8(i)}))}).catch(We)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:ss(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=zD.LOADING_MESSAGE,ss(this._listElement,this._status.element),$s(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=zD.NO_SUGGESTIONS_MESSAGE,ss(this._listElement,this._status.element),$s(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:ss(this._messageElement),$s(this._listElement,this._status.element),this._show();break;case 4:ss(this._messageElement),$s(this._listElement,this._status.element),this._show();break;case 5:ss(this._messageElement),$s(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=du(()=>this._setState(1),t)))}showSuggestions(e,t,n,i){var s,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(s=this._loadingTimeout)===null||s===void 0||s.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),t>=0&&(this._list.reveal(t,0),this._list.setFocus([t])),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(MN(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=Qy(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new At(l,a),this._contentWidget.setPreference(2);else{const c=s.width-o.borderHeight-2*o.horizontalPadding;l>c&&(l=c);const d=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,u=o.statusBarHeight+this._list.contentHeight+o.borderHeight,h=o.itemHeight+o.statusBarHeight,f=wi(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),_=f.top+g.top+g.height,b=Math.min(s.height-_-o.verticalPadding,u),v=f.top+g.top-o.verticalPadding,C=Math.min(v,u);let y=Math.min(Math.max(C,b)+o.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<h&&(a=h),a>y&&(a=y);const w=150;a>b||this._forceRenderingAbove&&v>w?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),y=C):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),y=b),this.element.preferredSize=new At(d,o.defaultSize.height),this.element.maxSize=new At(c,y),this.element.minSize=new At(220,h),this._cappedHeight=a===u?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(46),t=ys(this.editor.getOption(110)||e.lineHeight,8,1e3),n=!this.editor.getOption(108).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,s=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new At(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};F_.LOADING_MESSAGE=p("suggestWidget.loading","Loading...");F_.NO_SUGGESTIONS_MESSAGE=p("suggestWidget.noSuggestions","No suggestions.");F_=mue([Qv(1,Qr),Qv(2,Re),Qv(3,It),Qv(4,Ve)],F_);class Cue{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new At(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var yue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Lh=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class wue{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:x.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let $r=class L8{constructor(e,t,n,i,s,o,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=s,this._logService=o,this._telemetryService=a,this._lineSuffix=new Fi,this._toDispose=new Q,this._selectors=new Sue(u=>u.priority),this._telemetryGate=0,this.editor=e,this.model=s.createInstance(HD,this.editor);const l=Xe.InsertMode.bindTo(i);l.set(e.getOption(108).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(108).insertMode)),this.widget=this._toDispose.add(new Cc(()=>{const u=this._instantiationService.createInstance(F_,this.editor);this._toDispose.add(u),this._toDispose.add(u.onDidSelect(b=>this._insertSuggestion(b,0),this));const h=new yde(this.editor,u,b=>this._insertSuggestion(b,2));this._toDispose.add(h),this._toDispose.add(this.model.onDidSuggest(b=>{b.completionModel.items.length===0&&h.reset()}));const f=Xe.MakesTextEdit.bindTo(this._contextKeyService),g=Xe.HasInsertAndReplaceRange.bindTo(this._contextKeyService),_=Xe.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Ke(()=>{f.reset(),g.reset(),_.reset()})),this._toDispose.add(u.onDidFocus(({item:b})=>{const v=this.editor.getPosition(),C=b.editStart.column,y=v.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!b.completion.additionalTextEdits&&!(b.completion.insertTextRules&4)&&y-C===b.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:v.lineNumber,startColumn:C,endLineNumber:v.lineNumber,endColumn:y})!==b.completion.insertText),f.set(w),g.set(!B.equals(b.editInsertEnd,b.editReplaceEnd)),_.set(Boolean(b.provider.resolveCompletionItem)||Boolean(b.completion.documentation)||b.completion.detail!==b.completion.label)})),this._toDispose.add(u.onDetailsKeyDown(b=>{if(b.toKeybinding().equals(new uu(!0,!1,!1,!1,33))||Je&&b.toKeybinding().equals(new uu(!1,!1,!1,!0,33))){b.stopPropagation();return}b.toKeybinding().isModifierKey()||this.editor.focus()})),u})),this._overtypingCapturer=this._toDispose.add(new Cc(()=>this._toDispose.add(new _w(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Cc(()=>this._toDispose.add(new Ru(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(P_,e)),this._toDispose.add(this.model.onDidTrigger(u=>{this.widget.value.showTriggered(u.auto,u.shy?250:50),this._lineSuffix.value=new wue(this.editor.getModel(),u.position)})),this._toDispose.add(this.model.onDidSuggest(u=>{if(u.shy)return;let h=-1;if(!u.noSelect){for(const f of this._selectors.itemsOrderedByPriorityDesc)if(h=f.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items),h!==-1)break;h===-1&&(h=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items))}this.widget.value.showSuggestions(u.completionModel,h,u.isFrozen,u.auto)})),this._toDispose.add(this.model.onDidCancel(u=>{u.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=Xe.AcceptSuggestionsOnEnter.bindTo(i),d=()=>{const u=this.editor.getOption(1);c.set(u==="on"||u==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}static get(e){return e.getContribution(L8.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=Qn.get(this.editor);if(!n)return;const i=this.editor.getModel(),s=i.getAlternativeVersionId(),{item:o}=e,a=[],l=new fi;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(o,Boolean(t&8));if(this._memoryService.memorize(i,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){const u=Hc.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(h=>Gt.replaceMove(x.lift(h.range),h.text))),u.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){const u=new fs(!0);let h;const f=i.onDidChangeContent(v=>{if(v.isFlush){l.cancel(),f.dispose();return}for(const C of v.changes){const y=x.getEndPosition(C.range);(!h||B.isBefore(y,h))&&(h=y)}}),g=t;t|=2;let _=!1;const b=this.editor.onWillType(()=>{b.dispose(),_=!0,g&2||this.editor.pushUndoStop()});a.push(o.resolve(l.token).then(()=>{if(!o.completion.additionalTextEdits||l.token.isCancellationRequested||h&&o.completion.additionalTextEdits.some(C=>B.isBefore(h,x.getStartPosition(C.range))))return!1;_&&this.editor.pushUndoStop();const v=Hc.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(C=>Gt.replaceMove(x.lift(C.range),C.text))),v.restoreRelativeVerticalPositionOfCursor(this.editor),(_||!(g&2))&&this.editor.pushUndoStop(),!0}).then(v=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",u.elapsed(),v),f.dispose(),b.dispose()}))}let{insertText:d}=o.completion;o.completion.insertTextRules&4||(d=Gc.escape(d)),n.insert(d,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command?o.completion.command.id===Ib.id?this.model.trigger({auto:!0,shy:!1,noSelect:!1},!0):(a.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(We)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,u=>{for(l.cancel();i.canUndo();){s!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(u,3|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(o,i,e),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n){var i;if(this._telemetryGate++%100!==0)return;const s=e.extensionId?e.extensionId.value:((i=n.item.provider._debugDisplayName)!==null&&i!==void 0?i:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:s,kind:e.completion.kind,basenameHash:rA(kr(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:gY(t.uri)})}getOverwriteInfo(e,t){Lt(this.editor.hasModel());let n=this.editor.getOption(108).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+o,overwriteAfter:s+a}}_alertCompletionItem(e){if(Si(e.completion.additionalTextEdits)){const t=p("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);di(t)}}triggerSuggest(e,t,n,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1,noSelect:i??!1},!1,e,void 0,n),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},i=s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=s.editStart.column,l=o.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==s.completion.insertText};ve.once(this.model.onDidTrigger)(s=>{const o=[];ve.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{ut(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(ut(o),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!i(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0,noSelect:!1}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};$r.ID="editor.contrib.suggestController";$r=yue([Lh(1,mw),Lh(2,Sn),Lh(3,Re),Lh(4,Ve),Lh(5,Zr),Lh(6,No)],$r);class Sue{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class Ib extends me{constructor(){super({id:Ib.id,label:p("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:le.and(A.writable,A.hasCompletionItemProvider),kbOpts:{kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=$r.get(t);if(!i)return;let s,o;n&&typeof n=="object"&&(n.auto===!0&&(s=!0),n.noSelection===!0&&(o=!0)),i.triggerSuggest(void 0,s,void 0,o)}}Ib.id="editor.action.triggerSuggest";ct($r.ID,$r);ie(Ib);const Lr=100+90,Rs=Un.bindToContribution($r.get);te(new Rs({id:"acceptSelectedSuggestion",precondition:le.and(Xe.Visible,Xe.HasFocusedSuggestion),handler(r){r.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:le.and(Xe.Visible,A.textInputFocus),weight:Lr},{primary:3,kbExpr:le.and(Xe.Visible,A.textInputFocus,Xe.AcceptSuggestionsOnEnter,Xe.MakesTextEdit),weight:Lr}],menuOpts:[{menuId:Tc,title:p("accept.insert","Insert"),group:"left",order:1,when:Xe.HasInsertAndReplaceRange.toNegated()},{menuId:Tc,title:p("accept.insert","Insert"),group:"left",order:1,when:le.and(Xe.HasInsertAndReplaceRange,Xe.InsertMode.isEqualTo("insert"))},{menuId:Tc,title:p("accept.replace","Replace"),group:"left",order:1,when:le.and(Xe.HasInsertAndReplaceRange,Xe.InsertMode.isEqualTo("replace"))}]}));te(new Rs({id:"acceptAlternativeSelectedSuggestion",precondition:le.and(Xe.Visible,A.textInputFocus,Xe.HasFocusedSuggestion),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:1027,secondary:[1026]},handler(r){r.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Tc,group:"left",order:2,when:le.and(Xe.HasInsertAndReplaceRange,Xe.InsertMode.isEqualTo("insert")),title:p("accept.replace","Replace")},{menuId:Tc,group:"left",order:2,when:le.and(Xe.HasInsertAndReplaceRange,Xe.InsertMode.isEqualTo("replace")),title:p("accept.insert","Insert")}]}));rt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");te(new Rs({id:"hideSuggestWidget",precondition:Xe.Visible,handler:r=>r.cancelSuggestWidget(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}}));te(new Rs({id:"selectNextSuggestion",precondition:le.and(Xe.Visible,Xe.MultipleSuggestions),handler:r=>r.selectNextSuggestion(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));te(new Rs({id:"selectNextPageSuggestion",precondition:le.and(Xe.Visible,Xe.MultipleSuggestions),handler:r=>r.selectNextPageSuggestion(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:12,secondary:[2060]}}));te(new Rs({id:"selectLastSuggestion",precondition:le.and(Xe.Visible,Xe.MultipleSuggestions),handler:r=>r.selectLastSuggestion()}));te(new Rs({id:"selectPrevSuggestion",precondition:le.and(Xe.Visible,Xe.MultipleSuggestions),handler:r=>r.selectPrevSuggestion(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));te(new Rs({id:"selectPrevPageSuggestion",precondition:le.and(Xe.Visible,Xe.MultipleSuggestions),handler:r=>r.selectPrevPageSuggestion(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:11,secondary:[2059]}}));te(new Rs({id:"selectFirstSuggestion",precondition:le.and(Xe.Visible,Xe.MultipleSuggestions),handler:r=>r.selectFirstSuggestion()}));te(new Rs({id:"toggleSuggestionDetails",precondition:Xe.Visible,handler:r=>r.toggleSuggestionDetails(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Tc,group:"right",order:1,when:le.and(Xe.DetailsVisible,Xe.CanResolve),title:p("detail.more","show less")},{menuId:Tc,group:"right",order:1,when:le.and(Xe.DetailsVisible.toNegated(),Xe.CanResolve),title:p("detail.less","show more")}]}));te(new Rs({id:"toggleExplainMode",precondition:Xe.Visible,handler:r=>r.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));te(new Rs({id:"toggleSuggestionFocus",precondition:Xe.Visible,handler:r=>r.toggleSuggestionFocus(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:2570,mac:{primary:778}}}));te(new Rs({id:"insertBestCompletion",precondition:le.and(A.textInputFocus,le.equals("config.editor.tabCompletion","on"),P_.AtEnd,Xe.Visible.toNegated(),Ru.OtherSuggestions.toNegated(),Qn.InSnippetMode.toNegated()),handler:(r,e)=>{r.triggerSuggestAndAcceptBest(cs(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Lr,primary:2}}));te(new Rs({id:"insertNextSuggestion",precondition:le.and(A.textInputFocus,le.equals("config.editor.tabCompletion","on"),Ru.OtherSuggestions,Xe.Visible.toNegated(),Qn.InSnippetMode.toNegated()),handler:r=>r.acceptNextSuggestion(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:2}}));te(new Rs({id:"insertPrevSuggestion",precondition:le.and(A.textInputFocus,le.equals("config.editor.tabCompletion","on"),Ru.OtherSuggestions,Xe.Visible.toNegated(),Qn.InSnippetMode.toNegated()),handler:r=>r.acceptPrevSuggestion(),kbOpts:{weight:Lr,kbExpr:A.textInputFocus,primary:1026}}));ie(class extends me{constructor(){super({id:"editor.action.resetSuggestSize",label:p("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(r,e){var t;(t=$r.get(e))===null||t===void 0||t.resetWidgetSize()}});class xue extends j{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new Tt(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(i=>{i.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(i=>{i.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=$r.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(o,a,l)=>{const c=this.editor.getModel(),d=xy(c,this.suggestControllerPreselector());if(!d)return-1;const u=B.lift(a),h=l.map((g,_)=>{const b=$P(n,u,g,this.isShiftKeyPressed),v=xy(c,b?.normalizedInlineCompletion);if(!v)return;const C=kue(d.range,v.range)&&d.insertText.startsWith(v.insertText);return{index:_,valid:C,prefixLength:v.insertText.length,suggestItem:g}}).filter(g=>g&&g.valid),f=GF(h,Gp(g=>g.prefixLength,F6));return f?f.index:-1}}));let i=!1;const s=()=>{i||(i=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(ve.once(n.model.onDidTrigger)(o=>{s()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;Lue(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=$r.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return $P(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=$r.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=$r.get(this.editor);e&&e.forceRenderingAbove()}}function kue(r,e){return e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&(e.endLineNumber<r.endLineNumber||e.endLineNumber===r.endLineNumber&&e.endColumn<=r.endColumn)}function Lue(r,e){return r===e?!0:!r||!e?!1:r.completionItemKind===e.completionItemKind&&r.isSnippetText===e.isSnippetText&&sde(r.normalizedInlineCompletion,e.normalizedInlineCompletion)}function $P(r,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:x.fromPositions(e,e),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};let{insertText:i}=t.completion,s=!1;if(t.completion.insertTextRules&4){const a=new Gc().parse(i),l=r.editor.getModel();if(a.children.length>100)return;Cy.adjustWhitespace(l,e,a,!0,!0),i=a.toString(),s=!0}const o=r.getOverwriteInfo(t,n);return{isSnippetText:s,completionItemKind:t.completion.kind,normalizedInlineCompletion:{insertText:i,filterText:i,range:x.fromPositions(e.delta(0,-o.overwriteBefore),e.delta(0,Math.max(o.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}var Tue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Due=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},zP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let KD=class extends _8{constructor(e,t,n){super(e),this.cache=t,this.languageFeaturesService=n,this.suggestionInlineCompletionSource=this._register(new xue(this.editor,()=>{var i,s;return(s=(i=this.cache.value)===null||i===void 0?void 0:i.completions[0])===null||s===void 0?void 0:s.toLiveInlineCompletion()})),this.updateOperation=this._register(new Fi),this.updateCacheSoon=this._register(new Tt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{if(!this.editor.hasModel())return;this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,Eue(s.parts.map(o=>o.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Ke(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(108).preview}updateCache(){return zP(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.insertText,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition();if(e.selectedItem.isSnippetText||e.selectedItem.completionItemKind===27||e.selectedItem.completionItemKind===20||e.selectedItem.completionItemKind===23){this.cache.clear();return}const i=Xn(o=>zP(this,void 0,void 0,function*(){let a;try{a=yield C8(this.languageFeaturesService.inlineCompletionsProvider,n,this.editor.getModel(),{triggerKind:lr.Automatic,selectedSuggestionInfo:t},o)}catch(l){We(l);return}if(o.isCancellationRequested){a.dispose();return}this.cache.setValue(this.editor,a,lr.Automatic),this.onDidChangeEmitter.fire()})),s=new v8(i,lr.Automatic);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const i=this.isSuggestionPreviewEnabled(),s=this.editor.getModel(),o=xy(s,(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),a=this.suggestionInlineCompletionSource.state,l=xy(s,(n=a?.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),c=o&&l&&o.insertText.startsWith(l.insertText)&&o.range.equalsRange(l.range);if(!i&&!c)return;const d=c?o:l||o,u=c?d.insertText.length-l.insertText.length:0;return this.toGhostText(d,u)}toGhostText(e,t){const n=this.editor.getOptions().get(108).previewMode;return e?b8(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new p8(e.range.endLineNumber,[],this.minReservedLineCount):void 0}};KD=Tue([Due(2,be)],KD);function Eue(r){return r.reduce((e,t)=>e+t,0)}var Aue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Iue=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Nue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Mue extends j{constructor(){super(...arguments),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Fi)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?Jce(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let GD=class extends Mue{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.sharedCache=this._register(new Rue),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(KD,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(VD,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(i=>e.containsPosition(new B(n.lineNumber,i.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(lr.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return Nue(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};GD=Aue([Iue(1,Ve)],GD);class Rue extends j{constructor(){super(...arguments),this.onDidChangeEmitter=new R,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Fi)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new dde(t,e,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var Oue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},KP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},zx;const GP=(zx=window.trustedTypes)===null||zx===void 0?void 0:zx.createPolicy("editorGhostText",{createHTML:r=>r});let qD=class extends j{constructor(e,t,n,i){super(),this.editor=e,this.model=t,this.instantiationService=n,this.languageService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(Fue,this.editor)),this.additionalLinesWidget=this._register(new Bue(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this.replacementDecoration=this._register(new Pue(this.editor)),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(29)||s.hasChanged(107)||s.hasChanged(90)||s.hasChanged(85)||s.hasChanged(47)||s.hasChanged(46)||s.hasChanged(61))&&this.update()})),this._register(Ke(()=>{var s;this.disposed=!0,this.update(),(s=this.viewMoreContentWidget)===null||s===void 0||s.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear(),this.replacementDecoration.clear();return}const n=new Array,i=new Array;function s(c,d){if(i.length>0){const u=i[i.length-1];d&&u.decorations.push(new Ls(u.content.length+1,u.content.length+1+c[0].length,d,0)),u.content+=c[0],c=c.slice(1)}for(const u of c)i.push({content:u,decorations:d?[new Ls(1,u.length+1,d,0)]:[]})}t instanceof m8?this.replacementDecoration.setDecorations([{range:new x(t.lineNumber,t.columnStart,t.lineNumber,t.columnStart+t.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);const o=this.editor.getModel().getLineContent(t.lineNumber);let a,l=0;for(const c of t.parts){let d=c.lines;a===void 0?(n.push({column:c.column,text:d[0],preview:c.preview}),d=d.slice(1)):s([o.substring(l,c.column-1)],void 0),d.length>0&&(s(d,"ghost-text"),a===void 0&&c.column<=o.length&&(a=c.column)),l=c.column-1}a!==void 0&&s([o.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,i,t.additionalReservedLineCount),(e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0}renderViewMoreLines(e,t,n){const i=this.editor.getOption(46),s=document.createElement("div");s.className="suggest-preview-additional-widget",xi(s,i);const o=document.createElement("span");o.className="content-spacer",o.append(t),s.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),s.append(a);const l=new Q,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${n} lines…`),l.add(Hn(c,"mousedown",d=>{var u;(u=this.model)===null||u===void 0||u.setExpanded(!0),d.preventDefault(),this.editor.focus()})),s.append(c),new Vue(this.editor,e,s,l)}};qD=Oue([KP(2,Ve),KP(3,Qt)],qD);class Pue{constructor(e){this.editor=e,this.decorationIds=[]}setDecorations(e){this.editor.changeDecorations(t=>{this.decorationIds=t.deltaDecorations(this.decorationIds,e)})}clear(){this.setDecorations([])}dispose(){this.clear()}}class Fue{constructor(e){this.editor=e,this.decorationIds=[]}dispose(){this.clear()}clear(){this.editor.changeDecorations(e=>{this.decorationIds=e.deltaDecorations(this.decorationIds,[])})}setParts(e,t,n){if(!this.editor.getModel())return;const s=new Array;n&&s.push({range:x.fromPositions(new B(e,n.column),new B(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations(o=>{this.decorationIds=o.deltaDecorations(this.decorationIds,t.map(a=>({range:x.fromPositions(new B(e,a.column)),options:{description:"ghost-text",after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:fo.Left},showIfCollapsed:!0}})).concat(s))})}}class Bue{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:s}=i.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");Wue(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function Wue(r,e,t,n,i){const s=n.get(29),o=n.get(107),a="none",l=n.get(85),c=n.get(47),d=n.get(46),u=n.get(61),h=Mc(1e4);h.appendASCIIString('<div class="suggest-preview-text">');for(let _=0,b=t.length;_<b;_++){const v=t[_],C=v.content;h.appendASCIIString('<div class="view-line'),h.appendASCIIString('" style="top:'),h.appendASCIIString(String(_*u)),h.appendASCIIString('px;width:1000000px;">');const y=Wy(C),w=Of(C),L=Zn.createEmpty(C,i);tb(new td(d.isMonospace&&!s,d.canUseHalfwidthRightwardsArrow,C,!1,y,w,0,L,v.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,o,a,l,c!==js.OFF,null),h),h.appendASCIIString("</div>")}h.appendASCIIString("</div>"),xi(r,d);const f=h.build(),g=GP?GP.createHTML(f):f;r.innerHTML=g}class Vue extends j{constructor(e,t,n,i){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(i),this._register(Ke(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}Vt((r,e)=>{const t=r.getColor(TG);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=r.getColor(DG);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const i=r.getColor(LG);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var T8=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZD=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},bw=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let Yn=class D8 extends j{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Fi),this.activeModelDidChangeEmitter=this._register(new R),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(108)&&this.updateModelController(),n.hasChanged(57)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(D8.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(108),t=this.editor.getOption(57);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(YD,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return bw(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};Yn.inlineSuggestionVisible=new ge("inlineSuggestionVisible",!1,p("inlineSuggestionVisible","Whether an inline suggestion is visible"));Yn.inlineSuggestionHasIndentation=new ge("inlineSuggestionHasIndentation",!1,p("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Yn.inlineSuggestionHasIndentationLessThanTabSize=new ge("inlineSuggestionHasIndentationLessThanTabSize",!0,p("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Yn.ID="editor.contrib.ghostTextController";Yn=T8([ZD(1,Ve)],Yn);class Hue{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=Yn.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Yn.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Yn.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let YD=class extends j{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new Hue(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(GD,this.editor)),this.widget=this._register(this.instantiationService.createInstance(qD,this.editor,this.model)),this._register(Ke(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const i=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){const{column:s,lines:o}=i.parts[0],a=o[0],l=this.editor.getModel().getLineIndentColumn(i.lineNumber);if(s<=l){let d=Zi(a);d===-1&&(d=a.length-1),t=d>0;const u=this.editor.getModel().getOptions().tabSize;n=On.visibleColumnFromColumn(a,d+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};YD=T8([ZD(1,Ve),ZD(2,Re)],YD);class fg extends me{constructor(){super({id:fg.ID,label:p("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:le.and(A.writable,Yn.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return bw(this,void 0,void 0,function*(){const n=Yn.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}fg.ID="editor.action.inlineSuggest.showNext";class gg extends me{constructor(){super({id:gg.ID,label:p("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:le.and(A.writable,Yn.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return bw(this,void 0,void 0,function*(){const n=Yn.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}gg.ID="editor.action.inlineSuggest.showPrevious";class Uue extends me{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:p("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:A.writable})}run(e,t){return bw(this,void 0,void 0,function*(){const n=Yn.get(t);n&&n.trigger()})}}var jue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Th=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class $ue{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}get commands(){var e,t,n;return((n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||n===void 0?void 0:n.commands)||[]}}let XD=class{constructor(e,t,n,i,s,o,a){this._editor=e,this._commandService=t,this._menuService=n,this._contextKeyService=i,this._languageService=s,this._openerService=o,this.accessibilityService=a,this.hoverOrdinal=3}suggestHoverAnchor(e){const t=Yn.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new L0(1e3,this,x.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}return n.type===7&&t.shouldShowHoverAt(n.range)?new L0(1e3,this,n.range):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new L0(1e3,this,n.range):null}computeSync(e,t){const n=Yn.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new $ue(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new Q,i=t[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,i,n);const s=n.add(this._menuService.createMenu(M.InlineCompletionsActions,this._contextKeyService)),o=e.statusBar.addAction({label:p("showNextInlineSuggestion","Next"),commandId:fg.ID,run:()=>this._commandService.executeCommand(fg.ID)}),a=e.statusBar.addAction({label:p("showPreviousInlineSuggestion","Previous"),commandId:gg.ID,run:()=>this._commandService.executeCommand(gg.ID)});e.statusBar.addAction({label:p("acceptInlineSuggestion","Accept"),commandId:Sy,run:()=>this._commandService.executeCommand(Sy)});const l=[o,a];for(const c of l)c.setEnabled(!1);i.hasMultipleSuggestions().then(c=>{for(const d of l)d.setEnabled(c)});for(const c of i.commands)e.statusBar.addAction({label:c.title,commandId:c.id,run:()=>this._commandService.executeCommand(c.id,...c.arguments||[])});for(const[c,d]of s.getActions())for(const u of d)u instanceof Fc&&e.statusBar.addAction({label:u.label,commandId:u.item.id,run:()=>this._commandService.executeCommand(u.item.id)});return n}renderScreenReaderText(e,t,n){var i,s;const o=ee,a=o("div.hover-row.markdown-hover"),l=q(a,o("div.hover-contents")),c=n.add(new Fl({editor:this._editor},this._languageService,this._openerService)),d=h=>{n.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",e.onContentsChanged()}));const f=p("inlineSuggestionFollows","Suggestion:"),g=n.add(c.render(new rs().appendText(f).appendCodeblock("text",h)));l.replaceChildren(g.element)},u=(s=(i=t.controller.activeModel)===null||i===void 0?void 0:i.inlineCompletionsModel)===null||s===void 0?void 0:s.ghostText;if(u){const h=this._editor.getModel().getLineContent(u.lineNumber);d(u.renderForScreenReader(h))}e.fragment.appendChild(a)}};XD=jue([Th(1,Sn),Th(2,qu),Th(3,Re),Th(4,Qt),Th(5,Dr),Th(6,Wl)],XD);ct(Yn.ID,Yn);ie(Uue);ie(fg);ie(gg);oh.register(XD);const E8=Un.bindToContribution(Yn.get),QD=new E8({id:Sy,precondition:Yn.inlineSuggestionVisible,handler(r){r.commit(),r.editor.focus()}});te(QD);Ms.registerKeybindingRule({primary:2,weight:200,id:QD.id,when:le.and(QD.precondition,A.tabMovesFocus.toNegated(),Yn.inlineSuggestionHasIndentationLessThanTabSize)});te(new E8({id:"editor.action.inlineSuggest.hide",precondition:Yn.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(r){r.hide()}}));function vs(r,e){let t=0;for(let n=0;n<r.length;n++)r.charAt(n)==="	"?t+=e:t++;return t}function Cm(r,e,t){r=r<0?0:r;let n="";if(!t){const i=Math.floor(r/e);r=r%e;for(let s=0;s<i;s++)n+="	"}for(let i=0;i<r;i++)n+=" ";return n}var zue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Kue=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function A8(r,e,t,n,i){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(r.getLanguageId()).indentationRules;if(!s)return[];for(n=Math.min(n,r.getLineCount());t<=n&&s.unIndentedLinePattern;){const b=r.getLineContent(t);if(!s.unIndentedLinePattern.test(b))break;t++}if(t>n-1)return[];const{tabSize:o,indentSize:a,insertSpaces:l}=r.getOptions(),c=(b,v)=>(v=v||1,dr.shiftIndent(b,b.length+v,o,a,l)),d=(b,v)=>(v=v||1,dr.unshiftIndent(b,b.length+v,o,a,l)),u=[];let h;const f=r.getLineContent(t);let g=f;if(i!=null){h=i;const b=Dt(f);g=h+f.substring(b.length),s.decreaseIndentPattern&&s.decreaseIndentPattern.test(g)&&(h=d(h),g=h+f.substring(b.length)),f!==g&&u.push(Gt.replaceMove(new ue(t,1,t,b.length+1),vC(h,a,l)))}else h=Dt(f);let _=h;s.increaseIndentPattern&&s.increaseIndentPattern.test(g)?(_=c(_),h=c(h)):s.indentNextLinePattern&&s.indentNextLinePattern.test(g)&&(_=c(_)),t++;for(let b=t;b<=n;b++){const v=r.getLineContent(b),C=Dt(v),y=_+v.substring(C.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(y)&&(_=d(_),h=d(h)),C!==_&&u.push(Gt.replaceMove(new ue(b,1,b,C.length+1),vC(_,a,l))),!(s.unIndentedLinePattern&&s.unIndentedLinePattern.test(v))&&(s.increaseIndentPattern&&s.increaseIndentPattern.test(y)?(h=c(h),_=h):s.indentNextLinePattern&&s.indentNextLinePattern.test(y)?_=c(_):_=h)}return u}class vw extends me{constructor(){super({id:vw.ID,label:p("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:A.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const o=new Yue(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}vw.ID="editor.action.indentationToSpaces";class Cw extends me{constructor(){super({id:Cw.ID,label:p("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:A.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const o=new Xue(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}Cw.ID="editor.action.indentationToTabs";class I8 extends me{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(Ul),i=e.get(en),s=t.getModel();if(!s)return;const o=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(c=>({id:c.toString(),label:c.toString(),description:c===o.tabSize?p("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:p({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(c=>{c&&s&&!s.isDisposed()&&s.updateOptions({tabSize:parseInt(c.label,10),insertSpaces:this.insertSpaces})})},50)}}class yw extends I8{constructor(){super(!1,{id:yw.ID,label:p("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}yw.ID="editor.action.indentUsingTabs";class ww extends I8{constructor(){super(!0,{id:ww.ID,label:p("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}ww.ID="editor.action.indentUsingSpaces";class Sw extends me{constructor(){super({id:Sw.ID,label:p("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(en),i=t.getModel();if(!i)return;const s=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(s.insertSpaces,s.tabSize)}}Sw.ID="editor.action.detectIndentation";class Gue extends me{constructor(){super({id:"editor.action.reindentlines",label:p("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:A.writable})}run(e,t){const n=e.get(_n),i=t.getModel();if(!i)return;const s=A8(i,n,1,i.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class que extends me{constructor(){super({id:"editor.action.reindentselectedlines",label:p("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:A.writable})}run(e,t){const n=e.get(_n),i=t.getModel();if(!i)return;const s=t.getSelections();if(s===null)return;const o=[];for(const a of s){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=A8(i,n,l,c);o.push(...d)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class Zue{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(const i of this._edits)t.addEditOperation(x.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let B_=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new Q,this.callOnModel=new Q,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(50))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(9),{tabSize:s,indentSize:o,insertSpaces:a}=n.getOptions(),l=[],c={shiftIndent:f=>dr.shiftIndent(f,f.length+1,s,o,a),unshiftIndent:f=>dr.unshiftIndent(f,f.length+1,s,o,a)};let d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(n,d)){d++;continue}break}if(d>e.endLineNumber)return;let u=n.getLineContent(d);if(!/\S/.test(u.substring(0,e.startColumn-1))){const f=Jp(i,n,n.getLanguageId(),d,c,this._languageConfigurationService);if(f!==null){const g=Dt(u),_=vs(f,s),b=vs(g,s);if(_!==b){const v=Cm(_,s,a);l.push({range:new x(d,1,d,g.length+1),text:v}),u=v+u.substr(g.length)}else{const v=e3(n,d,this._languageConfigurationService);if(v===0||v===8)return}}}const h=d;for(;d<e.endLineNumber;){if(!/\S/.test(n.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){const g=Jp(i,{tokenization:{getLineTokens:_=>n.tokenization.getLineTokens(_),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(_,b)=>n.getLanguageIdAtPosition(_,b)},getLineContent:_=>_===h?u:n.getLineContent(_)},n.getLanguageId(),d+1,c,this._languageConfigurationService);if(g!==null){const _=vs(g,s),b=vs(Dt(n.getLineContent(d+1)),s);if(_!==b){const v=_-b;for(let C=d+1;C<=e.endLineNumber;C++){const y=n.getLineContent(C),w=Dt(y),T=vs(w,s)+v,S=Cm(T,s,a);S!==w&&l.push({range:new x(C,1,C,w.length+1),text:S})}}}}if(l.length>0){this.editor.pushUndoStop();const f=new Zue(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",f),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;const i=e.tokenization.getLineTokens(t);if(i.getCount()>0){const s=i.findTokenIndexAtOffset(n);if(s>=0&&i.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};B_.ID="editor.contrib.autoIndentOnPaste";B_=zue([Kue(1,_n)],B_);function N8(r,e,t,n){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let i="";for(let o=0;o<t;o++)i+=" ";const s=new RegExp(i,"gi");for(let o=1,a=r.getLineCount();o<=a;o++){let l=r.getLineFirstNonWhitespaceColumn(o);if(l===0&&(l=r.getLineMaxColumn(o)),l===1)continue;const c=new x(o,1,o,l),d=r.getValueInRange(c),u=n?d.replace(/\t/ig,i):d.replace(s,"	");e.addEditOperation(c,u)}}class Yue{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),N8(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class Xue{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),N8(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}ct(B_.ID,B_);ie(vw);ie(Cw);ie(yw);ie(ww);ie(Sw);ie(Gue);ie(que);var ky=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class M8{constructor(e,t){this.range=e,this.direction=t}}class RN{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new RN(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return ky(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return ky(this,void 0,void 0,function*(){try{const i=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=i?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=i?.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(i){Jn(i),this._isResolved=!1}})}}class W_{constructor(e,t,n){this._disposables=new Q,this.ranges=e,this.provider=new Set;const i=[];for(const[s,o]of t){this._disposables.add(s),this.provider.add(o);for(const a of s.hints){const l=n.validatePosition(a.position);let c="before";const d=W_._getRangeAtPosition(n,l);let u;d.getStartPosition().isBefore(l)?(u=x.fromPositions(d.getStartPosition(),l),c="after"):(u=x.fromPositions(l,d.getEndPosition()),c="before"),i.push(new RN(a,new M8(u,c),o))}}this.items=i.sort((s,o)=>B.compare(s.hint.position,o.hint.position))}static create(e,t,n,i){return ky(this,void 0,void 0,function*(){const s=[],o=e.ordered(t).reverse().map(a=>n.map(l=>ky(this,void 0,void 0,function*(){try{const c=yield a.provideInlayHints(t,l,i);c?.hints.length&&s.push([c,a])}catch(c){Jn(c)}})));if(yield Promise.all(o.flat()),i.isCancellationRequested||t.isDisposed())throw new ed;return new W_(n,s,t)})}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new x(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);const s=e.tokenization.getLineTokens(n),o=t.column-1,a=s.findTokenIndexAtOffset(o);let l=s.getStartOffset(a),c=s.getEndOffset(a);return c-l===1&&(l===o&&a>1?(l=s.getStartOffset(a-1),c=s.getEndOffset(a-1)):c===o&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),c=s.getEndOffset(a+1))),new x(n,l+1,n,c+1)}}function Que(r){return Se.from({scheme:He.command,path:r.id,query:r.arguments&&encodeURIComponent(JSON.stringify(r.arguments))}).toString()}var ym=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function Jue(r,e,t,n){var i;return ym(this,void 0,void 0,function*(){const s=r.get(ps),o=r.get(Vl),a=r.get(Sn),l=r.get(Ve),c=r.get(xn);if(yield n.item.resolve(qe.None),!n.part.location)return;const d=n.part.location,u=[],h=new Set(vr.getMenuItems(M.EditorContext).map(g=>zh(g)?g.command.id:""));for(const g of qd.getEditorActions())g instanceof Kr&&h.has(g.id)&&u.push(new Ds(g.id,g.label,void 0,!0,()=>ym(this,void 0,void 0,function*(){const _=yield s.createModelReference(d.uri);try{yield l.invokeFunction(g.run.bind(g),e,new D_(_.object.textEditorModel,x.getStartPosition(d.range)))}finally{_.dispose()}})));if(n.part.command){const{command:g}=n.part;u.push(new ki),u.push(new Ds(g.id,g.title,void 0,!0,()=>ym(this,void 0,void 0,function*(){var _;try{yield a.executeCommand(g.id,...(_=g.arguments)!==null&&_!==void 0?_:[])}catch(b){c.notify({severity:M3.Error,source:n.item.provider.displayName,message:b})}})))}const f=e.getOption(117);o.showContextMenu({domForShadowRoot:f&&(i=e.getDomNode())!==null&&i!==void 0?i:void 0,getAnchor:()=>{const g=wi(t);return{x:g.left,y:g.top+g.height+8}},getActions:()=>u,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}function ehe(r,e,t,n){return ym(this,void 0,void 0,function*(){const s=yield r.get(ps).createModelReference(n.uri);yield t.invokeWithinContext(o=>ym(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=o.get(Re),c=gs.inPeekEditor.getValue(l),d=!a&&t.getOption(80)&&!c;return new Db({openToSide:a,openInPeek:d,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(o,t,{model:s.object.textEditorModel,position:x.getStartPosition(n.range)})})),s.dispose()})}var the=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Dh=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Fh=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Ly{constructor(){this._entries=new nd(50)}get(e){const t=Ly._key(e);return this._entries.get(t)}set(e,t){const n=Ly._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const R8=tt("IInlayHintsCache");lt(R8,Ly,!0);class JD{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class nhe{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let Ou=class eE{constructor(e,t,n,i,s,o,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=i,this._commandService=s,this._notificationService=o,this._instaService=a,this._disposables=new Q,this._sessionDisposables=new Q,this._decorationsMetadata=new Map,this._ruleFactory=new sb(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(129)&&this._update()})),this._update()}static get(e){var t;return(t=e.getContribution(eE.ID))!==null&&t!==void 0?t:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(129);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(Ke(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let i;const s=new Set,o=new Tt(()=>Fh(this,void 0,void 0,function*(){const a=Date.now();i?.dispose(!0),i=new fi;const l=t.onWillDispose(()=>i?.cancel());try{const c=i.token,d=yield W_.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(o.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const u of d.provider)typeof u.onDidChangeInlayHints=="function"&&!s.has(u)&&(s.add(u),this._sessionDisposables.add(u.onDidChangeInlayHints(()=>{o.isScheduled()||o.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){We(c)}finally{i.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(o),this._sessionDisposables.add(Ke(()=>i?.dispose(!0))),o.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!o.isScheduled())&&o.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{const l=Math.max(o.delay,1250);o.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(uc.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const u=this._editor.getModel(),h=this._copyInlayHintsWithCurrentAnchor(u);this._updateHintsDecorators([u.getFullModelRange()],h),o.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>o.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new Q,t=e.add(new uN(this._editor)),n=new Q;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(i=>{const[s]=i,o=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!o||!a){n.clear();return}const l=new fi;n.add(Ke(()=>l.dispose(!0))),o.item.resolve(l.token),this._activeInlayHintPart=o.part.command||o.part.location?new nhe(o,s.hasTriggerModifier):void 0;const c=o.item.hint.position.lineNumber,d=new x(c,1,c,a.getLineMaxColumn(c)),u=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],u),n.add(Ke(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],u)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(i=>Fh(this,void 0,void 0,function*(){const s=this._getInlayHintLabelPart(i);if(s){const o=s.part;o.location?this._instaService.invokeFunction(ehe,i,this._editor,o.location):mk.is(o.command)&&(yield this._invokeCommand(o.command,s.item))}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>Fh(this,void 0,void 0,function*(){if(t.event.detail!==2)return;const n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),yield n.item.resolve(qe.None),Si(n.item.hint.textEdits))){const i=n.item.hint.textEdits.map(s=>Gt.replace(x.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",i),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>Fh(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(Jue,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof Cu&&n?.attachedData instanceof JD)return n.attachedData}_invokeCommand(e,t){var n;return Fh(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(i){this._notificationService.notify({severity:M3.Error,source:t.provider.displayName,message:i})}})}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[n,i]of this._decorationsMetadata){if(t.has(i.item))continue;const s=e.getDecorationRange(n);if(s){const o=new M8(s,i.item.anchor.direction),a=i.item.with({anchor:o});t.set(i.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const s of n.sort(x.compareRangesUsingStarts)){const o=t.validateRange(new x(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));i.length===0||!x.areIntersectingOrTouching(i[i.length-1],o)?i.push(o):i[i.length-1]=x.plusRange(i[i.length-1],o)}return i}_updateHintsDecorators(e,t){var n,i;const s=[],o=(g,_,b,v,C)=>{const y={content:b,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:_.className,cursorStops:v,attachedData:C};s.push({item:g,classNameRef:_,decoration:{range:g.anchor.range,options:{description:"InlayHint",showIfCollapsed:g.anchor.range.isEmpty(),collapseOnReplaceEdit:!g.anchor.range.isEmpty(),stickiness:0,[g.anchor.direction]:this._activeRenderMode===0?y:void 0}}})},a=(g,_)=>{const b=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});o(g,b," ",_?fo.Right:fo.None)},{fontSize:l,fontFamily:c,padding:d,isUniform:u}=this._getLayoutInfo(),h="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(h,c);for(const g of t){g.hint.paddingLeft&&a(g,!1);const _=typeof g.hint.label=="string"?[{label:g.hint.label}]:g.hint.label;for(let b=0;b<_.length;b++){const v=_[b],C=b===0,y=b===_.length-1,w={fontSize:`${l}px`,fontFamily:`var(${h}), ${Ts.fontFamily}`,verticalAlign:u?"baseline":"middle"};Si(g.hint.textEdits)&&(w.cursor="default"),this._fillInColors(w,g.hint),(v.command||v.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===g&&this._activeInlayHintPart.part.index===b&&(w.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(w.color=an(NA),w.cursor="pointer")),d&&(C&&y?(w.padding=`1px ${Math.max(1,l/4)|0}px`,w.borderRadius=`${l/4|0}px`):C?(w.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,w.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):y?(w.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,w.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):w.padding="1px 0 1px 0"),o(g,this._ruleFactory.createClassNameRef(w),ihe(v.label),y&&!g.hint.paddingRight?fo.Right:fo.None,new JD(g,b))}if(g.hint.paddingRight&&a(g,!0),s.length>eE._MAX_DECORATORS)break}const f=[];for(const g of e)for(const{id:_}of(i=this._editor.getDecorationsInRange(g))!==null&&i!==void 0?i:[]){const b=this._decorationsMetadata.get(_);b&&(f.push(_),b.classNameRef.dispose(),this._decorationsMetadata.delete(_))}this._editor.changeDecorations(g=>{const _=g.deltaDecorations(f,s.map(b=>b.decoration));for(let b=0;b<_.length;b++){const v=s[b];this._decorationsMetadata.set(_[b],v)}})}_fillInColors(e,t){t.kind===Z0.Parameter?(e.backgroundColor=an($z),e.color=an(jz)):t.kind===Z0.Type?(e.backgroundColor=an(Uz),e.color=an(Hz)):(e.backgroundColor=an(vl),e.color=an(bl))}_getLayoutInfo(){const e=this._editor.getOption(129),t=e.padding,n=this._editor.getOption(48),i=this._editor.getOption(45);let s=e.fontSize;(!s||s<5||s>n)&&(s=n);const o=e.fontFamily||i;return{fontSize:s,fontFamily:o,padding:t,isUniform:!t&&o===i&&s===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};Ou.ID="editor.contrib.InlayHints";Ou._MAX_DECORATORS=1500;Ou=the([Dh(1,be),Dh(2,Er),Dh(3,R8),Dh(4,Sn),Dh(5,xn),Dh(6,Ve)],Ou);function ihe(r){const e=" ";return r.replace(/[ \t]/g,e)}rt.registerCommand("_executeInlayHintProvider",(r,...e)=>Fh(void 0,void 0,void 0,function*(){const[t,n]=e;Lt(Se.isUri(t)),Lt(x.isIRange(n));const{inlayHintsProvider:i}=r.get(be),s=yield r.get(ps).createModelReference(t);try{const o=yield W_.create(i,s.object.textEditorModel,[x.lift(n)],qe.None),a=o.items.map(l=>l.hint);return setTimeout(()=>o.dispose(),0),a}finally{s.dispose()}}));var she=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cp=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},qP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},rhe=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}};class ZP extends L0{constructor(e,t){super(10,t,e.item.anchor.range),this.part=e}}let tE=class extends my{constructor(e,t,n,i,s,o){super(e,t,n,i,o),this._resolverService=s,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!Ou.get(this._editor)||e.target.type!==6)return null;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return i instanceof Cu&&i.attachedData instanceof JD?new ZP(i.attachedData,this):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof ZP?new Cn(i=>qP(this,void 0,void 0,function*(){var s,o;const{part:a}=e;if(yield a.item.resolve(n),n.isCancellationRequested)return;let l;typeof a.item.hint.tooltip=="string"?l=new rs().appendText(a.item.hint.tooltip):a.item.hint.tooltip&&(l=a.item.hint.tooltip),l&&i.emitOne(new ra(this,e.range,[l],0)),Si(a.item.hint.textEdits)&&i.emitOne(new ra(this,e.range,[new rs().appendText(p("hint.dbl","Double click to insert"))],10001));let c;if(typeof a.part.tooltip=="string"?c=new rs().appendText(a.part.tooltip):a.part.tooltip&&(c=a.part.tooltip),c&&i.emitOne(new ra(this,e.range,[c],1)),a.part.location||a.part.command){let f;const _=this._editor.getOption(72)==="altKey"?Je?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Je?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");a.part.location&&a.part.command?f=new rs().appendText(p("hint.defAndCommand","Go to Definition ({0}), right click for more",_)):a.part.location?f=new rs().appendText(p("hint.def","Go to Definition ({0})",_)):a.part.command&&(f=new rs(`[${p("hint.cmd","Execute Command")}](${Que(a.part.command)} "${a.part.command.title}") (${_})`,{isTrusted:!0})),f&&i.emitOne(new ra(this,e.range,[f],1e4))}const d=yield this._resolveInlayHintLabelPartHover(a,n);try{for(var u=rhe(d),h;h=yield u.next(),!h.done;){const f=h.value;i.emitOne(f)}}catch(f){s={error:f}}finally{try{h&&!h.done&&(o=u.return)&&(yield o.call(u))}finally{if(s)throw s.error}}})):Cn.EMPTY}_resolveInlayHintLabelPartHover(e,t){return qP(this,void 0,void 0,function*(){if(!e.part.location)return Cn.EMPTY;const{uri:n,range:i}=e.part.location,s=yield this._resolverService.createModelReference(n);try{const o=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(o)?wN(this._languageFeaturesService.hoverProvider,o,new B(i.startLineNumber,i.startColumn),t).filter(a=>!Qf(a.hover.contents)).map(a=>new ra(this,e.item.anchor.range,a.hover.contents,2+a.ordinal)):Cn.EMPTY}finally{s.dispose()}})}};tE=she([Cp(1,Qt),Cp(2,Dr),Cp(3,ft),Cp(4,ps),Cp(5,be)],tE);ct(Ou.ID,Ou);oh.register(tE);class ohe{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new ue(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new ue(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var ahe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lhe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Yc=class nE{constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}static get(e){return e.getContribution(nE.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),i=this.editor.getModel();if(!i||!n)return;let s=n;if(s.startLineNumber!==s.endLineNumber)return;const o=new cy(this.editor,5),a=i.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=Xn(l=>this.editorWorkerService.navigateValueSet(a,s,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!o.validate(this.editor))return;const c=x.lift(l.range);let d=l.range;const u=l.value.length-(s.endColumn-s.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},u>1&&(s=new ue(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+u-1));const h=new ohe(c,s,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,h),this.editor.pushUndoStop(),this.decorations.set([{range:d,options:nE.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=Rc(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(We)}).catch(We)):Promise.resolve(void 0)}};Yc.ID="editor.contrib.inPlaceReplaceController";Yc.DECORATION=Be.register({description:"in-place-replace",className:"valueSetReplacement"});Yc=ahe([lhe(1,Tr)],Yc);class che extends me{constructor(){super({id:"editor.action.inPlaceReplace.up",label:p("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=Yc.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class dhe extends me{constructor(){super({id:"editor.action.inPlaceReplace.down",label:p("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=Yc.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}ct(Yc.ID,Yc);ie(che);ie(dhe);Vt((r,e)=>{const t=r.getColor(G5);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class uhe extends me{constructor(){super({id:"expandLineSelection",label:p("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:A.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,ti.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}ie(uhe);class hhe{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const n=fhe(e,this._cursors);for(let i=0,s=n.length;i<s;i++){const o=n[i];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function fhe(r,e){e.sort((o,a)=>o.lineNumber===a.lineNumber?o.column-a.column:o.lineNumber-a.lineNumber);for(let o=e.length-2;o>=0;o--)e[o].lineNumber===e[o+1].lineNumber&&e.splice(o,1);const t=[];let n=0,i=0;const s=e.length;for(let o=1,a=r.getLineCount();o<=a;o++){const l=r.getLineContent(o),c=l.length+1;let d=0;if(i<s&&e[i].lineNumber===o&&(d=e[i].column,i++,d===c)||l.length===0)continue;const u=ga(l);let h=0;if(u===-1)h=1;else if(u!==l.length-1)h=u+2;else continue;h=Math.max(d,h),t[n++]=Gt.delete(new x(o,h,o,c))}return t}class O8{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=[];for(let o=n.startLineNumber;o<=n.endLineNumber;o++)i.push(e.getLineContent(o));const s=i.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new x(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new x(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new x(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,s=n.startColumn,o=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(o=o+this._endLineNumberDelta,a=1),n=ue.createWithDirection(i,s,o,a,this._selectionDirection)}return n}}var ghe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},phe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let iE=class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:s,indentSize:o,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(s,o,a),c={tokenization:{getLineTokens:d=>e.tokenization.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,u)=>e.getLanguageIdAtPosition(d,u)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){const d=i.startLineNumber,u=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(u)===1?t.addEditOperation(new x(1,1,1,1),null):(t.addEditOperation(new x(d,1,d,1),e.getLineContent(u)),t.addEditOperation(new x(u,1,u,e.getLineMaxColumn(u)),null)),i=new ue(u,1,u,1)}else{let d,u;if(this._isMovingDown){d=i.endLineNumber+1,u=e.getLineContent(d),t.addEditOperation(new x(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let h=u;if(this.shouldAutoIndent(e,i)){const f=this.matchEnterRule(e,l,s,d,i.startLineNumber-1);if(f!==null){const _=Dt(e.getLineContent(d)),b=f+vs(_,s);h=Cm(b,s,a)+this.trimLeft(u)}else{c.getLineContent=b=>b===i.startLineNumber?e.getLineContent(d):e.getLineContent(b);const _=Jp(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),i.startLineNumber,l,this._languageConfigurationService);if(_!==null){const b=Dt(e.getLineContent(d)),v=vs(_,s),C=vs(b,s);v!==C&&(h=Cm(v,s,a)+this.trimLeft(u))}}t.addEditOperation(new x(i.startLineNumber,1,i.startLineNumber,1),h+`
`);const g=this.matchEnterRuleMovingDown(e,l,s,i.startLineNumber,d,h);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,g);else{c.getLineContent=b=>b===i.startLineNumber?h:b>=i.startLineNumber+1&&b<=i.endLineNumber+1?e.getLineContent(b-1):e.getLineContent(b);const _=Jp(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),i.startLineNumber+1,l,this._languageConfigurationService);if(_!==null){const b=Dt(e.getLineContent(i.startLineNumber)),v=vs(_,s),C=vs(b,s);if(v!==C){const y=v-C;this.getIndentEditsOfMovingBlock(e,t,i,s,a,y)}}}}else t.addEditOperation(new x(i.startLineNumber,1,i.startLineNumber,1),h+`
`)}else if(d=i.startLineNumber-1,u=e.getLineContent(d),t.addEditOperation(new x(d,1,d+1,1),null),t.addEditOperation(new x(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+u),this.shouldAutoIndent(e,i)){c.getLineContent=f=>f===d?e.getLineContent(i.startLineNumber):e.getLineContent(f);const h=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber-2);if(h!==null)h!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,h);else{const f=Jp(this._autoIndent,c,e.getLanguageIdAtPosition(i.startLineNumber,1),d,l,this._languageConfigurationService);if(f!==null){const g=Dt(e.getLineContent(i.startLineNumber)),_=vs(f,s),b=vs(g,s);if(_!==b){const v=_-b;this.getIndentEditsOfMovingBlock(e,t,i,s,a,v)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>dr.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>dr.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,s){if(s){let o=s.indentation;s.indentAction===yn.None||s.indentAction===yn.Indent?o=s.indentation+s.appendText:s.indentAction===yn.IndentOutdent?o=s.indentation:s.indentAction===yn.Outdent&&(o=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(o))>=0){const l=Dt(e.getLineContent(i));let c=Dt(o);const d=e3(e,i,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const u=vs(c,n),h=vs(l,n);return u-h}}return null}matchEnterRuleMovingDown(e,t,n,i,s,o){if(ga(o)>=0){const a=e.getLineMaxColumn(s),l=bf(this._autoIndent,e,new x(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){const d=e.getLineContent(a);if(ga(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=bf(this._autoIndent,e,new x(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}}matchEnterRule(e,t,n,i,s,o){let a=s;for(;a>=1;){let d;if(a===s&&o!==void 0?d=o:d=e.getLineContent(a),ga(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=bf(this._autoIndent,e,new x(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,i,s,o){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const l=e.getLineContent(a),c=Dt(l),u=vs(c,i)+o,h=Cm(u,i,s);h!==c&&(t.addEditOperation(new x(a,1,a,c.length+1),h),a===n.endLineNumber&&n.endColumn<=c.length+1&&h===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}};iE=ghe([phe(3,_n)],iE);class Ec{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return Ec._COLLATOR||(Ec._COLLATOR=new Intl.Collator),Ec._COLLATOR}getEditOperations(e,t){const n=mhe(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;const i=P8(e,t,n);if(!i)return!1;for(let s=0,o=i.before.length;s<o;s++)if(i.before[s]!==i.after[s])return!0;return!1}}Ec._COLLATOR=null;function P8(r,e,t){const n=e.startLineNumber;let i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;const s=[];for(let a=n;a<=i;a++)s.push(r.getLineContent(a));let o=s.slice(0);return o.sort(Ec.getCollator().compare),t===!0&&(o=o.reverse()),{startLineNumber:n,endLineNumber:i,before:s,after:o}}function mhe(r,e,t){const n=P8(r,e,t);return n?Gt.replace(new x(n.startLineNumber,1,n.endLineNumber,r.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class F8 extends me{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((o,a)=>({selection:o,index:a,ignore:!1}));n.sort((o,a)=>x.compareRangesUsingStarts(o.selection,a.selection));let i=n[0];for(let o=1;o<n.length;o++){const a=n[o];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const s=[];for(const o of n)s.push(new O8(o.selection,this.down,o.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class _he extends F8{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:p("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class bhe extends F8{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:p("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class vhe extends me{constructor(){super({id:"editor.action.duplicateSelection",label:p("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:A.writable,menuOpts:{menuId:M.MenubarSelectionMenu,group:"2_line",title:p({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],s=t.getSelections(),o=t.getModel();for(const a of s)if(a.isEmpty())i.push(new O8(a,!0));else{const l=new ue(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new tq(l,o.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class B8 extends me{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(_n),i=[],s=t.getSelections()||[],o=t.getOption(9);for(const a of s)i.push(new iE(a,this.down,o,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class Che extends B8{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:p("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class yhe extends B8{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:p("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class W8 extends me{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!Ec.canRun(t.getModel(),s,this.descending))return;const i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new Ec(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class whe extends W8{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:p("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:A.writable})}}class She extends W8{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:p("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:A.writable})}}class xhe extends me{constructor(){super({id:"editor.action.removeDuplicateLines",label:p("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:A.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;const i=[],s=[];let o=0;for(const a of t.getSelections()){const l=new Set,c=[];for(let f=a.startLineNumber;f<=a.endLineNumber;f++){const g=n.getLineContent(f);l.has(g)||(c.push(g),l.add(g))}const d=new ue(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),u=a.startLineNumber-o,h=new ue(u,1,u+c.length-1,c[c.length-1].length);i.push(Gt.replace(d,c.join(`
`))),s.push(h),o+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,i,s),t.pushUndoStop()}}class xw extends me{constructor(){super({id:xw.ID,label:p("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:Bn(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new B(a.positionLineNumber,a.positionColumn)));const s=t.getSelection();if(s===null)return;const o=new hhe(s,i);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}xw.ID="editor.action.trimTrailingWhitespace";class khe extends me{constructor(){super({id:"editor.action.deleteLines",label:p("lines.delete","Delete Line"),alias:"Delete Line",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let s=0;const o=[],a=[];for(let l=0,c=n.length;l<c;l++){const d=n[l];let u=d.startLineNumber,h=d.endLineNumber,f=1,g=i.getLineMaxColumn(h);h<i.getLineCount()?(h+=1,g=1):u>1&&(u-=1,f=i.getLineMaxColumn(u)),o.push(Gt.replace(new ue(u,f,h,g),"")),a.push(new ue(u-s,d.positionColumn,u-s,d.positionColumn)),s+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let o=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(o-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:o,positionColumn:s.positionColumn}});t.sort((s,o)=>s.startLineNumber===o.startLineNumber?s.endLineNumber-o.endLineNumber:s.startLineNumber-o.startLineNumber);const n=[];let i=t[0];for(let s=1;s<t.length;s++)i.endLineNumber+1>=t[s].startLineNumber?i.endLineNumber=t[s].endLineNumber:(n.push(i),i=t[s]);return n.push(i),n}}class Lhe extends me{constructor(){super({id:"editor.action.indentLines",label:p("lines.indent","Indent Line"),alias:"Indent Line",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Kt.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class The extends me{constructor(){super({id:"editor.action.outdentLines",label:p("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2135,weight:100}})}run(e,t){vf.Outdent.runEditorCommand(e,t,null)}}class Dhe extends me{constructor(){super({id:"editor.action.insertLineBefore",label:p("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Kt.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class Ehe extends me{constructor(){super({id:"editor.action.insertLineAfter",label:p("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Kt.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class V8 extends me{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),i=this._getRangesToDelete(t),s=[];for(let l=0,c=i.length-1;l<c;l++){const d=i[l],u=i[l+1];x.intersectRanges(d,u)===null?s.push(d):i[l+1]=x.plusRange(d,u)}s.push(i[i.length-1]);const o=this._getEndCursorState(n,s),a=s.map(l=>Gt.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}}class Ahe extends V8{constructor(){super({id:"deleteAllLeft",label:p("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];let s=0;return t.forEach(o=>{let a;if(o.endColumn===1&&s>0){const l=o.startLineNumber-s;a=new ue(l,o.startColumn,l,o.startColumn)}else a=new ue(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn);s+=o.endLineNumber-o.startLineNumber,o.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let n=t;const i=e.getModel();return i===null?[]:(n.sort(x.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){const o=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:i.getLineContent(o).length+1;return new x(o,a,s.startLineNumber,1)}else return new x(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new x(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}}class Ihe extends V8{constructor(){super({id:"deleteAllRight",label:p("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];for(let s=0,o=t.length,a=0;s<o;s++){const l=t[s],c=new ue(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=c:i.push(c)}return n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const n=e.getSelections();if(n===null)return[];const i=n.map(s=>{if(s.isEmpty()){const o=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===o?new x(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new x(s.startLineNumber,s.startColumn,s.startLineNumber,o)}return s});return i.sort(x.compareRangesUsingStarts),i}}class Nhe extends me{constructor(){super({id:"editor.action.joinLines",label:p("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(x.compareRangesUsingStarts);const s=[],o=n.reduce((h,f)=>h.isEmpty()?h.endLineNumber===f.startLineNumber?(i.equalsSelection(h)&&(i=f),f):f.startLineNumber>h.endLineNumber+1?(s.push(h),f):new ue(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>h.endLineNumber?(s.push(h),f):new ue(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn));s.push(o);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=i,u=0;for(let h=0,f=s.length;h<f;h++){const g=s[h],_=g.startLineNumber,b=1;let v=0,C,y;const w=a.getLineContent(g.endLineNumber).length-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){const S=g.getStartPosition();S.lineNumber<a.getLineCount()?(C=_+1,y=a.getLineMaxColumn(C)):(C=S.lineNumber,y=a.getLineMaxColumn(S.lineNumber))}else C=g.endLineNumber,y=a.getLineMaxColumn(C);let L=a.getLineContent(_);for(let S=_+1;S<=C;S++){const k=a.getLineContent(S),D=a.getLineFirstNonWhitespaceColumn(S);if(D>=1){let O=!0;L===""&&(O=!1),O&&(L.charAt(L.length-1)===" "||L.charAt(L.length-1)==="	")&&(O=!1,L=L.replace(/[\s\uFEFF\xA0]+$/g," "));const F=k.substr(D-1);L+=(O?" ":"")+F,O?v=F.length+1:v=F.length}else v=0}const T=new x(_,b,C,y);if(!T.isEmpty()){let S;g.isEmpty()?(l.push(Gt.replace(T,L)),S=new ue(T.startLineNumber-u,L.length-v+1,_-u,L.length-v+1)):g.startLineNumber===g.endLineNumber?(l.push(Gt.replace(T,L)),S=new ue(g.startLineNumber-u,g.startColumn,g.endLineNumber-u,g.endColumn)):(l.push(Gt.replace(T,L)),S=new ue(g.startLineNumber-u,g.startColumn,g.startLineNumber-u,L.length-w)),x.intersectRanges(T,i)!==null?d=S:c.push(S)}u+=T.endLineNumber-T.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class Mhe extends me{constructor(){super({id:"editor.action.transpose",label:p("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:A.writable})}run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=i.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===i.getLineCount())continue;const u=new x(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h=i.getValueInRange(u).split("").reverse().join("");s.push(new si(new ue(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h))}else{const u=new x(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),h=i.getValueInRange(u).split("").reverse().join("");s.push(new FA(u,h,new ue(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class Nb extends me{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=t.getOption(119),o=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new x(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),u=i.getValueInRange(d);o.push(Gt.replace(d,this._modifyText(u,s)))}else{const l=i.getValueInRange(a);o.push(Gt.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}class Rhe extends Nb{constructor(){super({id:"editor.action.transformToUppercase",label:p("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:A.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class Ohe extends Nb{constructor(){super({id:"editor.action.transformToLowercase",label:p("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:A.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class Ug{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class V_ extends Nb{constructor(){super({id:"editor.action.transformToTitlecase",label:p("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:A.writable})}_modifyText(e,t){const n=V_.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}}V_.titleBoundary=new Ug("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class Ac extends Nb{constructor(){super({id:"editor.action.transformToSnakecase",label:p("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:A.writable})}_modifyText(e,t){const n=Ac.caseBoundary.get(),i=Ac.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}}Ac.caseBoundary=new Ug("(\\p{Ll})(\\p{Lu})","gmu");Ac.singleLetters=new Ug("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class Tl extends Nb{constructor(){super({id:"editor.action.transformToKebabcase",label:p("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:A.writable})}static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}_modifyText(e,t){const n=Tl.caseBoundary.get(),i=Tl.singleLetters.get(),s=Tl.underscoreBoundary.get();return!n||!i||!s?e:e.replace(s,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase()}}Tl.caseBoundary=new Ug("(\\p{Ll})(\\p{Lu})","gmu");Tl.singleLetters=new Ug("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");Tl.underscoreBoundary=new Ug("(\\S)(_)(\\S)","gm");ie(_he);ie(bhe);ie(vhe);ie(Che);ie(yhe);ie(whe);ie(She);ie(xhe);ie(xw);ie(khe);ie(Lhe);ie(The);ie(Dhe);ie(Ehe);ie(Ahe);ie(Ihe);ie(Nhe);ie(Mhe);ie(Rhe);ie(Ohe);Ac.caseBoundary.isSupported()&&Ac.singleLetters.isSupported()&&ie(Ac);V_.titleBoundary.isSupported()&&ie(V_);Tl.isSupported()&&ie(Tl);var Phe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},e0=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},sE=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const H8=new ge("LinkedEditingInputVisible",!1),U8="linked-editing-decoration";let Xc=class rE extends j{constructor(e,t,n,i,s){super(),this.languageConfigurationService=i,this._syncRangesToken=0,this._localToDispose=this._register(new Q),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=H8.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Q),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(64)||o.hasChanged(84))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(rE.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(64)||this._editor.getOption(84))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(ve.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const i=new Ca(this._debounceInformation.get(t)),s=()=>{var l;this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},o=new Ca(0),a=l=>{this._rangeSyncTriggerPromise=o.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{i.dispose(),o.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const o=i.match(this._currentWordPattern);if((o?o[0].length:0)!==i.length)return this.clearRanges()}const s=[];for(let o=1,a=this._currentDecorations.length;o<a;o++){const l=this._currentDecorations.getRange(o);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:i});else{let c=t.getValueInRange(l),d=i,u=l.startColumn,h=l.endColumn;const f=lu(c,d);u+=f,c=c.substr(f),d=d.substr(f);const g=Im(c,d);h-=g,c=c.substr(0,c.length-g),d=d.substr(0,d.length-g),(u!==h||d.length!==0)&&s.push({range:new x(l.startLineNumber,u,l.endLineNumber,h),text:d})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const o=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(o)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return sE(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const o=this._currentDecorations.getRange(0);if(o&&o.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=i;const s=Xn(o=>sE(this,void 0,void 0,function*(){try{const a=new fs(!1),l=yield j8(this._providers,n,t,o);if(this._debounceInformation.update(n,a.elapsed()),s!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let c=[];l?.ranges&&(c=l.ranges),this._currentWordPattern=l?.wordPattern||this._languageWordPattern;let d=!1;for(let h=0,f=c.length;h<f;h++)if(x.containsPosition(c[h],t)){if(d=!0,h!==0){const g=c[h];c.splice(h,1),c.unshift(g)}break}if(!d){this.clearRanges();return}const u=c.map(h=>({range:h,options:rE.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(u),this._syncRangesToken++}catch(a){Da(a)||We(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}};Xc.ID="editor.contrib.linkedEditing";Xc.DECORATION=Be.register({description:"linked-editing",stickiness:0,className:U8});Xc=Phe([e0(1,Re),e0(2,be),e0(3,_n),e0(4,Er)],Xc);class Fhe extends me{constructor(){super({id:"editor.action.linkedEditing",label:p("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:le.and(A.writable,A.hasRenameProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(bt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return Se.isUri(i)&&B.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},We):super.runCommand(e,t)}run(e,t){const n=Xc.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const Bhe=Un.bindToContribution(Xc.get);te(new Bhe({id:"cancelLinkedEditingInput",precondition:H8,handler:r=>r.clearRanges(),kbOpts:{kbExpr:A.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function j8(r,e,t,n){const i=r.ordered(e);return V4(i.map(s=>()=>sE(this,void 0,void 0,function*(){try{return yield s.provideLinkedEditingRanges(e,t,n)}catch(o){Jn(o);return}})),s=>!!s&&Si(s?.ranges))}const Whe=I("editor.linkedEditingBackground",{dark:W.fromHex("#f00").transparent(.3),light:W.fromHex("#f00").transparent(.3),hcDark:W.fromHex("#f00").transparent(.3),hcLight:W.white},p("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Vt((r,e)=>{const t=r.getColor(Whe);t&&e.addRule(`.monaco-editor .${U8} { background: ${t}; border-left-color: ${t}; }`)});Aa("_executeLinkedEditingProvider",(r,e,t)=>{const{linkedEditingRangeProvider:n}=r.get(be);return j8(n,e,t,qe.None)});ct(Xc.ID,Xc);ie(Fhe);var $8=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let Vhe=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return $8(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}};class Ty{constructor(e){this._disposables=new Q;let t=[];for(const[n,i]of e){const s=n.links.map(o=>new Vhe(o,i));t=Ty._union(t,s),OE(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const n=[];let i,s,o,a;for(i=0,o=0,s=e.length,a=t.length;i<s&&o<a;){const l=e[i],c=t[o];if(x.areIntersectingOrTouching(l.range,c.range)){i++;continue}x.compareRangesUsingStarts(l.range,c.range)<0?(n.push(l),i++):(n.push(c),o++)}for(;i<s;i++)n.push(e[i]);for(;o<a;o++)n.push(t[o]);return n}}function z8(r,e,t){const n=[],i=r.ordered(e).reverse().map((s,o)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(n[o]=[a,s])},Jn));return Promise.all(i).then(()=>{const s=new Ty(Y_(n));return t.isCancellationRequested?(s.dispose(),new Ty([])):s})}rt.registerCommand("_executeLinkProvider",(r,...e)=>$8(void 0,void 0,void 0,function*(){let[t,n]=e;Lt(t instanceof Se),typeof n!="number"&&(n=0);const{linkProvider:i}=r.get(be),s=r.get(en).getModel(t);if(!s)return[];const o=yield z8(i,s,qe.None);if(!o)return[];for(let l=0;l<Math.min(n,o.links.length);l++)yield o.links[l].resolve(qe.None);const a=o.links.slice(0);return o.dispose(),a}));var Hhe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},t0=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Uhe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let pg=class K8 extends j{constructor(e,t,n,i,s){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=i,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new Tt(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const o=this._register(new uN(e));this._register(o.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(o.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(o.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(65)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}static get(e){return e.getContribution(K8.ID)}computeLinksNow(){return Uhe(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(65))return;const e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Xn(t=>z8(this.providers,e,t));try{const t=new fs(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){We(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(72)==="altKey",n=[],i=Object.keys(this.currentOccurrences);for(const o of i){const a=this.currentOccurrences[o];n.push(a.decorationId)}const s=[];if(e)for(const o of e)s.push(Ef.decoration(o,t));this.editor.changeDecorations(o=>{const a=o.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new Ef(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const n=this.editor.getOption(72)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(s=>{i.activate(s,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(72)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(qe.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===He.file&&s.startsWith(`${He.file}:`)){const a=Se.parse(s);if(a.scheme===He.file){const l=zo(a);let c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(s=pY(o,c))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const o=s instanceof Error?s.message:s;o==="invalid"?this.notificationService.warn(p("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):o==="missing"?this.notificationService.warn(p("missing.url","Failed to open this link because its target is missing.")):We(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return Boolean(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};pg.ID="editor.linkDetector";pg=Hhe([t0(1,Dr),t0(2,xn),t0(3,be),t0(4,Er)],pg);const YP={general:Be.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Be.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Ef{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:Ef._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?YP.active:YP.general);return i.hoverMessage=jhe(e,t),i}activate(e,t){e.changeDecorationOptions(this.decorationId,Ef._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Ef._getOptions(this.link,t,!1))}}function jhe(r,e){const t=r.url&&/^command:/i.test(r.url.toString()),n=r.tooltip?r.tooltip:t?p("links.navigate.executeCmd","Execute command"):p("links.navigate.follow","Follow link"),i=e?Je?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Je?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");if(r.url){let s="";if(/^command:/i.test(r.url.toString())){const a=r.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=p("tooltip.explanation","Execute command {0}",l)}}return new rs("",!0).appendLink(r.url.toString(!0).replace(/ /g,"%20"),n,s).appendMarkdown(` (${i})`)}else return new rs().appendText(`${n} (${i})`)}class $he extends me{constructor(){super({id:"editor.action.openLink",label:p("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=pg.get(t);if(!n||!t.hasModel())return;const i=t.getSelections();for(const s of i){const o=n.getLinkOccurrence(s.getEndPosition());o&&n.openLinkOccurrence(o,!1)}}}ct(pg.ID,pg);ie($he);Vt((r,e)=>{const t=r.getColor(NA);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});var zhe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Khe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function ad(r,e){const t=e.filter(n=>!r.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),i=t.length===1?p("cursorAdded","Cursor added: {0}",n):p("cursorsAdded","Cursors added: {0}",n);aC(i)}}class Ghe extends me{constructor(){super({id:"editor.action.insertCursorAbove",label:p("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,ti.addCursorUp(s,o,i)),s.revealTopMostCursor(n.source),ad(o,s.getCursorStates())}}class qhe extends me{constructor(){super({id:"editor.action.insertCursorBelow",label:p("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,ti.addCursorDown(s,o,i)),s.revealBottomMostCursor(n.source),ad(o,s.getCursorStates())}}class Zhe extends me{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){const s=t.getLineMaxColumn(i);n.push(new ue(i,s,i,s))}e.endColumn>1&&n.push(new ue(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),s=t._getViewModel(),o=s.getCursorStates(),a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),ad(o,s.getCursorStates())}}class Yhe extends me{constructor(){super({id:"editor.action.addCursorsToBottom",label:p("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount(),s=[];for(let l=n[0].startLineNumber;l<=i;l++)s.push(new ue(l,n[0].startColumn,l,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();s.length>0&&t.setSelections(s),ad(a,o.getCursorStates())}}class Xhe extends me{constructor(){super({id:"editor.action.addCursorsToTop",label:p("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new ue(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),o=s.getCursorStates();i.length>0&&t.setSelections(i),ad(o,s.getCursorStates())}}class n0{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class H_{constructor(e,t,n,i,s,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=s,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new H_(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,s,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,s=!0,o=!0):(s=n.wholeWord,o=n.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,d=new ue(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new H_(e,t,i,c,s,o,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new n0(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new n0(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return n?new ue(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new n0(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new n0(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return n?new ue(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824)}}class Pu extends j{constructor(e){super(),this._sessionDispose=this._register(new Q),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(Pu.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=H_.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new ue(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!G8(this._editor.getModel(),t,i)){const o=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){const i=this._editor.getModel();n.searchScope?t=i.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(119):null,!1,1073741824):t=i.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(119):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){const i=this._editor.getSelection();for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a.range.intersectRanges(i)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new ue(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}Pu.ID="editor.contrib.multiCursorController";class jg extends me{run(e,t){const n=Pu.get(t);if(!n)return;const i=Ns.get(t);if(!i)return;const s=t._getViewModel();if(s){const o=s.getCursorStates();this._run(n,i),ad(o,s.getCursorStates())}}}class Qhe extends jg{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2082,weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class Jhe extends jg{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:M.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class efe extends jg{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:Bn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class tfe extends jg{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class nfe extends jg{constructor(){super({id:"editor.action.selectHighlights",label:p("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:3114,weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"3_multi",title:p({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class ife extends jg{constructor(){super({id:"editor.action.changeAll",label:p("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:le.and(A.writable,A.editorTextFocus),kbOpts:{kbExpr:A.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class sfe{constructor(e,t,n,i,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(x.compareRangesUsingStarts)),this._cachedFindMatches}}let Fu=class M0 extends j{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(99),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new Tt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(i=>{this._isEnabled=e.getOption(99)})),this._register(e.onDidChangeCursorSelection(i=>{this._isEnabled&&(i.selection.isEmpty()?i.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(i=>{this._setState(null)})),this._register(e.onDidChangeModelContent(i=>{this._isEnabled&&this.updateSoon.schedule()}));const n=Ns.get(e);n&&this._register(n.getState().onFindReplaceStateChange(i=>{this._update()}))}_update(){this._setState(M0._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const s=Pu.get(n);if(!s)return null;const o=Ns.get(n);if(!o)return null;let a=s.getSession(o);if(!a){const d=n.getSelections();if(d.length>1){const h=o.getState().matchCase;if(!G8(n.getModel(),d,h))return null}a=H_.create(n,o)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=o.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let u=a.searchText;if(c||(u=u.toLowerCase()),d===u&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new sfe(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(119):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(x.compareRangesUsingStarts);const s=[];for(let l=0,c=0,d=n.length,u=i.length;l<d;){const h=n[l];if(c>=u)s.push(h),l++;else{const f=x.compareRangesUsingStarts(h,i[c]);f<0?((i[c].isEmpty()||!x.areIntersecting(h,i[c]))&&s.push(h),l++):(f>0||l++,c++)}}const o=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(74),a=s.map(l=>({range:l,options:o?M0._SELECTION_HIGHLIGHT:M0._SELECTION_HIGHLIGHT_OVERVIEW}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};Fu.ID="editor.contrib.selectionHighlighter";Fu._SELECTION_HIGHLIGHT_OVERVIEW=Be.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:an(p1),position:_r.Inline},overviewRuler:{color:an(P5),position:yr.Center}});Fu._SELECTION_HIGHLIGHT=Be.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});Fu=zhe([Khe(1,be)],Fu);function G8(r,e,t){const n=XP(r,e[0],!t);for(let i=1,s=e.length;i<s;i++){const o=e[i];if(o.isEmpty())return!1;const a=XP(r,o,!t);if(n!==a)return!1}return!0}function XP(r,e,t){const n=r.getValueInRange(e);return t?n.toLowerCase():n}class rfe extends me{constructor(){super({id:"editor.action.focusNextCursor",label:p("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:p("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),o=s.shift();o&&(s.push(o),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),ad(s,i.getCursorStates()))}}class ofe extends me{constructor(){super({id:"editor.action.focusPreviousCursor",label:p("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:p("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),o=s.pop();o&&(s.unshift(o),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),ad(s,i.getCursorStates()))}}ct(Pu.ID,Pu);ct(Fu.ID,Fu);ie(Ghe);ie(qhe);ie(Zhe);ie(Qhe);ie(Jhe);ie(efe);ie(tfe);ie(nfe);ie(ife);ie(Yhe);ie(Xhe);ie(rfe);ie(ofe);var q8=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Bu={Visible:new ge("parameterHintsVisible",!1),MultipleSignatures:new ge("parameterHintsMultipleSignatures",!1)};function Z8(r,e,t,n,i){return q8(this,void 0,void 0,function*(){const s=r.ordered(e);for(const o of s)try{const a=yield o.provideSignatureHelp(e,t,i,n);if(a)return a}catch(a){Jn(a)}})}rt.registerCommand("_executeSignatureHelpProvider",(r,...e)=>q8(void 0,void 0,void 0,function*(){const[t,n,i]=e;Lt(Se.isUri(t)),Lt(B.isIPosition(n)),Lt(typeof i=="string"||!i);const s=r.get(be),o=yield r.get(ps).createModelReference(t);try{const a=yield Z8(s.signatureHelpProvider,o.object.textEditorModel,B.lift(n),{triggerKind:fa.Invoke,isRetrigger:!1,triggerCharacter:i},qe.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{o.dispose()}}));var afe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},ic;(function(r){r.Default={type:0};class e{constructor(i,s){this.request=i,this.previouslyActiveHints=s,this.type=2}}r.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}r.Active=t})(ic||(ic={}));class kw extends j{constructor(e,t,n=kw.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new R),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=ic.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Fi),this.triggerChars=new Uh,this.retriggerChars=new Uh,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new Ca(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=ic.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(We)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(78).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(78).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new ic.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return afe(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(lfe);this._pendingTriggers=[];const s={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),a=this.editor.getPosition();this.state=new ic.Pending(Xn(l=>Z8(this.providers,o,a,s,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l?.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new ic.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=ic.Default),We(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new Uh,this.retriggerChars=new Uh;const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:fa.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:fa.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:fa.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(78).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}kw.DEFAULT_DELAY=120;function lfe(r,e){switch(e.triggerKind){case fa.Invoke:return e;case fa.ContentChange:return r;case fa.TriggerCharacter:default:return e}}var cfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},i0=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Ps=ee,dfe=Nn("parameter-hints-next",m.chevronDown,p("parameterHintsNextIcon","Icon for show next parameter hint.")),ufe=Nn("parameter-hints-previous",m.chevronUp,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let Dy=class Y8 extends j{constructor(e,t,n,i,s){super(),this.editor=e,this.renderDisposeables=this._register(new Q),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Fl({editor:e},i,n)),this.model=this._register(new kw(e,s.signatureHelpProvider)),this.keyVisible=Bu.Visible.bindTo(t),this.keyMultipleSignatures=Bu.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(o=>{o?(this.show(),this.render(o)):this.hide()}))}createParameterHintDOMNodes(){const e=Ps(".editor-widget.parameter-hints-widget"),t=q(e,Ps(".phwrapper"));t.tabIndex=-1;const n=q(t,Ps(".controls")),i=q(n,Ps(".button"+mt.asCSSSelector(ufe))),s=q(n,Ps(".overloads")),o=q(n,Ps(".button"+mt.asCSSSelector(dfe)));this._register(Z(i,"click",h=>{wt.stop(h),this.previous()})),this._register(Z(o,"click",h=>{wt.stop(h),this.next()}));const a=Ps(".body"),l=new cb(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=q(a,Ps(".signature")),d=q(a,Ps(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:s,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(h=>{this.visible&&this.editor.layoutContentWidget(this)}));const u=()=>{if(!this.domNodes)return;const h=this.editor.getOption(46);this.domNodes.element.style.fontSize=`${h.fontSize}px`,this.domNodes.element.style.lineHeight=`${h.lineHeight/h.fontSize}`};u(),this._register(ve.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(h=>h.hasChanged(46)).on(u,null)),this._register(this.editor.onDidLayoutChange(h=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=q(this.domNodes.signature,Ps(".code")),o=this.editor.getOption(46);s.style.fontSize=`${o.fontSize}px`,s.style.fontFamily=o.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,i,l);else{const u=q(s,Ps("span"));u.textContent=i.label}const c=i.parameters[l];if(c?.documentation){const u=Ps("span.documentation");if(typeof c.documentation=="string")u.textContent=c.documentation;else{const h=this.renderMarkdownDocs(c.documentation);u.appendChild(h.element)}q(this.domNodes.docs,Ps("p",{},u))}if(i.documentation!==void 0)if(typeof i.documentation=="string")q(this.domNodes.docs,Ps("p",{},i.documentation));else{const u=this.renderMarkdownDocs(i.documentation);q(this.domNodes.docs,u.element)}const d=this.hasDocs(i,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let u="";const h=i.parameters[l];Array.isArray(h.label)?u=i.label.substring(h.label[0],h.label[1]):u=h.label,h.documentation&&(u+=typeof h.documentation=="string"?`, ${h.documentation}`:`, ${h.documentation.value}`),i.documentation&&(u+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==u&&(di(p("hint","{0}, hint",u)),this.announcedLabel=u)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&jb(t.documentation).length>0||t&&typeof t.documentation=="object"&&jb(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&jb(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&jb(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,s]=this.getParameterLabelOffsets(t,n),o=document.createElement("span");o.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),q(e,o,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${Zs(n.label)}(?=\\W|$)`,"g");i.test(e.label);const s=i.lastIndex-n.label.length;return s>=0?[s,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return Y8.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};Dy.ID="editor.widget.parameterHintsWidget";Dy=cfe([i0(1,Re),i0(2,Dr),i0(3,Qt),i0(4,be)],Dy);const hfe=I("editorHoverWidget.highlightForeground",{dark:Hr,light:Hr,hcDark:Hr,hcLight:Hr},p("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));Vt((r,e)=>{const t=r.getColor(IA);if(t){const c=Li(r.type)?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${c}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=r.getColor(mu);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const i=r.getColor(d1);i&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${i}; }`);const s=r.getColor(u1);s&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${s}; }`);const o=r.getColor(AA);o&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${o}; }`);const a=r.getColor(I5);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const l=r.getColor(hfe);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var ffe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gfe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Wu=class X8 extends j{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(Dy,this.editor))}static get(e){return e.getContribution(X8.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};Wu.ID="editor.controller.parameterHints";Wu=ffe([gfe(1,Ve)],Wu);class pfe extends me{constructor(){super({id:"editor.action.triggerParameterHints",label:p("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:A.hasSignatureHelpProvider,kbOpts:{kbExpr:A.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=Wu.get(t);n&&n.trigger({triggerKind:fa.Invoke})}}ct(Wu.ID,Wu);ie(pfe);const ON=100+75,PN=Un.bindToContribution(Wu.get);te(new PN({id:"closeParameterHints",precondition:Bu.Visible,handler:r=>r.cancel(),kbOpts:{weight:ON,kbExpr:A.focus,primary:9,secondary:[1033]}}));te(new PN({id:"showPrevParameterHint",precondition:le.and(Bu.Visible,Bu.MultipleSignatures),handler:r=>r.previous(),kbOpts:{weight:ON,kbExpr:A.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));te(new PN({id:"showNextParameterHint",precondition:le.and(Bu.Visible,Bu.MultipleSignatures),handler:r=>r.next(),kbOpts:{weight:ON,kbExpr:A.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var mfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Kx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Lw=new ge("renameInputVisible",!1,p("renameInputVisible","Whether the rename input widget is visible"));let oE=class{constructor(e,t,n,i,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new Q,this.allowEditorOverflow=!0,this._visibleContextKey=Lw.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(46)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",p("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,n;const[i,s]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=p({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(s))===null||n===void 0?void 0:n.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,i,s;if(!this._input||!this._domNode)return;const o=e.getColor(po);this._domNode.style.backgroundColor=String((t=e.getColor(wn))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=o?` 0 0 8px 2px ${o}`:"",this._domNode.style.color=String((n=e.getColor(f1))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(h1))!==null&&i!==void 0?i:"");const a=e.getColor(g1);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(s=a?.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(46);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e){var t;(t=this._currentCancelInput)===null||t===void 0||t.call(this,e)}getInput(e,t,n,i,s,o){this._domNode.classList.toggle("preview",s),this._position=new B(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Q;return new Promise(l=>{this._currentCancelInput=c=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(c),!0),this._currentAcceptInput=c=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:s&&c})},a.add(o.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};oE=mfe([Kx(2,It),Kx(3,Mn),Kx(4,Re)],oE);var _fe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},vd=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},ou=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class FN{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return ou(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const s=yield i.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new x(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:x.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return ou(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return ou(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const o=yield s.provideRenameEdits(this.model,this.position,e,i);if(o){if(o.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(o.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(p("no result","No result.")),i);return o})}}function bfe(r,e,t,n){return ou(this,void 0,void 0,function*(){const i=new FN(e,t,r),s=yield i.resolveRenameLocation(qe.None);return s?.rejectReason?{edits:[],rejectReason:s.rejectReason}:i.provideRenameEdits(n,qe.None)})}let Vu=class Q8{constructor(e,t,n,i,s,o,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=s,this._logService=o,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new Q,this._cts=new fi,this._renameInputField=this._disposableStore.add(new Cc(()=>this._disposableStore.add(this._instaService.createInstance(oE,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(Q8.ID)}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return ou(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const n=this.editor.getPosition(),i=new FN(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!i.hasProvider())return;this._cts=new ku(this.editor,5);let s;try{const h=i.resolveRenameLocation(this._cts.token);this._progressService.showWhile(h,250),s=yield h}catch(h){(e=Is.get(this.editor))===null||e===void 0||e.showMessage(h||p("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}if(!s)return;if(s.rejectReason){(t=Is.get(this.editor))===null||t===void 0||t.showMessage(s.rejectReason,n);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new ku(this.editor,5,s.range);const o=this.editor.getSelection();let a=0,l=s.text.length;!x.isEmpty(o)&&!x.spansMultipleLines(o)&&x.containsRange(s.range,o)&&(a=Math.max(0,o.startColumn-s.range.startColumn),l=Math.min(s.range.endColumn,o.endColumn)-s.range.startColumn);const c=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),d=yield this._renameInputField.value.getInput(s.range,s.text,a,l,c,this._cts.token);if(typeof d=="boolean"){d&&this.editor.focus();return}this.editor.focus();const u=iA(i.provideRenameEdits(d.newName,this._cts.token),this._cts.token).then(h=>ou(this,void 0,void 0,function*(){if(!(!h||!this.editor.hasModel())){if(h.rejectReason){this._notificationService.info(h.rejectReason);return}this.editor.setSelection(x.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(Og.convert(h),{editor:this.editor,showPreview:d.wantsPreview,label:p("label","Renaming '{0}' to '{1}'",s?.text,d.newName),code:"undoredo.rename",quotableLabel:p("quotableLabel","Renaming {0} to {1}",s?.text,d.newName),respectAutoSaveConfig:!0}).then(f=>{f.ariaSummary&&di(p("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,d.newName,f.ariaSummary))}).catch(f=>{this._notificationService.error(p("rename.failedApply","Rename failed to apply edits")),this._logService.error(f)})}}),h=>{this._notificationService.error(p("rename.failed","Rename failed to compute edits")),this._logService.error(h)});return this._progressService.showWhile(u,250),u})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};Vu.ID="editor.contrib.renameController";Vu=_fe([vd(1,Ve),vd(2,xn),vd(3,fb),vd(4,id),vd(5,Zr),vd(6,cA),vd(7,be)],Vu);class vfe extends me{constructor(){super({id:"editor.action.rename",label:p("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:le.and(A.writable,A.hasRenameProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(bt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return Se.isUri(i)&&B.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},We):super.runCommand(e,t)}run(e,t){const n=Vu.get(t);return n?n.run():Promise.resolve()}}ct(Vu.ID,Vu);ie(vfe);const BN=Un.bindToContribution(Vu.get);te(new BN({id:"acceptRenameInput",precondition:Lw,handler:r=>r.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:A.focus,primary:3}}));te(new BN({id:"acceptRenameInputWithPreview",precondition:le.and(Lw,le.has("config.editor.rename.enablePreview")),handler:r=>r.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:A.focus,primary:1024+3}}));te(new BN({id:"cancelRenameInput",precondition:Lw,handler:r=>r.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:A.focus,primary:9,secondary:[1033]}}));Aa("_executeDocumentRenameProvider",function(r,e,t,...n){const[i]=n;Lt(typeof i=="string");const{renameProvider:s}=r.get(be);return bfe(s,e,t,i)});Aa("_executePrepareRename",function(r,e,t){return ou(this,void 0,void 0,function*(){const{renameProvider:n}=r.get(be),s=yield new FN(e,t,n).resolveRenameLocation(qe.None);if(s?.rejectReason)throw new Error(s.rejectReason);return s})});Jt.as(Bl.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:p("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var Cfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yfe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},QP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},Gx;let U_=class extends j{constructor(e,t){super(),this._sessionStore=new Q,this._ranges=[],this._rangesVersionId=0,this._editor=e,this._languageFeaturesService=t,this.stickyScrollWidget=new wfe(this._editor),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(34)&&this.onConfigurationChange()})),this._updateSoon=this._register(new Tt(()=>this._update(!0),50)),this.onConfigurationChange()}onConfigurationChange(){if(this._editor.getOption(34).stickyScroll.enabled===!1){this.stickyScrollWidget.emptyRootNode(),this._editor.removeOverlayWidget(this.stickyScrollWidget),this._sessionStore.clear();return}else this._editor.addOverlayWidget(this.stickyScrollWidget),this._sessionStore.add(this._editor.onDidChangeModel(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidScrollChange(()=>this._update(!1))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidChangeModelTokens(t=>this._onTokensChange(t))),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this._update(!0))),this._update(!0)}_needsUpdate(e){const t=this.stickyScrollWidget.getCurrentLines();for(const n of t)for(const i of e.ranges)if(n>=i.fromLineNumber&&n<=i.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._update(!1)}_update(e=!1){var t,n;return QP(this,void 0,void 0,function*(){e&&((t=this._cts)===null||t===void 0||t.dispose(!0),this._cts=new fi,yield this._updateOutlineModel(this._cts.token));const i=(n=this._editor._getViewModel())===null||n===void 0?void 0:n.getHiddenAreas();if(i)for(const s of i)this._ranges=this._ranges.filter(o=>!(o[0]>=s.startLineNumber&&o[1]<=s.endLineNumber+1));this._renderStickyScroll()})}_findLineRanges(e,t){if(e?.children.size){let n=!1;for(const i of e?.children.values()){const s=i.symbol.kind;(s===4||s===8||s===11||s===10||s===5||s===1)&&(n=!0,this._findLineRanges(i,t+1))}n||this._addOutlineRanges(e,t)}else this._addOutlineRanges(e,t)}_addOutlineRanges(e,t){let n=0,i=0;for(;e;){const s=e.symbol.kind;if((s===4||s===8||s===11||s===10||s===5||s===1)&&(n=e?.symbol.range.startLineNumber,i=e?.symbol.range.endLineNumber,this._ranges.push([n,i,t]),t--),e.parent instanceof wy)e=e.parent;else break}}_updateOutlineModel(e){return QP(this,void 0,void 0,function*(){if(this._editor.hasModel()){const t=this._editor.getModel(),n=t.getVersionId(),i=yield rl.create(this._languageFeaturesService.documentSymbolProvider,t,e);if(e.isCancellationRequested)return;this._ranges=[],this._rangesVersionId=n;for(const s of i.children.values()){if(s instanceof wy){const a=s.symbol.kind;a===4||a===8||a===11||a===10||a===5||a===1?this._findLineRanges(s,1):this._findLineRanges(s,0)}this._ranges=this._ranges.sort(function(a,l){return a[0]!==l[0]?a[0]-l[0]:a[1]!==l[1]?l[1]-a[1]:a[2]-l[2]});let o=[];for(const[a,l]of this._ranges.entries()){const[c,d,u]=l;o[0]===c&&o[1]===d?this._ranges.splice(a,1):o=l}}}})}_renderStickyScroll(){if(!this._editor.hasModel())return;const e=this._editor.getOption(61),t=this._editor.getModel();if(this._rangesVersionId!==t.getVersionId())return;const n=this._editor.getScrollTop();this.stickyScrollWidget.emptyRootNode();const i=new Set;for(const[s,o]of this._ranges.entries()){const[a,l,c]=o;if(l-a>0&&t.getLineContent(a)!==""){const d=(c-1)*e,u=c*e,h=this._editor.getBottomForLineNumber(a)-n,f=this._editor.getTopForLineNumber(l)-n,g=this._editor.getBottomForLineNumber(l)-n;if(i.has(a))this._ranges.splice(s,1);else if(d>=f-1&&d<g-2){i.add(a),this.stickyScrollWidget.pushCodeLine(new eF(a,c,this._editor,-1,g-u));break}else u>h&&u<g-1&&(i.add(a),this.stickyScrollWidget.pushCodeLine(new eF(a,c,this._editor,0,0)))}}this.stickyScrollWidget.updateRootNode()}dispose(){super.dispose(),this._sessionStore.dispose()}};U_.ID="store.contrib.stickyScrollController";U_=Cfe([yfe(1,be)],U_);const JP=(Gx=window.trustedTypes)===null||Gx===void 0?void 0:Gx.createPolicy("stickyScrollViewLayer",{createHTML:r=>r});class eF{constructor(e,t,n,i,s){this._lineNumber=e,this._depth=t,this._editor=n,this._zIndex=i,this._relativePosition=s,this.effectiveLineHeight=0,this.effectiveLineHeight=this._editor.getOption(61)+this._relativePosition}get lineNumber(){return this._lineNumber}getDomNode(){const e=document.createElement("div"),t=this._editor._getViewModel(),n=t.coordinatesConverter.convertModelPositionToViewPosition(new B(this._lineNumber,1)).lineNumber,i=t.getViewLineRenderingData(n);let s;try{s=Ls.filter(i.inlineDecorations,n,i.minColumn,i.maxColumn)}catch{s=[]}const o=new td(!0,!0,i.content,i.continuesWithWrappedLine,i.isBasicASCII,i.containsRTL,0,i.tokens,s,i.tabSize,i.startVisibleColumn,1,1,1,100,"none",!0,!0,null),a=Mc(400);tb(o,a);let l;JP?l=JP.createHTML(a.build()):l=a.build();const c=document.createElement("span");c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",c.style.overflow="hidden",c.style.whiteSpace="nowrap",c.style.display="inline-block",c.style.lineHeight=this._editor.getOption(61).toString()+"px",c.innerHTML=l;const d=document.createElement("span");d.style.width=this._editor.getLayoutInfo().contentLeft.toString()+"px",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.color="var(--vscode-editorLineNumber-foreground)",d.style.display="inline-block",d.style.lineHeight=this._editor.getOption(61).toString()+"px";const u=document.createElement("span");return u.innerText=this._lineNumber.toString(),u.style.paddingLeft=this._editor.getLayoutInfo().lineNumbersLeft.toString()+"px",u.style.width=this._editor.getLayoutInfo().lineNumbersWidth.toString()+"px",u.style.backgroundColor="var(--vscode-editorStickyScroll-background)",u.style.textAlign="right",u.style.float="left",u.style.lineHeight=this._editor.getOption(61).toString()+"px",d.appendChild(u),e.onclick=h=>{h.stopPropagation(),h.preventDefault(),this._editor.revealPosition({lineNumber:this._lineNumber-this._depth+1,column:1})},e.onmouseover=h=>{u.style.background="var(--vscode-editorStickyScrollHover-background)",c.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",d.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",e.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",u.style.cursor="pointer",c.style.cursor="pointer",e.style.cursor="pointer",d.style.cursor="pointer"},e.onmouseleave=h=>{u.style.background="var(--vscode-editorStickyScroll-background)",c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.backgroundColor="var(--vscode-editorStickyScroll-background)"},this._editor.applyFontInfo(c),this._editor.applyFontInfo(u),e.appendChild(d),e.appendChild(c),e.style.zIndex=this._zIndex.toString(),e.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.width="100%",e.style.lineHeight=this._editor.getOption(61).toString()+"px",e.style.height=this._editor.getOption(61).toString()+"px",this._relativePosition&&(e.style.position="relative",e.style.top=this._relativePosition+"px",e.style.width="100%"),e}}class wfe{constructor(e){this._editor=e,this.arrayOfCodeLines=[],this.rootDomNode=document.createElement("div"),this.rootDomNode=document.createElement("div"),this.rootDomNode.style.width="100%",this.rootDomNode.style.boxShadow="var(--vscode-scrollbar-shadow) 0 6px 6px -6px"}getCurrentLines(){const e=[];for(const t of this.arrayOfCodeLines)e.push(t.lineNumber);return e}pushCodeLine(e){this.arrayOfCodeLines.push(e)}updateRootNode(){let e=0;for(const t of this.arrayOfCodeLines)e+=t.effectiveLineHeight,this.rootDomNode.appendChild(t.getDomNode());this.rootDomNode.style.height=e.toString()+"px"}emptyRootNode(){this.arrayOfCodeLines.length=0,Fn(this.rootDomNode)}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this.rootDomNode.style.zIndex="2",this.rootDomNode.style.backgroundColor="var(--vscode-editorStickyScroll-background)",this.rootDomNode}getPosition(){return{preference:null}}}ct(U_.ID,U_);class Sfe{provideSelectionRanges(e,t){const n=[];for(const i of t){const s=[];n.push(s),this._addInWordRanges(s,e,i),this._addWordRanges(s,e,i),this._addWhitespaceLine(s,e,i),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;const{word:s,startColumn:o}=i,a=n.column-o;let l=a,c=a,d=0;for(;l>=0;l--){const u=s.charCodeAt(l);if(l!==a&&(u===95||u===45))break;if(cc(u)&&Yo(d))break;d=u}for(l+=1;c<s.length;c++){const u=s.charCodeAt(c);if(Yo(u)&&cc(d))break;if(u===95||u===45)break;d=u}l<c&&e.push({range:new x(n.lineNumber,o+l,n.lineNumber,o+c)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new x(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new x(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var xfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},kfe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Tw=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class WN{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new WN(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}let mg=class J8{constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}static get(e){return e.getContribution(J8.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return Tw(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield tW(this._languageFeaturesService.selectionRangeProvider,n,t.map(s=>s.getPosition()),this._editor.getOption(104),qe.None).then(s=>{var o;if(!(!Si(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!qs(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new WN(0,a)),(o=this._selectionListener)===null||o===void 0||o.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(s=>s.mov(e));const i=this._state.map(s=>ue.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}};mg.ID="editor.contrib.smartSelectController";mg=xfe([kfe(1,be)],mg);class eW extends me{constructor(e,t){super(t),this._forward=e}run(e,t){return Tw(this,void 0,void 0,function*(){const n=mg.get(t);n&&(yield n.run(this._forward))})}}class Lfe extends eW{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:p("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}rt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class Tfe extends eW{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:p("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:M.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}ct(mg.ID,mg);ie(Lfe);ie(Tfe);function tW(r,e,t,n,i){return Tw(this,void 0,void 0,function*(){const s=r.all(e).concat(new Sfe);s.length===1&&s.unshift(new Ws);const o=[],a=[];for(const l of s)o.push(Promise.resolve(l.provideSelectionRanges(e,t,i)).then(c=>{if(Si(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const u of c[d])x.isIRange(u.range)&&x.containsPosition(u.range,t[d])&&a[d].push(x.lift(u.range))}},Jn));return yield Promise.all(o),a.map(l=>{if(l.length===0)return[];l.sort((h,f)=>B.isBefore(h.getStartPosition(),f.getStartPosition())?1:B.isBefore(f.getStartPosition(),h.getStartPosition())||B.isBefore(h.getEndPosition(),f.getEndPosition())?-1:B.isBefore(f.getEndPosition(),h.getEndPosition())?1:0);const c=[];let d;for(const h of l)(!d||x.containsRange(h,d)&&!x.equalsRange(h,d))&&(c.push(h),d=h);if(!n.selectLeadingAndTrailingWhitespace)return c;const u=[c[0]];for(let h=1;h<c.length;h++){const f=c[h-1],g=c[h];if(g.startLineNumber!==f.startLineNumber||g.endLineNumber!==f.endLineNumber){const _=new x(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(f)&&g.containsRange(_)&&!g.equalsRange(_)&&u.push(_);const b=new x(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));b.containsRange(f)&&!b.equalsRange(_)&&g.containsRange(b)&&!g.equalsRange(b)&&u.push(b)}u.push(g)}return u})})}rt.registerCommand("_executeSelectionRangeProvider",function(r,...e){return Tw(this,void 0,void 0,function*(){const[t,n]=e;Lt(Se.isUri(t));const i=r.get(be).selectionRangeProvider,s=yield r.get(ps).createModelReference(t);try{return tW(i,s.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0},qe.None)}finally{s.dispose()}})});var VN=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},au=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Dfe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class Efe{constructor(e,t,n,i,s,o){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=i,this.command=s,this.completion=o}}let aE=class extends RV{constructor(e,t,n,i,s,o){super(s.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=i,this._suggestMemoryService=o}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.incomplete.size===0}get items(){var e;const t=[],{items:n}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=Ye.slice(n,i),o=Ye.slice(n,0,i);let a=5;for(const l of Ye.concat(s,o)){if(l.score===So.Default)continue;const c=new x(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),d=l.completion.insertTextRules&&l.completion.insertTextRules&Y0.InsertAsSnippet?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new Efe(c,d,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(qe.None)}return t}};aE=VN([au(5,mw)],aE);let lE=class{constructor(e,t,n,i){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=n,this._suggestMemoryService=i}provideInlineCompletions(e,t,n,i){var s;return Dfe(this,void 0,void 0,function*(){if(n.selectedSuggestionInfo)return;const o=this._getEditorOption(81,e);if(of.isAllOff(o))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(of.valueFor(o,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c?.word||(d=this._getTriggerCharacterInfo(e,t)),!c?.word&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let u;const h=e.getValueInRange(new x(t.lineNumber,1,t.lineNumber,t.column));if(!d&&(!((s=this._lastResult)===null||s===void 0)&&s.canBeReused(e,t.lineNumber,c))){const f=new jP(h,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=f,this._lastResult.acquire(),u=this._lastResult}else{const f=yield vN(this._languageFeatureService.completionProvider,e,t,new A_(void 0,void 0,d?.providers),d&&{triggerKind:1,triggerCharacter:d.ch},i);let g;f.needsClipboard&&(g=yield this._clipboardService.readText());const _=new lc(f.items,t.column,new jP(h,0),co.None,this._getEditorOption(108,e),this._getEditorOption(103,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},g);u=new aE(e,t.lineNumber,c,_,f,this._suggestMemoryService)}return this._lastResult=u,u})}handleItemDidShow(e,t){t.completion.resolve(qe.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var n;const i=e.getValueInRange(x.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const o of this._languageFeatureService.completionProvider.all(e))!((n=o.triggerCharacters)===null||n===void 0)&&n.includes(i)&&s.add(o);if(s.size!==0)return{providers:s,ch:i}}};lE=VN([au(1,be),au(2,Hl),au(3,mw)],lE);let Ey=class Bh{constructor(e,t,n,i){if(++Bh._counter===1){const s=i.createInstance(lE,(o,a)=>{var l;return((l=n.listCodeEditors().find(d=>d.getModel()===a))!==null&&l!==void 0?l:e).getOption(o)});Bh._disposable=t.inlineCompletionsProvider.register("*",s)}}dispose(){var e;--Bh._counter===0&&((e=Bh._disposable)===null||e===void 0||e.dispose(),Bh._disposable=void 0)}};Ey._counter=0;Ey=VN([au(1,be),au(2,bt),au(3,Ve)],Ey);ct("suggest.inlineCompletionsProvider",Ey);class Afe extends me{constructor(){super({id:"editor.action.forceRetokenize",label:p("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.tokenization.resetTokenization();const i=new fs(!0);n.tokenization.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}ie(Afe);class _g extends me{constructor(){super({id:_g.ID,label:p({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const i=!fC.getTabFocusMode();fC.setTabFocusMode(i),di(i?p("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):p("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}_g.ID="editor.action.toggleTabFocusMode";ie(_g);var Ife=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nfe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let cE=class extends j{constructor(e,t,n={},i){var s;super(),this._link=t,this._enabled=!0,this.el=q(e,ee("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const o=this._register(new Et(this.el,"click")),a=this._register(new Et(this.el,"keypress")),l=ve.chain(a.event).map(u=>new jt(u)).filter(u=>u.keyCode===3).event,c=this._register(new Et(this.el,Bt.Tap)).event;this._register(kt.addTarget(this.el));const d=ve.any(o.event,l,c);this._register(d(u=>{this.enabled&&(wt.stop(u,!0),n?.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};cE=Ife([Nfe(3,Dr)],cE);Vt((r,e)=>{const t=r.getColor(d1);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=r.getColor(u1);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var nW=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iW=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Mfe=26;let dE=class extends j{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(uE))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,Mfe)}};dE=nW([iW(1,Ve)],dE);let uE=class extends j{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Fl,{}),this.element=ee("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ee("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Fn(this.element)}show(e){Fn(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=q(this.element,ee("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(ee(`div${mt.asCSSSelector(e.icon)}`));const i=q(this.element,ee("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=q(this.element,ee("div.message-actions-container")),e.actions)for(const o of e.actions)this._register(this.instantiationService.createInstance(cE,this.messageActionsContainer,Object.assign(Object.assign({},o),{tabIndex:-1}),{}));const s=q(this.element,ee("div.action-container"));this.actionBar=this._register(new Sa(s)),this.actionBar.push(this._register(new Ds("banner.close","Close Banner",mt.asClassName(X3),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};uE=nW([iW(0,Ve)],uE);var HN=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Af=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Ci=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Rfe=Nn("extensions-warning-message",m.warning,p("warningIcon","Icon shown with a warning message in the extensions editor."));let bg=class extends j{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const o=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=o)a={message:p("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new zg};else if(s.ambiguousCharacterCount>=o)a={message:p("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new ld};else if(s.invisibleCharacterCount>=o)a={message:p("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new $g};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:Rfe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(dE,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(115),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(115)&&(this._options=e.getOption(115),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=Ofe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?k6:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new hE(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new Pfe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};bg.ID="editor.contrib.unicodeHighlighter";bg=HN([Af(1,Tr),Af(2,f9),Af(3,Ve)],bg);function Ofe(r,e){return{nonBasicASCII:e.nonBasicASCII===Bs?!r:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Bs?!r:e.includeComments,includeStrings:e.includeStrings===Bs?!r:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let hE=class extends j{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Tt(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:Ay.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!tI(t,e))return null;const n=t.getValueInRange(e.range);return{reason:sW(n,this._options),inComment:nI(t,e),inString:iI(t,e)}}};hE=HN([Af(3,Tr)],hE);class Pfe extends j{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Tt(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const s=lA.computeUnicodeHighlights(this._model,this._options,i);for(const o of s.ranges)n.ranges.push(o);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:Ay.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),n=t.getValueInRange(e.range);return tI(t,e)?{reason:sW(n,this._options),inComment:nI(t,e),inString:iI(t,e)}:null}}let fE=class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=4}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(bg.ID);if(!i)return[];const s=[];let o=300;for(const a of t){const l=i.getDecorationInfo(a);if(!l)continue;const d=n.getValueInRange(a.range).codePointAt(0),u=tF(d);let h;switch(l.reason.kind){case 0:h=p("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",u,tF(l.reason.confusableWith.codePointAt(0)));break;case 1:h=p("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",u);break;case 2:h=p("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",u);break}const f={codePoint:d,reason:l.reason,inComment:l.inComment,inString:l.inString},g=p("unicodeHighlight.adjustSettings","Adjust settings"),_=`command:${Mb.ID}?${encodeURIComponent(JSON.stringify(f))}`,b=new rs("",!0).appendMarkdown(h).appendText(" ").appendLink(_,g);s.push(new ra(this,a.range,[b],o++))}return s}renderHoverParts(e,t){return $B(e,t,this._editor,this._languageService,this._openerService)}};fE=HN([Af(1,Qt),Af(2,Dr)],fE);function gE(r){return`U+${r.toString(16).padStart(4,"0")}`}function tF(r){let e=`\`${gE(r)}\``;return pa.isInvisibleCharacter(r)||(e+=` "${`${Ffe(r)}`}"`),e}function Ffe(r){return r===96?"`` ` ``":"`"+String.fromCodePoint(r)+"`"}function sW(r,e){return lA.computeUnicodeHighlightReason(r,e)}class Ay{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let i=this.map.get(n);return i||(i=Be.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}}Ay.instance=new Ay;class Bfe extends me{constructor(){super({id:ld.ID,label:p("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return Ci(this,void 0,void 0,function*(){const i=e?.get(ft);i&&this.runAction(i)})}runAction(e){return Ci(this,void 0,void 0,function*(){yield e.updateValue(is.includeComments,!1,2)})}}class Wfe extends me{constructor(){super({id:ld.ID,label:p("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return Ci(this,void 0,void 0,function*(){const i=e?.get(ft);i&&this.runAction(i)})}runAction(e){return Ci(this,void 0,void 0,function*(){yield e.updateValue(is.includeStrings,!1,2)})}}class ld extends me{constructor(){super({id:ld.ID,label:p("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return Ci(this,void 0,void 0,function*(){const i=e?.get(ft);i&&this.runAction(i)})}runAction(e){return Ci(this,void 0,void 0,function*(){yield e.updateValue(is.ambiguousCharacters,!1,2)})}}ld.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class $g extends me{constructor(){super({id:$g.ID,label:p("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return Ci(this,void 0,void 0,function*(){const i=e?.get(ft);i&&this.runAction(i)})}runAction(e){return Ci(this,void 0,void 0,function*(){yield e.updateValue(is.invisibleCharacters,!1,2)})}}$g.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class zg extends me{constructor(){super({id:zg.ID,label:p("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return Ci(this,void 0,void 0,function*(){const i=e?.get(ft);i&&this.runAction(i)})}runAction(e){return Ci(this,void 0,void 0,function*(){yield e.updateValue(is.nonBasicASCII,!1,2)})}}zg.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class Mb extends me{constructor(){super({id:Mb.ID,label:p("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return Ci(this,void 0,void 0,function*(){const{codePoint:i,reason:s,inString:o,inComment:a}=n,l=String.fromCodePoint(i),c=e.get(Ul),d=e.get(ft);function u(g){return pa.isInvisibleCharacter(g)?p("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",gE(g)):p("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${gE(g)} "${l}"`)}const h=[];if(s.kind===0)for(const g of s.notAmbiguousInLocales)h.push({label:p("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',g),run:()=>Ci(this,void 0,void 0,function*(){Hfe(d,[g])})});if(h.push({label:u(i),run:()=>Vfe(d,[i])}),a){const g=new Bfe;h.push({label:g.label,run:()=>Ci(this,void 0,void 0,function*(){return g.runAction(d)})})}else if(o){const g=new Wfe;h.push({label:g.label,run:()=>Ci(this,void 0,void 0,function*(){return g.runAction(d)})})}if(s.kind===0){const g=new ld;h.push({label:g.label,run:()=>Ci(this,void 0,void 0,function*(){return g.runAction(d)})})}else if(s.kind===1){const g=new $g;h.push({label:g.label,run:()=>Ci(this,void 0,void 0,function*(){return g.runAction(d)})})}else if(s.kind===2){const g=new zg;h.push({label:g.label,run:()=>Ci(this,void 0,void 0,function*(){return g.runAction(d)})})}else Ufe(s);const f=yield c.pick(h,{title:p("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}Mb.ID="editor.action.unicodeHighlight.showExcludeOptions";function Vfe(r,e){return Ci(this,void 0,void 0,function*(){const t=r.getValue(is.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield r.updateValue(is.allowedCharacters,n,2)})}function Hfe(r,e){var t;return Ci(this,void 0,void 0,function*(){const n=(t=r.inspect(is.allowedLocales).user)===null||t===void 0?void 0:t.value;let i;typeof n=="object"&&n?i=Object.assign({},n):i={};for(const s of e)i[s]=!0;yield r.updateValue(is.allowedLocales,i,2)})}function Ufe(r){throw new Error(`Unexpected value: ${r}`)}ie(ld);ie($g);ie(zg);ie(Mb);ct(bg.ID,bg);oh.register(fE);var jfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nF=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},$fe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const rW="ignoreUnusualLineTerminators";function zfe(r,e,t){r.setModelProperty(e.uri,rW,t)}function Kfe(r,e){return r.getModelProperty(e.uri,rW)}let j_=class extends j{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(116),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&(this._config=this._editor.getOption(116),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return $fe(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||Kfe(this._codeEditorService,e)===!0||this._editor.getOption(83))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:p("unusualLineTerminators.title","Unusual Line Terminators"),message:p("unusualLineTerminators.message","Detected unusual line terminators"),detail:p("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",kr(e.uri)),primaryButton:p("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:p("unusualLineTerminators.ignore","Ignore")})).confirmed){zfe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};j_.ID="editor.contrib.unusualLineTerminatorsDetector";j_=jfe([nF(1,hb),nF(2,bt)],j_);ct(j_.ID,j_);var Gfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yp=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let $_=class extends j{constructor(e,t,n,i,s,o){super(),this._modelService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=o.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new Tt(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(LI)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!vT(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!see(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=Xn(o=>Promise.resolve(xI(this._provider,e,t,o))),s=new fs(!1);return i.then(o=>{if(this._debounceInformation.update(e,s.elapsed()),!o||!o.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=o,c=this._modelService.getSemanticTokensProviderStyling(a);e.tokenization.setPartialSemanticTokens(t,b9(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}};$_.ID="editor.contrib.viewportSemanticTokens";$_=Gfe([yp(1,en),yp(2,It),yp(3,ft),yp(4,Er),yp(5,be)],$_);ct($_.ID,$_);var qfe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iF=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Zfe=I("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},p("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Yfe=I("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},p("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Xfe=I("editor.wordHighlightBorder",{light:null,dark:null,hcDark:$t,hcLight:$t},p("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),Qfe=I("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:$t,hcLight:$t},p("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),Jfe=I("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},p("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ege=I("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},p("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Dw=new ge("hasWordHighlights",!1);function oW(r,e,t,n){const i=r.ordered(e);return V4(i.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,n)).then(void 0,Jn)),Si)}class aW{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Xn(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new x(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,s=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t);let l=Boolean(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=n.length;!l&&c<d;c++){const u=n.getRange(c);u&&u.startLineNumber===i&&u.startColumn<=s&&u.endColumn>=o&&(l=!0)}return l}cancel(){this.result.cancel()}}class tge extends aW{constructor(e,t,n,i){super(e,t,n),this._providers=i}_compute(e,t,n,i){return oW(this._providers,e,t.getPosition(),i).then(s=>s||[])}}class nge extends aW{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return Rc(250,i).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:Em.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}}function ige(r,e,t,n){return r.has(e)?new tge(e,t,n,r):new nge(e,t,n)}Aa("_executeDocumentHighlights",(r,e,t)=>{const n=r.get(be);return oW(n.documentHighlightProvider,e,t,qe.None)});class Kg{constructor(e,t,n){this.toUnhook=new Q,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this._hasWordHighlights=Dw.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(74),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(i=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(i)})),this.toUnhook.add(e.onDidChangeModelContent(i=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(i=>{const s=this.editor.getOption(74);this.occurrencesHighlight!==s&&(this.occurrencesHighlight=s,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(x.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(i.startLineNumber);di(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(i.startLineNumber);di(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){const e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}const t=e.startColumn,n=e.endColumn,i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const o=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=ige(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(119)),this.workerRequest.result.then(a=>{o===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},We)}}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:Kg._getDecorationOptions(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===Em.Write?this._WRITE_OPTIONS:e===Em.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}Kg._WRITE_OPTIONS=Be.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:an(ege),position:yr.Center},minimap:{color:an(p1),position:_r.Inline}});Kg._TEXT_OPTIONS=Be.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:an(P5),position:yr.Center},minimap:{color:an(p1),position:_r.Inline}});Kg._REGULAR_OPTIONS=Be.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:an(Jfe),position:yr.Center},minimap:{color:an(p1),position:_r.Inline}});let Hu=class lW extends j{constructor(e,t,n){super(),this.wordHighlighter=null;const i=()=>{e.hasModel()&&(this.wordHighlighter=new Kg(e,n.documentHighlightProvider,t))};this._register(e.onDidChangeModel(s=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}static get(e){return e.getContribution(lW.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};Hu.ID="editor.contrib.wordHighlighter";Hu=qfe([iF(1,Re),iF(2,be)],Hu);class cW extends me{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=Hu.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class sge extends cW{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:p("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:Dw,kbOpts:{kbExpr:A.editorTextFocus,primary:65,weight:100}})}}class rge extends cW{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:p("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:Dw,kbOpts:{kbExpr:A.editorTextFocus,primary:1089,weight:100}})}}class oge extends me{constructor(){super({id:"editor.action.wordHighlight.trigger",label:p("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:Dw.toNegated(),kbOpts:{kbExpr:A.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=Hu.get(t);i&&i.restoreViewState(!0)}}ct(Hu.ID,Hu);ie(sge);ie(rge);ie(oge);Vt((r,e)=>{const t=r.getColor(EA);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=r.getColor(Zfe);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const i=r.getColor(Yfe);i&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${i}; }`);const s=r.getColor(Rz);s&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${Li(r.type)?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const o=r.getColor(Xfe);o&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${Li(r.type)?"dashed":"solid"} ${o}; box-sizing: border-box; }`);const a=r.getColor(Qfe);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${Li(r.type)?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class Ew extends Un{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=wr(t.getOption(119)),s=t.getModel(),a=t.getSelections().map(l=>{const c=new B(l.positionLineNumber,l.positionColumn),d=this._move(i,s,c,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>Ze.fromModelSelection(l))),a.length===1){const l=new B(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new ue(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new ue(t.lineNumber,t.column,t.lineNumber,t.column)}}class cd extends Ew{_move(e,t,n,i){return dt.moveWordLeft(e,t,n,i)}}class dd extends Ew{_move(e,t,n,i){return dt.moveWordRight(e,t,n,i)}}class age extends cd{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class lge extends cd{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class cge extends cd{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:le.and(A.textInputFocus,(e=le.and(ib,F1))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class dge extends cd{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class uge extends cd{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class hge extends cd{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:le.and(A.textInputFocus,(e=le.and(ib,F1))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class fge extends cd{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(wr(Io.wordSeparators.defaultValue),t,n,i)}}class gge extends cd{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(wr(Io.wordSeparators.defaultValue),t,n,i)}}class pge extends dd{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class mge extends dd{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:le.and(A.textInputFocus,(e=le.and(ib,F1))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class _ge extends dd{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class bge extends dd{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class vge extends dd{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:le.and(A.textInputFocus,(e=le.and(ib,F1))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class Cge extends dd{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class yge extends dd{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(wr(Io.wordSeparators.defaultValue),t,n,i)}}class wge extends dd{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(wr(Io.wordSeparators.defaultValue),t,n,i)}}class Aw extends Un{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const i=e.get(_n);if(!t.hasModel())return;const s=wr(t.getOption(119)),o=t.getModel(),a=t.getSelections(),l=t.getOption(5),c=t.getOption(8),d=i.getLanguageConfiguration(o.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),h=a.map(f=>{const g=this._delete({wordSeparators:s,model:o,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new si(g,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class UN extends Aw{_delete(e,t){const n=dt.deleteWordLeft(e,t);return n||new x(1,1,1,1)}}class jN extends Aw{_delete(e,t){const n=dt.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new x(i,s,i,s)}}class Sge extends UN{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:A.writable})}}class xge extends UN{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:A.writable})}}class kge extends UN{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class Lge extends jN{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:A.writable})}}class Tge extends jN{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:A.writable})}}class Dge extends jN{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class Ege extends me{constructor(){super({id:"deleteInsideWord",precondition:A.writable,label:p("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=wr(t.getOption(119)),s=t.getModel(),a=t.getSelections().map(l=>{const c=dt.deleteInsideWord(i,s,l);return new si(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}te(new age);te(new lge);te(new cge);te(new dge);te(new uge);te(new hge);te(new pge);te(new mge);te(new _ge);te(new bge);te(new vge);te(new Cge);te(new fge);te(new gge);te(new yge);te(new wge);te(new Sge);te(new xge);te(new kge);te(new Lge);te(new Tge);te(new Dge);ie(Ege);class Age extends Aw{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const n=b1.deleteWordPartLeft(e);return n||new x(1,1,1,1)}}class Ige extends Aw{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const n=b1.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new x(i,s,i,s)}}class dW extends Ew{_move(e,t,n,i){return b1.moveWordPartLeft(e,t,n)}}class Nge extends dW{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}rt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class Mge extends dW{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}rt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class uW extends Ew{_move(e,t,n,i){return b1.moveWordPartRight(e,t,n)}}class Rge extends uW{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class Oge extends uW{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}te(new Age);te(new Ige);te(new Nge);te(new Mge);te(new Rge);te(new Oge);class pE extends j{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=Is.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(p("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(p("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}pE.ID="editor.contrib.readOnlyMessageController";ct(pE.ID,pE);var hW=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},R0=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const fW=new ge("accessibilityHelpWidgetVisible",!1);let Uu=class gW extends j{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(vg,this._editor))}static get(e){return e.getContribution(gW.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};Uu.ID="editor.contrib.accessibilityHelpController";Uu=hW([R0(1,Ve)],Uu);function Pge(r,e){return!r||r.length===0?Tn.noSelection:r.length===1?e?hr(Tn.singleSelectionRange,r[0].positionLineNumber,r[0].positionColumn,e):hr(Tn.singleSelection,r[0].positionLineNumber,r[0].positionColumn):e?hr(Tn.multiSelectionRange,r.length,e):r.length>0?hr(Tn.multiSelection,r.length):""}let vg=class O0 extends Yr{constructor(e,t,n,i){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=i,this._editor=e,this._isVisibleKey=fW.bindTo(this._contextKeyService),this._domNode=at(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=at(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(Hn(this._contentDomNode.domNode,"keydown",s=>{if(this._isVisible&&(s.equals(2083)&&(di(Tn.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Fn(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),s.preventDefault(),s.stopPropagation()),s.equals(2086))){di(Tn.openingDocs);let o=this._editor.getRawOptions().accessibilityHelpUrl;typeof o>"u"&&(o="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(Se.parse(o)),s.preventDefault(),s.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return O0.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){const i=this._keybindingService.lookupKeybinding(e);return i?hr(t,i.getAriaLabel()):hr(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let i=Pge(t,n);e.get(56)?e.get(83)?i+=Tn.readonlyDiffEditor:i+=Tn.editableDiffEditor:e.get(83)?i+=Tn.readonlyEditor:i+=Tn.editableEditor;const s=Je?Tn.changeConfigToOnMac:Tn.changeConfigToOnWinLinux;switch(e.get(2)){case 0:i+=`

 - `+s;break;case 2:i+=`

 - `+Tn.auto_on;break;case 1:i+=`

 - `+Tn.auto_off,i+=" "+s;break}e.get(132)?i+=`

 - `+this._descriptionForCommand(_g.ID,Tn.tabFocusModeOnMsg,Tn.tabFocusModeOnMsgNoKb):i+=`

 - `+this._descriptionForCommand(_g.ID,Tn.tabFocusModeOffMsg,Tn.tabFocusModeOffMsgNoKb);const o=Je?Tn.openDocMac:Tn.openDocWinLinux;i+=`

 - `+o,i+=`

`+Tn.outroMsg,this._contentDomNode.domNode.appendChild(k9(i)),this._contentDomNode.domNode.setAttribute("aria-label",i)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Fn(this._contentDomNode.domNode),this._editor.focus())}_layout(){const e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(O0.WIDTH,e.width-40)),n=Math.max(5,Math.min(O0.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);const i=Math.round((e.height-n)/2);this._domNode.setTop(i);const s=Math.round((e.width-t)/2);this._domNode.setLeft(s)}};vg.ID="editor.contrib.accessibilityHelpWidget";vg.WIDTH=500;vg.HEIGHT=300;vg=hW([R0(1,Re),R0(2,Mn),R0(3,Dr)],vg);class Fge extends me{constructor(){super({id:"editor.action.showAccessibilityHelp",label:Tn.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){const n=Uu.get(t);n&&n.show()}}ct(Uu.ID,Uu);ie(Fge);const Bge=Un.bindToContribution(Uu.get);te(new Bge({id:"closeAccessibilityHelp",precondition:fW,handler:r=>r.hide(),kbOpts:{weight:100+100,kbExpr:A.focus,primary:9,secondary:[1033]}}));Vt((r,e)=>{const t=r.getColor(wn);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=r.getColor(mo);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const i=r.getColor(po);i&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${i}; }`);const s=r.getColor(Ge);s&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${s}; }`)});class mE extends j{constructor(e){super(),this.editor=e,this.widget=null,_a&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(83);!this.widget&&e?this.widget=new Iw(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}mE.ID="editor.contrib.iPadShowKeyboard";class Iw extends j{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Z(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(Z(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return Iw.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}Iw.ID="editor.contrib.ShowKeyboardWidget";ct(mE.ID,mE);var Wge=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sF=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Cg=class pW extends j{constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(Yt.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}static get(e){return e.getContribution(pW.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new Nw(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};Cg.ID="editor.contrib.inspectTokens";Cg=Wge([sF(1,tr),sF(2,Qt)],Cg);class Vge extends me{constructor(){super({id:"editor.action.inspectTokens",label:rT.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=Cg.get(t);n&&n.launch()}}function Hge(r){let e="";for(let t=0,n=r.length;t<n;t++){const i=r.charCodeAt(t);switch(i){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(i)}}return e}function Uge(r,e){const t=Yt.get(e);if(t)return t;const n=r.encodeLanguageId(e);return{getInitialState:()=>Bf,tokenize:(i,s,o)=>nA(e,o),tokenizeEncoded:(i,s,o)=>Ky(n,o)}}class Nw extends j{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=Uge(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return Nw._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}const s=this._model.getLineContent(e.lineNumber);let o="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;o=s.substring(l,c)}Oc(this._domNode,ee("h2.tm-token",void 0,Hge(o),ee("span.tm-token-length",void 0,`${o.length} ${o.length===1?"char":"chars"}`))),q(this._domNode,ee("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;q(this._domNode,ee("table.tm-metadata-table",void 0,ee("tbody",void 0,ee("tr",void 0,ee("td.tm-metadata-key",void 0,"language"),ee("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"token type"),ee("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"font style"),ee("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"foreground"),ee("td.tm-metadata-value",void 0,`${a?W.Format.CSS.formatHex(a.foreground):"-?-"}`)),ee("tr",void 0,ee("td.tm-metadata-key",void 0,"background"),ee("td.tm-metadata-value",void 0,`${a?W.Format.CSS.formatHex(a.background):"-?-"}`))))),q(this._domNode,ee("hr.tokens-inspect-separator")),n<t.tokens1.length&&q(this._domNode,ee("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Yt.getColorMap(),n=ci.getLanguageId(e),i=ci.getTokenType(e),s=ci.getFontStyle(e),o=ci.getForeground(e),a=ci.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:s,foreground:t[o],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}Nw._ID="editor.contrib.inspectTokensWidget";ct(Cg.ID,Cg);ie(Vge);Vt((r,e)=>{const t=r.getColor(IA);if(t){const s=Li(r.type)?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${s}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=r.getColor(mu);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const i=r.getColor(AA);i&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${i}; }`)});var jge=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rF=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Iy=class P0{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Jt.as(nh.Quickaccess)}provide(e){const t=new Q;return t.add(e.onDidAccept(()=>{const[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{const i=this.registry.getQuickAccessProvider(n.substr(P0.PREFIX.length));i&&i.prefix&&i.prefix!==P0.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders(),t}getQuickAccessProviders(){const e=[];for(const t of this.registry.getQuickAccessProviders().sort((n,i)=>n.prefix.localeCompare(i.prefix)))if(t.prefix!==P0.PREFIX)for(const n of t.helpEntries){const i=n.prefix||t.prefix,s=i||"…";e.push({prefix:i,label:s,keybinding:n.commandId?this.keybindingService.lookupKeybinding(n.commandId):void 0,ariaLabel:p("helpPickAriaLabel","{0}, {1}",s,n.description),description:n.description})}return e}};Iy.PREFIX="?";Iy=jge([rF(0,Ul),rF(1,Mn)],Iy);Jt.as(nh.Quickaccess).registerQuickAccessProvider({ctor:Iy,prefix:"",helpEntries:[{description:oT.helpQuickAccessActionLabel}]});class mW{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new Q;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=i.add(new Fi);return s.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),i}doProvide(e,t){const n=new Q,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){const s={editor:i},o=v7(i);if(o){let a=as(i.saveViewState());n.add(o.onDidChangeCursorPosition(()=>{a=as(i.saveViewState())})),s.restoreViewState=()=>{a&&i===this.activeTextEditorControl&&i.restoreViewState(a)},n.add(Al(t.onCancellationRequested)(()=>{var l;return(l=s.restoreViewState)===null||l===void 0?void 0:l.call(s)}))}n.add(Ke(()=>this.clearDecorations(i))),n.add(this.provideWithTextEditor(s,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return b7(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:an(EG),position:yr.Full}}}],[o,a]=n.deltaDecorations(i,s);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class Mw extends mW{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=p("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,j.None}provideWithTextEditor(e,t,n){const i=e.editor,s=new Q;s.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(i,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const o=()=>{const l=this.parsePosition(i,t.value.trim().substr(Mw.PREFIX.length)),c=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const d=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(d,0),this.addDecorations(i,d)};o(),s.add(t.onDidChangeValue(()=>o()));const a=v7(i);return a&&a.getOptions().get(62).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(Ke(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?p("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):p("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?p("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,s):p("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const s={lineNumber:t,column:n};return i.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}Mw.PREFIX=":";var $ge=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zge=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let z_=class extends Mw{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=ve.None}get activeTextEditorControl(){return as(this.editorService.getFocusedCodeEditor())}};z_=$ge([zge(0,bt)],z_);let Rw=class extends me{constructor(){super({id:Rw.ID,label:$C.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Ul).quickAccess.show(z_.PREFIX)}};Rw.ID="editor.action.gotoLine";ie(Rw);Jt.as(nh.Quickaccess).registerQuickAccessProvider({ctor:z_,prefix:z_.PREFIX,helpEntries:[{description:$C.gotoLineActionLabel,commandId:Rw.ID}]});const _W=[void 0,[]];function qx(r,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?Kge(r,i.values,t,n):bW(r,e,t,n)}function Kge(r,e,t,n){let i=0;const s=[];for(const o of e){const[a,l]=bW(r,o,t,n);if(typeof a!="number")return _W;i+=a,s.push(...l)}return[i,Gge(s)]}function bW(r,e,t,n){const i=Xf(e.original,e.originalLowercase,t,r,r.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?[i[0],D1(i)]:_W}function Gge(r){const e=r.sort((i,s)=>i.start-s.start),t=[];let n;for(const i of e)!n||!qge(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}function qge(r,e){return!(r.end<e.start||e.end<r.start)}function oF(r){return r.startsWith('"')&&r.endsWith('"')}const vW=" ";function _E(r){typeof r!="string"&&(r="");const e=r.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=aF(r),s=t.indexOf(ha)>=0,o=oF(r);let a;const l=r.split(vW);if(l.length>1)for(const c of l){const d=oF(c),{pathNormalized:u,normalized:h,normalizedLowercase:f}=aF(c);h&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:u,normalized:h,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:r,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:s,expectContiguousMatch:o}}function aF(r){let e;hi?e=r.replace(/\//g,ha):e=r.replace(/\\/g,ha);const t=gH(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function lF(r){return Array.isArray(r)?_E(r.map(e=>e.original).join(vW)):_E(r.original)}var Zge=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cF=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wp=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let Gr=class bE extends mW{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,p("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),j.None}provideWithTextEditor(e,t,n){const i=e.editor,s=this.getModel(i);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):j.None}doProvideWithoutEditorSymbols(e,t,n,i){const s=new Q;return this.provideLabelPick(n,p("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),wp(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||i.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,i))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return wp(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new sA,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(Ke(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){var s;const o=e.editor,a=new Q;a.add(n.onDidAccept(h=>{const[f]=n.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,preserveFocus:h.inBackground}),h.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const l=this.getDocumentSymbols(t,i);let c;const d=h=>wp(this,void 0,void 0,function*(){c?.dispose(!0),n.busy=!1,c=new fi(i),n.busy=!0;try{const f=_E(n.value.substr(bE.PREFIX.length).trim()),g=yield this.doGetSymbolPicks(l,f,void 0,c.token);if(i.isCancellationRequested)return;if(g.length>0){if(n.items=g,h&&f.original.length===0){const _=U0(g,b=>Boolean(b.type!=="separator"&&b.range&&x.containsPosition(b.range.decoration,h)));_&&(n.activeItems=[_])}}else f.original.length>0?this.provideLabelPick(n,p("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,p("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}});a.add(n.onDidChangeValue(()=>d(void 0))),d((s=o.getSelection())===null||s===void 0?void 0:s.getPosition());let u=2;return a.add(n.onDidChangeActive(()=>{const[h]=n.activeItems;if(h&&h.range){if(u-- >0)return;o.revealRangeInCenter(h.range.selection,0),this.addDecorations(o,h.range.decoration)}})),a}doGetSymbolPicks(e,t,n,i){return wp(this,void 0,void 0,function*(){const s=yield e;if(i.isCancellationRequested)return[];const o=t.original.indexOf(bE.SCOPE_PREFIX)===0,a=o?1:0;let l,c;t.values&&t.values.length>1?(l=lF(t.values[0]),c=lF(t.values.slice(1))):l=t;const d=[];for(let f=0;f<s.length;f++){const g=s[f],_=hH(g.name),b=`$(${pk.toIcon(g.kind).id}) ${_}`,v=b.length-_.length;let C=g.containerName;n?.extraContainerLabel&&(C?C=`${n.extraContainerLabel} • ${C}`:C=n.extraContainerLabel);let y,w,L,T;if(t.original.length>a){let k=!1;if(l!==t&&([y,w]=qx(b,Object.assign(Object.assign({},t),{values:void 0}),a,v),typeof y=="number"&&(k=!0)),typeof y!="number"&&([y,w]=qx(b,l,a,v),typeof y!="number"))continue;if(!k&&c){if(C&&c.original.length>0&&([L,T]=qx(C,c)),typeof L!="number")continue;typeof y=="number"&&(y+=L)}}const S=g.tags&&g.tags.indexOf(1)>=0;d.push({index:f,kind:g.kind,score:y,label:b,ariaLabel:_,description:C,highlights:S?void 0:{label:w,description:T},range:{selection:x.collapseToStart(g.selectionRange),decoration:g.range},strikethrough:S,buttons:(()=>{var k,D;const O=!((k=this.options)===null||k===void 0)&&k.openSideBySideDirection?(D=this.options)===null||D===void 0?void 0:D.openSideBySideDirection():void 0;if(O)return[{iconClass:O==="right"?m.splitHorizontal.classNames:m.splitVertical.classNames,tooltip:O==="right"?p("openToSide","Open to the Side"):p("openToBottom","Open to the Bottom")}]})()})}const u=d.sort((f,g)=>o?this.compareByKindAndScore(f,g):this.compareByScore(f,g));let h=[];if(o){let b=function(){g&&typeof f=="number"&&_>0&&(g.label=hr(Yx[f]||Zx,_))},f,g,_=0;for(const v of u)f!==v.kind?(b(),f=v.kind,_=1,g={type:"separator"},h.push(g)):_++,h.push(v);b()}else u.length>0&&(h=[{label:p("symbols","symbols ({0})",d.length),type:"separator"},...u]);return h})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=Yx[e.kind]||Zx,i=Yx[t.kind]||Zx,s=n.localeCompare(i);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return wp(this,void 0,void 0,function*(){const n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}};Gr.PREFIX="@";Gr.SCOPE_PREFIX=":";Gr.PREFIX_BY_CATEGORY=`${Gr.PREFIX}${Gr.SCOPE_PREFIX}`;Gr=Zge([cF(0,be),cF(1,pw)],Gr);const Zx=p("property","properties ({0})"),Yx={[5]:p("method","methods ({0})"),[11]:p("function","functions ({0})"),[8]:p("_constructor","constructors ({0})"),[12]:p("variable","variables ({0})"),[4]:p("class","classes ({0})"),[22]:p("struct","structs ({0})"),[23]:p("event","events ({0})"),[24]:p("operator","operators ({0})"),[10]:p("interface","interfaces ({0})"),[2]:p("namespace","namespaces ({0})"),[3]:p("package","packages ({0})"),[25]:p("typeParameter","type parameters ({0})"),[1]:p("modules","modules ({0})"),[6]:p("property","properties ({0})"),[9]:p("enum","enumerations ({0})"),[21]:p("enumMember","enumeration members ({0})"),[14]:p("string","strings ({0})"),[0]:p("file","files ({0})"),[17]:p("array","arrays ({0})"),[15]:p("number","numbers ({0})"),[16]:p("boolean","booleans ({0})"),[18]:p("object","objects ({0})"),[19]:p("key","keys ({0})"),[7]:p("field","fields ({0})"),[13]:p("constant","constants ({0})")};var Yge=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let vE=class extends Gr{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=ve.None}get activeTextEditorControl(){return as(this.editorService.getFocusedCodeEditor())}};vE=Yge([Xx(0,bt),Xx(1,be),Xx(2,pw)],vE);class Rb extends me{constructor(){super({id:Rb.ID,label:d_.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:A.hasDocumentSymbolProvider,kbOpts:{kbExpr:A.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Ul).quickAccess.show(Gr.PREFIX)}}Rb.ID="editor.action.quickOutline";ie(Rb);Jt.as(nh.Quickaccess).registerQuickAccessProvider({ctor:vE,prefix:Gr.PREFIX,helpEntries:[{description:d_.quickOutlineActionLabel,prefix:Gr.PREFIX,commandId:Rb.ID},{description:d_.quickOutlineByCategoryActionLabel,prefix:Gr.PREFIX_BY_CATEGORY}]});function Qx(r,e){return e&&(r.stack||r.stacktrace)?p("stackTrace.format","{0}: {1}",uF(r),dF(r.stack)||dF(r.stacktrace)):uF(r)}function dF(r){return Array.isArray(r)?r.join(`
`):r}function uF(r){return typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?p("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function CW(r=null,e=!1){if(!r)return p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=Y_(r),n=CW(t[0],e);return t.length>1?p("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(hs(r))return r;if(r.detail){const t=r.detail;if(t.error)return Qx(t.error,e);if(t.exception)return Qx(t.exception,e)}return r.stack?Qx(r,e):r.message?r.message:p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var s0=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},lf;(function(r){r[r.NO_ACTION=0]="NO_ACTION",r[r.CLOSE_PICKER=1]="CLOSE_PICKER",r[r.REFRESH_PICKER=2]="REFRESH_PICKER",r[r.REMOVE_ITEM=3]="REMOVE_ITEM"})(lf||(lf={}));function Jx(r){const e=r;return Array.isArray(e.items)}function Xge(r){const e=r;return!!e.picks&&e.additionalPicks instanceof Promise}class Ow extends j{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const i=new Q;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s;const o=i.add(new Fi),a=()=>s0(this,void 0,void 0,function*(){const l=o.value=new Q;s?.dispose(!0),e.busy=!1,s=new fi(t);const c=s.token,d=e.value.substr(this.prefix.length).trim(),u=this._getPicks(d,l,c),h=(f,g)=>{var _;let b,v;if(Jx(f)?(b=f.items,v=f.active):b=f,b.length===0){if(g)return!1;d.length>0&&(!((_=this.options)===null||_===void 0)&&_.noResultsPick)&&(b=[this.options.noResultsPick])}return e.items=b,v&&(e.activeItems=[v]),!0};if(u!==null)if(Xge(u)){let f=!1,g=!1;yield Promise.all([(()=>s0(this,void 0,void 0,function*(){yield Rc(Ow.FAST_PICKS_RACE_DELAY),!c.isCancellationRequested&&(g||(f=h(u.picks,!0)))}))(),(()=>s0(this,void 0,void 0,function*(){e.busy=!0;try{const _=yield u.additionalPicks;if(c.isCancellationRequested)return;let b,v;Jx(u.picks)?(b=u.picks.items,v=u.picks.active):b=u.picks;let C,y;if(Jx(_)?(C=_.items,y=_.active):C=_,C.length>0||!f){let w;if(!v&&!y){const L=e.activeItems[0];L&&b.indexOf(L)!==-1&&(w=L)}h({items:[...b,...C],active:v||y||w})}}finally{c.isCancellationRequested||(e.busy=!1),g=!0}}))()])}else if(!(u instanceof Promise))h(u);else{e.busy=!0;try{const f=yield u;if(c.isCancellationRequested)return;h(f)}finally{c.isCancellationRequested||(e.busy=!1)}}});return i.add(e.onDidChangeValue(()=>a())),a(),i.add(e.onDidAccept(l=>{const[c]=e.selectedItems;typeof c?.accept=="function"&&(l.inBackground||e.hide(),c.accept(e.keyMods,l))})),i.add(e.onDidTriggerItemButton(({button:l,item:c})=>s0(this,void 0,void 0,function*(){var d,u;if(typeof c.trigger=="function"){const h=(u=(d=c.buttons)===null||d===void 0?void 0:d.indexOf(l))!==null&&u!==void 0?u:-1;if(h>=0){const f=c.trigger(h,e.keyMods),g=typeof f=="number"?f:yield f;if(t.isCancellationRequested)return;switch(g){case lf.NO_ACTION:break;case lf.CLOSE_PICKER:e.hide();break;case lf.REFRESH_PICKER:a();break;case lf.REMOVE_ITEM:{const _=e.items.indexOf(c);if(_!==-1){const b=e.items.slice(),v=b.splice(_,1),C=e.activeItems.filter(w=>w!==v[0]),y=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=b,C&&(e.activeItems=C),e.keepScrollPosition=y}break}}}}}))),i}}Ow.FAST_PICKS_RACE_DELAY=200;var yW=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Md=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},hF=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let K_=class F0 extends Ow{constructor(e,t,n,i,s,o){super(F0.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=s,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(ju)),this.options=e}_getPicks(e,t,n){return hF(this,void 0,void 0,function*(){const i=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const s=[];for(const c of i){const d=as(F0.WORD_FILTER(e,c.label)),u=c.commandAlias?as(F0.WORD_FILTER(e,c.commandAlias)):void 0;d||u?(c.highlights={label:d,detail:this.options.showAlias?u:void 0},s.push(c)):e===c.commandId&&s.push(c)}const o=new Map;for(const c of s){const d=o.get(c.label);d?(c.description=c.commandId,d.description=d.commandId):o.set(c.label,c)}s.sort((c,d)=>{const u=this.commandsHistory.peek(c.commandId),h=this.commandsHistory.peek(d.commandId);return u&&h?u>h?-1:1:u?-1:h?1:c.label.localeCompare(d.label)});const a=[];let l=!1;for(let c=0;c<s.length;c++){const d=s[c],u=this.keybindingService.lookupKeybinding(d.commandId),h=u?p("commandPickAriaLabelWithKeybinding","{0}, {1}",d.label,u.getAriaLabel()):d.label;c===0&&this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:p("recentlyUsed","recently used")}),l=!0),c!==0&&l&&!this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:p("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},d),{ariaLabel:h,detail:this.options.showAlias&&d.commandAlias!==d.label?d.commandAlias:void 0,keybinding:u,accept:()=>hF(this,void 0,void 0,function*(){this.commandsHistory.push(d.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"quick open"});try{yield this.commandService.executeCommand(d.commandId)}catch(f){Da(f)||this.dialogService.show(Zt.Error,p("canNotRun","Command '{0}' resulted in an error ({1})",d.label,CW(f)))}})}))}return a})}};K_.PREFIX=">";K_.WORD_FILTER=cI(L1,tQ,P3);K_=yW([Md(1,Ve),Md(2,Mn),Md(3,Sn),Md(4,No),Md(5,hb)],K_);let ju=class $n extends j{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=$n.getConfiguredCommandHistoryLength(this.configurationService),$n.cache&&$n.cache.limit!==this.configuredCommandsHistoryLength&&($n.cache.limit=this.configuredCommandsHistoryLength,$n.saveState(this.storageService))}load(){const e=this.storageService.get($n.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=$n.cache=new nd(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((s,o)=>s.value-o.value),i.forEach(s=>n.set(s.key,s.value))}$n.counter=this.storageService.getNumber($n.PREF_KEY_COUNTER,0,$n.counter)}push(e){$n.cache&&($n.cache.set(e,$n.counter++),$n.saveState(this.storageService))}peek(e){var t;return(t=$n.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!$n.cache)return;const t={usesLRU:!0,entries:[]};$n.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store($n.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store($n.PREF_KEY_COUNTER,$n.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:$n.DEFAULT_COMMANDS_HISTORY_LENGTH}};ju.DEFAULT_COMMANDS_HISTORY_LENGTH=50;ju.PREF_KEY_CACHE="commandPalette.mru.cache";ju.PREF_KEY_COUNTER="commandPalette.mru.counter";ju.counter=1;ju=yW([Md(0,Qr),Md(1,ft)],ju);class Qge extends K_{constructor(e,t,n,i,s,o){super(e,t,n,i,s,o)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:mI(n.label)||n.id});return t}}var Jge=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Eh=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},epe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};let G_=class extends Qge{constructor(e,t,n,i,s,o){super({showAlias:!1},e,n,i,s,o),this.codeEditorService=t}get activeTextEditorControl(){return as(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return epe(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};G_=Jge([Eh(0,Ve),Eh(1,bt),Eh(2,Mn),Eh(3,Sn),Eh(4,No),Eh(5,hb)],G_);class Ob extends me{constructor(){super({id:Ob.ID,label:zC.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Ul).quickAccess.show(G_.PREFIX)}}Ob.ID="editor.action.quickCommand";ie(Ob);Jt.as(nh.Quickaccess).registerQuickAccessProvider({ctor:G_,prefix:G_.PREFIX,helpEntries:[{description:zC.quickCommandHelp,commandId:Ob.ID}]});var tpe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ah=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let CE=class extends Kc{constructor(e,t,n,i,s,o,a){super(!0,e,t,n,i,s,o,a)}};CE=tpe([Ah(1,Re),Ah(2,bt),Ah(3,xn),Ah(4,Ve),Ah(5,Qr),Ah(6,ft)],CE);ct(Kc.ID,CE);class npe extends me{constructor(){super({id:"editor.action.toggleHighContrast",label:aT.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(tr),i=n.getColorTheme();Li(i.type)?(n.setTheme(this._originalThemeName||($m(i.type)?kf:ul)),this._originalThemeName=null):(n.setTheme($m(i.type)?eu:tu),this._originalThemeName=i.themeName)}}ie(npe);const ipe=r=>{const e=i=>`file:///${r.folder}/${i.name}`;let t=new Map,n=!1;return Hs(()=>{const i=new Map;n=!0;for(const s of r.tabs){const o=e(s),a=t.get(o),l=qW(()=>s.source);if(a)a.model.setValue(l),a.watcher.dispose(),a.watcher=a.model.onDidChangeContent(()=>{n||(s.source=a.model.getValue())}),i.set(o,a);else{const c=S_.parse(o),d=Br.createModel(l,void 0,c),u=d.onDidChangeContent(()=>{n||(s.source=d.getValue())});i.set(o,{model:d,watcher:u})}}n=!1;for(const[s,o]of t)i.has(s)||o.model.dispose();t=i}),Dl(()=>{for(const i of t.values())i.model.dispose()}),[]},spe=!1,rpe="vs-dark",ope={"editor.background":"#1E1E1E","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editorIndentGuide.background":"#404040","editorIndentGuide.activeBackground":"#707070","editor.selectionHighlightBackground":"#ADD6FF26","list.dropBackground":"#383B3D","activityBarBadge.background":"#007ACC","sideBarTitle.foreground":"#BBBBBB","input.placeholderForeground":"#A6A6A6","menu.background":"#252526","menu.foreground":"#CCCCCC","statusBarItem.remoteForeground":"#FFF","statusBarItem.remoteBackground":"#16825D","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#ccc3","tab.lastPinnedBorder":"#ccc3"},ape=[{foreground:"#D4D4D4",token:""},{foreground:"#D4D4D4",token:"meta.embedded"},{foreground:"#D4D4D4",token:"source.groovy.embedded"},{fontStyle:"italic",token:"emphasis"},{fontStyle:"bold",token:"strong"},{foreground:"#000080",token:"header"},{foreground:"#6A9955",token:"comment"},{foreground:"#569cd6",token:"constant.language"},{foreground:"#b5cea8",token:"constant.numeric"},{foreground:"#b5cea8",token:"variable.other.enummember"},{foreground:"#b5cea8",token:"keyword.operator.plus.exponent"},{foreground:"#b5cea8",token:"keyword.operator.minus.exponent"},{foreground:"#646695",token:"constant.regexp"},{foreground:"#569cd6",token:"entity.name.tag"},{foreground:"#d7ba7d",token:"entity.name.tag.css"},{foreground:"#9cdcfe",token:"entity.other.attribute-name"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.class.css"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.class.mixin.css"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.id.css"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.parent-selector.css"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.pseudo-class.css"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.pseudo-element.css"},{foreground:"#d7ba7d",token:"source.css.less entity.other.attribute-name.id"},{foreground:"#d7ba7d",token:"entity.other.attribute-name.scss"},{foreground:"#f44747",token:"invalid"},{fontStyle:"underline",token:"markup.underline"},{fontStyle:"bold",foreground:"#569cd6",token:"markup.bold"},{fontStyle:"bold",foreground:"#569cd6",token:"markup.heading"},{fontStyle:"italic",token:"markup.italic"},{foreground:"#b5cea8",token:"markup.inserted"},{foreground:"#ce9178",token:"markup.deleted"},{foreground:"#569cd6",token:"markup.changed"},{foreground:"#6A9955",token:"punctuation.definition.quote.begin.markdown"},{foreground:"#6796e6",token:"punctuation.definition.list.begin.markdown"},{foreground:"#ce9178",token:"markup.inline.raw"},{foreground:"#808080",token:"punctuation.definition.tag"},{foreground:"#569cd6",token:"meta.preprocessor"},{foreground:"#569cd6",token:"entity.name.function.preprocessor"},{foreground:"#ce9178",token:"meta.preprocessor.string"},{foreground:"#b5cea8",token:"meta.preprocessor.numeric"},{foreground:"#9cdcfe",token:"meta.structure.dictionary.key.python"},{foreground:"#569cd6",token:"meta.diff.header"},{foreground:"#569cd6",token:"storage"},{foreground:"#569cd6",token:"storage.type"},{foreground:"#569cd6",token:"storage.modifier"},{foreground:"#569cd6",token:"keyword.operator.noexcept"},{foreground:"#ce9178",token:"string"},{foreground:"#ce9178",token:"meta.embedded.assembly"},{foreground:"#ce9178",token:"string.tag"},{foreground:"#ce9178",token:"string.value"},{foreground:"#d16969",token:"string.regexp"},{foreground:"#569cd6",token:"punctuation.definition.template-expression.begin"},{foreground:"#569cd6",token:"punctuation.definition.template-expression.end"},{foreground:"#569cd6",token:"punctuation.section.embedded"},{foreground:"#d4d4d4",token:"meta.template.expression"},{foreground:"#9cdcfe",token:"support.type.vendored.property-name"},{foreground:"#9cdcfe",token:"support.type.property-name"},{foreground:"#9cdcfe",token:"variable.css"},{foreground:"#9cdcfe",token:"variable.scss"},{foreground:"#9cdcfe",token:"variable.other.less"},{foreground:"#9cdcfe",token:"source.coffee.embedded"},{foreground:"#569cd6",token:"keyword"},{foreground:"#569cd6",token:"keyword.control"},{foreground:"#d4d4d4",token:"keyword.operator"},{foreground:"#569cd6",token:"keyword.operator.new"},{foreground:"#569cd6",token:"keyword.operator.expression"},{foreground:"#569cd6",token:"keyword.operator.cast"},{foreground:"#569cd6",token:"keyword.operator.sizeof"},{foreground:"#569cd6",token:"keyword.operator.alignof"},{foreground:"#569cd6",token:"keyword.operator.typeid"},{foreground:"#569cd6",token:"keyword.operator.alignas"},{foreground:"#569cd6",token:"keyword.operator.instanceof"},{foreground:"#569cd6",token:"keyword.operator.logical.python"},{foreground:"#569cd6",token:"keyword.operator.wordlike"},{foreground:"#b5cea8",token:"keyword.other.unit"},{foreground:"#569cd6",token:"punctuation.section.embedded.begin.php"},{foreground:"#569cd6",token:"punctuation.section.embedded.end.php"},{foreground:"#9cdcfe",token:"support.function.git-rebase"},{foreground:"#b5cea8",token:"constant.sha.git-rebase"},{foreground:"#d4d4d4",token:"storage.modifier.import.java"},{foreground:"#d4d4d4",token:"variable.language.wildcard.java"},{foreground:"#d4d4d4",token:"storage.modifier.package.java"},{foreground:"#569cd6",token:"variable.language"},{foreground:"#DCDCAA",token:"entity.name.function"},{foreground:"#DCDCAA",token:"support.function"},{foreground:"#DCDCAA",token:"support.constant.handlebars"},{foreground:"#DCDCAA",token:"source.powershell variable.other.member"},{foreground:"#DCDCAA",token:"entity.name.operator.custom-literal"},{foreground:"#4EC9B0",token:"meta.return-type"},{foreground:"#4EC9B0",token:"support.class"},{foreground:"#4EC9B0",token:"support.type"},{foreground:"#4EC9B0",token:"entity.name.type"},{foreground:"#4EC9B0",token:"entity.name.namespace"},{foreground:"#4EC9B0",token:"entity.other.attribute"},{foreground:"#4EC9B0",token:"entity.name.scope-resolution"},{foreground:"#4EC9B0",token:"entity.name.class"},{foreground:"#4EC9B0",token:"storage.type.numeric.go"},{foreground:"#4EC9B0",token:"storage.type.byte.go"},{foreground:"#4EC9B0",token:"storage.type.boolean.go"},{foreground:"#4EC9B0",token:"storage.type.string.go"},{foreground:"#4EC9B0",token:"storage.type.uintptr.go"},{foreground:"#4EC9B0",token:"storage.type.error.go"},{foreground:"#4EC9B0",token:"storage.type.rune.go"},{foreground:"#4EC9B0",token:"storage.type.cs"},{foreground:"#4EC9B0",token:"storage.type.generic.cs"},{foreground:"#4EC9B0",token:"storage.type.modifier.cs"},{foreground:"#4EC9B0",token:"storage.type.variable.cs"},{foreground:"#4EC9B0",token:"storage.type.annotation.java"},{foreground:"#4EC9B0",token:"storage.type.generic.java"},{foreground:"#4EC9B0",token:"storage.type.java"},{foreground:"#4EC9B0",token:"storage.type.object.array.java"},{foreground:"#4EC9B0",token:"storage.type.primitive.array.java"},{foreground:"#4EC9B0",token:"storage.type.primitive.java"},{foreground:"#4EC9B0",token:"storage.type.token.java"},{foreground:"#4EC9B0",token:"storage.type.groovy"},{foreground:"#4EC9B0",token:"storage.type.annotation.groovy"},{foreground:"#4EC9B0",token:"storage.type.parameters.groovy"},{foreground:"#4EC9B0",token:"storage.type.generic.groovy"},{foreground:"#4EC9B0",token:"storage.type.object.array.groovy"},{foreground:"#4EC9B0",token:"storage.type.primitive.array.groovy"},{foreground:"#4EC9B0",token:"storage.type.primitive.groovy"},{foreground:"#4EC9B0",token:"meta.type.cast.expr"},{foreground:"#4EC9B0",token:"meta.type.new.expr"},{foreground:"#4EC9B0",token:"support.constant.math"},{foreground:"#4EC9B0",token:"support.constant.dom"},{foreground:"#4EC9B0",token:"support.constant.json"},{foreground:"#4EC9B0",token:"entity.other.inherited-class"},{foreground:"#C586C0",token:"keyword.control"},{foreground:"#C586C0",token:"source.cpp keyword.operator.new"},{foreground:"#C586C0",token:"keyword.operator.delete"},{foreground:"#C586C0",token:"keyword.other.using"},{foreground:"#C586C0",token:"keyword.other.operator"},{foreground:"#C586C0",token:"entity.name.operator"},{foreground:"#9CDCFE",token:"variable"},{foreground:"#9CDCFE",token:"meta.definition.variable.name"},{foreground:"#9CDCFE",token:"support.variable"},{foreground:"#9CDCFE",token:"entity.name.variable"},{foreground:"#4FC1FF",token:"variable.other.constant"},{foreground:"#4FC1FF",token:"variable.other.enummember"},{foreground:"#9CDCFE",token:"meta.object-literal.key"},{foreground:"#CE9178",token:"support.constant.property-value"},{foreground:"#CE9178",token:"support.constant.font-name"},{foreground:"#CE9178",token:"support.constant.media-type"},{foreground:"#CE9178",token:"support.constant.media"},{foreground:"#CE9178",token:"constant.other.color.rgb-value"},{foreground:"#CE9178",token:"constant.other.rgb-value"},{foreground:"#CE9178",token:"support.constant.color"},{foreground:"#CE9178",token:"punctuation.definition.group.regexp"},{foreground:"#CE9178",token:"punctuation.definition.group.assertion.regexp"},{foreground:"#CE9178",token:"punctuation.definition.character-class.regexp"},{foreground:"#CE9178",token:"punctuation.character.set.begin.regexp"},{foreground:"#CE9178",token:"punctuation.character.set.end.regexp"},{foreground:"#CE9178",token:"keyword.operator.negation.regexp"},{foreground:"#CE9178",token:"support.other.parenthesis.regexp"},{foreground:"#d16969",token:"constant.character.character-class.regexp"},{foreground:"#d16969",token:"constant.other.character-class.set.regexp"},{foreground:"#d16969",token:"constant.other.character-class.regexp"},{foreground:"#d16969",token:"constant.character.set.regexp"},{foreground:"#DCDCAA",token:"keyword.operator.or.regexp"},{foreground:"#DCDCAA",token:"keyword.control.anchor.regexp"},{foreground:"#d7ba7d",token:"keyword.operator.quantifier.regexp"},{foreground:"#569cd6",token:"constant.character"},{foreground:"#d7ba7d",token:"constant.character.escape"},{foreground:"#C8C8C8",token:"entity.name.label"}],lpe=[],cpe={inherit:spe,base:rpe,colors:ope,rules:ape,encodedTokensColors:lpe},dpe=!1,upe="vs",hpe={"activityBar.activeBorder":"#f9826c","activityBar.background":"#ffffff","activityBar.border":"#e1e4e8","activityBar.foreground":"#2f363d","activityBar.inactiveForeground":"#959da5","activityBarBadge.background":"#2188ff","activityBarBadge.foreground":"#ffffff","badge.background":"#dbedff","badge.foreground":"#005cc5","breadcrumb.activeSelectionForeground":"#586069","breadcrumb.focusForeground":"#2f363d","breadcrumb.foreground":"#6a737d","breadcrumbPicker.background":"#fafbfc","button.background":"#159739","button.foreground":"#ffffff","button.hoverBackground":"#138934","checkbox.background":"#fafbfc","checkbox.border":"#d1d5da","debugToolBar.background":"#ffffff",descriptionForeground:"#6a737d","diffEditor.insertedTextBackground":"#34d05822","diffEditor.removedTextBackground":"#d73a4922","dropdown.background":"#fafbfc","dropdown.border":"#e1e4e8","dropdown.foreground":"#2f363d","dropdown.listBackground":"#ffffff","editor.background":"#ffffff","editor.findMatchBackground":"#ffdf5d","editor.findMatchHighlightBackground":"#ffdf5d66","editor.focusedStackFrameHighlightBackground":"#fff5b1","editor.foldBackground":"#fafbfc","editor.foreground":"#24292e","editor.inactiveSelectionBackground":"#0366d611","editor.lineHighlightBackground":"#f6f8fa","editor.selectionBackground":"#0366d625","editor.selectionHighlightBackground":"#34d05840","editor.selectionHighlightBorder":"#34d05800","editor.stackFrameHighlightBackground":"#fffbdd","editor.wordHighlightBackground":"#34d05800","editor.wordHighlightBorder":"#24943e99","editor.wordHighlightStrongBackground":"#34d05800","editor.wordHighlightStrongBorder":"#24943e50","editorBracketMatch.background":"#34d05840","editorBracketMatch.border":"#34d05800","editorCursor.foreground":"#044289","editorGroup.border":"#e1e4e8","editorGroupHeader.tabsBackground":"#f6f8fa","editorGroupHeader.tabsBorder":"#e1e4e8","editorGutter.addedBackground":"#28a745","editorGutter.deletedBackground":"#d73a49","editorGutter.modifiedBackground":"#2188ff","editorIndentGuide.activeBackground":"#d7dbe0","editorIndentGuide.background":"#eff2f6","editorLineNumber.activeForeground":"#24292e","editorLineNumber.foreground":"#1b1f234d","editorOverviewRuler.border":"#ffffff","editorWhitespace.foreground":"#d1d5da","editorWidget.background":"#f6f8fa",errorForeground:"#cb2431",focusBorder:"#2188ff",foreground:"#444d56","gitDecoration.addedResourceForeground":"#28a745","gitDecoration.conflictingResourceForeground":"#e36209","gitDecoration.deletedResourceForeground":"#d73a49","gitDecoration.ignoredResourceForeground":"#959da5","gitDecoration.modifiedResourceForeground":"#005cc5","gitDecoration.submoduleResourceForeground":"#959da5","gitDecoration.untrackedResourceForeground":"#28a745","input.background":"#fafbfc","input.border":"#e1e4e8","input.foreground":"#2f363d","input.placeholderForeground":"#959da5","list.activeSelectionBackground":"#e2e5e9","list.activeSelectionForeground":"#2f363d","list.focusBackground":"#cce5ff","list.hoverBackground":"#ebf0f4","list.hoverForeground":"#2f363d","list.inactiveFocusBackground":"#dbedff","list.inactiveSelectionBackground":"#e8eaed","list.inactiveSelectionForeground":"#2f363d","notificationCenterHeader.background":"#e1e4e8","notificationCenterHeader.foreground":"#6a737d","notifications.background":"#fafbfc","notifications.border":"#e1e4e8","notifications.foreground":"#2f363d","notificationsErrorIcon.foreground":"#d73a49","notificationsInfoIcon.foreground":"#005cc5","notificationsWarningIcon.foreground":"#e36209","panel.background":"#f6f8fa","panel.border":"#e1e4e8","panelInput.border":"#e1e4e8","panelTitle.activeBorder":"#f9826c","panelTitle.activeForeground":"#2f363d","panelTitle.inactiveForeground":"#6a737d","pickerGroup.border":"#e1e4e8","pickerGroup.foreground":"#2f363d","progressBar.background":"#2188ff","quickInput.background":"#fafbfc","quickInput.foreground":"#2f363d","scrollbar.shadow":"#6a737d33","scrollbarSlider.activeBackground":"#959da588","scrollbarSlider.background":"#959da533","scrollbarSlider.hoverBackground":"#959da544","settings.headerForeground":"#2f363d","settings.modifiedItemIndicator":"#2188ff","sideBar.background":"#f6f8fa","sideBar.border":"#e1e4e8","sideBar.foreground":"#586069","sideBarSectionHeader.background":"#f6f8fa","sideBarSectionHeader.border":"#e1e4e8","sideBarSectionHeader.foreground":"#2f363d","sideBarTitle.foreground":"#2f363d","statusBar.background":"#ffffff","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#f9826c","statusBar.debuggingForeground":"#ffffff","statusBar.foreground":"#586069","statusBar.noFolderBackground":"#ffffff","statusBarItem.prominentBackground":"#e8eaed","tab.activeBackground":"#ffffff","tab.activeBorder":"#ffffff","tab.activeBorderTop":"#f9826c","tab.activeForeground":"#2f363d","tab.border":"#e1e4e8","tab.hoverBackground":"#ffffff","tab.inactiveBackground":"#f6f8fa","tab.inactiveForeground":"#6a737d","tab.unfocusedActiveBorder":"#ffffff","tab.unfocusedActiveBorderTop":"#e1e4e8","tab.unfocusedHoverBackground":"#ffffff","terminal.foreground":"#586069","textBlockQuote.background":"#fafbfc","textBlockQuote.border":"#e1e4e8","textCodeBlock.background":"#f6f8fa","textLink.activeForeground":"#005cc5","textLink.foreground":"#0366d6","textPreformat.foreground":"#586069","textSeparator.foreground":"#d1d5da","titleBar.activeBackground":"#ffffff","titleBar.activeForeground":"#2f363d","titleBar.border":"#e1e4e8","titleBar.inactiveBackground":"#f6f8fa","titleBar.inactiveForeground":"#6a737d","tree.indentGuidesStroke":"#e1e4e8","welcomePage.buttonBackground":"#f6f8fa","welcomePage.buttonHoverBackground":"#e1e4e8"},fpe=[{foreground:"#6A737D",token:"comment"},{foreground:"#6A737D",token:"punctuation.definition.comment"},{foreground:"#6A737D",token:"string.comment"},{foreground:"#005CC5",token:"constant"},{foreground:"#005CC5",token:"entity.name.constant"},{foreground:"#005CC5",token:"variable.other.constant"},{foreground:"#005CC5",token:"variable.language"},{foreground:"#6F42C1",token:"entity"},{foreground:"#6F42C1",token:"entity.name"},{foreground:"#24292E",token:"variable.parameter.function"},{foreground:"#22863A",token:"entity.name.tag"},{foreground:"#D73A49",token:"keyword"},{foreground:"#D73A49",token:"storage"},{foreground:"#D73A49",token:"storage.type"},{foreground:"#24292E",token:"storage.modifier.package"},{foreground:"#24292E",token:"storage.modifier.import"},{foreground:"#24292E",token:"storage.type.java"},{foreground:"#032F62",token:"string"},{foreground:"#032F62",token:"punctuation.definition.string"},{foreground:"#032F62",token:"string punctuation.section.embedded source"},{foreground:"#005CC5",token:"support"},{foreground:"#005CC5",token:"meta.property-name"},{foreground:"#E36209",token:"variable"},{foreground:"#24292E",token:"variable.other"},{foreground:"#B31D28",fontStyle:"italic",token:"invalid.broken"},{foreground:"#B31D28",fontStyle:"italic",token:"invalid.deprecated"},{foreground:"#B31D28",fontStyle:"italic",token:"invalid.illegal"},{foreground:"#B31D28",fontStyle:"italic",token:"invalid.unimplemented"},{foreground:"#FAFBFC",background:"#D73A49",fontStyle:"italic underline",token:"carriage-return"},{foreground:"#B31D28",token:"message.error"},{foreground:"#24292E",token:"string source"},{foreground:"#005CC5",token:"string variable"},{foreground:"#032F62",token:"source.regexp"},{foreground:"#032F62",token:"string.regexp"},{foreground:"#032F62",token:"string.regexp.character-class"},{foreground:"#032F62",token:"string.regexp constant.character.escape"},{foreground:"#032F62",token:"string.regexp source.ruby.embedded"},{foreground:"#032F62",token:"string.regexp string.regexp.arbitrary-repitition"},{foreground:"#22863A",fontStyle:"bold",token:"string.regexp constant.character.escape"},{foreground:"#005CC5",token:"support.constant"},{foreground:"#005CC5",token:"support.variable"},{foreground:"#005CC5",token:"meta.module-reference"},{foreground:"#E36209",token:"punctuation.definition.list.begin.markdown"},{foreground:"#005CC5",fontStyle:"bold",token:"markup.heading"},{foreground:"#005CC5",fontStyle:"bold",token:"markup.heading entity.name"},{foreground:"#22863A",token:"markup.quote"},{foreground:"#24292E",fontStyle:"italic",token:"markup.italic"},{foreground:"#24292E",fontStyle:"bold",token:"markup.bold"},{foreground:"#005CC5",token:"markup.raw"},{foreground:"#B31D28",background:"#FFEEF0",token:"markup.deleted"},{foreground:"#B31D28",background:"#FFEEF0",token:"meta.diff.header.from-file"},{foreground:"#B31D28",background:"#FFEEF0",token:"punctuation.definition.deleted"},{foreground:"#22863A",background:"#F0FFF4",token:"markup.inserted"},{foreground:"#22863A",background:"#F0FFF4",token:"meta.diff.header.to-file"},{foreground:"#22863A",background:"#F0FFF4",token:"punctuation.definition.inserted"},{foreground:"#E36209",background:"#FFEBDA",token:"markup.changed"},{foreground:"#E36209",background:"#FFEBDA",token:"punctuation.definition.changed"},{foreground:"#F6F8FA",background:"#005CC5",token:"markup.ignored"},{foreground:"#F6F8FA",background:"#005CC5",token:"markup.untracked"},{foreground:"#6F42C1",fontStyle:"bold",token:"meta.diff.range"},{foreground:"#005CC5",token:"meta.diff.header"},{foreground:"#005CC5",fontStyle:"bold",token:"meta.separator"},{foreground:"#005CC5",token:"meta.output"},{foreground:"#586069",token:"brackethighlighter.tag"},{foreground:"#586069",token:"brackethighlighter.curly"},{foreground:"#586069",token:"brackethighlighter.round"},{foreground:"#586069",token:"brackethighlighter.square"},{foreground:"#586069",token:"brackethighlighter.angle"},{foreground:"#586069",token:"brackethighlighter.quote"},{foreground:"#B31D28",token:"brackethighlighter.unmatched"},{foreground:"#032F62",fontStyle:"underline",token:"constant.other.reference.link"},{foreground:"#032F62",fontStyle:"underline",token:"string.other.link"},{foreground:"#316BCD",token:"token.info-token"},{foreground:"#CD9731",token:"token.warn-token"},{foreground:"#CD3131",token:"token.error-token"},{foreground:"#800080",token:"token.debug-token"}],gpe=[],ppe={inherit:dpe,base:upe,colors:hpe,rules:fpe,encodedTokensColors:gpe};var Gg={},Pb={},yE={},mpe={get exports(){return yE},set exports(r){yE=r}};(function(r,e){var t=function(){return typeof document<"u"&&document.currentScript&&document.currentScript.src,function(n){n=n||{};var i=typeof n<"u"?n:{},s={},o;for(o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);var a=!1,l="";function c(de){return i.locateFile?i.locateFile(de,l):l+de}var d;d=function(_e){var Pe;return typeof readbuffer=="function"?new Uint8Array(readbuffer(_e)):(Pe=read(_e,"binary"),v(typeof Pe=="object"),Pe)},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print);var u=i.print||console.log.bind(console),h=i.printErr||console.warn.bind(console);for(o in s)s.hasOwnProperty(o)&&(i[o]=s[o]);s=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var f;i.wasmBinary&&(f=i.wasmBinary),i.noExitRuntime&&i.noExitRuntime,typeof WebAssembly!="object"&&h("no native wasm support detected");var g,_=new WebAssembly.Table({initial:244,maximum:244+0,element:"anyfunc"}),b=!1;function v(de,_e){de||jn("Assertion failed: "+_e)}function C(de){var _e=i["_"+de];return v(_e,"Cannot call unknown function "+de+", make sure it is exported"),_e}function y(de,_e,Pe,nn,Ln){var yt={string:function(G){var ye=0;if(G!=null&&G!==0){var Fe=(G.length<<2)+1;ye=qt(Fe),k(G,ye,Fe)}return ye},array:function(G){var ye=qt(G.length);return D(G,ye),ye}};function vt(G){return _e==="string"?T(G):_e==="boolean"?Boolean(G):G}var ot=C(de),ei=[],Hi=0;if(nn)for(var Nr=0;Nr<nn.length;Nr++){var Vb=yt[Pe[Nr]];Vb?(Hi===0&&(Hi=bn()),ei[Nr]=Vb(nn[Nr])):ei[Nr]=nn[Nr]}var ze=ot.apply(null,ei);return ze=vt(ze),Hi!==0&&_s(Hi),ze}var w=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function L(de,_e,Pe){for(var nn=_e+Pe,Ln=_e;de[Ln]&&!(Ln>=nn);)++Ln;if(Ln-_e>16&&de.subarray&&w)return w.decode(de.subarray(_e,Ln));for(var yt="";_e<Ln;){var vt=de[_e++];if(!(vt&128)){yt+=String.fromCharCode(vt);continue}var ot=de[_e++]&63;if((vt&224)==192){yt+=String.fromCharCode((vt&31)<<6|ot);continue}var ei=de[_e++]&63;if((vt&240)==224?vt=(vt&15)<<12|ot<<6|ei:vt=(vt&7)<<18|ot<<12|ei<<6|de[_e++]&63,vt<65536)yt+=String.fromCharCode(vt);else{var Hi=vt-65536;yt+=String.fromCharCode(55296|Hi>>10,56320|Hi&1023)}}return yt}function T(de,_e){return de?L(ae,de,_e):""}function S(de,_e,Pe,nn){if(!(nn>0))return 0;for(var Ln=Pe,yt=Pe+nn-1,vt=0;vt<de.length;++vt){var ot=de.charCodeAt(vt);if(ot>=55296&&ot<=57343){var ei=de.charCodeAt(++vt);ot=65536+((ot&1023)<<10)|ei&1023}if(ot<=127){if(Pe>=yt)break;_e[Pe++]=ot}else if(ot<=2047){if(Pe+1>=yt)break;_e[Pe++]=192|ot>>6,_e[Pe++]=128|ot&63}else if(ot<=65535){if(Pe+2>=yt)break;_e[Pe++]=224|ot>>12,_e[Pe++]=128|ot>>6&63,_e[Pe++]=128|ot&63}else{if(Pe+3>=yt)break;_e[Pe++]=240|ot>>18,_e[Pe++]=128|ot>>12&63,_e[Pe++]=128|ot>>6&63,_e[Pe++]=128|ot&63}}return _e[Pe]=0,Pe-Ln}function k(de,_e,Pe){return S(de,ae,_e,Pe)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function D(de,_e){K.set(de,_e)}var O=65536;function F(de,_e){return de%_e>0&&(de+=_e-de%_e),de}var U,K,ae,fe;function we(de){U=de,i.HEAP8=K=new Int8Array(de),i.HEAP16=new Int16Array(de),i.HEAP32=fe=new Int32Array(de),i.HEAPU8=ae=new Uint8Array(de),i.HEAPU16=new Uint16Array(de),i.HEAPU32=new Uint32Array(de),i.HEAPF32=new Float32Array(de),i.HEAPF64=new Float64Array(de)}var xe=5507664,De=264624,Oe=i.TOTAL_MEMORY||157286400;i.wasmMemory?g=i.wasmMemory:g=new WebAssembly.Memory({initial:Oe/O}),g&&(U=g.buffer),Oe=U.byteLength,we(U),fe[De>>2]=xe;function nt(de){for(;de.length>0;){var _e=de.shift();if(typeof _e=="function"){_e();continue}var Pe=_e.func;typeof Pe=="number"?_e.arg===void 0?i.dynCall_v(Pe):i.dynCall_vi(Pe,_e.arg):Pe(_e.arg===void 0?null:_e.arg)}}var Te=[],ce=[],oe=[],re=[];function pe(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)gi(i.preRun.shift());nt(Te)}function it(){nt(ce)}function Mt(){nt(oe)}function cn(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Ii(i.postRun.shift());nt(re)}function gi(de){Te.unshift(de)}function Ii(de){re.unshift(de)}var Ne=0,Vi=null;function Ra(de){Ne++,i.monitorRunDependencies&&i.monitorRunDependencies(Ne)}function Bo(de){if(Ne--,i.monitorRunDependencies&&i.monitorRunDependencies(Ne),Ne==0&&Vi){var _e=Vi;Vi=null,_e()}}i.preloadedImages={},i.preloadedAudios={};function jn(de){throw i.onAbort&&i.onAbort(de),de+="",u(de),h(de),b=!0,de="abort("+de+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(de)}var Oa="data:application/octet-stream;base64,";function ud(de){return String.prototype.startsWith?de.startsWith(Oa):de.indexOf(Oa)===0}var ms="onigasm.wasm";ud(ms)||(ms=c(ms));function hd(){try{if(f)return new Uint8Array(f);if(d)return d(ms);throw"both async and sync fetching of the wasm failed"}catch(de){jn(de)}}function Y(){return!f&&a&&typeof fetch=="function"?fetch(ms,{credentials:"same-origin"}).then(function(de){if(!de.ok)throw"failed to load wasm binary file at '"+ms+"'";return de.arrayBuffer()}).catch(function(){return hd()}):new Promise(function(de,_e){de(hd())})}function $(){var de={env:St,wasi_unstable:St};function _e(vt,ot){var ei=vt.exports;i.asm=ei,Bo()}Ra();function Pe(vt){_e(vt.instance)}function nn(vt){return Y().then(function(ot){return WebAssembly.instantiate(ot,de)}).then(vt,function(ot){h("failed to asynchronously prepare wasm: "+ot),jn(ot)})}function Ln(){if(!f&&typeof WebAssembly.instantiateStreaming=="function"&&!ud(ms)&&typeof fetch=="function")fetch(ms,{credentials:"same-origin"}).then(function(vt){var ot=WebAssembly.instantiateStreaming(vt,de);return ot.then(Pe,function(ei){h("wasm streaming compile failed: "+ei),h("falling back to ArrayBuffer instantiation"),nn(Pe)})});else return nn(Pe)}if(i.instantiateWasm)try{var yt=i.instantiateWasm(de,_e);return yt}catch(vt){return h("Module.instantiateWasm callback failed with error: "+vt),!1}return Ln(),{}}ce.push({func:function(){Ie()}});function z(){jn()}function E(){return K.length}function N(){return 264624}function V(de,_e,Pe){ae.set(ae.subarray(_e,_e+Pe),de)}function P(de){try{return g.grow(de-U.byteLength+65535>>16),we(g.buffer),1}catch{}}function X(de){var _e=E(),Pe=65536,nn=2147483648-Pe;if(de>nn)return!1;for(var Ln=16777216,yt=Math.max(_e,Ln);yt<de;)yt<=536870912?yt=F(2*yt,Pe):yt=Math.min(F((3*yt+2147483648)/4,Pe),nn);var vt=P(yt);return!!vt}var se={buffers:[null,[],[]],printChar:function(de,_e){var Pe=se.buffers[de];_e===0||_e===10?((de===1?u:h)(L(Pe,0)),Pe.length=0):Pe.push(_e)},varargs:0,get:function(de){se.varargs+=4;var _e=fe[se.varargs-4>>2];return _e},getStr:function(){var de=T(se.get());return de},get64:function(){var de=se.get();return se.get(),de},getZero:function(){se.get()}};function Ee(de){try{return 0}catch(_e){return(typeof FS>"u"||!(_e instanceof FS.ErrnoError))&&jn(_e),_e.errno}}function ke(de,_e,Pe,nn,Ln){try{return 0}catch(yt){return(typeof FS>"u"||!(yt instanceof FS.ErrnoError))&&jn(yt),yt.errno}}function $e(de,_e,Pe,nn){try{for(var Ln=0,yt=0;yt<Pe;yt++){for(var vt=fe[_e+yt*8>>2],ot=fe[_e+(yt*8+4)>>2],ei=0;ei<ot;ei++)se.printChar(de,ae[vt+ei]);Ln+=ot}return fe[nn>>2]=Ln,0}catch(Hi){return(typeof FS>"u"||!(Hi instanceof FS.ErrnoError))&&jn(Hi),Hi.errno}}function Ue(de){}var St={abort:z,emscripten_get_sbrk_ptr:N,emscripten_memcpy_big:V,emscripten_resize_heap:X,fd_close:Ee,fd_seek:ke,fd_write:$e,memory:g,setTempRet0:Ue,table:_},gt=$();i.asm=gt;var Ie=i.___wasm_call_ctors=function(){return i.asm.__wasm_call_ctors.apply(null,arguments)};i._malloc=function(){return i.asm.malloc.apply(null,arguments)},i._free=function(){return i.asm.free.apply(null,arguments)},i._getLastError=function(){return i.asm.getLastError.apply(null,arguments)},i._compilePattern=function(){return i.asm.compilePattern.apply(null,arguments)},i._disposeCompiledPatterns=function(){return i.asm.disposeCompiledPatterns.apply(null,arguments)},i._findBestMatch=function(){return i.asm.findBestMatch.apply(null,arguments)},i.___cxa_demangle=function(){return i.asm.__cxa_demangle.apply(null,arguments)},i._setThrew=function(){return i.asm.setThrew.apply(null,arguments)};var bn=i.stackSave=function(){return i.asm.stackSave.apply(null,arguments)},qt=i.stackAlloc=function(){return i.asm.stackAlloc.apply(null,arguments)},_s=i.stackRestore=function(){return i.asm.stackRestore.apply(null,arguments)};i.__growWasmMemory=function(){return i.asm.__growWasmMemory.apply(null,arguments)},i.dynCall_vi=function(){return i.asm.dynCall_vi.apply(null,arguments)},i.dynCall_iiii=function(){return i.asm.dynCall_iiii.apply(null,arguments)},i.dynCall_iiiii=function(){return i.asm.dynCall_iiiii.apply(null,arguments)},i.dynCall_iii=function(){return i.asm.dynCall_iii.apply(null,arguments)},i.dynCall_iidiiii=function(){return i.asm.dynCall_iidiiii.apply(null,arguments)},i.dynCall_vii=function(){return i.asm.dynCall_vii.apply(null,arguments)},i.dynCall_ii=function(){return i.asm.dynCall_ii.apply(null,arguments)},i.dynCall_i=function(){return i.asm.dynCall_i.apply(null,arguments)},i.dynCall_v=function(){return i.asm.dynCall_v.apply(null,arguments)},i.dynCall_viiiiii=function(){return i.asm.dynCall_viiiiii.apply(null,arguments)},i.dynCall_viiiii=function(){return i.asm.dynCall_viiiii.apply(null,arguments)},i.dynCall_viiii=function(){return i.asm.dynCall_viiii.apply(null,arguments)},i.dynCall_jiji=function(){return i.asm.dynCall_jiji.apply(null,arguments)},i.asm=gt,i.ccall=y;var Rt;i.then=function(de){if(Rt)de(i);else{var _e=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){_e&&_e(),de(i)}}return i},Vi=function de(){Rt||kn(),Rt||(Vi=de)};function kn(de){if(Ne>0||(pe(),Ne>0))return;function _e(){Rt||(Rt=!0,!b&&(it(),Mt(),i.onRuntimeInitialized&&i.onRuntimeInitialized(),cn()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),_e()},1)):_e()}if(i.run=kn,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return kn(),n}}();r.exports=t})(mpe);Object.defineProperty(Pb,"__esModule",{value:!0});const _pe=yE;async function fF(r){return new Promise((e,t)=>{const{log:n,warn:i,error:s}=console;_pe({instantiateWasm(o,a){return WebAssembly.instantiate(r,o).then(l=>{a(l.instance)}).catch(l=>{throw l}),{}}}).then(o=>{Pb.onigasmH=o,e()}),typeof print<"u"&&(console.log=n,console.error=s,console.warn=i)})}let gF=!1;async function bpe(r){if(gF)throw new Error("Onigasm#init has been called and was succesful, subsequent calls are not allowed once initialized");if(typeof r=="string"){const e=await(await fetch(r)).arrayBuffer();await fF(e)}else if(r instanceof ArrayBuffer)await fF(r);else throw new TypeError("Expected a string (URL of .wasm file) or ArrayBuffer (.wasm file itself) as first parameter");gF=!0}Pb.loadWASM=bpe;var $N={},Fb={},ek,pF;function vpe(){return pF||(pF=1,ek=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),ek}var Cpe=zt;zt.Node=$u;zt.create=zt;function zt(r){var e=this;if(e instanceof zt||(e=new zt),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}zt.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};zt.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};zt.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};zt.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)wpe(this,arguments[r]);return this.length};zt.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)Spe(this,arguments[r]);return this.length};zt.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};zt.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};zt.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};zt.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};zt.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};zt.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};zt.prototype.map=function(r,e){e=e||this;for(var t=new zt,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};zt.prototype.mapReverse=function(r,e){e=e||this;for(var t=new zt,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};zt.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};zt.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};zt.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};zt.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};zt.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new zt;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};zt.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new zt;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};zt.prototype.splice=function(r,e){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var t=0,n=this.head;n!==null&&t<r;t++)n=n.next;for(var i=[],t=0;n&&t<e;t++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var t=2;t<arguments.length;t++)n=ype(this,n,arguments[t]);return i};zt.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function ype(r,e,t){var n=e===r.head?new $u(t,null,e,r):new $u(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function wpe(r,e){r.tail=new $u(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function Spe(r,e){r.head=new $u(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function $u(r,e,t,n){if(!(this instanceof $u))return new $u(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{vpe()(zt)}catch{}const xpe=Cpe,Rd=Symbol("max"),al=Symbol("length"),Ih=Symbol("lengthCalculator"),wm=Symbol("allowStale"),zd=Symbol("maxAge"),Ja=Symbol("dispose"),mF=Symbol("noDisposeOnSet"),Mi=Symbol("lruList"),eo=Symbol("cache"),wW=Symbol("updateAgeOnGet"),tk=()=>1;let kpe=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Rd]=e.max||1/0;const t=e.length||tk;if(this[Ih]=typeof t!="function"?tk:t,this[wm]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[zd]=e.maxAge||0,this[Ja]=e.dispose,this[mF]=e.noDisposeOnSet||!1,this[wW]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Rd]=e||1/0,Sp(this)}get max(){return this[Rd]}set allowStale(e){this[wm]=!!e}get allowStale(){return this[wm]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[zd]=e,Sp(this)}get maxAge(){return this[zd]}set lengthCalculator(e){typeof e!="function"&&(e=tk),e!==this[Ih]&&(this[Ih]=e,this[al]=0,this[Mi].forEach(t=>{t.length=this[Ih](t.value,t.key),this[al]+=t.length})),Sp(this)}get lengthCalculator(){return this[Ih]}get length(){return this[al]}get itemCount(){return this[Mi].length}rforEach(e,t){t=t||this;for(let n=this[Mi].tail;n!==null;){const i=n.prev;_F(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[Mi].head;n!==null;){const i=n.next;_F(this,e,n,t),n=i}}keys(){return this[Mi].toArray().map(e=>e.key)}values(){return this[Mi].toArray().map(e=>e.value)}reset(){this[Ja]&&this[Mi]&&this[Mi].length&&this[Mi].forEach(e=>this[Ja](e.key,e.value)),this[eo]=new Map,this[Mi]=new xpe,this[al]=0}dump(){return this[Mi].map(e=>Ny(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Mi]}set(e,t,n){if(n=n||this[zd],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,s=this[Ih](t,e);if(this[eo].has(e)){if(s>this[Rd])return If(this,this[eo].get(e)),!1;const l=this[eo].get(e).value;return this[Ja]&&(this[mF]||this[Ja](e,l.value)),l.now=i,l.maxAge=n,l.value=t,this[al]+=s-l.length,l.length=s,this.get(e),Sp(this),!0}const o=new Lpe(e,t,s,i,n);return o.length>this[Rd]?(this[Ja]&&this[Ja](e,t),!1):(this[al]+=o.length,this[Mi].unshift(o),this[eo].set(e,this[Mi].head),Sp(this),!0)}has(e){if(!this[eo].has(e))return!1;const t=this[eo].get(e).value;return!Ny(this,t)}get(e){return nk(this,e,!0)}peek(e){return nk(this,e,!1)}pop(){const e=this[Mi].tail;return e?(If(this,e),e.value):null}del(e){If(this,this[eo].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-t;o>0&&this.set(i.k,i.v,o)}}}prune(){this[eo].forEach((e,t)=>nk(this,t,!1))}};const nk=(r,e,t)=>{const n=r[eo].get(e);if(n){const i=n.value;if(Ny(r,i)){if(If(r,n),!r[wm])return}else t&&(r[wW]&&(n.value.now=Date.now()),r[Mi].unshiftNode(n));return i.value}},Ny=(r,e)=>{if(!e||!e.maxAge&&!r[zd])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[zd]&&t>r[zd]},Sp=r=>{if(r[al]>r[Rd])for(let e=r[Mi].tail;r[al]>r[Rd]&&e!==null;){const t=e.prev;If(r,e),e=t}},If=(r,e)=>{if(e){const t=e.value;r[Ja]&&r[Ja](t.key,t.value),r[al]-=t.length,r[eo].delete(t.key),r[Mi].removeNode(e)}};class Lpe{constructor(e,t,n,i,s){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=s||0}}const _F=(r,e,t,n)=>{let i=t.value;Ny(r,i)&&(If(r,t),r[wm]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};var Tpe=kpe,Pw={};Object.defineProperty(Pw,"__esModule",{value:!0});class Dpe{constructor(e){if(this.substring=(t,n)=>this.source.substring(t,n),this.toString=(t,n)=>this.source,typeof e!="string")throw new TypeError("Argument must be a string");this.source=e,this._utf8Bytes=null,this._utf8Indexes=null}get utf8Bytes(){return this._utf8Bytes||this.encode(),this._utf8Bytes}get utf8Indexes(){return this._utf8Bytes||this.encode(),this._utf8Indexes}get content(){return this.source}get length(){return this.source.length}get hasMultiByteCharacters(){return this.utf8Indexes!==null}convertUtf8OffsetToUtf16(e){if(e<0)return 0;const t=this._utf8Bytes;if(e>=t.length-1)return this.source.length;const n=this.utf8Indexes;return n&&e>=this._mappingTableStartOffset?Epe(n,e-this._mappingTableStartOffset)+this._mappingTableStartOffset:e}convertUtf16OffsetToUtf8(e){if(e<0)return 0;const t=this._utf8Bytes;if(e>=this.source.length)return t.length-1;const n=this.utf8Indexes;return n&&e>=this._mappingTableStartOffset?n[e-this._mappingTableStartOffset]+this._mappingTableStartOffset:e}encode(){const e=this.source,t=e.length;let n,i=0,s=0;function o(u){const h=(t-u)*3;h<=255?n=new Uint8Array(t-u):h<=65535?n=new Uint16Array(t-u):n=new Uint32Array(t-u),s=u,n[i++]=0}const a=new Uint8Array(t*3+1);let l=0,c=0;for(;c<e.length;){let u;const h=e.charCodeAt(c);if(n&&(n[i++]=l-s),h<55296||h>57343)u=h;else if(h>=56320)u=65533;else if(c===t-1)u=65533;else{const _=e.charCodeAt(c+1);if(56320<=_&&_<=57343){n||o(c);const b=h&1023,v=_&1023;u=65536+(b<<10)+v,c+=1,n[i++]=l-s}else u=65533}let f,g;if(u<=127?(f=1,g=0):u<=2047?(f=2,g=192):u<=65535?(f=3,g=224):(f=4,g=240),f===1)a[l++]=u;else for(n||o(l),a[l++]=(u>>6*--f)+g;f>0;){const _=u>>6*(f-1);a[l++]=128|_&63,f-=1}c+=1}const d=a.slice(0,l+1);d[l]=0,this._utf8Bytes=d,n&&(this._utf8Indexes=n,this._mappingTableStartOffset=s)}}function Epe(r,e){let t=0,n=r.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);r[i]>=e?n=i:t=i+1}for(;t>0&&(t>=r.length||r[t]>e);)t--;return t>0&&r[t]===r[t-1]&&t--,t}Pw.default=Dpe;Object.defineProperty(Fb,"__esModule",{value:!0});const Ape=Tpe,gn=Pb,r0=Pw;function bF(r){const e=gn.onigasmH._malloc(r.utf8Bytes.length);return gn.onigasmH.HEAPU8.set(r.utf8Bytes,e),e}function wE(r){const e=[];let t=0;for(;gn.onigasmH.HEAPU8[r]!==0;)e[t++]=gn.onigasmH.HEAPU8[r++];return e.join()}const vF=new Ape({dispose:(r,e)=>{const t=gn.onigasmH._malloc(e.regexTPtrs.length);if(gn.onigasmH.HEAPU8.set(e.regexTPtrs,t),gn.onigasmH._disposeCompiledPatterns(t,r.patterns.length)!==0){const i=wE(gn.onigasmH._getLastError());throw new Error(i)}gn.onigasmH._free(t)},max:1e3});class SW{constructor(e){if(gn.onigasmH===null)throw new Error("Onigasm has not been initialized, call loadWASM from 'onigasm' exports before using any other API");for(let t=0;t<e.length;t++)if(typeof e[t]!="string")throw new TypeError("First parameter to OnigScanner constructor must be array of (pattern) strings");this.sources=e.slice()}get patterns(){return this.sources.slice()}findNextMatch(e,t,n){t==null&&(t=0),typeof t=="function"&&(n=t,t=0);try{const i=this.findNextMatchSync(e,t);n(null,i)}catch(i){n(i)}}findNextMatchSync(e,t){t==null&&(t=0),t=this.convertToNumber(t);let n=vF.get(this),i=0;if(!n){const h=gn.onigasmH._malloc(4),f=[];for(let g=0;g<this.sources.length;g++){const _=this.sources[g],b=bF(new r0.default(_));if(i=gn.onigasmH._compilePattern(b,h),i!==0){const C=wE(gn.onigasmH._getLastError());throw new Error(C)}const v=gn.onigasmH.HEAP32[h/4];f.push(v),gn.onigasmH._free(b)}n={regexTPtrs:new Uint8Array(Uint32Array.from(f).buffer)},gn.onigasmH._free(h),vF.set(this,n)}const s=e instanceof r0.default?e:new r0.default(this.convertToString(e)),o=bF(s),a=gn.onigasmH._malloc(8),l=gn.onigasmH._malloc(n.regexTPtrs.length);if(gn.onigasmH.HEAPU8.set(n.regexTPtrs,l),i=gn.onigasmH._findBestMatch(l,this.sources.length,o,s.utf8Bytes.length-1,s.convertUtf16OffsetToUtf8(t),a),i!==0){const h=wE(gn.onigasmH._getLastError());throw new Error(h)}const[c,d,u]=new Uint32Array(gn.onigasmH.HEAPU32.buffer,a,3);if(gn.onigasmH._free(o),gn.onigasmH._free(a),gn.onigasmH._free(l),u>0){const h=new Uint32Array(gn.onigasmH.HEAPU32.buffer,d,u),f=[];let g=0,_=0;for(;g<u;){const b=_++;let v=h[g++],C=h[g++];s.hasMultiByteCharacters&&(v=s.convertUtf8OffsetToUtf16(v),C=s.convertUtf8OffsetToUtf16(C)),f.push({end:C,index:b,length:C-v,start:v})}return gn.onigasmH._free(d),{captureIndices:f,index:c,scanner:this}}return null}convertToString(e){return e===void 0?"undefined":e===null?"null":e instanceof r0.default?e.content:e.toString()}convertToNumber(e){return e=parseInt(e,10),isFinite(e)||(e=0),e=Math.max(e,0),e}}Fb.OnigScanner=SW;Fb.default=SW;Object.defineProperty($N,"__esModule",{value:!0});const Ipe=Fb;class Npe{constructor(e){this.source=e;try{this.scanner=new Ipe.default([this.source])}catch{}}searchSync(e,t){let n;return t==null&&(t=0),n=this.scanner.findNextMatchSync(e,t),this.captureIndicesForMatch(e,n)}search(e,t,n){t==null&&(t=0),typeof t=="function"&&(n=t,t=0);try{const i=this.searchSync(e,t);n(null,i)}catch(i){n(i)}}testSync(e){return typeof this.source=="boolean"||typeof e=="boolean"?this.source===e:this.searchSync(e)!=null}test(e,t){typeof t!="function"&&(t=()=>{});try{t(null,this.testSync(e))}catch(n){t(n)}}captureIndicesForMatch(e,t){if(t!=null){const{captureIndices:n}=t;let i;e=this.scanner.convertToString(e);for(let s=0;s<n.length;s++)i=n[s],i.match=e.slice(i.start,i.end);return n}else return null}}$N.default=Npe;Object.defineProperty(Gg,"__esModule",{value:!0});const Mpe=Pb;var Rpe=Gg.loadWASM=Mpe.loadWASM;const Ope=$N;Gg.OnigRegExp=Ope.default;const Ppe=Fb;Gg.OnigScanner=Ppe.default;const Fpe=Pw;Gg.OnigString=Fpe.default;var Fw={},zN={},Fo={},qg={};Object.defineProperty(qg,"__esModule",{value:!0});function Bpe(r){return KN(r)}qg.clone=Bpe;function KN(r){return Array.isArray(r)?Wpe(r):typeof r=="object"?Vpe(r):r}function Wpe(r){for(var e=[],t=0,n=r.length;t<n;t++)e[t]=KN(r[t]);return e}function Vpe(r){var e={};for(var t in r)e[t]=KN(r[t]);return e}function Hpe(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(n){for(var i in n)r[i]=n[i]}),r}qg.mergeObjects=Hpe;var CF=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/,Upe=function(){function r(){}return r.hasCaptures=function(e){return CF.test(e)},r.replaceCaptures=function(e,t,n){return e.replace(CF,function(i,s,o,a){var l=n[parseInt(s||o,10)];if(l){for(var c=t.substring(l.start,l.end);c[0]===".";)c=c.substring(1);switch(a){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return i})},r}();qg.RegexSource=Upe;var Ir={};const jpe={},$pe=Object.freeze(Object.defineProperty({__proto__:null,default:jpe},Symbol.toStringTag,{value:"Module"})),zpe=ZW($pe);var Bb=Nf&&Nf.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ir,"__esModule",{value:!0});var Kpe=zpe,zp=qg,xW=Gg,Gpe=/\\(\d+)/,yF=/\\(\d+)/g,Zg=function(){function r(e,t,n,i){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=zp.RegexSource.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=zp.RegexSource.hasCaptures(this._contentName)}return Object.defineProperty(r.prototype,"debugName",{get:function(){return this.constructor.name+"#"+this.id+" @ "+Kpe.basename(this.$location.filename)+":"+this.$location.line},enumerable:!0,configurable:!0}),r.prototype.getName=function(e,t){return this._nameIsCapturing?zp.RegexSource.replaceCaptures(this._name,e,t):this._name},r.prototype.getContentName=function(e,t){return this._contentNameIsCapturing?zp.RegexSource.replaceCaptures(this._contentName,e,t):this._contentName},r.prototype.collectPatternsRecursive=function(e,t,n){throw new Error("Implement me!")},r.prototype.compile=function(e,t,n,i){throw new Error("Implement me!")},r}();Ir.Rule=Zg;var kW=function(r){Bb(e,r);function e(t,n,i,s,o){var a=r.call(this,t,n,i,s)||this;return a.retokenizeCapturedWithRuleId=o,a}return e}(Zg);Ir.CaptureRule=kW;var yg=function(){function r(e,t,n){n===void 0&&(n=!0),n?this._handleAnchors(e):(this.source=e,this.hasAnchor=!1),this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()),this.ruleId=t,this.hasBackReferences=Gpe.test(this.source)}return r.prototype.clone=function(){return new r(this.source,this.ruleId,!0)},r.prototype.setSource=function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))},r.prototype._handleAnchors=function(e){if(e){var t=void 0,n=void 0,i=void 0,s=void 0,o=0,a=[],l=!1;for(t=0,n=e.length;t<n;t++)i=e.charAt(t),i==="\\"&&t+1<n&&(s=e.charAt(t+1),s==="z"?(a.push(e.substring(o,t)),a.push("$(?!\\n)(?<!\\n)"),o=t+2):(s==="A"||s==="G")&&(l=!0),t++);this.hasAnchor=l,o===0?this.source=e:(a.push(e.substring(o,n)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e},r.prototype.resolveBackReferences=function(e,t){var n=t.map(function(i){return e.substring(i.start,i.end)});return yF.lastIndex=0,this.source.replace(yF,function(i,s){return Ype(n[parseInt(s,10)]||"")})},r.prototype._buildAnchorCache=function(){var e=[],t=[],n=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,t[s]=a,n[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="￿",t[s+1]="￿",n[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="￿",t[s+1]="G",n[s+1]="￿",i[s+1]="G"):(e[s+1]=l,t[s+1]=l,n[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:t.join(""),A1_G0:n.join(""),A1_G1:i.join("")}},r.prototype.resolveAnchors=function(e,t){return this.hasAnchor?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source},r}();Ir.RegExpSource=yg;function wF(r){return new xW.OnigScanner(r)}function qpe(r){var e=new xW.OnigString(r);return e.$str=r,e}Ir.createOnigString=qpe;function Zpe(r){return r.$str}Ir.getString=Zpe;var wg=function(){function r(){this._items=[],this._hasAnchors=!1,this._cached=null,this._cachedSources=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}return r.prototype.push=function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},r.prototype.unshift=function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},r.prototype.length=function(){return this._items.length},r.prototype.setSource=function(e,t){this._items[e].source!==t&&(this._cached=null,this._anchorCache.A0_G0=null,this._anchorCache.A0_G1=null,this._anchorCache.A1_G0=null,this._anchorCache.A1_G1=null,this._items[e].setSource(t))},r.prototype.compile=function(e,t,n){if(this._hasAnchors)return this._anchorCache={A0_G0:this._anchorCache.A0_G0||(t===!1&&n===!1?this._resolveAnchors(t,n):null),A0_G1:this._anchorCache.A0_G1||(t===!1&&n===!0?this._resolveAnchors(t,n):null),A1_G0:this._anchorCache.A1_G0||(t===!0&&n===!1?this._resolveAnchors(t,n):null),A1_G1:this._anchorCache.A1_G1||(t===!0&&n===!0?this._resolveAnchors(t,n):null)},t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0;if(!this._cached){var i=this._items.map(function(s){return s.source});this._cached={scanner:wF(i),rules:this._items.map(function(s){return s.ruleId}),debugRegExps:i}}return this._cached},r.prototype._resolveAnchors=function(e,t){var n=this._items.map(function(i){return i.resolveAnchors(e,t)});return{scanner:wF(n),rules:this._items.map(function(i){return i.ruleId}),debugRegExps:n}},r}();Ir.RegExpSourceList=wg;var LW=function(r){Bb(e,r);function e(t,n,i,s,o){var a=r.call(this,t,n,i,null)||this;return a._match=new yg(s,a.id),a.captures=o,a._cachedCompiledPatterns=null,a}return Object.defineProperty(e.prototype,"debugMatchRegExp",{get:function(){return""+this._match.source},enumerable:!0,configurable:!0}),e.prototype.collectPatternsRecursive=function(t,n,i){n.push(this._match)},e.prototype.compile=function(t,n,i,s){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wg,this.collectPatternsRecursive(t,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(t,i,s)},e}(Zg);Ir.MatchRule=LW;var SE=function(r){Bb(e,r);function e(t,n,i,s,o){var a=r.call(this,t,n,i,s)||this;return a.patterns=o.patterns,a.hasMissingPatterns=o.hasMissingPatterns,a._cachedCompiledPatterns=null,a}return e.prototype.collectPatternsRecursive=function(t,n,i){var s,o,a;for(s=0,o=this.patterns.length;s<o;s++)a=t.getRule(this.patterns[s]),a.collectPatternsRecursive(t,n,!1)},e.prototype.compile=function(t,n,i,s){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wg,this.collectPatternsRecursive(t,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(t,i,s)},e}(Zg);Ir.IncludeOnlyRule=SE;function Ype(r){return r.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var xE=function(r){Bb(e,r);function e(t,n,i,s,o,a,l,c,d,u){var h=r.call(this,t,n,i,s)||this;return h._begin=new yg(o,h.id),h.beginCaptures=a,h._end=new yg(l,-1),h.endHasBackReferences=h._end.hasBackReferences,h.endCaptures=c,h.applyEndPatternLast=d||!1,h.patterns=u.patterns,h.hasMissingPatterns=u.hasMissingPatterns,h._cachedCompiledPatterns=null,h}return Object.defineProperty(e.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debugEndRegExp",{get:function(){return""+this._end.source},enumerable:!0,configurable:!0}),e.prototype.getEndWithResolvedBackReferences=function(t,n){return this._end.resolveBackReferences(t,n)},e.prototype.collectPatternsRecursive=function(t,n,i){if(i){var s=void 0,o=void 0,a=void 0;for(s=0,o=this.patterns.length;s<o;s++)a=t.getRule(this.patterns[s]),a.collectPatternsRecursive(t,n,!1)}else n.push(this._begin)},e.prototype.compile=function(t,n,i,s){var o=this._precompile(t);return this._end.hasBackReferences&&(this.applyEndPatternLast?o.setSource(o.length()-1,n):o.setSource(0,n)),this._cachedCompiledPatterns.compile(t,i,s)},e.prototype._precompile=function(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wg,this.collectPatternsRecursive(t,this._cachedCompiledPatterns,!0),this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)),this._cachedCompiledPatterns},e}(Zg);Ir.BeginEndRule=xE;var kE=function(r){Bb(e,r);function e(t,n,i,s,o,a,l,c,d){var u=r.call(this,t,n,i,s)||this;return u._begin=new yg(o,u.id),u.beginCaptures=a,u.whileCaptures=c,u._while=new yg(l,-2),u.whileHasBackReferences=u._while.hasBackReferences,u.patterns=d.patterns,u.hasMissingPatterns=d.hasMissingPatterns,u._cachedCompiledPatterns=null,u._cachedCompiledWhilePatterns=null,u}return e.prototype.getWhileWithResolvedBackReferences=function(t,n){return this._while.resolveBackReferences(t,n)},e.prototype.collectPatternsRecursive=function(t,n,i){if(i){var s=void 0,o=void 0,a=void 0;for(s=0,o=this.patterns.length;s<o;s++)a=t.getRule(this.patterns[s]),a.collectPatternsRecursive(t,n,!1)}else n.push(this._begin)},e.prototype.compile=function(t,n,i,s){return this._precompile(t),this._cachedCompiledPatterns.compile(t,i,s)},e.prototype._precompile=function(t){this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wg,this.collectPatternsRecursive(t,this._cachedCompiledPatterns,!0))},e.prototype.compileWhile=function(t,n,i,s){return this._precompileWhile(t),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n),this._cachedCompiledWhilePatterns.compile(t,i,s)},e.prototype._precompileWhile=function(t){this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new wg,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while))},e}(Zg);Ir.BeginWhileRule=kE;var Xpe=function(){function r(){}return r.createCaptureRule=function(e,t,n,i,s){return e.registerRule(function(o){return new kW(t,o,n,i,s)})},r.getCompiledRuleId=function(e,t,n){return e.id||t.registerRule(function(i){return e.id=i,e.match?new LW(e.$vscodeTextmateLocation,e.id,e.name,e.match,r._compileCaptures(e.captures,t,n)):e.begin?e.while?new kE(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,r._compileCaptures(e.beginCaptures||e.captures,t,n),e.while,r._compileCaptures(e.whileCaptures||e.captures,t,n),r._compilePatterns(e.patterns,t,n)):new xE(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,r._compileCaptures(e.beginCaptures||e.captures,t,n),e.end,r._compileCaptures(e.endCaptures||e.captures,t,n),e.applyEndPatternLast,r._compilePatterns(e.patterns,t,n)):(e.repository&&(n=zp.mergeObjects({},n,e.repository)),new SE(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,r._compilePatterns(e.patterns,t,n)))}),e.id},r._compileCaptures=function(e,t,n){var i=[],s,o,a,l;if(e){o=0;for(l in e)l!=="$vscodeTextmateLocation"&&(s=parseInt(l,10),s>o&&(o=s));for(a=0;a<=o;a++)i[a]=null;for(l in e)if(l!=="$vscodeTextmateLocation"){s=parseInt(l,10);var c=0;e[l].patterns&&(c=r.getCompiledRuleId(e[l],t,n)),i[s]=r.createCaptureRule(t,e[l].$vscodeTextmateLocation,e[l].name,e[l].contentName,c)}}return i},r._compilePatterns=function(e,t,n){var i=[],s,o,a,l,c,d,u;if(e)for(o=0,a=e.length;o<a;o++){if(s=e[o],l=-1,s.include)if(s.include.charAt(0)==="#"){var h=n[s.include.substr(1)];h&&(l=r.getCompiledRuleId(h,t,n))}else if(s.include==="$base"||s.include==="$self")l=r.getCompiledRuleId(n[s.include],t,n);else{var f=null,g=null,_=s.include.indexOf("#");if(_>=0?(f=s.include.substring(0,_),g=s.include.substring(_+1)):f=s.include,c=t.getExternalGrammar(f,n),c)if(g){var b=c.repository[g];b&&(l=r.getCompiledRuleId(b,t,c.repository))}else l=r.getCompiledRuleId(c.repository.$self,t,c.repository)}else l=r.getCompiledRuleId(s,t,n);if(l!==-1){if(d=t.getRule(l),u=!1,(d instanceof SE||d instanceof xE||d instanceof kE)&&d.hasMissingPatterns&&d.patterns.length===0&&(u=!0),u)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}},r}();Ir.RuleFactory=Xpe;var GN={};Object.defineProperty(GN,"__esModule",{value:!0});function Qpe(r,e){for(var t=[],n=Jpe(r),i=n.next();i!==null;){var s=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":s=1;break;case"L":s=-1;break;default:console.log("Unknown priority "+i+" in scope selector")}i=n.next()}var o=l();if(o&&t.push({matcher:o,priority:s}),i!==",")break;i=n.next()}return t;function a(){if(i==="-"){i=n.next();var d=a();return function(f){return d&&!d(f)}}if(i==="("){i=n.next();var u=c();return i===")"&&(i=n.next()),u}if(SF(i)){var h=[];do h.push(i),i=n.next();while(SF(i));return function(f){return e(h,f)}}return null}function l(){for(var d=[],u=a();u;)d.push(u),u=a();return function(h){return d.every(function(f){return f(h)})}}function c(){for(var d=[],u=l();u&&(d.push(u),i==="|"||i===",");){do i=n.next();while(i==="|"||i===",");u=l()}return function(h){return d.some(function(f){return f(h)})}}}GN.createMatchers=Qpe;function SF(r){return r&&r.match(/[\w\.:]+/)}function Jpe(r){var e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,t=e.exec(r);return{next:function(){if(!t)return null;var n=t[0];return t=e.exec(r),n}}}var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0});Wb.CAPTURE_METADATA=typeof process>"u"?!1:!!process.env.VSCODE_TEXTMATE_DEBUG;Wb.IN_DEBUG_MODE=typeof process>"u"?!1:!!process.env.VSCODE_TEXTMATE_DEBUG;Object.defineProperty(Fo,"__esModule",{value:!0});var eme=qg,vi=Ir,TW=GN,uo=Wb;function tme(r,e,t,n,i){return new AW(r,e,t,n,i)}Fo.createGrammar=tme;function qN(r,e){for(var t=0,n=e.length;t<n;t++){Array.isArray(e[t].patterns)&&qN(r,e[t].patterns);var i=e[t].include;if(i&&!(i==="$base"||i==="$self")&&i.charAt(0)!=="#"){var s=i.indexOf("#");s>=0?r[i.substring(0,s)]=!0:r[i]=!0}}}function DW(r,e){for(var t in e){var n=e[t];n.patterns&&Array.isArray(n.patterns)&&qN(r,n.patterns),n.repository&&DW(r,n.repository)}}function nme(r,e){e.patterns&&Array.isArray(e.patterns)&&qN(r,e.patterns),e.repository&&DW(r,e.repository),delete r[e.scopeName]}Fo.collectIncludedScopes=nme;function ime(r,e){if(!r)return!1;if(r===e)return!0;var t=e.length;return r.length>t&&r.substr(0,t)===e&&r[t]==="."}function EW(r,e){if(e.length<r.length)return!1;var t=0;return r.every(function(n){for(var i=t;i<e.length;i++)if(ime(e[i],n))return t=i+1,!0;return!1})}function xF(r,e,t,n,i){for(var s=TW.createMatchers(e,EW),o=vi.RuleFactory.getCompiledRuleId(t,n,i.repository),a=0,l=s;a<l.length;a++){var c=l[a];r.push({matcher:c.matcher,ruleId:o,grammar:i,priority:c.priority})}}var B0=function(){function r(e,t,n,i){this.scopeName=e,this.languageId=t,this.tokenType=n,this.themeData=i}return r}();Fo.ScopeMetadata=B0;var sme=function(){function r(e,t,n){if(this._initialLanguage=e,this._themeProvider=t,this.onDidChangeTheme(),this._embeddedLanguages=Object.create(null),n)for(var i=Object.keys(n),s=0,o=i.length;s<o;s++){var a=i[s],l=n[a];if(typeof l!="number"||l===0){console.warn("Invalid embedded language found at scope "+a+": <<"+l+">>");continue}this._embeddedLanguages[a]=l}var c=Object.keys(this._embeddedLanguages).map(function(d){return r._escapeRegExpCharacters(d)});c.length===0?this._embeddedLanguagesRegex=null:(c.sort(),c.reverse(),this._embeddedLanguagesRegex=new RegExp("^(("+c.join(")|(")+"))($|\\.)",""))}return r.prototype.onDidChangeTheme=function(){this._cache=Object.create(null),this._defaultMetaData=new B0("",this._initialLanguage,0,[this._themeProvider.getDefaults()])},r.prototype.getDefaultMetadata=function(){return this._defaultMetaData},r._escapeRegExpCharacters=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},r.prototype.getMetadataForScope=function(e){if(e===null)return r._NULL_SCOPE_METADATA;var t=this._cache[e];return t||(t=this._doGetMetadataForScope(e),this._cache[e]=t,t)},r.prototype._doGetMetadataForScope=function(e){var t=this._scopeToLanguage(e),n=this._toStandardTokenType(e),i=this._themeProvider.themeMatch(e);return new B0(e,t,n,i)},r.prototype._scopeToLanguage=function(e){if(!e||!this._embeddedLanguagesRegex)return 0;var t=e.match(this._embeddedLanguagesRegex);if(!t)return 0;var n=this._embeddedLanguages[t[1]]||0;return n||0},r.prototype._toStandardTokenType=function(e){var t=e.match(r.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"meta.embedded":return 8}throw new Error("Unexpected match for standard token type!")},r._NULL_SCOPE_METADATA=new B0("",0,0,null),r.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/,r}(),AW=function(){function r(e,t,n,i,s){if(this._scopeMetadataProvider=new sme(t,s,n),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[],this._includedGrammars={},this._grammarRepository=s,this._grammar=kF(e,null),this._tokenTypeMatchers=[],i)for(var o=0,a=Object.keys(i);o<a.length;o++)for(var l=a[o],c=TW.createMatchers(l,EW),d=0,u=c;d<u.length;d++){var h=u[d];this._tokenTypeMatchers.push({matcher:h.matcher,type:i[l]})}}return r.prototype.onDidChangeTheme=function(){this._scopeMetadataProvider.onDidChangeTheme()},r.prototype.getMetadataForScope=function(e){return this._scopeMetadataProvider.getMetadataForScope(e)},r.prototype.getInjections=function(){var e=this;if(!this._injections){this._injections=[];var t=this._grammar.injections;if(t)for(var n in t)xF(this._injections,n,t[n],this,this._grammar);if(this._grammarRepository){var i=this._grammarRepository.injections(this._grammar.scopeName);i&&i.forEach(function(s){var o=e.getExternalGrammar(s);if(o){var a=o.injectionSelector;a&&xF(e._injections,a,o,e,o)}})}this._injections.sort(function(s,o){return s.priority-o.priority})}return this._injections.length===0?this._injections:this._injections},r.prototype.registerRule=function(e){var t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n},r.prototype.getRule=function(e){return this._ruleId2desc[e]},r.prototype.getExternalGrammar=function(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=kF(n,t&&t.$base),this._includedGrammars[e]}},r.prototype.tokenizeLine=function(e,t){var n=this._tokenize(e,t,!1);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack}},r.prototype.tokenizeLine2=function(e,t){var n=this._tokenize(e,t,!0);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack}},r.prototype._tokenize=function(e,t,n){this._rootId===-1&&(this._rootId=vi.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository));var i;if(!t||t===TE.NULL){i=!0;var s=this._scopeMetadataProvider.getDefaultMetadata(),o=s.themeData[0],a=Bw.set(0,s.languageId,s.tokenType,o.fontStyle,o.foreground,o.background),l=this.getRule(this._rootId).getName(null,null),c=this._scopeMetadataProvider.getMetadataForScope(l),d=LE.mergeMetadata(a,null,c),u=new LE(null,l,d);t=new TE(null,this._rootId,-1,null,u,u)}else i=!1,t.reset();e=e+`
`;var h=vi.createOnigString(e),f=vi.getString(h).length,g=new cme(n,e,this._tokenTypeMatchers),_=IW(this,h,i,0,t,g);return{lineLength:f,lineTokens:g,ruleStack:_}},r}();Fo.Grammar=AW;function kF(r,e){return r=eme.clone(r),r.repository=r.repository||{},r.repository.$self={$vscodeTextmateLocation:r.$vscodeTextmateLocation,patterns:r.patterns,name:r.scopeName},r.repository.$base=e||r.repository.$self,r}function Kp(r,e,t,n,i,s,o){if(s.length!==0){for(var a=Math.min(s.length,o.length),l=[],c=o[0].end,d=0;d<a;d++){var u=s[d];if(u!==null){var h=o[d];if(h.length!==0){if(h.start>c)break;for(;l.length>0&&l[l.length-1].endPos<=h.start;)i.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop();if(l.length>0?i.produceFromScopes(l[l.length-1].scopes,h.start):i.produce(n,h.start),u.retokenizeCapturedWithRuleId){var f=u.getName(vi.getString(e),o),g=n.contentNameScopesList.push(r,f),_=u.getContentName(vi.getString(e),o),b=g.push(r,_),v=n.push(u.retokenizeCapturedWithRuleId,h.start,null,g,b);IW(r,vi.createOnigString(vi.getString(e).substring(0,h.end)),t&&h.start===0,h.start,v,i);continue}var C=u.getName(vi.getString(e),o);if(C!==null){var y=l.length>0?l[l.length-1].scopes:n.contentNameScopesList,w=y.push(r,C);l.push(new NW(w,h.end))}}}}for(;l.length>0;)i.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop()}}function ZN(r){for(var e=[],t=0,n=r.rules.length;t<n;t++)e.push("   - "+r.rules[t]+": "+r.debugRegExps[t]);return e.join(`
`)}function rme(r,e,t,n,i,s,o){for(var a=Number.MAX_VALUE,l=null,c,d=0,u=s.contentNameScopesList.generateScopes(),h=0,f=r.length;h<f;h++){var g=r[h];if(g.matcher(u)){var _=e.getRule(g.ruleId).compile(e,null,n,i===o),b=_.scanner.findNextMatchSync(t,i);if(uo.IN_DEBUG_MODE&&(console.log("  scanning for injections"),console.log(ZN(_))),!!b){var v=b.captureIndices[0].start;if(!(v>=a)&&(a=v,l=b.captureIndices,c=_.rules[b.index],d=g.priority,a===i))break}}}return l?{priorityMatch:d===-1,captureIndices:l,matchedRuleId:c}:null}function ome(r,e,t,n,i,s){var o=i.getRule(r),a=o.compile(r,i.endRule,t,n===s),l=a.scanner.findNextMatchSync(e,n);return uo.IN_DEBUG_MODE&&(console.log("  scanning for"),console.log(ZN(a))),l?{captureIndices:l.captureIndices,matchedRuleId:a.rules[l.index]}:null}function ame(r,e,t,n,i,s){var o=ome(r,e,t,n,i,s),a=r.getInjections();if(a.length===0)return o;var l=rme(a,r,e,t,n,i,s);if(!l)return o;if(!o)return l;var c=o.captureIndices[0].start,d=l.captureIndices[0].start;return d<c||l.priorityMatch&&d===c?l:o}function lme(r,e,t,n,i,s){for(var o=-1,a=[],l=i;l;l=l.pop()){var c=l.getRule(r);c instanceof vi.BeginWhileRule&&a.push({rule:c,stack:l})}for(var d=a.pop();d;d=a.pop()){var u=d.rule.compileWhile(r,d.stack.endRule,t,o===n),h=u.scanner.findNextMatchSync(e,n);if(uo.IN_DEBUG_MODE&&(console.log("  scanning for while rule"),console.log(ZN(u))),h){var f=u.rules[h.index];if(f!==-2){i=d.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(s.produce(d.stack,h.captureIndices[0].start),Kp(r,e,t,d.stack,s,d.rule.whileCaptures,h.captureIndices),s.produce(d.stack,h.captureIndices[0].end),o=h.captureIndices[0].end,h.captureIndices[0].end>n&&(n=h.captureIndices[0].end,t=!1))}else{i=d.stack.pop();break}}return{stack:i,linePos:n,anchorPosition:o,isFirstLine:t}}function IW(r,e,t,n,i,s){var o=vi.getString(e).length,a=!1,l=lme(r,e,t,n,i,s);i=l.stack,n=l.linePos,t=l.isFirstLine;for(var c=l.anchorPosition;!a;)d();function d(){uo.IN_DEBUG_MODE&&(console.log(""),console.log("@@scanNext: |"+vi.getString(e).replace(/\n$/,"\\n").substr(n)+"|"));var u=ame(r,e,t,n,i,c);if(!u){uo.IN_DEBUG_MODE&&console.log("  no more matches."),s.produce(i,o),a=!0;return}var h=u.captureIndices,f=u.matchedRuleId,g=h&&h.length>0?h[0].end>n:!1;if(f===-1){var _=i.getRule(r);uo.IN_DEBUG_MODE&&console.log("  popping "+_.debugName+" - "+_.debugEndRegExp),s.produce(i,h[0].start),i=i.setContentNameScopesList(i.nameScopesList),Kp(r,e,t,i,s,_.endCaptures,h),s.produce(i,h[0].end);var b=i;if(i=i.pop(),!g&&b.getEnterPos()===n){console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),i=b,s.produce(i,o),a=!0;return}}else{var v=r.getRule(f);s.produce(i,h[0].start);var C=i,y=v.getName(vi.getString(e),h),w=i.contentNameScopesList.push(r,y);if(i=i.push(f,n,null,w,w),v instanceof vi.BeginEndRule){var L=v;uo.IN_DEBUG_MODE&&console.log("  pushing "+L.debugName+" - "+L.debugBeginRegExp),Kp(r,e,t,i,s,L.beginCaptures,h),s.produce(i,h[0].end),c=h[0].end;var T=L.getContentName(vi.getString(e),h),S=w.push(r,T);if(i=i.setContentNameScopesList(S),L.endHasBackReferences&&(i=i.setEndRule(L.getEndWithResolvedBackReferences(vi.getString(e),h))),!g&&C.hasSameRuleAs(i)){console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),s.produce(i,o),a=!0;return}}else if(v instanceof vi.BeginWhileRule){var L=v;uo.IN_DEBUG_MODE&&console.log("  pushing "+L.debugName),Kp(r,e,t,i,s,L.beginCaptures,h),s.produce(i,h[0].end),c=h[0].end;var T=L.getContentName(vi.getString(e),h),S=w.push(r,T);if(i=i.setContentNameScopesList(S),L.whileHasBackReferences&&(i=i.setEndRule(L.getWhileWithResolvedBackReferences(vi.getString(e),h))),!g&&C.hasSameRuleAs(i)){console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),s.produce(i,o),a=!0;return}}else{var k=v;if(uo.IN_DEBUG_MODE&&console.log("  matched "+k.debugName+" - "+k.debugMatchRegExp),Kp(r,e,t,i,s,k.captures,h),s.produce(i,h[0].end),i=i.pop(),!g){console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),i=i.safePop(),s.produce(i,o),a=!0;return}}}h[0].end>n&&(n=h[0].end,t=!1)}return i}var Bw=function(){function r(){}return r.toBinaryStr=function(e){for(var t=e.toString(2);t.length<32;)t="0"+t;return t},r.printMetadata=function(e){var t=r.getLanguageId(e),n=r.getTokenType(e),i=r.getFontStyle(e),s=r.getForeground(e),o=r.getBackground(e);console.log({languageId:t,tokenType:n,fontStyle:i,foreground:s,background:o})},r.getLanguageId=function(e){return(e&255)>>>0},r.getTokenType=function(e){return(e&1792)>>>8},r.getFontStyle=function(e){return(e&14336)>>>11},r.getForeground=function(e){return(e&8372224)>>>14},r.getBackground=function(e){return(e&4286578688)>>>23},r.set=function(e,t,n,i,s,o){var a=r.getLanguageId(e),l=r.getTokenType(e),c=r.getFontStyle(e),d=r.getForeground(e),u=r.getBackground(e);return t!==0&&(a=t),n!==0&&(l=n===8?0:n),i!==-1&&(c=i),s!==0&&(d=s),o!==0&&(u=o),(a<<0|l<<8|c<<11|d<<14|u<<23)>>>0},r}();Fo.StackElementMetadata=Bw;var LE=function(){function r(e,t,n){this.parent=e,this.scope=t,this.metadata=n}return r._equals=function(e,t){do{if(e===t)return!0;if(e.scope!==t.scope||e.metadata!==t.metadata)return!1;if(e=e.parent,t=t.parent,!e&&!t)return!0;if(!e||!t)return!1}while(!0)},r.prototype.equals=function(e){return r._equals(this,e)},r._matchesScope=function(e,t,n){return t===e||e.substring(0,n.length)===n},r._matches=function(e,t){if(t===null)return!0;for(var n=t.length,i=0,s=t[i],o=s+".";e;){if(this._matchesScope(e.scope,s,o)){if(i++,i===n)return!0;s=t[i],o=s+"."}e=e.parent}return!1},r.mergeMetadata=function(e,t,n){if(n===null)return e;var i=-1,s=0,o=0;if(n.themeData!==null)for(var a=0,l=n.themeData.length;a<l;a++){var c=n.themeData[a];if(this._matches(t,c.parentScopes)){i=c.fontStyle,s=c.foreground,o=c.background;break}}return Bw.set(e,n.languageId,n.tokenType,i,s,o)},r._push=function(e,t,n){for(var i=0,s=n.length;i<s;i++){var o=n[i],a=t.getMetadataForScope(o),l=r.mergeMetadata(e.metadata,e,a);e=new r(e,o,l)}return e},r.prototype.push=function(e,t){return t===null?this:t.indexOf(" ")>=0?r._push(this,e,t.split(/ /g)):r._push(this,e,[t])},r._generateScopes=function(e){for(var t=[],n=0;e;)t[n++]=e.scope,e=e.parent;return t.reverse(),t},r.prototype.generateScopes=function(){return r._generateScopes(this)},r}();Fo.ScopeListElement=LE;var TE=function(){function r(e,t,n,i,s,o){this.parent=e,this.depth=this.parent?this.parent.depth+1:1,this.ruleId=t,this._enterPos=n,this.endRule=i,this.nameScopesList=s,this.contentNameScopesList=o}return r._structuralEquals=function(e,t){do{if(e===t)return!0;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;if(e=e.parent,t=t.parent,!e&&!t)return!0;if(!e||!t)return!1}while(!0)},r._equals=function(e,t){return e===t?!0:this._structuralEquals(e,t)?e.contentNameScopesList.equals(t.contentNameScopesList):!1},r.prototype.clone=function(){return this},r.prototype.equals=function(e){return e===null?!1:r._equals(this,e)},r._reset=function(e){for(;e;)e._enterPos=-1,e=e.parent},r.prototype.reset=function(){r._reset(this)},r.prototype.pop=function(){return this.parent},r.prototype.safePop=function(){return this.parent?this.parent:this},r.prototype.push=function(e,t,n,i,s){return new r(this,e,t,n,i,s)},r.prototype.getEnterPos=function(){return this._enterPos},r.prototype.getRule=function(e){return e.getRule(this.ruleId)},r.prototype._writeString=function(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="("+this.ruleId+", TODO-"+this.nameScopesList+", TODO-"+this.contentNameScopesList+")",t},r.prototype.toString=function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"},r.prototype.setContentNameScopesList=function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this.endRule,this.nameScopesList,e)},r.prototype.setEndRule=function(e){return this.endRule===e?this:new r(this.parent,this.ruleId,this._enterPos,e,this.nameScopesList,this.contentNameScopesList)},r.prototype.hasSameRuleAs=function(e){return this.ruleId===e.ruleId},r.NULL=new r(null,0,0,null,null,null),r}();Fo.StackElement=TE;var NW=function(){function r(e,t){this.scopes=e,this.endPos=t}return r}();Fo.LocalStackElement=NW;var cme=function(){function r(e,t,n){this._emitBinaryTokens=e,this._tokenTypeOverrides=n,uo.IN_DEBUG_MODE&&(this._lineText=t),this._emitBinaryTokens?this._binaryTokens=[]:this._tokens=[],this._lastTokenEndIndex=0}return r.prototype.produce=function(e,t){this.produceFromScopes(e.contentNameScopesList,t)},r.prototype.produceFromScopes=function(e,t){if(!(this._lastTokenEndIndex>=t)){if(this._emitBinaryTokens){for(var n=e.metadata,i=0,s=this._tokenTypeOverrides;i<s.length;i++){var o=s[i];o.matcher(e.generateScopes())&&(n=Bw.set(n,0,dme(o.type),-1,0,0))}if(this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n),this._lastTokenEndIndex=t;return}var a=e.generateScopes();if(uo.IN_DEBUG_MODE){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(var l=0;l<a.length;l++)console.log("      * "+a[l])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:a}),this._lastTokenEndIndex=t}},r.prototype.getResult=function(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens},r.prototype.getBinaryResult=function(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);for(var n=new Uint32Array(this._binaryTokens.length),i=0,s=this._binaryTokens.length;i<s;i++)n[i]=this._binaryTokens[i];return n},r}();function dme(r){switch(r){case 4:return 4;case 2:return 2;case 1:return 1;case 0:default:return 8}}Object.defineProperty(zN,"__esModule",{value:!0});var LF=Fo,ume=function(){function r(e){this._theme=e,this._grammars={},this._rawGrammars={},this._injectionGrammars={}}return r.prototype.setTheme=function(e){var t=this;this._theme=e,Object.keys(this._grammars).forEach(function(n){var i=t._grammars[n];i.onDidChangeTheme()})},r.prototype.getColorMap=function(){return this._theme.getColorMap()},r.prototype.addGrammar=function(e,t){this._rawGrammars[e.scopeName]=e;var n={};return LF.collectIncludedScopes(n,e),t&&(this._injectionGrammars[e.scopeName]=t,t.forEach(function(i){n[i]=!0})),Object.keys(n)},r.prototype.lookup=function(e){return this._rawGrammars[e]},r.prototype.injections=function(e){return this._injectionGrammars[e]},r.prototype.getDefaults=function(){return this._theme.getDefaults()},r.prototype.themeMatch=function(e){return this._theme.match(e)},r.prototype.grammarForScopeName=function(e,t,n,i){if(!this._grammars[e]){var s=this._rawGrammars[e];if(!s)return null;this._grammars[e]=LF.createGrammar(s,t,n,i,this)}return this._grammars[e]},r}();zN.SyncRegistry=ume;var Ww={},Sg={};Sg.__esModule=!0;Sg.parse=Sg.parseWithLocation=void 0;function hme(r,e,t){return MW(r,e,t)}Sg.parseWithLocation=hme;function fme(r){return MW(r,null,null)}Sg.parse=fme;function MW(r,e,t){var n=r.length,i=0,s=1,o=0;n>0&&r.charCodeAt(0)===65279&&(i=1);function a(re){if(t===null)i=i+re;else for(;re>0;){var pe=r.charCodeAt(i);pe===10?(i++,s++,o=0):(i++,o++),re--}}function l(re){t===null?i=re:a(re-i)}function c(){for(;i<n;){var re=r.charCodeAt(i);if(re!==32&&re!==9&&re!==13&&re!==10)break;a(1)}}function d(re){return r.substr(i,re.length)===re?(a(re.length),!0):!1}function u(re){var pe=r.indexOf(re,i);l(pe!==-1?pe+re.length:n)}function h(re){var pe=r.indexOf(re,i);if(pe!==-1){var it=r.substring(i,pe);return l(pe+re.length),it}else{var it=r.substr(i);return l(n),it}}var f=0,g=null,_=[],b=[],v=null;function C(re,pe){_.push(f),b.push(g),f=re,g=pe}function y(){if(_.length===0)return w("illegal state stack");f=_.pop(),g=b.pop()}function w(re){throw new Error("Near offset "+i+": "+re+" ~~~"+r.substr(i,50)+"~~~")}var L={enterDict:function(){if(v===null)return w("missing <key>");var re={};t!==null&&(re[t]={filename:e,line:s,char:o}),g[v]=re,v=null,C(1,re)},enterArray:function(){if(v===null)return w("missing <key>");var re=[];g[v]=re,v=null,C(2,re)}},T={enterDict:function(){var re={};t!==null&&(re[t]={filename:e,line:s,char:o}),g.push(re),C(1,re)},enterArray:function(){var re=[];g.push(re),C(2,re)}};function S(){f===1?L.enterDict():f===2?T.enterDict():(g={},t!==null&&(g[t]={filename:e,line:s,char:o}),C(1,g))}function k(){if(f===1)y();else return w("unexpected </dict>")}function D(){f===1?L.enterArray():f===2?T.enterArray():(g=[],C(2,g))}function O(){if(f===1)return w("unexpected </array>");if(f===2)y();else return w("unexpected </array>")}function F(re){if(f===1){if(v!==null)return w("too many <key>");v=re}else return w("unexpected <key>")}function U(re){if(f===1){if(v===null)return w("missing <key>");g[v]=re,v=null}else f===2?g.push(re):g=re}function K(re){if(isNaN(re))return w("cannot parse float");if(f===1){if(v===null)return w("missing <key>");g[v]=re,v=null}else f===2?g.push(re):g=re}function ae(re){if(isNaN(re))return w("cannot parse integer");if(f===1){if(v===null)return w("missing <key>");g[v]=re,v=null}else f===2?g.push(re):g=re}function fe(re){if(f===1){if(v===null)return w("missing <key>");g[v]=re,v=null}else f===2?g.push(re):g=re}function we(re){if(f===1){if(v===null)return w("missing <key>");g[v]=re,v=null}else f===2?g.push(re):g=re}function xe(re){if(f===1){if(v===null)return w("missing <key>");g[v]=re,v=null}else f===2?g.push(re):g=re}function De(re){return re.replace(/&#([0-9]+);/g,function(pe,it){return String.fromCodePoint(parseInt(it,10))}).replace(/&#x([0-9a-f]+);/g,function(pe,it){return String.fromCodePoint(parseInt(it,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(pe){switch(pe){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return pe})}function Oe(){var re=h(">"),pe=!1;return re.charCodeAt(re.length-1)===47&&(pe=!0,re=re.substring(0,re.length-1)),{name:re.trim(),isClosed:pe}}function nt(re){if(re.isClosed)return"";var pe=h("</");return u(">"),De(pe)}for(;i<n&&(c(),!(i>=n));){var Te=r.charCodeAt(i);if(a(1),Te!==60)return w("expected <");if(i>=n)return w("unexpected end of input");var ce=r.charCodeAt(i);if(ce===63){a(1),u("?>");continue}if(ce===33){if(a(1),d("--")){u("-->");continue}u(">");continue}if(ce===47){if(a(1),c(),d("plist")){u(">");continue}if(d("dict")){u(">"),k();continue}if(d("array")){u(">"),O();continue}return w("unexpected closed tag")}var oe=Oe();switch(oe.name){case"dict":S(),oe.isClosed&&k();continue;case"array":D(),oe.isClosed&&O();continue;case"key":F(nt(oe));continue;case"string":U(nt(oe));continue;case"real":K(parseFloat(nt(oe)));continue;case"integer":ae(parseInt(nt(oe),10));continue;case"date":fe(new Date(nt(oe)));continue;case"data":we(nt(oe));continue;case"true":nt(oe),xe(!0);continue;case"false":nt(oe),xe(!1);continue}if(!/^plist/.test(oe.name))return w("unexpected opened tag "+oe.name)}return g}var YN={};Object.defineProperty(YN,"__esModule",{value:!0});function RW(r,e){throw new Error("Near offset "+r.pos+": "+e+" ~~~"+r.source.substr(r.pos,50)+"~~~")}function gme(r,e,t){var n=new pme(r),i=new mme,s=0,o=null,a=[],l=[];function c(){a.push(s),l.push(o)}function d(){s=a.pop(),o=l.pop()}function u(_){RW(n,_)}for(;ik(n,i);){if(s===0){if(o!==null&&u("too many constructs in root"),i.type===3){o={},t&&(o.$vscodeTextmateLocation=i.toLocation(e)),c(),s=1;continue}if(i.type===2){o=[],c(),s=4;continue}u("unexpected token in root")}if(s===2){if(i.type===5){d();continue}if(i.type===7){s=3;continue}u("expected , or }")}if(s===1||s===3){if(s===1&&i.type===5){d();continue}if(i.type===1){var h=i.value;if((!ik(n,i)||i.type!==6)&&u("expected colon"),ik(n,i)||u("expected value"),s=2,i.type===1){o[h]=i.value;continue}if(i.type===8){o[h]=null;continue}if(i.type===9){o[h]=!0;continue}if(i.type===10){o[h]=!1;continue}if(i.type===11){o[h]=parseFloat(i.value);continue}if(i.type===2){var f=[];o[h]=f,c(),s=4,o=f;continue}if(i.type===3){var g={};t&&(g.$vscodeTextmateLocation=i.toLocation(e)),o[h]=g,c(),s=1,o=g;continue}}u("unexpected token in dict")}if(s===5){if(i.type===4){d();continue}if(i.type===7){s=6;continue}u("expected , or ]")}if(s===4||s===6){if(s===4&&i.type===4){d();continue}if(s=5,i.type===1){o.push(i.value);continue}if(i.type===8){o.push(null);continue}if(i.type===9){o.push(!0);continue}if(i.type===10){o.push(!1);continue}if(i.type===11){o.push(parseFloat(i.value));continue}if(i.type===2){var f=[];o.push(f),c(),s=4,o=f;continue}if(i.type===3){var g={};t&&(g.$vscodeTextmateLocation=i.toLocation(e)),o.push(g),c(),s=1,o=g;continue}u("unexpected token in array")}u("unknown state")}return l.length!==0&&u("unclosed constructs"),o}YN.parse=gme;var pme=function(){function r(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0}return r}(),mme=function(){function r(){this.value=null,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}return r.prototype.toLocation=function(e){return{filename:e,line:this.line,char:this.char}},r}();function ik(r,e){e.value=null,e.type=0,e.offset=-1,e.len=-1,e.line=-1,e.char=-1;var t=r.source,n=r.pos,i=r.len,s=r.line,o=r.char,a;do{if(n>=i)return!1;if(a=t.charCodeAt(n),a===32||a===9||a===13){n++,o++;continue}if(a===10){n++,s++,o=0;continue}break}while(!0);if(e.offset=n,e.line=s,e.char=o,a===34){e.type=1,n++,o++;do{if(n>=i)return!1;if(a=t.charCodeAt(n),n++,o++,a===92){n++,o++;continue}if(a===34)break}while(!0);e.value=t.substring(e.offset+1,n-1).replace(/\\u([0-9A-Fa-f]{4})/g,function(l,c){return String.fromCodePoint(parseInt(c,16))}).replace(/\\(.)/g,function(l,c){switch(c){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:RW(r,"invalid escape sequence")}})}else if(a===91)e.type=2,n++,o++;else if(a===123)e.type=3,n++,o++;else if(a===93)e.type=4,n++,o++;else if(a===125)e.type=5,n++,o++;else if(a===58)e.type=6,n++,o++;else if(a===44)e.type=7,n++,o++;else if(a===110){if(e.type=8,n++,o++,a=t.charCodeAt(n),a!==117||(n++,o++,a=t.charCodeAt(n),a!==108)||(n++,o++,a=t.charCodeAt(n),a!==108))return!1;n++,o++}else if(a===116){if(e.type=9,n++,o++,a=t.charCodeAt(n),a!==114||(n++,o++,a=t.charCodeAt(n),a!==117)||(n++,o++,a=t.charCodeAt(n),a!==101))return!1;n++,o++}else if(a===102){if(e.type=10,n++,o++,a=t.charCodeAt(n),a!==97||(n++,o++,a=t.charCodeAt(n),a!==108)||(n++,o++,a=t.charCodeAt(n),a!==115)||(n++,o++,a=t.charCodeAt(n),a!==101))return!1;n++,o++}else{e.type=11;do{if(n>=i)return!1;if(a=t.charCodeAt(n),a===46||a>=48&&a<=57||a===101||a===69||a===45||a===43){n++,o++;continue}break}while(!0)}return e.len=n-e.offset,e.value===null&&(e.value=t.substr(e.offset,e.len)),r.pos=n,r.line=s,r.char=o,!0}Object.defineProperty(Ww,"__esModule",{value:!0});var TF=Sg,OW=Wb,_me=YN;function bme(r,e){return OW.CAPTURE_METADATA?_me.parse(r,e,!0):JSON.parse(r)}Ww.parseJSONGrammar=bme;function vme(r,e){return OW.CAPTURE_METADATA?TF.parseWithLocation(r,e,"$vscodeTextmateLocation"):TF.parse(r)}Ww.parsePLISTGrammar=vme;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});var PW=function(){function r(e,t,n,i,s,o){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=i,this.foreground=s,this.background=o}return r}();Ma.ParsedThemeRule=PW;function DF(r){return!!(/^#[0-9a-f]{6}$/i.test(r)||/^#[0-9a-f]{8}$/i.test(r)||/^#[0-9a-f]{3}$/i.test(r)||/^#[0-9a-f]{4}$/i.test(r))}function FW(r){if(!r)return[];if(!r.settings||!Array.isArray(r.settings))return[];for(var e=r.settings,t=[],n=0,i=0,s=e.length;i<s;i++){var o=e[i];if(o.settings){var a=void 0;if(typeof o.scope=="string"){var l=o.scope;l=l.replace(/^[,]+/,""),l=l.replace(/[,]+$/,""),a=l.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];var c=-1;if(typeof o.settings.fontStyle=="string"){c=0;for(var d=o.settings.fontStyle.split(" "),u=0,h=d.length;u<h;u++){var f=d[u];switch(f){case"italic":c=c|1;break;case"bold":c=c|2;break;case"underline":c=c|4;break}}}var g=null;typeof o.settings.foreground=="string"&&DF(o.settings.foreground)&&(g=o.settings.foreground);var _=null;typeof o.settings.background=="string"&&DF(o.settings.background)&&(_=o.settings.background);for(var u=0,h=a.length;u<h;u++){var l=a[u].trim(),d=l.split(" "),b=d[d.length-1],v=null;d.length>1&&(v=d.slice(0,d.length-1),v.reverse()),t[n++]=new PW(b,v,i,c,g,_)}}}return t}Ma.parseTheme=FW;function Cme(r){r.sort(function(u,h){var f=XN(u.scope,h.scope);return f!==0||(f=QN(u.parentScopes,h.parentScopes),f!==0)?f:u.index-h.index});for(var e=0,t="#000000",n="#ffffff";r.length>=1&&r[0].scope==="";){var i=r.shift();i.fontStyle!==-1&&(e=i.fontStyle),i.foreground!==null&&(t=i.foreground),i.background!==null&&(n=i.background)}for(var s=new BW,o=new q_(0,null,e,s.getId(t),s.getId(n)),a=new VW(new q_(0,null,-1,0,0),[]),l=0,c=r.length;l<c;l++){var d=r[l];a.insert(0,d.scope,d.parentScopes,d.fontStyle,s.getId(d.foreground),s.getId(d.background))}return new WW(s,o,a)}var BW=function(){function r(){this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null)}return r.prototype.getId=function(e){if(e===null)return 0;e=e.toUpperCase();var t=this._color2id[e];return t||(t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t)},r.prototype.getColorMap=function(){return this._id2color.slice(0)},r}();Ma.ColorMap=BW;var WW=function(){function r(e,t,n){this._colorMap=e,this._root=n,this._defaults=t,this._cache={}}return r.createFromRawTheme=function(e){return this.createFromParsedTheme(FW(e))},r.createFromParsedTheme=function(e){return Cme(e)},r.prototype.getColorMap=function(){return this._colorMap.getColorMap()},r.prototype.getDefaults=function(){return this._defaults},r.prototype.match=function(e){return this._cache.hasOwnProperty(e)||(this._cache[e]=this._root.match(e)),this._cache[e]},r}();Ma.Theme=WW;function XN(r,e){return r<e?-1:r>e?1:0}Ma.strcmp=XN;function QN(r,e){if(r===null&&e===null)return 0;if(!r)return-1;if(!e)return 1;var t=r.length,n=e.length;if(t===n){for(var i=0;i<t;i++){var s=XN(r[i],e[i]);if(s!==0)return s}return 0}return t-n}Ma.strArrCmp=QN;var q_=function(){function r(e,t,n,i,s){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=n,this.foreground=i,this.background=s}return r.prototype.clone=function(){return new r(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)},r.cloneArr=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=e[n].clone();return t},r.prototype.acceptOverwrite=function(e,t,n,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,t!==-1&&(this.fontStyle=t),n!==0&&(this.foreground=n),i!==0&&(this.background=i)},r}();Ma.ThemeTrieElementRule=q_;var VW=function(){function r(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={}),this._mainRule=e,this._rulesWithParentScopes=t,this._children=n}return r._sortBySpecificity=function(e){return e.length===1||e.sort(this._cmpBySpecificity),e},r._cmpBySpecificity=function(e,t){if(e.scopeDepth===t.scopeDepth){var n=e.parentScopes,i=t.parentScopes,s=n===null?0:n.length,o=i===null?0:i.length;if(s===o)for(var a=0;a<s;a++){var l=n[a].length,c=i[a].length;if(l!==c)return c-l}return o-s}return t.scopeDepth-e.scopeDepth},r.prototype.match=function(e){if(e==="")return r._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));var t=e.indexOf("."),n,i;return t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1)),this._children.hasOwnProperty(n)?this._children[n].match(i):r._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))},r.prototype.insert=function(e,t,n,i,s,o){if(t===""){this._doInsertHere(e,n,i,s,o);return}var a=t.indexOf("."),l,c;a===-1?(l=t,c=""):(l=t.substring(0,a),c=t.substring(a+1));var d;this._children.hasOwnProperty(l)?d=this._children[l]:(d=new r(this._mainRule.clone(),q_.cloneArr(this._rulesWithParentScopes)),this._children[l]=d),d.insert(e+1,c,n,i,s,o)},r.prototype._doInsertHere=function(e,t,n,i,s){if(t===null){this._mainRule.acceptOverwrite(e,n,i,s);return}for(var o=0,a=this._rulesWithParentScopes.length;o<a;o++){var l=this._rulesWithParentScopes[o];if(QN(l.parentScopes,t)===0){l.acceptOverwrite(e,n,i,s);return}}n===-1&&(n=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new q_(e,t,n,i,s))},r}();Ma.ThemeTrieElement=VW;var xp=Nf&&Nf.__awaiter||function(r,e,t,n){return new(t||(t=Promise))(function(i,s){function o(c){try{l(n.next(c))}catch(d){s(d)}}function a(c){try{l(n.throw(c))}catch(d){s(d)}}function l(c){c.done?i(c.value):new t(function(d){d(c.value)}).then(o,a)}l((n=n.apply(r,e||[])).next())})},kp=Nf&&Nf.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(d){c=[6,d],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Fw,"__esModule",{value:!0});var yme=zN,EF=Ww,AF=Ma,wme=Fo,Sme={getGrammarDefinition:function(r){return null},getInjections:function(r){return null}},xme=function(){function r(e){e===void 0&&(e=Sme),this._locator=e,this._syncRegistry=new yme.SyncRegistry(AF.Theme.createFromRawTheme(e.theme)),this.installationQueue=new Map}return r.prototype.setTheme=function(e){this._syncRegistry.setTheme(AF.Theme.createFromRawTheme(e))},r.prototype.getColorMap=function(){return this._syncRegistry.getColorMap()},r.prototype.loadGrammarWithEmbeddedLanguages=function(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})},r.prototype.loadGrammarWithConfiguration=function(e,t,n){return xp(this,void 0,void 0,function(){return kp(this,function(i){switch(i.label){case 0:return[4,this._loadGrammar(e)];case 1:return i.sent(),[2,this.grammarForScopeName(e,t,n.embeddedLanguages,n.tokenTypes)]}})})},r.prototype.loadGrammar=function(e){return xp(this,void 0,void 0,function(){return kp(this,function(t){return[2,this._loadGrammar(e)]})})},r.prototype._loadGrammar=function(e,t){return t===void 0&&(t=null),xp(this,void 0,void 0,function(){var n,i=this;return kp(this,function(s){switch(s.label){case 0:return this._syncRegistry.lookup(e)?[2,this.grammarForScopeName(e)]:this.installationQueue.has(e)?[2,this.installationQueue.get(e)]:(n=new Promise(function(o,a){return xp(i,void 0,void 0,function(){var l,c,d,u,h=this;return kp(this,function(f){switch(f.label){case 0:return[4,this._locator.getGrammarDefinition(e,t)];case 1:if(l=f.sent(),!l)throw new Error("A tmGrammar load was requested but registry host failed to provide grammar definition");if(l.format!=="json"&&l.format!=="plist"||l.format==="json"&&typeof l.content!="object"&&typeof l.content!="string"||l.format==="plist"&&typeof l.content!="string")throw new TypeError('Grammar definition must be an object, either `{ content: string | object, format: "json" }` OR `{ content: string, format: "plist" }`)');return c=l.format==="json"?typeof l.content=="string"?EF.parseJSONGrammar(l.content,"c://fakepath/grammar.json"):l.content:EF.parsePLISTGrammar(l.content,"c://fakepath/grammar.plist"),d=typeof this._locator.getInjections=="function"&&this._locator.getInjections(e),c.scopeName=e,u=this._syncRegistry.addGrammar(c,d),[4,Promise.all(u.map(function(g){return xp(h,void 0,void 0,function(){return kp(this,function(_){try{return[2,this._loadGrammar(g,e)]}catch(b){throw new Error("While trying to load tmGrammar with scopeId: '"+e+"', it's dependency (scopeId: "+g+") loading errored: "+b.message)}return[2]})})}))];case 2:return f.sent(),o(this.grammarForScopeName(e)),[2]}})})}),this.installationQueue.set(e,n),[4,n]);case 1:return s.sent(),this.installationQueue.delete(e),[2,n]}})})},r.prototype.grammarForScopeName=function(e,t,n,i){return t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),this._syncRegistry.grammarForScopeName(e,t,n,i)},r}(),kme=Fw.Registry=xme;Fw.INITIAL=wme.StackElement.NULL;var JN={},Vw={};Object.defineProperty(Vw,"__esModule",{value:!0});Vw.TMToMonacoToken=void 0;const Lme=(r,e)=>{let t="";for(let n=e[0].length-1;n>=0;n-=1){const i=e[0][n];if(i===".")break;t=i+t}for(let n=e.length-1;n>=0;n-=1){const i=e[n];for(let s=i.length-1;s>=0;s-=1)if(i[s]==="."){const a=i.slice(0,s);if(r._themeService._theme._tokenTheme._match(a+"."+t)._foreground>1)return a+"."+t;if(r._themeService._theme._tokenTheme._match(a)._foreground>1)return a}}return""};Vw.TMToMonacoToken=Lme;Object.defineProperty(JN,"__esModule",{value:!0});var HW=JN.wireTmGrammars=void 0;const Tme=Fw,Dme=Vw;class Z_{_ruleStack;constructor(e){this._ruleStack=e}get ruleStack(){return this._ruleStack}clone(){return new Z_(this._ruleStack)}equals(e){return!(!e||!(e instanceof Z_)||e!==this||e._ruleStack!==this._ruleStack)}}function Eme(r,e,t,n){return Promise.all(Array.from(t.keys()).map(async i=>{const s=await e.loadGrammar(t.get(i));r.languages.setTokensProvider(i,{getInitialState:()=>new Z_(Tme.INITIAL),tokenize:(o,a)=>{const l=s.tokenizeLine(o,a.ruleStack);return{endState:new Z_(l.ruleStack),tokens:l.tokens.map(c=>({...c,scopes:n?(0,Dme.TMToMonacoToken)(n,c.scopes):c.scopes[c.scopes.length-1]}))}}})}))}HW=JN.wireTmGrammars=Eme;const Ame=["This file has been converted from https://github.com/microsoft/TypeScript-TmLanguage/blob/master/TypeScriptReact.tmLanguage","If you want to provide a fix or improvement, please create a pull request against the original repository.","Once accepted there, we are happy to receive an update request."],Ime="https://github.com/microsoft/TypeScript-TmLanguage/commit/d3c203d25a1df5def83082a47d1fe20fda2e80df",Nme="TypeScriptReact",Mme="source.tsx",Rme=[{include:"#directives"},{include:"#statements"},{include:"#shebang"}],Ome={shebang:{name:"comment.line.shebang.tsx",match:"\\A(#!).*(?=$)",captures:{1:{name:"punctuation.definition.comment.tsx"}}},statements:{patterns:[{include:"#declaration"},{include:"#control-statement"},{include:"#after-operator-block-as-object-literal"},{include:"#decl-block"},{include:"#label"},{include:"#expression"},{include:"#punctuation-semicolon"},{include:"#string"},{include:"#comment"}]},declaration:{patterns:[{include:"#decorator"},{include:"#var-expr"},{include:"#function-declaration"},{include:"#class-declaration"},{include:"#interface-declaration"},{include:"#enum-declaration"},{include:"#namespace-declaration"},{include:"#type-alias-declaration"},{include:"#import-equals-declaration"},{include:"#import-declaration"},{include:"#export-declaration"},{name:"storage.modifier.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(declare|export)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"}]},"control-statement":{patterns:[{include:"#switch-statement"},{include:"#for-loop"},{name:"keyword.control.trycatch.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(catch|finally|throw|try)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(break|continue|goto)\\s+([_$[:alpha:]][_$[:alnum:]]*)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",captures:{1:{name:"keyword.control.loop.tsx"},2:{name:"entity.name.label.tsx"}}},{name:"keyword.control.loop.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(break|continue|do|goto|while)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(return)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{0:{name:"keyword.control.flow.tsx"}},end:"(?=[;}]|$|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#expression"}]},{name:"keyword.control.switch.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(case|default|switch)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{include:"#if-statement"},{name:"keyword.control.conditional.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(else|if)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.control.with.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(with)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.control.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(package)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.other.debugger.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(debugger)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"}]},label:{patterns:[{begin:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(:)(?=\\s*\\{)",beginCaptures:{1:{name:"entity.name.label.tsx"},2:{name:"punctuation.separator.label.tsx"}},end:"(?<=\\})",patterns:[{include:"#decl-block"}]},{match:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(:)",captures:{1:{name:"entity.name.label.tsx"},2:{name:"punctuation.separator.label.tsx"}}}]},expression:{patterns:[{include:"#expressionWithoutIdentifiers"},{include:"#identifiers"},{include:"#expressionPunctuations"}]},expressionWithoutIdentifiers:{patterns:[{include:"#jsx"},{include:"#string"},{include:"#regex"},{include:"#comment"},{include:"#function-expression"},{include:"#class-expression"},{include:"#arrow-function"},{include:"#paren-expression-possibly-arrow"},{include:"#cast"},{include:"#ternary-expression"},{include:"#new-expr"},{include:"#instanceof-expr"},{include:"#object-literal"},{include:"#expression-operators"},{include:"#function-call"},{include:"#literal"},{include:"#support-objects"},{include:"#paren-expression"}]},expressionPunctuations:{patterns:[{include:"#punctuation-comma"},{include:"#punctuation-accessor"}]},decorator:{name:"meta.decorator.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))\\@",beginCaptures:{0:{name:"punctuation.decorator.tsx"}},end:"(?=\\s)",patterns:[{include:"#expression"}]},"var-expr":{patterns:[{name:"meta.var.expr.tsx",begin:"(?=(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(var|let)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))",end:"(?!(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(var|let)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))((?=;|}|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+)|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))|((?<!^let|[^\\._$[:alnum:]]let|^var|[^\\._$[:alnum:]]var)(?=\\s*$)))",patterns:[{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(var|let)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.type.tsx"}},end:"(?=\\S)"},{include:"#destructuring-variable"},{include:"#var-single-variable"},{include:"#variable-initializer"},{include:"#comment"},{begin:"(,)\\s*((?!\\S)|(?=\\/\\/))",beginCaptures:{1:{name:"punctuation.separator.comma.tsx"}},end:"(?<!,)(((?==|;|}|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+)|^\\s*$))|((?<=\\S)(?=\\s*$)))",patterns:[{include:"#single-line-comment-consuming-line-ending"},{include:"#comment"},{include:"#destructuring-variable"},{include:"#var-single-variable"},{include:"#punctuation-comma"}]},{include:"#punctuation-comma"}]},{name:"meta.var.expr.tsx",begin:"(?=(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(const(?!\\s+enum\\b))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.type.tsx"}},end:"(?!(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(const(?!\\s+enum\\b))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))((?=;|}|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+)|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))|((?<!^const|[^\\._$[:alnum:]]const)(?=\\s*$)))",patterns:[{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(const(?!\\s+enum\\b))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.type.tsx"}},end:"(?=\\S)"},{include:"#destructuring-const"},{include:"#var-single-const"},{include:"#variable-initializer"},{include:"#comment"},{begin:"(,)\\s*((?!\\S)|(?=\\/\\/))",beginCaptures:{1:{name:"punctuation.separator.comma.tsx"}},end:"(?<!,)(((?==|;|}|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+)|^\\s*$))|((?<=\\S)(?=\\s*$)))",patterns:[{include:"#single-line-comment-consuming-line-ending"},{include:"#comment"},{include:"#destructuring-const"},{include:"#var-single-const"},{include:"#punctuation-comma"}]},{include:"#punctuation-comma"}]}]},"var-single-variable":{patterns:[{name:"meta.var-single-variable.expr.tsx",begin:`(?x)([_$[:alpha:]][_$[:alnum:]]*)(\\!)?(?=\\s*
# function assignment |
(=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)) |
# typeannotation is fn type: < | () | (... | (param: | (param, | (param? | (param= | (param) =>
(:\\s*(
  (<) |
  ([(]\\s*(
    ([)]) |
    (\\.\\.\\.) |
    ([_$[:alnum:]]+\\s*(
      ([:,?=])|
      ([)]\\s*=>)
    ))
  ))
)) |
(:\\s*(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Function(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))) |
(:\\s*((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*))))))) |
(:\\s*(=>|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(<[^<>]*>)|[^<>(),=])+=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)))`,beginCaptures:{1:{name:"meta.definition.variable.tsx entity.name.function.tsx"},2:{name:"keyword.operator.definiteassignment.tsx"}},end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#var-single-variable-type-annotation"}]},{name:"meta.var-single-variable.expr.tsx",begin:"([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])(\\!)?",beginCaptures:{1:{name:"meta.definition.variable.tsx variable.other.constant.tsx"},2:{name:"keyword.operator.definiteassignment.tsx"}},end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#var-single-variable-type-annotation"}]},{name:"meta.var-single-variable.expr.tsx",begin:"([_$[:alpha:]][_$[:alnum:]]*)(\\!)?",beginCaptures:{1:{name:"meta.definition.variable.tsx variable.other.readwrite.tsx"},2:{name:"keyword.operator.definiteassignment.tsx"}},end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#var-single-variable-type-annotation"}]}]},"var-single-const":{patterns:[{name:"meta.var-single-variable.expr.tsx",begin:`(?x)([_$[:alpha:]][_$[:alnum:]]*)(?=\\s*
# function assignment |
(=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)) |
# typeannotation is fn type: < | () | (... | (param: | (param, | (param? | (param= | (param) =>
(:\\s*(
  (<) |
  ([(]\\s*(
    ([)]) |
    (\\.\\.\\.) |
    ([_$[:alnum:]]+\\s*(
      ([:,?=])|
      ([)]\\s*=>)
    ))
  ))
)) |
(:\\s*(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Function(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))) |
(:\\s*((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*))))))) |
(:\\s*(=>|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(<[^<>]*>)|[^<>(),=])+=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)))`,beginCaptures:{1:{name:"meta.definition.variable.tsx variable.other.constant.tsx entity.name.function.tsx"}},end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#var-single-variable-type-annotation"}]},{name:"meta.var-single-variable.expr.tsx",begin:"([_$[:alpha:]][_$[:alnum:]]*)",beginCaptures:{1:{name:"meta.definition.variable.tsx variable.other.constant.tsx"}},end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#var-single-variable-type-annotation"}]}]},"var-single-variable-type-annotation":{patterns:[{include:"#type-annotation"},{include:"#string"},{include:"#comment"}]},"destructuring-variable":{patterns:[{name:"meta.object-binding-pattern-variable.tsx",begin:"(?<!=|:|^of|[^\\._$[:alnum:]]of|^in|[^\\._$[:alnum:]]in)\\s*(?=\\{)",end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#object-binding-pattern"},{include:"#type-annotation"},{include:"#comment"}]},{name:"meta.array-binding-pattern-variable.tsx",begin:"(?<!=|:|^of|[^\\._$[:alnum:]]of|^in|[^\\._$[:alnum:]]in)\\s*(?=\\[)",end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#array-binding-pattern"},{include:"#type-annotation"},{include:"#comment"}]}]},"destructuring-const":{patterns:[{name:"meta.object-binding-pattern-variable.tsx",begin:"(?<!=|:|^of|[^\\._$[:alnum:]]of|^in|[^\\._$[:alnum:]]in)\\s*(?=\\{)",end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#object-binding-pattern-const"},{include:"#type-annotation"},{include:"#comment"}]},{name:"meta.array-binding-pattern-variable.tsx",begin:"(?<!=|:|^of|[^\\._$[:alnum:]]of|^in|[^\\._$[:alnum:]]in)\\s*(?=\\[)",end:"(?=$|^|[;,=}]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#array-binding-pattern-const"},{include:"#type-annotation"},{include:"#comment"}]}]},"object-binding-element":{patterns:[{include:"#comment"},{begin:`(?x)(?=((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))`,end:"(?=,|\\})",patterns:[{include:"#object-binding-element-propertyName"},{include:"#binding-element"}]},{include:"#object-binding-pattern"},{include:"#destructuring-variable-rest"},{include:"#variable-initializer"},{include:"#punctuation-comma"}]},"object-binding-element-const":{patterns:[{include:"#comment"},{begin:`(?x)(?=((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))`,end:"(?=,|\\})",patterns:[{include:"#object-binding-element-propertyName"},{include:"#binding-element-const"}]},{include:"#object-binding-pattern-const"},{include:"#destructuring-variable-rest-const"},{include:"#variable-initializer"},{include:"#punctuation-comma"}]},"object-binding-element-propertyName":{begin:`(?x)(?=((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))`,end:"(:)",endCaptures:{0:{name:"punctuation.destructuring.tsx"}},patterns:[{include:"#string"},{include:"#array-literal"},{include:"#numeric-literal"},{name:"variable.object.property.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)"}]},"binding-element":{patterns:[{include:"#comment"},{include:"#string"},{include:"#numeric-literal"},{include:"#regex"},{include:"#object-binding-pattern"},{include:"#array-binding-pattern"},{include:"#destructuring-variable-rest"},{include:"#variable-initializer"}]},"binding-element-const":{patterns:[{include:"#comment"},{include:"#string"},{include:"#numeric-literal"},{include:"#regex"},{include:"#object-binding-pattern-const"},{include:"#array-binding-pattern-const"},{include:"#destructuring-variable-rest-const"},{include:"#variable-initializer"}]},"destructuring-variable-rest":{match:"(?:(\\.\\.\\.)\\s*)?([_$[:alpha:]][_$[:alnum:]]*)",captures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"meta.definition.variable.tsx variable.other.readwrite.tsx"}}},"destructuring-variable-rest-const":{match:"(?:(\\.\\.\\.)\\s*)?([_$[:alpha:]][_$[:alnum:]]*)",captures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"meta.definition.variable.tsx variable.other.constant.tsx"}}},"object-binding-pattern":{begin:"(?:(\\.\\.\\.)\\s*)?(\\{)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.object.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.binding-pattern.object.tsx"}},patterns:[{include:"#object-binding-element"}]},"object-binding-pattern-const":{begin:"(?:(\\.\\.\\.)\\s*)?(\\{)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.object.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.binding-pattern.object.tsx"}},patterns:[{include:"#object-binding-element-const"}]},"array-binding-pattern":{begin:"(?:(\\.\\.\\.)\\s*)?(\\[)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.array.tsx"}},end:"\\]",endCaptures:{0:{name:"punctuation.definition.binding-pattern.array.tsx"}},patterns:[{include:"#binding-element"},{include:"#punctuation-comma"}]},"array-binding-pattern-const":{begin:"(?:(\\.\\.\\.)\\s*)?(\\[)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.array.tsx"}},end:"\\]",endCaptures:{0:{name:"punctuation.definition.binding-pattern.array.tsx"}},patterns:[{include:"#binding-element-const"},{include:"#punctuation-comma"}]},"parameter-name":{patterns:[{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|protected|private|readonly)\\s+(?=(public|protected|private|readonly)\\s+)",captures:{1:{name:"storage.modifier.tsx"}}},{match:`(?x)(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?<!=|:)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*(\\??)(?=\\s*
# function assignment |
(=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)) |
# typeannotation is fn type: < | () | (... | (param: | (param, | (param? | (param= | (param) =>
(:\\s*(
  (<) |
  ([(]\\s*(
    ([)]) |
    (\\.\\.\\.) |
    ([_$[:alnum:]]+\\s*(
      ([:,?=])|
      ([)]\\s*=>)
    ))
  ))
)) |
(:\\s*(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Function(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))) |
(:\\s*((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*))))))) |
(:\\s*(=>|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(<[^<>]*>)|[^<>(),=])+=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)))`,captures:{1:{name:"storage.modifier.tsx"},2:{name:"keyword.operator.rest.tsx"},3:{name:"entity.name.function.tsx variable.language.this.tsx"},4:{name:"entity.name.function.tsx"},5:{name:"keyword.operator.optional.tsx"}}},{match:"(?x)(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?<!=|:)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*(\\??)",captures:{1:{name:"storage.modifier.tsx"},2:{name:"keyword.operator.rest.tsx"},3:{name:"variable.parameter.tsx variable.language.this.tsx"},4:{name:"variable.parameter.tsx"},5:{name:"keyword.operator.optional.tsx"}}}]},"destructuring-parameter":{patterns:[{name:"meta.parameter.object-binding-pattern.tsx",begin:"(?<!=|:)\\s*(?:(\\.\\.\\.)\\s*)?(\\{)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.object.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.binding-pattern.object.tsx"}},patterns:[{include:"#parameter-object-binding-element"}]},{name:"meta.paramter.array-binding-pattern.tsx",begin:"(?<!=|:)\\s*(?:(\\.\\.\\.)\\s*)?(\\[)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.array.tsx"}},end:"\\]",endCaptures:{0:{name:"punctuation.definition.binding-pattern.array.tsx"}},patterns:[{include:"#parameter-binding-element"},{include:"#punctuation-comma"}]}]},"parameter-object-binding-element":{patterns:[{include:"#comment"},{begin:`(?x)(?=((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))`,end:"(?=,|\\})",patterns:[{include:"#object-binding-element-propertyName"},{include:"#parameter-binding-element"}]},{include:"#parameter-object-binding-pattern"},{include:"#destructuring-parameter-rest"},{include:"#variable-initializer"},{include:"#punctuation-comma"}]},"parameter-binding-element":{patterns:[{include:"#comment"},{include:"#string"},{include:"#numeric-literal"},{include:"#regex"},{include:"#parameter-object-binding-pattern"},{include:"#parameter-array-binding-pattern"},{include:"#destructuring-parameter-rest"},{include:"#variable-initializer"}]},"destructuring-parameter-rest":{match:"(?:(\\.\\.\\.)\\s*)?([_$[:alpha:]][_$[:alnum:]]*)",captures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"variable.parameter.tsx"}}},"parameter-object-binding-pattern":{begin:"(?:(\\.\\.\\.)\\s*)?(\\{)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.object.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.binding-pattern.object.tsx"}},patterns:[{include:"#parameter-object-binding-element"}]},"parameter-array-binding-pattern":{begin:"(?:(\\.\\.\\.)\\s*)?(\\[)",beginCaptures:{1:{name:"keyword.operator.rest.tsx"},2:{name:"punctuation.definition.binding-pattern.array.tsx"}},end:"\\]",endCaptures:{0:{name:"punctuation.definition.binding-pattern.array.tsx"}},patterns:[{include:"#parameter-binding-element"},{include:"#punctuation-comma"}]},"field-declaration":{name:"meta.field.declaration.tsx",begin:`(?x)(?<!\\()(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(readonly)\\s+)?(?=\\s*((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|(\\#?[_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(?:(?:(\\?)|(\\!))\\s*)?(=|:|;|,|\\}|$))`,beginCaptures:{1:{name:"storage.modifier.tsx"}},end:`(?x)(?=\\}|;|,|$|(^(?!\\s*((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|(\\#?[_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(?:(?:(\\?)|(\\!))\\s*)?(=|:|;|,|$))))|(?<=\\})`,patterns:[{include:"#variable-initializer"},{include:"#type-annotation"},{include:"#string"},{include:"#array-literal"},{include:"#numeric-literal"},{include:"#comment"},{match:`(?x)(\\#?[_$[:alpha:]][_$[:alnum:]]*)(?:(\\?)|(\\!))?(?=\\s*\\s*
# function assignment |
(=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)) |
# typeannotation is fn type: < | () | (... | (param: | (param, | (param? | (param= | (param) =>
(:\\s*(
  (<) |
  ([(]\\s*(
    ([)]) |
    (\\.\\.\\.) |
    ([_$[:alnum:]]+\\s*(
      ([:,?=])|
      ([)]\\s*=>)
    ))
  ))
)) |
(:\\s*(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Function(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))) |
(:\\s*((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*))))))) |
(:\\s*(=>|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(<[^<>]*>)|[^<>(),=])+=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)))`,captures:{1:{name:"meta.definition.property.tsx entity.name.function.tsx"},2:{name:"keyword.operator.optional.tsx"},3:{name:"keyword.operator.definiteassignment.tsx"}}},{name:"meta.definition.property.tsx variable.object.property.tsx",match:"\\#?[_$[:alpha:]][_$[:alnum:]]*"},{name:"keyword.operator.optional.tsx",match:"\\?"},{name:"keyword.operator.definiteassignment.tsx",match:"\\!"}]},"variable-initializer":{patterns:[{begin:"(?<!=|!)(=)(?!=)(?=\\s*\\S)(?!\\s*.*=>\\s*$)",beginCaptures:{1:{name:"keyword.operator.assignment.tsx"}},end:"(?=$|^|[,);}\\]]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))",patterns:[{include:"#expression"}]},{begin:"(?<!=|!)(=)(?!=)",beginCaptures:{1:{name:"keyword.operator.assignment.tsx"}},end:"(?=[,);}\\]]|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(of|in)\\s+))|(?=^\\s*$)|(?<=\\S)(?<!=)(?=\\s*$)",patterns:[{include:"#expression"}]}]},"function-declaration":{name:"meta.function.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?(?:(async)\\s+)?(function\\b)(?:\\s*(\\*))?(?:(?:\\s+|(?<=\\*))([_$[:alpha:]][_$[:alnum:]]*))?\\s*",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.async.tsx"},4:{name:"storage.type.function.tsx"},5:{name:"keyword.generator.asterisk.tsx"},6:{name:"meta.definition.function.tsx entity.name.function.tsx"}},end:"(?=;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))|(?<=\\})",patterns:[{include:"#function-name"},{include:"#function-body"}]},"function-expression":{name:"meta.function.expression.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(async)\\s+)?(function\\b)(?:\\s*(\\*))?(?:(?:\\s+|(?<=\\*))([_$[:alpha:]][_$[:alnum:]]*))?\\s*",beginCaptures:{1:{name:"storage.modifier.async.tsx"},2:{name:"storage.type.function.tsx"},3:{name:"keyword.generator.asterisk.tsx"},4:{name:"meta.definition.function.tsx entity.name.function.tsx"}},end:"(?=;)|(?<=\\})",patterns:[{include:"#function-name"},{include:"#single-line-comment-consuming-line-ending"},{include:"#function-body"}]},"function-name":{name:"meta.definition.function.tsx entity.name.function.tsx",match:"[_$[:alpha:]][_$[:alnum:]]*"},"function-body":{patterns:[{include:"#comment"},{include:"#type-parameters"},{include:"#function-parameters"},{include:"#return-type"},{include:"#type-function-return-type"},{include:"#decl-block"},{name:"keyword.generator.asterisk.tsx",match:"\\*"}]},"method-declaration":{patterns:[{name:"meta.method.declaration.tsx",begin:"(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:\\b(public|private|protected)\\s+)?(?:\\b(abstract)\\s+)?(?:\\b(async)\\s+)?\\s*\\b(constructor)\\b(?!:)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"storage.modifier.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.async.tsx"},4:{name:"storage.type.tsx"}},end:"(?=\\}|;|,|$)|(?<=\\})",patterns:[{include:"#method-declaration-name"},{include:"#function-body"}]},{name:"meta.method.declaration.tsx",begin:"(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:\\b(public|private|protected)\\s+)?(?:\\b(abstract)\\s+)?(?:\\b(async)\\s+)?(?:(?:\\s*\\b(new)\\b(?!:)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|(?:(\\*)\\s*)?)(?=\\s*((<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*))?[\\(])",beginCaptures:{1:{name:"storage.modifier.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.async.tsx"},4:{name:"keyword.operator.new.tsx"},5:{name:"keyword.generator.asterisk.tsx"}},end:"(?=\\}|;|,|$)|(?<=\\})",patterns:[{include:"#method-declaration-name"},{include:"#function-body"}]},{name:"meta.method.declaration.tsx",begin:`(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:\\b(public|private|protected)\\s+)?(?:\\b(abstract)\\s+)?(?:\\b(async)\\s+)?(?:\\b(get|set)\\s+)?(?:(\\*)\\s*)?(?=\\s*(((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??))\\s*((<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*))?[\\(])`,beginCaptures:{1:{name:"storage.modifier.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.async.tsx"},4:{name:"storage.type.property.tsx"},5:{name:"keyword.generator.asterisk.tsx"}},end:"(?=\\}|;|,|$)|(?<=\\})",patterns:[{include:"#method-declaration-name"},{include:"#function-body"}]}]},"object-literal-method-declaration":{name:"meta.method.declaration.tsx",begin:`(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:\\b(async)\\s+)?(?:\\b(get|set)\\s+)?(?:(\\*)\\s*)?(?=\\s*(((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??))\\s*((<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*))?[\\(])`,beginCaptures:{1:{name:"storage.modifier.async.tsx"},2:{name:"storage.type.property.tsx"},3:{name:"keyword.generator.asterisk.tsx"}},end:"(?=\\}|;|,)|(?<=\\})",patterns:[{include:"#method-declaration-name"},{include:"#function-body"},{begin:`(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:\\b(async)\\s+)?(?:\\b(get|set)\\s+)?(?:(\\*)\\s*)?(?=\\s*(((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??))\\s*((<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*))?[\\(])`,beginCaptures:{1:{name:"storage.modifier.async.tsx"},2:{name:"storage.type.property.tsx"},3:{name:"keyword.generator.asterisk.tsx"}},end:"(?=\\(|\\<)",patterns:[{include:"#method-declaration-name"}]}]},"method-declaration-name":{begin:`(?x)(?=((\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??)\\s*[\\(\\<])`,end:"(?=\\(|\\<)",patterns:[{include:"#string"},{include:"#array-literal"},{include:"#numeric-literal"},{name:"meta.definition.method.tsx entity.name.function.tsx",match:"[_$[:alpha:]][_$[:alnum:]]*"},{name:"keyword.operator.optional.tsx",match:"\\?"}]},"arrow-function":{patterns:[{name:"meta.arrow.tsx",match:"(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(\\basync)\\s+)?([_$[:alpha:]][_$[:alnum:]]*)\\s*(?==>)",captures:{1:{name:"storage.modifier.async.tsx"},2:{name:"variable.parameter.tsx"}}},{name:"meta.arrow.tsx",begin:`(?x) (?:
  (?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(\\basync)
)? ((?<![})!\\]])\\s*
  (?=
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  )
)`,beginCaptures:{1:{name:"storage.modifier.async.tsx"}},end:"(?==>|\\{|(^\\s*(export|function|class|interface|let|var|const|import|enum|namespace|module|type|abstract|declare)\\s+))",patterns:[{include:"#comment"},{include:"#type-parameters"},{include:"#function-parameters"},{include:"#arrow-return-type"},{include:"#possibly-arrow-return-type"}]},{name:"meta.arrow.tsx",begin:"=>",beginCaptures:{0:{name:"storage.type.function.arrow.tsx"}},end:"((?<=\\}|\\S)(?<!=>)|((?!\\{)(?=\\S)))(?!\\/[\\/\\*])",patterns:[{include:"#single-line-comment-consuming-line-ending"},{include:"#decl-block"},{include:"#expression"}]}]},"indexer-declaration":{name:"meta.indexer.declaration.tsx",begin:"(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(readonly)\\s*)?\\s*(\\[)\\s*([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=:)",beginCaptures:{1:{name:"storage.modifier.tsx"},2:{name:"meta.brace.square.tsx"},3:{name:"variable.parameter.tsx"}},end:"(\\])\\s*(\\?\\s*)?|$",endCaptures:{1:{name:"meta.brace.square.tsx"},2:{name:"keyword.operator.optional.tsx"}},patterns:[{include:"#type-annotation"}]},"indexer-mapped-type-declaration":{name:"meta.indexer.mappedtype.declaration.tsx",begin:"(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))([+-])?(readonly)\\s*)?\\s*(\\[)\\s*([_$[:alpha:]][_$[:alnum:]]*)\\s+(in)\\s+",beginCaptures:{1:{name:"keyword.operator.type.modifier.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"meta.brace.square.tsx"},4:{name:"entity.name.type.tsx"},5:{name:"keyword.operator.expression.in.tsx"}},end:"(\\])([+-])?\\s*(\\?\\s*)?|$",endCaptures:{1:{name:"meta.brace.square.tsx"},2:{name:"keyword.operator.type.modifier.tsx"},3:{name:"keyword.operator.optional.tsx"}},patterns:[{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+",captures:{1:{name:"keyword.control.as.tsx"}}},{include:"#type"}]},"function-parameters":{name:"meta.parameters.tsx",begin:"\\(",beginCaptures:{0:{name:"punctuation.definition.parameters.begin.tsx"}},end:"\\)",endCaptures:{0:{name:"punctuation.definition.parameters.end.tsx"}},patterns:[{include:"#function-parameters-body"}]},"function-parameters-body":{patterns:[{include:"#comment"},{include:"#string"},{include:"#decorator"},{include:"#destructuring-parameter"},{include:"#parameter-name"},{include:"#parameter-type-annotation"},{include:"#variable-initializer"},{name:"punctuation.separator.parameter.tsx",match:","}]},"class-declaration":{name:"meta.class.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(?:(abstract)\\s+)?\\b(class)\\b(?=\\s+|/[/*])",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.tsx"},4:{name:"storage.type.class.tsx"}},end:"(?<=\\})",patterns:[{include:"#class-declaration-or-expression-patterns"}]},"class-expression":{name:"meta.class.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(abstract)\\s+)?(class)\\b(?=\\s+|[<{]|\\/[\\/*])",beginCaptures:{1:{name:"storage.modifier.tsx"},2:{name:"storage.type.class.tsx"}},end:"(?<=\\})",patterns:[{include:"#class-declaration-or-expression-patterns"}]},"class-declaration-or-expression-patterns":{patterns:[{include:"#comment"},{include:"#class-or-interface-heritage"},{match:"[_$[:alpha:]][_$[:alnum:]]*",captures:{0:{name:"entity.name.type.class.tsx"}}},{include:"#type-parameters"},{include:"#class-or-interface-body"}]},"interface-declaration":{name:"meta.interface.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(?:(abstract)\\s+)?\\b(interface)\\b(?=\\s+|/[/*])",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.tsx"},4:{name:"storage.type.interface.tsx"}},end:"(?<=\\})",patterns:[{include:"#comment"},{include:"#class-or-interface-heritage"},{match:"[_$[:alpha:]][_$[:alnum:]]*",captures:{0:{name:"entity.name.type.interface.tsx"}}},{include:"#type-parameters"},{include:"#class-or-interface-body"}]},"class-or-interface-heritage":{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:\\b(extends|implements)\\b)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"storage.modifier.tsx"}},end:"(?=\\{)",patterns:[{include:"#comment"},{include:"#class-or-interface-heritage"},{include:"#type-parameters"},{include:"#expressionWithoutIdentifiers"},{match:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))(?=\\s*[_$[:alpha:]][_$[:alnum:]]*(\\s*\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*)*\\s*)",captures:{1:{name:"entity.name.type.module.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"}}},{match:"([_$[:alpha:]][_$[:alnum:]]*)",captures:{1:{name:"entity.other.inherited-class.tsx"}}},{include:"#expressionPunctuations"}]},"class-or-interface-body":{begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#comment"},{include:"#decorator"},{begin:"(?<=:)\\s*",end:"(?=\\s|[;),}\\]:\\-\\+]|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#expression"}]},{include:"#method-declaration"},{include:"#indexer-declaration"},{include:"#field-declaration"},{include:"#string"},{include:"#type-annotation"},{include:"#variable-initializer"},{include:"#access-modifier"},{include:"#property-accessor"},{include:"#async-modifier"},{include:"#after-operator-block-as-object-literal"},{include:"#decl-block"},{include:"#expression"},{include:"#punctuation-comma"},{include:"#punctuation-semicolon"}]},"access-modifier":{name:"storage.modifier.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(abstract|public|protected|private|readonly|static|declare)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"property-accessor":{name:"storage.type.property.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(get|set)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"async-modifier":{name:"storage.modifier.async.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(async)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"enum-declaration":{name:"meta.enum.declaration.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?(?:\\b(const)\\s+)?\\b(enum)\\s+([_$[:alpha:]][_$[:alnum:]]*)",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.modifier.tsx"},4:{name:"storage.type.enum.tsx"},5:{name:"entity.name.type.enum.tsx"}},end:"(?<=\\})",patterns:[{include:"#comment"},{begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#comment"},{begin:"([_$[:alpha:]][_$[:alnum:]]*)",beginCaptures:{0:{name:"variable.other.enummember.tsx"}},end:"(?=,|\\}|$)",patterns:[{include:"#comment"},{include:"#variable-initializer"}]},{begin:"(?=((\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`)|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\])))",end:"(?=,|\\}|$)",patterns:[{include:"#string"},{include:"#array-literal"},{include:"#comment"},{include:"#variable-initializer"}]},{include:"#punctuation-comma"}]}]},"namespace-declaration":{name:"meta.namespace.declaration.tsx",begin:"(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(namespace|module)\\s+(?=[_$[:alpha:]\"'`]))",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.type.namespace.tsx"}},end:"(?<=\\})|(?=;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#comment"},{include:"#string"},{name:"entity.name.type.module.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)"},{include:"#punctuation-accessor"},{include:"#decl-block"}]},"type-alias-declaration":{name:"meta.type.declaration.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(type)\\b\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"storage.type.type.tsx"},4:{name:"entity.name.type.alias.tsx"}},end:"(?=\\}|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#comment"},{include:"#type-parameters"},{begin:"(=)\\s*(intrinsic)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"keyword.operator.assignment.tsx"},2:{name:"keyword.control.intrinsic.tsx"}},end:"(?=\\}|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#type"}]},{begin:"(=)\\s*",beginCaptures:{1:{name:"keyword.operator.assignment.tsx"}},end:"(?=\\}|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#type"}]}]},"import-equals-declaration":{patterns:[{name:"meta.import-equals.external.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(import)(?:\\s+(type))?\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*(=)\\s*(require)\\s*(\\()",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"keyword.control.import.tsx"},4:{name:"keyword.control.type.tsx"},5:{name:"variable.other.readwrite.alias.tsx"},6:{name:"keyword.operator.assignment.tsx"},7:{name:"keyword.control.require.tsx"},8:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#comment"},{include:"#string"}]},{name:"meta.import-equals.internal.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(import)(?:\\s+(type))?\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*(=)\\s*(?!require\\b)",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"keyword.control.import.tsx"},4:{name:"keyword.control.type.tsx"},5:{name:"variable.other.readwrite.alias.tsx"},6:{name:"keyword.operator.assignment.tsx"}},end:"(?=;|$|^)",patterns:[{include:"#single-line-comment-consuming-line-ending"},{include:"#comment"},{match:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))",captures:{1:{name:"entity.name.type.module.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"}}},{name:"variable.other.readwrite.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)"}]}]},"import-declaration":{name:"meta.import.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bexport)\\s+)?(?:(\\bdeclare)\\s+)?\\b(import)(?:\\s+(type)(?!\\s+from))?(?!\\s*[:\\(])(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"storage.modifier.tsx"},3:{name:"keyword.control.import.tsx"},4:{name:"keyword.control.type.tsx"}},end:"(?<!^import|[^\\._$[:alnum:]]import)(?=;|$|^)",patterns:[{include:"#single-line-comment-consuming-line-ending"},{include:"#comment"},{include:"#string"},{begin:`(?<=^import|[^\\._$[:alnum:]]import)(?!\\s*["'])`,end:"\\bfrom\\b",endCaptures:{0:{name:"keyword.control.from.tsx"}},patterns:[{include:"#import-export-declaration"}]},{include:"#import-export-declaration"}]},"export-declaration":{patterns:[{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(export)\\s+(as)\\s+(namespace)\\s+([_$[:alpha:]][_$[:alnum:]]*)",captures:{1:{name:"keyword.control.export.tsx"},2:{name:"keyword.control.as.tsx"},3:{name:"storage.type.namespace.tsx"},4:{name:"entity.name.type.module.tsx"}}},{name:"meta.export.default.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(export)(?:\\s+(type))?(?:(?:\\s*(=))|(?:\\s+(default)(?=\\s+)))",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"keyword.control.type.tsx"},3:{name:"keyword.operator.assignment.tsx"},4:{name:"keyword.control.default.tsx"}},end:"(?=$|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#interface-declaration"},{include:"#expression"}]},{name:"meta.export.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(export)(?:\\s+(type))?\\b(?!(\\$)|(\\s*:))((?=\\s*[\\{*])|((?=\\s*[_$[:alpha:]][_$[:alnum:]]*(\\s|,))(?!\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b)))",beginCaptures:{1:{name:"keyword.control.export.tsx"},2:{name:"keyword.control.type.tsx"}},end:"(?=$|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#import-export-declaration"}]}]},"import-export-declaration":{patterns:[{include:"#comment"},{include:"#string"},{include:"#import-export-block"},{name:"keyword.control.from.tsx",match:"\\bfrom\\b"},{include:"#import-export-clause"}]},"import-export-block":{name:"meta.block.tsx",begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#import-export-clause"}]},"import-export-clause":{patterns:[{include:"#comment"},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(\\bdefault)|(\\*)|(\\b[_$[:alpha:]][_$[:alnum:]]*))\\s+(as)\\s+(?:(default(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|([_$[:alpha:]][_$[:alnum:]]*))",captures:{1:{name:"keyword.control.default.tsx"},2:{name:"constant.language.import-export-all.tsx"},3:{name:"variable.other.readwrite.tsx"},4:{name:"keyword.control.as.tsx"},5:{name:"keyword.control.default.tsx"},6:{name:"variable.other.readwrite.alias.tsx"}}},{include:"#punctuation-comma"},{name:"constant.language.import-export-all.tsx",match:"\\*"},{name:"keyword.control.default.tsx",match:"\\b(default)\\b"},{name:"variable.other.readwrite.alias.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)"}]},"switch-statement":{name:"switch-statement.expr.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?=\\bswitch\\s*\\()",end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#comment"},{name:"switch-expression.expr.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(switch)\\s*(\\()",beginCaptures:{1:{name:"keyword.control.switch.tsx"},2:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression"}]},{name:"switch-block.expr.tsx",begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"(?=\\})",patterns:[{name:"case-clause.expr.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(case|default(?=:))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"keyword.control.switch.tsx"}},end:"(?=:)",patterns:[{include:"#expression"}]},{begin:"(:)\\s*(\\{)",beginCaptures:{1:{name:"case-clause.expr.tsx punctuation.definition.section.case-statement.tsx"},2:{name:"meta.block.tsx punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"meta.block.tsx punctuation.definition.block.tsx"}},contentName:"meta.block.tsx",patterns:[{include:"#statements"}]},{match:"(:)",captures:{0:{name:"case-clause.expr.tsx punctuation.definition.section.case-statement.tsx"}}},{include:"#statements"}]}]},"for-loop":{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))for(?=((\\s+|(\\s*\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*))await)?\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)?(\\())",beginCaptures:{0:{name:"keyword.control.loop.tsx"}},end:"(?<=\\))",patterns:[{include:"#comment"},{name:"keyword.control.loop.tsx",match:"await"},{begin:"\\(",beginCaptures:{0:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#var-expr"},{include:"#expression"},{include:"#punctuation-semicolon"}]}]},"if-statement":{patterns:[{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?=\\bif\\s*(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))\\s*(?!\\{))",end:"(?=;|$|\\})",patterns:[{include:"#comment"},{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(if)\\s*(\\()",beginCaptures:{1:{name:"keyword.control.conditional.tsx"},2:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression"}]},{name:"string.regexp.tsx",begin:"(?<=\\))\\s*\\/(?![\\/*])(?=(?:[^\\/\\\\\\[]|\\\\.|\\[([^\\]\\\\]|\\\\.)*\\])+\\/([gimsuy]+|(?![\\/\\*])|(?=\\/\\*))(?!\\s*[a-zA-Z0-9_$]))",beginCaptures:{0:{name:"punctuation.definition.string.begin.tsx"}},end:"(/)([gimsuy]*)",endCaptures:{1:{name:"punctuation.definition.string.end.tsx"},2:{name:"keyword.other.tsx"}},patterns:[{include:"#regexp"}]},{include:"#statements"}]}]},"decl-block":{name:"meta.block.tsx",begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#statements"}]},"after-operator-block-as-object-literal":{name:"meta.objectliteral.tsx",begin:"(?<!\\+\\+|--)(?<=[:=(,\\[?+!>]|^await|[^\\._$[:alnum:]]await|^return|[^\\._$[:alnum:]]return|^yield|[^\\._$[:alnum:]]yield|^throw|[^\\._$[:alnum:]]throw|^in|[^\\._$[:alnum:]]in|^of|[^\\._$[:alnum:]]of|^typeof|[^\\._$[:alnum:]]typeof|&&|\\|\\||\\*)\\s*(\\{)",beginCaptures:{1:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#object-member"}]},"object-literal":{name:"meta.objectliteral.tsx",begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#object-member"}]},"object-member":{patterns:[{include:"#comment"},{include:"#object-literal-method-declaration"},{name:"meta.object.member.tsx meta.object-literal.key.tsx",begin:"(?=\\[)",end:"(?=:)|((?<=[\\]])(?=\\s*[\\(\\<]))",patterns:[{include:"#comment"},{include:"#array-literal"}]},{name:"meta.object.member.tsx meta.object-literal.key.tsx",begin:"(?=[\\'\\\"\\`])",end:"(?=:)|((?<=[\\'\\\"\\`])(?=((\\s*[\\(\\<,}])|(\\s+(as)\\s+))))",patterns:[{include:"#comment"},{include:"#string"}]},{name:"meta.object.member.tsx meta.object-literal.key.tsx",begin:`(?x)(?=(\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$))|(\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$))|((?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$)))`,end:"(?=:)|(?=\\s*([\\(\\<,}])|(\\s+as\\s+))",patterns:[{include:"#comment"},{include:"#numeric-literal"}]},{name:"meta.method.declaration.tsx",begin:"(?<=[\\]\\'\\\"\\`])(?=\\s*[\\(\\<])",end:"(?=\\}|;|,)|(?<=\\})",patterns:[{include:"#function-body"}]},{name:"meta.object.member.tsx",match:"(?![_$[:alpha:]])([[:digit:]]+)\\s*(?=(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*:)",captures:{0:{name:"meta.object-literal.key.tsx"},1:{name:"constant.numeric.decimal.tsx"}}},{name:"meta.object.member.tsx",match:`(?x)(?:([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*:(\\s*\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/)*\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)))`,captures:{0:{name:"meta.object-literal.key.tsx"},1:{name:"entity.name.function.tsx"}}},{name:"meta.object.member.tsx",match:"(?:[_$[:alpha:]][_$[:alnum:]]*)\\s*(?=(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*:)",captures:{0:{name:"meta.object-literal.key.tsx"}}},{name:"meta.object.member.tsx",begin:"\\.\\.\\.",beginCaptures:{0:{name:"keyword.operator.spread.tsx"}},end:"(?=,|\\})",patterns:[{include:"#expression"}]},{name:"meta.object.member.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=,|\\}|$|\\/\\/|\\/\\*)",captures:{1:{name:"variable.other.readwrite.tsx"}}},{name:"meta.object.member.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+(const)(?=\\s*([,}]|$))",captures:{1:{name:"keyword.control.as.tsx"},2:{name:"storage.modifier.tsx"}}},{name:"meta.object.member.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+",beginCaptures:{1:{name:"keyword.control.as.tsx"}},end:"(?=[;),}\\]:?\\-\\+\\>]|\\|\\||\\&\\&|\\!\\=\\=|$|^|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+))",patterns:[{include:"#type"}]},{name:"meta.object.member.tsx",begin:"(?=[_$[:alpha:]][_$[:alnum:]]*\\s*=)",end:"(?=,|\\}|$|\\/\\/|\\/\\*)",patterns:[{include:"#expression"}]},{name:"meta.object.member.tsx",begin:":",beginCaptures:{0:{name:"meta.object-literal.key.tsx punctuation.separator.key-value.tsx"}},end:"(?=,|\\})",patterns:[{begin:"(?<=:)\\s*(async)?(?=\\s*(<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)\\(\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))",beginCaptures:{1:{name:"storage.modifier.async.tsx"}},end:"(?<=\\))",patterns:[{include:"#type-parameters"},{begin:"\\(",beginCaptures:{0:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression-inside-possibly-arrow-parens"}]}]},{begin:"(?<=:)\\s*(async)?\\s*(\\()(?=\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))",beginCaptures:{1:{name:"storage.modifier.async.tsx"},2:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression-inside-possibly-arrow-parens"}]},{begin:"(?<=:)\\s*(async)?\\s*(?=\\<\\s*$)",beginCaptures:{1:{name:"storage.modifier.async.tsx"}},end:"(?<=\\>)",patterns:[{include:"#type-parameters"}]},{begin:"(?<=\\>)\\s*(\\()(?=\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))",beginCaptures:{1:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression-inside-possibly-arrow-parens"}]},{include:"#possibly-arrow-return-type"},{include:"#expression"}]},{include:"#punctuation-comma"}]},"ternary-expression":{begin:"(?!\\?\\.\\s*[^[:digit:]])(\\?)(?!\\?)",beginCaptures:{1:{name:"keyword.operator.ternary.tsx"}},end:"\\s*(:)",endCaptures:{1:{name:"keyword.operator.ternary.tsx"}},patterns:[{include:"#expression"}]},"function-call":{patterns:[{begin:"(?=(((([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*))|(?<=[\\)]))\\s*(?:(\\?\\.\\s*)|(\\!))?((<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))(([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>)*(?<!=)\\>))*(?<!=)\\>)*(?<!=)>\\s*)?\\())",end:"(?<=\\))(?!(((([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*))|(?<=[\\)]))\\s*(?:(\\?\\.\\s*)|(\\!))?((<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))(([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>)*(?<!=)\\>))*(?<!=)\\>)*(?<!=)>\\s*)?\\())",patterns:[{name:"meta.function-call.tsx",begin:"(?=(([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*))",end:"(?=\\s*(?:(\\?\\.\\s*)|(\\!))?((<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))(([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>)*(?<!=)\\>))*(?<!=)\\>)*(?<!=)>\\s*)?\\())",patterns:[{include:"#function-call-target"}]},{include:"#comment"},{include:"#function-call-optionals"},{include:"#type-arguments"},{include:"#paren-expression"}]},{begin:"(?=(((([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*))|(?<=[\\)]))(<\\s*[\\{\\[\\(]\\s*$))",end:"(?<=\\>)(?!(((([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*))|(?<=[\\)]))(<\\s*[\\{\\[\\(]\\s*$))",patterns:[{name:"meta.function-call.tsx",begin:"(?=(([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*))",end:"(?=(<\\s*[\\{\\[\\(]\\s*$))",patterns:[{include:"#function-call-target"}]},{include:"#comment"},{include:"#function-call-optionals"},{include:"#type-arguments"}]}]},"function-call-target":{patterns:[{include:"#support-function-call-identifiers"},{name:"entity.name.function.tsx",match:"(\\#?[_$[:alpha:]][_$[:alnum:]]*)"}]},"function-call-optionals":{patterns:[{name:"meta.function-call.tsx punctuation.accessor.optional.tsx",match:"\\?\\."},{name:"meta.function-call.tsx keyword.operator.definiteassignment.tsx",match:"\\!"}]},"support-function-call-identifiers":{patterns:[{include:"#literal"},{include:"#support-objects"},{include:"#object-identifiers"},{include:"#punctuation-accessor"},{name:"keyword.operator.expression.import.tsx",match:"(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))import(?=\\s*[\\(]\\s*[\\\"\\'\\`]))"}]},"new-expr":{name:"new.expr.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(new)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"keyword.operator.new.tsx"}},end:"(?<=\\))|(?=[;),}\\]:?\\-\\+\\>]|\\|\\||\\&\\&|\\!\\=\\=|$|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))new(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))function((\\s+[_$[:alpha:]][_$[:alnum:]]*)|(\\s*[\\(]))))",patterns:[{include:"#expression"}]},"instanceof-expr":{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(instanceof)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{1:{name:"keyword.operator.expression.instanceof.tsx"}},end:"(?<=\\))|(?=[;),}\\]:?\\-\\+\\>]|\\|\\||\\&\\&|\\!\\=\\=|$|(([\\&\\~\\^\\|]\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s+instanceof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))function((\\s+[_$[:alpha:]][_$[:alnum:]]*)|(\\s*[\\(]))))",patterns:[{include:"#type"}]},"paren-expression-possibly-arrow":{patterns:[{begin:"(?<=[(=,])\\s*(async)?(?=\\s*((<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*))?\\(\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))",beginCaptures:{1:{name:"storage.modifier.async.tsx"}},end:"(?<=\\))",patterns:[{include:"#paren-expression-possibly-arrow-with-typeparameters"}]},{begin:"(?<=[(=,]|=>|^return|[^\\._$[:alnum:]]return)\\s*(async)?(?=\\s*((((<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*))?\\()|(<))\\s*$)",beginCaptures:{1:{name:"storage.modifier.async.tsx"}},end:"(?<=\\))",patterns:[{include:"#paren-expression-possibly-arrow-with-typeparameters"}]},{include:"#possibly-arrow-return-type"}]},"paren-expression-possibly-arrow-with-typeparameters":{patterns:[{include:"#type-parameters"},{begin:"\\(",beginCaptures:{0:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression-inside-possibly-arrow-parens"}]}]},"expression-inside-possibly-arrow-parens":{patterns:[{include:"#expressionWithoutIdentifiers"},{include:"#comment"},{include:"#string"},{include:"#decorator"},{include:"#destructuring-parameter"},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|protected|private|readonly)\\s+(?=(public|protected|private|readonly)\\s+)",captures:{1:{name:"storage.modifier.tsx"}}},{match:`(?x)(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?<!=|:)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*(\\??)(?=\\s*
# function assignment |
(=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)) |
# typeannotation is fn type: < | () | (... | (param: | (param, | (param? | (param= | (param) =>
(:\\s*(
  (<) |
  ([(]\\s*(
    ([)]) |
    (\\.\\.\\.) |
    ([_$[:alnum:]]+\\s*(
      ([:,?=])|
      ([)]\\s*=>)
    ))
  ))
)) |
(:\\s*(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Function(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))) |
(:\\s*((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*))))))) |
(:\\s*(=>|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(<[^<>]*>)|[^<>(),=])+=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
)))`,captures:{1:{name:"storage.modifier.tsx"},2:{name:"keyword.operator.rest.tsx"},3:{name:"entity.name.function.tsx variable.language.this.tsx"},4:{name:"entity.name.function.tsx"},5:{name:"keyword.operator.optional.tsx"}}},{match:"(?x)(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?<!=|:)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*(\\??)(?=\\s*[:,]|$)",captures:{1:{name:"storage.modifier.tsx"},2:{name:"keyword.operator.rest.tsx"},3:{name:"variable.parameter.tsx variable.language.this.tsx"},4:{name:"variable.parameter.tsx"},5:{name:"keyword.operator.optional.tsx"}}},{include:"#type-annotation"},{include:"#variable-initializer"},{name:"punctuation.separator.parameter.tsx",match:","},{include:"#identifiers"},{include:"#expressionPunctuations"}]},"paren-expression":{begin:"\\(",beginCaptures:{0:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{include:"#expression"}]},cast:{patterns:[{include:"#jsx"}]},"expression-operators":{patterns:[{name:"keyword.control.flow.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(await)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(yield)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?=\\s*\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*\\*)",beginCaptures:{1:{name:"keyword.control.flow.tsx"}},end:"\\*",endCaptures:{0:{name:"keyword.generator.asterisk.tsx"}},patterns:[{include:"#comment"}]},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(yield)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?:\\s*(\\*))?",captures:{1:{name:"keyword.control.flow.tsx"},2:{name:"keyword.generator.asterisk.tsx"}}},{name:"keyword.operator.expression.delete.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))delete(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.operator.expression.in.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))in(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?!\\()"},{name:"keyword.operator.expression.of.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))of(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?!\\()"},{name:"keyword.operator.expression.instanceof.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))instanceof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.operator.new.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))new(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{include:"#typeof-operator"},{name:"keyword.operator.expression.void.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))void(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+(const)(?=\\s*($|[;,:})\\]]))",captures:{1:{name:"keyword.control.as.tsx"},2:{name:"storage.modifier.tsx"}}},{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+",beginCaptures:{1:{name:"keyword.control.as.tsx"}},end:"(?=^|[;),}\\]:?\\-\\+\\>]|\\|\\||\\&\\&|\\!\\=\\=|$|((?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(as)\\s+)|(\\s+\\<))",patterns:[{include:"#type"}]},{name:"keyword.operator.spread.tsx",match:"\\.\\.\\."},{name:"keyword.operator.assignment.compound.tsx",match:"\\*=|(?<!\\()/=|%=|\\+=|\\-="},{name:"keyword.operator.assignment.compound.bitwise.tsx",match:"\\&=|\\^=|<<=|>>=|>>>=|\\|="},{name:"keyword.operator.bitwise.shift.tsx",match:"<<|>>>|>>"},{name:"keyword.operator.comparison.tsx",match:"===|!==|==|!="},{name:"keyword.operator.relational.tsx",match:"<=|>=|<>|<|>"},{match:"(?<=[_$[:alnum:]])(\\!)\\s*(?:(/=)|(?:(/)(?![/*])))",captures:{1:{name:"keyword.operator.logical.tsx"},2:{name:"keyword.operator.assignment.compound.tsx"},3:{name:"keyword.operator.arithmetic.tsx"}}},{name:"keyword.operator.logical.tsx",match:"\\!|&&|\\|\\||\\?\\?"},{name:"keyword.operator.bitwise.tsx",match:"\\&|~|\\^|\\|"},{name:"keyword.operator.assignment.tsx",match:"\\="},{name:"keyword.operator.decrement.tsx",match:"--"},{name:"keyword.operator.increment.tsx",match:"\\+\\+"},{name:"keyword.operator.arithmetic.tsx",match:"%|\\*|/|-|\\+"},{begin:"(?<=[_$[:alnum:])\\]])\\s*(?=(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)+(?:(/=)|(?:(/)(?![/*]))))",end:"(?:(/=)|(?:(/)(?!\\*([^\\*]|(\\*[^\\/]))*\\*\\/)))",endCaptures:{1:{name:"keyword.operator.assignment.compound.tsx"},2:{name:"keyword.operator.arithmetic.tsx"}},patterns:[{include:"#comment"}]},{match:"(?<=[_$[:alnum:])\\]])\\s*(?:(/=)|(?:(/)(?![/*])))",captures:{1:{name:"keyword.operator.assignment.compound.tsx"},2:{name:"keyword.operator.arithmetic.tsx"}}}]},"typeof-operator":{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))typeof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",beginCaptures:{0:{name:"keyword.operator.expression.typeof.tsx"}},end:"(?=[,);}\\]=>]|$|;|^\\s*$|(?:^\\s*(?:abstract|async|class|const|declare|enum|export|function|import|interface|let|module|namespace|return|type|var)\\b))",patterns:[{include:"#expression"}]},literal:{patterns:[{include:"#numeric-literal"},{include:"#boolean-literal"},{include:"#null-literal"},{include:"#undefined-literal"},{include:"#numericConstant-literal"},{include:"#array-literal"},{include:"#this-literal"},{include:"#super-literal"}]},"array-literal":{name:"meta.array.literal.tsx",begin:"\\s*(\\[)",beginCaptures:{1:{name:"meta.brace.square.tsx"}},end:"\\]",endCaptures:{0:{name:"meta.brace.square.tsx"}},patterns:[{include:"#expression"},{include:"#punctuation-comma"}]},"numeric-literal":{patterns:[{name:"constant.numeric.hex.tsx",match:"\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$)",captures:{1:{name:"storage.type.numeric.bigint.tsx"}}},{name:"constant.numeric.binary.tsx",match:"\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$)",captures:{1:{name:"storage.type.numeric.bigint.tsx"}}},{name:"constant.numeric.octal.tsx",match:"\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$)",captures:{1:{name:"storage.type.numeric.bigint.tsx"}}},{match:`(?x)
(?<!\\$)(?:
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3
  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3
  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3
  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3
  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1
  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.
  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1
  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1
)(?!\\$)`,captures:{0:{name:"constant.numeric.decimal.tsx"},1:{name:"meta.delimiter.decimal.period.tsx"},2:{name:"storage.type.numeric.bigint.tsx"},3:{name:"meta.delimiter.decimal.period.tsx"},4:{name:"storage.type.numeric.bigint.tsx"},5:{name:"meta.delimiter.decimal.period.tsx"},6:{name:"storage.type.numeric.bigint.tsx"},7:{name:"storage.type.numeric.bigint.tsx"},8:{name:"meta.delimiter.decimal.period.tsx"},9:{name:"storage.type.numeric.bigint.tsx"},10:{name:"meta.delimiter.decimal.period.tsx"},11:{name:"storage.type.numeric.bigint.tsx"},12:{name:"meta.delimiter.decimal.period.tsx"},13:{name:"storage.type.numeric.bigint.tsx"},14:{name:"storage.type.numeric.bigint.tsx"}}}]},"boolean-literal":{patterns:[{name:"constant.language.boolean.true.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))true(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"constant.language.boolean.false.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))false(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"}]},"null-literal":{name:"constant.language.null.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))null(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"this-literal":{name:"variable.language.this.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))this\\b(?!\\$)"},"super-literal":{name:"variable.language.super.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))super\\b(?!\\$)"},"undefined-literal":{name:"constant.language.undefined.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))undefined(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"numericConstant-literal":{patterns:[{name:"constant.language.nan.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))NaN(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"constant.language.infinity.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Infinity(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"}]},"support-objects":{patterns:[{name:"variable.language.arguments.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(arguments)\\b(?!\\$)"},{name:"support.class.builtin.tsx",match:`(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(Array|ArrayBuffer|Atomics|BigInt|BigInt64Array|BigUint64Array|Boolean|DataView|Date|Float32Array
  |Float64Array|Function|Generator|GeneratorFunction|Int8Array|Int16Array|Int32Array|Intl|Map|Number|Object|Proxy
  |Reflect|RegExp|Set|SharedArrayBuffer|SIMD|String|Symbol|TypedArray
  |Uint8Array|Uint16Array|Uint32Array|Uint8ClampedArray|WeakMap|WeakSet)\\b(?!\\$)`},{name:"support.class.error.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))((Eval|Internal|Range|Reference|Syntax|Type|URI)?Error)\\b(?!\\$)"},{name:"support.class.promise.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(Promise)\\b(?!\\$)"},{name:"support.function.tsx",match:`(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(clear(Interval|Timeout)|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|
  isFinite|isNaN|parseFloat|parseInt|require|set(Interval|Timeout)|super|unescape|uneval)(?=\\s*\\()`},{match:`(?x)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(Math)(?:\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(?:
  (abs|acos|acosh|asin|asinh|atan|atan2|atanh|cbrt|ceil|clz32|cos|cosh|exp|
  expm1|floor|fround|hypot|imul|log|log10|log1p|log2|max|min|pow|random|
  round|sign|sin|sinh|sqrt|tan|tanh|trunc)
  |
  (E|LN10|LN2|LOG10E|LOG2E|PI|SQRT1_2|SQRT2)))?\\b(?!\\$)`,captures:{1:{name:"support.constant.math.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"},4:{name:"support.function.math.tsx"},5:{name:"support.constant.property.math.tsx"}}},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(JSON)(?:\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(parse|stringify))?\\b(?!\\$)",captures:{1:{name:"support.constant.json.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"},4:{name:"support.function.json.tsx"}}},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(import)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(meta)\\b(?!\\$)",captures:{1:{name:"keyword.control.import.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"},4:{name:"support.variable.property.importmeta.tsx"}}},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(new)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(target)\\b(?!\\$)",captures:{1:{name:"keyword.operator.new.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"},4:{name:"support.variable.property.target.tsx"}}},{match:`(?x) (?:(\\.)|(\\?\\.(?!\\s*[[:digit:]]))) \\s* (?:
  (?:(constructor|length|prototype|__proto__)\\b(?!\\$|\\s*(<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?\\())
  |
  (?:(EPSILON|MAX_SAFE_INTEGER|MAX_VALUE|MIN_SAFE_INTEGER|MIN_VALUE|NEGATIVE_INFINITY|POSITIVE_INFINITY)\\b(?!\\$)))`,captures:{1:{name:"punctuation.accessor.tsx"},2:{name:"punctuation.accessor.optional.tsx"},3:{name:"support.variable.property.tsx"},4:{name:"support.constant.tsx"}}},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(exports)|(module)(?:(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))(exports|id|filename|loaded|parent|children))?)\\b(?!\\$)",captures:{1:{name:"support.type.object.module.tsx"},2:{name:"support.type.object.module.tsx"},3:{name:"punctuation.accessor.tsx"},4:{name:"punctuation.accessor.optional.tsx"},5:{name:"support.type.object.module.tsx"}}}]},identifiers:{patterns:[{include:"#object-identifiers"},{match:`(?x)(?:(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*)?([_$[:alpha:]][_$[:alnum:]]*)(?=\\s*=\\s*(
  ((async\\s+)?(
    (function\\s*[(<*]) |
    (function\\s+) |
    ([_$[:alpha:]][_$[:alnum:]]*\\s*=>)
  )) |
  ((async\\s*)?(
    ((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))))) |
    # sure shot arrow functions even if => is on new line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?
  [(]\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*
  (
    ([)]\\s*:) |                                                                                       # ():
    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:
  )
) |
(
  [<]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=>]                                                              # < typeparam extends
) |
# arrow function possible to detect only with => on same line
(
  (<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<]|\\<\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\]))([^=<>]|=[^<])*\\>)*\\>)*>\\s*)?                                                                                 # typeparameters
  \\(\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()\\'\\"\\\`]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\"([^\\"\\\\]|\\\\.)*\\")|(\\\`([^\\\`\\\\]|\\\\.)*\\\`))*)?\\)   # parameters
  (\\s*:\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+)?                                                                        # return type
  \\s*=>                                                                                               # arrow operator
)
  ))
))`,captures:{1:{name:"punctuation.accessor.tsx"},2:{name:"punctuation.accessor.optional.tsx"},3:{name:"entity.name.function.tsx"}}},{match:"(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(\\#?[[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])",captures:{1:{name:"punctuation.accessor.tsx"},2:{name:"punctuation.accessor.optional.tsx"},3:{name:"variable.other.constant.property.tsx"}}},{match:"(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(\\#?[_$[:alpha:]][_$[:alnum:]]*)",captures:{1:{name:"punctuation.accessor.tsx"},2:{name:"punctuation.accessor.optional.tsx"},3:{name:"variable.other.property.tsx"}}},{name:"variable.other.constant.tsx",match:"([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])"},{name:"variable.other.readwrite.tsx",match:"[_$[:alpha:]][_$[:alnum:]]*"}]},"object-identifiers":{patterns:[{name:"support.class.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)(?=\\s*\\??\\.\\s*prototype\\b(?!\\$))"},{match:`(?x)(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(?:
  (\\#?[[:upper:]][_$[:digit:][:upper:]]*) |
  (\\#?[_$[:alpha:]][_$[:alnum:]]*)
)(?=\\s*\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*)`,captures:{1:{name:"punctuation.accessor.tsx"},2:{name:"punctuation.accessor.optional.tsx"},3:{name:"variable.other.constant.object.property.tsx"},4:{name:"variable.other.object.property.tsx"}}},{match:`(?x)(?:
  ([[:upper:]][_$[:digit:][:upper:]]*) |
  ([_$[:alpha:]][_$[:alnum:]]*)
)(?=\\s*\\??\\.\\s*\\#?[_$[:alpha:]][_$[:alnum:]]*)`,captures:{1:{name:"variable.other.constant.object.tsx"},2:{name:"variable.other.object.tsx"}}}]},"type-annotation":{patterns:[{name:"meta.type.annotation.tsx",begin:"(:)(?=\\s*\\S)",beginCaptures:{1:{name:"keyword.operator.type.annotation.tsx"}},end:"(?<![:|&])((?=$|^|[,);\\}\\]]|//)|(?==[^>])|((?<=[\\}>\\]\\)]|[_$[:alpha:]])\\s*(?=\\{)))",patterns:[{include:"#type"}]},{name:"meta.type.annotation.tsx",begin:"(:)",beginCaptures:{1:{name:"keyword.operator.type.annotation.tsx"}},end:"(?<![:|&])((?=[,);\\}\\]]|//)|(?==[^>])|(?=^\\s*$)|((?<=\\S)(?=\\s*$))|((?<=[\\}>\\]\\)]|[_$[:alpha:]])\\s*(?=\\{)))",patterns:[{include:"#type"}]}]},"parameter-type-annotation":{patterns:[{name:"meta.type.annotation.tsx",begin:"(:)",beginCaptures:{1:{name:"keyword.operator.type.annotation.tsx"}},end:"(?=[,)])|(?==[^>])",patterns:[{include:"#type"}]}]},"return-type":{patterns:[{name:"meta.return.type.tsx",begin:"(?<=\\))\\s*(:)(?=\\s*\\S)",beginCaptures:{1:{name:"keyword.operator.type.annotation.tsx"}},end:"(?<![:|&])(?=$|^|[{};,]|//)",patterns:[{include:"#return-type-core"}]},{name:"meta.return.type.tsx",begin:"(?<=\\))\\s*(:)",beginCaptures:{1:{name:"keyword.operator.type.annotation.tsx"}},end:"(?<![:|&])((?=[{};,]|//|^\\s*$)|((?<=\\S)(?=\\s*$)))",patterns:[{include:"#return-type-core"}]}]},"return-type-core":{patterns:[{include:"#comment"},{begin:"(?<=[:|&])(?=\\s*\\{)",end:"(?<=\\})",patterns:[{include:"#type-object"}]},{include:"#type-predicate-operator"},{include:"#type"}]},"arrow-return-type":{name:"meta.return.type.arrow.tsx",begin:"(?<=\\))\\s*(:)",beginCaptures:{1:{name:"keyword.operator.type.annotation.tsx"}},end:"(?==>|\\{|(^\\s*(export|function|class|interface|let|var|const|import|enum|namespace|module|type|abstract|declare)\\s+))",patterns:[{include:"#arrow-return-type-body"}]},"possibly-arrow-return-type":{begin:"(?<=\\)|^)\\s*(:)(?=\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*=>)",beginCaptures:{1:{name:"meta.arrow.tsx meta.return.type.arrow.tsx keyword.operator.type.annotation.tsx"}},end:"(?==>|\\{|(^\\s*(export|function|class|interface|let|var|const|import|enum|namespace|module|type|abstract|declare)\\s+))",contentName:"meta.arrow.tsx meta.return.type.arrow.tsx",patterns:[{include:"#arrow-return-type-body"}]},"arrow-return-type-body":{patterns:[{begin:"(?<=[:])(?=\\s*\\{)",end:"(?<=\\})",patterns:[{include:"#type-object"}]},{include:"#type-predicate-operator"},{include:"#type"}]},"type-parameters":{name:"meta.type.parameters.tsx",begin:"(<)",beginCaptures:{1:{name:"punctuation.definition.typeparameters.begin.tsx"}},end:"(>)",endCaptures:{1:{name:"punctuation.definition.typeparameters.end.tsx"}},patterns:[{include:"#comment"},{name:"storage.modifier.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(extends)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{include:"#type"},{include:"#punctuation-comma"},{name:"keyword.operator.assignment.tsx",match:"(=)(?!>)"}]},"type-arguments":{name:"meta.type.parameters.tsx",begin:"\\<",beginCaptures:{0:{name:"punctuation.definition.typeparameters.begin.tsx"}},end:"\\>",endCaptures:{0:{name:"punctuation.definition.typeparameters.end.tsx"}},patterns:[{include:"#type-arguments-body"}]},"type-arguments-body":{patterns:[{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(_)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",captures:{0:{name:"keyword.operator.type.tsx"}}},{include:"#type"},{include:"#punctuation-comma"}]},type:{patterns:[{include:"#comment"},{include:"#type-string"},{include:"#numeric-literal"},{include:"#type-primitive"},{include:"#type-builtin-literals"},{include:"#type-parameters"},{include:"#type-tuple"},{include:"#type-object"},{include:"#type-conditional"},{include:"#type-operators"},{include:"#type-fn-type-parameters"},{include:"#type-paren-or-function-parameters"},{include:"#type-function-return-type"},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(readonly)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*",captures:{1:{name:"storage.modifier.tsx"}}},{include:"#type-name"}]},"type-primitive":{name:"support.type.primitive.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(string|number|bigint|boolean|symbol|any|void|never|unknown)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"type-builtin-literals":{name:"support.type.builtin.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(this|true|false|undefined|null|object)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},"type-tuple":{name:"meta.type.tuple.tsx",begin:"\\[",beginCaptures:{0:{name:"meta.brace.square.tsx"}},end:"\\]",endCaptures:{0:{name:"meta.brace.square.tsx"}},patterns:[{name:"keyword.operator.rest.tsx",match:"\\.\\.\\."},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))([_$[:alpha:]][_$[:alnum:]]*)\\s*(\\?)?\\s*(:)",captures:{1:{name:"entity.name.label.tsx"},2:{name:"keyword.operator.optional.tsx"},3:{name:"punctuation.separator.label.tsx"}}},{include:"#type"},{include:"#punctuation-comma"}]},"type-object":{name:"meta.object.type.tsx",begin:"\\{",beginCaptures:{0:{name:"punctuation.definition.block.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.block.tsx"}},patterns:[{include:"#comment"},{include:"#method-declaration"},{include:"#indexer-declaration"},{include:"#indexer-mapped-type-declaration"},{include:"#field-declaration"},{include:"#type-annotation"},{begin:"\\.\\.\\.",beginCaptures:{0:{name:"keyword.operator.spread.tsx"}},end:"(?=\\}|;|,|$)|(?<=\\})",patterns:[{include:"#type"}]},{include:"#punctuation-comma"},{include:"#punctuation-semicolon"},{include:"#type"}]},"type-conditional":{patterns:[{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(extends)\\s+",beginCaptures:{1:{name:"storage.modifier.tsx"}},end:"(?<=:)",patterns:[{begin:"\\?",beginCaptures:{0:{name:"keyword.operator.ternary.tsx"}},end:":",endCaptures:{0:{name:"keyword.operator.ternary.tsx"}},patterns:[{include:"#type"}]},{include:"#type"}]}]},"type-paren-or-function-parameters":{name:"meta.type.paren.cover.tsx",begin:"\\(",beginCaptures:{0:{name:"meta.brace.round.tsx"}},end:"\\)",endCaptures:{0:{name:"meta.brace.round.tsx"}},patterns:[{match:`(?x)(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?<!=|:)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))\\s*(\\??)(?=\\s*(:\\s*(
  (<) |
  ([(]\\s*(
    ([)]) |
    (\\.\\.\\.) |
    ([_$[:alnum:]]+\\s*(
      ([:,?=])|
      ([)]\\s*=>)
    ))
  ))
)) |
(:\\s*(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))Function(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))) |
(:\\s*((<\\s*$)|([\\(]\\s*((([\\{\\[]\\s*)?$)|((\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})\\s*((:\\s*\\{?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*)))|((\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])\\s*((:\\s*\\[?$)|((\\s*([^<>\\(\\)\\{\\}]|\\<([^<>]|\\<([^<>]|\\<[^<>]+\\>)+\\>)+\\>|\\([^\\(\\)]+\\)|\\{[^\\{\\}]+\\})+\\s*)?=\\s*))))))))`,captures:{1:{name:"storage.modifier.tsx"},2:{name:"keyword.operator.rest.tsx"},3:{name:"entity.name.function.tsx variable.language.this.tsx"},4:{name:"entity.name.function.tsx"},5:{name:"keyword.operator.optional.tsx"}}},{match:"(?x)(?:(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?<!=|:)(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))\\s*(\\??)(?=:)",captures:{1:{name:"storage.modifier.tsx"},2:{name:"keyword.operator.rest.tsx"},3:{name:"variable.parameter.tsx variable.language.this.tsx"},4:{name:"variable.parameter.tsx"},5:{name:"keyword.operator.optional.tsx"}}},{include:"#type-annotation"},{name:"punctuation.separator.parameter.tsx",match:","},{include:"#type"}]},"type-fn-type-parameters":{patterns:[{begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(new)\\b(?=\\s*\\<)",beginCaptures:{1:{name:"meta.type.constructor.tsx keyword.control.new.tsx"}},end:"(?<=>)",patterns:[{include:"#comment"},{include:"#type-parameters"}]},{name:"meta.type.constructor.tsx",begin:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(new)\\b\\s*(?=\\()",beginCaptures:{1:{name:"keyword.control.new.tsx"}},end:"(?<=\\))",patterns:[{include:"#function-parameters"}]},{name:"meta.type.function.tsx",begin:`(?x)(
  (?=
    [(]\\s*(
      ([)]) |
      (\\.\\.\\.) |
      ([_$[:alnum:]]+\\s*(
        ([:,?=])|
        ([)]\\s*=>)
      ))
    )
  )
)`,end:"(?<=\\))",patterns:[{include:"#function-parameters"}]}]},"type-function-return-type":{patterns:[{name:"meta.type.function.return.tsx",begin:"(=>)(?=\\s*\\S)",beginCaptures:{1:{name:"storage.type.function.arrow.tsx"}},end:"(?<!=>)(?<![|&])(?=[,\\]\\)\\{\\}=;>:\\?]|//|$)",patterns:[{include:"#type-function-return-type-core"}]},{name:"meta.type.function.return.tsx",begin:"=>",beginCaptures:{0:{name:"storage.type.function.arrow.tsx"}},end:"(?<!=>)(?<![|&])((?=[,\\]\\)\\{\\}=;:\\?>]|//|^\\s*$)|((?<=\\S)(?=\\s*$)))",patterns:[{include:"#type-function-return-type-core"}]}]},"type-function-return-type-core":{patterns:[{include:"#comment"},{begin:"(?<==>)(?=\\s*\\{)",end:"(?<=\\})",patterns:[{include:"#type-object"}]},{include:"#type-predicate-operator"},{include:"#type"}]},"type-operators":{patterns:[{include:"#typeof-operator"},{begin:"([&|])(?=\\s*\\{)",beginCaptures:{0:{name:"keyword.operator.type.tsx"}},end:"(?<=\\})",patterns:[{include:"#type-object"}]},{begin:"[&|]",beginCaptures:{0:{name:"keyword.operator.type.tsx"}},end:"(?=\\S)"},{name:"keyword.operator.expression.keyof.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))keyof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.operator.ternary.tsx",match:"(\\?|\\:)"},{name:"keyword.operator.expression.infer.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))infer(?=\\s+[_$[:alpha:]])"},{name:"keyword.operator.expression.awaited.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))awaited(?=\\s+[_$[:alpha:]])"},{name:"keyword.operator.expression.import.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))import(?=\\s*\\()"}]},"type-predicate-operator":{patterns:[{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(?:(asserts)\\s+)?(?!asserts)(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))\\s(is)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",captures:{1:{name:"keyword.operator.type.asserts.tsx"},2:{name:"variable.parameter.tsx variable.language.this.tsx"},3:{name:"variable.parameter.tsx"},4:{name:"keyword.operator.expression.is.tsx"}}},{match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))(asserts)\\s+(?!is)(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))",captures:{1:{name:"keyword.operator.type.asserts.tsx"},2:{name:"variable.parameter.tsx variable.language.this.tsx"},3:{name:"variable.parameter.tsx"}}},{name:"keyword.operator.type.asserts.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))asserts(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"},{name:"keyword.operator.expression.is.tsx",match:"(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))is(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"}]},"type-name":{patterns:[{begin:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(<)",captures:{1:{name:"entity.name.type.module.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"},4:{name:"meta.type.parameters.tsx punctuation.definition.typeparameters.begin.tsx"}},end:"(>)",endCaptures:{1:{name:"meta.type.parameters.tsx punctuation.definition.typeparameters.end.tsx"}},contentName:"meta.type.parameters.tsx",patterns:[{include:"#type-arguments-body"}]},{begin:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(<)",beginCaptures:{1:{name:"entity.name.type.tsx"},2:{name:"meta.type.parameters.tsx punctuation.definition.typeparameters.begin.tsx"}},end:"(>)",endCaptures:{1:{name:"meta.type.parameters.tsx punctuation.definition.typeparameters.end.tsx"}},contentName:"meta.type.parameters.tsx",patterns:[{include:"#type-arguments-body"}]},{match:"([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))",captures:{1:{name:"entity.name.type.module.tsx"},2:{name:"punctuation.accessor.tsx"},3:{name:"punctuation.accessor.optional.tsx"}}},{name:"entity.name.type.tsx",match:"[_$[:alpha:]][_$[:alnum:]]*"}]},"punctuation-comma":{name:"punctuation.separator.comma.tsx",match:","},"punctuation-semicolon":{name:"punctuation.terminator.statement.tsx",match:";"},"punctuation-accessor":{match:"(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))",captures:{1:{name:"punctuation.accessor.tsx"},2:{name:"punctuation.accessor.optional.tsx"}}},string:{patterns:[{include:"#qstring-single"},{include:"#qstring-double"},{include:"#template"}]},"qstring-double":{name:"string.quoted.double.tsx",begin:'"',beginCaptures:{0:{name:"punctuation.definition.string.begin.tsx"}},end:'(")|((?:[^\\\\\\n])$)',endCaptures:{1:{name:"punctuation.definition.string.end.tsx"},2:{name:"invalid.illegal.newline.tsx"}},patterns:[{include:"#string-character-escape"}]},"qstring-single":{name:"string.quoted.single.tsx",begin:"'",beginCaptures:{0:{name:"punctuation.definition.string.begin.tsx"}},end:"(\\')|((?:[^\\\\\\n])$)",endCaptures:{1:{name:"punctuation.definition.string.end.tsx"},2:{name:"invalid.illegal.newline.tsx"}},patterns:[{include:"#string-character-escape"}]},"string-character-escape":{name:"constant.character.escape.tsx",match:"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|u\\{[0-9A-Fa-f]+\\}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.|$)"},template:{patterns:[{include:"#template-call"},{name:"string.template.tsx",begin:"([_$[:alpha:]][_$[:alnum:]]*)?(`)",beginCaptures:{1:{name:"entity.name.function.tagged-template.tsx"},2:{name:"punctuation.definition.string.template.begin.tsx"}},end:"`",endCaptures:{0:{name:"punctuation.definition.string.template.end.tsx"}},patterns:[{include:"#template-substitution-element"},{include:"#string-character-escape"}]}]},"template-call":{patterns:[{name:"string.template.tsx",begin:"(?=(([_$[:alpha:]][_$[:alnum:]]*\\s*\\??\\.\\s*)*|(\\??\\.\\s*)?)([_$[:alpha:]][_$[:alnum:]]*)(<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))(([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>)*(?<!=)\\>))*(?<!=)\\>)*(?<!=)>\\s*)?`)",end:"(?=`)",patterns:[{begin:"(?=(([_$[:alpha:]][_$[:alnum:]]*\\s*\\??\\.\\s*)*|(\\??\\.\\s*)?)([_$[:alpha:]][_$[:alnum:]]*))",end:"(?=(<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))(([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>)*(?<!=)\\>))*(?<!=)\\>)*(?<!=)>\\s*)?`)",patterns:[{include:"#support-function-call-identifiers"},{name:"entity.name.function.tagged-template.tsx",match:"([_$[:alpha:]][_$[:alnum:]]*)"}]},{include:"#type-arguments"}]},{name:"string.template.tsx",begin:"([_$[:alpha:]][_$[:alnum:]]*)?\\s*(?=(<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))(([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>|\\<\\s*(((keyof|infer|awaited|typeof|readonly)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{([^\\{\\}]|\\{[^\\{\\}]*\\})*\\}))*\\})|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(\\[([^\\[\\]]|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])*\\]))*\\])|(\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`))(?=\\s*([\\<\\>\\,\\.\\[]|=>|&(?!&)|\\|(?!\\|)))))([^<>\\(]|(\\(([^\\(\\)]|(\\(([^\\(\\)]|\\([^\\(\\)]*\\))*\\)))*\\))|(?<==)\\>)*(?<!=)\\>))*(?<!=)\\>)*(?<!=)>\\s*)`)",beginCaptures:{1:{name:"entity.name.function.tagged-template.tsx"}},end:"(?=`)",patterns:[{include:"#type-arguments"}]}]},"template-substitution-element":{name:"meta.template.expression.tsx",begin:"\\$\\{",beginCaptures:{0:{name:"punctuation.definition.template-expression.begin.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.template-expression.end.tsx"}},patterns:[{include:"#expression"}],contentName:"meta.embedded.line.tsx"},"type-string":{patterns:[{include:"#qstring-single"},{include:"#qstring-double"},{include:"#template-type"}]},"template-type":{patterns:[{include:"#template-call"},{name:"string.template.tsx",begin:"([_$[:alpha:]][_$[:alnum:]]*)?(`)",beginCaptures:{1:{name:"entity.name.function.tagged-template.tsx"},2:{name:"punctuation.definition.string.template.begin.tsx"}},end:"`",endCaptures:{0:{name:"punctuation.definition.string.template.end.tsx"}},patterns:[{include:"#template-type-substitution-element"},{include:"#string-character-escape"}]}]},"template-type-substitution-element":{name:"meta.template.expression.tsx",begin:"\\$\\{",beginCaptures:{0:{name:"punctuation.definition.template-expression.begin.tsx"}},end:"\\}",endCaptures:{0:{name:"punctuation.definition.template-expression.end.tsx"}},patterns:[{include:"#type"}],contentName:"meta.embedded.line.tsx"},regex:{patterns:[{name:"string.regexp.tsx",begin:"(?<!\\+\\+|--|})(?<=[=(:,\\[?+!]|^return|[^\\._$[:alnum:]]return|^case|[^\\._$[:alnum:]]case|=>|&&|\\|\\||\\*\\/)\\s*(\\/)(?![\\/*])(?=(?:[^\\/\\\\\\[\\()]|\\\\.|\\[([^\\]\\\\]|\\\\.)+\\]|\\(([^\\)\\\\]|\\\\.)+\\))+\\/([gimsuy]+|(?![\\/\\*])|(?=\\/\\*))(?!\\s*[a-zA-Z0-9_$]))",beginCaptures:{1:{name:"punctuation.definition.string.begin.tsx"}},end:"(/)([gimsuy]*)",endCaptures:{1:{name:"punctuation.definition.string.end.tsx"},2:{name:"keyword.other.tsx"}},patterns:[{include:"#regexp"}]},{name:"string.regexp.tsx",begin:"((?<![_$[:alnum:])\\]]|\\+\\+|--|}|\\*\\/)|((?<=^return|[^\\._$[:alnum:]]return|^case|[^\\._$[:alnum:]]case))\\s*)\\/(?![\\/*])(?=(?:[^\\/\\\\\\[]|\\\\.|\\[([^\\]\\\\]|\\\\.)*\\])+\\/([gimsuy]+|(?![\\/\\*])|(?=\\/\\*))(?!\\s*[a-zA-Z0-9_$]))",beginCaptures:{0:{name:"punctuation.definition.string.begin.tsx"}},end:"(/)([gimsuy]*)",endCaptures:{1:{name:"punctuation.definition.string.end.tsx"},2:{name:"keyword.other.tsx"}},patterns:[{include:"#regexp"}]}]},regexp:{patterns:[{name:"keyword.control.anchor.regexp",match:"\\\\[bB]|\\^|\\$"},{match:"\\\\[1-9]\\d*|\\\\k<([a-zA-Z_$][\\w$]*)>",captures:{0:{name:"keyword.other.back-reference.regexp"},1:{name:"variable.other.regexp"}}},{name:"keyword.operator.quantifier.regexp",match:"[?+*]|\\{(\\d+,\\d+|\\d+,|,\\d+|\\d+)\\}\\??"},{name:"keyword.operator.or.regexp",match:"\\|"},{name:"meta.group.assertion.regexp",begin:"(\\()((\\?=)|(\\?!)|(\\?<=)|(\\?<!))",beginCaptures:{1:{name:"punctuation.definition.group.regexp"},2:{name:"punctuation.definition.group.assertion.regexp"},3:{name:"meta.assertion.look-ahead.regexp"},4:{name:"meta.assertion.negative-look-ahead.regexp"},5:{name:"meta.assertion.look-behind.regexp"},6:{name:"meta.assertion.negative-look-behind.regexp"}},end:"(\\))",endCaptures:{1:{name:"punctuation.definition.group.regexp"}},patterns:[{include:"#regexp"}]},{name:"meta.group.regexp",begin:"\\((?:(\\?:)|(?:\\?<([a-zA-Z_$][\\w$]*)>))?",beginCaptures:{0:{name:"punctuation.definition.group.regexp"},1:{name:"punctuation.definition.group.no-capture.regexp"},2:{name:"variable.other.regexp"}},end:"\\)",endCaptures:{0:{name:"punctuation.definition.group.regexp"}},patterns:[{include:"#regexp"}]},{name:"constant.other.character-class.set.regexp",begin:"(\\[)(\\^)?",beginCaptures:{1:{name:"punctuation.definition.character-class.regexp"},2:{name:"keyword.operator.negation.regexp"}},end:"(\\])",endCaptures:{1:{name:"punctuation.definition.character-class.regexp"}},patterns:[{name:"constant.other.character-class.range.regexp",match:"(?:.|(\\\\(?:[0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}))|(\\\\c[A-Z])|(\\\\.))\\-(?:[^\\]\\\\]|(\\\\(?:[0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}))|(\\\\c[A-Z])|(\\\\.))",captures:{1:{name:"constant.character.numeric.regexp"},2:{name:"constant.character.control.regexp"},3:{name:"constant.character.escape.backslash.regexp"},4:{name:"constant.character.numeric.regexp"},5:{name:"constant.character.control.regexp"},6:{name:"constant.character.escape.backslash.regexp"}}},{include:"#regex-character-class"}]},{include:"#regex-character-class"}]},"regex-character-class":{patterns:[{name:"constant.other.character-class.regexp",match:"\\\\[wWsSdDtrnvf]|\\."},{name:"constant.character.numeric.regexp",match:"\\\\([0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4})"},{name:"constant.character.control.regexp",match:"\\\\c[A-Z]"},{name:"constant.character.escape.backslash.regexp",match:"\\\\."}]},comment:{patterns:[{name:"comment.block.documentation.tsx",begin:"/\\*\\*(?!/)",beginCaptures:{0:{name:"punctuation.definition.comment.tsx"}},end:"\\*/",endCaptures:{0:{name:"punctuation.definition.comment.tsx"}},patterns:[{include:"#docblock"}]},{name:"comment.block.tsx",begin:"(/\\*)(?:\\s*((@)internal)(?=\\s|(\\*/)))?",beginCaptures:{1:{name:"punctuation.definition.comment.tsx"},2:{name:"storage.type.internaldeclaration.tsx"},3:{name:"punctuation.decorator.internaldeclaration.tsx"}},end:"\\*/",endCaptures:{0:{name:"punctuation.definition.comment.tsx"}}},{begin:"(^[ \\t]+)?((//)(?:\\s*((@)internal)(?=\\s|$))?)",beginCaptures:{1:{name:"punctuation.whitespace.comment.leading.tsx"},2:{name:"comment.line.double-slash.tsx"},3:{name:"punctuation.definition.comment.tsx"},4:{name:"storage.type.internaldeclaration.tsx"},5:{name:"punctuation.decorator.internaldeclaration.tsx"}},end:"(?=$)",contentName:"comment.line.double-slash.tsx"}]},"single-line-comment-consuming-line-ending":{begin:"(^[ \\t]+)?((//)(?:\\s*((@)internal)(?=\\s|$))?)",beginCaptures:{1:{name:"punctuation.whitespace.comment.leading.tsx"},2:{name:"comment.line.double-slash.tsx"},3:{name:"punctuation.definition.comment.tsx"},4:{name:"storage.type.internaldeclaration.tsx"},5:{name:"punctuation.decorator.internaldeclaration.tsx"}},end:"(?=^)",contentName:"comment.line.double-slash.tsx"},directives:{name:"comment.line.triple-slash.directive.tsx",begin:"^(///)\\s*(?=<(reference|amd-dependency|amd-module)(\\s+(path|types|no-default-lib|lib|name)\\s*=\\s*((\\'([^\\'\\\\]|\\\\.)*\\')|(\\\"([^\\\"\\\\]|\\\\.)*\\\")|(\\`([^\\`\\\\]|\\\\.)*\\`)))+\\s*/>\\s*$)",beginCaptures:{1:{name:"punctuation.definition.comment.tsx"}},end:"(?=$)",patterns:[{name:"meta.tag.tsx",begin:"(<)(reference|amd-dependency|amd-module)",beginCaptures:{1:{name:"punctuation.definition.tag.directive.tsx"},2:{name:"entity.name.tag.directive.tsx"}},end:"/>",endCaptures:{0:{name:"punctuation.definition.tag.directive.tsx"}},patterns:[{name:"entity.other.attribute-name.directive.tsx",match:"path|types|no-default-lib|lib|name"},{name:"keyword.operator.assignment.tsx",match:"="},{include:"#string"}]}]},docblock:{patterns:[{match:`(?x)
((@)(?:access|api))
\\s+
(private|protected|public)
\\b`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"constant.language.access-type.jsdoc"}}},{match:`(?x)
((@)author)
\\s+
(
  [^@\\s<>*/]
  (?:[^@<>*/]|\\*[^/])*
)
(?:
  \\s*
  (<)
  ([^>\\s]+)
  (>)
)?`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"entity.name.type.instance.jsdoc"},4:{name:"punctuation.definition.bracket.angle.begin.jsdoc"},5:{name:"constant.other.email.link.underline.jsdoc"},6:{name:"punctuation.definition.bracket.angle.end.jsdoc"}}},{match:`(?x)
((@)borrows) \\s+
((?:[^@\\s*/]|\\*[^/])+)    # <that namepath>
\\s+ (as) \\s+              # as
((?:[^@\\s*/]|\\*[^/])+)    # <this namepath>`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"entity.name.type.instance.jsdoc"},4:{name:"keyword.operator.control.jsdoc"},5:{name:"entity.name.type.instance.jsdoc"}}},{name:"meta.example.jsdoc",begin:"((@)example)\\s+",end:"(?=@|\\*/)",beginCaptures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"}},patterns:[{match:"^\\s\\*\\s+"},{contentName:"constant.other.description.jsdoc",begin:"\\G(<)caption(>)",beginCaptures:{0:{name:"entity.name.tag.inline.jsdoc"},1:{name:"punctuation.definition.bracket.angle.begin.jsdoc"},2:{name:"punctuation.definition.bracket.angle.end.jsdoc"}},end:"(</)caption(>)|(?=\\*/)",endCaptures:{0:{name:"entity.name.tag.inline.jsdoc"},1:{name:"punctuation.definition.bracket.angle.begin.jsdoc"},2:{name:"punctuation.definition.bracket.angle.end.jsdoc"}}},{match:"[^\\s@*](?:[^*]|\\*[^/])*",captures:{0:{name:"source.embedded.tsx"}}}]},{match:"(?x) ((@)kind) \\s+ (class|constant|event|external|file|function|member|mixin|module|namespace|typedef) \\b",captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"constant.language.symbol-type.jsdoc"}}},{match:`(?x)
((@)see)
\\s+
(?:
  # URL
  (
    (?=https?://)
    (?:[^\\s*]|\\*[^/])+
  )
  |
  # JSDoc namepath
  (
    (?!
      # Avoid matching bare URIs (also acceptable as links)
      https?://
      |
      # Avoid matching {@inline tags}; we match those below
      (?:\\[[^\\[\\]]*\\])? # Possible description [preceding]{@tag}
      {@(?:link|linkcode|linkplain|tutorial)\\b
    )
    # Matched namepath
    (?:[^@\\s*/]|\\*[^/])+
  )
)`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"variable.other.link.underline.jsdoc"},4:{name:"entity.name.type.instance.jsdoc"}}},{match:`(?x)
((@)template)
\\s+
# One or more valid identifiers
(
  [A-Za-z_$]         # First character: non-numeric word character
  [\\w$.\\[\\]]*        # Rest of identifier
  (?:                # Possible list of additional identifiers
    \\s* , \\s*
    [A-Za-z_$]
    [\\w$.\\[\\]]*
  )*
)`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"variable.other.jsdoc"}}},{match:`(?x)
(
  (@)
  (?:arg|argument|const|constant|member|namespace|param|var)
)
\\s+
(
  [A-Za-z_$]
  [\\w$.\\[\\]]*
)`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"variable.other.jsdoc"}}},{begin:"((@)typedef)\\s+(?={)",beginCaptures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"}},end:"(?=\\s|\\*/|[^{}\\[\\]A-Za-z_$])",patterns:[{include:"#jsdoctype"},{name:"entity.name.type.instance.jsdoc",match:"(?:[^@\\s*/]|\\*[^/])+"}]},{begin:"((@)(?:arg|argument|const|constant|member|namespace|param|prop|property|var))\\s+(?={)",beginCaptures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"}},end:"(?=\\s|\\*/|[^{}\\[\\]A-Za-z_$])",patterns:[{include:"#jsdoctype"},{name:"variable.other.jsdoc",match:"([A-Za-z_$][\\w$.\\[\\]]*)"},{name:"variable.other.jsdoc",match:`(?x)
(\\[)\\s*
[\\w$]+
(?:
  (?:\\[\\])?                                        # Foo[ ].bar properties within an array
  \\.                                                # Foo.Bar namespaced parameter
  [\\w$]+
)*
(?:
  \\s*
  (=)                                                # [foo=bar] Default parameter value
  \\s*
  (
    # The inner regexes are to stop the match early at */ and to not stop at escaped quotes
    (?>
      "(?:(?:\\*(?!/))|(?:\\\\(?!"))|[^*\\\\])*?" |                      # [foo="bar"] Double-quoted
      '(?:(?:\\*(?!/))|(?:\\\\(?!'))|[^*\\\\])*?' |                      # [foo='bar'] Single-quoted
      \\[ (?:(?:\\*(?!/))|[^*])*? \\] |                                # [foo=[1,2]] Array literal
      (?:(?:\\*(?!/))|\\s(?!\\s*\\])|\\[.*?(?:\\]|(?=\\*/))|[^*\\s\\[\\]])*   # Everything else
    )*
  )
)?
\\s*(?:(\\])((?:[^*\\s]|\\*[^\\s/])+)?|(?=\\*/))`,captures:{1:{name:"punctuation.definition.optional-value.begin.bracket.square.jsdoc"},2:{name:"keyword.operator.assignment.jsdoc"},3:{name:"source.embedded.tsx"},4:{name:"punctuation.definition.optional-value.end.bracket.square.jsdoc"},5:{name:"invalid.illegal.syntax.jsdoc"}}}]},{begin:`(?x)
(
  (@)
  (?:define|enum|exception|export|extends|lends|implements|modifies
  |namespace|private|protected|returns?|suppress|this|throws|type
  |yields?)
)
\\s+(?={)`,beginCaptures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"}},end:"(?=\\s|\\*/|[^{}\\[\\]A-Za-z_$])",patterns:[{include:"#jsdoctype"}]},{match:`(?x)
(
  (@)
  (?:alias|augments|callback|constructs|emits|event|fires|exports?
  |extends|external|function|func|host|lends|listens|interface|memberof!?
  |method|module|mixes|mixin|name|requires|see|this|typedef|uses)
)
\\s+
(
  (?:
    [^{}@\\s*] | \\*[^/]
  )+
)`,captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"entity.name.type.instance.jsdoc"}}},{contentName:"variable.other.jsdoc",begin:`((@)(?:default(?:value)?|license|version))\\s+(([''"]))`,beginCaptures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"variable.other.jsdoc"},4:{name:"punctuation.definition.string.begin.jsdoc"}},end:"(\\3)|(?=$|\\*/)",endCaptures:{0:{name:"variable.other.jsdoc"},1:{name:"punctuation.definition.string.end.jsdoc"}}},{match:"((@)(?:default(?:value)?|license|tutorial|variation|version))\\s+([^\\s*]+)",captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"},3:{name:"variable.other.jsdoc"}}},{name:"storage.type.class.jsdoc",match:"(?x) (@) (?:abstract|access|alias|api|arg|argument|async|attribute|augments|author|beta|borrows|bubbles |callback|chainable|class|classdesc|code|config|const|constant|constructor|constructs|copyright |default|defaultvalue|define|deprecated|desc|description|dict|emits|enum|event|example|exception |exports?|extends|extension(?:_?for)?|external|externs|file|fileoverview|final|fires|for|func |function|generator|global|hideconstructor|host|ignore|implements|implicitCast|inherit[Dd]oc |inner|instance|interface|internal|kind|lends|license|listens|main|member|memberof!?|method |mixes|mixins?|modifies|module|name|namespace|noalias|nocollapse|nocompile|nosideeffects |override|overview|package|param|polymer(?:Behavior)?|preserve|private|prop|property|protected |public|read[Oo]nly|record|require[ds]|returns?|see|since|static|struct|submodule|summary |suppress|template|this|throws|todo|tutorial|type|typedef|unrestricted|uses|var|variation |version|virtual|writeOnce|yields?) \\b",captures:{1:{name:"punctuation.definition.block.tag.jsdoc"}}},{include:"#inline-tags"},{match:"((@)(?:[_$[:alpha:]][_$[:alnum:]]*))(?=\\s+)",captures:{1:{name:"storage.type.class.jsdoc"},2:{name:"punctuation.definition.block.tag.jsdoc"}}}]},brackets:{patterns:[{begin:"{",end:"}|(?=\\*/)",patterns:[{include:"#brackets"}]},{begin:"\\[",end:"\\]|(?=\\*/)",patterns:[{include:"#brackets"}]}]},"inline-tags":{patterns:[{name:"constant.other.description.jsdoc",match:"(\\[)[^\\]]+(\\])(?={@(?:link|linkcode|linkplain|tutorial))",captures:{1:{name:"punctuation.definition.bracket.square.begin.jsdoc"},2:{name:"punctuation.definition.bracket.square.end.jsdoc"}}},{name:"entity.name.type.instance.jsdoc",begin:"({)((@)(?:link(?:code|plain)?|tutorial))\\s*",beginCaptures:{1:{name:"punctuation.definition.bracket.curly.begin.jsdoc"},2:{name:"storage.type.class.jsdoc"},3:{name:"punctuation.definition.inline.tag.jsdoc"}},end:"}|(?=\\*/)",endCaptures:{0:{name:"punctuation.definition.bracket.curly.end.jsdoc"}},patterns:[{match:"\\G((?=https?://)(?:[^|}\\s*]|\\*[/])+)(\\|)?",captures:{1:{name:"variable.other.link.underline.jsdoc"},2:{name:"punctuation.separator.pipe.jsdoc"}}},{match:"\\G((?:[^{}@\\s|*]|\\*[^/])+)(\\|)?",captures:{1:{name:"variable.other.description.jsdoc"},2:{name:"punctuation.separator.pipe.jsdoc"}}}]}]},jsdoctype:{patterns:[{contentName:"entity.name.type.instance.jsdoc",begin:"\\G({)",beginCaptures:{0:{name:"entity.name.type.instance.jsdoc"},1:{name:"punctuation.definition.bracket.curly.begin.jsdoc"}},end:"((}))\\s*|(?=\\*/)",endCaptures:{1:{name:"entity.name.type.instance.jsdoc"},2:{name:"punctuation.definition.bracket.curly.end.jsdoc"}},patterns:[{include:"#brackets"}]}]},jsx:{patterns:[{include:"#jsx-tag-without-attributes-in-expression"},{include:"#jsx-tag-in-expression"}]},"jsx-tag-without-attributes-in-expression":{begin:"(?<!\\+\\+|--)(?<=[({\\[,?=>:*]|&&|\\|\\||\\?|\\*\\/|^await|[^\\._$[:alnum:]]await|^return|[^\\._$[:alnum:]]return|^default|[^\\._$[:alnum:]]default|^yield|[^\\._$[:alnum:]]yield|^)\\s*(?=(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))?\\s*(>))",end:"(?!(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))?\\s*(>))",patterns:[{include:"#jsx-tag-without-attributes"}]},"jsx-tag-without-attributes":{name:"meta.tag.without-attributes.tsx",begin:"(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))?\\s*(>)",end:"(</)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))?\\s*(>)",beginCaptures:{1:{name:"punctuation.definition.tag.begin.tsx"},2:{name:"entity.name.tag.namespace.tsx"},3:{name:"punctuation.separator.namespace.tsx"},4:{name:"entity.name.tag.tsx"},5:{name:"support.class.component.tsx"},6:{name:"punctuation.definition.tag.end.tsx"}},endCaptures:{1:{name:"punctuation.definition.tag.begin.tsx"},2:{name:"entity.name.tag.namespace.tsx"},3:{name:"punctuation.separator.namespace.tsx"},4:{name:"entity.name.tag.tsx"},5:{name:"support.class.component.tsx"},6:{name:"punctuation.definition.tag.end.tsx"}},contentName:"meta.jsx.children.tsx",patterns:[{include:"#jsx-children"}]},"jsx-tag-in-expression":{begin:`(?x)
  (?<!\\+\\+|--)(?<=[({\\[,?=>:*]|&&|\\|\\||\\?|\\*\\/|^await|[^\\._$[:alnum:]]await|^return|[^\\._$[:alnum:]]return|^default|[^\\._$[:alnum:]]default|^yield|[^\\._$[:alnum:]]yield|^)\\s*
  (?!<\\s*[_$[:alpha:]][_$[:alnum:]]*((\\s+extends\\s+[^=>])|,)) # look ahead is not type parameter of arrow
  (?=(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))(?=((<\\s*)|(\\s+))(?!\\?)|\\/?>))`,end:"(?!(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))(?=((<\\s*)|(\\s+))(?!\\?)|\\/?>))",patterns:[{include:"#jsx-tag"}]},"jsx-tag":{name:"meta.tag.tsx",begin:"(?=(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))(?=((<\\s*)|(\\s+))(?!\\?)|\\/?>))",end:"(/>)|(?:(</)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))?\\s*(>))",endCaptures:{1:{name:"punctuation.definition.tag.end.tsx"},2:{name:"punctuation.definition.tag.begin.tsx"},3:{name:"entity.name.tag.namespace.tsx"},4:{name:"punctuation.separator.namespace.tsx"},5:{name:"entity.name.tag.tsx"},6:{name:"support.class.component.tsx"},7:{name:"punctuation.definition.tag.end.tsx"}},patterns:[{begin:"(<)\\s*(?:([_$[:alpha:]][-_$[:alnum:].]*)(?<!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$[:alpha:]][-_$[:alnum:].]*))(?<!\\.|-))(?=((<\\s*)|(\\s+))(?!\\?)|\\/?>)",beginCaptures:{1:{name:"punctuation.definition.tag.begin.tsx"},2:{name:"entity.name.tag.namespace.tsx"},3:{name:"punctuation.separator.namespace.tsx"},4:{name:"entity.name.tag.tsx"},5:{name:"support.class.component.tsx"}},end:"(?=[/]?>)",patterns:[{include:"#comment"},{include:"#type-arguments"},{include:"#jsx-tag-attributes"}]},{begin:"(>)",beginCaptures:{1:{name:"punctuation.definition.tag.end.tsx"}},end:"(?=</)",contentName:"meta.jsx.children.tsx",patterns:[{include:"#jsx-children"}]}]},"jsx-children":{patterns:[{include:"#jsx-tag-without-attributes"},{include:"#jsx-tag"},{include:"#jsx-evaluated-code"},{include:"#jsx-entities"}]},"jsx-evaluated-code":{contentName:"meta.embedded.expression.tsx",begin:"\\{",end:"\\}",beginCaptures:{0:{name:"punctuation.section.embedded.begin.tsx"}},endCaptures:{0:{name:"punctuation.section.embedded.end.tsx"}},patterns:[{include:"#expression"}]},"jsx-entities":{patterns:[{name:"constant.character.entity.tsx",match:"(&)([a-zA-Z0-9]+|#[0-9]+|#x[0-9a-fA-F]+)(;)",captures:{1:{name:"punctuation.definition.entity.tsx"},3:{name:"punctuation.definition.entity.tsx"}}},{name:"invalid.illegal.bad-ampersand.tsx",match:"&"}]},"jsx-tag-attributes":{name:"meta.tag.attributes.tsx",begin:"\\s+",end:"(?=[/]?>)",patterns:[{include:"#comment"},{include:"#jsx-tag-attribute-name"},{include:"#jsx-tag-attribute-assignment"},{include:"#jsx-string-double-quoted"},{include:"#jsx-string-single-quoted"},{include:"#jsx-evaluated-code"},{include:"#jsx-tag-attributes-illegal"}]},"jsx-tag-attribute-name":{match:`(?x)
  \\s*
  (?:([_$[:alpha:]][-_$[:alnum:].]*)(:))?
  ([_$[:alpha:]][-_$[:alnum:]]*)
  (?=\\s|=|/?>|/\\*|//)`,captures:{1:{name:"entity.other.attribute-name.namespace.tsx"},2:{name:"punctuation.separator.namespace.tsx"},3:{name:"entity.other.attribute-name.tsx"}}},"jsx-tag-attribute-assignment":{name:"keyword.operator.assignment.tsx",match:`=(?=\\s*(?:'|"|{|/\\*|//|\\n))`},"jsx-string-double-quoted":{name:"string.quoted.double.tsx",begin:'"',end:'"',beginCaptures:{0:{name:"punctuation.definition.string.begin.tsx"}},endCaptures:{0:{name:"punctuation.definition.string.end.tsx"}},patterns:[{include:"#jsx-entities"}]},"jsx-string-single-quoted":{name:"string.quoted.single.tsx",begin:"'",end:"'",beginCaptures:{0:{name:"punctuation.definition.string.begin.tsx"}},endCaptures:{0:{name:"punctuation.definition.string.end.tsx"}},patterns:[{include:"#jsx-entities"}]},"jsx-tag-attributes-illegal":{name:"invalid.illegal.attribute.tsx",match:"\\S+"}},Pme={information_for_contributors:Ame,version:Ime,name:Nme,scopeName:Mme,patterns:Rme,repository:Ome},Fme=["This file has been converted from https://github.com/atom/language-css/blob/master/grammars/css.cson","If you want to provide a fix or improvement, please create a pull request against the original repository.","Once accepted there, we are happy to receive an update request."],Bme="https://github.com/atom/language-css/commit/339e9600ce4e024fa97a711d6330e3b5344fcbdc",Wme="CSS",Vme="source.css",Hme=[{include:"#comment-block"},{include:"#escapes"},{include:"#combinators"},{include:"#selector"},{include:"#at-rules"},{include:"#rule-list"}],Ume={"at-rules":{patterns:[{begin:"\\A(?:\\xEF\\xBB\\xBF)?(?i:(?=\\s*@charset\\b))",end:";|(?=$)",endCaptures:{0:{name:"punctuation.terminator.rule.css"}},name:"meta.at-rule.charset.css",patterns:[{captures:{1:{name:"invalid.illegal.not-lowercase.charset.css"},2:{name:"invalid.illegal.leading-whitespace.charset.css"},3:{name:"invalid.illegal.no-whitespace.charset.css"},4:{name:"invalid.illegal.whitespace.charset.css"},5:{name:"invalid.illegal.not-double-quoted.charset.css"},6:{name:"invalid.illegal.unclosed-string.charset.css"},7:{name:"invalid.illegal.unexpected-characters.charset.css"}},match:`(?x)        # Possible errors:
\\G
((?!@charset)@\\w+)   # Not lowercase (@charset is case-sensitive)
|
\\G(\\s+)             # Preceding whitespace
|
(@charset\\S[^;]*)    # No whitespace after @charset
|
(?<=@charset)         # Before quoted charset name
(\\x20{2,}|\\t+)      # More than one space used, or a tab
|
(?<=@charset\\x20)    # Beginning of charset name
([^";]+)              # Not double-quoted
|
("[^"]+$)             # Unclosed quote
|
(?<=")                # After charset name
([^;]+)               # Unexpected junk instead of semicolon`},{captures:{1:{name:"keyword.control.at-rule.charset.css"},2:{name:"punctuation.definition.keyword.css"}},match:"((@)charset)(?=\\s)"},{begin:'"',beginCaptures:{0:{name:"punctuation.definition.string.begin.css"}},end:'"|$',endCaptures:{0:{name:"punctuation.definition.string.end.css"}},name:"string.quoted.double.css",patterns:[{begin:'(?:\\G|^)(?=(?:[^"])+$)',end:"$",name:"invalid.illegal.unclosed.string.css"}]}]},{begin:`(?i)((@)import)(?:\\s+|$|(?=['"]|/\\*))`,beginCaptures:{1:{name:"keyword.control.at-rule.import.css"},2:{name:"punctuation.definition.keyword.css"}},end:";",endCaptures:{0:{name:"punctuation.terminator.rule.css"}},name:"meta.at-rule.import.css",patterns:[{begin:"\\G\\s*(?=/\\*)",end:"(?<=\\*/)\\s*",patterns:[{include:"#comment-block"}]},{include:"#string"},{include:"#url"},{include:"#media-query-list"}]},{begin:"(?i)((@)font-face)(?=\\s*|{|/\\*|$)",beginCaptures:{1:{name:"keyword.control.at-rule.font-face.css"},2:{name:"punctuation.definition.keyword.css"}},end:"(?!\\G)",name:"meta.at-rule.font-face.css",patterns:[{include:"#comment-block"},{include:"#escapes"},{include:"#rule-list"}]},{begin:"(?i)(@)page(?=[\\s:{]|/\\*|$)",captures:{0:{name:"keyword.control.at-rule.page.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*($|[:{;]))",name:"meta.at-rule.page.css",patterns:[{include:"#rule-list"}]},{begin:"(?i)(?=@media(\\s|\\(|/\\*|$))",end:"(?<=})(?!\\G)",patterns:[{begin:"(?i)\\G(@)media",beginCaptures:{0:{name:"keyword.control.at-rule.media.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*[{;])",name:"meta.at-rule.media.header.css",patterns:[{include:"#media-query-list"}]},{begin:"{",beginCaptures:{0:{name:"punctuation.section.media.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.media.end.bracket.curly.css"}},name:"meta.at-rule.media.body.css",patterns:[{include:"$self"}]}]},{begin:`(?i)(?=@counter-style([\\s'"{;]|/\\*|$))`,end:"(?<=})(?!\\G)",patterns:[{begin:"(?i)\\G(@)counter-style",beginCaptures:{0:{name:"keyword.control.at-rule.counter-style.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*{)",name:"meta.at-rule.counter-style.header.css",patterns:[{include:"#comment-block"},{include:"#escapes"},{captures:{0:{patterns:[{include:"#escapes"}]}},match:`(?x)
(?:[-a-zA-Z_]    | [^\\x00-\\x7F])     # First letter
(?:[-a-zA-Z0-9_] | [^\\x00-\\x7F]      # Remainder of identifier
  |\\\\(?:[0-9a-fA-F]{1,6}|.)
)*`,name:"variable.parameter.style-name.css"}]},{begin:"{",beginCaptures:{0:{name:"punctuation.section.property-list.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.property-list.end.bracket.curly.css"}},name:"meta.at-rule.counter-style.body.css",patterns:[{include:"#comment-block"},{include:"#escapes"},{include:"#rule-list-innards"}]}]},{begin:`(?i)(?=@document([\\s'"{;]|/\\*|$))`,end:"(?<=})(?!\\G)",patterns:[{begin:"(?i)\\G(@)document",beginCaptures:{0:{name:"keyword.control.at-rule.document.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*[{;])",name:"meta.at-rule.document.header.css",patterns:[{begin:"(?i)(?<![\\w-])(url-prefix|domain|regexp)(\\()",beginCaptures:{1:{name:"support.function.document-rule.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.document-rule.css",patterns:[{include:"#string"},{include:"#comment-block"},{include:"#escapes"},{match:`[^'")\\s]+`,name:"variable.parameter.document-rule.css"}]},{include:"#url"},{include:"#commas"},{include:"#comment-block"},{include:"#escapes"}]},{begin:"{",beginCaptures:{0:{name:"punctuation.section.document.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.document.end.bracket.curly.css"}},name:"meta.at-rule.document.body.css",patterns:[{include:"$self"}]}]},{begin:`(?i)(?=@(?:-(?:webkit|moz|o|ms)-)?keyframes([\\s'"{;]|/\\*|$))`,end:"(?<=})(?!\\G)",patterns:[{begin:"(?i)\\G(@)(?:-(?:webkit|moz|o|ms)-)?keyframes",beginCaptures:{0:{name:"keyword.control.at-rule.keyframes.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*{)",name:"meta.at-rule.keyframes.header.css",patterns:[{include:"#comment-block"},{include:"#escapes"},{captures:{0:{patterns:[{include:"#escapes"}]}},match:`(?x)
(?:[-a-zA-Z_]    | [^\\x00-\\x7F])     # First letter
(?:[-a-zA-Z0-9_] | [^\\x00-\\x7F]      # Remainder of identifier
  |\\\\(?:[0-9a-fA-F]{1,6}|.)
)*`,name:"variable.parameter.keyframe-list.css"}]},{begin:"{",beginCaptures:{0:{name:"punctuation.section.keyframes.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.keyframes.end.bracket.curly.css"}},name:"meta.at-rule.keyframes.body.css",patterns:[{include:"#comment-block"},{include:"#escapes"},{captures:{1:{name:"entity.other.keyframe-offset.css"},2:{name:"entity.other.keyframe-offset.percentage.css"}},match:`(?xi)
(?<![\\w-]) (from|to) (?![\\w-])         # Keywords for 0% | 100%
|
([-+]?(?:\\d+(?:\\.\\d+)?|\\.\\d+)%)     # Percentile value`},{include:"#rule-list"}]}]},{begin:"(?i)(?=@supports(\\s|\\(|/\\*|$))",end:"(?<=})(?!\\G)|(?=;)",patterns:[{begin:"(?i)\\G(@)supports",beginCaptures:{0:{name:"keyword.control.at-rule.supports.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*[{;])",name:"meta.at-rule.supports.header.css",patterns:[{include:"#feature-query-operators"},{include:"#feature-query"},{include:"#comment-block"},{include:"#escapes"}]},{begin:"{",beginCaptures:{0:{name:"punctuation.section.supports.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.supports.end.bracket.curly.css"}},name:"meta.at-rule.supports.body.css",patterns:[{include:"$self"}]}]},{begin:`(?i)((@)viewport)(?=[\\s'"{;]|/\\*|$)`,beginCaptures:{1:{name:"keyword.control.at-rule.viewport.css"},2:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*[@{;])",name:"meta.at-rule.viewport.css",patterns:[{include:"#comment-block"},{include:"#escapes"}]},{begin:`(?i)((@)font-feature-values)(?=[\\s'"{;]|/\\*|$)\\s*`,beginCaptures:{1:{name:"keyword.control.at-rule.font-feature-values.css"},2:{name:"punctuation.definition.keyword.css"}},contentName:"variable.parameter.font-name.css",end:"(?=\\s*[@{;])",name:"meta.at-rule.font-features.css",patterns:[{include:"#comment-block"},{include:"#escapes"}]},{include:"#font-features"},{begin:`(?i)((@)namespace)(?=[\\s'";]|/\\*|$)`,beginCaptures:{1:{name:"keyword.control.at-rule.namespace.css"},2:{name:"punctuation.definition.keyword.css"}},end:";|(?=[@{])",endCaptures:{0:{name:"punctuation.terminator.rule.css"}},name:"meta.at-rule.namespace.css",patterns:[{include:"#url"},{captures:{1:{patterns:[{include:"#comment-block"}]},2:{name:"entity.name.function.namespace-prefix.css",patterns:[{include:"#escapes"}]}},match:`(?xi)
(?:\\G|^|(?<=\\s))
(?=
  (?<=\\s|^)                             # Starts with whitespace
  (?:[-a-zA-Z_]|[^\\x00-\\x7F])          # Then a valid identifier character
  |
  \\s*                                   # Possible adjoining whitespace
  /\\*(?:[^*]|\\*[^/])*\\*/              # Injected comment
)
(.*?)                                    # Grouped to embed #comment-block
(
  (?:[-a-zA-Z_]    | [^\\x00-\\x7F])     # First letter
  (?:[-a-zA-Z0-9_] | [^\\x00-\\x7F]      # Remainder of identifier
    |\\\\(?:[0-9a-fA-F]{1,6}|.)
  )*
)`},{include:"#comment-block"},{include:"#escapes"},{include:"#string"}]},{begin:"(?i)(?=@[\\w-]+[^;]+;s*$)",end:"(?<=;)(?!\\G)",patterns:[{begin:"(?i)\\G(@)[\\w-]+",beginCaptures:{0:{name:"keyword.control.at-rule.css"},1:{name:"punctuation.definition.keyword.css"}},end:";",endCaptures:{0:{name:"punctuation.terminator.rule.css"}},name:"meta.at-rule.header.css"}]},{begin:"(?i)(?=@[\\w-]+(\\s|\\(|{|/\\*|$))",end:"(?<=})(?!\\G)",patterns:[{begin:"(?i)\\G(@)[\\w-]+",beginCaptures:{0:{name:"keyword.control.at-rule.css"},1:{name:"punctuation.definition.keyword.css"}},end:"(?=\\s*[{;])",name:"meta.at-rule.header.css"},{begin:"{",beginCaptures:{0:{name:"punctuation.section.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.end.bracket.curly.css"}},name:"meta.at-rule.body.css",patterns:[{include:"$self"}]}]}]},"color-keywords":{patterns:[{match:"(?i)(?<![\\w-])(aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)(?![\\w-])",name:"support.constant.color.w3c-standard-color-name.css"},{match:`(?xi) (?<![\\w-])
(aliceblue|antiquewhite|aquamarine|azure|beige|bisque|blanchedalmond|blueviolet|brown|burlywood
|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan
|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange
|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise
|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen
|gainsboro|ghostwhite|gold|goldenrod|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki
|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow
|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray
|lightslategrey|lightsteelblue|lightyellow|limegreen|linen|magenta|mediumaquamarine|mediumblue
|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise
|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|oldlace|olivedrab|orangered
|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum
|powderblue|rebeccapurple|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell
|sienna|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|thistle|tomato
|transparent|turquoise|violet|wheat|whitesmoke|yellowgreen)
(?![\\w-])`,name:"support.constant.color.w3c-extended-color-name.css"},{match:"(?i)(?<![\\w-])currentColor(?![\\w-])",name:"support.constant.color.current.css"},{match:`(?xi) (?<![\\w-])
(ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow
|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption
|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow
|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText)
(?![\\w-])`,name:"invalid.deprecated.color.system.css"}]},combinators:{patterns:[{match:"/deep/|>>>",name:"invalid.deprecated.combinator.css"},{match:">>|>|\\+|~",name:"keyword.operator.combinator.css"}]},commas:{match:",",name:"punctuation.separator.list.comma.css"},"comment-block":{begin:"/\\*",beginCaptures:{0:{name:"punctuation.definition.comment.begin.css"}},end:"\\*/",endCaptures:{0:{name:"punctuation.definition.comment.end.css"}},name:"comment.block.css"},escapes:{patterns:[{match:"\\\\[0-9a-fA-F]{1,6}",name:"constant.character.escape.codepoint.css"},{begin:"\\\\$\\s*",end:"^(?<!\\G)",name:"constant.character.escape.newline.css"},{match:"\\\\.",name:"constant.character.escape.css"}]},"feature-query":{begin:"\\(",beginCaptures:{0:{name:"punctuation.definition.condition.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.definition.condition.end.bracket.round.css"}},name:"meta.feature-query.css",patterns:[{include:"#feature-query-operators"},{include:"#feature-query"}]},"feature-query-operators":{patterns:[{match:"(?i)(?<=[\\s()]|^|\\*/)(and|not|or)(?=[\\s()]|/\\*|$)",name:"keyword.operator.logical.feature.$1.css"},{include:"#rule-list-innards"}]},"font-features":{begin:`(?xi)
((@)(annotation|character-variant|ornaments|styleset|stylistic|swash))
(?=[\\s@'"{;]|/\\*|$)`,beginCaptures:{1:{name:"keyword.control.at-rule.${3:/downcase}.css"},2:{name:"punctuation.definition.keyword.css"}},end:"(?<=})",name:"meta.at-rule.${3:/downcase}.css",patterns:[{begin:"{",beginCaptures:{0:{name:"punctuation.section.property-list.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.property-list.end.bracket.curly.css"}},name:"meta.property-list.font-feature.css",patterns:[{captures:{0:{patterns:[{include:"#escapes"}]}},match:`(?x)
(?: [-a-zA-Z_]    | [^\\x00-\\x7F] )   # First letter
(?: [-a-zA-Z0-9_] | [^\\x00-\\x7F]     # Remainder of identifier
  | \\\\(?:[0-9a-fA-F]{1,6}|.)
)*`,name:"variable.font-feature.css"},{include:"#rule-list-innards"}]}]},functions:{patterns:[{begin:"(?i)(?<![\\w-])(calc)(\\()",beginCaptures:{1:{name:"support.function.calc.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.calc.css",patterns:[{match:"[*/]|(?<=\\s|^)[-+](?=\\s|$)",name:"keyword.operator.arithmetic.css"},{include:"#property-values"}]},{begin:"(?i)(?<![\\w-])(rgba?|hsla?)(\\()",beginCaptures:{1:{name:"support.function.misc.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.color.css",patterns:[{include:"#property-values"}]},{begin:`(?xi) (?<![\\w-])
(
  (?:-webkit-|-moz-|-o-)?    # Accept prefixed/historical variants
  (?:repeating-)?            # "Repeating"-type gradient
  (?:linear|radial|conic)    # Shape
  -gradient
)
(\\()`,beginCaptures:{1:{name:"support.function.gradient.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.gradient.css",patterns:[{match:"(?i)(?<![\\w-])(from|to|at)(?![\\w-])",name:"keyword.operator.gradient.css"},{include:"#property-values"}]},{begin:"(?i)(?<![\\w-])(-webkit-gradient)(\\()",beginCaptures:{1:{name:"invalid.deprecated.gradient.function.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.gradient.invalid.deprecated.gradient.css",patterns:[{begin:"(?i)(?<![\\w-])(from|to|color-stop)(\\()",beginCaptures:{1:{name:"invalid.deprecated.function.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},patterns:[{include:"#property-values"}]},{include:"#property-values"}]},{begin:`(?xi) (?<![\\w-])
(annotation|attr|blur|brightness|character-variant|contrast|counters?
|cross-fade|drop-shadow|element|fit-content|format|grayscale|hue-rotate
|image-set|invert|local|minmax|opacity|ornaments|repeat|saturate|sepia
|styleset|stylistic|swash|symbols)
(\\()`,beginCaptures:{1:{name:"support.function.misc.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.misc.css",patterns:[{match:`(?i)(?<=[,\\s"]|\\*/|^)\\d+x(?=[\\s,"')]|/\\*|$)`,name:"constant.numeric.other.density.css"},{include:"#property-values"},{match:`[^'"),\\s]+`,name:"variable.parameter.misc.css"}]},{begin:"(?i)(?<![\\w-])(circle|ellipse|inset|polygon|rect)(\\()",beginCaptures:{1:{name:"support.function.shape.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.shape.css",patterns:[{match:"(?i)(?<=\\s|^|\\*/)(at|round)(?=\\s|/\\*|$)",name:"keyword.operator.shape.css"},{include:"#property-values"}]},{begin:"(?i)(?<![\\w-])(cubic-bezier|steps)(\\()",beginCaptures:{1:{name:"support.function.timing-function.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.timing-function.css",patterns:[{match:"(?i)(?<![\\w-])(start|end)(?=\\s*\\)|$)",name:"support.constant.step-direction.css"},{include:"#property-values"}]},{begin:`(?xi) (?<![\\w-])
( (?:translate|scale|rotate)(?:[XYZ]|3D)?
| matrix(?:3D)?
| skew[XY]?
| perspective
)
(\\()`,beginCaptures:{1:{name:"support.function.transform.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},patterns:[{include:"#property-values"}]},{include:"#url"},{begin:"(?i)(?<![\\w-])(var)(\\()",beginCaptures:{1:{name:"support.function.misc.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.variable.css",patterns:[{name:"variable.argument.css",match:`(?x)
--
(?:[-a-zA-Z_]    | [^\\x00-\\x7F])     # First letter
(?:[-a-zA-Z0-9_] | [^\\x00-\\x7F]      # Remainder of identifier
  |\\\\(?:[0-9a-fA-F]{1,6}|.)
)*`},{include:"#property-values"}]}]},"functional-pseudo-classes":{patterns:[{begin:"(?i)((:)dir)(\\()",beginCaptures:{1:{name:"entity.other.attribute-name.pseudo-class.css"},2:{name:"punctuation.definition.entity.css"},3:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},patterns:[{include:"#comment-block"},{include:"#escapes"},{match:"(?i)(?<![\\w-])(ltr|rtl)(?![\\w-])",name:"support.constant.text-direction.css"},{include:"#property-values"}]},{begin:"(?i)((:)lang)(\\()",beginCaptures:{1:{name:"entity.other.attribute-name.pseudo-class.css"},2:{name:"punctuation.definition.entity.css"},3:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},patterns:[{match:"(?<=[(,\\s])[a-zA-Z]+(-[a-zA-Z0-9]*|\\\\(?:[0-9a-fA-F]{1,6}|.))*(?=[),\\s])",name:"support.constant.language-range.css"},{begin:'"',beginCaptures:{0:{name:"punctuation.definition.string.begin.css"}},end:'"',endCaptures:{0:{name:"punctuation.definition.string.end.css"}},name:"string.quoted.double.css",patterns:[{include:"#escapes"},{match:'(?<=["\\s])[a-zA-Z*]+(-[a-zA-Z0-9*]*)*(?=["\\s])',name:"support.constant.language-range.css"}]},{begin:"'",beginCaptures:{0:{name:"punctuation.definition.string.begin.css"}},end:"'",endCaptures:{0:{name:"punctuation.definition.string.end.css"}},name:"string.quoted.single.css",patterns:[{include:"#escapes"},{match:"(?<=['\\s])[a-zA-Z*]+(-[a-zA-Z0-9*]*)*(?=['\\s])",name:"support.constant.language-range.css"}]},{include:"#commas"}]},{begin:"(?i)((:)(?:not|has|matches))(\\()",beginCaptures:{1:{name:"entity.other.attribute-name.pseudo-class.css"},2:{name:"punctuation.definition.entity.css"},3:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},patterns:[{include:"#selector-innards"}]},{begin:"(?i)((:)nth-(?:last-)?(?:child|of-type))(\\()",beginCaptures:{1:{name:"entity.other.attribute-name.pseudo-class.css"},2:{name:"punctuation.definition.entity.css"},3:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},patterns:[{match:"(?i)[+-]?(\\d+n?|n)(\\s*[+-]\\s*\\d+)?",name:"constant.numeric.css"},{match:"(?i)even|odd",name:"support.constant.parity.css"}]}]},"media-features":{captures:{1:{name:"support.type.property-name.media.css"},2:{name:"support.type.property-name.media.css"},3:{name:"support.type.vendored.property-name.media.css"}},match:`(?xi)
(?<=^|\\s|\\(|\\*/)           # Preceded by whitespace, bracket or comment
(?:
  # Standardised features
  (
    (?:min-|max-)?            # Range features
    (?: height
      | width
      | aspect-ratio
      | color
      | color-index
      | monochrome
      | resolution
    )
    | grid                    # Discrete features
    | scan
    | orientation
    | display-mode
    | hover
  )
  |
  # Deprecated features
  (
    (?:min-|max-)?            # Deprecated in Media Queries 4
    device-
    (?: height
      | width
      | aspect-ratio
    )
  )
  |
  # Vendor extensions
  (
    (?:
      # Spec-compliant syntax
      [-_]
      (?: webkit              # Webkit/Blink
        | apple|khtml         # Webkit aliases
        | epub                # ePub3
        | moz                 # Gecko
        | ms                  # Microsoft
        | o                   # Presto (pre-Opera 15)
        | xv|ah|rim|atsc|     # Less common vendors
          hp|tc|wap|ro
      )
      |
      # Non-standard prefixes
      (?: mso                 # Microsoft Office
        | prince              # YesLogic
      )
    )
    -
    [\\w-]+                   # Feature name
    (?=                       # Terminates correctly
      \\s*                    # Possible whitespace
      (?:                     # Possible injected comment
        /\\*
        (?:[^*]|\\*[^/])*
        \\*/
      )?
      \\s*
      [:)]                    # Ends with a colon or closed bracket
    )
  )
)
(?=\\s|$|[><:=]|\\)|/\\*)     # Terminates cleanly`},"media-feature-keywords":{match:`(?xi)
(?<=^|\\s|:|\\*/)
(?: portrait                  # Orientation
  | landscape
  | progressive               # Scan types
  | interlace
  | fullscreen                # Display modes
  | standalone
  | minimal-ui
  | browser
  | hover
)
(?=\\s|\\)|$)`,name:"support.constant.property-value.css"},"media-query":{begin:"\\G",end:"(?=\\s*[{;])",patterns:[{include:"#comment-block"},{include:"#escapes"},{include:"#media-types"},{match:"(?i)(?<=\\s|^|,|\\*/)(only|not)(?=\\s|{|/\\*|$)",name:"keyword.operator.logical.$1.media.css"},{match:"(?i)(?<=\\s|^|\\*/|\\))and(?=\\s|/\\*|$)",name:"keyword.operator.logical.and.media.css"},{match:",(?:(?:\\s*,)+|(?=\\s*[;){]))",name:"invalid.illegal.comma.css"},{include:"#commas"},{begin:"\\(",beginCaptures:{0:{name:"punctuation.definition.parameters.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.definition.parameters.end.bracket.round.css"}},patterns:[{include:"#media-features"},{include:"#media-feature-keywords"},{match:":",name:"punctuation.separator.key-value.css"},{match:">=|<=|=|<|>",name:"keyword.operator.comparison.css"},{captures:{1:{name:"constant.numeric.css"},2:{name:"keyword.operator.arithmetic.css"},3:{name:"constant.numeric.css"}},match:"(\\d+)\\s*(/)\\s*(\\d+)",name:"meta.ratio.css"},{include:"#numeric-values"},{include:"#comment-block"}]}]},"media-query-list":{begin:"(?=\\s*[^{;])",end:"(?=\\s*[{;])",patterns:[{include:"#media-query"}]},"media-types":{captures:{1:{name:"support.constant.media.css"},2:{name:"invalid.deprecated.constant.media.css"}},match:`(?xi)
(?<=^|\\s|,|\\*/)
(?:
  # Valid media types
  (all|print|screen|speech)
  |
  # Deprecated in Media Queries 4: http://dev.w3.org/csswg/mediaqueries/#media-types
  (aural|braille|embossed|handheld|projection|tty|tv)
)
(?=$|[{,\\s;]|/\\*)`},"numeric-values":{patterns:[{captures:{1:{name:"punctuation.definition.constant.css"}},match:"(#)(?:[0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})\\b",name:"constant.other.color.rgb-value.hex.css"},{captures:{1:{name:"keyword.other.unit.percentage.css"},2:{name:"keyword.other.unit.${2:/downcase}.css"}},match:`(?xi) (?<![\\w-])
[-+]?                               # Sign indicator

(?:                                 # Numerals
    [0-9]+ (?:\\.[0-9]+)?           # Integer/float with leading digits
  | \\.[0-9]+                       # Float without leading digits
)

(?:                                 # Scientific notation
  (?<=[0-9])                        # Exponent must follow a digit
  E                                 # Exponent indicator
  [-+]?                             # Possible sign indicator
  [0-9]+                            # Exponent value
)?

(?:                                 # Possible unit for data-type:
  (%)                               # - Percentage
  | ( deg|grad|rad|turn             # - Angle
    | Hz|kHz                        # - Frequency
    | ch|cm|em|ex|fr|in|mm|mozmm|   # - Length
      pc|pt|px|q|rem|vh|vmax|vmin|
      vw
    | dpi|dpcm|dppx                 # - Resolution
    | s|ms                          # - Time
    )
  \\b                               # Boundary checking intentionally lax to
)?                                  # facilitate embedding in CSS-like grammars`,name:"constant.numeric.css"}]},"property-keywords":{patterns:[{match:`(?xi) (?<![\\w-])
(above|absolute|active|add|additive|after-edge|alias|all|all-petite-caps|all-scroll|all-small-caps|alpha|alphabetic|alternate|alternate-reverse
|always|antialiased|auto|auto-pos|available|avoid|avoid-column|avoid-page|avoid-region|backwards|balance|baseline|before-edge|below|bevel
|bidi-override|blink|block|block-axis|block-start|block-end|bold|bolder|border|border-box|both|bottom|bottom-outside|break-all|break-word|bullets
|butt|capitalize|caption|cell|center|central|char|circle|clip|clone|close-quote|closest-corner|closest-side|col-resize|collapse|color|color-burn
|color-dodge|column|column-reverse|common-ligatures|compact|condensed|contain|content|content-box|contents|context-menu|contextual|copy|cover
|crisp-edges|crispEdges|crosshair|cyclic|darken|dashed|decimal|default|dense|diagonal-fractions|difference|digits|disabled|disc|discretionary-ligatures
|distribute|distribute-all-lines|distribute-letter|distribute-space|dot|dotted|double|double-circle|downleft|downright|e-resize|each-line|ease|ease-in
|ease-in-out|ease-out|economy|ellipse|ellipsis|embed|end|evenodd|ew-resize|exact|exclude|exclusion|expanded|extends|extra-condensed|extra-expanded
|fallback|farthest-corner|farthest-side|fill|fill-available|fill-box|filled|fit-content|fixed|flat|flex|flex-end|flex-start|flip|flow-root|forwards|freeze
|from-image|full-width|geometricPrecision|georgian|grab|grabbing|grayscale|grid|groove|hand|hanging|hard-light|help|hidden|hide
|historical-forms|historical-ligatures|horizontal|horizontal-tb|hue|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space
|ideographic|inactive|infinite|inherit|initial|inline|inline-axis|inline-block|inline-end|inline-flex|inline-grid|inline-list-item|inline-start
|inline-table|inset|inside|inter-character|inter-ideograph|inter-word|intersect|invert|isolate|isolate-override|italic|jis04|jis78|jis83
|jis90|justify|justify-all|kannada|keep-all|landscape|large|larger|left|lighten|lighter|line|line-edge|line-through|linear|linearRGB
|lining-nums|list-item|local|loose|lowercase|lr|lr-tb|ltr|luminance|luminosity|main-size|mandatory|manipulation|manual|margin-box|match-parent
|match-source|mathematical|max-content|medium|menu|message-box|middle|min-content|miter|mixed|move|multiply|n-resize|narrower|ne-resize
|nearest-neighbor|nesw-resize|newspaper|no-change|no-clip|no-close-quote|no-common-ligatures|no-contextual|no-discretionary-ligatures
|no-drop|no-historical-ligatures|no-open-quote|no-repeat|none|nonzero|normal|not-allowed|nowrap|ns-resize|numbers|numeric|nw-resize|nwse-resize
|oblique|oldstyle-nums|open|open-quote|optimizeLegibility|optimizeQuality|optimizeSpeed|optional|ordinal|outset|outside|over|overlay|overline|padding
|padding-box|page|painted|pan-down|pan-left|pan-right|pan-up|pan-x|pan-y|paused|petite-caps|pixelated|plaintext|pointer|portrait|pre|pre-line
|pre-wrap|preserve-3d|progress|progressive|proportional-nums|proportional-width|proximity|radial|recto|region|relative|remove|repeat|repeat-[xy]
|reset-size|reverse|revert|ridge|right|rl|rl-tb|round|row|row-resize|row-reverse|row-severse|rtl|ruby|ruby-base|ruby-base-container|ruby-text
|ruby-text-container|run-in|running|s-resize|saturation|scale-down|screen|scroll|scroll-position|se-resize|semi-condensed|semi-expanded|separate
|sesame|show|sideways|sideways-left|sideways-lr|sideways-right|sideways-rl|simplified|slashed-zero|slice|small|small-caps|small-caption|smaller
|smooth|soft-light|solid|space|space-around|space-between|space-evenly|spell-out|square|sRGB|stacked-fractions|start|static|status-bar|swap
|step-end|step-start|sticky|stretch|strict|stroke|stroke-box|style|sub|subgrid|subpixel-antialiased|subtract|super|sw-resize|symbolic|table
|table-caption|table-cell|table-column|table-column-group|table-footer-group|table-header-group|table-row|table-row-group|tabular-nums|tb|tb-rl
|text|text-after-edge|text-before-edge|text-bottom|text-top|thick|thin|titling-caps|top|top-outside|touch|traditional|transparent|triangle
|ultra-condensed|ultra-expanded|under|underline|unicase|unset|upleft|uppercase|upright|use-glyph-orientation|use-script|verso|vertical
|vertical-ideographic|vertical-lr|vertical-rl|vertical-text|view-box|visible|visibleFill|visiblePainted|visibleStroke|w-resize|wait|wavy
|weight|whitespace|wider|words|wrap|wrap-reverse|x|x-large|x-small|xx-large|xx-small|y|zero|zoom-in|zoom-out)
(?![\\w-])`,name:"support.constant.property-value.css"},{match:`(?xi) (?<![\\w-])
(arabic-indic|armenian|bengali|cambodian|circle|cjk-decimal|cjk-earthly-branch|cjk-heavenly-stem|cjk-ideographic
|decimal|decimal-leading-zero|devanagari|disc|disclosure-closed|disclosure-open|ethiopic-halehame-am
|ethiopic-halehame-ti-e[rt]|ethiopic-numeric|georgian|gujarati|gurmukhi|hangul|hangul-consonant|hebrew
|hiragana|hiragana-iroha|japanese-formal|japanese-informal|kannada|katakana|katakana-iroha|khmer
|korean-hangul-formal|korean-hanja-formal|korean-hanja-informal|lao|lower-alpha|lower-armenian|lower-greek
|lower-latin|lower-roman|malayalam|mongolian|myanmar|oriya|persian|simp-chinese-formal|simp-chinese-informal
|square|tamil|telugu|thai|tibetan|trad-chinese-formal|trad-chinese-informal|upper-alpha|upper-armenian
|upper-latin|upper-roman|urdu)
(?![\\w-])`,name:"support.constant.property-value.list-style-type.css"},{match:"(?<![\\w-])(?i:-(?:ah|apple|atsc|epub|hp|khtml|moz|ms|o|rim|ro|tc|wap|webkit|xv)|(?:mso|prince))-[a-zA-Z-]+",name:"support.constant.vendored.property-value.css"},{match:"(?<![\\w-])(?i:arial|century|comic|courier|garamond|georgia|helvetica|impact|lucida|symbol|system-ui|system|tahoma|times|trebuchet|ui-monospace|ui-rounded|ui-sans-serif|ui-serif|utopia|verdana|webdings|sans-serif|serif|monospace)(?![\\w-])",name:"support.constant.font-name.css"}]},"property-names":{patterns:[{match:`(?xi) (?<![\\w-])
(?:
    # Standard CSS
    additive-symbols|align-content|align-items|align-self|all|animation|animation-delay|animation-direction
  | animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state
  | animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode
  | background-clip|background-color|background-image|background-origin|background-position|background-position-[xy]
  | background-repeat|background-size|block-size|border|border-block-end|border-block-end-color|border-block-end-style
  | border-block-end-width|border-block-start|border-block-start-color|border-block-start-style
  | border-block-start-width|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius
  | border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset
  | border-image-repeat|border-image-slice|border-image-source|border-image-width|border-inline-end
  | border-inline-end-color|border-inline-end-style|border-inline-end-width|border-inline-start
  | border-inline-start-color|border-inline-start-style|border-inline-start-width|border-left|border-left-color
  | border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style
  | border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius
  | border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-decoration-break
  | box-shadow|box-sizing|break-after|break-before|break-inside|caption-side|clear|clip|clip-path|color
  | column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width
  | column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display
  | empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float
  | font|font-display|font-family|font-feature-settings|font-kerning|font-language-override|font-size|font-size-adjust
  | font-stretch|font-style|font-synthesis|font-variant|font-variant-alternates|font-variant-caps
  | font-variant-east-asian|font-variant-ligatures|font-variant-numeric|font-variant-position|font-weight
  | grid|grid-area|grid-auto-columns|grid-auto-flow|grid-auto-rows|grid-column|grid-column-end|grid-column-gap
  | grid-column-start|grid-gap|grid-row|grid-row-end|grid-row-gap|grid-row-start|grid-template|grid-template-areas
  | grid-template-columns|grid-template-rows|height|hyphens|image-orientation|image-rendering|image-resolution
  | ime-mode|inline-size|isolation|justify-self|justify-items|justify-content|left|letter-spacing|line-break|line-height|list-style
  | list-style-image|list-style-position|list-style-type|margin|margin-block-end|margin-block-start|margin-bottom
  | margin-inline-end|margin-inline-start|margin-left|margin-right|margin-top|mask|mask-clip|mask-composite
  | mask-image|mask-mode|mask-origin|mask-position|mask-repeat|mask-size|mask-type|max-block-size|max-height
  | max-inline-size|max-width|max-zoom|min-block-size|min-height|min-inline-size|min-width|min-zoom|mix-blend-mode
  | negative|object-fit|object-position|offset-block-end|offset-block-start|offset-inline-end|offset-inline-start
  | opacity|order|orientation|orphans|outline|outline-color|outline-offset|outline-style|outline-width|overflow
  | overflow-wrap|overflow-[xy]|pad|padding|padding-block-end|padding-block-start|padding-bottom|padding-inline-end
  | padding-inline-start|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside
  | perspective|perspective-origin|place-content|place-items|place-self|pointer-events|position|prefix|quotes|range
  | resize|right|row-gap|ruby-align|ruby-merge|ruby-position|scroll-behavior|scroll-snap-coordinate
  | scroll-snap-destination|scroll-snap-type|shape-image-threshold|shape-margin|shape-outside|speak-as|src|suffix
  | symbols|system|tab-size|table-layout|text-align|text-align-last|text-combine-upright|text-decoration
  | text-decoration-color|text-decoration-line|text-decoration-style|text-emphasis|text-emphasis-color
  | text-emphasis-position|text-emphasis-style|text-indent|text-orientation|text-overflow|text-rendering
  | text-shadow|text-transform|text-underline-position|top|touch-action|transform|transform-box
  | transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property
  | transition-timing-function|unicode-bidi|unicode-range|user-zoom|vertical-align|visibility|white-space|widows
  | width|will-change|word-break|word-spacing|word-wrap|writing-mode|z-index|zoom

  # SVG attributes
  | alignment-baseline|baseline-shift|clip-rule|color-interpolation|color-interpolation-filters|color-profile
  | color-rendering|cx|cy|dominant-baseline|enable-background|fill|fill-opacity|fill-rule|flood-color|flood-opacity
  | glyph-orientation-horizontal|glyph-orientation-vertical|height|kerning|lighting-color|marker-end|marker-mid
  | marker-start|r|rx|ry|shape-rendering|stop-color|stop-opacity|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap
  | stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|text-anchor|width|x|y

  # Not listed on MDN; presumably deprecated
  | adjust|after|align|align-last|alignment|alignment-adjust|appearance|attachment|azimuth|background-break
  | balance|baseline|before|bidi|binding|bookmark|bookmark-label|bookmark-level|bookmark-target|border-length
  | bottom-color|bottom-left-radius|bottom-right-radius|bottom-style|bottom-width|box|box-align|box-direction
  | box-flex|box-flex-group|box-lines|box-ordinal-group|box-orient|box-pack|break|character|collapse|column
  | column-break-after|column-break-before|count|counter|crop|cue|cue-after|cue-before|decoration|decoration-break
  | delay|display-model|display-role|down|drop|drop-initial-after-adjust|drop-initial-after-align|drop-initial-before-adjust
  | drop-initial-before-align|drop-initial-size|drop-initial-value|duration|elevation|emphasis|family|fit|fit-position
  | flex-group|float-offset|gap|grid-columns|grid-rows|hanging-punctuation|header|hyphenate|hyphenate-after|hyphenate-before
  | hyphenate-character|hyphenate-lines|hyphenate-resource|icon|image|increment|indent|index|initial-after-adjust
  | initial-after-align|initial-before-adjust|initial-before-align|initial-size|initial-value|inline-box-align|iteration-count
  | justify|label|left-color|left-style|left-width|length|level|line|line-stacking|line-stacking-ruby|line-stacking-shift
  | line-stacking-strategy|lines|list|mark|mark-after|mark-before|marks|marquee|marquee-direction|marquee-play-count|marquee-speed
  | marquee-style|max|min|model|move-to|name|nav|nav-down|nav-index|nav-left|nav-right|nav-up|new|numeral|offset|ordinal-group
  | orient|origin|overflow-style|overhang|pack|page|page-policy|pause|pause-after|pause-before|phonemes|pitch|pitch-range
  | play-count|play-during|play-state|point|presentation|presentation-level|profile|property|punctuation|punctuation-trim
  | radius|rate|rendering-intent|repeat|replace|reset|resolution|resource|respond-to|rest|rest-after|rest-before|richness
  | right-color|right-style|right-width|role|rotation|rotation-point|rows|ruby|ruby-overhang|ruby-span|rule|rule-color
  | rule-style|rule-width|shadow|size|size-adjust|sizing|space|space-collapse|spacing|span|speak|speak-header|speak-numeral
  | speak-punctuation|speech|speech-rate|speed|stacking|stacking-ruby|stacking-shift|stacking-strategy|stress|stretch
  | string-set|style|style-image|style-position|style-type|target|target-name|target-new|target-position|text|text-height
  | text-justify|text-outline|text-replace|text-wrap|timing-function|top-color|top-left-radius|top-right-radius|top-style
  | top-width|trim|unicode|up|user-select|variant|voice|voice-balance|voice-duration|voice-family|voice-pitch|voice-pitch-range
  | voice-rate|voice-stress|voice-volume|volume|weight|white|white-space-collapse|word|wrap
)
(?![\\w-])`,name:"support.type.property-name.css"},{match:"(?<![\\w-])(?i:-(?:ah|apple|atsc|epub|hp|khtml|moz|ms|o|rim|ro|tc|wap|webkit|xv)|(?:mso|prince))-[a-zA-Z-]+",name:"support.type.vendored.property-name.css"}]},"property-values":{patterns:[{include:"#commas"},{include:"#comment-block"},{include:"#escapes"},{include:"#functions"},{include:"#property-keywords"},{include:"#unicode-range"},{include:"#numeric-values"},{include:"#color-keywords"},{include:"#string"},{match:"!\\s*important(?![\\w-])",name:"keyword.other.important.css"}]},"pseudo-classes":{captures:{1:{name:"punctuation.definition.entity.css"},2:{name:"invalid.illegal.colon.css"}},match:`(?xi)
(:)(:*)
(?: active|any-link|checked|default|disabled|empty|enabled|first
  | (?:first|last|only)-(?:child|of-type)|focus|focus-within|fullscreen|host|hover
  | in-range|indeterminate|invalid|left|link|optional|out-of-range
  | read-only|read-write|required|right|root|scope|target|unresolved
  | valid|visited
)(?![\\w-]|\\s*[;}])`,name:"entity.other.attribute-name.pseudo-class.css"},"pseudo-elements":{captures:{1:{name:"punctuation.definition.entity.css"},2:{name:"punctuation.definition.entity.css"}},match:`(?xi)
(?:
  (::?)                       # Elements using both : and :: notation
  (?: after
    | before
    | first-letter
    | first-line
    | (?:-(?:ah|apple|atsc|epub|hp|khtml|moz
            |ms|o|rim|ro|tc|wap|webkit|xv)
        | (?:mso|prince))
      -[a-z-]+
  )
  |
  (::)                        # Double-colon only
  (?: backdrop
    | content
    | grammar-error
    | marker
    | placeholder
    | selection
    | shadow
    | spelling-error
  )
)
(?![\\w-]|\\s*[;}])`,name:"entity.other.attribute-name.pseudo-element.css"},"rule-list":{begin:"{",beginCaptures:{0:{name:"punctuation.section.property-list.begin.bracket.curly.css"}},end:"}",endCaptures:{0:{name:"punctuation.section.property-list.end.bracket.curly.css"}},name:"meta.property-list.css",patterns:[{include:"#rule-list-innards"}]},"rule-list-innards":{patterns:[{include:"#comment-block"},{include:"#escapes"},{include:"#font-features"},{match:`(?x) (?<![\\w-])
--
(?:[-a-zA-Z_]    | [^\\x00-\\x7F])     # First letter
(?:[-a-zA-Z0-9_] | [^\\x00-\\x7F]      # Remainder of identifier
  |\\\\(?:[0-9a-fA-F]{1,6}|.)
)*`,name:"variable.css"},{begin:"(?<![-a-zA-Z])(?=[-a-zA-Z])",end:"$|(?![-a-zA-Z])",name:"meta.property-name.css",patterns:[{include:"#property-names"}]},{begin:"(:)\\s*",beginCaptures:{1:{name:"punctuation.separator.key-value.css"}},end:"\\s*(;)|\\s*(?=}|\\))",endCaptures:{1:{name:"punctuation.terminator.rule.css"}},contentName:"meta.property-value.css",patterns:[{include:"#comment-block"},{include:"#property-values"}]},{match:";",name:"punctuation.terminator.rule.css"}]},selector:{begin:`(?x)
(?=
  (?:\\|)?                    # Possible anonymous namespace prefix
  (?:
    [-\\[:.*\\#a-zA-Z_]       # Valid selector character
    |
    [^\\x00-\\x7F]            # Which can include non-ASCII symbols
    |
    \\\\                      # Or an escape sequence
    (?:[0-9a-fA-F]{1,6}|.)
  )
)`,end:"(?=\\s*[/@{)])",name:"meta.selector.css",patterns:[{include:"#selector-innards"}]},"selector-innards":{patterns:[{include:"#comment-block"},{include:"#commas"},{include:"#escapes"},{include:"#combinators"},{captures:{1:{name:"entity.other.namespace-prefix.css"},2:{name:"punctuation.separator.css"}},match:`(?x)
(?:^|(?<=[\\s,(};]))         # Follows whitespace, comma, semicolon, or bracket
(?!
  [-\\w*]+
  \\|
  (?!
      [-\\[:.*\\#a-zA-Z_]    # Make sure there's a selector to match
    | [^\\x00-\\x7F]
  )
)
(
  (?: [-a-zA-Z_]    | [^\\x00-\\x7F] )   # First letter
  (?: [-a-zA-Z0-9_] | [^\\x00-\\x7F]     # Remainder of identifier
    | \\\\(?:[0-9a-fA-F]{1,6}|.)
  )*
  |
  \\*     # Universal namespace
)?
(\\|)     # Namespace separator`},{include:"#tag-names"},{match:"\\*",name:"entity.name.tag.wildcard.css"},{captures:{1:{name:"punctuation.definition.entity.css"},2:{patterns:[{include:"#escapes"}]}},match:`(?x) (?<![@\\w-])
([.\\#])
# Invalid identifier
(
  (?:
    # Starts with ASCII digits, with possible hyphen preceding it
    -?[0-9]
    |
    # Consists of a hyphen only
    -                                      # Terminated by either:
    (?= $                                  # - End-of-line
      | [\\s,.\\#)\\[:{>+~|]               # - Followed by another selector
      | /\\*                               # - Followed by a block comment
    )
    |
    # Name contains unescaped ASCII symbol
    (?:                                    # Check for acceptable preceding characters
        [-a-zA-Z_0-9]|[^\\x00-\\x7F]       # - Valid selector character
      | \\\\(?:[0-9a-fA-F]{1,6}|.)         # - Escape sequence
    )*
    (?:                                    # Invalid punctuation
      [!"'%&(*;<?@^\`|\\]}]                 # - NOTE: We exempt \`)\` from the list of checked
      |                                    #   symbols to avoid matching \`:not(.invalid)\`
      / (?!\\*)                            # - Avoid invalidating the start of a comment
    )+
  )
  # Mark remainder of selector invalid
  (?: [-a-zA-Z_0-9]|[^\\x00-\\x7F]         # - Otherwise valid identifier characters
    | \\\\(?:[0-9a-fA-F]{1,6}|.)           # - Escape sequence
  )*
)`,name:"invalid.illegal.bad-identifier.css"},{captures:{1:{name:"punctuation.definition.entity.css"},2:{patterns:[{include:"#escapes"}]}},match:`(?x)
(\\.)                                  # Valid class-name
(
  (?: [-a-zA-Z_0-9]|[^\\x00-\\x7F]     # Valid identifier characters
    | \\\\(?:[0-9a-fA-F]{1,6}|.)       # Escape sequence
  )+
)                                      # Followed by either:
(?= $                                  # - End of the line
  | [\\s,.\\#)\\[:{>+~|]               # - Another selector
  | /\\*                               # - A block comment
)`,name:"entity.other.attribute-name.class.css"},{captures:{1:{name:"punctuation.definition.entity.css"},2:{patterns:[{include:"#escapes"}]}},match:`(?x)
(\\#)
(
  -?
  (?![0-9])
  (?:[-a-zA-Z0-9_]|[^\\x00-\\x7F]|\\\\(?:[0-9a-fA-F]{1,6}|.))+
)
(?=$|[\\s,.\\#)\\[:{>+~|]|/\\*)`,name:"entity.other.attribute-name.id.css"},{begin:"\\[",beginCaptures:{0:{name:"punctuation.definition.entity.begin.bracket.square.css"}},end:"\\]",endCaptures:{0:{name:"punctuation.definition.entity.end.bracket.square.css"}},name:"meta.attribute-selector.css",patterns:[{include:"#comment-block"},{include:"#string"},{captures:{1:{name:"storage.modifier.ignore-case.css"}},match:`(?<=["'\\s]|^|\\*/)\\s*([iI])\\s*(?=[\\s\\]]|/\\*|$)`},{captures:{1:{name:"string.unquoted.attribute-value.css",patterns:[{include:"#escapes"}]}},match:`(?x)(?<==)\\s*((?!/\\*)(?:[^\\\\"'\\s\\]]|\\\\.)+)`},{include:"#escapes"},{match:"[~|^$*]?=",name:"keyword.operator.pattern.css"},{match:"\\|",name:"punctuation.separator.css"},{captures:{1:{name:"entity.other.namespace-prefix.css",patterns:[{include:"#escapes"}]}},match:`(?x)
# Qualified namespace prefix
( -?(?!\\d)(?:[\\w-]|[^\\x00-\\x7F]|\\\\(?:[0-9a-fA-F]{1,6}|.))+
| \\*
)
# Lookahead to ensure there's a valid identifier ahead
(?=
  \\| (?!\\s|=|$|\\])
  (?: -?(?!\\d)
   |   [\\\\\\w-]
   |   [^\\x00-\\x7F]
   )
)`},{captures:{1:{name:"entity.other.attribute-name.css",patterns:[{include:"#escapes"}]}},match:`(?x)
(-?(?!\\d)(?>[\\w-]|[^\\x00-\\x7F]|\\\\(?:[0-9a-fA-F]{1,6}|.))+)
\\s*
(?=[~|^\\]$*=]|/\\*)`}]},{include:"#pseudo-classes"},{include:"#pseudo-elements"},{include:"#functional-pseudo-classes"},{match:`(?x) (?<![@\\w-])
(?=            # Custom element names must:
  [a-z]        # - start with a lowercase ASCII letter,
  \\w* -       # - contain at least one dash
)
(?:
  (?![A-Z])    # No uppercase ASCII letters are allowed
  [\\w-]       # Allow any other word character or dash
)+
(?![(\\w-])`,name:"entity.name.tag.custom.css"}]},string:{patterns:[{begin:'"',beginCaptures:{0:{name:"punctuation.definition.string.begin.css"}},end:'"|(?<!\\\\)(?=$|\\n)',endCaptures:{0:{name:"punctuation.definition.string.end.css"}},name:"string.quoted.double.css",patterns:[{begin:'(?:\\G|^)(?=(?:[^\\\\"]|\\\\.)+$)',end:"$",name:"invalid.illegal.unclosed.string.css",patterns:[{include:"#escapes"}]},{include:"#escapes"}]},{begin:"'",beginCaptures:{0:{name:"punctuation.definition.string.begin.css"}},end:"'|(?<!\\\\)(?=$|\\n)",endCaptures:{0:{name:"punctuation.definition.string.end.css"}},name:"string.quoted.single.css",patterns:[{begin:"(?:\\G|^)(?=(?:[^\\\\']|\\\\.)+$)",end:"$",name:"invalid.illegal.unclosed.string.css",patterns:[{include:"#escapes"}]},{include:"#escapes"}]}]},"tag-names":{match:`(?xi) (?<![\\w:-])
(?:
    # HTML
    a|abbr|acronym|address|applet|area|article|aside|audio|b|base|basefont|bdi|bdo|bgsound
  | big|blink|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|command
  | content|data|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|element|em|embed|fieldset
  | figcaption|figure|font|footer|form|frame|frameset|h[1-6]|head|header|hgroup|hr|html|i
  | iframe|image|img|input|ins|isindex|kbd|keygen|label|legend|li|link|listing|main|map|mark
  | marquee|math|menu|menuitem|meta|meter|multicol|nav|nextid|nobr|noembed|noframes|noscript
  | object|ol|optgroup|option|output|p|param|picture|plaintext|pre|progress|q|rb|rp|rt|rtc
  | ruby|s|samp|script|section|select|shadow|slot|small|source|spacer|span|strike|strong
  | style|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr
  | track|tt|u|ul|var|video|wbr|xmp

  # SVG
  | altGlyph|altGlyphDef|altGlyphItem|animate|animateColor|animateMotion|animateTransform
  | circle|clipPath|color-profile|cursor|defs|desc|discard|ellipse|feBlend|feColorMatrix
  | feComponentTransfer|feComposite|feConvolveMatrix|feDiffuseLighting|feDisplacementMap
  | feDistantLight|feDropShadow|feFlood|feFuncA|feFuncB|feFuncG|feFuncR|feGaussianBlur
  | feImage|feMerge|feMergeNode|feMorphology|feOffset|fePointLight|feSpecularLighting
  | feSpotLight|feTile|feTurbulence|filter|font-face|font-face-format|font-face-name
  | font-face-src|font-face-uri|foreignObject|g|glyph|glyphRef|hatch|hatchpath|hkern
  | line|linearGradient|marker|mask|mesh|meshgradient|meshpatch|meshrow|metadata
  | missing-glyph|mpath|path|pattern|polygon|polyline|radialGradient|rect|set|solidcolor
  | stop|svg|switch|symbol|text|textPath|tref|tspan|use|view|vkern

  # MathML
  | annotation|annotation-xml|maction|maligngroup|malignmark|math|menclose|merror|mfenced
  | mfrac|mglyph|mi|mlabeledtr|mlongdiv|mmultiscripts|mn|mo|mover|mpadded|mphantom|mroot
  | mrow|ms|mscarries|mscarry|msgroup|msline|mspace|msqrt|msrow|mstack|mstyle|msub|msubsup
  | msup|mtable|mtd|mtext|mtr|munder|munderover|semantics
)
(?=[+~>\\s,.\\#|){\\[]|/\\*|:[^\\s]|$)`,name:"entity.name.tag.css"},"unicode-range":{captures:{0:{name:"constant.other.unicode-range.css"},1:{name:"punctuation.separator.dash.unicode-range.css"}},match:"(?<![\\w-])[Uu]\\+[0-9A-Fa-f?]{1,6}(?:(-)[0-9A-Fa-f]{1,6})?(?![\\w-])"},url:{begin:"(?i)(?<![\\w@-])(url)(\\()",beginCaptures:{1:{name:"support.function.url.css"},2:{name:"punctuation.section.function.begin.bracket.round.css"}},end:"\\)",endCaptures:{0:{name:"punctuation.section.function.end.bracket.round.css"}},name:"meta.function.url.css",patterns:[{match:`[^'")\\s]+`,name:"variable.parameter.url.css"},{include:"#string"},{include:"#comment-block"},{include:"#escapes"}]}},jme={information_for_contributors:Fme,version:Bme,name:Wme,scopeName:Vme,patterns:Hme,repository:Ume},$me=`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.6.9",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/solid.js"
        },
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/solid.js"
      },
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./store/types/index.d.ts",
            "default": "./store/dist/dev.js"
          },
          "require": "./store/dist/dev.cjs"
        },
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/store.js"
        },
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/dev.js"
        },
        "require": "./store/dist/dev.cjs"
      },
      "import": {
        "types": "./store/types/index.d.ts",
        "default": "./store/dist/store.js"
      },
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./web/types/index.d.ts",
            "default": "./web/dist/dev.js"
          },
          "require": "./web/dist/dev.cjs"
        },
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/web.js"
        },
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/dev.js"
        },
        "require": "./web/dist/dev.cjs"
      },
      "import": {
        "types": "./web/types/index.d.ts",
        "default": "./web/dist/web.js"
      },
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": {
          "types": "./universal/types/index.d.ts",
          "default": "./universal/dist/dev.js"
        },
        "require": "./universal/dist/dev.cjs"
      },
      "import": {
        "types": "./universal/types/index.d.ts",
        "default": "./universal/dist/universal.js"
      },
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": {
        "types": "./h/types/index.d.ts",
        "default": "./h/dist/h.js"
      },
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": {
        "types": "./html/types/index.d.ts",
        "default": "./html/dist/html.js"
      },
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "jest",
    "coverage": "jest --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,zme=`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/web.js"
        },
        "require": "./dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/web.js"
      },
      "require": "./dist/web.cjs"
    }
  }
}
`,Kme=`export * from "./types/jsx";
`,Gme=`export { $DEVCOMP, $PROXY, $TRACK, batch, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, EffectFunction, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, Owner, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
declare type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { hashValue, registerGraph, serializeGraph, writeSignal } from "./reactive/signal.js";
declare let DEV: {
    writeSignal: typeof writeSignal;
    serializeGraph: typeof serializeGraph;
    registerGraph: typeof registerGraph;
    hashValue: typeof hashValue;
};
export { DEV };
declare global {
    var Solid$$: boolean;
}
`,qme=`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: 'col' | 'row' | 'rowgroup' | 'colgroup';
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,Zme=`import { Accessor } from "./signal.js";
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,Yme=`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
`,Xme=`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,Qme=`import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
declare global {
    var _$afterUpdate: (() => void) | undefined;
    var _$afterCreateRoot: ((root: Owner) => void) | undefined;
}
export declare type ComputationState = 0 | 1 | 2;
export interface SourceMapValue {
    value: unknown;
    graph?: Owner;
}
export interface SignalState<T> extends SourceMapValue {
    value: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
    name?: string;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: Record<string, SourceMapValue>;
    name?: string;
    componentName?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
declare type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export declare type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: Owner): T;
export declare type Accessor<T> = () => T;
export declare type Setter<T> = (undefined extends T ? () => undefined : {}) & (<U extends T>(value: (prev: T) => U) => U) & (<U extends T>(value: Exclude<U, Function>) => U) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export declare type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export declare type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    value: Next;
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export declare type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export declare type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export declare type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export declare type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export declare type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export declare type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export declare type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export declare type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export declare type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export declare type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export declare type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions & {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup(fn: () => void): () => void;
/**
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export declare type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<JSX.Element> {
    props: T;
    componentName: string;
}
export declare function devComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function hashValue(v: any): string;
export declare function registerGraph(name: string, value: SourceMapValue): string;
interface GraphRecord {
    [k: string]: GraphRecord | unknown;
}
export declare function serializeGraph(owner?: Owner | null): GraphRecord;
export declare type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export declare type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement | JSX.FunctionElement>;
export declare type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export declare type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export declare type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
declare type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,Jme=`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export declare type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export declare type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export declare type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export declare type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export declare type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export declare type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export declare type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export declare type PropsWithChildren<P = {}> = ParentProps<P>;
export declare type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export declare type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export declare type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
declare type DistributeOverride<T, F> = T extends undefined ? F : T;
declare type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
declare type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
declare type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
declare type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export declare type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export declare type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,e_e=`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cfor%3E
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): Accessor<U[]>;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cindex%3E
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): Accessor<U[]>;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#%3Cshow%3E
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): () => JSX.Element;
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element;
}): () => JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): Accessor<JSX.Element>;
export declare type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Match<T>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): JSX.Element;
export declare function Match<T>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cerrorboundary%3E
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): Accessor<JSX.Element>;
`,t_e=`export declare type HydrationContext = {
    id: string;
    count: number;
};
declare type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,n_e=`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,i_e=`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspenselist%3E-(experimental)
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspense%3E
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,s_e=`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const PropAliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, count: number, isSVG?: boolean): Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,r_e=`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,o_e=`import { hydrate as hydrateCore } from "./client.js";
import { JSX, Accessor, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer = false;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cportal%3E
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
declare type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cdynamic%3E
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): Accessor<JSX.Element>;
`,a_e=`export type { JSX } from "../../types/jsx.js";
`,l_e=`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export declare type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,c_e=`export { createStore, unwrap, $RAW } from "./store.js";
export type { Store, SetStoreFunction, NotWrappable, SolidStore, StoreNode, StoreSetter, StorePathRange, ArrayFilterFn, Part, DeepReadonly, DeepMutable } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NAME, $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NAME: typeof $NAME;
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
} | undefined;
`,d_e=`export declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,u_e=`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,h_e=`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,f_e=`export declare const $RAW: unique symbol, $NODE: unique symbol, $NAME: unique symbol;
declare global {
    var _$onStoreNodeUpdate: OnStoreNodeUpdate | undefined;
}
declare type DataNode = {
    (): any;
    $(value?: any): void;
};
declare type DataNodes = Record<PropertyKey, DataNode>;
export declare type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NAME]?: string;
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export declare type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export declare type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): DataNodes;
export declare function getDataNode(nodes: DataNodes, property: PropertyKey, value: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): PropertyDescriptor | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export declare type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export declare type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export declare type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export declare type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export declare type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export declare type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export declare type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export declare type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
declare type W<T> = Exclude<T, NotWrappable>;
declare type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [readonly unknown[]] ? number : [T] extends [never] ? never : keyof T : keyof T;
declare type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
declare type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = K extends keyof PickMutable<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<K> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
declare type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<T, U>;
declare type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`;function Wn(r,e){us.typescript.typescriptDefaults.addExtraLib(r,`file:///node_modules/solid-js/${e}`),us.typescript.javascriptDefaults.addExtraLib(r,`file:///node_modules/solid-js/${e}`)}Wn($me,"package.json");Wn(zme,"web/package.json");Wn(Kme,"jsx-runtime.d.ts");Wn(Gme,"types/index.d.ts");Wn(qme,"types/jsx.d.ts");Wn(Zme,"types/reactive/array.d.ts");Wn(Yme,"types/reactive/mutable.d.ts");Wn(Xme,"types/reactive/scheduler.d.ts");Wn(Qme,"types/reactive/signal.d.ts");Wn(Jme,"types/render/component.d.ts");Wn(e_e,"types/render/flow.d.ts");Wn(t_e,"types/render/hydration.d.ts");Wn(n_e,"types/render/index.d.ts");Wn(i_e,"types/render/Suspense.d.ts");Wn(s_e,"web/types/client.d.ts");Wn(r_e,"web/types/core.d.ts");Wn(o_e,"web/types/index.d.ts");Wn(a_e,"web/types/jsx.d.ts");Wn(l_e,"web/types/server-mock.d.ts");Wn(c_e,"store/types/index.d.ts");Wn(d_e,"store/types/modifiers.d.ts");Wn(u_e,"store/types/mutable.d.ts");Wn(h_e,"store/types/server.d.ts");Wn(f_e,"store/types/store.d.ts");const g_e=`{
  "name": "solidjs-use",
  "version": "1.0.0",
  "description": "Collection of Solid utilities inspired completely by VueUse",
  "files": [
    "dist"
  ],
  "author": "dream2023 <https://github.com/dream2023>",
  "homepage": "https://github.com/solidjs-use/solidjs-use#readme",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/solidjs-use/solidjs-use.git",
    "directory": "packages/core"
  },
  "bugs": {
    "url": "https://github.com/solidjs-use/solidjs-use/issues"
  },
  "keywords": [
    "solid",
    "solidjs",
    "solidjs-use",
    "utils"
  ],
  "sideEffects": false,
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "require": "./dist/index.cjs",
      "import": "./dist/index.mjs"
    },
    "./solid-to-vue": {
      "types": "./dist/solid-to-vue.d.ts",
      "require": "./dist/solid-to-vue.cjs",
      "import": "./dist/solid-to-vue.mjs"
    },
    "./*": "./*"
  },
  "main": "./dist/index.cjs",
  "module": "./dist/index.mjs",
  "unpkg": "./dist/index.mjs",
  "jsdelivr": "./dist/index.mjs",
  "types": "./dist/index.d.ts",
  "dependencies": {
    "@types/web-bluetooth": "^0.0.16",
    "@solidjs-use/shared": "1.0.0"
  },
  "devDependencies": {
    "solid-js": "^1.6.9"
  }
}
`,p_e=`interface ConfigurableWindow {\r
    window?: Window;\r
}\r
interface ConfigurableDocument {\r
    document?: Document;\r
}\r
interface ConfigurableNavigator {\r
    navigator?: Navigator;\r
}\r
interface ConfigurableDocumentOrShadowRoot {\r
    document?: DocumentOrShadowRoot;\r
}\r
interface ConfigurableLocation {\r
    location?: Location;\r
}\r
declare const defaultWindow: (Window & typeof globalThis) | undefined;\r
declare const defaultDocument: Document | undefined;\r
declare const defaultNavigator: Navigator | undefined;\r
declare const defaultLocation: Location | undefined;

export { ConfigurableDocument, ConfigurableDocumentOrShadowRoot, ConfigurableLocation, ConfigurableNavigator, ConfigurableWindow, defaultDocument, defaultLocation, defaultNavigator, defaultWindow };
`,m_e=`export { AsyncComputedOnCancel, AsyncComputedOptions, asyncMemo, asyncMemo as createAsyncMemo } from './createAsyncMemo/index.js';
export { createUnAccessorFn, unAccessorFn } from './createUnAccessorFn/index.js';
export { OnClickOutsideHandler, OnClickOutsideOptions, onClickOutside } from './onClickOutside/index.js';
export { KeyFilter, KeyPredicate, KeyStrokeEventName, OnKeyStrokeOptions, onKeyDown, onKeyPressed, onKeyStroke, onKeyUp } from './onKeyStroke/index.js';
export { OnLongPressModifiers, OnLongPressOptions, onLongPress } from './onLongPress/index.js';
export { onStartTyping } from './onStartTyping/index.js';
export { UseActiveElementOptions, useActiveElement } from './useActiveElement/index.js';
export { UseAsyncStateOptions, UseAsyncStateReturn, useAsyncState } from './useAsyncState/index.js';
export { ToDataURLOptions, UseBase64ObjectOptions, UseBase64Return, useBase64 } from './useBase64/index.js';
export { BatteryManager, UseBatteryReturn, useBattery } from './useBattery/index.js';
export { UseBluetoothOptions, UseBluetoothRequestDeviceOptions, UseBluetoothReturn, useBluetooth } from './useBluetooth/index.js';
export { Breakpoints, UseBreakpointsReturn, useBreakpoints } from './useBreakpoints/index.js';
export { UseBroadcastChannelOptions, UseBroadcastChannelReturn, useBroadcastChannel } from './useBroadcastChannel/index.js';
export { BrowserLocationState, UseBrowserLocationReturn, useBrowserLocation } from './useBrowserLocation/index.js';
export { UseClipboardOptions, UseClipboardReturn, useClipboard } from './useClipboard/index.js';
export { CloneFn, UseClonedOptions, UseClonedReturn, cloneFnJSON, useCloned } from './useCloned/index.js';
export { BasicColorSchema, UseColorModeOptions, useColorMode } from './useColorMode/index.js';
export { UseConfirmDialogReturn, UseConfirmDialogRevealResult, useConfirmDialog } from './useConfirmDialog/index.js';
export { CubicBezierPoints, EasingFunction, TransitionPresets, UseCssTransitionOptions, useCssTransition } from './useCssTransition/index.js';
export { UseCssVarOptions, useCssVar } from './useCssVar/index.js';
export { UseCycleListOptions, UseCycleListReturn, useCycleList } from './useCycleList/index.js';
export { UseDarkOptions, useDark } from './useDark/index.js';
export { UseDebouncedHistoryTravelAccessorReturn, UseDebouncedHistoryTravelSignalReturn, useDebouncedHistoryTravel } from './useDebouncedHistoryTravel/index.js';
export { DeviceMotionOptions, UseDeviceMotionReturn, useDeviceMotion } from './useDeviceMotion/index.js';
export { UseDeviceOrientationReturn, useDeviceOrientation } from './useDeviceOrientation/index.js';
export { UseDevicePixelRatioReturn, useDevicePixelRatio } from './useDevicePixelRatio/index.js';
export { UseDevicesListOptions, UseDevicesListReturn, useDevicesList } from './useDevicesList/index.js';
export { UseDisplayMediaOptions, UseDisplayMediaReturn, useDisplayMedia } from './useDisplayMedia/index.js';
export { useDocumentVisibility } from './useDocumentVisibility/index.js';
export { UseDraggableOptions, UseDraggableReturn, useDraggable } from './useDraggable/index.js';
export { UseDropZoneReturn, useDropZone } from './useDropZone/index.js';
export { UseElementBoundingOptions, UseElementBoundingReturn, useElementBounding } from './useElementBounding/index.js';
export { UseElementByPointOptions, UseElementByPointReturn, useElementByPoint } from './useElementByPoint/index.js';
export { useElementHover } from './useElementHover/index.js';
export { ElementSize, UseElementSizeReturn, useElementSize } from './useElementSize/index.js';
export { UseElementVisibilityOptions, useElementVisibility } from './useElementVisibility/index.js';
export { EventBusEvents, EventBusIdentifier, EventBusKey, EventBusListener, UseEventBusReturn, useEventBus } from './useEventBus/index.js';
export { DocumentEventName, GeneralEventListener, WindowEventName, useEventListener } from './useEventListener/index.js';
export { UseEventSourceOptions, UseEventSourceReturn, useEventSource } from './useEventSource/index.js';
export { EyeDropper, EyeDropperOpenOptions, UseEyeDropperOptions, UseEyeDropperReturn, useEyeDropper } from './useEyeDropper/index.js';
export { UseFaviconOptions, UseFaviconReturn, useFavicon } from './useFavicon/index.js';
export { AfterFetchContext, BeforeFetchContext, CreateFetchOptions, OnFetchErrorContext, UseFetchOptions, UseFetchReturn, createFetch, useFetch } from './useFetch/index.js';
export { UseFileDialogOptions, UseFileDialogReturn, useFileDialog } from './useFileDialog/index.js';
export { FileSystemAccessShowOpenFileOptions, FileSystemAccessShowSaveFileOptions, FileSystemAccessWindow, FileSystemFileHandle, UseFileSystemAccessCommonOptions, UseFileSystemAccessOptions, UseFileSystemAccessReturn, UseFileSystemAccessShowSaveFileOptions, useFileSystemAccess } from './useFileSystemAccess/index.js';
export { UseFocusOptions, useFocus } from './useFocus/index.js';
export { useFocusWithin } from './useFocusWithin/index.js';
export { UseFpsOptions, useFps } from './useFps/index.js';
export { UseFullscreenOptions, UseFullscreenReturn, useFullscreen } from './useFullscreen/index.js';
export { UseGamepadOptions, UseGamepadReturn, mapGamepadToXbox360Controller, useGamepad } from './useGamepad/index.js';
export { UseGeolocationOptions, UseGeolocationReturn, useGeolocation } from './useGeolocation/index.js';
export { UseHistoryTravelAccessorReturn, UseHistoryTravelBaseReturn, UseHistoryTravelOptions, UseHistoryTravelSignalReturn, useHistoryTravel } from './useHistoryTravel/index.js';
export { UseIdleOptions, UseIdleReturn, useIdle } from './useIdle/index.js';
export { UseImageOptions, UseImageReturn, useImage } from './useImage/index.js';
export { UseInfiniteScrollOptions, useInfiniteScroll } from './useInfiniteScroll/index.js';
export { UseIntersectionObserverOptions, UseIntersectionObserverReturn, useIntersectionObserver } from './useIntersectionObserver/index.js';
export { KeyModifier, UseKeyModifierReturn, UseModifierOptions, useKeyModifier } from './useKeyModifier/index.js';
export { useLocalStorage } from './useLocalStorage/index.js';
export { MagicKeysInternal, UseMagicKeysOptions, UseMagicKeysReturn, getSetCompat, useMagicKeys } from './useMagicKeys/index.js';
export { UseHistoryTravelRecord, UseManualHistoryTravelAccessorReturn, UseManualHistoryTravelOptions, UseManualHistoryTravelSignalReturn, useManualHistoryTravel } from './useManualHistoryTravel/index.js';
export { UseMediaControlsReturn, UseMediaSource, UseMediaTextTrack, UseMediaTextTrackSource, useMediaControls } from './useMediaControls/index.js';
export { useMediaQuery } from './useMediaQuery/index.js';
export { UseMemoizeCache, UseMemoizeOptions, UseMemoizeReturn, useMemoize } from './useMemoize/index.js';
export { MemoryInfo, UseMemoryOptions, UseMemoryReturn, useMemory } from './useMemory/index.js';
export { useMounted } from './useMounted/index.js';
export { MouseSourceType, UseMouseOptions, UseMouseReturn, useMouse } from './useMouse/index.js';
export { MouseInElementOptions, UseMouseInElementReturn, useMouseInElement } from './useMouseInElement/index.js';
export { MousePressedOptions, UseMousePressedReturn, useMousePressed } from './useMousePressed/index.js';
export { UseMutationObserverOptions, UseMutationObserverReturn, useMutationObserver } from './useMutationObserver/index.js';
export { NavigatorLanguageState, UseNavigatorLanguageReturn, useNavigatorLanguage } from './useNavigatorLanguage/index.js';
export { NetworkEffectiveType, NetworkState, NetworkType, UseNetworkReturn, useNetwork } from './useNetwork/index.js';
export { UseNowOptions, UseNowReturn, useNow } from './useNow/index.js';
export { UseObjectUrlOptions, UseObjectUrlReturn, useObjectUrl } from './useObjectUrl/index.js';
export { UseOffsetPaginationInfinityPageReturn, UseOffsetPaginationOptions, UseOffsetPaginationReturn, useOffsetPagination } from './useOffsetPagination/index.js';
export { useOnline } from './useOnline/index.js';
export { usePageLeave } from './usePageLeave/index.js';
export { UseParallaxOptions, UseParallaxReturn, useParallax } from './useParallax/index.js';
export { GeneralPermissionDescriptor, UsePermissionOptions, UsePermissionReturn, UsePermissionReturnWithControls, usePermission } from './usePermission/index.js';
export { UsePointerOptions, UsePointerReturn, UsePointerState, usePointer } from './usePointer/index.js';
export { UsePointerSwipeOptions, UsePointerSwipeReturn, usePointerSwipe } from './usePointerSwipe/index.js';
export { ColorSchemeType, usePreferredColorScheme } from './usePreferredColorScheme/index.js';
export { ContrastType, usePreferredContrast } from './usePreferredContrast/index.js';
export { usePreferredDark } from './usePreferredDark/index.js';
export { usePreferredLanguages } from './usePreferredLanguages/index.js';
export { ReducedMotionType, usePreferredReducedMotion } from './usePreferredReducedMotion/index.js';
export { UseRafFnCallbackArguments, UseRafFnOptions, useRafFn } from './useRafFn/index.js';
export { ResizeObserverCallback, ResizeObserverEntry, ResizeObserverSize, UseResizeObserverOptions, UseResizeObserverReturn, useResizeObserver } from './useResizeObserver/index.js';
export { UseScreenOrientationReturn, useScreenOrientation } from './useScreenOrientation/index.js';
export { useScreenSafeArea } from './useScreenSafeArea/index.js';
export { UseScriptTagOptions, UseScriptTagReturn, useScriptTag } from './useScriptTag/index.js';
export { UseScrollOptions, UseScrollReturn, useScroll } from './useScroll/index.js';
export { useScrollLock } from './useScrollLock/index.js';
export { useSessionStorage } from './useSessionStorage/index.js';
export { UseShareOptions, UseShareReturn, useShare } from './useShare/index.js';
export { UseSpeechRecognitionOptions, UseSpeechRecognitionReturn, useSpeechRecognition } from './useSpeechRecognition/index.js';
export { UseSpeechSynthesisOptions, UseSpeechSynthesisReturn, UseSpeechSynthesisStatus, useSpeechSynthesis } from './useSpeechSynthesis/index.js';
export { UseStepperReturn, useStepper } from './useStepper/index.js';
export { Serializer, SerializerAsync, StorageSerializers, UseStorageOptions, useStorage } from './useStorage/index.js';
export { UseStorageAsyncOptions, useStorageAsync } from './useStorageAsync/index.js';
export { UseStyleTagOptions, UseStyleTagReturn, useStyleTag } from './useStyleTag/index.js';
export { useSupported } from './useSupported/index.js';
export { SwipeDirection, UseSwipeOptions, UseSwipeReturn, useSwipe } from './useSwipe/index.js';
export { UseTextDirectionOptions, UseTextDirectionValue, useTextDirection } from './useTextDirection/index.js';
export { UseTextSelectionReturn, useTextSelection } from './useTextSelection/index.js';
export { UseTextareaAutoSizeOptions, UseTextareaAutoSizeReturn, useTextareaAutoSize } from './useTextareaAutoSize/index.js';
export { UseThrottledHistoryTravelAccessorReturn, UseThrottledHistoryTravelOptions, UseThrottledHistoryTravelSignalReturn, useThrottledHistoryTravel } from './useThrottledHistoryTravel/index.js';
export { FormatTimeAgoOptions, UseTimeAgoFormatter, UseTimeAgoMessages, UseTimeAgoMessagesBuiltIn, UseTimeAgoOptions, UseTimeAgoReturn, UseTimeAgoUnit, UseTimeAgoUnitNamesDefault, formatTimeAgo, useTimeAgo } from './useTimeAgo/index.js';
export { UseTimestampOptions, UseTimestampReturn, useTimestamp } from './useTimestamp/index.js';
export { UseTitleOptions, UseTitleOptionsBase, UseTitleReturn, useTitle } from './useTitle/index.js';
export { UrlParams, UseUrlSearchParamsOptions, useUrlSearchParams } from './useUrlSearchParams/index.js';
export { UseUserMediaOptions, UseUserMediaReturn, useUserMedia } from './useUserMedia/index.js';
export { UseVibrateOptions, UseVibrateReturn, useVibrate } from './useVibrate/index.js';
export { UseHorizontalVirtualListOptions, UseVerticalVirtualListOptions, UseVirtualListItem, UseVirtualListOptions, UseVirtualListOptionsBase, UseVirtualListReturn, useVirtualList } from './useVirtualList/index.js';
export { UseWakeLockOptions, UseWakeLockReturn, WakeLockSentinel, useWakeLock } from './useWakeLock/index.js';
export { UseWebNotificationOptions, UseWebNotificationReturn, WebNotificationOptions, useWebNotification } from './useWebNotification/index.js';
export { UseWebSocketOptions, UseWebSocketReturn, WebSocketStatus, useWebSocket } from './useWebSocket/index.js';
export { UseWebWorkerReturn, useWebWorker } from './useWebWorker/index.js';
export { UseWebWorkerFnReturn, UseWebWorkerOptions, WebWorkerStatus, useWebWorkerFn } from './useWebWorkerFn/index.js';
export { useWindowFocus } from './useWindowFocus/index.js';
export { UseWindowScrollReturn, useWindowScroll } from './useWindowScroll/index.js';
export { UseWindowSizeOptions, UseWindowSizeReturn, useWindowSize } from './useWindowSize/index.js';
export { PointerType, Position, RenderableComponent } from './types.js';
export * from '@solidjs-use/shared';
export { SSRHandlersMap, StorageLike, StorageLikeAsync, getSSRHandler, setSSRHandler } from './ssr-handlers.js';
export { breakpointsAntDesign, breakpointsBootstrapV5, breakpointsMasterCss, breakpointsQuasar, breakpointsSematic, breakpointsTailwind, breakpointsVuetify } from './useBreakpoints/breakpoints.js';
export { DefaultMagicKeysAliasMap } from './useMagicKeys/aliasMap.js';
export { ConfigurableDocument, ConfigurableDocumentOrShadowRoot, ConfigurableLocation, ConfigurableNavigator, ConfigurableWindow, defaultDocument, defaultLocation, defaultNavigator, defaultWindow } from './_configurable.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';
import '@solidjs-use/shared/solid-to-vue';
import './useSpeechRecognition/types.js';
`,__e=`export * from '@solidjs-use/shared/solid-to-vue';
`,b_e=`import { Awaitable } from '@solidjs-use/shared';

interface StorageLikeAsync {\r
    getItem: (key: string) => Awaitable<string | null>;\r
    setItem: (key: string, value: string) => Awaitable<void>;\r
    removeItem: (key: string) => Awaitable<void>;\r
}\r
interface StorageLike {\r
    getItem: (key: string) => string | null;\r
    setItem: (key: string, value: string) => void;\r
    removeItem: (key: string) => void;\r
}\r
/**\r
 * @experimental The API is not finalized yet. It might not follow semver.\r
 */\r
interface SSRHandlersMap {\r
    getDefaultStorage: () => StorageLike | undefined;\r
    getDefaultStorageAsync: () => StorageLikeAsync | undefined;\r
    updateHTMLAttrs: (selector: string, attribute: string, value: string) => void;\r
}\r
declare function getSSRHandler<T extends keyof SSRHandlersMap>(key: T, fallback: SSRHandlersMap[T]): SSRHandlersMap[T];\r
declare function getSSRHandler<T extends keyof SSRHandlersMap>(key: T, fallback: SSRHandlersMap[T] | undefined): SSRHandlersMap[T] | undefined;\r
declare function setSSRHandler<T extends keyof SSRHandlersMap>(key: T, fn: SSRHandlersMap[T]): void;

export { SSRHandlersMap, StorageLike, StorageLikeAsync, getSSRHandler, setSSRHandler };
`,v_e=`export { ConfigurableDocument, ConfigurableDocumentOrShadowRoot, ConfigurableLocation, ConfigurableNavigator, ConfigurableWindow, defaultDocument, defaultLocation, defaultNavigator, defaultWindow } from './_configurable.js';

interface Position {\r
    x: number;\r
    y: number;\r
}\r
interface RenderableComponent {\r
    /**\r
     * The element that the component should be rendered as\r
     *\r
     * @default 'div'\r
     */\r
    as?: Object | string;\r
}\r
type PointerType = 'mouse' | 'touch' | 'pen';

export { PointerType, Position, RenderableComponent };
`,C_e=`import { Fn } from '@solidjs-use/shared';
import { Setter, Accessor } from 'solid-js';

/**\r
 * Handle overlapping async evaluations.\r
 *\r
 * @param cancelCallback The provided callback is invoked when a re-evaluation of the computed value is triggered before the previous one finished\r
 */\r
type AsyncComputedOnCancel = (cancelCallback: Fn) => void;\r
interface AsyncComputedOptions {\r
    /**\r
     * Ref passed to receive the updated of async evaluation\r
     */\r
    setEvaluating?: Setter<boolean>;\r
    /**\r
     * Callback when error is caught.\r
     */\r
    onError?: (e: unknown) => void;\r
}\r
/**\r
 * Create an asynchronous computed dependency.\r
 *\r
 * @param evaluationCallback     The promise-returning callback which generates the computed value\r
 * @param initialState           The initial state, used until the first evaluation finishes\r
 * @param optionsOrSignal           Additional options or a Signal passed to receive the updates of the async evaluation\r
 */\r
declare function createAsyncMemo<T>(evaluationCallback: (onCancel: AsyncComputedOnCancel) => T | Promise<T>, initialState?: T, optionsOrSetter?: Setter<boolean> | AsyncComputedOptions): Accessor<T>;

export { AsyncComputedOnCancel, AsyncComputedOptions, createAsyncMemo as asyncMemo, createAsyncMemo };
`,y_e=`import { MaybeAccessor } from '@solidjs-use/shared';

type unAccessorFn<T> = T extends (...args: infer A) => infer R ? (...args: {\r
    [K in keyof A]: MaybeAccessor<A[K]>;\r
}) => R : never;\r
/**\r
 * Make a plain function accepting Accessor and raw values as arguments.\r
 * Returns the same value the unconverted function returns, with proper typing.\r
 */\r
declare const createUnAccessorFn: <T extends Function>(fn: T) => unAccessorFn<T>;

export { createUnAccessorFn, unAccessorFn };
`,w_e=`import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface OnClickOutsideOptions extends ConfigurableWindow {\r
    /**\r
     * List of elements that should not trigger the event.\r
     */\r
    ignore?: Array<MaybeElementAccessor | string>;\r
    /**\r
     * Use capturing phase for internal event listener.\r
     * @default true\r
     */\r
    capture?: boolean;\r
    /**\r
     * Run handler function if focus moves to an iframe.\r
     * @default false\r
     */\r
    detectIframe?: boolean;\r
}\r
type OnClickOutsideHandler<T extends {\r
    detectIframe: OnClickOutsideOptions['detectIframe'];\r
} = {\r
    detectIframe: false;\r
}> = (evt: T['detectIframe'] extends true ? PointerEvent | FocusEvent : PointerEvent) => void;\r
/**\r
 * Listen for clicks outside of an element.\r
 */\r
declare function onClickOutside<T extends OnClickOutsideOptions>(target: MaybeElementAccessor, handler: OnClickOutsideHandler<{\r
    detectIframe: T['detectIframe'];\r
}>, options?: T): (() => void) | undefined;

export { OnClickOutsideHandler, OnClickOutsideOptions, onClickOutside };
`,S_e=`import { MaybeAccessor } from '@solidjs-use/shared';

type KeyPredicate = (event: KeyboardEvent) => boolean;\r
type KeyFilter = true | string | string[] | KeyPredicate;\r
type KeyStrokeEventName = 'keydown' | 'keypress' | 'keyup';\r
interface OnKeyStrokeOptions {\r
    eventName?: KeyStrokeEventName;\r
    target?: MaybeAccessor<EventTarget | null | undefined>;\r
    passive?: boolean;\r
}\r
declare function onKeyStroke(key: KeyFilter, handler: (event: KeyboardEvent) => void, options?: OnKeyStrokeOptions): () => void;\r
declare function onKeyStroke(handler: (event: KeyboardEvent) => void, options?: OnKeyStrokeOptions): () => void;\r
/**\r
 * Listen for keyboard keys being stroked.\r
 */\r
declare function onKeyStroke(key: KeyFilter, handler: (event: KeyboardEvent) => void, options?: OnKeyStrokeOptions): () => void;\r
declare function onKeyStroke(handler: (event: KeyboardEvent) => void, options?: OnKeyStrokeOptions): () => void;\r
/**\r
 * Listen to the keydown event of the given key.\r
 */\r
declare function onKeyDown(key: KeyFilter, handler: (event: KeyboardEvent) => void, options?: Omit<OnKeyStrokeOptions, 'eventName'>): () => void;\r
/**\r
 * Listen to the keypress event of the given key.\r
 */\r
declare function onKeyPressed(key: KeyFilter, handler: (event: KeyboardEvent) => void, options?: Omit<OnKeyStrokeOptions, 'eventName'>): () => void;\r
/**\r
 * Listen to the keyup event of the given key.\r
 */\r
declare function onKeyUp(key: KeyFilter, handler: (event: KeyboardEvent) => void, options?: Omit<OnKeyStrokeOptions, 'eventName'>): () => void;

export { KeyFilter, KeyPredicate, KeyStrokeEventName, OnKeyStrokeOptions, onKeyDown, onKeyPressed, onKeyStroke, onKeyUp };
`,x_e=`import { MaybeElementAccessor } from '@solidjs-use/shared';

interface OnLongPressOptions {\r
    /**\r
     * Time in ms till \`longpress\` gets called\r
     *\r
     * @default 500\r
     */\r
    delay?: number;\r
    modifiers?: OnLongPressModifiers;\r
}\r
interface OnLongPressModifiers {\r
    stop?: boolean;\r
    once?: boolean;\r
    prevent?: boolean;\r
    capture?: boolean;\r
    self?: boolean;\r
}\r
declare function onLongPress(target: MaybeElementAccessor, handler: (evt: PointerEvent) => void, options?: OnLongPressOptions): void;

export { OnLongPressModifiers, OnLongPressOptions, onLongPress };
`,k_e=`import { ConfigurableDocument } from '../_configurable.js';

/**\r
 * Fires when users start typing on non-editable elements.\r
 */\r
declare function onStartTyping(callback: (event: KeyboardEvent) => void, options?: ConfigurableDocument): void;

export { onStartTyping };
`,L_e=`import * as solid_js from 'solid-js';
import { ConfigurableWindow, ConfigurableDocumentOrShadowRoot } from '../_configurable.js';

interface UseActiveElementOptions extends ConfigurableWindow, ConfigurableDocumentOrShadowRoot {\r
}\r
/**\r
 * Reactive \`document.activeElement\`\r
 */\r
declare function useActiveElement<T extends HTMLElement>(options?: UseActiveElementOptions): solid_js.Accessor<T | null | undefined>;

export { UseActiveElementOptions, useActiveElement };
`,T_e=`import { Accessor } from 'solid-js';

interface UseAsyncStateReturn<Data> {\r
    state: Accessor<Data>;\r
    isReady: Accessor<boolean>;\r
    isLoading: Accessor<boolean>;\r
    error: Accessor<unknown>;\r
    execute: (delay?: number, ...args: any[]) => Promise<Data>;\r
}\r
interface UseAsyncStateOptions<T = any> {\r
    /**\r
     * Delay for executing the promise. In milliseconds.\r
     *\r
     * @default 0\r
     */\r
    delay?: number;\r
    /**\r
     * Execute the promise right after the function is invoked.\r
     * Will apply the delay if any.\r
     *\r
     * When set to false, you will need to execute it manually.\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Callback when error is caught.\r
     */\r
    onError?: (e: unknown) => void;\r
    /**\r
     * Callback when success is caught.\r
     */\r
    onSuccess?: (data: T) => void;\r
    /**\r
     * Sets the state to initialState before executing the promise.\r
     *\r
     * This can be useful when calling the execute function more than once (for\r
     * example, to refresh data). When set to false, the current state remains\r
     * unchanged until the promise resolves.\r
     *\r
     * @default true\r
     */\r
    resetOnExecute?: boolean;\r
    /**\r
     *\r
     * An error is thrown when executing the execute function\r
     *\r
     * @default false\r
     */\r
    throwError?: boolean;\r
}\r
/**\r
 * Reactive async state. Will not block your setup function and will trigger changes once\r
 * the promise is ready.\r
 */\r
declare function useAsyncState<Data>(promise: Promise<Data> | ((...args: any[]) => Promise<Data>), initialState: Data, options?: UseAsyncStateOptions<Data>): UseAsyncStateReturn<Data>;

export { UseAsyncStateOptions, UseAsyncStateReturn, useAsyncState };
`,D_e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface ToDataURLOptions {\r
    /**\r
     * MIME type\r
     */\r
    type?: string | undefined;\r
    /**\r
     * Image quality of jpeg or webp\r
     */\r
    quality?: any;\r
}\r
interface UseBase64ObjectOptions<T> {\r
    serializer: (v: T) => string;\r
}\r
interface UseBase64Return {\r
    base64: Accessor<string>;\r
    promise: Accessor<Promise<string>>;\r
    execute: () => Promise<string>;\r
}\r
declare function useBase64(target: MaybeAccessor<string>): UseBase64Return;\r
declare function useBase64(target: MaybeAccessor<Blob>): UseBase64Return;\r
declare function useBase64(target: MaybeAccessor<ArrayBuffer>): UseBase64Return;\r
declare function useBase64(target: MaybeAccessor<HTMLCanvasElement>, options?: ToDataURLOptions): UseBase64Return;\r
declare function useBase64(target: MaybeAccessor<HTMLImageElement>, options?: ToDataURLOptions): UseBase64Return;\r
declare function useBase64<T extends Record<string, unknown>>(target: MaybeAccessor<T>, options?: UseBase64ObjectOptions<T>): UseBase64Return;\r
declare function useBase64<T extends Map<string, unknown>>(target: MaybeAccessor<T>, options?: UseBase64ObjectOptions<T>): UseBase64Return;\r
declare function useBase64<T extends Set<unknown>>(target: MaybeAccessor<T>, options?: UseBase64ObjectOptions<T>): UseBase64Return;\r
declare function useBase64<T>(target: MaybeAccessor<T[]>, options?: UseBase64ObjectOptions<T[]>): UseBase64Return;

export { ToDataURLOptions, UseBase64ObjectOptions, UseBase64Return, useBase64 };
`,E_e=`declare function getDefaultSerialization<T extends Object>(target: T): ((v: unknown[]) => string) | ((v: Record<string, unknown>) => string) | ((v: Set<unknown>) => string) | ((v: Map<string, unknown>) => string);

export { getDefaultSerialization };
`,A_e=`import * as solid_js from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';

interface BatteryManager extends EventTarget {\r
    charging: boolean;\r
    chargingTime: number;\r
    dischargingTime: number;\r
    level: number;\r
}\r
/**\r
 * Reactive Battery Status API.\r
 */\r
declare function useBattery({ navigator }?: ConfigurableNavigator): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    charging: solid_js.Accessor<boolean>;\r
    chargingTime: solid_js.Accessor<number>;\r
    dischargingTime: solid_js.Accessor<number>;\r
    level: solid_js.Accessor<number>;\r
};\r
type UseBatteryReturn = ReturnType<typeof useBattery>;

export { BatteryManager, UseBatteryReturn, useBattery };
`,I_e=`import { Accessor } from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';

interface UseBluetoothRequestDeviceOptions {\r
    /**\r
     *\r
     * An array of BluetoothScanFilters. This filter consists of an array\r
     * of BluetoothServiceUUIDs, a name parameter, and a namePrefix parameter.\r
     *\r
     */\r
    filters?: BluetoothLEScanFilter[] | undefined;\r
    /**\r
     *\r
     * An array of BluetoothServiceUUIDs.\r
     *\r
     * @see https://developer.mozilla.org/en-US/docs/Web/API/BluetoothRemoteGATTService/uuid\r
     *\r
     */\r
    optionalServices?: BluetoothServiceUUID[] | undefined;\r
}\r
interface UseBluetoothOptions extends UseBluetoothRequestDeviceOptions, ConfigurableNavigator {\r
    /**\r
     *\r
     * A boolean value indicating that the requesting script can accept all Bluetooth\r
     * devices. The default is false.\r
     *\r
     * !! This may result in a bunch of unrelated devices being shown\r
     * in the chooser and energy being wasted as there are no filters.\r
     *\r
     *\r
     * Use it with caution.\r
     *\r
     * @default false\r
     *\r
     */\r
    acceptAllDevices?: boolean;\r
}\r
declare function useBluetooth(options?: UseBluetoothOptions): UseBluetoothReturn;\r
interface UseBluetoothReturn {\r
    isSupported: Accessor<boolean>;\r
    isConnected: Accessor<boolean>;\r
    device: Accessor<BluetoothDevice | undefined>;\r
    requestDevice: () => Promise<void>;\r
    server: Accessor<BluetoothRemoteGATTServer | undefined>;\r
    error: Accessor<unknown | null>;\r
}

export { UseBluetoothOptions, UseBluetoothRequestDeviceOptions, UseBluetoothReturn, useBluetooth };
`,N_e=`/**\r
 * Breakpoints from Tailwind V2\r
 *\r
 * @see https://tailwindcss.com/docs/breakpoints\r
 */\r
declare const breakpointsTailwind: {\r
    sm: number;\r
    md: number;\r
    lg: number;\r
    xl: number;\r
    '2xl': number;\r
};\r
/**\r
 * Breakpoints from Bootstrap V5\r
 *\r
 * @see https://getbootstrap.com/docs/5.0/layout/breakpoints\r
 */\r
declare const breakpointsBootstrapV5: {\r
    sm: number;\r
    md: number;\r
    lg: number;\r
    xl: number;\r
    xxl: number;\r
};\r
/**\r
 * Breakpoints from Vuetify V2\r
 *\r
 * @see https://vuetifyjs.com/en/features/breakpoints\r
 */\r
declare const breakpointsVuetify: {\r
    xs: number;\r
    sm: number;\r
    md: number;\r
    lg: number;\r
};\r
/**\r
 * Breakpoints from Ant Design\r
 *\r
 * @see https://ant.design/components/layout/#breakpoint-width\r
 */\r
declare const breakpointsAntDesign: {\r
    xs: number;\r
    sm: number;\r
    md: number;\r
    lg: number;\r
    xl: number;\r
    xxl: number;\r
};\r
/**\r
 * Breakpoints from Quasar V2\r
 *\r
 * @see https://quasar.dev/style/breakpoints\r
 */\r
declare const breakpointsQuasar: {\r
    xs: number;\r
    sm: number;\r
    md: number;\r
    lg: number;\r
};\r
/**\r
 * Sematic Breakpoints\r
 */\r
declare const breakpointsSematic: {\r
    mobileS: number;\r
    mobileM: number;\r
    mobileL: number;\r
    tablet: number;\r
    laptop: number;\r
    laptopL: number;\r
    desktop4K: number;\r
};\r
/**\r
 * Breakpoints from Master CSS\r
 *\r
 * @see https://docs.master.co/css/breakpoints\r
 */\r
declare const breakpointsMasterCss: {\r
    '3xs': number;\r
    '2xs': number;\r
    xs: number;\r
    sm: number;\r
    md: number;\r
    lg: number;\r
    xl: number;\r
    '2xl': number;\r
    '3xl': number;\r
    '4xl': number;\r
};

export { breakpointsAntDesign, breakpointsBootstrapV5, breakpointsMasterCss, breakpointsQuasar, breakpointsSematic, breakpointsTailwind, breakpointsVuetify };
`,M_e=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';
export { breakpointsAntDesign, breakpointsBootstrapV5, breakpointsMasterCss, breakpointsQuasar, breakpointsSematic, breakpointsTailwind, breakpointsVuetify } from './breakpoints.js';

type Breakpoints<K extends string = string> = Record<K, number | string>;\r
/**\r
 * Reactively viewport breakpoints\r
 */\r
declare function useBreakpoints<K extends string>(breakpoints: Breakpoints<K>, options?: ConfigurableWindow): {\r
    greater(k: K): Accessor<boolean>;\r
    greaterOrEqual: (k: K) => Accessor<boolean>;\r
    smaller(k: K): Accessor<boolean>;\r
    smallerOrEqual(k: K): Accessor<boolean>;\r
    between(a: K, b: K): Accessor<boolean>;\r
    isGreater(k: K): boolean;\r
    isGreaterOrEqual(k: K): boolean;\r
    isSmaller(k: K): boolean;\r
    isSmallerOrEqual(k: K): boolean;\r
    isInBetween(a: K, b: K): boolean;\r
} & Record<K, Accessor<boolean>>;\r
type UseBreakpointsReturn<K extends string = string> = {\r
    greater: (k: K) => Accessor<boolean>;\r
    greaterOrEqual: (k: K) => Accessor<boolean>;\r
    smaller: (k: K) => Accessor<boolean>;\r
    smallerOrEqual: (k: K) => Accessor<boolean>;\r
    between: (a: K, b: K) => Accessor<boolean>;\r
    isGreater: (k: K) => boolean;\r
    isGreaterOrEqual: (k: K) => boolean;\r
    isSmaller: (k: K) => boolean;\r
    isSmallerOrEqual: (k: K) => boolean;\r
    isInBetween: (a: K, b: K) => boolean;\r
} & Record<K, Accessor<boolean>>;

export { Breakpoints, UseBreakpointsReturn, useBreakpoints };
`,R_e=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface UseBroadcastChannelOptions extends ConfigurableWindow {\r
    /**\r
     * The name of the channel.\r
     */\r
    name: string;\r
}\r
/**\r
 * Reactive BroadcastChannel\r
 */\r
declare const useBroadcastChannel: <D, P>(options: UseBroadcastChannelOptions) => UseBroadcastChannelReturn<D, P>;\r
interface UseBroadcastChannelReturn<D, P> {\r
    isSupported: Accessor<boolean>;\r
    channel: Accessor<BroadcastChannel | undefined>;\r
    data: Accessor<D>;\r
    post: (data: P) => void;\r
    close: () => void;\r
    error: Accessor<Event | null | undefined>;\r
    isClosed: Accessor<boolean>;\r
}

export { UseBroadcastChannelOptions, UseBroadcastChannelReturn, useBroadcastChannel };
`,O_e=`import { useBrowserLocation } from './index.js';
import { Component, JSX } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface UseBrowserLocationProps extends ConfigurableWindow {\r
    children?: (data: ReturnType<typeof useBrowserLocation>) => JSX.Element;\r
}\r
declare const UseBrowserLocation: Component<UseBrowserLocationProps>;

export { UseBrowserLocation };
`,P_e=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface BrowserLocationState {\r
    trigger: string;\r
    state?: any;\r
    length?: number;\r
    hash?: string;\r
    host?: string;\r
    hostname?: string;\r
    href?: string;\r
    origin?: string;\r
    pathname?: string;\r
    port?: string;\r
    protocol?: string;\r
    search?: string;\r
}\r
/**\r
 * Reactive browser location.\r
 */\r
declare function useBrowserLocation({ window }?: ConfigurableWindow): solid_js.Accessor<BrowserLocationState>;\r
type UseBrowserLocationReturn = ReturnType<typeof useBrowserLocation>;

export { BrowserLocationState, UseBrowserLocationReturn, useBrowserLocation };
`,F_e=`import { ConfigurableNavigator } from '../_configurable.js';
import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UseClipboardOptions<Source> extends ConfigurableNavigator {\r
    /**\r
     * Enabled reading for clipboard\r
     *\r
     * @default false\r
     */\r
    read?: boolean;\r
    /**\r
     * Copy source\r
     */\r
    source?: Source;\r
    /**\r
     * Milliseconds to reset state of \`copied\` Signal\r
     *\r
     * @default 1500\r
     */\r
    copiedDuring?: number;\r
    /**\r
     * Whether fallback to document.execCommand('copy') if clipboard is undefined.\r
     *\r
     * @default false\r
     */\r
    legacy?: boolean;\r
}\r
interface UseClipboardReturn<Optional> {\r
    isSupported: Accessor<boolean>;\r
    text: Accessor<string>;\r
    copied: Accessor<boolean>;\r
    copy: Optional extends true ? (text?: string) => Promise<void> : (text: string) => Promise<void>;\r
}\r
/**\r
 * Reactive Clipboard API.\r
 */\r
declare function useClipboard(options?: UseClipboardOptions<undefined>): UseClipboardReturn<false>;\r
declare function useClipboard(options: UseClipboardOptions<MaybeAccessor<string>>): UseClipboardReturn<true>;

export { UseClipboardOptions, UseClipboardReturn, useClipboard };
`,B_e=`import * as solid_js from 'solid-js';
import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { OnOptions } from 'solid-js/types/reactive/signal';

interface UseClonedOptions<T = any> extends OnOptions {\r
    /**\r
     * Custom clone function.\r
     *\r
     * By default, it use \`JSON.parse(JSON.stringify(value))\` to clone.\r
     */\r
    clone?: (source: T) => T;\r
    /**\r
     * Manually sync the Accessor\r
     *\r
     * @default false\r
     */\r
    manual?: boolean;\r
}\r
interface UseClonedReturn<T> {\r
    /**\r
     * Cloned Accessor\r
     */\r
    cloned: Accessor<T>;\r
    /**\r
     * Sync cloned data with source manually\r
     */\r
    sync: () => void;\r
}\r
type CloneFn<F, T = F> = (x: F) => T;\r
declare function cloneFnJSON<T>(source: T): T;\r
declare function useCloned<T>(source: MaybeAccessor<T>, options?: UseClonedOptions): {\r
    cloned: Accessor<T>;\r
    setCloned: solid_js.Setter<T>;\r
    sync: () => void;\r
};

export { CloneFn, UseClonedOptions, UseClonedReturn, cloneFnJSON, useCloned };
`,W_e=`import { UseStorageOptions } from '../useStorage/index.js';
import { Signal, Accessor } from 'solid-js';
import { ComputedSetter } from '@solidjs-use/shared/solid-to-vue';
import { StorageLike } from '../ssr-handlers.js';
import '../_configurable.js';
import '@solidjs-use/shared';

type BasicColorSchema = 'light' | 'dark' | 'auto';\r
interface UseColorModeOptions<T extends string = BasicColorSchema> extends UseStorageOptions<T | BasicColorSchema> {\r
    /**\r
     * CSS Selector for the target element applying to\r
     *\r
     * @default 'html'\r
     */\r
    selector?: string;\r
    /**\r
     * HTML attribute applying the target element\r
     *\r
     * @default 'class'\r
     */\r
    attribute?: string;\r
    /**\r
     * The initial color mode\r
     *\r
     * @default 'auto'\r
     */\r
    initialValue?: T | BasicColorSchema;\r
    /**\r
     * Prefix when adding value to the attribute\r
     */\r
    modes?: Partial<Record<T | BasicColorSchema, string>>;\r
    /**\r
     * A custom handler for handle the updates.\r
     * When specified, the default behavior will be overridden.\r
     *\r
     * @default undefined\r
     */\r
    onChanged?: (mode: T | BasicColorSchema, defaultHandler: (mode: T | BasicColorSchema) => void) => void;\r
    /**\r
     * Custom storage Signal\r
     *\r
     * When provided, \`useStorage\` will be skipped\r
     */\r
    storageSignal?: Signal<T | BasicColorSchema>;\r
    /**\r
     * Key to persist the data into localStorage/sessionStorage.\r
     *\r
     * Pass \`null\` to disable persistence\r
     *\r
     * @default 'solidjs-use-color-scheme'\r
     */\r
    storageKey?: string | null;\r
    /**\r
     * Storage object, can be localStorage or sessionStorage\r
     *\r
     * @default localStorage\r
     */\r
    storage?: StorageLike;\r
    /**\r
     * Emit \`auto\` mode from state\r
     *\r
     * When set to \`true\`, preferred mode won't be translated into \`light\` or \`dark\`.\r
     * This is useful when the fact that \`auto\` mode was selected needs to be known.\r
     *\r
     * @default undefined\r
     */\r
    emitAuto?: boolean;\r
}\r
/**\r
 * Reactive color mode with auto data persistence.\r
 */\r
declare function useColorMode<T extends string = BasicColorSchema>(options?: UseColorModeOptions<T>): [Accessor<T | BasicColorSchema>, ComputedSetter<T | BasicColorSchema>];

export { BasicColorSchema, UseColorModeOptions, useColorMode };
`,V_e=`import { Accessor, Setter } from 'solid-js';
import { EventHookOn } from '@solidjs-use/shared';

type UseConfirmDialogRevealResult<C, D> = {\r
    data?: C;\r
    isCanceled: false;\r
} | {\r
    data?: D;\r
    isCanceled: true;\r
};\r
interface UseConfirmDialogReturn<RevealData, ConfirmData, CancelData> {\r
    /**\r
     * Opens the dialog.\r
     * Create promise and return it. Triggers \`onReveal\` hook.\r
     */\r
    reveal: (data?: RevealData) => Promise<UseConfirmDialogRevealResult<ConfirmData, CancelData>>;\r
    /**\r
     * Confirms and closes the dialog. Triggers a callback inside \`onConfirm\` hook.\r
     * Resolves promise from \`reveal()\` with \`data\` and \`isCanceled\` Accessor with \`false\` value.\r
     * Can accept any data and to pass it to \`onConfirm\` hook.\r
     */\r
    confirm: (data?: ConfirmData) => void;\r
    /**\r
     * Cancels and closes the dialog. Triggers a callback inside \`onCancel\` hook.\r
     * Resolves promise from \`reveal()\` with \`data\` and \`isCanceled\` Accessor with \`true\` value.\r
     * Can accept any data and to pass it to \`onCancel\` hook.\r
     */\r
    cancel: (data?: CancelData) => void;\r
    /**\r
     * Event Hook to be triggered right before dialog creating.\r
     */\r
    onReveal: EventHookOn<RevealData>;\r
    /**\r
     * Event Hook to be called on \`confirm()\`.\r
     * Gets data object from \`confirm\` function.\r
     */\r
    onConfirm: EventHookOn<ConfirmData>;\r
    /**\r
     * Event Hook to be called on \`cancel()\`.\r
     * Gets data object from \`cancel\` function.\r
     */\r
    onCancel: EventHookOn<CancelData>;\r
}\r
/**\r
 * Hooks for creating confirm dialogs. Useful for modal windows, popups and logins.\r
 *\r
 * @param setRevealed \`Setter<boolean>\` that handles a modal window\r
 */\r
declare function useConfirmDialog<RevealData = any, ConfirmData = any, CancelData = any>(): UseConfirmDialogReturn<RevealData, ConfirmData, CancelData> & {\r
    isRevealed: Accessor<boolean>;\r
};\r
declare function useConfirmDialog<RevealData = any, ConfirmData = any, CancelData = any>(setRevealed: Setter<boolean>): UseConfirmDialogReturn<RevealData, ConfirmData, CancelData>;

export { UseConfirmDialogReturn, UseConfirmDialogRevealResult, useConfirmDialog };
`,H_e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

/**\r
 * Cubic bezier points\r
 */\r
type CubicBezierPoints = [number, number, number, number];\r
/**\r
 * Easing function\r
 */\r
type EasingFunction = (n: number) => number;\r
/**\r
 * Transition options\r
 */\r
interface UseCssTransitionOptions {\r
    /**\r
     * Milliseconds to wait before starting transition\r
     */\r
    delay?: MaybeAccessor<number>;\r
    /**\r
     * Disables the transition\r
     */\r
    disabled?: MaybeAccessor<boolean>;\r
    /**\r
     * Transition duration in milliseconds\r
     */\r
    duration?: MaybeAccessor<number>;\r
    /**\r
     * Callback to execute after transition finishes\r
     */\r
    onFinished?: () => void;\r
    /**\r
     * Callback to execute after transition starts\r
     */\r
    onStarted?: () => void;\r
    /**\r
     * Easing function or cubic bezier points for calculating transition values\r
     */\r
    transition?: MaybeAccessor<EasingFunction | CubicBezierPoints>;\r
}\r
/**\r
 * Common transitions\r
 *\r
 * @see https://easings.net\r
 */\r
declare const TransitionPresets: Record<"easeInSine" | "easeOutSine" | "easeInOutSine" | "easeInQuad" | "easeOutQuad" | "easeInOutQuad" | "easeInCubic" | "easeOutCubic" | "easeInOutCubic" | "easeInQuart" | "easeOutQuart" | "easeInOutQuart" | "easeInQuint" | "easeOutQuint" | "easeInOutQuint" | "easeInExpo" | "easeOutExpo" | "easeInOutExpo" | "easeInCirc" | "easeOutCirc" | "easeInOutCirc" | "easeInBack" | "easeOutBack" | "easeInOutBack", CubicBezierPoints> & {\r
    linear: EasingFunction;\r
};\r
declare function useCssTransition(source: Accessor<number>, options?: UseCssTransitionOptions): Accessor<number>;\r
declare function useCssTransition<T extends Array<MaybeAccessor<number>>>(source: [...T], options?: UseCssTransitionOptions): Accessor<{\r
    [K in keyof T]: number;\r
}>;\r
declare function useCssTransition<T extends Accessor<number[]>>(source: T, options?: UseCssTransitionOptions): Accessor<number[]>;

export { CubicBezierPoints, EasingFunction, TransitionPresets, UseCssTransitionOptions, useCssTransition };
`,U_e=`import { Signal } from 'solid-js';
import { MaybeAccessor, MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface UseCssVarOptions extends ConfigurableWindow {\r
    initialValue?: string;\r
}\r
/**\r
 * Manipulate CSS variables.\r
 */\r
declare function useCssVar(prop: MaybeAccessor<string>, target?: MaybeElementAccessor, { window, initialValue }?: UseCssVarOptions): Signal<string>;

export { UseCssVarOptions, useCssVar };
`,j_e=`import { Signal, Accessor, Setter } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UseCycleListOptions<T> {\r
    /**\r
     * The initial value of the state.\r
     * A Accessor can be provided to reuse.\r
     */\r
    initialValue?: MaybeAccessor<T> | Signal<T>;\r
    /**\r
     * The default index when\r
     */\r
    fallbackIndex?: number;\r
    /**\r
     * Custom function to get the index of the current value.\r
     */\r
    getIndexOf?: (value: T, list: T[]) => number;\r
}\r
/**\r
 * Cycle through a list of items\r
 */\r
declare function useCycleList<T>(list: T[], options?: UseCycleListOptions<T>): UseCycleListReturn<T>;\r
interface UseCycleListReturn<T> {\r
    state: Accessor<T>;\r
    setState: Setter<T>;\r
    index: Accessor<number>;\r
    next: (n?: number) => T;\r
    prev: (n?: number) => T;\r
}

export { UseCycleListOptions, UseCycleListReturn, useCycleList };
`,$_e=`import * as _solidjs_use_shared_solid_to_vue from '@solidjs-use/shared/solid-to-vue';
import { UseColorModeOptions } from '../useColorMode/index.js';
import '../useStorage/index.js';
import '../_configurable.js';
import '../ssr-handlers.js';
import '@solidjs-use/shared';
import 'solid-js';

interface UseDarkOptions extends Omit<UseColorModeOptions, 'modes' | 'onChanged'> {\r
    /**\r
     * Value applying to the target element when isDark=true\r
     *\r
     * @default 'dark'\r
     */\r
    valueDark?: string;\r
    /**\r
     * Value applying to the target element when isDark=false\r
     *\r
     * @default ''\r
     */\r
    valueLight?: string;\r
    /**\r
     * A custom handler for handle the updates.\r
     * When specified, the default behavior will be overridden.\r
     *\r
     * @default undefined\r
     */\r
    onChanged?: (isDark: boolean) => void;\r
}\r
/**\r
 * Reactive dark mode with auto data persistence.\r
 */\r
declare function useDark(options?: UseDarkOptions): _solidjs_use_shared_solid_to_vue.WritableComputedReturn<boolean>;

export { UseDarkOptions, useDark };
`,z_e=`import { MaybeAccessor } from '@solidjs-use/shared';
import { Accessor, Signal } from 'solid-js';
import { UseHistoryTravelAccessorReturn, UseHistoryTravelSignalReturn, UseHistoryTravelOptions } from '../useHistoryTravel/index.js';
import '../useManualHistoryTravel/index.js';
import '../useCloned/index.js';
import 'solid-js/types/reactive/signal';

type UseDebouncedHistoryTravelAccessorReturn<Raw, Serialized = Raw> = UseHistoryTravelAccessorReturn<Raw, Serialized>;\r
type UseDebouncedHistoryTravelSignalReturn<Raw, Serialized = Raw> = UseHistoryTravelSignalReturn<Raw, Serialized>;\r
/**\r
 * Shorthand for \`useHistoryTravel\` with debounce filter.\r
 */\r
declare function useDebouncedHistoryTravel<Raw, Serialized = Raw>(source: Accessor<Raw>, options?: Omit<UseHistoryTravelOptions<Raw, Serialized>, 'eventFilter'> & {\r
    debounce?: MaybeAccessor<number>;\r
}): UseDebouncedHistoryTravelAccessorReturn<Raw, Serialized>;\r
declare function useDebouncedHistoryTravel<Raw, Serialized = Raw>(source: Signal<Raw>, options?: Omit<UseHistoryTravelOptions<Raw, Serialized>, 'eventFilter'> & {\r
    debounce?: MaybeAccessor<number>;\r
}): UseDebouncedHistoryTravelSignalReturn<Raw, Serialized>;

export { UseDebouncedHistoryTravelAccessorReturn, UseDebouncedHistoryTravelSignalReturn, useDebouncedHistoryTravel };
`,K_e=`import * as solid_js from 'solid-js';
import { ConfigurableEventFilter } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface DeviceMotionOptions extends ConfigurableWindow, ConfigurableEventFilter {\r
}\r
/**\r
 * Reactive DeviceMotionEvent.\r
 */\r
declare function useDeviceMotion(options?: DeviceMotionOptions): {\r
    acceleration: solid_js.Accessor<DeviceMotionEventAcceleration | null>;\r
    accelerationIncludingGravity: solid_js.Accessor<DeviceMotionEventAcceleration | null>;\r
    rotationRate: solid_js.Accessor<DeviceMotionEventRotationRate | null>;\r
    interval: solid_js.Accessor<number>;\r
};\r
type UseDeviceMotionReturn = ReturnType<typeof useDeviceMotion>;

export { DeviceMotionOptions, UseDeviceMotionReturn, useDeviceMotion };
`,G_e=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive DeviceOrientationEvent.\r
 */\r
declare function useDeviceOrientation(options?: ConfigurableWindow): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    isAbsolute: solid_js.Accessor<boolean>;\r
    alpha: solid_js.Accessor<number | null>;\r
    beta: solid_js.Accessor<number | null>;\r
    gamma: solid_js.Accessor<number | null>;\r
};\r
type UseDeviceOrientationReturn = ReturnType<typeof useDeviceOrientation>;

export { UseDeviceOrientationReturn, useDeviceOrientation };
`,q_e=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactively track \`window.devicePixelRatio\`.\r
 */\r
declare function useDevicePixelRatio({ window }?: ConfigurableWindow): {\r
    pixelRatio: solid_js.Accessor<number>;\r
};\r
type UseDevicePixelRatioReturn = ReturnType<typeof useDevicePixelRatio>;

export { UseDevicePixelRatioReturn, useDevicePixelRatio };
`,Z_e=`import { Accessor } from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';

interface UseDevicesListOptions extends ConfigurableNavigator {\r
    onUpdated?: (devices: MediaDeviceInfo[]) => void;\r
    /**\r
     * Request for permissions immediately if it's not granted,\r
     * otherwise label and deviceIds could be empty\r
     *\r
     * @default false\r
     */\r
    requestPermissions?: boolean;\r
    /**\r
     * Request for types of media permissions\r
     *\r
     * @default { audio: true, video: true }\r
     */\r
    constraints?: MediaStreamConstraints;\r
}\r
interface UseDevicesListReturn {\r
    /**\r
     * All devices\r
     */\r
    devices: Accessor<MediaDeviceInfo[]>;\r
    videoInputs: Accessor<MediaDeviceInfo[]>;\r
    audioInputs: Accessor<MediaDeviceInfo[]>;\r
    audioOutputs: Accessor<MediaDeviceInfo[]>;\r
    permissionGranted: Accessor<boolean>;\r
    ensurePermissions: () => Promise<boolean>;\r
    isSupported: Accessor<boolean>;\r
}\r
/**\r
 * Reactive \`enumerateDevices\` listing available input/output devices\r
 */\r
declare function useDevicesList(options?: UseDevicesListOptions): UseDevicesListReturn;

export { UseDevicesListOptions, UseDevicesListReturn, useDevicesList };
`,Y_e=`import * as solid_js from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';
import { MaybeSignal } from '@solidjs-use/shared';

interface UseDisplayMediaOptions extends ConfigurableNavigator {\r
    /**\r
     * If the stream is enabled\r
     * @default false\r
     */\r
    enabled?: MaybeSignal<boolean>;\r
    /**\r
     * If the stream video media constraints\r
     */\r
    video?: boolean | MediaTrackConstraints | undefined;\r
    /**\r
     * If the stream audio media constraints\r
     */\r
    audio?: boolean | MediaTrackConstraints | undefined;\r
}\r
/**\r
 * Reactive \`mediaDevices.getDisplayMedia\` streaming\r
 */\r
declare function useDisplayMedia(options?: UseDisplayMediaOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    stream: solid_js.Accessor<MediaStream | undefined>;\r
    start: () => Promise<MediaStream | undefined>;\r
    stop: () => void;\r
    enabled: solid_js.Accessor<boolean>;\r
    setEnabled: solid_js.Setter<boolean>;\r
};\r
type UseDisplayMediaReturn = ReturnType<typeof useDisplayMedia>;

export { UseDisplayMediaOptions, UseDisplayMediaReturn, useDisplayMedia };
`,X_e=`import { Accessor } from 'solid-js';
import { ConfigurableDocument } from '../_configurable.js';

/**\r
 * Reactively track \`document.visibilityState\`.\r
 */\r
declare function useDocumentVisibility({ document }?: ConfigurableDocument): Accessor<DocumentVisibilityState>;

export { useDocumentVisibility };
`,Q_e=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { PointerType, Position } from '../types.js';
import '../_configurable.js';

interface UseDraggableOptions {\r
    /**\r
     * Only start the dragging when click on the element directly\r
     *\r
     * @default false\r
     */\r
    exact?: MaybeAccessor<boolean>;\r
    /**\r
     * Prevent events defaults\r
     *\r
     * @default false\r
     */\r
    preventDefault?: MaybeAccessor<boolean>;\r
    /**\r
     * Prevent events propagation\r
     *\r
     * @default false\r
     */\r
    stopPropagation?: MaybeAccessor<boolean>;\r
    /**\r
     * Element to attach \`pointermove\` and \`pointerup\` events to.\r
     *\r
     * @default window\r
     */\r
    draggingElement?: MaybeAccessor<HTMLElement | SVGElement | Window | Document | null | undefined>;\r
    /**\r
     * Handle that triggers the drag event\r
     *\r
     * @default target\r
     */\r
    handle?: MaybeAccessor<HTMLElement | SVGElement | null | undefined>;\r
    /**\r
     * Pointer types that listen to.\r
     *\r
     * @default ['mouse', 'touch', 'pen']\r
     */\r
    pointerTypes?: PointerType[];\r
    /**\r
     * Initial position of the element.\r
     *\r
     * @default { x: 0, y: 0 }\r
     */\r
    initialValue?: MaybeAccessor<Position>;\r
    /**\r
     * Callback when the dragging starts. Return \`false\` to prevent dragging.\r
     */\r
    onStart?: (position: Position, event: PointerEvent) => void | false;\r
    /**\r
     * Callback during dragging.\r
     */\r
    onMove?: (position: Position, event: PointerEvent) => void;\r
    /**\r
     * Callback when dragging end.\r
     */\r
    onEnd?: (position: Position, event: PointerEvent) => void;\r
}\r
/**\r
 * Make elements draggable.\r
 */\r
declare function useDraggable(target: MaybeAccessor<HTMLElement | SVGElement | null | undefined>, options?: UseDraggableOptions): {\r
    x: () => number;\r
    y: () => number;\r
    position: solid_js.Accessor<Position>;\r
    isDragging: solid_js.Accessor<boolean>;\r
    style: solid_js.Accessor<{\r
        left: string;\r
        top: string;\r
    }>;\r
};\r
type UseDraggableReturn = ReturnType<typeof useDraggable>;

export { UseDraggableOptions, UseDraggableReturn, useDraggable };
`,J_e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UseDropZoneReturn {\r
    isOverDropZone: Accessor<boolean>;\r
}\r
declare function useDropZone(target: MaybeAccessor<HTMLElement | null | undefined>, onDrop?: (files: File[] | null) => void): UseDropZoneReturn;

export { UseDropZoneReturn, useDropZone };
`,ebe=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';

interface UseElementBoundingOptions {\r
    /**\r
     * Reset values to 0 on component unmounted\r
     *\r
     * @default true\r
     */\r
    reset?: boolean;\r
    /**\r
     * Listen to window resize event\r
     *\r
     * @default true\r
     */\r
    windowResize?: boolean;\r
    /**\r
     * Listen to window scroll event\r
     *\r
     * @default true\r
     */\r
    windowScroll?: boolean;\r
    /**\r
     * Immediately call update on component mounted\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
}\r
/**\r
 * Reactive bounding box of an HTML element.\r
 */\r
declare function useElementBounding(target: MaybeElementAccessor, options?: UseElementBoundingOptions): {\r
    height: solid_js.Accessor<number>;\r
    bottom: solid_js.Accessor<number>;\r
    left: solid_js.Accessor<number>;\r
    right: solid_js.Accessor<number>;\r
    top: solid_js.Accessor<number>;\r
    width: solid_js.Accessor<number>;\r
    x: solid_js.Accessor<number>;\r
    y: solid_js.Accessor<number>;\r
    update: () => void;\r
};\r
type UseElementBoundingReturn = ReturnType<typeof useElementBounding>;

export { UseElementBoundingOptions, UseElementBoundingReturn, useElementBounding };
`,tbe=`import * as _solidjs_use_shared from '@solidjs-use/shared';
import { MaybeAccessor } from '@solidjs-use/shared';
import * as solid_js from 'solid-js';
import { ConfigurableDocument } from '../_configurable.js';

interface UseElementByPointOptions extends ConfigurableDocument {\r
    x: MaybeAccessor<number>;\r
    y: MaybeAccessor<number>;\r
}\r
/**\r
 * Reactive element by point.\r
 */\r
declare function useElementByPoint(options: UseElementByPointOptions): {\r
    isActive: solid_js.Accessor<boolean>;\r
    pause: _solidjs_use_shared.Fn;\r
    resume: _solidjs_use_shared.Fn;\r
    element: solid_js.Accessor<HTMLElement | null>;\r
};\r
type UseElementByPointReturn = ReturnType<typeof useElementByPoint>;

export { UseElementByPointOptions, UseElementByPointReturn, useElementByPoint };
`,nbe=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

declare function useElementHover(el: MaybeAccessor<EventTarget | null | undefined>): Accessor<boolean>;

export { useElementHover };
`,ibe=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { UseResizeObserverOptions } from '../useResizeObserver/index.js';
import '../_configurable.js';

interface ElementSize {\r
    width: number;\r
    height: number;\r
}\r
/**\r
 * Reactive size of an HTML element.\r
 */\r
declare function useElementSize(target: MaybeElementAccessor, initialSize?: ElementSize, options?: UseResizeObserverOptions): {\r
    width: solid_js.Accessor<number>;\r
    height: solid_js.Accessor<number>;\r
};\r
type UseElementSizeReturn = ReturnType<typeof useElementSize>;

export { ElementSize, UseElementSizeReturn, useElementSize };
`,sbe=`import * as solid_js from 'solid-js';
import { MaybeAccessor, MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface UseElementVisibilityOptions extends ConfigurableWindow {\r
    scrollTarget?: MaybeAccessor<HTMLElement | undefined | null>;\r
}\r
/**\r
 * Tracks the visibility of an element within the viewport.\r
 */\r
declare function useElementVisibility(element: MaybeElementAccessor, { window, scrollTarget }?: UseElementVisibilityOptions): solid_js.Accessor<boolean>;

export { UseElementVisibilityOptions, useElementVisibility };
`,rbe=`import { Fn } from '@solidjs-use/shared';

type EventBusListener<T = unknown, P = any> = (event: T, payload?: P) => void;\r
type EventBusEvents<T, P = any> = Array<EventBusListener<T, P>>;\r
type EventBusKey<T> = Symbol;\r
type EventBusIdentifier<T = unknown> = EventBusKey<T> | string | number;\r
interface UseEventBusReturn<T, P> {\r
    /**\r
     * Subscribe to an event. When calling emit, the listeners will execute.\r
     * @param listener watch listener.\r
     * @returns a stop function to remove the current callback.\r
     */\r
    on: (listener: EventBusListener<T, P>) => Fn;\r
    /**\r
     * Similar to \`on\`, but only fires once\r
     * @param listener watch listener.\r
     * @returns a stop function to remove the current callback.\r
     */\r
    once: (listener: EventBusListener<T, P>) => Fn;\r
    /**\r
     * Emit an event, the corresponding event listeners will execute.\r
     * @param event data sent.\r
     */\r
    emit: (event?: T, payload?: P) => void;\r
    /**\r
     * Remove the corresponding listener.\r
     * @param listener watch listener.\r
     */\r
    off: (listener: EventBusListener<T>) => void;\r
    /**\r
     * Clear all events\r
     */\r
    reset: () => void;\r
}\r
declare function useEventBus<T = unknown, P = any>(key: EventBusIdentifier<T>): UseEventBusReturn<T, P>;

export { EventBusEvents, EventBusIdentifier, EventBusKey, EventBusListener, UseEventBusReturn, useEventBus };
`,obe=`import { EventBusIdentifier, EventBusEvents } from './index.js';
import '@solidjs-use/shared';

declare const events: Map<EventBusIdentifier<T>, EventBusEvents<any, any>>;

export { events };
`,abe=`import { Arrayable, Fn, MaybeAccessor } from '@solidjs-use/shared';

interface InferEventTarget<Events> {\r
    addEventListener: (event: Events, fn?: any, options?: any) => any;\r
    removeEventListener: (event: Events, fn?: any, options?: any) => any;\r
}\r
type WindowEventName = keyof WindowEventMap;\r
type DocumentEventName = keyof DocumentEventMap;\r
type GeneralEventListener<E = Event> = (evt: E) => void;\r
/**\r
 * Register using addEventListener on mounted, and removeEventListener automatically on unmounted.\r
 *\r
 * Overload 1: Omitted Window target\r
 */\r
declare function useEventListener<E extends keyof WindowEventMap>(event: Arrayable<E>, listener: Arrayable<(this: Window, ev: WindowEventMap[E]) => any>, options?: boolean | AddEventListenerOptions): Fn;\r
/**\r
 * Register using addEventListener on mounted, and removeEventListener automatically on unmounted.\r
 *\r
 * Overload 2: Explicitly Window target\r
 */\r
declare function useEventListener<E extends keyof WindowEventMap>(target: Window, event: Arrayable<E>, listener: Arrayable<(this: Window, ev: WindowEventMap[E]) => any>, options?: boolean | AddEventListenerOptions): Fn;\r
/**\r
 * Register using addEventListener on mounted, and removeEventListener automatically on unmounted.\r
 *\r
 * Overload 3: Explicitly Document target\r
 */\r
declare function useEventListener<E extends keyof DocumentEventMap>(target: DocumentOrShadowRoot, event: Arrayable<E>, listener: Arrayable<(this: Document, ev: DocumentEventMap[E]) => any>, options?: boolean | AddEventListenerOptions): Fn;\r
/**\r
 * Register using addEventListener on mounted, and removeEventListener automatically on unmounted.\r
 *\r
 * Overload 4: Custom event target with event type infer\r
 */\r
declare function useEventListener<Names extends string, EventType = Event>(target: InferEventTarget<Names>, event: Arrayable<Names>, listener: Arrayable<GeneralEventListener<EventType>>, options?: boolean | AddEventListenerOptions): Fn;\r
/**\r
 * Register using addEventListener on mounted, and removeEventListener automatically on unmounted.\r
 *\r
 * Overload 5: Custom event target fallback\r
 */\r
declare function useEventListener<EventType = Event>(target: MaybeAccessor<EventTarget | null | undefined>, event: Arrayable<string>, listener: Arrayable<GeneralEventListener<EventType>>, options?: boolean | AddEventListenerOptions): Fn;

export { DocumentEventName, GeneralEventListener, WindowEventName, useEventListener };
`,lbe=`import * as solid_js from 'solid-js';

type UseEventSourceOptions = EventSourceInit;\r
/**\r
 * Reactive wrapper for EventSource.\r
 *\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/EventSource/EventSource EventSource\r
 */\r
declare function useEventSource(url: string, events?: string[], options?: UseEventSourceOptions): {\r
    eventSource: solid_js.Accessor<EventSource | null>;\r
    event: solid_js.Accessor<string | null>;\r
    data: solid_js.Accessor<string | null>;\r
    status: solid_js.Accessor<"OPEN" | "CONNECTING" | "CLOSED">;\r
    error: solid_js.Accessor<Event | null>;\r
    close: () => void;\r
};\r
type UseEventSourceReturn = ReturnType<typeof useEventSource>;

export { UseEventSourceOptions, UseEventSourceReturn, useEventSource };
`,cbe=`import * as solid_js from 'solid-js';

interface EyeDropperOpenOptions {\r
    /**\r
     * @see https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal\r
     */\r
    signal?: AbortSignal;\r
}\r
interface EyeDropper {\r
    new (): EyeDropper;\r
    open: (options?: EyeDropperOpenOptions) => Promise<{\r
        sRGBHex: string;\r
    }>;\r
    [Symbol.toStringTag]: 'EyeDropper';\r
}\r
interface UseEyeDropperOptions {\r
    /**\r
     * Initial sRGBHex.\r
     *\r
     * @default ''\r
     */\r
    initialValue?: string;\r
}\r
/**\r
 * Reactive [EyeDropper API](https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API)\r
 */\r
declare function useEyeDropper(options?: UseEyeDropperOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    sRGBHex: solid_js.Accessor<string>;\r
    open: (openOptions?: EyeDropperOpenOptions) => Promise<{\r
        sRGBHex: string;\r
    } | undefined>;\r
};\r
type UseEyeDropperReturn = ReturnType<typeof useEyeDropper>;

export { EyeDropper, EyeDropperOpenOptions, UseEyeDropperOptions, UseEyeDropperReturn, useEyeDropper };
`,dbe=`import { Signal, Accessor } from 'solid-js';
import { ConfigurableDocument } from '../_configurable.js';

interface UseFaviconOptions extends ConfigurableDocument {\r
    baseUrl?: string;\r
    rel?: string;\r
}\r
/**\r
 * Reactive favicon.\r
 */\r
declare function useFavicon(newIcon?: string | null | undefined | Signal<string | null | undefined>, options?: UseFaviconOptions): Signal<string | null | undefined>;\r
declare function useFavicon(newIcon: Accessor<string | null | undefined>, options?: UseFaviconOptions): Accessor<string | null | undefined>;\r
type UseFaviconReturn = ReturnType<typeof useFavicon>;

export { UseFaviconOptions, UseFaviconReturn, useFavicon };
`,ube=`import { Accessor } from 'solid-js';
import { Fn, EventHookOn, MaybeAccessor } from '@solidjs-use/shared';

interface UseFetchReturn<T> {\r
    /**\r
     * Indicates if the fetch request has finished\r
     */\r
    isFinished: Accessor<boolean>;\r
    /**\r
     * The statusCode of the HTTP fetch response\r
     */\r
    statusCode: Accessor<number | null>;\r
    /**\r
     * The raw response of the fetch response\r
     */\r
    response: Accessor<Response | null>;\r
    /**\r
     * Any fetch errors that may have occurred\r
     */\r
    error: Accessor<any>;\r
    /**\r
     * The fetch response body, may either be JSON or text\r
     */\r
    data: Accessor<T | null>;\r
    /**\r
     * Indicates if the request is currently being fetched.\r
     */\r
    isFetching: Accessor<boolean>;\r
    /**\r
     * Indicates if the fetch request is able to be aborted\r
     */\r
    canAbort: Accessor<boolean>;\r
    /**\r
     * Indicates if the fetch request was aborted\r
     */\r
    aborted: Accessor<boolean>;\r
    /**\r
     * Abort the fetch request\r
     */\r
    abort: Fn;\r
    /**\r
     * Manually call the fetch\r
     * (default not throwing error)\r
     */\r
    execute: (throwOnFailed?: boolean) => Promise<any>;\r
    /**\r
     * Fires after the fetch request has finished\r
     */\r
    onFetchResponse: EventHookOn<Response>;\r
    /**\r
     * Fires after a fetch request error\r
     */\r
    onFetchError: EventHookOn;\r
    /**\r
     * Fires after a fetch has completed\r
     */\r
    onFetchFinally: EventHookOn;\r
    get: () => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    post: (payload?: MaybeAccessor<unknown>, type?: string) => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    put: (payload?: MaybeAccessor<unknown>, type?: string) => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    delete: (payload?: MaybeAccessor<unknown>, type?: string) => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    patch: (payload?: MaybeAccessor<unknown>, type?: string) => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    head: (payload?: MaybeAccessor<unknown>, type?: string) => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    options: (payload?: MaybeAccessor<unknown>, type?: string) => UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
    json: <JSON = any>() => UseFetchReturn<JSON> & PromiseLike<UseFetchReturn<JSON>>;\r
    text: () => UseFetchReturn<string> & PromiseLike<UseFetchReturn<string>>;\r
    blob: () => UseFetchReturn<Blob> & PromiseLike<UseFetchReturn<Blob>>;\r
    arrayBuffer: () => UseFetchReturn<ArrayBuffer> & PromiseLike<UseFetchReturn<ArrayBuffer>>;\r
    formData: () => UseFetchReturn<FormData> & PromiseLike<UseFetchReturn<FormData>>;\r
}\r
type Combination = 'overwrite' | 'chain';\r
interface BeforeFetchContext {\r
    /**\r
     * The createMemo url of the current request\r
     */\r
    url: string;\r
    /**\r
     * The request options of the current request\r
     */\r
    options: RequestInit;\r
    /**\r
     * Cancels the current request\r
     */\r
    cancel: Fn;\r
}\r
interface AfterFetchContext<T = any> {\r
    response: Response;\r
    data: T | null;\r
}\r
interface OnFetchErrorContext<T = any, E = any> {\r
    error: E;\r
    data: T | null;\r
}\r
interface UseFetchOptions {\r
    /**\r
     * Fetch function\r
     */\r
    fetch?: typeof window.fetch;\r
    /**\r
     * Will automatically run fetch when \`useFetch\` is used\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Will automatically refetch when:\r
     * - the URL is changed if the URL is a Accessor\r
     * - the payload is changed if the payload is a Accessor\r
     *\r
     * @default false\r
     */\r
    refetch?: MaybeAccessor<boolean>;\r
    /**\r
     * Initial data before the request finished\r
     *\r
     * @default null\r
     */\r
    initialData?: any;\r
    /**\r
     * Timeout for abort request after number of millisecond\r
     * \`0\` means use browser default\r
     *\r
     * @default 0\r
     */\r
    timeout?: number;\r
    /**\r
     * Will run immediately before the fetch request is dispatched\r
     */\r
    beforeFetch?: (ctx: BeforeFetchContext) => Promise<Partial<BeforeFetchContext> | void> | Partial<BeforeFetchContext> | void;\r
    /**\r
     * Will run immediately after the fetch request is returned.\r
     * Runs after any 2xx response\r
     */\r
    afterFetch?: (ctx: AfterFetchContext) => Promise<Partial<AfterFetchContext>> | Partial<AfterFetchContext>;\r
    /**\r
     * Will run immediately after the fetch request is returned.\r
     * Runs after any 4xx and 5xx response\r
     */\r
    onFetchError?: (ctx: {\r
        data: any;\r
        response: Response | null;\r
        error: any;\r
    }) => Promise<Partial<OnFetchErrorContext>> | Partial<OnFetchErrorContext>;\r
}\r
interface CreateFetchOptions {\r
    /**\r
     * The base URL that will be prefixed to all urls unless urls are absolute\r
     */\r
    baseUrl?: MaybeAccessor<string>;\r
    /**\r
     * Determine the inherit behavior for beforeFetch, afterFetch, onFetchError\r
     * @default 'chain'\r
     */\r
    combination?: Combination;\r
    /**\r
     * Default Options for the useFetch function\r
     */\r
    options?: UseFetchOptions;\r
    /**\r
     * Options for the fetch request\r
     */\r
    fetchOptions?: RequestInit;\r
}\r
declare function createFetch(config?: CreateFetchOptions): typeof useFetch;\r
declare function useFetch<T>(url: MaybeAccessor<string>): UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
declare function useFetch<T>(url: MaybeAccessor<string>, useFetchOptions: UseFetchOptions): UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;\r
declare function useFetch<T>(url: MaybeAccessor<string>, options: RequestInit, useFetchOptions?: UseFetchOptions): UseFetchReturn<T> & PromiseLike<UseFetchReturn<T>>;

export { AfterFetchContext, BeforeFetchContext, CreateFetchOptions, OnFetchErrorContext, UseFetchOptions, UseFetchReturn, createFetch, useFetch };
`,hbe=`import { Accessor } from 'solid-js';
import { ConfigurableDocument } from '../_configurable.js';

interface UseFileDialogOptions extends ConfigurableDocument {\r
    /**\r
     * @default true\r
     */\r
    multiple?: boolean;\r
    /**\r
     * @default '*'\r
     */\r
    accept?: string;\r
    /**\r
     * Select the input source for the capture file.\r
     * @see [HTMLInputElement Capture](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/capture)\r
     */\r
    capture?: string;\r
}\r
interface UseFileDialogReturn {\r
    files: Accessor<FileList | null>;\r
    open: (localOptions?: Partial<UseFileDialogOptions>) => void;\r
    reset: () => void;\r
}\r
/**\r
 * Open file dialog with ease.\r
 */\r
declare function useFileDialog(options?: UseFileDialogOptions): UseFileDialogReturn;

export { UseFileDialogOptions, UseFileDialogReturn, useFileDialog };
`,fbe=`import { Accessor, Setter } from 'solid-js';
import { MaybeAccessor, Awaitable } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * window.showOpenFilePicker parameters\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker#parameters\r
 */\r
interface FileSystemAccessShowOpenFileOptions {\r
    multiple?: boolean;\r
    types?: Array<{\r
        description?: string;\r
        accept: Record<string, string[]>;\r
    }>;\r
    excludeAcceptAllOption?: boolean;\r
}\r
/**\r
 * window.showSaveFilePicker parameters\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/window/showSaveFilePicker#parameters\r
 */\r
interface FileSystemAccessShowSaveFileOptions {\r
    suggestedName?: string;\r
    types?: Array<{\r
        description?: string;\r
        accept: Record<string, string[]>;\r
    }>;\r
    excludeAcceptAllOption?: boolean;\r
}\r
/**\r
 * FileHandle\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileHandle\r
 */\r
interface FileSystemFileHandle {\r
    getFile: () => Promise<File>;\r
    createWritable: () => FileSystemWritableFileStream;\r
}\r
/**\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream\r
 */\r
interface FileSystemWritableFileStream extends WritableStream {\r
    /**\r
     * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream/write\r
     */\r
    write: FileSystemWritableFileStreamWrite;\r
    /**\r
     * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream/seek\r
     */\r
    seek: (position: number) => Promise<void>;\r
    /**\r
     * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream/truncate\r
     */\r
    truncate: (size: number) => Promise<void>;\r
}\r
/**\r
 * FileStream.write\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream/write\r
 */\r
interface FileSystemWritableFileStreamWrite {\r
    (data: string | BufferSource | Blob): Promise<void>;\r
    (options: {\r
        type: 'write';\r
        position: number;\r
        data: string | BufferSource | Blob;\r
    }): Promise<void>;\r
    (options: {\r
        type: 'seek';\r
        position: number;\r
    }): Promise<void>;\r
    (options: {\r
        type: 'truncate';\r
        size: number;\r
    }): Promise<void>;\r
}\r
/**\r
 * FileStream.write\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream/write\r
 */\r
type FileSystemAccessWindow = Window & {\r
    showSaveFilePicker: (options: FileSystemAccessShowSaveFileOptions) => Promise<FileSystemFileHandle>;\r
    showOpenFilePicker: (options: FileSystemAccessShowOpenFileOptions) => Promise<FileSystemFileHandle[]>;\r
};\r
type UseFileSystemAccessCommonOptions = Pick<FileSystemAccessShowOpenFileOptions, 'types' | 'excludeAcceptAllOption'>;\r
type UseFileSystemAccessShowSaveFileOptions = Pick<FileSystemAccessShowSaveFileOptions, 'suggestedName'>;\r
type UseFileSystemAccessOptions = ConfigurableWindow & UseFileSystemAccessCommonOptions & {\r
    /**\r
     * file data type\r
     */\r
    dataType?: MaybeAccessor<'Text' | 'ArrayBuffer' | 'Blob'>;\r
};\r
/**\r
 * Create and read and write local files.\r
 */\r
declare function useFileSystemAccess(options: UseFileSystemAccessOptions & {\r
    dataType: 'Text';\r
}): UseFileSystemAccessReturn;\r
declare function useFileSystemAccess(options: UseFileSystemAccessOptions & {\r
    dataType: 'ArrayBuffer';\r
}): UseFileSystemAccessReturn<ArrayBuffer>;\r
declare function useFileSystemAccess(options: UseFileSystemAccessOptions & {\r
    dataType: 'Blob';\r
}): UseFileSystemAccessReturn<Blob>;\r
declare function useFileSystemAccess(options: UseFileSystemAccessOptions): UseFileSystemAccessReturn<string | ArrayBuffer | Blob>;\r
interface UseFileSystemAccessReturn<T = string> {\r
    isSupported: Accessor<boolean>;\r
    data: Accessor<T | undefined>;\r
    setData: Setter<string | ArrayBuffer | Blob | undefined>;\r
    file: Accessor<File | undefined>;\r
    setFile: Setter<File | undefined>;\r
    fileName: Accessor<string>;\r
    fileMIME: Accessor<string>;\r
    fileSize: Accessor<number>;\r
    fileLastModified: Accessor<number>;\r
    open: (_options?: UseFileSystemAccessCommonOptions) => Awaitable<void>;\r
    create: (_options?: UseFileSystemAccessShowSaveFileOptions) => Awaitable<void>;\r
    save: (_options?: UseFileSystemAccessShowSaveFileOptions) => Awaitable<void>;\r
    saveAs: (_options?: UseFileSystemAccessShowSaveFileOptions) => Awaitable<void>;\r
    updateData: () => Awaitable<void>;\r
}

export { FileSystemAccessShowOpenFileOptions, FileSystemAccessShowSaveFileOptions, FileSystemAccessWindow, FileSystemFileHandle, UseFileSystemAccessCommonOptions, UseFileSystemAccessOptions, UseFileSystemAccessReturn, UseFileSystemAccessShowSaveFileOptions, useFileSystemAccess };
`,gbe=`import { WritableComputedReturn } from '@solidjs-use/shared/solid-to-vue';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface UseFocusOptions extends ConfigurableWindow {\r
    /**\r
     * Initial value. If set true, then focus will be set on the target\r
     *\r
     * @default false\r
     */\r
    initialValue?: boolean;\r
}\r
/**\r
 * Track or set the focus state of a DOM element.\r
 */\r
declare function useFocus(target: MaybeElementAccessor, options?: UseFocusOptions): WritableComputedReturn<boolean>;

export { UseFocusOptions, useFocus };
`,pbe=`import { Accessor } from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Track if focus is contained within the target element\r
 */\r
declare function useFocusWithin(target: MaybeElementAccessor, options?: ConfigurableWindow): Accessor<boolean>;

export { useFocusWithin };
`,mbe=`import { Accessor } from 'solid-js';

interface UseFpsOptions {\r
    /**\r
     * Calculate the FPS on every x frames.\r
     * @default 10\r
     */\r
    every?: number;\r
}\r
declare function useFps(options?: UseFpsOptions): Accessor<number>;

export { UseFpsOptions, useFps };
`,_be=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableDocument } from '../_configurable.js';

interface UseFullscreenOptions extends ConfigurableDocument {\r
    /**\r
     * Automatically exit fullscreen when component is unmounted\r
     *\r
     * @default false\r
     */\r
    autoExit?: boolean;\r
}\r
/**\r
 * Reactive Fullscreen API.\r
 */\r
declare function useFullscreen(target?: MaybeElementAccessor, options?: UseFullscreenOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    isFullscreen: solid_js.Accessor<boolean>;\r
    enter: () => Promise<void>;\r
    exit: () => Promise<void>;\r
    toggle: () => Promise<void>;\r
};\r
type UseFullscreenReturn = ReturnType<typeof useFullscreen>;

export { UseFullscreenOptions, UseFullscreenReturn, useFullscreen };
`,bbe=`import * as _solidjs_use_shared from '@solidjs-use/shared';
import { Accessor } from 'solid-js';
import { ConfigurableWindow, ConfigurableNavigator } from '../_configurable.js';

interface UseGamepadOptions extends ConfigurableWindow, ConfigurableNavigator {\r
}\r
/**\r
 * Maps a standard standard gamepad to an Xbox 360 Controller.\r
 */\r
declare function mapGamepadToXbox360Controller(gamepad: Accessor<Gamepad | undefined>): Accessor<{\r
    buttons: {\r
        a: GamepadButton;\r
        b: GamepadButton;\r
        x: GamepadButton;\r
        y: GamepadButton;\r
    };\r
    bumper: {\r
        left: GamepadButton;\r
        right: GamepadButton;\r
    };\r
    triggers: {\r
        left: GamepadButton;\r
        right: GamepadButton;\r
    };\r
    stick: {\r
        left: {\r
            horizontal: number;\r
            vertical: number;\r
            button: GamepadButton;\r
        };\r
        right: {\r
            horizontal: number;\r
            vertical: number;\r
            button: GamepadButton;\r
        };\r
    };\r
    dpad: {\r
        up: GamepadButton;\r
        down: GamepadButton;\r
        left: GamepadButton;\r
        right: GamepadButton;\r
    };\r
    back: GamepadButton;\r
    start: GamepadButton;\r
} | null>;\r
declare function useGamepad(options?: UseGamepadOptions): {\r
    isSupported: Accessor<boolean>;\r
    onConnected: _solidjs_use_shared.EventHookOn<number>;\r
    onDisconnected: _solidjs_use_shared.EventHookOn<number>;\r
    gamepads: Accessor<Gamepad[]>;\r
    pause: _solidjs_use_shared.Fn;\r
    resume: _solidjs_use_shared.Fn;\r
    isActive: Accessor<boolean>;\r
};\r
type UseGamepadReturn = ReturnType<typeof useGamepad>;

export { UseGamepadOptions, UseGamepadReturn, mapGamepadToXbox360Controller, useGamepad };
`,vbe=`import * as solid_js from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';

interface UseGeolocationOptions extends Partial<PositionOptions>, ConfigurableNavigator {\r
    immediate?: boolean;\r
}\r
/**\r
 * Reactive Geolocation API.\r
 */\r
declare function useGeolocation(options?: UseGeolocationOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    coords: solid_js.Accessor<GeolocationCoordinates>;\r
    locatedAt: solid_js.Accessor<number | null>;\r
    error: solid_js.Accessor<GeolocationPositionError | null>;\r
    resume: () => void;\r
    pause: () => void;\r
};\r
type UseGeolocationReturn = ReturnType<typeof useGeolocation>;

export { UseGeolocationOptions, UseGeolocationReturn, useGeolocation };
`,Cbe=`import { UseManualHistoryTravelAccessorReturn, UseManualHistoryTravelSignalReturn } from '../useManualHistoryTravel/index.js';
import { ConfigurableEventFilter, Fn } from '@solidjs-use/shared';
import { Accessor, Signal } from 'solid-js';
import { CloneFn } from '../useCloned/index.js';
import 'solid-js/types/reactive/signal';

interface UseHistoryTravelOptions<Raw, Serialized = Raw> extends ConfigurableEventFilter {\r
    /**\r
     * Maximum number of history to be kept. Default to unlimited.\r
     */\r
    capacity?: number;\r
    /**\r
     * Clone when taking a snapshot, shortcut for dump: JSON.parse(JSON.stringify(value)).\r
     * Default to false\r
     *\r
     * @default false\r
     */\r
    clone?: boolean | CloneFn<Raw>;\r
    /**\r
     * Serialize data into the history\r
     */\r
    dump?: (v: Raw) => Serialized;\r
    /**\r
     * Deserialize data from the history\r
     */\r
    parse?: (v: Serialized) => Raw;\r
}\r
interface UseHistoryTravelBaseReturn {\r
    /**\r
     * A Accessor representing if the tracking is enabled\r
     */\r
    isTracking: Accessor<boolean>;\r
    /**\r
     * Pause change tracking\r
     */\r
    pause: () => void;\r
    /**\r
     * Resume change tracking\r
     *\r
     * @param [commit] if true, a history record will be create after resuming\r
     */\r
    resume: (commit?: boolean) => void;\r
    /**\r
     * A sugar for auto pause and auto resuming within a function scope\r
     *\r
     * @param fn\r
     */\r
    batch: (fn: (cancel: Fn) => void) => void;\r
    /**\r
     * Clear the data and stop the watch\r
     */\r
    dispose: () => void;\r
}\r
type UseHistoryTravelAccessorReturn<Raw, Serialized> = UseHistoryTravelBaseReturn & UseManualHistoryTravelAccessorReturn<Raw, Serialized>;\r
type UseHistoryTravelSignalReturn<Raw, Serialized> = UseHistoryTravelBaseReturn & UseManualHistoryTravelSignalReturn<Raw, Serialized>;\r
/**\r
 * Track the change history of a \`Signal\` or \`Accessor\`, when the parameter is a Signal, it provides undo and redo functionality.\r
 */\r
declare function useHistoryTravel<Raw, Serialized = Raw>(source: Accessor<Raw>, options?: UseHistoryTravelOptions<Raw, Serialized>): UseHistoryTravelAccessorReturn<Raw, Serialized>;\r
declare function useHistoryTravel<Raw, Serialized = Raw>(source: Signal<Raw>, options?: UseHistoryTravelOptions<Raw, Serialized>): UseHistoryTravelSignalReturn<Raw, Serialized>;

export { UseHistoryTravelAccessorReturn, UseHistoryTravelBaseReturn, UseHistoryTravelOptions, UseHistoryTravelSignalReturn, useHistoryTravel };
`,ybe=`import { Accessor } from 'solid-js';
import { ConfigurableEventFilter } from '@solidjs-use/shared';
import { WindowEventName } from '../useEventListener/index.js';
import { ConfigurableWindow } from '../_configurable.js';

interface UseIdleOptions extends ConfigurableWindow, ConfigurableEventFilter {\r
    /**\r
     * Event names that listen to for detected user activity\r
     *\r
     * @default ['mousemove', 'mousedown', 'resize', 'keydown', 'touchstart', 'wheel']\r
     */\r
    events?: WindowEventName[];\r
    /**\r
     * Listen for document visibility change\r
     *\r
     * @default true\r
     */\r
    listenForVisibilityChange?: boolean;\r
    /**\r
     * Initial state of the Accessor idle\r
     *\r
     * @default false\r
     */\r
    initialState?: boolean;\r
}\r
interface UseIdleReturn {\r
    idle: Accessor<boolean>;\r
    lastActive: Accessor<number>;\r
}\r
/**\r
 * Tracks whether the user is being inactive.\r
 *\r
 * @param timeout default to 1 minute\r
 * @param options IdleOptions\r
 */\r
declare function useIdle(timeout?: number, options?: UseIdleOptions): UseIdleReturn;

export { UseIdleOptions, UseIdleReturn, useIdle };
`,wbe=`import { UseAsyncStateOptions, UseAsyncStateReturn } from '../useAsyncState/index.js';
import { MaybeAccessor } from '@solidjs-use/shared';
import 'solid-js';

interface UseImageOptions {\r
    /** Address of the resource */\r
    src: string;\r
    /** Images to use in different situations, e.g., high-resolution displays, small monitors, etc. */\r
    srcset?: string;\r
    /** Image sizes for different page layouts */\r
    sizes?: string;\r
}\r
/**\r
 * Reactive load an image in the browser, you can wait the result to display it or show a fallback.\r
 *\r
 * @param options Image attributes, as used in the <img> tag\r
 */\r
declare const useImage: (options: MaybeAccessor<UseImageOptions>, asyncStateOptions?: UseAsyncStateOptions) => UseAsyncStateReturn<HTMLImageElement | undefined>;\r
type UseImageReturn = ReturnType<typeof useImage>;

export { UseImageOptions, UseImageReturn, useImage };
`,Sbe=`import { UseScrollOptions, UseScrollReturn } from '../useScroll/index.js';
import { MaybeAccessor } from '@solidjs-use/shared';
import '@solidjs-use/shared/solid-to-vue';
import 'solid-js';

interface UseInfiniteScrollOptions extends UseScrollOptions {\r
    /**\r
     * The minimum distance between the bottom of the element and the bottom of the viewport\r
     *\r
     * @default 0\r
     */\r
    distance?: number;\r
    /**\r
     * The direction in which to listen the scroll.\r
     *\r
     * @default 'bottom'\r
     */\r
    direction?: 'top' | 'bottom' | 'left' | 'right';\r
    /**\r
     * Whether to preserve the current scroll position when loading more items.\r
     *\r
     * @default false\r
     */\r
    preserveScrollPosition?: boolean;\r
}\r
/**\r
 * Reactive infinite scroll.\r
 */\r
declare function useInfiniteScroll(element: MaybeAccessor<HTMLElement | SVGElement | Window | Document | null | undefined>, onLoadMore: (state: UseScrollReturn) => void | Promise<void>, options?: UseInfiniteScrollOptions): void;

export { UseInfiniteScrollOptions, useInfiniteScroll };
`,xbe=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface UseIntersectionObserverOptions extends ConfigurableWindow {\r
    /**\r
     * The Element or Document whose bounds are used as the bounding box when testing for intersection.\r
     */\r
    root?: MaybeElementAccessor;\r
    /**\r
     * A string which specifies a set of offsets to add to the root's bounding_box when calculating intersections.\r
     */\r
    rootMargin?: string;\r
    /**\r
     * Either a single number or an array of numbers between 0.0 and 1.\r
     */\r
    threshold?: number | number[];\r
}\r
/**\r
 * Detects that a target element's visibility.\r
 */\r
declare function useIntersectionObserver(target: MaybeElementAccessor, callback: IntersectionObserverCallback, options?: UseIntersectionObserverOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    stop: () => void;\r
};\r
type UseIntersectionObserverReturn = ReturnType<typeof useIntersectionObserver>;

export { UseIntersectionObserverOptions, UseIntersectionObserverReturn, useIntersectionObserver };
`,kbe=`import { Accessor } from 'solid-js';
import { WindowEventName } from '../useEventListener/index.js';
import { ConfigurableDocument } from '../_configurable.js';
import '@solidjs-use/shared';

type KeyModifier = 'Alt' | 'AltGraph' | 'CapsLock' | 'Control' | 'Fn' | 'FnLock' | 'Meta' | 'NumLock' | 'ScrollLock' | 'Shift' | 'Symbol' | 'SymbolLock';\r
interface UseModifierOptions<Initial> extends ConfigurableDocument {\r
    /**\r
     * Event names that will prompt update to modifier states\r
     *\r
     * @default ['mousedown', 'mouseup', 'keydown', 'keyup']\r
     */\r
    events?: WindowEventName[];\r
    /**\r
     * Initial value of the returned Accessor\r
     *\r
     * @default null\r
     */\r
    initial?: Initial;\r
}\r
type UseKeyModifierReturn<Initial> = Accessor<Initial extends boolean ? boolean : boolean | null>;\r
declare function useKeyModifier<Initial extends boolean | null>(modifier: KeyModifier, options?: UseModifierOptions<Initial>): UseKeyModifierReturn<Initial>;

export { KeyModifier, UseKeyModifierReturn, UseModifierOptions, useKeyModifier };
`,Lbe=`import { RemovableSignal } from '@solidjs-use/shared';
import { Accessor } from 'solid-js';
import { UseStorageOptions } from '../useStorage/index.js';
import '../_configurable.js';
import '../ssr-handlers.js';

declare function useLocalStorage(key: string, initialValue: Accessor<string>, options?: UseStorageOptions<string>): Accessor<string>;\r
declare function useLocalStorage(key: string, initialValue: string, options?: UseStorageOptions<string>): RemovableSignal<string>;\r
declare function useLocalStorage(key: string, initialValue: Accessor<boolean>, options?: UseStorageOptions<boolean>): Accessor<boolean>;\r
declare function useLocalStorage(key: string, initialValue: boolean, options?: UseStorageOptions<boolean>): RemovableSignal<boolean>;\r
declare function useLocalStorage(key: string, initialValue: Accessor<number>, options?: UseStorageOptions<number>): Accessor<number>;\r
declare function useLocalStorage(key: string, initialValue: number, options?: UseStorageOptions<number>): RemovableSignal<number>;\r
declare function useLocalStorage<T>(key: string, initialValue: Accessor<T>, options?: UseStorageOptions<T>): Accessor<T>;\r
declare function useLocalStorage<T>(key: string, initialValue: T, options?: UseStorageOptions<T>): RemovableSignal<T>;\r
declare function useLocalStorage<T = unknown>(key: string, initialValue: Accessor<null>, options?: UseStorageOptions<T>): Accessor<T>;\r
declare function useLocalStorage<T = unknown>(key: string, initialValue: null, options?: UseStorageOptions<T>): RemovableSignal<T>;

export { useLocalStorage };
`,Tbe=`declare const DefaultMagicKeysAliasMap: Readonly<Record<string, string>>;

export { DefaultMagicKeysAliasMap };
`,Dbe=`export { DefaultMagicKeysAliasMap } from './aliasMap.js';
import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UseMagicKeysOptions {\r
    /**\r
     * Target for listening events\r
     *\r
     * @default window\r
     */\r
    target?: MaybeAccessor<EventTarget>;\r
    /**\r
     * Alias map for keys, all the keys should be lowercase\r
     * { target: keycode }\r
     *\r
     * @example { ctrl: "control" }\r
     * @default <predefined-map>\r
     */\r
    aliasMap?: Record<string, string>;\r
    /**\r
     * Register passive listener\r
     *\r
     * @default true\r
     */\r
    passive?: boolean;\r
    /**\r
     * Custom event handler for keydown/keyup event.\r
     * Useful when you want to apply custom logic.\r
     *\r
     * When using \`e.preventDefault()\`, you will need to pass \`passive: false\` to useMagicKeys().\r
     */\r
    onEventFired?: (e: KeyboardEvent) => void | boolean;\r
}\r
interface MagicKeysInternal {\r
    /**\r
     * A Set of currently pressed keys,\r
     * Stores raw keyCodes.\r
     *\r
     * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key\r
     */\r
    current: Set<string>;\r
}\r
type UseMagicKeysReturn = Readonly<Omit<Record<string, Accessor<boolean>>, keyof MagicKeysInternal> & MagicKeysInternal>;\r
declare const getSetCompat: <T>() => {\r
    value(): T[];\r
    add: (val: T) => undefined;\r
    has: (val: T) => boolean;\r
    delete: (val: T) => boolean;\r
    clear: () => void;\r
};\r
/**\r
 * Reactive keys pressed state, with magical keys combination support.\r
 */\r
declare function useMagicKeys(options?: UseMagicKeysOptions): UseMagicKeysReturn;\r
declare function useMagicKeys(options: UseMagicKeysOptions): UseMagicKeysReturn;

export { MagicKeysInternal, UseMagicKeysOptions, UseMagicKeysReturn, getSetCompat, useMagicKeys };
`,Ebe=`import { Setter, Accessor, Signal } from 'solid-js';
import { CloneFn } from '../useCloned/index.js';
import '@solidjs-use/shared';
import 'solid-js/types/reactive/signal';

interface UseHistoryTravelRecord<T> {\r
    snapshot: T;\r
    timestamp: number;\r
}\r
interface UseManualHistoryTravelOptions<Raw, Serialized = Raw> {\r
    /**\r
     * Maximum number of history to be kept. Default to unlimited.\r
     */\r
    capacity?: number;\r
    /**\r
     * Clone when taking a snapshot, shortcut for dump: JSON.parse(JSON.stringify(value)).\r
     * Default to false\r
     *\r
     * @default false\r
     */\r
    clone?: boolean | CloneFn<Raw>;\r
    /**\r
     * Serialize data into the history\r
     */\r
    dump?: (v: Raw) => Serialized;\r
    /**\r
     * Deserialize data from the history\r
     */\r
    parse?: (v: Serialized) => Raw;\r
    /**\r
     * Deserialize data from the history\r
     */\r
    setSource?: (setSource: Setter<Raw>, v: Raw) => void;\r
}\r
interface UseManualHistoryTravelAccessorReturn<Raw, Serialized> {\r
    /**\r
     * Bypassed tracking Accessor from the argument\r
     */\r
    source: Accessor<Raw>;\r
    /**\r
     * An array of history records for undo, newest comes to first\r
     */\r
    history: Accessor<Array<UseHistoryTravelRecord<Serialized>>>;\r
    /**\r
     * Last history point, source can be different if paused\r
     */\r
    last: Accessor<UseHistoryTravelRecord<Serialized>>;\r
    /**\r
     * Same as {@link UseManualHistoryTravelReturn.history | history}\r
     */\r
    undoStack: Accessor<Array<UseHistoryTravelRecord<Serialized>>>;\r
    /**\r
     * Records array for redo\r
     */\r
    redoStack: Accessor<Array<UseHistoryTravelRecord<Serialized>>>;\r
    /**\r
     * A Accessor representing if undo is possible (non empty undoStack)\r
     */\r
    canUndo: Accessor<boolean>;\r
    /**\r
     * A Accessor representing if redo is possible (non empty redoStack)\r
     */\r
    canRedo: Accessor<boolean>;\r
    /**\r
     * Clear all the history\r
     */\r
    clear: () => void;\r
    /**\r
     * Create new a new history record\r
     */\r
    commit: () => void;\r
}\r
interface UseManualHistoryTravelSignalReturn<Raw, Serialized> extends UseManualHistoryTravelAccessorReturn<Raw, Serialized> {\r
    /**\r
     * Undo changes\r
     */\r
    undo: () => void;\r
    /**\r
     * Redo changes\r
     */\r
    redo: () => void;\r
    /**\r
     * Reset Accessor's value with latest history\r
     */\r
    reset: () => void;\r
}\r
/**\r
 * Manually track the change history of a \`Signal\` or \`Accessor\` when the using calls \`commit()\`, when the parameter is a Signal, it provides undo and redo functionality.\r
 */\r
declare function useManualHistoryTravel<Raw, Serialized = Raw>(source: Accessor<Raw>, options?: UseManualHistoryTravelOptions<Raw, Serialized>): UseManualHistoryTravelAccessorReturn<Raw, Serialized>;\r
declare function useManualHistoryTravel<Raw, Serialized = Raw>(source: Signal<Raw>, options?: UseManualHistoryTravelOptions<Raw, Serialized>): UseManualHistoryTravelSignalReturn<Raw, Serialized>;

export { UseHistoryTravelRecord, UseManualHistoryTravelAccessorReturn, UseManualHistoryTravelOptions, UseManualHistoryTravelSignalReturn, useManualHistoryTravel };
`,Abe=`import * as _solidjs_use_shared from '@solidjs-use/shared';
import { MaybeAccessor } from '@solidjs-use/shared';
import * as solid_js from 'solid-js';
import { ConfigurableDocument } from '../_configurable.js';

/**\r
 * Many of the jsdoc definitions here are modified version of the\r
 * documentation from MDN(https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement)\r
 */\r
interface UseMediaSource {\r
    /**\r
     * The source url for the media\r
     */\r
    src: string;\r
    /**\r
     * The media codec type\r
     */\r
    type?: string;\r
}\r
interface UseMediaTextTrackSource {\r
    /**\r
     * Indicates that the track should be enabled unless the user's preferences indicate\r
     * that another track is more appropriate\r
     */\r
    default?: boolean;\r
    /**\r
     * How the text track is meant to be used. If omitted the default kind is subtitles.\r
     */\r
    kind: TextTrackKind;\r
    /**\r
     * A user-readable title of the text track which is used by the browser\r
     * when listing available text tracks.\r
     */\r
    label: string;\r
    /**\r
     * Address of the track (.vtt file). Must be a valid URL. This attribute\r
     * must be specified and its URL value must have the same origin as the document\r
     */\r
    src: string;\r
    /**\r
     * Language of the track text data. It must be a valid BCP 47 language tag.\r
     * If the kind attribute is set to subtitles, then srclang must be defined.\r
     */\r
    srcLang: string;\r
}\r
interface UseMediaControlsOptions extends ConfigurableDocument {\r
    /**\r
     * The source for the media, may either be a string, a \`UseMediaSource\` object, or a list\r
     * of \`UseMediaSource\` objects.\r
     */\r
    src?: MaybeAccessor<string | UseMediaSource | UseMediaSource[]>;\r
    /**\r
     * A list of text tracks for the media\r
     */\r
    tracks?: MaybeAccessor<UseMediaTextTrackSource[]>;\r
}\r
interface UseMediaTextTrack {\r
    /**\r
     * The index of the text track\r
     */\r
    id: number;\r
    /**\r
     * The text track label\r
     */\r
    label: string;\r
    /**\r
     * Language of the track text data. It must be a valid BCP 47 language tag.\r
     * If the kind attribute is set to subtitles, then srclang must be defined.\r
     */\r
    language: string;\r
    /**\r
     * Specifies the display mode of the text track, either \`disabled\`,\r
     * \`hidden\`, or \`showing\`\r
     */\r
    mode: TextTrackMode;\r
    /**\r
     * How the text track is meant to be used. If omitted the default kind is subtitles.\r
     */\r
    kind: TextTrackKind;\r
    /**\r
     * Indicates the track's in-band metadata track dispatch type.\r
     */\r
    inBandMetadataTrackDispatchType: string;\r
    /**\r
     * A list of text track cues\r
     */\r
    cues: TextTrackCueList | null;\r
    /**\r
     * A list of active text track cues\r
     */\r
    activeCues: TextTrackCueList | null;\r
}\r
declare function useMediaControls(target: MaybeAccessor<HTMLMediaElement | null | undefined>, options?: UseMediaControlsOptions): {\r
    currentTime: solid_js.Accessor<number>;\r
    setCurrentTime: solid_js.Setter<number>;\r
    duration: solid_js.Accessor<number>;\r
    waiting: solid_js.Accessor<boolean>;\r
    setWaiting: solid_js.Setter<boolean>;\r
    seeking: solid_js.Accessor<boolean>;\r
    setSeeking: solid_js.Setter<boolean>;\r
    ended: solid_js.Accessor<boolean>;\r
    setEnded: solid_js.Setter<boolean>;\r
    stalled: solid_js.Accessor<boolean>;\r
    setStalled: solid_js.Setter<boolean>;\r
    buffered: solid_js.Accessor<[number, number][]>;\r
    setBuffered: solid_js.Setter<[number, number][]>;\r
    playing: solid_js.Accessor<boolean>;\r
    setPlaying: solid_js.Setter<boolean>;\r
    rate: solid_js.Accessor<number>;\r
    setRate: solid_js.Setter<number>;\r
    volume: solid_js.Accessor<number>;\r
    setVolume: solid_js.Setter<number>;\r
    muted: solid_js.Accessor<boolean>;\r
    setMuted: solid_js.Setter<boolean>;\r
    tracks: solid_js.Accessor<UseMediaTextTrack[]>;\r
    setTracks: solid_js.Setter<UseMediaTextTrack[]>;\r
    selectedTrack: solid_js.Accessor<number>;\r
    setSelectedTrack: solid_js.Setter<number>;\r
    enableTrack: (track: number | UseMediaTextTrack, disableTracks?: boolean) => void;\r
    disableTrack: (track?: number | UseMediaTextTrack) => void;\r
    supportsPictureInPicture: boolean | undefined;\r
    togglePictureInPicture: () => Promise<unknown>;\r
    isPictureInPicture: solid_js.Accessor<boolean>;\r
    onSourceError: _solidjs_use_shared.EventHookOn<Event>;\r
};\r
type UseMediaControlsReturn = ReturnType<typeof useMediaControls>;

export { UseMediaControlsReturn, UseMediaSource, UseMediaTextTrack, UseMediaTextTrackSource, useMediaControls };
`,Ibe=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive Media Query.\r
 */\r
declare function useMediaQuery(query: MaybeAccessor<string>, options?: ConfigurableWindow): solid_js.Accessor<boolean>;

export { useMediaQuery };
`,Nbe=`type CacheKey = any;\r
/**\r
 * Custom memoize cache handler\r
 */\r
interface UseMemoizeCache<Key, Value> {\r
    /**\r
     * Get value for key\r
     */\r
    get: (key: Key) => Value | undefined;\r
    /**\r
     * Set value for key\r
     */\r
    set: (key: Key, value: Value) => void;\r
    /**\r
     * Return flag if key exists\r
     */\r
    has: (key: Key) => boolean;\r
    /**\r
     * Delete value for key\r
     */\r
    delete: (key: Key) => void;\r
    /**\r
     * Clear cache\r
     */\r
    clear: () => void;\r
}\r
/**\r
 * Memoized function\r
 */\r
interface UseMemoizeReturn<Result, Args extends unknown[]> {\r
    /**\r
     * Get result from cache or call memoized function\r
     */\r
    (...args: Args): Result;\r
    /**\r
     * Call memoized function and update cache\r
     */\r
    load: (...args: Args) => Result;\r
    /**\r
     * Delete cache of given arguments\r
     */\r
    delete: (...args: Args) => void;\r
    /**\r
     * Clear cache\r
     */\r
    clear: () => void;\r
    /**\r
     * Generate cache key for given arguments\r
     */\r
    generateKey: (...args: Args) => CacheKey;\r
    /**\r
     * Cache container\r
     */\r
    cache: UseMemoizeCache<CacheKey, Result>;\r
}\r
interface UseMemoizeOptions<Result, Args extends unknown[]> {\r
    getKey?: (...args: Args) => string | number;\r
    cache?: UseMemoizeCache<CacheKey, Result>;\r
}\r
/**\r
 * Reactive function result cache based on arguments\r
 */\r
declare function useMemoize<Result, Args extends unknown[]>(resolver: (...args: Args) => Result, options?: UseMemoizeOptions<Result, Args>): UseMemoizeReturn<Result, Args>;

export { UseMemoizeCache, UseMemoizeOptions, UseMemoizeReturn, useMemoize };
`,Mbe=`import * as solid_js from 'solid-js';
import { UseIntervalFnOptions } from '@solidjs-use/shared';

/**\r
 * Performance.memory\r
 *\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/Performance/memory\r
 */\r
interface MemoryInfo {\r
    /**\r
     * The maximum size of the heap, in bytes, that is available to the context.\r
     */\r
    readonly jsHeapSizeLimit: number;\r
    /**\r
     *  The total allocated heap size, in bytes.\r
     */\r
    readonly totalJSHeapSize: number;\r
    /**\r
     * The currently active segment of JS heap, in bytes.\r
     */\r
    readonly usedJSHeapSize: number;\r
    [Symbol.toStringTag]: 'MemoryInfo';\r
}\r
interface UseMemoryOptions extends UseIntervalFnOptions {\r
    interval?: number;\r
}\r
/**\r
 * Reactive Memory Info.\r
 */\r
declare function useMemory(options?: UseMemoryOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    memory: solid_js.Accessor<MemoryInfo | undefined>;\r
};\r
type UseMemoryReturn = ReturnType<typeof useMemory>;

export { MemoryInfo, UseMemoryOptions, UseMemoryReturn, useMemory };
`,Rbe=`import * as solid_js from 'solid-js';

/**\r
 * Mounted state in Accessor.\r
 */\r
declare function useMounted(): solid_js.Accessor<boolean>;

export { useMounted };
`,Obe=`import * as solid_js from 'solid-js';
import { ConfigurableEventFilter } from '@solidjs-use/shared';
import { Position } from '../types.js';
import { ConfigurableWindow } from '../_configurable.js';

interface UseMouseOptions extends ConfigurableWindow, ConfigurableEventFilter {\r
    /**\r
     * Mouse position based by page, client, or relative to previous position\r
     *\r
     * @default 'page'\r
     */\r
    type?: 'page' | 'client' | 'movement';\r
    /**\r
     * Listen to \`touchmove\` events\r
     *\r
     * @default true\r
     */\r
    touch?: boolean;\r
    /**\r
     * Reset to initial value when \`touchend\` event fired\r
     *\r
     * @default false\r
     */\r
    resetOnTouchEnds?: boolean;\r
    /**\r
     * Initial values\r
     */\r
    initialValue?: Position;\r
}\r
type MouseSourceType = 'mouse' | 'touch' | null;\r
/**\r
 * Reactive mouse position.\r
 */\r
declare function useMouse(options?: UseMouseOptions): {\r
    x: solid_js.Accessor<number>;\r
    y: solid_js.Accessor<number>;\r
    setX: solid_js.Setter<number>;\r
    setY: solid_js.Setter<number>;\r
    sourceType: solid_js.Accessor<MouseSourceType>;\r
};\r
type UseMouseReturn = ReturnType<typeof useMouse>;

export { MouseSourceType, UseMouseOptions, UseMouseReturn, useMouse };
`,Pbe=`import { UseMouseOptions, MouseSourceType } from '../useMouse/index.js';
import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import '../types.js';
import '../_configurable.js';

interface MouseInElementOptions extends UseMouseOptions {\r
    handleOutside?: boolean;\r
}\r
/**\r
 * Reactive mouse position related to an element.\r
 */\r
declare function useMouseInElement(target?: MaybeElementAccessor, options?: MouseInElementOptions): {\r
    x: solid_js.Accessor<number>;\r
    y: solid_js.Accessor<number>;\r
    sourceType: solid_js.Accessor<MouseSourceType>;\r
    elementX: solid_js.Accessor<number>;\r
    elementY: solid_js.Accessor<number>;\r
    elementPositionX: solid_js.Accessor<number>;\r
    elementPositionY: solid_js.Accessor<number>;\r
    elementHeight: solid_js.Accessor<number>;\r
    elementWidth: solid_js.Accessor<number>;\r
    isOutside: solid_js.Accessor<boolean>;\r
    stop: () => void;\r
};\r
type UseMouseInElementReturn = ReturnType<typeof useMouseInElement>;

export { MouseInElementOptions, UseMouseInElementReturn, useMouseInElement };
`,Fbe=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { MouseSourceType } from '../useMouse/index.js';
import { ConfigurableWindow } from '../_configurable.js';
import '../types.js';

interface MousePressedOptions extends ConfigurableWindow {\r
    /**\r
     * Listen to \`touchstart\` \`touchend\` events\r
     *\r
     * @default true\r
     */\r
    touch?: boolean;\r
    /**\r
     * Listen to \`dragstart\` \`drop\` and \`dragend\` events\r
     *\r
     * @default true\r
     */\r
    drag?: boolean;\r
    /**\r
     * Initial values\r
     *\r
     * @default false\r
     */\r
    initialValue?: boolean;\r
    /**\r
     * Element target to be capture the click\r
     */\r
    target?: MaybeElementAccessor;\r
}\r
/**\r
 * Reactive mouse position.\r
 */\r
declare function useMousePressed(options?: MousePressedOptions): {\r
    pressed: solid_js.Accessor<boolean>;\r
    sourceType: solid_js.Accessor<MouseSourceType>;\r
};\r
type UseMousePressedReturn = ReturnType<typeof useMousePressed>;

export { MousePressedOptions, UseMousePressedReturn, useMousePressed };
`,Bbe=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface UseMutationObserverOptions extends MutationObserverInit, ConfigurableWindow {\r
}\r
/**\r
 * Watch for changes being made to the DOM tree.\r
 *\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver MutationObserver MDN\r
 */\r
declare function useMutationObserver(target: MaybeElementAccessor, callback: MutationCallback, options?: UseMutationObserverOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    stop: () => void;\r
};\r
type UseMutationObserverReturn = ReturnType<typeof useMutationObserver>;

export { UseMutationObserverOptions, UseMutationObserverReturn, useMutationObserver };
`,Wbe=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface NavigatorLanguageState {\r
    isSupported: Accessor<boolean>;\r
    /**\r
     *\r
     * ISO 639-1 standard Language Code\r
     *\r
     * @info The detected user agent language preference as a language tag\r
     * (which is sometimes referred to as a "locale identifier").\r
     * This consists of a 2-3 letter base language tag that indicates a\r
     * language, optionally followed by additional subtags separated by\r
     * '-'. The most common extra information is the country or region\r
     * variant (like 'en-US' or 'fr-CA').\r
     *\r
     * @see https://www.iso.org/iso-639-language-codes.html\r
     * @see https://www.loc.gov/standards/iso639-2/php/code_list.php\r
     */\r
    language: Accessor<string | undefined>;\r
}\r
/**\r
 * Reactive useNavigatorLanguage\r
 *\r
 * @description\r
 * Detects the currently selected user language and returns a reactive language\r
 */\r
declare const useNavigatorLanguage: (options?: ConfigurableWindow) => Readonly<NavigatorLanguageState>;\r
type UseNavigatorLanguageReturn = ReturnType<typeof useNavigatorLanguage>;

export { NavigatorLanguageState, UseNavigatorLanguageReturn, useNavigatorLanguage };
`,Vbe=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

type NetworkType = 'bluetooth' | 'cellular' | 'ethernet' | 'none' | 'wifi' | 'wimax' | 'other' | 'unknown';\r
type NetworkEffectiveType = 'slow-2g' | '2g' | '3g' | '4g' | undefined;\r
interface NetworkState {\r
    isSupported: Accessor<boolean>;\r
    /**\r
     * If the user is currently connected.\r
     */\r
    isOnline: Accessor<boolean>;\r
    /**\r
     * The time since the user was last connected.\r
     */\r
    offlineAt: Accessor<number | undefined>;\r
    /**\r
     * At this time, if the user is offline and reconnects\r
     */\r
    onlineAt: Accessor<number | undefined>;\r
    /**\r
     * The download speed in Mbps.\r
     */\r
    downlink: Accessor<number | undefined>;\r
    /**\r
     * The max reachable download speed in Mbps.\r
     */\r
    downlinkMax: Accessor<number | undefined>;\r
    /**\r
     * The detected effective speed type.\r
     */\r
    effectiveType: Accessor<NetworkEffectiveType | undefined>;\r
    /**\r
     * The estimated effective round-trip time of the current connection.\r
     */\r
    rtt: Accessor<number | undefined>;\r
    /**\r
     * If the user activated data saver mode.\r
     */\r
    saveData: Accessor<boolean | undefined>;\r
    /**\r
     * The detected connection/network type.\r
     */\r
    type: Accessor<NetworkType>;\r
}\r
/**\r
 * Reactive Network status.\r
 */\r
declare function useNetwork(options?: ConfigurableWindow): Readonly<NetworkState>;\r
type UseNetworkReturn = ReturnType<typeof useNetwork>;

export { NetworkEffectiveType, NetworkState, NetworkType, UseNetworkReturn, useNetwork };
`,Hbe=`import { UseNowOptions } from './index.js';
import { Pausable } from '@solidjs-use/shared';
import { Component, Accessor, JSX } from 'solid-js';

interface UseNowProps extends Component<Omit<UseNowOptions<true>, 'controls'>> {\r
    children?: (data: {\r
        now: Accessor<Date>;\r
    } & Pausable) => JSX.Element;\r
}\r
declare const UseNow: Component<UseNowProps>;

export { UseNow };
`,Ube=`import { Accessor } from 'solid-js';
import { Pausable } from '@solidjs-use/shared';

interface UseNowOptions<Controls extends boolean> {\r
    /**\r
     * Expose more controls\r
     *\r
     * @default false\r
     */\r
    controls?: Controls;\r
    /**\r
     * Update interval, or use requestAnimationFrame\r
     *\r
     * @default requestAnimationFrame\r
     */\r
    interval?: 'requestAnimationFrame' | number;\r
}\r
/**\r
 * Reactive current Date instance.\r
 */\r
declare function useNow(options?: UseNowOptions<false>): Accessor<Date>;\r
declare function useNow(options: UseNowOptions<true>): {\r
    now: Accessor<Date>;\r
} & Pausable;\r
type UseNowReturn = ReturnType<typeof useNow>;

export { UseNowOptions, UseNowReturn, useNow };
`,jbe=`import { UseObjectUrlOptions, UseObjectUrlReturn } from './index.js';
import { JSX, Component } from 'solid-js';
import '@solidjs-use/shared';

interface UseObjectUrlComponentOptions extends UseObjectUrlOptions {\r
    children?: (data: UseObjectUrlReturn) => JSX.Element;\r
}\r
declare const UseObjectUrl: Component<UseObjectUrlComponentOptions>;

export { UseObjectUrl, UseObjectUrlComponentOptions };
`,$be=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

type UseObjectUrlReturn = Accessor<string | undefined>;\r
type ObjectType = Blob | MediaSource | undefined;\r
interface UseObjectUrlOptions {\r
    object: MaybeAccessor<ObjectType>;\r
}\r
declare function useObjectUrl(object: UseObjectUrlOptions['object']): UseObjectUrlReturn;

export { UseObjectUrlOptions, UseObjectUrlReturn, useObjectUrl };
`,zbe=`import { Setter, Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UseOffsetPaginationOptions {\r
    /**\r
     * Total number of items.\r
     */\r
    total?: MaybeAccessor<number>;\r
    /**\r
     * The number of items to display per page.\r
     * @default 10\r
     */\r
    pageSize?: MaybeAccessor<number>;\r
    /**\r
     * Set per page.\r
     */\r
    setPageSize?: Setter<number>;\r
    /**\r
     * The current page number.\r
     * @default 1\r
     */\r
    page?: MaybeAccessor<number>;\r
    /**\r
     * Set current page.\r
     */\r
    setPage?: Setter<number>;\r
    /**\r
     * Callback when the \`page\` change.\r
     */\r
    onPageChange?: (returnValue: UseOffsetPaginationReturn) => unknown;\r
    /**\r
     * Callback when the \`pageSize\` change.\r
     */\r
    onPageSizeChange?: (returnValue: UseOffsetPaginationReturn) => unknown;\r
    /**\r
     * Callback when the \`pageCount\` change.\r
     */\r
    onPageCountChange?: (returnValue: UseOffsetPaginationReturn) => unknown;\r
}\r
interface UseOffsetPaginationReturn {\r
    currentPage: Accessor<number>;\r
    setCurrentPage: Setter<number>;\r
    currentPageSize: Accessor<number>;\r
    setCurrentPageSize: Setter<number>;\r
    pageCount: Accessor<number>;\r
    isFirstPage: Accessor<boolean>;\r
    isLastPage: Accessor<boolean>;\r
    prev: () => void;\r
    next: () => void;\r
}\r
type UseOffsetPaginationInfinityPageReturn = Omit<UseOffsetPaginationReturn, 'isLastPage'>;\r
declare function useOffsetPagination(options: Omit<UseOffsetPaginationOptions, 'total'>): UseOffsetPaginationInfinityPageReturn;\r
declare function useOffsetPagination(options: UseOffsetPaginationOptions): UseOffsetPaginationReturn;

export { UseOffsetPaginationInfinityPageReturn, UseOffsetPaginationOptions, UseOffsetPaginationReturn, useOffsetPagination };
`,Kbe=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive online state.\r
 */\r
declare function useOnline(options?: ConfigurableWindow): solid_js.Accessor<boolean>;

export { useOnline };
`,Gbe=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive state to show whether mouse leaves the page.\r
 */\r
declare function usePageLeave(options?: ConfigurableWindow): solid_js.Accessor<boolean>;

export { usePageLeave };
`,qbe=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';
import { MaybeElementAccessor } from '@solidjs-use/shared';

interface UseParallaxOptions extends ConfigurableWindow {\r
    deviceOrientationTiltAdjust?: (i: number) => number;\r
    deviceOrientationRollAdjust?: (i: number) => number;\r
    mouseTiltAdjust?: (i: number) => number;\r
    mouseRollAdjust?: (i: number) => number;\r
}\r
interface UseParallaxReturn {\r
    /**\r
     * Roll value. Scaled to \`-0.5 ~ 0.5\`\r
     */\r
    roll: Accessor<number>;\r
    /**\r
     * Tilt value. Scaled to \`-0.5 ~ 0.5\`\r
     */\r
    tilt: Accessor<number>;\r
    /**\r
     * Sensor source, can be \`mouse\` or \`deviceOrientation\`\r
     */\r
    source: Accessor<'deviceOrientation' | 'mouse'>;\r
}\r
/**\r
 * Create parallax effect easily. It uses \`useDeviceOrientation\` and fallback to \`useMouse\`\r
 * if orientation is not supported.\r
 *\r
 * @param target\r
 * @param options\r
 */\r
declare function useParallax(target: MaybeElementAccessor, options?: UseParallaxOptions): UseParallaxReturn;

export { UseParallaxOptions, UseParallaxReturn, useParallax };
`,Zbe=`import { Accessor } from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';

type DescriptorNamePolyfill = 'accelerometer' | 'accessibility-events' | 'ambient-light-sensor' | 'background-sync' | 'camera' | 'clipboard-read' | 'clipboard-write' | 'gyroscope' | 'magnetometer' | 'microphone' | 'notifications' | 'payment-handler' | 'persistent-storage' | 'push' | 'speaker';\r
type GeneralPermissionDescriptor = PermissionDescriptor | {\r
    name: DescriptorNamePolyfill;\r
};\r
interface UsePermissionOptions<Controls extends boolean> extends ConfigurableNavigator {\r
    /**\r
     * Expose more controls\r
     *\r
     * @default false\r
     */\r
    controls?: Controls;\r
}\r
type UsePermissionReturn = Accessor<PermissionState | undefined>;\r
interface UsePermissionReturnWithControls {\r
    state: UsePermissionReturn;\r
    isSupported: Accessor<boolean>;\r
    query: () => Promise<PermissionStatus | undefined>;\r
}\r
/**\r
 * Reactive Permissions API.\r
 */\r
declare function usePermission(permissionDesc: GeneralPermissionDescriptor | GeneralPermissionDescriptor['name'], options?: UsePermissionOptions<false>): UsePermissionReturn;\r
declare function usePermission(permissionDesc: GeneralPermissionDescriptor | GeneralPermissionDescriptor['name'], options: UsePermissionOptions<true>): UsePermissionReturnWithControls;

export { GeneralPermissionDescriptor, UsePermissionOptions, UsePermissionReturn, UsePermissionReturnWithControls, usePermission };
`,Ybe=`import * as solid_js from 'solid-js';
import { Position, PointerType } from '../types.js';
import { ConfigurableWindow } from '../_configurable.js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UsePointerState extends Position {\r
    pressure: number;\r
    pointerId: number;\r
    tiltX: number;\r
    tiltY: number;\r
    width: number;\r
    height: number;\r
    twist: number;\r
    pointerType: PointerType | null;\r
}\r
interface UsePointerOptions extends ConfigurableWindow {\r
    /**\r
     * Pointer types that listen to.\r
     *\r
     * @default ['mouse', 'touch', 'pen']\r
     */\r
    pointerTypes?: PointerType[];\r
    /**\r
     * Initial values\r
     */\r
    initialValue?: MaybeAccessor<Partial<UsePointerState>>;\r
    /**\r
     * @default window\r
     */\r
    target?: MaybeAccessor<EventTarget | null | undefined> | Document | Window;\r
}\r
/**\r
 * Reactive pointer state.\r
 */\r
declare function usePointer(options?: UsePointerOptions): {\r
    isInside: solid_js.Accessor<boolean>;\r
    x: solid_js.Accessor<number | PointerType | null>;\r
    y: solid_js.Accessor<number | PointerType | null>;\r
    height: solid_js.Accessor<number | PointerType | null>;\r
    width: solid_js.Accessor<number | PointerType | null>;\r
    pressure: solid_js.Accessor<number | PointerType | null>;\r
    pointerId: solid_js.Accessor<number | PointerType | null>;\r
    tiltX: solid_js.Accessor<number | PointerType | null>;\r
    tiltY: solid_js.Accessor<number | PointerType | null>;\r
    twist: solid_js.Accessor<number | PointerType | null>;\r
    pointerType: solid_js.Accessor<number | PointerType | null>;\r
};\r
type UsePointerReturn = ReturnType<typeof usePointer>;

export { UsePointerOptions, UsePointerReturn, UsePointerState, usePointer };
`,Xbe=`import { SwipeDirection } from '../useSwipe/index.js';
import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { PointerType, Position } from '../types.js';
import '../_configurable.js';

interface UsePointerSwipeOptions {\r
    /**\r
     * @default 50\r
     */\r
    threshold?: number;\r
    /**\r
     * Callback on swipe start.\r
     */\r
    onSwipeStart?: (e: PointerEvent) => void;\r
    /**\r
     * Callback on swipe move.\r
     */\r
    onSwipe?: (e: PointerEvent) => void;\r
    /**\r
     * Callback on swipe end.\r
     */\r
    onSwipeEnd?: (e: PointerEvent, direction: SwipeDirection) => void;\r
    /**\r
     * Pointer types to listen to.\r
     *\r
     * @default ['mouse', 'touch', 'pen']\r
     */\r
    pointerTypes?: PointerType[];\r
}\r
interface UsePointerSwipeReturn {\r
    isSwiping: Accessor<boolean>;\r
    direction: Accessor<SwipeDirection | null>;\r
    readonly posStart: Position;\r
    readonly posEnd: Position;\r
    distanceX: Accessor<number>;\r
    distanceY: Accessor<number>;\r
    stop: () => void;\r
}\r
/**\r
 * Reactive swipe detection based on PointerEvents.\r
 */\r
declare function usePointerSwipe(target: MaybeAccessor<HTMLElement | null | undefined>, options?: UsePointerSwipeOptions): UsePointerSwipeReturn;

export { UsePointerSwipeOptions, UsePointerSwipeReturn, usePointerSwipe };
`,Qbe=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

type ColorSchemeType = 'dark' | 'light' | 'no-preference';\r
/**\r
 * Reactive prefers-color-scheme media query.\r
 */\r
declare function usePreferredColorScheme(options?: ConfigurableWindow): solid_js.Accessor<ColorSchemeType>;

export { ColorSchemeType, usePreferredColorScheme };
`,Jbe=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

type ContrastType = 'more' | 'less' | 'custom' | 'no-preference';\r
/**\r
 * Reactive prefers-contrast media query.\r
 */\r
declare function usePreferredContrast(options?: ConfigurableWindow): solid_js.Accessor<ContrastType>;

export { ContrastType, usePreferredContrast };
`,eve=`import { usePreferredDark } from './index.js';
import { Component, JSX } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface UsePreferredDarkProps extends ConfigurableWindow {\r
    children?: (data: ReturnType<typeof usePreferredDark>) => JSX.Element;\r
}\r
declare const UsePreferredDark: Component<UsePreferredDarkProps>;

export { UsePreferredDark };
`,tve=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

declare function usePreferredDark(options?: ConfigurableWindow): solid_js.Accessor<boolean>;

export { usePreferredDark };
`,nve=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive Navigator Languages.\r
 */\r
declare function usePreferredLanguages(options?: ConfigurableWindow): Accessor<readonly string[]>;

export { usePreferredLanguages };
`,ive=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

type ReducedMotionType = 'reduce' | 'no-preference';\r
/**\r
 * Reactive prefers-reduced-motion media query.\r
 */\r
declare function usePreferredReducedMotion(options?: ConfigurableWindow): solid_js.Accessor<ReducedMotionType>;

export { ReducedMotionType, usePreferredReducedMotion };
`,sve=`import { Pausable } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface UseRafFnCallbackArguments {\r
    /**\r
     * Time elapsed between this and the last frame.\r
     */\r
    delta: number;\r
    /**\r
     * Time elapsed since the creation of the web page. See {@link https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#the_time_origin Time origin}.\r
     */\r
    timestamp: DOMHighResTimeStamp;\r
}\r
interface UseRafFnOptions extends ConfigurableWindow {\r
    /**\r
     * Start the requestAnimationFrame loop immediately on creation\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
}\r
/**\r
 * Call function on every \`requestAnimationFrame\`. With controls of pausing and resuming.\r
 */\r
declare function useRafFn(fn: (args: UseRafFnCallbackArguments) => void, options?: UseRafFnOptions): Pausable;

export { UseRafFnCallbackArguments, UseRafFnOptions, useRafFn };
`,rve=`import * as solid_js from 'solid-js';
import { MaybeElementAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface ResizeObserverSize {\r
    readonly inlineSize: number;\r
    readonly blockSize: number;\r
}\r
interface ResizeObserverEntry {\r
    readonly target: Element;\r
    readonly contentRect: DOMRectReadOnly;\r
    readonly borderBoxSize?: readonly ResizeObserverSize[];\r
    readonly contentBoxSize?: readonly ResizeObserverSize[];\r
    readonly devicePixelContentBoxSize?: readonly ResizeObserverSize[];\r
}\r
type ResizeObserverCallback = (entries: readonly ResizeObserverEntry[], observer: ResizeObserver) => void;\r
interface UseResizeObserverOptions extends ConfigurableWindow {\r
    /**\r
     * Sets which box model the observer will observe changes to. Possible values\r
     * are \`content-box\` (the default), \`border-box\` and \`device-pixel-content-box\`.\r
     *\r
     * @default 'content-box'\r
     */\r
    box?: ResizeObserverBoxOptions;\r
}\r
declare class ResizeObserver {\r
    constructor(callback: ResizeObserverCallback);\r
    disconnect(): void;\r
    observe(target: Element, options?: UseResizeObserverOptions): void;\r
    unobserve(target: Element): void;\r
}\r
/**\r
 * Reports changes to the dimensions of an Element's content or the border-box\r
 */\r
declare function useResizeObserver(target: MaybeElementAccessor, callback: ResizeObserverCallback, options?: UseResizeObserverOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    stop: () => void;\r
};\r
type UseResizeObserverReturn = ReturnType<typeof useResizeObserver>;

export { ResizeObserverCallback, ResizeObserverEntry, ResizeObserverSize, UseResizeObserverOptions, UseResizeObserverReturn, useResizeObserver };
`,ove=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive screen orientation\r
 */\r
declare const useScreenOrientation: (options?: ConfigurableWindow) => {\r
    isSupported: solid_js.Accessor<boolean>;\r
    orientation: solid_js.Accessor<OrientationType | undefined>;\r
    angle: solid_js.Accessor<number>;\r
    lockOrientation: (type: OrientationLockType) => Promise<void>;\r
    unlockOrientation: () => void;\r
};\r
type UseScreenOrientationReturn = ReturnType<typeof useScreenOrientation>;

export { UseScreenOrientationReturn, useScreenOrientation };
`,ave=`import * as solid_js from 'solid-js';

/**\r
 * Reactive \`env(safe-area-inset-*)\`\r
 */\r
declare function useScreenSafeArea(): {\r
    top: solid_js.Accessor<string>;\r
    right: solid_js.Accessor<string>;\r
    bottom: solid_js.Accessor<string>;\r
    left: solid_js.Accessor<string>;\r
    update: () => void;\r
};

export { useScreenSafeArea };
`,lve=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableDocument } from '../_configurable.js';

interface UseScriptTagOptions extends ConfigurableDocument {\r
    /**\r
     * Load the script immediately\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Add \`async\` attribute to the script tag\r
     *\r
     * @default true\r
     */\r
    async?: boolean;\r
    /**\r
     * Script type\r
     *\r
     * @default 'text/javascript'\r
     */\r
    type?: string;\r
    /**\r
     * Manual controls the timing of loading and unloading\r
     *\r
     * @default false\r
     */\r
    manual?: boolean;\r
    crossOrigin?: 'anonymous' | 'use-credentials';\r
    referrerPolicy?: 'no-referrer' | 'no-referrer-when-downgrade' | 'origin' | 'origin-when-cross-origin' | 'same-origin' | 'strict-origin' | 'strict-origin-when-cross-origin' | 'unsafe-url';\r
    noModule?: boolean;\r
    /**\r
     * script attribute\r
     */\r
    defer?: boolean;\r
    /**\r
     * Add custom attribute to the script tag\r
     *\r
     */\r
    attrs?: Record<string, string>;\r
}\r
/**\r
 * Async script tag loading.\r
 */\r
declare function useScriptTag(src: MaybeAccessor<string>, onLoaded?: (el: HTMLScriptElement) => void, options?: UseScriptTagOptions): {\r
    scriptTag: solid_js.Accessor<HTMLScriptElement | null>;\r
    load: (waitForScriptLoad?: boolean) => Promise<HTMLScriptElement | boolean>;\r
    unload: () => void;\r
};\r
type UseScriptTagReturn = ReturnType<typeof useScriptTag>;

export { UseScriptTagOptions, UseScriptTagReturn, useScriptTag };
`,cve=`import * as _solidjs_use_shared_solid_to_vue from '@solidjs-use/shared/solid-to-vue';
import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

interface UseScrollOptions {\r
    /**\r
     * Throttle time for scroll event, it’s disabled by default.\r
     *\r
     * @default 0\r
     */\r
    throttle?: number;\r
    /**\r
     * The check time when scrolling ends.\r
     * This configuration will be setting to (throttle + idle) when the \`throttle\` is configured.\r
     *\r
     * @default 200\r
     */\r
    idle?: number;\r
    /**\r
     * Offset arrived states by x pixels\r
     *\r
     */\r
    offset?: {\r
        left?: number;\r
        right?: number;\r
        top?: number;\r
        bottom?: number;\r
    };\r
    /**\r
     * Trigger it when scrolling.\r
     *\r
     */\r
    onScroll?: (e: Event) => void;\r
    /**\r
     * Trigger it when scrolling ends.\r
     *\r
     */\r
    onStop?: (e: Event) => void;\r
    /**\r
     * Listener options for scroll event.\r
     *\r
     * @default {capture: false, passive: true}\r
     */\r
    eventListenerOptions?: boolean | AddEventListenerOptions;\r
    /**\r
     * Optionally specify a scroll behavior of \`auto\` (default, not smooth scrolling) or\r
     * \`smooth\` (for smooth scrolling) which takes effect when changing the \`x\` or \`y\` Signals.\r
     *\r
     * @default 'auto'\r
     */\r
    behavior?: MaybeAccessor<ScrollBehavior>;\r
}\r
/**\r
 * Reactive scroll.\r
 */\r
declare function useScroll(element: MaybeAccessor<HTMLElement | SVGElement | Window | Document | null | undefined>, options?: UseScrollOptions): {\r
    x: solid_js.Accessor<number>;\r
    setX: _solidjs_use_shared_solid_to_vue.ComputedSetter<number>;\r
    y: solid_js.Accessor<number>;\r
    setY: _solidjs_use_shared_solid_to_vue.ComputedSetter<number>;\r
    isScrolling: solid_js.Accessor<boolean>;\r
    arrivedState: {\r
        left: boolean;\r
        right: boolean;\r
        top: boolean;\r
        bottom: boolean;\r
    };\r
    directions: {\r
        left: boolean;\r
        right: boolean;\r
        top: boolean;\r
        bottom: boolean;\r
    };\r
};\r
type UseScrollReturn = ReturnType<typeof useScroll>;

export { UseScrollOptions, UseScrollReturn, useScroll };
`,dve=`import { Signal } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

/**\r
 * Lock scrolling of the element.\r
 */\r
declare function useScrollLock(element: MaybeAccessor<HTMLElement | SVGElement | Window | Document | null | undefined>, initialState?: boolean): Signal<boolean>;

export { useScrollLock };
`,uve=`import { RemovableSignal } from '@solidjs-use/shared';
import { Accessor } from 'solid-js';
import { UseStorageOptions } from '../useStorage/index.js';
import '../_configurable.js';
import '../ssr-handlers.js';

declare function useSessionStorage(key: string, initialValue: Accessor<string>, options?: UseStorageOptions<string>): Accessor<string>;\r
declare function useSessionStorage(key: string, initialValue: string, options?: UseStorageOptions<string>): RemovableSignal<string>;\r
declare function useSessionStorage(key: string, initialValue: Accessor<boolean>, options?: UseStorageOptions<boolean>): Accessor<boolean>;\r
declare function useSessionStorage(key: string, initialValue: boolean, options?: UseStorageOptions<boolean>): RemovableSignal<boolean>;\r
declare function useSessionStorage(key: string, initialValue: Accessor<number>, options?: UseStorageOptions<number>): Accessor<number>;\r
declare function useSessionStorage(key: string, initialValue: number, options?: UseStorageOptions<number>): RemovableSignal<number>;\r
declare function useSessionStorage<T>(key: string, initialValue: Accessor<T>, options?: UseStorageOptions<T>): Accessor<T>;\r
declare function useSessionStorage<T>(key: string, initialValue: T, options?: UseStorageOptions<T>): RemovableSignal<T>;\r
declare function useSessionStorage<T = unknown>(key: string, initialValue: Accessor<null>, options?: UseStorageOptions<T>): Accessor<T>;\r
declare function useSessionStorage<T = unknown>(key: string, initialValue: null, options?: UseStorageOptions<T>): RemovableSignal<T>;

export { useSessionStorage };
`,hve=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableNavigator } from '../_configurable.js';

interface UseShareOptions {\r
    title?: string;\r
    files?: File[];\r
    text?: string;\r
    url?: string;\r
}\r
/**\r
 * Reactive Web Share API.\r
 */\r
declare function useShare(shareOptions?: MaybeAccessor<UseShareOptions>, options?: ConfigurableNavigator): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    share: (overrideOptions?: MaybeAccessor<UseShareOptions>) => Promise<void>;\r
};\r
type UseShareReturn = ReturnType<typeof useShare>;

export { UseShareOptions, UseShareReturn, useShare };
`,fve=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';
import { SpeechRecognition, SpeechRecognitionErrorEvent } from './types.js';

interface UseSpeechRecognitionOptions extends ConfigurableWindow {\r
    /**\r
     * Controls whether continuous results are returned for each recognition, or only a single result.\r
     *\r
     * @default true\r
     */\r
    continuous?: boolean;\r
    /**\r
     * Controls whether interim results should be returned (true) or not (false.) Interim results are results that are not yet final\r
     *\r
     * @default true\r
     */\r
    interimResults?: boolean;\r
    /**\r
     * Language for SpeechRecognition\r
     *\r
     * @default 'en-US'\r
     */\r
    lang?: MaybeAccessor<string>;\r
}\r
/**\r
 * Reactive SpeechRecognition.\r
 *\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition SpeechRecognition\r
 */\r
declare function useSpeechRecognition(options?: UseSpeechRecognitionOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    isListening: solid_js.Accessor<boolean>;\r
    isFinal: solid_js.Accessor<boolean>;\r
    result: solid_js.Accessor<string>;\r
    setResult: solid_js.Setter<string>;\r
    recognition: SpeechRecognition | undefined;\r
    error: solid_js.Accessor<SpeechRecognitionErrorEvent | undefined>;\r
    toggle: (value?: boolean) => void;\r
    start: () => void;\r
    stop: () => void;\r
};\r
type UseSpeechRecognitionReturn = ReturnType<typeof useSpeechRecognition>;

export { UseSpeechRecognitionOptions, UseSpeechRecognitionReturn, useSpeechRecognition };
`,gve=`type SpeechRecognitionErrorCode = 'aborted' | 'audio-capture' | 'bad-grammar' | 'language-not-supported' | 'network' | 'no-speech' | 'not-allowed' | 'service-not-allowed';\r
interface SpeechRecognitionErrorEventInit extends EventInit {\r
    error: SpeechRecognitionErrorCode;\r
    message?: string;\r
}\r
interface SpeechRecognitionEventInit extends EventInit {\r
    resultIndex?: number;\r
    results: SpeechRecognitionResultList;\r
}\r
interface SpeechGrammar {\r
    src: string;\r
    weight: number;\r
}\r
interface SpeechGrammarList {\r
    readonly length: number;\r
    addFromString: (string: string, weight?: number) => void;\r
    addFromURI: (src: string, weight?: number) => void;\r
    item: (index: number) => SpeechGrammar;\r
    [index: number]: SpeechGrammar;\r
}\r
interface SpeechRecognitionErrorEvent extends Event {\r
    readonly error: SpeechRecognitionErrorCode;\r
    readonly message: string;\r
}\r
interface SpeechRecognitionEvent extends Event {\r
    readonly resultIndex: number;\r
    readonly results: SpeechRecognitionResultList;\r
}\r
interface SpeechRecognitionEventMap {\r
    audioend: Event;\r
    audiostart: Event;\r
    end: Event;\r
    error: SpeechRecognitionErrorEvent;\r
    nomatch: SpeechRecognitionEvent;\r
    result: SpeechRecognitionEvent;\r
    soundend: Event;\r
    soundstart: Event;\r
    speechend: Event;\r
    speechstart: Event;\r
    start: Event;\r
}\r
interface SpeechRecognition extends EventTarget {\r
    continuous: boolean;\r
    grammars: SpeechGrammarList;\r
    interimResults: boolean;\r
    lang: string;\r
    maxAlternatives: number;\r
    onaudioend: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onaudiostart: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onend: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onerror: ((this: SpeechRecognition, ev: SpeechRecognitionErrorEvent) => any) | null;\r
    onnomatch: ((this: SpeechRecognition, ev: SpeechRecognitionEvent) => any) | null;\r
    onresult: ((this: SpeechRecognition, ev: SpeechRecognitionEvent) => any) | null;\r
    onsoundend: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onsoundstart: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onspeechend: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onspeechstart: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    onstart: ((this: SpeechRecognition, ev: Event) => any) | null;\r
    abort: () => void;\r
    start: () => void;\r
    stop: () => void;\r
    addEventListener: (<K extends keyof SpeechRecognitionEventMap>(type: K, listener: (this: SpeechRecognition, ev: SpeechRecognitionEventMap[K]) => any, options?: boolean | AddEventListenerOptions) => void) & ((type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions) => void);\r
    removeEventListener: (<K extends keyof SpeechRecognitionEventMap>(type: K, listener: (this: SpeechRecognition, ev: SpeechRecognitionEventMap[K]) => any, options?: boolean | EventListenerOptions) => void) & ((type: string, listener: EventListenerOrEventListenerObject, options?: boolean | EventListenerOptions) => void);\r
}

export { SpeechRecognition, SpeechRecognitionErrorCode, SpeechRecognitionErrorEvent, SpeechRecognitionErrorEventInit, SpeechRecognitionEventInit };
`,pve=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

type UseSpeechSynthesisStatus = 'init' | 'play' | 'pause' | 'end';\r
interface UseSpeechSynthesisOptions extends ConfigurableWindow {\r
    /**\r
     * Language for SpeechSynthesis\r
     *\r
     * @default 'en-US'\r
     */\r
    lang?: MaybeAccessor<string>;\r
    /**\r
     * Gets and sets the pitch at which the utterance will be spoken at.\r
     *\r
     * @default 1\r
     */\r
    pitch?: SpeechSynthesisUtterance['pitch'];\r
    /**\r
     * Gets and sets the speed at which the utterance will be spoken at.\r
     *\r
     * @default 1\r
     */\r
    rate?: SpeechSynthesisUtterance['rate'];\r
    /**\r
     * Gets and sets the voice that will be used to speak the utterance.\r
     */\r
    voice?: MaybeAccessor<SpeechSynthesisVoice>;\r
    /**\r
     * Gets and sets the volume that the utterance will be spoken at.\r
     *\r
     * @default 1\r
     */\r
    volume?: SpeechSynthesisUtterance['volume'];\r
}\r
/**\r
 * Reactive SpeechSynthesis.\r
 *\r
 * @see https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis SpeechSynthesis\r
 */\r
declare function useSpeechSynthesis(text: MaybeAccessor<string>, options?: UseSpeechSynthesisOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    isPlaying: solid_js.Accessor<boolean>;\r
    status: solid_js.Accessor<UseSpeechSynthesisStatus>;\r
    utterance: solid_js.Accessor<SpeechSynthesisUtterance>;\r
    error: solid_js.Accessor<SpeechSynthesisErrorEvent | undefined>;\r
    toggle: (value?: boolean) => void;\r
    speak: () => void;\r
};\r
type UseSpeechSynthesisReturn = ReturnType<typeof useSpeechSynthesis>;

export { UseSpeechSynthesisOptions, UseSpeechSynthesisReturn, UseSpeechSynthesisStatus, useSpeechSynthesis };
`,mve=`import { MaybeAccessor } from '@solidjs-use/shared';
import { Accessor } from 'solid-js';

interface UseStepperReturn<StepName, Steps, Step> {\r
    /** List of steps. */\r
    steps: Accessor<Steps>;\r
    /** List of step names. */\r
    stepNames: Accessor<StepName[]>;\r
    /** Index of the current step. */\r
    index: Accessor<number>;\r
    /** Current step. */\r
    current: Accessor<Step>;\r
    /** Next step, or undefined if the current step is the last one. */\r
    next: Accessor<StepName | undefined>;\r
    /** Previous step, or undefined if the current step is the first one. */\r
    previous: Accessor<StepName | undefined>;\r
    /** Whether the current step is the first one. */\r
    isFirst: Accessor<boolean>;\r
    /** Whether the current step is the last one. */\r
    isLast: Accessor<boolean>;\r
    /** Get the step at the specified index. */\r
    at: (index: number) => Step | undefined;\r
    /** Get a step by the specified name. */\r
    get: (step: StepName) => Step | undefined;\r
    /** Go to the specified step. */\r
    goTo: (step: StepName) => void;\r
    /** Go to the next step. Does nothing if the current step is the last one. */\r
    goToNext: () => void;\r
    /** Go to the previous step. Does nothing if the current step is the previous one. */\r
    goToPrevious: () => void;\r
    /** Go back to the given step, only if the current step is after. */\r
    goBackTo: (step: StepName) => void;\r
    /** Checks whether the given step is the next step. */\r
    isNext: (step: StepName) => boolean;\r
    /** Checks whether the given step is the previous step. */\r
    isPrevious: (step: StepName) => boolean;\r
    /** Checks whether the given step is the current step. */\r
    isCurrent: (step: StepName) => boolean;\r
    /** Checks if the current step is before the given step. */\r
    isBefore: (step: StepName) => boolean;\r
    /** Checks if the current step is after the given step. */\r
    isAfter: (step: StepName) => boolean;\r
}\r
declare function useStepper<T extends string | number>(steps: MaybeAccessor<T[]>, initialStep?: T): UseStepperReturn<T, T[], T>;\r
declare function useStepper<T extends Record<string, any>>(steps: MaybeAccessor<T>, initialStep?: keyof T): UseStepperReturn<Exclude<keyof T, symbol>, T, T[keyof T]>;

export { UseStepperReturn, useStepper };
`,_ve=`declare function guessSerializerType<T extends string | number | boolean | object | null>(rawInit: T): "boolean" | "number" | "string" | "object" | "map" | "set" | "any" | "date";

export { guessSerializerType };
`,bve=`import { ConfigurableWindow } from '../_configurable.js';
import { StorageLike } from '../ssr-handlers.js';
import { Awaitable, ConfigurableEventFilter, RemovableSignal } from '@solidjs-use/shared';
import { Accessor } from 'solid-js';

interface Serializer<T> {\r
    read: (raw: string) => T;\r
    write: (value: T) => string;\r
}\r
interface SerializerAsync<T> {\r
    read: (raw: string) => Awaitable<T>;\r
    write: (value: T) => Awaitable<string>;\r
}\r
declare const StorageSerializers: Record<'boolean' | 'object' | 'number' | 'any' | 'string' | 'map' | 'set' | 'date', Serializer<any>>;\r
interface UseStorageOptions<T> extends ConfigurableEventFilter, ConfigurableWindow {\r
    /**\r
     * Watch for deep changes\r
     *\r
     * @default true\r
     */\r
    deep?: boolean;\r
    /**\r
     * Listen to storage changes, useful for multiple tabs application\r
     *\r
     * @default true\r
     */\r
    listenToStorageChanges?: boolean;\r
    /**\r
     * Write the default value to the storage when it does not exist\r
     *\r
     * @default true\r
     */\r
    writeDefaults?: boolean;\r
    /**\r
     * Merge the default value with the value read from the storage.\r
     *\r
     * When setting it to true, it will perform a **shallow merge** for objects.\r
     * You can pass a function to perform custom merge (e.g. deep merge), for example:\r
     *\r
     * @default false\r
     */\r
    mergeDefaults?: boolean | ((storageValue: T, defaults: T) => T);\r
    /**\r
     * Custom data serialization\r
     */\r
    serializer?: Serializer<T>;\r
    /**\r
     * On error callback\r
     *\r
     * Default log error to \`console.error\`\r
     */\r
    onError?: (error: unknown) => void;\r
}\r
declare function useStorage(key: string, defaults: Accessor<string>, storage?: StorageLike, options?: UseStorageOptions<string>): Accessor<string>;\r
declare function useStorage(key: string, defaults: string, storage?: StorageLike, options?: UseStorageOptions<string>): RemovableSignal<string>;\r
declare function useStorage(key: string, defaults: Accessor<boolean>, storage?: StorageLike, options?: UseStorageOptions<boolean>): Accessor<boolean>;\r
declare function useStorage(key: string, defaults: boolean, storage?: StorageLike, options?: UseStorageOptions<boolean>): RemovableSignal<boolean>;\r
declare function useStorage(key: string, defaults: Accessor<number>, storage?: StorageLike, options?: UseStorageOptions<number>): Accessor<number>;\r
declare function useStorage(key: string, defaults: number, storage?: StorageLike, options?: UseStorageOptions<number>): RemovableSignal<number>;\r
declare function useStorage<T>(key: string, defaults: Accessor<T>, storage?: StorageLike, options?: UseStorageOptions<T>): Accessor<T>;\r
declare function useStorage<T>(key: string, defaults: T, storage?: StorageLike, options?: UseStorageOptions<T>): RemovableSignal<T>;\r
declare function useStorage<T = unknown>(key: string, defaults: Accessor<null>, storage?: StorageLike, options?: UseStorageOptions<T>): Accessor<T>;\r
declare function useStorage<T = unknown>(key: string, defaults: null, storage?: StorageLike, options?: UseStorageOptions<T>): RemovableSignal<T>;

export { Serializer, SerializerAsync, StorageSerializers, UseStorageOptions, useStorage };
`,vve=`import { Accessor } from 'solid-js';
import { UseStorageOptions, SerializerAsync } from '../useStorage/index.js';
import { StorageLikeAsync } from '../ssr-handlers.js';
import { RemovableSignal } from '@solidjs-use/shared';
import '../_configurable.js';

interface UseStorageAsyncOptions<T> extends Omit<UseStorageOptions<T>, 'serializer'> {\r
    /**\r
     * Custom data serialization\r
     */\r
    serializer?: SerializerAsync<T>;\r
}\r
declare function useStorageAsync(key: string, initialValue: Accessor<string>, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<string>): Accessor<string>;\r
declare function useStorageAsync(key: string, initialValue: string, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<string>): RemovableSignal<string>;\r
declare function useStorageAsync(key: string, initialValue: Accessor<boolean>, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<boolean>): Accessor<boolean>;\r
declare function useStorageAsync(key: string, initialValue: boolean, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<boolean>): RemovableSignal<boolean>;\r
declare function useStorageAsync(key: string, initialValue: Accessor<number>, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<number>): Accessor<number>;\r
declare function useStorageAsync(key: string, initialValue: number, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<number>): RemovableSignal<number>;\r
declare function useStorageAsync<T>(key: string, initialValue: Accessor<T>, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<T>): Accessor<T>;\r
declare function useStorageAsync<T>(key: string, initialValue: T, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<T>): RemovableSignal<T>;\r
declare function useStorageAsync<T = unknown>(key: string, initialValue: Accessor<null>, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<T>): Accessor<T>;\r
declare function useStorageAsync<T = unknown>(key: string, initialValue: null, storage?: StorageLikeAsync, options?: UseStorageAsyncOptions<T>): RemovableSignal<T>;

export { UseStorageAsyncOptions, useStorageAsync };
`,Cve=`import { Accessor } from 'solid-js';
import { SimpleSetter } from '@solidjs-use/shared/solid-to-vue';
import { MaybeSignal } from '@solidjs-use/shared';
import { ConfigurableDocument } from '../_configurable.js';

interface UseStyleTagOptions extends ConfigurableDocument {\r
    /**\r
     * Media query for styles to apply\r
     */\r
    media?: string;\r
    /**\r
     * Load the style immediately\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Manual controls the timing of loading and unloading\r
     *\r
     * @default false\r
     */\r
    manual?: boolean;\r
    /**\r
     * DOM id of the style tag\r
     *\r
     * @default auto-incremented\r
     */\r
    id?: string;\r
}\r
interface UseStyleTagReturn {\r
    id: string;\r
    css: Accessor<string>;\r
    setCss: SimpleSetter<string>;\r
    load: () => void;\r
    unload: () => void;\r
    isLoaded: Accessor<boolean>;\r
}\r
/**\r
 * Inject <style> element in head.\r
 *\r
 * Overload: Omitted id\r
 */\r
declare function useStyleTag(css: MaybeSignal<string>, options?: UseStyleTagOptions): UseStyleTagReturn;

export { UseStyleTagOptions, UseStyleTagReturn, useStyleTag };
`,yve=`import { Accessor } from 'solid-js';

declare function useSupported(callback: () => unknown, sync?: boolean): Accessor<boolean>;

export { useSupported };
`,wve=`import { Position } from '../types.js';
import { ConfigurableWindow } from '../_configurable.js';
import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

declare enum SwipeDirection {\r
    UP = "UP",\r
    RIGHT = "RIGHT",\r
    DOWN = "DOWN",\r
    LEFT = "LEFT",\r
    NONE = "NONE"\r
}\r
interface UseSwipeOptions extends ConfigurableWindow {\r
    /**\r
     * Register events as passive\r
     *\r
     * @default true\r
     */\r
    passive?: boolean;\r
    /**\r
     * @default 50\r
     */\r
    threshold?: number;\r
    /**\r
     * Callback on swipe start\r
     */\r
    onSwipeStart?: (e: TouchEvent) => void;\r
    /**\r
     * Callback on swipe moves\r
     */\r
    onSwipe?: (e: TouchEvent) => void;\r
    /**\r
     * Callback on swipe ends\r
     */\r
    onSwipeEnd?: (e: TouchEvent, direction: SwipeDirection) => void;\r
}\r
interface UseSwipeReturn {\r
    isPassiveEventSupported: boolean;\r
    isSwiping: Accessor<boolean>;\r
    direction: Accessor<SwipeDirection | null>;\r
    coordsStart: Readonly<Position>;\r
    coordsEnd: Readonly<Position>;\r
    lengthX: Accessor<number>;\r
    lengthY: Accessor<number>;\r
    stop: () => void;\r
}\r
/**\r
 * Reactive swipe detection.\r
 */\r
declare function useSwipe(target: MaybeAccessor<EventTarget | null | undefined>, options?: UseSwipeOptions): UseSwipeReturn;

export { SwipeDirection, UseSwipeOptions, UseSwipeReturn, useSwipe };
`,Sve=`import * as solid_js from 'solid-js';
import { ConfigurableDocument } from '../_configurable.js';

type UseTextDirectionValue = 'ltr' | 'rtl' | 'auto';\r
interface UseTextDirectionOptions extends ConfigurableDocument {\r
    /**\r
     * CSS Selector for the target element applying to\r
     *\r
     * @default 'html'\r
     */\r
    selector?: string;\r
    /**\r
     * Observe \`document.querySelector(selector)\` changes using MutationObserve\r
     *\r
     * @default false\r
     */\r
    observe?: boolean;\r
    /**\r
     * Initial value\r
     *\r
     * @default 'ltr'\r
     */\r
    initialValue?: UseTextDirectionValue;\r
}\r
/**\r
 * Reactive dir of the element's text.\r
 */\r
declare function useTextDirection(options?: UseTextDirectionOptions): {\r
    dir: solid_js.Accessor<UseTextDirectionValue>;\r
    setDir: (v: UseTextDirectionValue) => void;\r
};

export { UseTextDirectionOptions, UseTextDirectionValue, useTextDirection };
`,xve=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactively track user text selection based on [\`Window.getSelection\`](https://developer.mozilla.org/en-US/docs/Web/API/Window/getSelection).\r
 */\r
declare function useTextSelection(options?: ConfigurableWindow): {\r
    text: solid_js.Accessor<string>;\r
    rects: solid_js.Accessor<DOMRect[]>;\r
    ranges: solid_js.Accessor<Range[]>;\r
    selection: solid_js.Accessor<Selection | null>;\r
};\r
type UseTextSelectionReturn = ReturnType<typeof useTextSelection>;

export { UseTextSelectionReturn, useTextSelection };
`,kve=`import * as solid_js from 'solid-js';
import { JSX } from 'solid-js';
import { MaybeAccessor, EffectOnDeps } from '@solidjs-use/shared';

interface UseTextareaAutoSizeOptions {\r
    /** Textarea element to autosize. */\r
    element?: MaybeAccessor<HTMLTextAreaElement | undefined>;\r
    /** Textarea content. */\r
    input?: MaybeAccessor<string | undefined>;\r
    /** Watch sources that should trigger a textarea resize. */\r
    deps?: EffectOnDeps;\r
    /** Function called when the textarea size changes. */\r
    onResize?: () => void;\r
}\r
declare function useTextareaAutoSize(options?: UseTextareaAutoSizeOptions): {\r
    setTextareaRef: solid_js.Setter<HTMLTextAreaElement>;\r
    value: solid_js.Accessor<string>;\r
    onChange: JSX.EventHandler<HTMLTextAreaElement, Event>;\r
    triggerResize: () => void;\r
};\r
type UseTextareaAutoSizeReturn = ReturnType<typeof useTextareaAutoSize>;

export { UseTextareaAutoSizeOptions, UseTextareaAutoSizeReturn, useTextareaAutoSize };
`,Lve=`import { UseHistoryTravelOptions, UseHistoryTravelAccessorReturn, UseHistoryTravelSignalReturn } from '../useHistoryTravel/index.js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { Accessor, Signal } from 'solid-js';
import '../useManualHistoryTravel/index.js';
import '../useCloned/index.js';
import 'solid-js/types/reactive/signal';

type UseThrottledHistoryTravelOptions<Raw, Serialized = Raw> = Omit<UseHistoryTravelOptions<Raw, Serialized>, 'eventFilter'> & {\r
    throttle?: MaybeAccessor<number>;\r
    trailing?: boolean;\r
};\r
type UseThrottledHistoryTravelAccessorReturn<Raw, Serialized = Raw> = UseHistoryTravelAccessorReturn<Raw, Serialized>;\r
type UseThrottledHistoryTravelSignalReturn<Raw, Serialized = Raw> = UseHistoryTravelSignalReturn<Raw, Serialized>;\r
/**\r
 * Shorthand for \`useHistoryTravel\` with throttled filter.\r
 */\r
declare function useThrottledHistoryTravel<Raw, Serialized = Raw>(source: Accessor<Raw>, options?: UseThrottledHistoryTravelOptions<Raw, Serialized>): UseThrottledHistoryTravelAccessorReturn<Raw, Serialized>;\r
declare function useThrottledHistoryTravel<Raw, Serialized = Raw>(source: Signal<Raw>, options?: UseThrottledHistoryTravelOptions<Raw, Serialized>): UseThrottledHistoryTravelSignalReturn<Raw, Serialized>;

export { UseThrottledHistoryTravelAccessorReturn, UseThrottledHistoryTravelOptions, UseThrottledHistoryTravelSignalReturn, useThrottledHistoryTravel };
`,Tve=`import { UseTimeAgoOptions, UseTimeAgoReturn } from './index.js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { Component, JSX } from 'solid-js';

interface UseTimeAgoComponentOptions extends Omit<UseTimeAgoOptions<true>, 'controls'> {\r
    time: MaybeAccessor<Date | number | string>;\r
    children?: (data: UseTimeAgoReturn<true>) => JSX.Element;\r
}\r
declare const UseTimeAgo: Component<UseTimeAgoComponentOptions>;

export { UseTimeAgo };
`,Dve=`import { Accessor } from 'solid-js';
import { Pausable, MaybeAccessor } from '@solidjs-use/shared';

type UseTimeAgoFormatter<T = number> = (value: T, isPast: boolean) => string;\r
type UseTimeAgoUnitNamesDefault = 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'year';\r
interface UseTimeAgoMessagesBuiltIn {\r
    justNow: string;\r
    past: string | UseTimeAgoFormatter<string>;\r
    future: string | UseTimeAgoFormatter<string>;\r
    invalid: string;\r
}\r
type UseTimeAgoMessages<UnitNames extends string = UseTimeAgoUnitNamesDefault> = UseTimeAgoMessagesBuiltIn & Record<UnitNames, string | UseTimeAgoFormatter>;\r
interface FormatTimeAgoOptions<UnitNames extends string = UseTimeAgoUnitNamesDefault> {\r
    /**\r
     * Maximum unit (of diff in milliseconds) to display the full date instead of relative\r
     *\r
     * @default undefined\r
     */\r
    max?: UnitNames | number;\r
    /**\r
     * Formatter for full date\r
     */\r
    fullDateFormatter?: (date: Date) => string;\r
    /**\r
     * Messages for formatting the string\r
     */\r
    messages?: UseTimeAgoMessages<UnitNames>;\r
    /**\r
     * Minimum display time unit (default is minute)\r
     *\r
     * @default false\r
     */\r
    showSecond?: boolean;\r
    /**\r
     * Rounding method to apply.\r
     *\r
     * @default 'round'\r
     */\r
    rounding?: 'round' | 'ceil' | 'floor' | number;\r
    /**\r
     * Custom units\r
     */\r
    units?: UseTimeAgoUnit[];\r
}\r
interface UseTimeAgoOptions<Controls extends boolean, UnitNames extends string = UseTimeAgoUnitNamesDefault> extends FormatTimeAgoOptions<UnitNames> {\r
    /**\r
     * Expose more controls\r
     *\r
     * @default false\r
     */\r
    controls?: Controls;\r
    /**\r
     * Intervals to update, set 0 to disable auto update\r
     *\r
     * @default 30_000\r
     */\r
    updateInterval?: number;\r
}\r
interface UseTimeAgoUnit<Unit extends string = UseTimeAgoUnitNamesDefault> {\r
    max: number;\r
    value: number;\r
    name: Unit;\r
}\r
type UseTimeAgoReturn<Controls extends boolean = false> = Controls extends true ? {\r
    timeAgo: Accessor<string>;\r
} & Pausable : Accessor<string>;\r
/**\r
 * Reactive time ago formatter.\r
 */\r
declare function useTimeAgo<UnitNames extends string = UseTimeAgoUnitNamesDefault>(time: MaybeAccessor<Date | number | string>, options?: UseTimeAgoOptions<false, UnitNames>): UseTimeAgoReturn;\r
declare function useTimeAgo<UnitNames extends string = UseTimeAgoUnitNamesDefault>(time: MaybeAccessor<Date | number | string>, options: UseTimeAgoOptions<true, UnitNames>): UseTimeAgoReturn<true>;\r
declare function formatTimeAgo<UnitNames extends string = UseTimeAgoUnitNamesDefault>(from: Date, options?: FormatTimeAgoOptions<UnitNames>, now?: Date | number): string;

export { FormatTimeAgoOptions, UseTimeAgoFormatter, UseTimeAgoMessages, UseTimeAgoMessagesBuiltIn, UseTimeAgoOptions, UseTimeAgoReturn, UseTimeAgoUnit, UseTimeAgoUnitNamesDefault, formatTimeAgo, useTimeAgo };
`,Eve=`import { Signal, Accessor } from 'solid-js';
import { Pausable } from '@solidjs-use/shared';

interface UseTimestampOptions<Controls extends boolean> {\r
    /**\r
     * Expose more controls\r
     *\r
     * @default false\r
     */\r
    controls?: Controls;\r
    /**\r
     * Offset value adding to the value\r
     *\r
     * @default 0\r
     */\r
    offset?: number;\r
    /**\r
     * Update the timestamp immediately\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Update interval, or use requestAnimationFrame\r
     *\r
     * @default requestAnimationFrame\r
     */\r
    interval?: 'requestAnimationFrame' | number;\r
    /**\r
     * Callback on each update\r
     */\r
    callback?: (timestamp: number) => void;\r
}\r
/**\r
 * Reactive current timestamp.\r
 */\r
declare function useTimestamp(options?: UseTimestampOptions<false>): Signal<number>;\r
declare function useTimestamp(options: UseTimestampOptions<true>): {\r
    timestamp: Accessor<number>;\r
} & Pausable;\r
type UseTimestampReturn = ReturnType<typeof useTimestamp>;

export { UseTimestampOptions, UseTimestampReturn, useTimestamp };
`,Ave=`import { Accessor, Signal } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableDocument } from '../_configurable.js';

type UseTitleOptionsBase = {\r
    /**\r
     * Observe \`document.title\` changes using MutationObserve\r
     * Cannot be used together with \`titleTemplate\` option.\r
     *\r
     * @default false\r
     */\r
    observe?: boolean;\r
} | {\r
    /**\r
     * The template string to parse the title (e.g., '%s | My Website')\r
     * Cannot be used together with \`observe\` option.\r
     *\r
     * @default '%s'\r
     */\r
    titleTemplate?: MaybeAccessor<string> | ((title: string) => string);\r
};\r
type UseTitleOptions = ConfigurableDocument & UseTitleOptionsBase;\r
declare function useTitle(newTitle: Accessor<string | null | undefined>, options?: UseTitleOptions): Accessor<string | null | undefined>;\r
declare function useTitle(newTitle?: string | null | undefined, options?: UseTitleOptions): Signal<string | null | undefined>;\r
type UseTitleReturn = ReturnType<typeof useTitle>;

export { UseTitleOptions, UseTitleOptionsBase, UseTitleReturn, useTitle };
`,Ive=`import { ConfigurableWindow } from '../_configurable.js';

type UrlParams = Record<string, string[] | string>;\r
interface UseUrlSearchParamsOptions<T> extends ConfigurableWindow {\r
    /**\r
     * @default true\r
     */\r
    removeNullishValues?: boolean;\r
    /**\r
     * @default false\r
     */\r
    removeFalsyValues?: boolean;\r
    /**\r
     * @default {}\r
     */\r
    initialValue?: T;\r
    /**\r
     * Write back to \`window.history\` automatically\r
     *\r
     * @default true\r
     */\r
    write?: boolean;\r
}\r
/**\r
 * Reactive URLSearchParams\r
 */\r
declare function useUrlSearchParams<T extends Record<string, any> = UrlParams>(mode?: 'history' | 'hash' | 'hash-params', options?: UseUrlSearchParamsOptions<T>): T;

export { UrlParams, UseUrlSearchParamsOptions, useUrlSearchParams };
`,Nve=`import * as solid_js from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';
import { ConfigurableNavigator } from '../_configurable.js';

interface UseUserMediaOptions extends ConfigurableNavigator {\r
    /**\r
     * If the stream is enabled\r
     * @default false\r
     */\r
    enabled?: MaybeAccessor<boolean>;\r
    /**\r
     * Recreate stream when the input devices id changed\r
     *\r
     * @default true\r
     */\r
    autoSwitch?: MaybeAccessor<boolean>;\r
    /**\r
     * The device id of video input\r
     *\r
     * When passing with \`undefined\` the default device will be used.\r
     * Pass \`false\` or "none" to disabled video input\r
     *\r
     * @default undefined\r
     */\r
    videoDeviceId?: MaybeAccessor<string | undefined | false | 'none'>;\r
    /**\r
     * The device id of audi input\r
     *\r
     * When passing with \`undefined\` the default device will be used.\r
     * Pass \`false\` or "none" to disabled audi input\r
     *\r
     * @default undefined\r
     */\r
    audioDeviceId?: MaybeAccessor<string | undefined | false | 'none'>;\r
}\r
/**\r
 * Reactive \`mediaDevices.getUserMedia\` streaming\r
 */\r
declare function useUserMedia(options?: UseUserMediaOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    stream: solid_js.Accessor<MediaStream | undefined>;\r
    start: () => Promise<MediaStream | undefined>;\r
    stop: () => void;\r
    restart: () => Promise<MediaStream | undefined>;\r
    videoDeviceId: solid_js.Accessor<string | false | undefined>;\r
    audioDeviceId: solid_js.Accessor<string | false | undefined>;\r
    enabled: solid_js.Accessor<MaybeAccessor<boolean>>;\r
    setEnabled: solid_js.Setter<MaybeAccessor<boolean>>;\r
    autoSwitch: solid_js.Accessor<MaybeAccessor<boolean>>;\r
    setAutoSwitch: solid_js.Setter<MaybeAccessor<boolean>>;\r
};\r
type UseUserMediaReturn = ReturnType<typeof useUserMedia>;

export { UseUserMediaOptions, UseUserMediaReturn, useUserMedia };
`,Mve=`import * as solid_js from 'solid-js';
import { ConfigurableNavigator } from '../_configurable.js';
import { MaybeAccessor, Pausable } from '@solidjs-use/shared';

interface UseVibrateOptions extends ConfigurableNavigator {\r
    /**\r
     *\r
     * Vibration Pattern\r
     *\r
     * An array of values describes alternating periods in which the\r
     * device is vibrating and not vibrating. Each value in the array\r
     * is converted to an integer, then interpreted alternately as\r
     * the number of milliseconds the device should vibrate and the\r
     * number of milliseconds it should not be vibrating\r
     *\r
     * @default []\r
     *\r
     */\r
    pattern?: MaybeAccessor<number[] | number>;\r
    /**\r
     * Interval to run a persistent vibration, in ms\r
     *\r
     * Pass \`0\` to disable\r
     *\r
     * @default 0\r
     *\r
     */\r
    interval?: number;\r
}\r
/**\r
 * Reactive vibrate\r
 */\r
declare function useVibrate(options?: UseVibrateOptions): {\r
    isSupported: solid_js.Accessor<boolean>;\r
    pattern: MaybeAccessor<number | number[]>;\r
    intervalControls: Pausable | undefined;\r
    vibrate: (pattern?: number | number[]) => void;\r
    stop: () => void;\r
};\r
type UseVibrateReturn = ReturnType<typeof useVibrate>;

export { UseVibrateOptions, UseVibrateReturn, useVibrate };
`,Rve=`import { StyleValue } from '@solidjs-use/shared/solid-to-vue';
import { Accessor } from 'solid-js';
import { MaybeAccessor } from '@solidjs-use/shared';

type UseVirtualListItemSize = number | ((index: number) => number);\r
interface UseHorizontalVirtualListOptions extends UseVirtualListOptionsBase {\r
    /**\r
     * item width, accept a pixel value or a function that returns the height\r
     *\r
     * @default 0\r
     */\r
    itemWidth: UseVirtualListItemSize;\r
}\r
interface UseVerticalVirtualListOptions extends UseVirtualListOptionsBase {\r
    /**\r
     * item height, accept a pixel value or a function that returns the height\r
     *\r
     * @default 0\r
     */\r
    itemHeight: UseVirtualListItemSize;\r
}\r
interface UseVirtualListOptionsBase {\r
    /**\r
     * the extra buffer items outside of the view area\r
     *\r
     * @default 5\r
     */\r
    overscan?: number;\r
}\r
type UseVirtualListOptions = UseHorizontalVirtualListOptions | UseVerticalVirtualListOptions;\r
interface UseVirtualListItem<T> {\r
    data: T;\r
    index: number;\r
}\r
interface UseVirtualListReturn<T> {\r
    list: Accessor<Array<UseVirtualListItem<T>>>;\r
    scrollTo: (index: number) => void;\r
    containerProps: {\r
        ref: (el: HTMLElement | null) => void;\r
        onScroll: () => void;\r
        style: StyleValue;\r
    };\r
    wrapperProps: Accessor<{\r
        style: {\r
            width: string;\r
            height: string;\r
            'margin-top': string;\r
        } | {\r
            width: string;\r
            height: string;\r
            'margin-left': string;\r
            display: string;\r
        };\r
    }>;\r
}\r
declare function useVirtualList<T = any>(list: MaybeAccessor<T[]>, options: UseVirtualListOptions): UseVirtualListReturn<T>;

export { UseHorizontalVirtualListOptions, UseVerticalVirtualListOptions, UseVirtualListItem, UseVirtualListOptions, UseVirtualListOptionsBase, UseVirtualListReturn, useVirtualList };
`,Ove=`import * as solid_js from 'solid-js';
import { ConfigurableNavigator, ConfigurableDocument } from '../_configurable.js';

type WakeLockType = 'screen';\r
interface WakeLockSentinel extends EventTarget {\r
    type: WakeLockType;\r
    released: boolean;\r
    release: () => Promise<void>;\r
}\r
type UseWakeLockOptions = ConfigurableNavigator & ConfigurableDocument;\r
/**\r
 * Reactive Screen Wake Lock API.\r
 */\r
declare const useWakeLock: (options?: UseWakeLockOptions) => {\r
    isSupported: solid_js.Accessor<boolean>;\r
    isActive: solid_js.Accessor<boolean>;\r
    request: (type: WakeLockType) => Promise<void>;\r
    release: () => Promise<void>;\r
};\r
type UseWakeLockReturn = ReturnType<typeof useWakeLock>;

export { UseWakeLockOptions, UseWakeLockReturn, WakeLockSentinel, useWakeLock };
`,Pve=`import * as solid_js from 'solid-js';
import { EventHook } from '@solidjs-use/shared';
import { ConfigurableWindow } from '../_configurable.js';

interface WebNotificationOptions {\r
    /**\r
     * The title read-only property of the Notification interface indicates\r
     * the title of the notification\r
     *\r
     * @default ''\r
     */\r
    title?: string;\r
    /**\r
     * The body string of the notification as specified in the constructor's\r
     * options parameter.\r
     *\r
     * @default ''\r
     */\r
    body?: string;\r
    /**\r
     * The text direction of the notification as specified in the constructor's\r
     * options parameter.\r
     *\r
     * @default ''\r
     */\r
    dir?: 'auto' | 'ltr' | 'rtl';\r
    /**\r
     * The language code of the notification as specified in the constructor's\r
     * options parameter.\r
     *\r
     * @default DOMString\r
     */\r
    lang?: string;\r
    /**\r
     * The ID of the notification(if any) as specified in the constructor's options\r
     * parameter.\r
     *\r
     * @default ''\r
     */\r
    tag?: string;\r
    /**\r
     * The URL of the image used as an icon of the notification as specified\r
     * in the constructor's options parameter.\r
     *\r
     * @default ''\r
     */\r
    icon?: string;\r
    /**\r
     * Specifies whether the user should be notified after a new notification\r
     * replaces an old one.\r
     *\r
     * @default false\r
     */\r
    renotify?: boolean;\r
    /**\r
     * A boolean value indicating that a notification should remain active until the\r
     * user clicks or dismisses it, rather than closing automatically.\r
     *\r
     * @default false\r
     */\r
    requireInteraction?: boolean;\r
    /**\r
     * The silent read-only property of the Notification interface specifies\r
     * whether the notification should be silent, i.e., no sounds or vibrations\r
     * should be issued, regardless of the device settings.\r
     *\r
     * @default false\r
     */\r
    silent?: boolean;\r
    /**\r
     * Specifies a vibration pattern for devices with vibration hardware to emit.\r
     * A vibration pattern, as specified in the Vibration API spec\r
     *\r
     * @see https://w3c.github.io/vibration/\r
     */\r
    vibrate?: number[];\r
}\r
interface UseWebNotificationOptions extends WebNotificationOptions, ConfigurableWindow {\r
}\r
/**\r
 * Reactive useWebNotification\r
 */\r
declare const useWebNotification: (defaultOptions?: UseWebNotificationOptions) => {\r
    isSupported: solid_js.Accessor<boolean>;\r
    notification: solid_js.Accessor<Notification | null>;\r
    show: (overrides?: WebNotificationOptions) => Promise<Notification | undefined>;\r
    close: () => void;\r
    onClick: EventHook<any>;\r
    onShow: EventHook<any>;\r
    onError: EventHook<any>;\r
    onClose: EventHook<any>;\r
};\r
type UseWebNotificationReturn = ReturnType<typeof useWebNotification>;

export { UseWebNotificationOptions, UseWebNotificationReturn, WebNotificationOptions, useWebNotification };
`,Fve=`import { Accessor } from 'solid-js';
import { Fn, MaybeAccessor } from '@solidjs-use/shared';

type WebSocketStatus = 'OPEN' | 'CONNECTING' | 'CLOSED';\r
interface UseWebSocketOptions {\r
    onConnected?: (ws: WebSocket) => void;\r
    onDisconnected?: (ws: WebSocket, event: CloseEvent) => void;\r
    onError?: (ws: WebSocket, event: Event) => void;\r
    onMessage?: (ws: WebSocket, event: MessageEvent) => void;\r
    /**\r
     * Send heartbeat for every x milliseconds passed\r
     *\r
     * @default false\r
     */\r
    heartbeat?: boolean | {\r
        /**\r
         * Message for the heartbeat\r
         *\r
         * @default 'ping'\r
         */\r
        message?: string | ArrayBuffer | Blob;\r
        /**\r
         * Interval, in milliseconds\r
         *\r
         * @default 1000\r
         */\r
        interval?: number;\r
        /**\r
         * Heartbeat response timeout, in milliseconds\r
         *\r
         * @default 1000\r
         */\r
        pongTimeout?: number;\r
    };\r
    /**\r
     * Enabled auto reconnect\r
     *\r
     * @default false\r
     */\r
    autoReconnect?: boolean | {\r
        /**\r
         * Maximum retry times.\r
         *\r
         * Or you can pass a predicate function (which returns true if you want to retry).\r
         *\r
         * @default -1\r
         */\r
        retries?: number | (() => boolean);\r
        /**\r
         * Delay for reconnect, in milliseconds\r
         *\r
         * @default 1000\r
         */\r
        delay?: number;\r
        /**\r
         * On maximum retry times reached.\r
         */\r
        onFailed?: Fn;\r
    };\r
    /**\r
     * Automatically open a connection\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Automatically close a connection\r
     *\r
     * @default true\r
     */\r
    autoClose?: boolean;\r
    /**\r
     * List of one or more sub-protocol strings\r
     *\r
     * @default []\r
     */\r
    protocols?: string[];\r
}\r
interface UseWebSocketReturn<T> {\r
    /**\r
     * Reference to the latest data received via the websocket,\r
     * can be watched to respond to incoming messages\r
     */\r
    data: Accessor<T | null>;\r
    /**\r
     * The current websocket status, can be only one of:\r
     * 'OPEN', 'CONNECTING', 'CLOSED'\r
     */\r
    status: Accessor<WebSocketStatus>;\r
    /**\r
     * Closes the websocket connection gracefully.\r
     */\r
    close: WebSocket['close'];\r
    /**\r
     * Reopen the websocket connection.\r
     * If there the current one is active, will close it before opening a new one.\r
     */\r
    open: Fn;\r
    /**\r
     * Sends data through the websocket connection.\r
     *\r
     * @param data\r
     * @param useBuffer when the socket is not yet open, store the data into the buffer and sent them one connected. Default to true.\r
     */\r
    send: (data: string | ArrayBuffer | Blob, useBuffer?: boolean) => boolean;\r
    /**\r
     * Reference to the WebSocket instance.\r
     */\r
    ws: Accessor<WebSocket | undefined>;\r
}\r
/**\r
 * Reactive WebSocket client.\r
 */\r
declare function useWebSocket<Data = any>(url: MaybeAccessor<string | URL>, options?: UseWebSocketOptions): UseWebSocketReturn<Data>;

export { UseWebSocketOptions, UseWebSocketReturn, WebSocketStatus, useWebSocket };
`,Bve=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface UseWebWorkerReturn<Data = any> {\r
    data: Accessor<Data>;\r
    post: (typeof Worker.prototype)['postMessage'];\r
    terminate: () => void;\r
    worker: Accessor<Worker | undefined>;\r
}\r
type WorkerFn = (...args: unknown[]) => Worker;\r
/**\r
 * Simple Web Workers registration and communication.\r
 */\r
declare function useWebWorker<T = any>(url: string, workerOptions?: WorkerOptions, options?: ConfigurableWindow): UseWebWorkerReturn<T>;\r
/**\r
 * Simple Web Workers registration and communication.\r
 */\r
declare function useWebWorker<T = any>(worker: Worker | WorkerFn): UseWebWorkerReturn<T>;

export { UseWebWorkerReturn, useWebWorker };
`,Wve=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

type WebWorkerStatus = 'PENDING' | 'SUCCESS' | 'RUNNING' | 'ERROR' | 'TIMEOUT_EXPIRED';\r
interface UseWebWorkerOptions extends ConfigurableWindow {\r
    /**\r
     * Number of milliseconds before killing the worker\r
     *\r
     * @default undefined\r
     */\r
    timeout?: number;\r
    /**\r
     * An array that contains the external dependencies needed to run the worker\r
     */\r
    dependencies?: string[];\r
}\r
/**\r
 * Run expensive function without blocking the UI, using a simple syntax that makes use of Promise.\r
 */\r
declare const useWebWorkerFn: <T extends (...fnArgs: any[]) => any>(fn: T, options?: UseWebWorkerOptions) => {\r
    workerFn: (...fnArgs: Parameters<T>) => Promise<ReturnType<T>>;\r
    workerStatus: solid_js.Accessor<WebWorkerStatus>;\r
    workerTerminate: (status?: WebWorkerStatus) => void;\r
};\r
type UseWebWorkerFnReturn = ReturnType<typeof useWebWorkerFn>;

export { UseWebWorkerFnReturn, UseWebWorkerOptions, WebWorkerStatus, useWebWorkerFn };
`,Vve=`import { Accessor } from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactively track window focus with \`window.onfocus\` and \`window.onblur\`.\r
 */\r
declare function useWindowFocus({ window }?: ConfigurableWindow): Accessor<boolean>;

export { useWindowFocus };
`,Hve=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

/**\r
 * Reactive window scroll.\r
 */\r
declare function useWindowScroll({ window }?: ConfigurableWindow): {\r
    x: solid_js.Accessor<number>;\r
    y: solid_js.Accessor<number>;\r
};\r
type UseWindowScrollReturn = ReturnType<typeof useWindowScroll>;

export { UseWindowScrollReturn, useWindowScroll };
`,Uve=`import * as solid_js from 'solid-js';
import { ConfigurableWindow } from '../_configurable.js';

interface UseWindowSizeOptions extends ConfigurableWindow {\r
    initialWidth?: number;\r
    initialHeight?: number;\r
    /**\r
     * Listen to window \`orientationchange\` event\r
     *\r
     * @default true\r
     */\r
    listenOrientation?: boolean;\r
    /**\r
     * Whether the scrollbar should be included in the width and height\r
     * @default true\r
     */\r
    includeScrollbar?: boolean;\r
}\r
/**\r
 * Reactive window size.\r
 */\r
declare function useWindowSize(options?: UseWindowSizeOptions): {\r
    width: solid_js.Accessor<number>;\r
    height: solid_js.Accessor<number>;\r
};\r
type UseWindowSizeReturn = ReturnType<typeof useWindowSize>;

export { UseWindowSizeOptions, UseWindowSizeReturn, useWindowSize };
`,jve=`/**\r
 * Converts the "fn" function into the syntax needed to be executed within a web worker\r
 *\r
 * @param {Function} fn the function to run with web worker\r
 * @param {Array.<String>} deps array of strings, imported into the worker through "importScripts"\r
 *\r
 * @returns {String} a blob url, containing the code of "fn" as a string\r
 *\r
 * @example\r
 * createWorkerBlobUrl((a,b) => a+b, [])\r
 * // return "onmessage=return Promise.resolve((a,b) => a + b)\r
 * .then(postMessage(['SUCCESS', result]))\r
 * .catch(postMessage(['ERROR', error])"\r
 */\r
declare const createWorkerBlobUrl: (fn: Function, deps: string[]) => string;

export { createWorkerBlobUrl as default };
`,$ve=`/**\r
 *\r
 * Concatenates the dependencies into a comma separated string.\r
 * this string will then be passed as an argument to the "importScripts" function\r
 *\r
 * @param {Array<String>} deps array of string\r
 * @returns {String} a string composed by the concatenation of the array\r
 * elements "deps" and "importScripts".\r
 *\r
 * @example\r
 * depsParser(['demo1', 'demo2']) // return importScripts('demo1', 'demo2')\r
 */\r
declare const depsParser: (deps: string[]) => string;

export { depsParser as default };
`,zve=`/**\r
 * This function accepts as a parameter a function "userFunc"\r
 * And as a result returns an anonymous function.\r
 * This anonymous function, accepts as arguments,\r
 * the parameters to pass to the function "useArgs" and returns a Promise\r
 * This function can be used as a wrapper, only inside a Worker\r
 * because it depends by "postMessage".\r
 *\r
 * @param {Function} userFunc {Function} fn the function to run with web worker\r
 *\r
 * @returns {Function} returns a function that accepts the parameters\r
 * to be passed to the "userFunc" function\r
 */\r
declare const jobRunner: (userFunc: Function) => (e: MessageEvent) => Promise<void>;

export { jobRunner as default };
`,Kve=`export { useDebounce as accessorDebounced, useDebounce as debouncedAccessor, useDebounce } from './accessorDebounced/index.js';
export { accessorDefault } from './accessorDefault/index.js';
export { useThrottle as accessorThrottled, useThrottle as throttledAccessor, useThrottle } from './accessorThrottled/index.js';
export { EventHook, EventHookOff, EventHookOn, EventHookTrigger, createEventHook } from './createEventHook/index.js';
export { createSharedComposable } from './createSharedComposable/index.js';
export { get } from './get/index.js';
export { isDefined } from './isDefined/index.js';
export { makeDestructurable } from './makeDestructurable/index.js';
export { mutableMemo } from './mutableMemo/index.js';
export { omitMutable } from './omitMutable/index.js';
export { pickMutable } from './pickMutable/index.js';
export { Reactified, createReactiveFn, createReactiveFn as reactify } from './reactify/index.js';
export { ReactifyNested, ReactifyObjectOptions, reactifyObject } from './reactifyObject/index.js';
export { resolveAccessor } from './resolveAccessor/index.js';
export { autoResetSignal, autoResetSignal as signalAutoReset } from './signalAutoReset/index.js';
export { SyncSignalOptions, syncSignal } from './syncSignal/index.js';
export { syncSignals } from './syncSignals/index.js';
export { toAccessors } from './toAccessors/index.js';
export { toReactive } from './toReactive/index.js';
export { tryOnCleanup } from './tryOnCleanup/index.js';
export { tryOnMount } from './tryOnMount/index.js';
export { unAccessor } from './unAccessor/index.js';
export { UntilArrayInstance, UntilBaseInstance, UntilToMatchOptions, UntilValueInstance, until } from './until/index.js';
export { useArrayEvery } from './useArrayEvery/index.js';
export { useArrayFilter } from './useArrayFilter/index.js';
export { useArrayFind } from './useArrayFind/index.js';
export { useArrayFindIndex } from './useArrayFindIndex/index.js';
export { useArrayJoin } from './useArrayJoin/index.js';
export { useArrayMap } from './useArrayMap/index.js';
export { UseArrayReducer, useArrayReduce } from './useArrayReduce/index.js';
export { useArraySome } from './useArraySome/index.js';
export { useArrayUnique } from './useArrayUnique/index.js';
export { UseAsyncQueueOptions, UseAsyncQueueResult, UseAsyncQueueReturn, UseAsyncQueueTask, useAsyncQueue } from './useAsyncQueue/index.js';
export { UseCounterOptions, UserCounterReturn, useCounter } from './useCounter/index.js';
export { DateLike, UseDateFormatOptions, UseDateFormatReturn, formatDate, normalizeDate, useDateFormat } from './useDateFormat/index.js';
export { useDebounceFn } from './useDebounceFn/index.js';
export { UseIntervalOptions, useInterval } from './useInterval/index.js';
export { UseIntervalFnOptions, useIntervalFn } from './useIntervalFn/index.js';
export { UseLastChangedOptions, useLastChanged } from './useLastChanged/index.js';
export { UseSortedCompareFn, UseSortedFn, UseSortedOptions, useSorted } from './useSorted/index.js';
export { useThrottleFn } from './useThrottleFn/index.js';
export { UseTimeoutOptions, useTimeout } from './useTimeout/index.js';
export { UseTimeoutFnOptions, useTimeoutFn } from './useTimeoutFn/index.js';
export { useTimeoutPoll } from './useTimeoutPoll/index.js';
export { UseToNumberOptions, useToNumber } from './useToNumber/index.js';
export { useToString } from './useToString/index.js';
export { UseToggleOptions, useToggle } from './useToggle/index.js';
export { SingletonPromiseReturn, containsProp, createSingletonPromise, identity, increaseWithUnit, invoke, objectPick, promiseTimeout } from './utils/index.js';
export { WatchCallback, WatchDeps, WatchOptions, WatchSource, WatchStopHandle, watch } from './watch/index.js';
export { WatchArrayCallback, watchArray } from './watchArray/index.js';
export { WatchAtMostOptions, WatchAtMostReturn, watchAtMost } from './watchAtMost/index.js';
export { WatchDebouncedOptions, debouncedWatch, debouncedWatch as watchDebounced } from './watchDebounced/index.js';
export { EffectWithFilterOptions, IgnoredUpdater, WatchIgnorableReturn, ignorableEffect, ignorableEffect as watchIgnorable } from './watchIgnorable/index.js';
export { watchOnce } from './watchOnce/index.js';
export { WatchPausableReturn, pausableWatch, pausableWatch as watchPausable } from './watchPausable/index.js';
export { WatchThrottledOptions, throttledWatch, throttledWatch as watchThrottled } from './watchThrottled/index.js';
export { WatchTriggerableCallback, WatchTriggerableReturn, watchTriggerable } from './watchTriggerable/index.js';
export { WatchWithFilterOptions, watchWithFilter } from './watchWithFilter/index.js';
export { whenever } from './whenever/index.js';
export { nextTick } from '@solidjs-use/solid-to-vue';
export { ConfigurableEventFilter, DebounceFilterOptions, EventFilter, FunctionArgs, FunctionWrapperOptions, bypassFilter, createFilterWrapper, debounceFilter, pausableFilter, throttleFilter } from './utils/filters.js';
export { assert, clamp, hasOwn, isBoolean, isClient, isDef, isFunction, isIOS, isNumber, isObject, isString, isWindow, noop, now, rand, timestamp } from './utils/is.js';
export { AnyFn, ArgumentsType, Arrayable, Awaitable, EffectOnDeps, ElementOf, Fn, MapOldSources, MapSources, MaybeAccessor, MaybeElement, MaybeElementAccessor, MaybeSignal, Pausable, PromisifyFn, RemovableSignal, Stoppable } from './utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';
`,Gve=`export * from '@solidjs-use/solid-to-vue';
`,qve=`import { Accessor } from 'solid-js';
import { DebounceFilterOptions } from '../utils/filters.js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Debounce updates of a Accessor.\r
 */\r
declare function accessorDebounced<T>(value: Accessor<T>, ms?: MaybeAccessor<number>, options?: DebounceFilterOptions): Accessor<T>;

export { accessorDebounced, accessorDebounced as debouncedAccessor, accessorDebounced as useDebounce };
`,Zve=`import { Accessor } from 'solid-js';

/**\r
 * Apply default value to a Accessor.\r
 */\r
declare function accessorDefault<T>(source: Accessor<T | undefined | null>, defaultValue: T): Accessor<T>;

export { accessorDefault };
`,Yve=`import { Accessor } from 'solid-js';

/**\r
 * Throttle execution of a function. Especially useful for rate limiting\r
 * execution of handlers on events like resize and scroll.\r
 *\r
 * @param value Ref value to be watched with throttle effect\r
 * @param  delay  A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\r
 * @param [trailing=true] if true, update the value again after the delay time is up\r
 * @param [leading=true] if true, update the value on the leading edge of the ms timeout\r
 */\r
declare function accessorThrottled<T>(value: Accessor<T>, delay?: number, trailing?: boolean, leading?: boolean): Accessor<T>;

export { accessorThrottled, accessorThrottled as throttledAccessor, accessorThrottled as useThrottle };
`,Xve=`/**\r
 * The source code for this function was inspired by vue-apollo's \`useEventHook\` util\r
 * https://github.com/vuejs/vue-apollo/blob/v4/packages/vue-apollo-composable/src/util/useEventHook.ts\r
 */\r
type EventHookOn<T = any> = (fn: (param: T) => void) => {\r
    off: () => void;\r
};\r
type EventHookOff<T = any> = (fn: (param: T) => void) => void;\r
type EventHookTrigger<T = any> = (param: T) => void;\r
interface EventHook<T = any> {\r
    on: EventHookOn<T>;\r
    off: EventHookOff<T>;\r
    trigger: EventHookTrigger<T>;\r
}\r
/**\r
 * Utility for creating event hooks\r
 */\r
declare function createEventHook<T = any>(): EventHook<T>;

export { EventHook, EventHookOff, EventHookOn, EventHookTrigger, createEventHook };
`,Qve=`/**\r
 * Make a composable function usable with multiple SolidJS component instances.\r
 */\r
declare function createSharedComposable<Fn extends (...args: any[]) => any>(composable: Fn): Fn;

export { createSharedComposable };
`,Jve=`import { MaybeAccessor } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Shorthand for accessing \`Accessor()\`\r
 */\r
declare function get<T>(accessor: MaybeAccessor<T>): T;\r
declare function get<T, K extends keyof T>(accessor: MaybeAccessor<T>, key: K): T[K];

export { get };
`,e0e=`import { Accessor } from 'solid-js';

declare function isDefined<T>(v: Accessor<T>): v is Accessor<Exclude<T, null | undefined>>;\r
declare function isDefined<T>(v: T): v is Exclude<T, null | undefined>;

export { isDefined };
`,t0e=`declare function makeDestructurable<T extends Record<string, unknown>, A extends readonly any[]>(obj: T, arr: A): T & A;

export { makeDestructurable };
`,n0e=`/**\r
 * Memo reactive object.\r
 */\r
declare function mutableMemo<T extends {}>(fn: () => T): T;

export { mutableMemo };
`,i0e=`/**\r
 * Reactively omit fields from a reactive object\r
 */\r
declare function omitMutable<T extends object, K extends keyof T>(obj: T, ...keys: Array<K | K[]>): Omit<T, K>;

export { omitMutable };
`,s0e=`/**\r
 * Reactively pick fields from a reactive object\r
 */\r
declare function pickMutable<T extends object, K extends keyof T>(obj: T, ...keys: Array<K | K[]>): {\r
    [S in K]: T[S];\r
};

export { pickMutable };
`,r0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

type Reactified<T> = T extends (...args: infer A) => infer R ? (...args: {\r
    [K in keyof A]: MaybeAccessor<A[K]>;\r
}) => Accessor<R> : never;\r
/**\r
 * Converts plain function into a reactive function.\r
 * The converted function accepts Signals as it's arguments\r
 * and returns a ComputedRef, with proper typing.\r
 *\r
 * @param fn - Source function\r
 */\r
declare function reactify<T extends Function>(fn: T): Reactified<T>;

export { Reactified, reactify as createReactiveFn, reactify };
`,o0e=`import { Reactified } from '../reactify/index.js';
import 'solid-js';
import '../utils/types.js';
import 'solid-js/types/reactive/signal';

type ReactifyNested<T, Keys extends keyof T = keyof T> = {\r
    [K in Keys]: T[K] extends (...args: any[]) => any ? Reactified<T[K]> : T[K];\r
};\r
interface ReactifyObjectOptions {\r
    /**\r
     * Includes names from Object.getOwnPropertyNames\r
     *\r
     * @default true\r
     */\r
    includeOwnProperties?: boolean;\r
}\r
/**\r
 * Apply \`reactify\` to an object\r
 */\r
declare function reactifyObject<T extends object, Keys extends keyof T>(obj: T, keys?: Array<keyof T>): ReactifyNested<T, Keys>;\r
declare function reactifyObject<T extends object>(obj: T, options?: ReactifyObjectOptions): ReactifyNested<T, keyof T>;

export { ReactifyNested, ReactifyObjectOptions, reactifyObject };
`,a0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Normalize value/accessor/getter to \`Accessor\`.\r
 */\r
declare function resolveAccessor<T>(r: MaybeAccessor<T>): Accessor<T>;

export { resolveAccessor };
`,l0e=`import { Signal } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Create a Signal which will be reset to the default value after some time.\r
 *\r
 * @param defaultValue The value which will be set.\r
 * @param afterMs      A zero-or-greater delay in milliseconds.\r
 */\r
declare function signalAutoReset<T>(defaultValue: T, afterMs?: MaybeAccessor<number>): Signal<T>;

export { signalAutoReset as autoResetSignal, signalAutoReset };
`,c0e=`import { Signal } from 'solid-js';

interface SyncSignalOptions<L, R = L> {\r
    /**\r
     * Sync values immediately\r
     */\r
    defer?: boolean;\r
    /**\r
     * Direction of syncing. Value will be redefined if you define syncConvertors\r
     *\r
     * @default 'both'\r
     */\r
    direction?: 'ltr' | 'rtl' | 'both';\r
    /**\r
     * Custom transform function\r
     */\r
    transform?: {\r
        ltr?: (left: L) => R;\r
        rtl?: (right: R) => L;\r
    };\r
}\r
/**\r
 * Two-way signal synchronization.\r
 *\r
 * @param left\r
 * @param right\r
 */\r
declare function syncSignal<L, R = L>([left, setLeft]: Signal<L>, [right, setRight]: Signal<R>, options?: SyncSignalOptions<L, R>): () => void;

export { SyncSignalOptions, syncSignal };
`,d0e=`import { WatchSource, WatchOptions } from '../watch/index.js';
import { Setter } from 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Keep target signal(s) in sync with the Signal\r
 */\r
declare function syncSignals<T>(source: WatchSource<T>, targets: Setter<T> | Array<Setter<T>>, options?: WatchOptions): () => void;

export { syncSignals };
`,u0e=`import { Accessor } from 'solid-js';

declare function toAccessors<T extends object = {}>(props: T, defaultProps?: T): Record<keyof T, Accessor<T[keyof T]>>;

export { toAccessors };
`,h0e=`import { MaybeAccessor } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Converts Accessor to reactive.\r
 */\r
declare function toReactive<T extends object>(objectAccessor: MaybeAccessor<T>): T;

export { toReactive };
`,f0e=`import { Fn } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Call OnCleanup() if it's inside a component lifecycle, if not, do nothing\r
 */\r
declare function tryOnCleanup(fn: Fn): boolean;

export { tryOnCleanup };
`,g0e=`import { Fn } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Call onMounted() if it's inside a component lifecycle, if not, just call the function\r
 *\r
 * @param fn\r
 * @param sync if set to false, it will run in the nextTick() of Vue\r
 */\r
declare function tryOnMount(fn: Fn, sync?: boolean): void;

export { tryOnMount };
`,p0e=`import { MaybeAccessor } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Get the value of value/Accessor.\r
 */\r
declare function unAccessor<T>(r: MaybeAccessor<T>): T;

export { unAccessor };
`,m0e=`import { MaybeAccessor, ElementOf, EffectOnDeps } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

interface UntilToMatchOptions {\r
    /**\r
     * Milliseconds timeout for promise to resolve/reject if the when condition does not meet.\r
     * 0 for never timed out\r
     *\r
     * @default 0\r
     */\r
    timeout?: number;\r
    /**\r
     * Reject the promise when timeout\r
     *\r
     * @default false\r
     */\r
    throwOnTimeout?: boolean;\r
}\r
interface UntilBaseInstance<T, Not extends boolean = false> {\r
    toMatch<U extends T = T>(condition: (v: T) => v is U, options?: UntilToMatchOptions): Not extends true ? Promise<Exclude<T, U>> : Promise<U>;\r
    toMatch(condition: (v: T) => boolean, options?: UntilToMatchOptions): Promise<T>;\r
    changed: (options?: UntilToMatchOptions) => Promise<T>;\r
    changedTimes: (n?: number, options?: UntilToMatchOptions) => Promise<T>;\r
}\r
type Falsy = false | void | null | undefined | 0 | 0n | '';\r
interface UntilValueInstance<T, Not extends boolean = false> extends UntilBaseInstance<T, Not> {\r
    readonly not: UntilValueInstance<T, Not extends true ? false : true>;\r
    toBe: <P = T>(value: MaybeAccessor<P>, options?: UntilToMatchOptions) => Not extends true ? Promise<T> : Promise<P>;\r
    toBeTruthy: (options?: UntilToMatchOptions) => Not extends true ? Promise<T & Falsy> : Promise<Exclude<T, Falsy>>;\r
    toBeNull: (options?: UntilToMatchOptions) => Not extends true ? Promise<Exclude<T, null>> : Promise<null>;\r
    toBeUndefined: (options?: UntilToMatchOptions) => Not extends true ? Promise<Exclude<T, undefined>> : Promise<undefined>;\r
    toBeNaN: (options?: UntilToMatchOptions) => Promise<T>;\r
}\r
interface UntilArrayInstance<T> extends UntilBaseInstance<T> {\r
    readonly not: UntilArrayInstance<T>;\r
    toContains: (value: MaybeAccessor<ElementOf<T>>, options?: UntilToMatchOptions) => Promise<T>;\r
}\r
/**\r
 * Promised one-time watch for changes\r
 *\r
 * \`\`\`\r
 * const { count } = useCounter()\r
 *\r
 * await until(count).toMatch(v => v > 7)\r
 *\r
 * alert('Counter is now larger than 7!')\r
 * \`\`\`\r
 */\r
declare function until<T extends unknown[]>(r: EffectOnDeps<T> | MaybeAccessor<T>): UntilArrayInstance<T>;\r
declare function until<T>(r: EffectOnDeps<T> | MaybeAccessor<T>): UntilValueInstance<T>;

export { UntilArrayInstance, UntilBaseInstance, UntilToMatchOptions, UntilValueInstance, until };
`,_0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.every\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param fn - a function to test each element.\r
 *\r
 * @returns {boolean} **true** if the \`fn\` function returns a **truthy** value for every element from the array. Otherwise, **false**.\r
 */\r
declare function useArrayEvery<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, fn: (element: T, index: number, array: Array<MaybeAccessor<T>>) => unknown): Accessor<boolean>;

export { useArrayEvery };
`,b0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.filter\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param fn - a function that is called for every element of the given \`list\`. Each time \`fn\` executes, the returned value is added to the new array.\r
 *\r
 * @returns {Array} a shallow copy of a portion of the given array, filtered down to just the elements from the given array that pass the test implemented by the provided function. If no elements pass the test, an empty array will be returned.\r
 */\r
declare function useArrayFilter<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, fn: (element: T, index: number, array: T[]) => boolean): Accessor<T[]>;

export { useArrayFilter };
`,v0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.find\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param fn - a function to test each element.\r
 *\r
 * @returns the first element in the array that satisfies the provided testing function. Otherwise, undefined is returned.\r
 */\r
declare function useArrayFind<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, fn: (element: T, index: number, array: Array<MaybeAccessor<T>>) => boolean): Accessor<T | undefined>;

export { useArrayFind };
`,C0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.findIndex\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param fn - a function to test each element.\r
 *\r
 * @returns {number} the index of the first element in the array that passes the test. Otherwise, "-1".\r
 */\r
declare function useArrayFindIndex<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, fn: (element: T, index: number, array: Array<MaybeAccessor<T>>) => unknown): Accessor<number>;

export { useArrayFindIndex };
`,y0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.join\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param {string} separator - a string to separate each pair of adjacent elements of the array. If omitted, the array elements are separated with a comma (",").\r
 *\r
 * @returns {string} a string with all array elements joined. If arr.length is 0, the empty string is returned.\r
 */\r
declare function useArrayJoin(list: MaybeAccessor<Array<MaybeAccessor<any>>>, separator?: MaybeAccessor<string | undefined>): Accessor<string>;

export { useArrayJoin };
`,w0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.map\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param fn - a function that is called for every element of the given \`list\`. Each time \`fn\` executes, the returned value is added to the new array.\r
 *\r
 * @returns {Array} a new array with each element being the result of the callback function.\r
 */\r
declare function useArrayMap<T, U = T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, fn: (element: T, index: number, array: T[]) => U): Accessor<U[]>;

export { useArrayMap };
`,S0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

type UseArrayReducer<PV, CV, R> = (previousValue: PV, currentValue: CV, currentIndex: number) => R;\r
/**\r
 * Reactive \`Array.reduce\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param reducer - a "reducer" function.\r
 *\r
 * @returns the value that results from running the "reducer" callback function to completion over the entire array.\r
 */\r
declare function useArrayReduce<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, reducer: UseArrayReducer<T, T, T>): Accessor<T>;\r
/**\r
 * Reactive \`Array.reduce\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param reducer - a "reducer" function.\r
 * @param initialValue - a value to be initialized the first time when the callback is called.\r
 *\r
 * @returns the value that results from running the "reducer" callback function to completion over the entire array.\r
 */\r
declare function useArrayReduce<T, U>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, reducer: UseArrayReducer<U, T, U>, initialValue: MaybeAccessor<U>): Accessor<U>;

export { UseArrayReducer, useArrayReduce };
`,x0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactive \`Array.some\`\r
 *\r
 * @param {Array} list - the array was called upon.\r
 * @param fn - a function to test each element.\r
 *\r
 * @returns {boolean} **true** if the \`fn\` function returns a **truthy** value for any element from the array. Otherwise, **false**.\r
 */\r
declare function useArraySome<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>, fn: (element: T, index: number, array: Array<MaybeAccessor<T>>) => unknown): Accessor<boolean>;

export { useArraySome };
`,k0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * reactive unique array\r
 */\r
declare function useArrayUnique<T>(list: MaybeAccessor<Array<MaybeAccessor<T>>>): Accessor<T[]>;

export { useArrayUnique };
`,L0e=`import { Accessor } from 'solid-js';

type UseAsyncQueueTask<T> = (...args: any[]) => T | Promise<T>;\r
interface UseAsyncQueueResult<T> {\r
    state: 'pending' | 'fulfilled' | 'rejected';\r
    data: T | null;\r
}\r
interface UseAsyncQueueReturn<T> {\r
    activeIndex: Accessor<number>;\r
    result: T;\r
}\r
interface UseAsyncQueueOptions {\r
    /**\r
     * Interrupt tasks when current task fails.\r
     *\r
     * @default true\r
     */\r
    interrupt?: boolean;\r
    /**\r
     * Trigger it when the tasks fails.\r
     *\r
     */\r
    onError?: () => void;\r
    /**\r
     * Trigger it when the tasks ends.\r
     *\r
     */\r
    onFinished?: () => void;\r
}\r
/**\r
 * Asynchronous queue task controller.\r
 */\r
declare function useAsyncQueue<T1>(tasks: [UseAsyncQueueTask<T1>], options?: UseAsyncQueueOptions): UseAsyncQueueReturn<[UseAsyncQueueResult<T1>]>;\r
declare function useAsyncQueue<T1, T2>(tasks: [UseAsyncQueueTask<T1>, UseAsyncQueueTask<T2>], options?: UseAsyncQueueOptions): UseAsyncQueueReturn<[UseAsyncQueueResult<T1>, UseAsyncQueueResult<T2>]>;\r
declare function useAsyncQueue<T1, T2, T3>(tasks: [UseAsyncQueueTask<T1>, UseAsyncQueueTask<T2>, UseAsyncQueueTask<T3>], options?: UseAsyncQueueOptions): UseAsyncQueueReturn<[UseAsyncQueueResult<T1>, UseAsyncQueueResult<T2>, UseAsyncQueueResult<T3>]>;\r
declare function useAsyncQueue<T1, T2, T3, T4>(tasks: [UseAsyncQueueTask<T1>, UseAsyncQueueTask<T2>, UseAsyncQueueTask<T3>, UseAsyncQueueTask<T4>], options?: UseAsyncQueueOptions): UseAsyncQueueReturn<[\r
    UseAsyncQueueResult<T1>,\r
    UseAsyncQueueResult<T2>,\r
    UseAsyncQueueResult<T3>,\r
    UseAsyncQueueResult<T4>\r
]>;\r
declare function useAsyncQueue<T1, T2, T3, T4, T5>(tasks: [\r
    UseAsyncQueueTask<T1>,\r
    UseAsyncQueueTask<T2>,\r
    UseAsyncQueueTask<T3>,\r
    UseAsyncQueueTask<T4>,\r
    UseAsyncQueueTask<T5>\r
], options?: UseAsyncQueueOptions): UseAsyncQueueReturn<[\r
    UseAsyncQueueResult<T1>,\r
    UseAsyncQueueResult<T2>,\r
    UseAsyncQueueResult<T3>,\r
    UseAsyncQueueResult<T4>,\r
    UseAsyncQueueResult<T5>\r
]>;\r
declare function useAsyncQueue<T>(tasks: Array<UseAsyncQueueTask<T>>, options?: UseAsyncQueueOptions): UseAsyncQueueReturn<Array<UseAsyncQueueResult<T>>>;

export { UseAsyncQueueOptions, UseAsyncQueueResult, UseAsyncQueueReturn, UseAsyncQueueTask, useAsyncQueue };
`,T0e=`import { Accessor } from 'solid-js';

interface UseCounterOptions {\r
    min?: number;\r
    max?: number;\r
}\r
interface UserCounterReturn {\r
    count: Accessor<number>;\r
    inc: (delta?: number) => number;\r
    dec: (delta?: number) => number;\r
    set: (val: number) => number;\r
    reset: (val?: number) => number;\r
}\r
/**\r
 * Basic counter with utility functions.\r
 */\r
declare function useCounter(initialValue?: number, options?: UseCounterOptions): UserCounterReturn;

export { UseCounterOptions, UserCounterReturn, useCounter };
`,D0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

type DateLike = Date | number | string | undefined;\r
interface UseDateFormatOptions {\r
    /**\r
     * The locale(s) to used for dd/ddd/dddd/MMM/MMMM format\r
     *\r
     * [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl#locales_argument).\r
     */\r
    locales?: Intl.LocalesArgument;\r
    /**\r
     * A custom function to re-modify the way to display meridiem\r
     *\r
     */\r
    customMeridiem?: (hours: number, minutes: number, isLowercase?: boolean, hasPeriod?: boolean) => string;\r
}\r
declare const formatDate: (date: Date, formatStr: string, options?: UseDateFormatOptions) => string;\r
declare const normalizeDate: (date: DateLike) => Date;\r
/**\r
 * Get the formatted date according to the string of tokens passed in.\r
 *\r
 * @param date - The date to format, can either be a \`Date\` object, a timestamp, or a string\r
 * @param formatStr - The combination of tokens to format the date\r
 * @param options - UseDateFormatOptions\r
 */\r
declare function useDateFormat(date: MaybeAccessor<DateLike>, formatStr?: MaybeAccessor<string>, options?: UseDateFormatOptions): Accessor<string>;\r
type UseDateFormatReturn = ReturnType<typeof useDateFormat>;

export { DateLike, UseDateFormatOptions, UseDateFormatReturn, formatDate, normalizeDate, useDateFormat };
`,E0e=`import { FunctionArgs, DebounceFilterOptions } from '../utils/filters.js';
import { MaybeAccessor, PromisifyFn } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Debounce execution of a function.\r
 *\r
 * @param  fn          A function to be executed after delay milliseconds debounced.\r
 * @param  ms          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\r
 * @param  opts        options\r
 *\r
 * @return A new, debounce, function.\r
 */\r
declare function useDebounceFn<T extends FunctionArgs>(fn: T, ms?: MaybeAccessor<number>, options?: DebounceFilterOptions): PromisifyFn<T>;

export { useDebounceFn };
`,A0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor, Pausable } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

interface UseIntervalOptions<Controls extends boolean> {\r
    /**\r
     * Expose more controls\r
     *\r
     * @default false\r
     */\r
    controls?: Controls;\r
    /**\r
     * Execute the update immediately on calling\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Callback on every interval\r
     */\r
    callback?: (count: number) => void;\r
}\r
/**\r
 * Reactive counter increases on every interval\r
 */\r
declare function useInterval(interval?: MaybeAccessor<number>, options?: UseIntervalOptions<false>): Accessor<number>;\r
declare function useInterval(interval: MaybeAccessor<number>, options: UseIntervalOptions<true>): {\r
    counter: Accessor<number>;\r
} & Pausable;

export { UseIntervalOptions, useInterval };
`,I0e=`import { Fn, MaybeAccessor, Pausable } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

interface UseIntervalFnOptions {\r
    /**\r
     * Start the timer immediately\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
    /**\r
     * Execute the callback immediate after calling this function\r
     *\r
     * @default false\r
     */\r
    immediateCallback?: boolean;\r
}\r
/**\r
 * Wrapper for \`setInterval\` with controls\r
 */\r
declare function useIntervalFn(cb: Fn, interval?: MaybeAccessor<number>, options?: UseIntervalFnOptions): Pausable;

export { UseIntervalFnOptions, useIntervalFn };
`,N0e=`import { OnOptions } from 'solid-js/types/reactive/signal';
import { EffectOnDeps } from '../utils/types.js';
import { Accessor } from 'solid-js';

interface UseLastChangedOptions<InitialValue extends number | null | undefined = undefined> extends OnOptions {\r
    initialValue?: InitialValue;\r
}\r
/**\r
 * Records the timestamp of the last change\r
 */\r
declare function useLastChanged<T>(deps: EffectOnDeps<T>, options?: UseLastChangedOptions): Accessor<number | null>;\r
declare function useLastChanged<T>(deps: EffectOnDeps<T>, options: UseLastChangedOptions): Accessor<number>;\r
declare function useLastChanged<T>(deps: EffectOnDeps<T>, options: UseLastChangedOptions<number>): Accessor<number>;

export { UseLastChangedOptions, useLastChanged };
`,M0e=`import { Accessor } from 'solid-js';
import { MaybeSignal } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

type UseSortedCompareFn<T = any> = (a: T, b: T) => number;\r
type UseSortedFn<T = any> = (arr: T[], compareFn: UseSortedCompareFn<T>) => T[];\r
interface UseSortedOptions<T = any> {\r
    /**\r
     * sort algorithm\r
     */\r
    sortFn?: UseSortedFn<T>;\r
    /**\r
     * compare function\r
     */\r
    compareFn?: UseSortedCompareFn<T>;\r
    /**\r
     * change the value of the source array\r
     * @default false\r
     */\r
    dirty?: boolean;\r
}\r
declare function useSorted<T = any>(source: MaybeSignal<T[]>, compareFn?: UseSortedCompareFn<T>): Accessor<T[]>;\r
declare function useSorted<T = any>(source: MaybeSignal<T[]>, options?: UseSortedOptions<T>): Accessor<T[]>;\r
declare function useSorted<T = any>(source: MaybeSignal<T[]>, compareFn?: UseSortedCompareFn<T>, options?: Omit<UseSortedOptions<T>, 'compareFn'>): Accessor<T[]>;

export { UseSortedCompareFn, UseSortedFn, UseSortedOptions, useSorted };
`,R0e=`import { FunctionArgs } from '../utils/filters.js';
import { MaybeAccessor, PromisifyFn } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

/**\r
 * Throttle execution of a function. Especially useful for rate limiting\r
 * execution of handlers on events like resize and scroll.\r
 *\r
 * @param   fn             A function to be executed after delay milliseconds. The \`this\` context and all arguments are passed through, as-is,\r
 *                                    to \`callback\` when the throttled-function is executed.\r
 * @param   ms             A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\r
 *\r
 * @param [trailing=false] if true, call fn again after the time is up\r
 *\r
 * @param [leading=true] if true, call fn on the leading edge of the ms timeout\r
 *\r
 * @param [rejectOnCancel=false] if true, reject the last call if it's been cancel\r
 *\r
 * @return  A new, throttled, function.\r
 */\r
declare function useThrottleFn<T extends FunctionArgs>(fn: T, ms?: MaybeAccessor<number>, trailing?: boolean, leading?: boolean, rejectOnCancel?: boolean): PromisifyFn<T>;

export { useThrottleFn };
`,O0e=`import { Accessor } from 'solid-js';
import { UseTimeoutFnOptions } from '../useTimeoutFn/index.js';
import { Fn, Stoppable } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

interface UseTimeoutOptions<Controls extends boolean> extends UseTimeoutFnOptions {\r
    /**\r
     * Expose more controls\r
     *\r
     * @default false\r
     */\r
    controls?: Controls;\r
    /**\r
     * Callback on timeout\r
     */\r
    callback?: Fn;\r
}\r
/**\r
 * Update value after a given time with controls.\r
 */\r
declare function useTimeout(interval?: number, options?: UseTimeoutOptions<false>): Accessor<boolean>;\r
declare function useTimeout(interval: number, options: UseTimeoutOptions<true>): {\r
    ready: Accessor<boolean>;\r
} & Stoppable;

export { UseTimeoutOptions, useTimeout };
`,P0e=`import { MaybeAccessor, Stoppable } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

interface UseTimeoutFnOptions {\r
    /**\r
     * Start the timer immediate after calling this function\r
     *\r
     * @default true\r
     */\r
    immediate?: boolean;\r
}\r
/**\r
 * Wrapper for \`setTimeout\` with controls.\r
 */\r
declare function useTimeoutFn(cb: (...args: unknown[]) => any, interval: MaybeAccessor<number>, options?: UseTimeoutFnOptions): Stoppable;

export { UseTimeoutFnOptions, useTimeoutFn };
`,F0e=`import { UseTimeoutFnOptions } from '../useTimeoutFn/index.js';
import { Awaitable, MaybeAccessor, Pausable } from '../utils/types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

declare function useTimeoutPoll(fn: () => Awaitable<void>, interval: MaybeAccessor<number>, timeoutPollOptions?: UseTimeoutFnOptions): Pausable;

export { useTimeoutPoll };
`,B0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

interface UseToNumberOptions {\r
    /**\r
     * Method to use to convert the value to a number.\r
     *\r
     * @default 'parseFloat'\r
     */\r
    method?: 'parseFloat' | 'parseInt';\r
    /**\r
     * The base in mathematical numeral systems passed to \`parseInt\`.\r
     * Only works with \`method: 'parseInt'\`\r
     */\r
    radix?: number;\r
    /**\r
     * Replace NaN with zero\r
     *\r
     * @default false\r
     */\r
    nanToZero?: boolean;\r
}\r
/**\r
 * Computed reactive object.\r
 */\r
declare function useToNumber(value: MaybeAccessor<number | string>, options?: UseToNumberOptions): Accessor<number>;

export { UseToNumberOptions, useToNumber };
`,W0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

/**\r
 * Reactively convert a Accessor to string.\r
 */\r
declare function useToString(value: MaybeAccessor<unknown>): Accessor<string>;

export { useToString };
`,V0e=`import { Signal, Accessor } from 'solid-js';
import { MaybeAccessor } from '../utils/types.js';
import 'solid-js/types/reactive/signal';

interface UseToggleOptions<Truthy, Falsy> {\r
    truthyValue?: MaybeAccessor<Truthy>;\r
    falsyValue?: MaybeAccessor<Falsy>;\r
}\r
declare function useToggle<Truthy, Falsy, T = Truthy | Falsy>(initialValue: Signal<T>, options?: UseToggleOptions<Truthy, Falsy>): [Accessor<T>, (value?: T) => T];\r
declare function useToggle<Truthy = true, Falsy = false, T = Truthy | Falsy>(initialValue?: T, options?: UseToggleOptions<Truthy, Falsy>): [Accessor<T>, (value?: T) => T];

export { UseToggleOptions, useToggle };
`,H0e=`import { AnyFn, MaybeAccessor, ArgumentsType, Pausable } from './types.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

type FunctionArgs<Args extends any[] = any[], Return = void> = (...args: Args) => Return;\r
interface FunctionWrapperOptions<Args extends any[] = any[], This = any> {\r
    fn: FunctionArgs<Args, This>;\r
    args: Args;\r
    thisArg: This;\r
}\r
type EventFilter<Args extends any[] = any[], This = any, Invoke extends AnyFn = AnyFn> = (invoke: Invoke, options: FunctionWrapperOptions<Args, This>) => ReturnType<Invoke> | Promise<ReturnType<Invoke>>;\r
interface ConfigurableEventFilter {\r
    /**\r
     * Filter for if events should to be received.\r
     *\r
     *\r
     */\r
    eventFilter?: EventFilter;\r
}\r
interface DebounceFilterOptions {\r
    /**\r
     * The maximum time allowed to be delayed before it's invoked.\r
     * In milliseconds.\r
     */\r
    maxWait?: MaybeAccessor<number>;\r
    /**\r
     * Whether to reject the last call if it's been cancel.\r
     *\r
     * @default false\r
     */\r
    rejectOnCancel?: boolean;\r
}\r
/**\r
 * @internal\r
 */\r
declare function createFilterWrapper<T extends AnyFn>(filter: EventFilter, fn: T): (this: any, ...args: ArgumentsType<T>) => Promise<ReturnType<T>>;\r
declare const bypassFilter: EventFilter;\r
/**\r
 * Create an EventFilter that debounce the events\r
 */\r
declare function debounceFilter(ms: MaybeAccessor<number>, options?: DebounceFilterOptions): EventFilter<any[], any, AnyFn>;\r
/**\r
 * Create an EventFilter that throttle the events\r
 *\r
 * @param ms\r
 * @param [trailing=true]\r
 * @param [leading=true]\r
 * @param [rejectOnCancel=false]\r
 */\r
declare function throttleFilter(ms: MaybeAccessor<number>, trailing?: boolean, leading?: boolean, rejectOnCancel?: boolean): EventFilter<any[], any, AnyFn>;\r
/**\r
 * EventFilter that gives extra controls to pause and resume the filter\r
 *\r
 * @param extendFilter  Extra filter to apply when the PausableFilter is active, default to none\r
 *\r
 */\r
declare function pausableFilter(extendFilter?: EventFilter): Pausable & {\r
    eventFilter: EventFilter;\r
};

export { ConfigurableEventFilter, DebounceFilterOptions, EventFilter, FunctionArgs, FunctionWrapperOptions, bypassFilter, createFilterWrapper, debounceFilter, pausableFilter, throttleFilter };
`,U0e=`export { ConfigurableEventFilter, DebounceFilterOptions, EventFilter, FunctionArgs, FunctionWrapperOptions, bypassFilter, createFilterWrapper, debounceFilter, pausableFilter, throttleFilter } from './filters.js';
export { assert, clamp, hasOwn, isBoolean, isClient, isDef, isFunction, isIOS, isNumber, isObject, isString, isWindow, noop, now, rand, timestamp } from './is.js';
export { AnyFn, ArgumentsType, Arrayable, Awaitable, EffectOnDeps, ElementOf, Fn, MapOldSources, MapSources, MaybeAccessor, MaybeElement, MaybeElementAccessor, MaybeSignal, Pausable, PromisifyFn, RemovableSignal, Stoppable } from './types.js';
export { nextTick } from '@solidjs-use/solid-to-vue';
import 'solid-js';
import 'solid-js/types/reactive/signal';

declare function promiseTimeout(ms: number, throwOnTimeout?: boolean, reason?: string): Promise<void>;\r
declare function identity<T>(arg: T): T;\r
interface SingletonPromiseReturn<T> {\r
    (): Promise<T>;\r
    /**\r
     * Reset current staled promise.\r
     * await it to have proper shutdown.\r
     */\r
    reset: () => Promise<void>;\r
}\r
/**\r
 * Create singleton promise function\r
 *\r
 * @example\r
 * \`\`\`\r
 * const promise = createSingletonPromise(async () => { ... })\r
 *\r
 * await promise()\r
 * await promise() // all of them will be bind to a single promise instance\r
 * await promise() // and be resolved together\r
 * \`\`\`\r
 */\r
declare function createSingletonPromise<T>(fn: () => Promise<T>): SingletonPromiseReturn<T>;\r
declare function invoke<T>(fn: () => T): T;\r
declare function containsProp(obj: object, ...props: string[]): boolean;\r
/**\r
 * Increase string a value with unit\r
 *\r
 * @example '2px' + 1 = '3px'\r
 * @example '15em' + (-2) = '13em'\r
 */\r
declare function increaseWithUnit(target: number, delta: number): number;\r
declare function increaseWithUnit(target: string, delta: number): string;\r
declare function increaseWithUnit(target: string | number, delta: number): string | number;\r
/**\r
 * Create a new subset object by giving keys\r
 *\r
 * @category Object\r
 */\r
declare function objectPick<O extends object, T extends keyof O>(obj: O, keys: T[], omitUndefined?: boolean): Pick<O, T>;

export { SingletonPromiseReturn, containsProp, createSingletonPromise, identity, increaseWithUnit, invoke, objectPick, promiseTimeout };
`,j0e=`declare const isClient: boolean;\r
declare const isDef: <T = any>(val?: T | undefined) => val is T;\r
declare const assert: (condition: boolean, ...infos: any[]) => void;\r
declare const isBoolean: (val: any) => val is boolean;\r
declare const isFunction: <T extends Function>(val: any) => val is T;\r
declare const isNumber: (val: any) => val is number;\r
declare const isString: (val: unknown) => val is string;\r
declare const isObject: (val: any) => val is object;\r
declare const isWindow: (val: any) => val is Window;\r
declare const now: () => number;\r
declare const timestamp: () => number;\r
declare const clamp: (n: number, min: number, max: number) => number;\r
declare const noop: () => void;\r
declare const rand: (min: number, max: number) => number;\r
declare const isIOS: boolean | "";\r
declare const hasOwn: <T extends object, K extends keyof T>(val: T, key: K) => key is K;

export { assert, clamp, hasOwn, isBoolean, isClient, isDef, isFunction, isIOS, isNumber, isObject, isString, isWindow, noop, now, rand, timestamp };
`,$0e=`import { Accessor } from 'solid-js';
import { Signal, Setter, AccessorArray } from 'solid-js/types/reactive/signal';

/**\r
 * Any function\r
 */\r
type Fn = () => void;\r
/**\r
 * Any function\r
 */\r
type AnyFn = (...args: any[]) => any;\r
/**\r
 * Maybe it's a signal, or a plain value\r
 *\r
 * \`\`\`ts\r
 * type MaybeSignal<T> = T | Signal<T>\r
 * \`\`\`\r
 */\r
type MaybeSignal<T> = MaybeAccessor<T> | Signal<T>;\r
/**\r
 * Maybe it's a accessor, or a plain value\r
 */\r
type MaybeAccessor<T> = T | Accessor<T>;\r
type MaybeElement = HTMLElement | SVGElement | undefined | null;\r
type MaybeElementAccessor<T extends MaybeElement = MaybeElement> = MaybeAccessor<T>;\r
type Arrayable<T> = T[] | T;\r
/**\r
 * Infers the element type of an array\r
 */\r
type ElementOf<T> = T extends Array<infer E> ? E : never;\r
type Awaitable<T> = Promise<T> | T;\r
type ArgumentsType<T> = T extends (...args: infer U) => any ? U : never;\r
type PromisifyFn<T extends AnyFn> = (...args: ArgumentsType<T>) => Promise<ReturnType<T>>;\r
interface Pausable {\r
    /**\r
     * A Accessor indicate whether a pausable instance is active\r
     */\r
    isActive: Accessor<boolean>;\r
    /**\r
     * Temporary pause the effect from executing\r
     */\r
    pause: Fn;\r
    /**\r
     * Resume the effects\r
     */\r
    resume: Fn;\r
}\r
interface Stoppable {\r
    /**\r
     * A Accessor indicate whether a stoppable instance is executing\r
     */\r
    isPending: Accessor<boolean>;\r
    /**\r
     * Stop the effect from executing\r
     */\r
    stop: Fn;\r
    /**\r
     * Start the effects\r
     */\r
    start: Fn;\r
}\r
/**\r
 * A Signal that allow to set null or undefined\r
 */\r
type RemovableSignal<T> = [Accessor<T>, Setter<T | undefined | null>];\r
type EffectOnDeps<S = any> = AccessorArray<S> | Accessor<S>;\r
type MapSources<T> = {\r
    [K in keyof T]: T[K] extends EffectOnDeps<infer V> ? V : never;\r
};\r
type MapOldSources<T> = {\r
    [K in keyof T]: T[K] extends EffectOnDeps<infer V> ? V | undefined : never;\r
};

export { AnyFn, ArgumentsType, Arrayable, Awaitable, EffectOnDeps, ElementOf, Fn, MapOldSources, MapSources, MaybeAccessor, MaybeElement, MaybeElementAccessor, MaybeSignal, Pausable, PromisifyFn, RemovableSignal, Stoppable };
`,z0e=`import { OnOptions, AccessorArray, Accessor } from 'solid-js/types/reactive/signal';

type WatchOptions = OnOptions;\r
type WatchStopHandle = () => void;\r
type WatchDeps<S> = AccessorArray<S> | Accessor<S> | S;\r
type WatchSource<S> = WatchDeps<S>;\r
type WatchCallback<S, Next extends Prev = any, Prev = Next> = (input: S, prevInput: S | undefined, prev: Prev) => void | Next | Promise<void | Next>;\r
/**\r
 * Shorthand for \`createEffect(on()))\` and return stop handler\r
 */\r
declare function watch<S, Next extends Prev, Prev = Next>(deps: WatchDeps<S>, fn: WatchCallback<S, Next, Prev>, options?: OnOptions): () => void;

export { WatchCallback, WatchDeps, WatchOptions, WatchSource, WatchStopHandle, watch };
`,K0e=`import { Accessor, OnOptions } from 'solid-js/types/reactive/signal';

declare type WatchArrayCallback<V = any, OV = any> = (value: V, oldValue: OV, added: V, removed: OV) => any;\r
/**\r
 * Watch for an array with additions and removals.\r
 */\r
declare function watchArray<T, Defer extends Readonly<boolean> = false>(source: Accessor<T[]>, cb: WatchArrayCallback<T[], Defer extends false ? T[] | undefined : T[]>, options?: OnOptions): () => void;

export { WatchArrayCallback, watchArray };
`,G0e=`import { Accessor } from 'solid-js';
import { MaybeAccessor, MapSources, MapOldSources } from '../utils/types.js';
import { WatchStopHandle, WatchSource, WatchCallback } from '../watch/index.js';
import { WatchWithFilterOptions } from '../watchWithFilter/index.js';
import 'solid-js/types/reactive/signal';
import '../utils/filters.js';

interface WatchAtMostOptions extends WatchWithFilterOptions {\r
    count: MaybeAccessor<number>;\r
}\r
interface WatchAtMostReturn {\r
    stop: WatchStopHandle;\r
    count: Accessor<number>;\r
}\r
declare function watchAtMost<T extends Readonly<Array<WatchSource<unknown>>>>(sources: [...T], cb: WatchCallback<MapSources<T>, MapOldSources<T>>, options: WatchAtMostOptions): WatchAtMostReturn;\r
declare function watchAtMost<T>(sources: WatchSource<T>, cb: WatchCallback<T>, options: WatchAtMostOptions): WatchAtMostReturn;

export { WatchAtMostOptions, WatchAtMostReturn, watchAtMost };
`,q0e=`import { DebounceFilterOptions } from '../utils/filters.js';
import { MaybeAccessor, MapSources, MapOldSources } from '../utils/types.js';
import { WatchOptions, WatchSource, WatchCallback, WatchStopHandle } from '../watch/index.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

interface WatchDebouncedOptions extends WatchOptions, DebounceFilterOptions {\r
    debounce?: MaybeAccessor<number>;\r
}\r
declare function watchDebounced<T extends Readonly<Array<WatchSource<unknown>>>>(sources: [...T], cb: WatchCallback<MapSources<T>, MapOldSources<T>>, options?: WatchDebouncedOptions): WatchStopHandle;\r
declare function watchDebounced<T>(source: WatchSource<T>, cb: WatchCallback<T>, options?: WatchDebouncedOptions): WatchStopHandle;\r
declare function watchDebounced<T extends object>(source: T, cb: WatchCallback<T>, options?: WatchDebouncedOptions): WatchStopHandle;

export { WatchDebouncedOptions, watchDebounced as debouncedWatch, watchDebounced };
`,Z0e=`import { OnOptions } from 'solid-js/types/reactive/signal';
import { ConfigurableEventFilter } from '../utils/filters.js';
import { WatchStopHandle, WatchDeps, WatchCallback } from '../watch/index.js';
import '../utils/types.js';
import 'solid-js';

interface EffectWithFilterOptions extends OnOptions, ConfigurableEventFilter {\r
}\r
type IgnoredUpdater = (updater: () => void) => void;\r
interface WatchIgnorableReturn {\r
    ignoreUpdates: IgnoredUpdater;\r
    stop: WatchStopHandle;\r
}\r
declare function watchIgnorable<S, Next extends Prev, Prev = Next>(source: WatchDeps<S>, cb: WatchCallback<S, Next, Prev>, options?: EffectWithFilterOptions): WatchIgnorableReturn;

export { EffectWithFilterOptions, IgnoredUpdater, WatchIgnorableReturn, watchIgnorable as ignorableEffect, watchIgnorable };
`,Y0e=`import { WatchSource, WatchCallback, WatchOptions } from '../watch/index.js';
import { MapSources, MapOldSources } from '../utils/types.js';
import 'solid-js/types/reactive/signal';
import 'solid-js';

declare function watchOnce<T extends Readonly<Array<WatchSource<unknown>>>>(source: [...T], cb: WatchCallback<MapSources<T>, MapOldSources<T>>, options?: WatchOptions): void;\r
declare function watchOnce<T>(sources: WatchSource<T>, cb: WatchCallback<T>, options?: WatchOptions): void;

export { watchOnce };
`,X0e=`import { Pausable, MapSources, MapOldSources } from '../utils/types.js';
import { WatchStopHandle, WatchSource, WatchCallback } from '../watch/index.js';
import { WatchWithFilterOptions } from '../watchWithFilter/index.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';
import '../utils/filters.js';

interface WatchPausableReturn extends Pausable {\r
    stop: WatchStopHandle;\r
}\r
declare function watchPausable<T extends Readonly<Array<WatchSource<unknown>>>>(sources: [...T], cb: WatchCallback<MapSources<T>, MapOldSources<T>>, options?: WatchWithFilterOptions): WatchPausableReturn;\r
declare function watchPausable<T>(source: WatchSource<T>, cb: WatchCallback<T>, options?: WatchWithFilterOptions): WatchPausableReturn;\r
declare function watchPausable<T extends object>(source: T, cb: WatchCallback<T>, options?: WatchWithFilterOptions): WatchPausableReturn;

export { WatchPausableReturn, watchPausable as pausableWatch, watchPausable };
`,Q0e=`import { MaybeAccessor, MapSources, MapOldSources } from '../utils/types.js';
import { WatchOptions, WatchSource, WatchCallback, WatchStopHandle } from '../watch/index.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';

interface WatchThrottledOptions extends WatchOptions {\r
    throttle?: MaybeAccessor<number>;\r
    trailing?: boolean;\r
    leading?: boolean;\r
}\r
declare function watchThrottled<T extends Readonly<Array<WatchSource<unknown>>>>(sources: [...T], cb: WatchCallback<MapSources<T>, MapOldSources<T>>, options?: WatchThrottledOptions): WatchStopHandle;\r
declare function watchThrottled<T>(source: WatchSource<T>, cb: WatchCallback<T>, options?: WatchThrottledOptions): WatchStopHandle;\r
declare function watchThrottled<T extends object>(source: T, cb: WatchCallback<T>, options?: WatchThrottledOptions): WatchStopHandle;

export { WatchThrottledOptions, watchThrottled as throttledWatch, watchThrottled };
`,J0e=`import { MapSources, MapOldSources } from '../utils/types.js';
import { WatchDeps } from '../watch/index.js';
import { WatchIgnorableReturn } from '../watchIgnorable/index.js';
import { WatchWithFilterOptions } from '../watchWithFilter/index.js';
import 'solid-js';
import 'solid-js/types/reactive/signal';
import '../utils/filters.js';

interface WatchTriggerableReturn<FnReturnT = void> extends WatchIgnorableReturn {\r
    /** Execute \`WatchCallback\` immediately */\r
    trigger: () => FnReturnT;\r
}\r
type WatchTriggerableCallback<V = any, OV = any, R = void> = (value: V, oldValue: OV) => R;\r
declare function watchTriggerable<T extends Readonly<Array<WatchDeps<unknown>>>, FnReturnT>(sources: [...T], cb: WatchTriggerableCallback<MapSources<T>, MapOldSources<T>, FnReturnT>, options?: WatchWithFilterOptions): WatchTriggerableReturn<FnReturnT>;\r
declare function watchTriggerable<T, FnReturnT>(source: WatchDeps<T>, cb: WatchTriggerableCallback<T, T | undefined, FnReturnT>, options?: WatchWithFilterOptions): WatchTriggerableReturn<FnReturnT>;\r
declare function watchTriggerable<T extends object, FnReturnT>(source: T, cb: WatchTriggerableCallback<T, T | undefined, FnReturnT>, options?: WatchWithFilterOptions): WatchTriggerableReturn<FnReturnT>;

export { WatchTriggerableCallback, WatchTriggerableReturn, watchTriggerable };
`,eCe=`import { WatchDeps, WatchCallback, WatchStopHandle } from '../watch/index.js';
import { OnOptions } from 'solid-js/types/reactive/signal';
import { ConfigurableEventFilter } from '../utils/filters.js';
import { MapSources, MapOldSources } from '../utils/types.js';
import 'solid-js';

interface WatchWithFilterOptions extends OnOptions, ConfigurableEventFilter {\r
}\r
declare function watchWithFilter<T extends Readonly<Array<WatchDeps<unknown>>>>(sources: [...T], cb: WatchCallback<MapSources<T>, MapOldSources<T>>, options?: WatchWithFilterOptions): WatchStopHandle;\r
declare function watchWithFilter<T>(source: WatchDeps<T>, cb: WatchCallback<T, T>, options?: WatchWithFilterOptions): WatchStopHandle;\r
declare function watchWithFilter<T extends object>(source: T, cb: WatchCallback<T, T>, options?: WatchWithFilterOptions): WatchStopHandle;

export { WatchWithFilterOptions, watchWithFilter };
`,tCe=`import { WatchCallback } from '../watch/index.js';
import { Accessor, OnOptions } from 'solid-js/types/reactive/signal';

/**\r
 * Shorthand for watching value to be truthy\r
 */\r
declare function whenever<T>(source: Accessor<T | false | null | undefined>, cb: WatchCallback<T, T | false | null | undefined, T | false | null | undefined>, onOptions?: OnOptions): () => void;

export { whenever };
`,nCe=`import { Accessor, JSX, Signal } from 'solid-js';
import { createMutable } from 'solid-js/store';

declare type ComputedSetter<T> = (v: T) => void;\r
type ComputedGetter<T> = (...args: any[]) => T;\r
interface WritableComputedOptions<T> {\r
    get: ComputedGetter<T>;\r
    set: ComputedSetter<T>;\r
}\r
type WritableComputedReturn<T> = [Accessor<T>, ComputedSetter<T>];\r
declare function writableComputed<T>(options: WritableComputedOptions<T>): WritableComputedReturn<T>;

declare const reactive: typeof createMutable;

declare function nextTick<T = void>(this: T, fn?: (this: T) => void): Promise<void>;

type StyleValue = JSX.HTMLAttributes<HTMLDivElement>['style'];

declare function isAccessor<T>(val?: unknown): val is Accessor<T>;\r
declare function isSignal<T>(val?: unknown): val is Signal<T>;\r
type SimpleSetter<T> = (v?: T | ((val: T | undefined) => T)) => void;\r
declare function toSignal<T>(v: T | Accessor<T> | Signal<T>): Signal<T>;\r
declare function toAccessor<T>(v: T | undefined | null | Accessor<T | null | undefined>): Accessor<T | null | undefined>;\r
declare function getSetterValue<T>(v: any, pre: T): T;\r
declare function set<T>(target: any, key: any, val: T): T;\r
declare function del(target: any, key: any): void;\r
declare const isFunction: <T extends Function>(val: any) => val is T;

export { ComputedGetter, ComputedSetter, SimpleSetter, StyleValue, WritableComputedOptions, WritableComputedReturn, del, getSetterValue, isAccessor, isFunction, isSignal, nextTick, reactive, set, toAccessor, toSignal, writableComputed };
`;function H(r,e){us.typescript.typescriptDefaults.addExtraLib(r,`file:///node_modules/solidjs-use/${e}`),us.typescript.javascriptDefaults.addExtraLib(r,`file:///node_modules/solidjs-use/${e}`)}H(g_e,"package.json");H(p_e,"dist/_configurable.d.ts");H(m_e,"dist/index.d.ts");H(__e,"dist/solid-to-vue.d.ts");H(b_e,"dist/ssr-handlers.d.ts");H(v_e,"dist/types.d.ts");H(C_e,"dist/createAsyncMemo/index.d.ts");H(y_e,"dist/createUnAccessorFn/index.d.ts");H(w_e,"dist/onClickOutside/index.d.ts");H(S_e,"dist/onKeyStroke/index.d.ts");H(x_e,"dist/onLongPress/index.d.ts");H(k_e,"dist/onStartTyping/index.d.ts");H(L_e,"dist/useActiveElement/index.d.ts");H(T_e,"dist/useAsyncState/index.d.ts");H(D_e,"dist/useBase64/index.d.ts");H(E_e,"dist/useBase64/serialization.d.ts");H(A_e,"dist/useBattery/index.d.ts");H(I_e,"dist/useBluetooth/index.d.ts");H(N_e,"dist/useBreakpoints/breakpoints.d.ts");H(M_e,"dist/useBreakpoints/index.d.ts");H(R_e,"dist/useBroadcastChannel/index.d.ts");H(O_e,"dist/useBrowserLocation/component.d.ts");H(P_e,"dist/useBrowserLocation/index.d.ts");H(F_e,"dist/useClipboard/index.d.ts");H(B_e,"dist/useCloned/index.d.ts");H(W_e,"dist/useColorMode/index.d.ts");H(V_e,"dist/useConfirmDialog/index.d.ts");H(H_e,"dist/useCssTransition/index.d.ts");H(U_e,"dist/useCssVar/index.d.ts");H(j_e,"dist/useCycleList/index.d.ts");H($_e,"dist/useDark/index.d.ts");H(z_e,"dist/useDebouncedHistoryTravel/index.d.ts");H(K_e,"dist/useDeviceMotion/index.d.ts");H(G_e,"dist/useDeviceOrientation/index.d.ts");H(q_e,"dist/useDevicePixelRatio/index.d.ts");H(Z_e,"dist/useDevicesList/index.d.ts");H(Y_e,"dist/useDisplayMedia/index.d.ts");H(X_e,"dist/useDocumentVisibility/index.d.ts");H(Q_e,"dist/useDraggable/index.d.ts");H(J_e,"dist/useDropZone/index.d.ts");H(ebe,"dist/useElementBounding/index.d.ts");H(tbe,"dist/useElementByPoint/index.d.ts");H(nbe,"dist/useElementHover/index.d.ts");H(ibe,"dist/useElementSize/index.d.ts");H(sbe,"dist/useElementVisibility/index.d.ts");H(rbe,"dist/useEventBus/index.d.ts");H(obe,"dist/useEventBus/internal.d.ts");H(abe,"dist/useEventListener/index.d.ts");H(lbe,"dist/useEventSource/index.d.ts");H(cbe,"dist/useEyeDropper/index.d.ts");H(dbe,"dist/useFavicon/index.d.ts");H(ube,"dist/useFetch/index.d.ts");H(hbe,"dist/useFileDialog/index.d.ts");H(fbe,"dist/useFileSystemAccess/index.d.ts");H(gbe,"dist/useFocus/index.d.ts");H(pbe,"dist/useFocusWithin/index.d.ts");H(mbe,"dist/useFps/index.d.ts");H(_be,"dist/useFullscreen/index.d.ts");H(bbe,"dist/useGamepad/index.d.ts");H(vbe,"dist/useGeolocation/index.d.ts");H(Cbe,"dist/useHistoryTravel/index.d.ts");H(ybe,"dist/useIdle/index.d.ts");H(wbe,"dist/useImage/index.d.ts");H(Sbe,"dist/useInfiniteScroll/index.d.ts");H(xbe,"dist/useIntersectionObserver/index.d.ts");H(kbe,"dist/useKeyModifier/index.d.ts");H(Lbe,"dist/useLocalStorage/index.d.ts");H(Tbe,"dist/useMagicKeys/aliasMap.d.ts");H(Dbe,"dist/useMagicKeys/index.d.ts");H(Ebe,"dist/useManualHistoryTravel/index.d.ts");H(Abe,"dist/useMediaControls/index.d.ts");H(Ibe,"dist/useMediaQuery/index.d.ts");H(Nbe,"dist/useMemoize/index.d.ts");H(Mbe,"dist/useMemory/index.d.ts");H(Rbe,"dist/useMounted/index.d.ts");H(Obe,"dist/useMouse/index.d.ts");H(Pbe,"dist/useMouseInElement/index.d.ts");H(Fbe,"dist/useMousePressed/index.d.ts");H(Bbe,"dist/useMutationObserver/index.d.ts");H(Wbe,"dist/useNavigatorLanguage/index.d.ts");H(Vbe,"dist/useNetwork/index.d.ts");H(Hbe,"dist/useNow/component.d.ts");H(Ube,"dist/useNow/index.d.ts");H(jbe,"dist/useObjectUrl/component.d.ts");H($be,"dist/useObjectUrl/index.d.ts");H(zbe,"dist/useOffsetPagination/index.d.ts");H(Kbe,"dist/useOnline/index.d.ts");H(Gbe,"dist/usePageLeave/index.d.ts");H(qbe,"dist/useParallax/index.d.ts");H(Zbe,"dist/usePermission/index.d.ts");H(Ybe,"dist/usePointer/index.d.ts");H(Xbe,"dist/usePointerSwipe/index.d.ts");H(Qbe,"dist/usePreferredColorScheme/index.d.ts");H(Jbe,"dist/usePreferredContrast/index.d.ts");H(eve,"dist/usePreferredDark/component.d.ts");H(tve,"dist/usePreferredDark/index.d.ts");H(nve,"dist/usePreferredLanguages/index.d.ts");H(ive,"dist/usePreferredReducedMotion/index.d.ts");H(sve,"dist/useRafFn/index.d.ts");H(rve,"dist/useResizeObserver/index.d.ts");H(ove,"dist/useScreenOrientation/index.d.ts");H(ave,"dist/useScreenSafeArea/index.d.ts");H(lve,"dist/useScriptTag/index.d.ts");H(cve,"dist/useScroll/index.d.ts");H(dve,"dist/useScrollLock/index.d.ts");H(uve,"dist/useSessionStorage/index.d.ts");H(hve,"dist/useShare/index.d.ts");H(fve,"dist/useSpeechRecognition/index.d.ts");H(gve,"dist/useSpeechRecognition/types.d.ts");H(pve,"dist/useSpeechSynthesis/index.d.ts");H(mve,"dist/useStepper/index.d.ts");H(_ve,"dist/useStorage/guess.d.ts");H(bve,"dist/useStorage/index.d.ts");H(vve,"dist/useStorageAsync/index.d.ts");H(Cve,"dist/useStyleTag/index.d.ts");H(yve,"dist/useSupported/index.d.ts");H(wve,"dist/useSwipe/index.d.ts");H(Sve,"dist/useTextDirection/index.d.ts");H(xve,"dist/useTextSelection/index.d.ts");H(kve,"dist/useTextareaAutoSize/index.d.ts");H(Lve,"dist/useThrottledHistoryTravel/index.d.ts");H(Tve,"dist/useTimeAgo/component.d.ts");H(Dve,"dist/useTimeAgo/index.d.ts");H(Eve,"dist/useTimestamp/index.d.ts");H(Ave,"dist/useTitle/index.d.ts");H(Ive,"dist/useUrlSearchParams/index.d.ts");H(Nve,"dist/useUserMedia/index.d.ts");H(Mve,"dist/useVibrate/index.d.ts");H(Rve,"dist/useVirtualList/index.d.ts");H(Ove,"dist/useWakeLock/index.d.ts");H(Pve,"dist/useWebNotification/index.d.ts");H(Fve,"dist/useWebSocket/index.d.ts");H(Bve,"dist/useWebWorker/index.d.ts");H(Wve,"dist/useWebWorkerFn/index.d.ts");H(Vve,"dist/useWindowFocus/index.d.ts");H(Hve,"dist/useWindowScroll/index.d.ts");H(Uve,"dist/useWindowSize/index.d.ts");H(jve,"dist/useWebWorkerFn/lib/createWorkerBlobUrl.d.ts");H($ve,"dist/useWebWorkerFn/lib/depsParser.d.ts");H(zve,"dist/useWebWorkerFn/lib/jobRunner.d.ts");H(Kve,"dist/node_modules/@solidjs-use/shared/index.d.ts");H(Gve,"dist/node_modules/@solidjs-use/shared/solid-to-vue.d.ts");H(qve,"dist/node_modules/@solidjs-use/shared/accessorDebounced/index.d.ts");H(Zve,"dist/node_modules/@solidjs-use/shared/accessorDefault/index.d.ts");H(Yve,"dist/node_modules/@solidjs-use/shared/accessorThrottled/index.d.ts");H(Xve,"dist/node_modules/@solidjs-use/shared/createEventHook/index.d.ts");H(Qve,"dist/node_modules/@solidjs-use/shared/createSharedComposable/index.d.ts");H(Jve,"dist/node_modules/@solidjs-use/shared/get/index.d.ts");H(e0e,"dist/node_modules/@solidjs-use/shared/isDefined/index.d.ts");H(t0e,"dist/node_modules/@solidjs-use/shared/makeDestructurable/index.d.ts");H(n0e,"dist/node_modules/@solidjs-use/shared/mutableMemo/index.d.ts");H(i0e,"dist/node_modules/@solidjs-use/shared/omitMutable/index.d.ts");H(s0e,"dist/node_modules/@solidjs-use/shared/pickMutable/index.d.ts");H(r0e,"dist/node_modules/@solidjs-use/shared/reactify/index.d.ts");H(o0e,"dist/node_modules/@solidjs-use/shared/reactifyObject/index.d.ts");H(a0e,"dist/node_modules/@solidjs-use/shared/resolveAccessor/index.d.ts");H(l0e,"dist/node_modules/@solidjs-use/shared/signalAutoReset/index.d.ts");H(c0e,"dist/node_modules/@solidjs-use/shared/syncSignal/index.d.ts");H(d0e,"dist/node_modules/@solidjs-use/shared/syncSignals/index.d.ts");H(u0e,"dist/node_modules/@solidjs-use/shared/toAccessors/index.d.ts");H(h0e,"dist/node_modules/@solidjs-use/shared/toReactive/index.d.ts");H(f0e,"dist/node_modules/@solidjs-use/shared/tryOnCleanup/index.d.ts");H(g0e,"dist/node_modules/@solidjs-use/shared/tryOnMount/index.d.ts");H(p0e,"dist/node_modules/@solidjs-use/shared/unAccessor/index.d.ts");H(m0e,"dist/node_modules/@solidjs-use/shared/until/index.d.ts");H(_0e,"dist/node_modules/@solidjs-use/shared/useArrayEvery/index.d.ts");H(b0e,"dist/node_modules/@solidjs-use/shared/useArrayFilter/index.d.ts");H(v0e,"dist/node_modules/@solidjs-use/shared/useArrayFind/index.d.ts");H(C0e,"dist/node_modules/@solidjs-use/shared/useArrayFindIndex/index.d.ts");H(y0e,"dist/node_modules/@solidjs-use/shared/useArrayJoin/index.d.ts");H(w0e,"dist/node_modules/@solidjs-use/shared/useArrayMap/index.d.ts");H(S0e,"dist/node_modules/@solidjs-use/shared/useArrayReduce/index.d.ts");H(x0e,"dist/node_modules/@solidjs-use/shared/useArraySome/index.d.ts");H(k0e,"dist/node_modules/@solidjs-use/shared/useArrayUnique/index.d.ts");H(L0e,"dist/node_modules/@solidjs-use/shared/useAsyncQueue/index.d.ts");H(T0e,"dist/node_modules/@solidjs-use/shared/useCounter/index.d.ts");H(D0e,"dist/node_modules/@solidjs-use/shared/useDateFormat/index.d.ts");H(E0e,"dist/node_modules/@solidjs-use/shared/useDebounceFn/index.d.ts");H(A0e,"dist/node_modules/@solidjs-use/shared/useInterval/index.d.ts");H(I0e,"dist/node_modules/@solidjs-use/shared/useIntervalFn/index.d.ts");H(N0e,"dist/node_modules/@solidjs-use/shared/useLastChanged/index.d.ts");H(M0e,"dist/node_modules/@solidjs-use/shared/useSorted/index.d.ts");H(R0e,"dist/node_modules/@solidjs-use/shared/useThrottleFn/index.d.ts");H(O0e,"dist/node_modules/@solidjs-use/shared/useTimeout/index.d.ts");H(P0e,"dist/node_modules/@solidjs-use/shared/useTimeoutFn/index.d.ts");H(F0e,"dist/node_modules/@solidjs-use/shared/useTimeoutPoll/index.d.ts");H(B0e,"dist/node_modules/@solidjs-use/shared/useToNumber/index.d.ts");H(W0e,"dist/node_modules/@solidjs-use/shared/useToString/index.d.ts");H(V0e,"dist/node_modules/@solidjs-use/shared/useToggle/index.d.ts");H(H0e,"dist/node_modules/@solidjs-use/shared/utils/filters.d.ts");H(U0e,"dist/node_modules/@solidjs-use/shared/utils/index.d.ts");H(j0e,"dist/node_modules/@solidjs-use/shared/utils/is.d.ts");H($0e,"dist/node_modules/@solidjs-use/shared/utils/types.d.ts");H(z0e,"dist/node_modules/@solidjs-use/shared/watch/index.d.ts");H(K0e,"dist/node_modules/@solidjs-use/shared/watchArray/index.d.ts");H(G0e,"dist/node_modules/@solidjs-use/shared/watchAtMost/index.d.ts");H(q0e,"dist/node_modules/@solidjs-use/shared/watchDebounced/index.d.ts");H(Z0e,"dist/node_modules/@solidjs-use/shared/watchIgnorable/index.d.ts");H(Y0e,"dist/node_modules/@solidjs-use/shared/watchOnce/index.d.ts");H(X0e,"dist/node_modules/@solidjs-use/shared/watchPausable/index.d.ts");H(Q0e,"dist/node_modules/@solidjs-use/shared/watchThrottled/index.d.ts");H(J0e,"dist/node_modules/@solidjs-use/shared/watchTriggerable/index.d.ts");H(eCe,"dist/node_modules/@solidjs-use/shared/watchWithFilter/index.d.ts");H(tCe,"dist/node_modules/@solidjs-use/shared/whenever/index.d.ts");H(nCe,"dist/node_modules/@solidjs-use/shared/node_modules/@solidjs-use/solid-to-vue/index.d.ts");const UW={strict:!0,target:us.typescript.ScriptTarget.ESNext,module:us.typescript.ModuleKind.ESNext,moduleResolution:us.typescript.ModuleResolutionKind.NodeJs,jsx:us.typescript.JsxEmit.Preserve,jsxImportSource:"solid-js",allowNonTsExtensions:!0};us.typescript.typescriptDefaults.setCompilerOptions(UW);us.typescript.javascriptDefaults.setCompilerOptions(UW);let sk;const iCe=new kme({async getGrammarDefinition(r){return{format:"json",content:r==="source.tsx"?Pme:jme}}}),Hw=new Map;Hw.set("typescript","source.tsx");Hw.set("javascript","source.tsx");Hw.set("css","source.css");Br.defineTheme("vs-dark-plus",cpe);Br.defineTheme("vs-light-plus",ppe);const sCe=us.setLanguageConfiguration;us.setLanguageConfiguration=(r,e)=>(jW(),sCe(r,e));async function jW(){sk||(sk=Rpe(window.MonacoEnvironment.onigasm)),await sk,await HW({languages:us},iCe,Hw)}const rCe=Ei('<div class="h-full min-h-0 p-0"></div>'),IF=r=>{let e,t;const{zoomState:n}=MF(),i=()=>Br.getModel(S_.parse(r.url));if(r.formatter&&us.registerDocumentFormattingEditProvider("typescript",{async provideDocumentFormattingEdits(o){return r.formatter.postMessage({event:"FORMAT",code:o.getValue(),pos:t.getPosition()}),new Promise(a=>{r.formatter.addEventListener("message",({data:{code:l}})=>{a([{range:o.getFullModelRange(),text:l}])},{once:!0})})}}),r.linter){const o=({data:a})=>{if(r.displayErrors){const{event:l}=a;if(l==="LINT"){const c=i();c&&Br.setModelMarkers(c,"eslint",a.markers)}else if(l==="FIX"){const c=i();c&&Br.setModelMarkers(c,"eslint",a.markers),a.fixed&&i()?.setValue(a.output)}}};r.linter.addEventListener("message",o),Dl(()=>r.linter?.removeEventListener("message",o))}const s=W0(o=>{if(r.linter&&r.displayErrors){const a={event:"LINT",code:o};r.linter.postMessage(a)}},250);return tM(()=>{t=Br.create(e,{model:null,automaticLayout:!0,readOnly:r.disabled,fontSize:n.fontSize,lineDecorationsWidth:5,lineNumbersMinChars:3,padding:{top:15},minimap:{enabled:r.withMinimap}}),r.linter&&t.addAction({id:"eslint.executeAutofix",label:"Fix all auto-fixable problems",contextMenuGroupId:"1_modification",contextMenuOrder:3.5,run:o=>{const a=o.getValue();if(a){const l={event:"FIX",code:a};r.linter?.postMessage(l)}}}),t.addCommand(x7.CtrlCmd|S7.KeyS,()=>{t&&(t.getAction("editor.action.formatDocument")?.run(),r.displayErrors&&t.getAction("eslint.executeAutofix")?.run(),t.focus())}),t.onDidChangeModelContent(()=>{const o=t.getValue();r.onDocChange?.(o),s(o)})}),Dl(()=>t?.dispose()),Hs(()=>{t.setModel(i()),jW()}),Hs(()=>{Br.setTheme(r.isDark?"vs-dark-plus":"vs-light-plus")}),Hs(()=>{const o=n.fontSize;t.updateOptions({fontSize:o})}),Hs(()=>{us.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!r.displayErrors,noSyntaxValidation:!r.displayErrors})}),Hs(()=>{if(r.displayErrors)s(t.getValue());else{const o=i();o&&Br.setModelMarkers(o,"eslint",[])}}),tM(()=>{r.onEditorReady?.(t,{Uri:S_,editor:Br})}),(()=>{const o=rCe.cloneNode(!0),a=e;return typeof a=="function"?Sm(a,o):e=o,o})()},oCe=Ei('<li class="m-0 inline-flex items-center border-b-2 border-transparent"><button type="button" title="Add a new tab"><span class="sr-only">Add a new tab</span><svg viewBox="0 0 24 24" style="stroke: currentColor; fill: none;" class="text-brand-default h-5 dark:text-slate-50"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button></li>'),aCe=Ei('<label class="cursor-pointer space-x-2 px-3 py-2"><input type="checkbox" name="display-errors"><span>Display Errors</span></label>'),lCe=Ei('<button type="button" title="Refresh the page" class="py-2 px-3 active:animate-spin disabled:cursor-not-allowed disabled:opacity-25"><span class="sr-only">Refresh the page</span></button>'),cCe=Ei('<button type="button" title="Open the devtools" class="py-2 px-3 disabled:cursor-not-allowed disabled:opacity-25"><span class="sr-only">Open the devtools</span></button>'),dCe=Ei('<button type="button" class="-mb-0.5 w-full py-2">Result</button>'),uCe=Ei('<button type="button" class="-mb-0.5 w-full py-2">Output</button>'),hCe=Ei('<section class="relative flex h-full flex-col divide-y-2 divide-slate-200 dark:divide-neutral-800"><div class="p-5"><label class="text-sm font-semibold uppercase">Compile mode</label><div class="mt-1 space-y-1 text-sm"><label class="mr-auto block cursor-pointer space-x-2"><input value="DOM" class="text-brand-default" type="radio" name="dom"><span>Client side rendering</span></label><label class="mr-auto block cursor-pointer space-x-2"><input value="SSR" class="text-brand-default" type="radio" name="dom"><span>Server side rendering</span></label><label class="mr-auto block cursor-pointer space-x-2"><input value="HYDRATABLE" class="text-brand-default" type="radio" name="dom"><span>Client side rendering with hydration</span></label></div></div></section>'),fCe=Ei('<div class="dark:bg-solid-darkbg grid h-full min-h-0 bg-white font-sans text-black dark:text-white"><div class="flex h-full flex-col"></div><div class="flex h-full flex-col"></div></div>'),gCe=Ei('<div class="cursor-pointer select-none rounded border border-solid border-transparent py-2 px-3 transition focus:border-blue-600 focus:outline-none"></div>'),pCe=Ei('<button type="button" class="cursor-pointer"><span class="sr-only">Delete this tab</span><svg style="stroke: currentColor; fill: none;" class="h-4 opacity-60" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),Zl={SSR:{generate:"ssr",hydratable:!0},DOM:{generate:"dom",hydratable:!1},HYDRATABLE:{generate:"dom",hydratable:!0}},mCe=r=>{const{compiler:e,formatter:t,linter:n}=r;let i;const s=new Map,[o,a]=Cs(""),[l,c]=Cs(""),[d,u]=Cs(Zl.DOM);function h(Te){r.tabs.findIndex(oe=>oe.name===Te)<0||r.setCurrent(Te)}function f(Te){const ce=r.tabs;ce.find(oe=>oe.name===r.current).name=Te,jw(()=>{r.setTabs([...ce]),r.setCurrent(Te)})}function g(Te){const ce=r.tabs,oe=ce.findIndex(it=>it.name===Te),re=ce[oe];!re||!confirm(`Are you sure you want to delete ${re.name}?`)||jw(()=>{r.setTabs([...ce.slice(0,oe),...ce.slice(oe+1)]),r.current===Te&&r.setCurrent(ce[oe-1].name)})}function _(){const Te={name:`tab${r.tabs.length}.tsx`,source:""};jw(()=>{r.setTabs(r.tabs.concat(Te)),r.setCurrent(Te.name)})}const[b,v]=Cs(-1),[C,y]=Cs(0);let w;Hs(()=>{const Te=S_.parse(`file:///${r.id}/output_dont_import.tsx`);w=Br.createModel("","typescript",Te),Dl(()=>w.dispose())}),e.addEventListener("message",({data:Te})=>{const{event:ce,compiled:oe,error:re}=Te;if(ce==="ERROR")return a(re);a(""),ce==="ROLLUP"?c(oe):ce==="BABEL"&&w.setValue(oe),console.log(`Compilation took: ${performance.now()-i}ms`)});const L=W0(Te=>{i=performance.now(),e.postMessage(Te)},250),T=()=>{L(C()==0?{event:"ROLLUP",tabs:iM(r.tabs)}:{event:"BABEL",tab:iM(r.tabs.find(Te=>Te.name==r.current)),compileOpts:d()})};Hs(()=>{r.tabs.length&&T()});const S=(Te,ce,oe)=>Math.min(Math.max(Te,ce),oe);let k,D;const[O,F]=Cs(1.25),U=OF("(min-width: 768px)"),K=()=>r.isHorizontal||!U(),ae=(Te,ce)=>{let oe,re;const pe=k.getBoundingClientRect();K()?(oe=ce-pe.top-D.offsetHeight/2,re=k.offsetHeight-D.offsetHeight):(oe=Te-pe.left-D.offsetWidth/2,re=k.offsetWidth-D.offsetWidth);const it=oe/re,Mt=S(it*2,.5,1.5);F(Mt)},[fe,we]=Cs(!1,{equals:!1}),[xe,De]=Cs(!0),[Oe,nt]=Cs(!0);return(()=>{const Te=fCe.cloneNode(!0),ce=Te.firstChild,oe=ce.nextSibling,re=k;return typeof re=="function"?Sm(re,Te):k=Te,ji(ce,hn(sM,{get children(){return[hn(YW,{get each(){return r.tabs},children:(pe,it)=>hn(ah,{get active(){return r.current===pe.name},class:"mr-2",get children(){return[(()=>{const Mt=gCe.cloneNode(!0);return Mt.$$dblclick=cn=>{cn.preventDefault(),v(it()),s.get(pe.name)?.focus()},Mt.$$click=()=>h(pe.name),Mt.$$keydown=cn=>{cn.code==="Space"&&cn.preventDefault(),cn.code==="Enter"&&(v(-1),f(cn.currentTarget.textContent))},Mt.addEventListener("blur",cn=>{v(-1),f(cn.currentTarget.textContent)}),Sm(cn=>s.set(pe.name,cn),Mt),ji(Mt,()=>pe.name),rr(()=>NF(Mt,"contenteditable",b()==it())),Mt})(),hn(Uw,{get when(){return it()>0},get children(){const Mt=pCe.cloneNode(!0);return Mt.$$click=()=>{g(pe.name)},Mt}})]}})}),(()=>{const pe=oCe.cloneNode(!0),it=pe.firstChild;return it.$$click=_,pe})(),hn(ah,{class:"ml-auto justify-self-end",get children(){const pe=aCe.cloneNode(!0),it=pe.firstChild;return it.addEventListener("change",Mt=>nt(Mt.currentTarget.checked)),rr(()=>it.checked=Oe()),pe}})]}}),null),ji(ce,hn(ipe,{get tabs(){return r.tabs},get folder(){return r.id}}),null),ji(ce,hn(Uw,{get when(){return r.current},get children(){return hn(IF,{get url(){return`file:///${r.id}/${r.current}`},onDocChange:()=>T(),formatter:t,linter:n,get isDark(){return r.dark},withMinimap:!1,get onEditorReady(){return r.onEditorReady},get displayErrors(){return Oe()}})}}),null),ji(ce,hn(Uw,{get when(){return XW(()=>!!Oe())()&&o()},get children(){return hn(p6,{onDismiss:()=>a(""),get message(){return o()}})}}),null),ji(Te,hn(l6,{ref(pe){const it=D;typeof it=="function"?it(pe):D=pe},get isHorizontal(){return K()},onResize:ae}),oe),ji(oe,hn(sM,{get children(){return[hn(ah,{get children(){const pe=lCe.cloneNode(!0);return pe.firstChild,pe.$$click=we,pe.$$clickData=!0,ji(pe,hn(rk,{path:QW,class:"h-5"}),null),rr(()=>pe.disabled=C()!=0),pe}}),hn(ah,{get children(){const pe=cCe.cloneNode(!0);return pe.firstChild,pe.$$click=()=>De(!xe()),ji(pe,hn(rk,{path:JW,class:"h-5"}),null),rr(()=>pe.disabled=C()!=0),pe}}),hn(ah,{class:"flex-1",get active(){return C()==0},get children(){const pe=dCe.cloneNode(!0);return pe.$$click=y,pe.$$clickData=0,pe}}),hn(ah,{class:"flex-1",get active(){return C()==1},get children(){const pe=uCe.cloneNode(!0);return pe.$$click=()=>{y(1),u(Zl.DOM)},pe}})]}}),null),ji(oe,hn(e6,{get children(){return[hn(nM,{get when(){return C()==0},get children(){return hn(i6,{get reloadSignal(){return fe()},get devtools(){return xe()},get isDark(){return r.dark},get code(){return l()},get classList(){return{"md:row-start-2":!r.isHorizontal}}})}}),hn(nM,{get when(){return C()==1},get children(){const pe=hCe.cloneNode(!0),it=pe.firstChild,Mt=it.firstChild,cn=Mt.nextSibling,gi=cn.firstChild,Ii=gi.firstChild,Ne=gi.nextSibling,Vi=Ne.firstChild,Ra=Ne.nextSibling,Bo=Ra.firstChild;return ji(pe,hn(IF,{get url(){return`file:///${r.id}/output_dont_import.tsx`},get isDark(){return r.dark},disabled:!0,withMinimap:!1}),it),Ii.addEventListener("change",jn=>u(Zl.DOM,jn)),Vi.addEventListener("change",jn=>u(Zl.SSR,jn)),Bo.addEventListener("change",jn=>u(Zl.HYDRATABLE,jn)),rr(()=>Ii.checked=d()===Zl.DOM),rr(()=>Vi.checked=d()===Zl.SSR),rr(()=>Bo.checked=d()===Zl.HYDRATABLE),pe}})]}}),null),rr(pe=>{const it=!!r.isHorizontal,Mt=!r.isHorizontal,cn=!!r.dark,gi=`${O()}fr`,Ii=`${2-O()}fr`;return it!==pe._v$&&Te.classList.toggle("wrapper--forced",pe._v$=it),Mt!==pe._v$2&&Te.classList.toggle("wrapper",pe._v$2=Mt),cn!==pe._v$3&&Te.classList.toggle("dark",pe._v$3=cn),gi!==pe._v$4&&Te.style.setProperty("--left",pe._v$4=gi),Ii!==pe._v$5&&Te.style.setProperty("--right",pe._v$5=Ii),pe},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),Te})()};t6(["click","keydown","dblclick"]);const lwe=Object.freeze(Object.defineProperty({__proto__:null,default:mCe},Symbol.toStringTag,{value:"Module"}));export{vb as m,lwe as r,V7 as t};
